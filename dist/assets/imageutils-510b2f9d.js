import{E as o,dK as c,dL as f}from"./index-b51e75d5.js";function m(e){const t=i(e);return t!=null?t.toDataURL():""}async function p(e){const t=i(e);if(t==null)throw new o("imageToArrayBuffer","Unsupported image type");const n=await u(e),r=await new Promise(a=>t.toBlob(a,n));if(!r)throw new o("imageToArrayBuffer","Failed to encode image");return{data:await r.arrayBuffer(),type:n}}async function u(e){if(!(e instanceof HTMLImageElement))return"image/png";const t=e.src;if(c(t)){const n=f(t);return(n==null?void 0:n.mediaType)==="image/jpeg"?n.mediaType:"image/png"}return/\.png$/i.test(t)?"image/png":/\.(jpg|jpeg)$/i.test(t)?"image/jpeg":"image/png"}function i(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");return e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),t}function d(e){const t=[],n=new Uint8Array(e);for(let a=0;a<n.length;a++)t.push(String.fromCharCode(n[a]));return"data:application/octet-stream;base64,"+btoa(t.join(""))}function l(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}export{p as a,m as b,l as c,d as e,i};
