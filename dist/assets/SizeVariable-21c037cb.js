import{ae as n,af as r,ai as T,bD as R,cE as M,cG as F,ag as $,bF as q,dX as Ie,L as j,dY as Te,cF as me,ah as je,dZ as De,ax as le,bG as Ce,E as Fe}from"./index-a9c4c008.js";import{t as _e,f as Ee}from"./colorRamps-a8ae4226.js";import{L as ke}from"./LegendOptions-2499ed1a.js";import{T as I,I as J,a as L,i as E,g as Re,b as Ae}from"./sizeVariableUtils-2914222a.js";import{m as Me}from"./lengthUtils-73ca5ae7.js";var X;let U=X=class extends R{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new X({minValue:this.minValue,maxValue:this.maxValue})}};n([r({type:Number,json:{write:!0}})],U.prototype,"minValue",void 0);n([r({type:Number,json:{write:!0}})],U.prototype,"maxValue",void 0);U=X=n([T("esri.renderer.support.AuthoringInfoClassBreakInfo")],U);var Y;let D=Y=class extends R{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new Y({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:M(this.classBreakInfos)})}};n([r({type:String,json:{write:!0}})],D.prototype,"field",void 0);n([r({type:String,json:{write:!0}})],D.prototype,"normalizationField",void 0);n([r({type:String,json:{write:!0}})],D.prototype,"label",void 0);n([r({type:[U],json:{write:!0}})],D.prototype,"classBreakInfos",void 0);D=Y=n([T("esri.renderers.support.AuthoringInfoFieldInfo")],D);var Z;const N=new F({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),B=new F({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),we={key(s){return typeof s=="number"?"number":"string"},typeMap:{number:Number,string:String},base:null},oe=["high-to-low","above-and-below","centered-on","extremes"],Le=["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"],Ue=["high-to-low","above-and-below","90-10","above","below"],ue=[...new Set([...Le,...Ue])],ce=["seconds","minutes","hours","days","months","years"];let b=Z=class extends R{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new Z({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};n([r({types:we,json:{write:!0}})],b.prototype,"endTime",void 0);n([$("endTime")],b.prototype,"castEndTime",null);n([r({type:String,json:{write:!0}})],b.prototype,"field",void 0);n([r({type:Number,json:{write:!0}})],b.prototype,"maxSliderValue",void 0);n([r({type:Number,json:{write:!0}})],b.prototype,"minSliderValue",void 0);n([r({types:we,json:{write:!0}})],b.prototype,"startTime",void 0);n([$("startTime")],b.prototype,"castStartTime",null);n([r({type:N.apiValues,value:null,json:{type:N.jsonValues,read:N.read,write:N.write}})],b.prototype,"style",null);n([r({type:ue,value:null,json:{type:ue,origins:{"web-scene":{type:oe,write:{writer:(s,e)=>{oe.includes(s)&&(e.theme=s)}}}},write:!0}})],b.prototype,"theme",null);n([r({type:B.apiValues,json:{type:B.jsonValues,read:B.read,write:B.write}})],b.prototype,"type",void 0);n([r({type:ce,json:{type:ce,write:!0}})],b.prototype,"units",void 0);b=Z=n([T("esri.renderers.support.AuthoringInfoVisualVariable")],b);const $e=b;var ee;const _=new F({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),P=new F({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),pe=new F({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),de=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],qe=["high-to-low","above-and-below","above","below","90-10"],Ne=["flow-line","wave-front"],Be=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let y=ee=class extends R{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),i=this.type;return!i||i==="relationship"?e:i==="class-breaks-size"||i==="class-breaks-color"?e||"manual":null}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Ee(e):void 0}get fields(){return!this.type||this.type==="predominance"?this._get("fields"):null}set fields(e){this._set("fields",e)}get field1(){return!this.type||this.type==="relationship"?this._get("field1"):null}set field1(e){this._set("field1",e)}get field2(){return!this.type||this.type==="relationship"?this._get("field2"):null}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return!this.type||this.type==="relationship"?this._get("focus"):null}set focus(e){this._set("focus",e)}get numClasses(){return!this.type||this.type==="relationship"?this._get("numClasses"):null}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return(!e||e==="relationship"||e==="class-breaks-size"||e==="class-breaks-color")&&(!this.classificationMethod||this.classificationMethod==="standard-deviation")?this._get("standardDeviationInterval"):null}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let i=e;e==="classed-size"?i="class-breaks-size":e==="classed-color"&&(i="class-breaks-color"),this._set("type",i)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new ee({classificationMethod:this.classificationMethod,colorRamp:M(this.colorRamp),fadeRatio:M(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:M(this.field1),field2:M(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};n([r({type:_.apiValues,value:null,json:{type:_.jsonValues,read:_.read,write:_.write,origins:{"web-document":{default:"manual",type:_.jsonValues,read:_.read,write:_.write}}}})],y.prototype,"classificationMethod",null);n([r({types:_e,json:{write:!0}})],y.prototype,"colorRamp",void 0);n([q("colorRamp")],y.prototype,"readColorRamp",null);n([r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"fadeRatio",void 0);n([r({type:[String],value:null,json:{write:!0}})],y.prototype,"fields",null);n([r({type:D,value:null,json:{write:!0}})],y.prototype,"field1",null);n([r({type:D,value:null,json:{write:!0}})],y.prototype,"field2",null);n([r({type:Ne,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"flowTheme",null);n([r({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],y.prototype,"focus",null);n([r({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],y.prototype,"isAutoGenerated",void 0);n([r({type:Number,value:null,json:{type:Ie,write:!0}})],y.prototype,"numClasses",null);n([r({type:de,json:{type:de,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],y.prototype,"lengthUnit",void 0);n([r({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"maxSliderValue",void 0);n([r({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"minSliderValue",void 0);n([r({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],y.prototype,"statistics",null);n([r({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],y.prototype,"standardDeviationInterval",null);n([r({type:P.apiValues,value:null,json:{type:P.jsonValues,read:P.read,write:P.write,origins:{"web-scene":{type:pe.jsonValues,write:{writer:pe.write,overridePolicy(s){return{enabled:s!=="flow"}}}}}}})],y.prototype,"type",null);n([r({type:[$e],json:{write:!0}})],y.prototype,"visualVariables",void 0);n([r({type:Be,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"univariateSymbolStyle",null);n([r({type:qe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"univariateTheme",null);y=ee=n([T("esri.renderers.support.AuthoringInfo")],y);const dt=y;var te;let K=te=class extends ke{constructor(){super(...arguments),this.showLegend=null}clone(){return new te({title:this.title,showLegend:this.showLegend})}};n([r({type:Boolean,json:{write:!0}})],K.prototype,"showLegend",void 0);K=te=n([T("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],K);const ge=K,Q=new F({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let x=class extends R{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(j.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Te(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};n([r()],x.prototype,"index",void 0);n([r({type:Q.apiValues,readOnly:!0,json:{read:Q.read,write:Q.write}})],x.prototype,"type",void 0);n([r({type:String,json:{write:!0}})],x.prototype,"field",void 0);n([$("field")],x.prototype,"castField",null);n([r({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0);n([r({type:String,json:{write:!0}})],x.prototype,"valueExpressionTitle",void 0);n([r({readOnly:!0})],x.prototype,"arcadeRequired",null);n([r({type:ge,json:{write:!0}})],x.prototype,"legendOptions",void 0);x=n([T("esri.renderers.visualVariables.VisualVariable")],x);const Pe=x;var ie;let k=ie=class extends R{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new ie({label:this.label,size:this.size,value:this.value})}};n([r({type:String,json:{write:!0}})],k.prototype,"label",void 0);n([r({type:Number,cast:me,json:{write:!0}})],k.prototype,"size",void 0);n([r({type:Number,json:{write:!0}})],k.prototype,"value",void 0);k=ie=n([T("esri.renderers.visualVariables.support.SizeStop")],k);const Oe=k;var se;let H=se=class extends ge{constructor(){super(...arguments),this.customValues=null}clone(){return new se({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};n([r({type:[Number],json:{write:!0}})],H.prototype,"customValues",void 0);H=se=n([T("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],H);const Ge=H,C=j.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),he=new je,G=Math.PI,Se=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Ve(s,e,i){const t="visualVariables"in s&&s.visualVariables?s.visualVariables.find(p=>p.type==="color"):s;if(!t)return;if(t.declaredClass!=="esri.renderers.visualVariables.ColorVariable"){C.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");return}const l=typeof e=="number",a=l?null:e,u=a&&a.attributes;let c=l?e:null;const o=t.field,{ipData:h,hasExpression:g}=t.cache;let f=t.cache.compiledFunc;if(!o&&!g){const p=t.stops;return p&&p[0]&&p[0].color}if(typeof c!="number")if(g){if(i==null||i.arcade==null){C.error("Use of arcade expressions requires an arcade context");return}const p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,v=w.getViewInfo(p),z=w.createExecContext(a,v);if(!f){const A=w.createSyntaxTree(t.valueExpression);f=w.createFunction(A),t.cache.compiledFunc=f}c=w.executeFunction(f,z)}else u&&(c=u[o]);const m=t.normalizationField,S=u!=null&&m!=null?parseFloat(u[m]):void 0;if(c!=null&&(!m||l||!isNaN(S)&&S!==0)){!isNaN(S)&&!l&&(c=c/S);const p=ae(c,h);if(p){const w=p[0],v=p[1],z=w===v?t.stops[w].color:le.blendColors(t.stops[w].color,t.stops[v].color,p[2],i!=null?i.color:void 0);return new le(z)}}}function be(s,e,i){const t="visualVariables"in s&&s.visualVariables?s.visualVariables.find(p=>p.type==="opacity"):s;if(!t)return;if(t.declaredClass!=="esri.renderers.visualVariables.OpacityVariable"){C.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");return}const l=typeof e=="number",a=l?null:e,u=a&&a.attributes;let c=l?e:null;const o=t.field,{ipData:h,hasExpression:g}=t.cache;let f=t.cache.compiledFunc;if(!o&&!g){const p=t.stops;return p&&p[0]&&p[0].opacity}if(typeof c!="number")if(g){if(i==null||i.arcade==null){C.error("Use of arcade expressions requires an arcade context");return}const p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,v=w.getViewInfo(p),z=w.createExecContext(a,v);if(!f){const A=w.createSyntaxTree(t.valueExpression);f=w.createFunction(A),t.cache.compiledFunc=f}c=w.executeFunction(f,z)}else u&&(c=u[o]);const m=t.normalizationField,S=u!=null&&m!=null?parseFloat(u[m]):void 0;if(c!=null&&(!m||l||!isNaN(S)&&S!==0)){!isNaN(S)&&!l&&(c=c/S);const p=ae(c,h);if(p){const w=p[0],v=p[1];if(w===v)return t.stops[w].opacity;{const z=t.stops[w].opacity,A=t.stops[v].opacity;return z+(A-z)*p[2]}}}}function ve(s,e,i){const t="visualVariables"in s&&s.visualVariables?s.visualVariables.find(S=>S.type==="rotation"):s;if(!t)return;if(t.declaredClass!=="esri.renderers.visualVariables.RotationVariable"){C.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");return}const l=t.axis||"heading",a=l==="heading"&&t.rotationType==="arithmetic"?90:0,u=l==="heading"&&t.rotationType==="arithmetic"?-1:1,c=typeof e=="number"?null:e,o=c&&c.attributes,h=t.field,{hasExpression:g}=t.cache;let f=t.cache.compiledFunc,m=0;if(!h&&!g)return m;if(g){if(i==null||i.arcade==null){C.error("Use of arcade expressions requires an arcade context");return}const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,w=p.getViewInfo(S),v=p.createExecContext(c,w);if(!f){const z=p.createSyntaxTree(t.valueExpression);f=p.createFunction(z),t.cache.compiledFunc=f}m=p.executeFunction(f,v)}else o&&(m=o[h]||0);return typeof m=="number"&&!isNaN(m)?m=a+u*m:m=null,m}function Ke(s,e,i){const t=typeof e=="number",l=t?null:e,a=l&&l.attributes;let u=t?e:null;const{isScaleDriven:c}=s.cache;let o=s.cache.compiledFunc;if(c){const g=i!=null?i.scale:void 0,f=i!=null?i.view:void 0;u=g==null||f==="3d"?He(s):g}else if(!t)switch(s.inputValueType){case J.Expression:{if(i==null||i.arcade==null){C.error("Use of arcade expressions requires an arcade context");return}const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,m=f.getViewInfo(g),S=f.createExecContext(l,m);if(!o){const p=f.createSyntaxTree(s.valueExpression);o=f.createFunction(p),s.cache.compiledFunc=o}u=f.executeFunction(o,S);break}case J.Field:{a&&(u=a[s.field]);break}case J.Unknown:{u=null;break}}if(!L(u))return null;if(t||!s.normalizationField)return u;const h=a?parseFloat(a[s.normalizationField]):null;return!L(h)||h===0?null:u/h}function He(s){let e=null,i=null;const t=s.stops;return t?(e=t[0].value,i=t[t.length-1].value):(e=s.minDataValue||0,i=s.maxDataValue||0),(e+i)/2}function W(s,e,i){const t="visualVariables"in s&&s.visualVariables?s.visualVariables.find(u=>u.type==="size"):s;if(!t)return;if(t.declaredClass!=="esri.renderers.visualVariables.SizeVariable"){C.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");return}const l=Ke(t,e,i),a=ze(l,t,e,i,t.cache.ipData);return a==null||isNaN(a)?0:a}function V(s,e,i){return s==null?null:E(s)?W(s,e,i):L(s)?s:null}function xe(s,e,i){return L(i)&&s>i?i:L(e)&&s<e?e:s}function We(s,e,i,t){const l=V(e.minSize,i,t);return s+((l||e.minDataValue)??0)}function Je(s,e,i){const t=s.stops;let l=t&&t.length&&t[0].size;return l==null&&(l=s.minSize),V(l,e,i)}function Qe(s,e,i,t){const l=(s-e.minDataValue)/(e.maxDataValue-e.minDataValue),a=V(e.minSize,i,t),u=V(e.maxSize,i,t),c=t!=null?t.shape:void 0;if(s<=e.minDataValue)return a;if(s>=e.maxDataValue)return u;if(a==null||u==null)return null;if(e.scaleBy==="area"&&c){const o=c==="circle",h=o?G*(a/2)**2:a*a,g=o?G*(u/2)**2:u*u,f=h+l*(g-h);return o?2*Math.sqrt(f/G):Math.sqrt(f)}return a+l*(u-a)}function Xe(s,e,i,t){const l=t!=null?t.shape:void 0,a=s/e.minDataValue,u=V(e.minSize,i,t),c=V(e.maxSize,i,t);let o=null;return l==="circle"?o=2*Math.sqrt(a*(u/2)**2):l==="square"||l==="diamond"||l==="image"?o=Math.sqrt(a*u**2):o=a*u,xe(o,u,c)}function Ye(s,e,i,t,l){var o,h,g;const[a,u,c]=ae(s,l);if(a===u)return V((o=e.stops)==null?void 0:o[a].size,i,t);{const f=V((h=e.stops)==null?void 0:h[a].size,i,t),m=V((g=e.stops)==null?void 0:g[u].size,i,t);return f+(m-f)*c}}function Ze(s,e,i,t){const a=(t!=null&&t.resolution?t.resolution:1)*Me[e.valueUnit],u=V(e.minSize,i,t),c=V(e.maxSize,i,t),{valueRepresentation:o}=e;let h=null;return o==="area"?h=2*Math.sqrt(s/G)/a:o==="radius"||o==="distance"?h=2*s/a:h=s/a,xe(h,u,c)}function ze(s,e,i,t,l){switch(e.transformationType){case I.Additive:return We(s,e,i,t);case I.Constant:return Je(e,i,t);case I.ClampedLinear:return Qe(s,e,i,t);case I.Proportional:return Xe(s,e,i,t);case I.Stops:return Ye(s,e,i,t,l);case I.RealWorldSize:return Ze(s,e,i,t);case I.Identity:return s;case I.Unknown:return null}}function et(s,e,i){const{isScaleDriven:t}=s.cache;if(!(t&&i==="3d")&&!e)return null;const a={scale:e,view:i};let u=V(s.minSize,he,a),c=V(s.maxSize,he,a);if(u!=null||c!=null){if(u>c){const o=c;c=u,u=o}return{minSize:u,maxSize:c}}}function tt(s,e,i){if(!s.visualVariables)return;const t=[],l=[],a=[],u=[],c=[];for(const o of s.visualVariables)switch(o.type){case"color":l.push(o);break;case"opacity":a.push(o);break;case"rotation":c.push(o);break;case"size":u.push(o);break}return l.forEach(o=>{const h=Ve(o,e,i);t.push({variable:o,value:h})}),a.forEach(o=>{const h=be(o,e,i);t.push({variable:o,value:h})}),c.forEach(o=>{const h=ve(o,e,i);t.push({variable:o,value:h})}),u.forEach(o=>{const h=W(o,e,i);t.push({variable:o,value:h})}),t.filter(o=>o.value!=null)}function ae(s,e){if(!e)return;let i=0,t=e.length-1;return e.some((l,a)=>s<l?(t=a,!0):(i=a,!1)),[i,t,(s-e[i])/(e[t]-e[i])]}function it(s,e,i){const t=["proportional","proportional","proportional"];for(const l of s){const a=l.useSymbolValue?"symbol-value":W(l,e,i);switch(l.axis){case"width":t[0]=a;break;case"depth":t[1]=a;break;case"height":t[2]=a;break;case"width-and-depth":t[0]=a,t[1]=a;break;case"all":case void 0:case null:t[0]=a,t[1]=a,t[2]=a;break;default:De(l.axis);break}}return t}const wt=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:it,getColor:Ve,getOpacity:be,getRotationAngle:ve,getSize:W,getSizeForValue:ze,getSizeFromNumberOrVariable:V,getSizeRangeAtScale:et,getVisualVariableValues:tt,viewScaleRE:Se},Symbol.toStringTag,{value:"Module"}));var ne;const O=new F({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),re=new F({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function fe(s){if(s!=null){if(typeof s=="string"||typeof s=="number")return me(s);if(s.type==="size")return E(s)?s:(s={...s},delete s.type,new d(s))}}function ye(s,e,i){if(typeof s!="object")return s;const t=new d;return t.read(s,i),t}let d=ne=class extends Pe{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Se.test(this.valueExpression)}}set expression(e){j.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){E(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),E(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return Re(this)}set maxDataValue(e){e&&this.stops&&(j.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(j.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return fe(e)}readMaxSize(e,i,t){return ye(e,i,t)}set minDataValue(e){e&&this.stops&&(j.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(j.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return fe(e)}readMinSize(e,i,t){return ye(e,i,t)}get arcadeRequired(){return this.valueExpression?!0:this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(i=>!!i),e.sort((i,t)=>i.value-t.value)):e&&(j.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Ae(this,this.inputValueType)}readValueExpression(e,i){return e||i.expression&&"$view.scale"}writeValueExpressionWebScene(e,i,t,l){if(e==="$view.scale"){if(l&&l.messages){const a=this.index,u=typeof a=="string"?a:`visualVariables[${a}]`;l.messages.push(new Fe("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:u+".valueExpression",context:l}))}}else i[t]=e}readValueUnit(e){return e?re.read(e):null}clone(){return new ne({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:E(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:E(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===I.ClampedLinear){const{minSize:e,maxSize:i}=this;return this.minSize=i,this.maxSize=e,this}if(this.transformationType===I.Stops){const e=this.stops;if(!e)return this;const i=e.map(l=>l.size).reverse(),t=e.length;for(let l=0;l<t;l++)e[l].size=i[l];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};n([r({readOnly:!0})],d.prototype,"cache",null);n([r({type:O.apiValues,json:{type:O.jsonValues,origins:{"web-map":{read:!1}},read:O.read,write:O.write}})],d.prototype,"axis",void 0);n([r({type:String,value:null,json:{read:!1}})],d.prototype,"expression",null);n([r()],d.prototype,"index",null);n([r({type:String,readOnly:!0})],d.prototype,"inputValueType",null);n([r({type:Ge,json:{write:!0}})],d.prototype,"legendOptions",void 0);n([r({type:Number,value:null,json:{write:!0}})],d.prototype,"maxDataValue",null);n([r({type:Number,value:null,json:{write:!0}})],d.prototype,"maxSize",null);n([$("maxSize")],d.prototype,"castMaxSize",null);n([q("maxSize")],d.prototype,"readMaxSize",null);n([r({type:Number,value:null,json:{write:!0}})],d.prototype,"minDataValue",null);n([r({type:Number,value:null,json:{write:!0}})],d.prototype,"minSize",null);n([$("minSize")],d.prototype,"castMinSize",null);n([q("minSize")],d.prototype,"readMinSize",null);n([r({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);n([r({readOnly:!0})],d.prototype,"arcadeRequired",null);n([r({type:String})],d.prototype,"scaleBy",void 0);n([r({type:[Oe],value:null,json:{write:!0}})],d.prototype,"stops",null);n([r({type:["outline"],json:{write:!0}})],d.prototype,"target",void 0);n([r({type:String,readOnly:!0})],d.prototype,"transformationType",null);n([r({type:["size"],json:{type:["sizeInfo"]}})],d.prototype,"type",void 0);n([r({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],d.prototype,"useSymbolValue",void 0);n([r({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);n([q("valueExpression",["valueExpression","expression"])],d.prototype,"readValueExpression",null);n([Ce("web-scene","valueExpression")],d.prototype,"writeValueExpressionWebScene",null);n([r({type:["radius","diameter","area","width","distance"],json:{write:!0}})],d.prototype,"valueRepresentation",void 0);n([r({type:re.apiValues,json:{write:re.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],d.prototype,"valueUnit",void 0);n([q("valueUnit")],d.prototype,"readValueUnit",null);d=ne=n([T("esri.renderers.visualVariables.SizeVariable")],d);const St=d;export{dt as A,St as S,Pe as V,Oe as a,ve as b,it as g,wt as v};
