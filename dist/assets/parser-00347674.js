import{dM as j,dN as J,d9 as Yt,dO as zt,E as M,dP as qt,dQ as Gt,dR as Ht,dS as Qt}from"./index-06bb4acc.js";import{c as Vt}from"./_commonjsHelpers-725317a4.js";function ie(){const r=new Float32Array(16);return r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}ie();const Wt=(r,s)=>{const i=j(r,s,0,0,0,0,s,0,0,0,0,s,0,0,0,0,1);return J(i,i)},Kt=(r,s)=>{const i=j(r,s,0,0,.5-.5*s,0,s,0,.5-.5*s,0,0,s,.5-.5*s,0,0,0,1);return J(i,i)},Zt=(r,s)=>{const i=1-s,c=j(r,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return J(c,c)},er=(r,s)=>{const i=Math.sin(s*Math.PI/180),c=Math.cos(s*Math.PI/180),w=j(r,.213+.787*c-.213*i,.715-.715*c-.715*i,.072-.072*c+.928*i,0,.213-.213*c+.143*i,.715+.285*c+.14*i,.072-.072*c-.283*i,0,.213-.213*c-.787*i,.715-.715*c+.715*i,.072+.928*c+.072*i,0,0,0,0,1);return J(w,w)},tr=(r,s)=>{const i=1-2*s,c=s,w=j(r,i,0,0,c,0,i,0,c,0,0,i,c,0,0,0,1);return J(w,w)},rr=(r,s)=>{const i=s,c=j(r,.213+.787*i,.715-.715*i,.072-.072*i,0,.213-.213*i,.715+.285*i,.072-.072*i,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,1);return J(c,c)},ar=(r,s)=>{const i=1-s,c=j(r,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return J(c,c)};class V{constructor(s,i,c){this.strength=s,this.radius=i,this.threshold=c,this.type="bloom"}interpolate(s,i,c){this.strength=C(s.strength,i.strength,c),this.radius=C(s.radius,i.radius,c),this.threshold=C(s.threshold,i.threshold,c)}clone(){return new V(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Y(this.radius),strength:this.strength,threshold:this.threshold}}}class W{constructor(s){this.radius=s,this.type="blur"}interpolate(s,i,c){this.radius=Math.round(C(s.radius,i.radius,c))}clone(){return new W(this.radius)}toJSON(){return{type:"blur",radius:Y(this.radius)}}}class z{constructor(s,i){this.type=s,this.amount=i,(this.type==="invert"||this.type==="grayscale"||this.type==="sepia")&&(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(s,i,c){this.amount=C(s.amount,i.amount,c),this._updateMatrix()}clone(){return new z(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const s=this._colorMatrix||ie();switch(this.type){case"brightness":this._colorMatrix=Wt(s,this.amount);break;case"contrast":this._colorMatrix=Kt(s,this.amount);break;case"grayscale":this._colorMatrix=Zt(s,this.amount);break;case"invert":this._colorMatrix=tr(s,this.amount);break;case"saturate":this._colorMatrix=rr(s,this.amount);break;case"sepia":this._colorMatrix=ar(s,this.amount);break}}}class K{constructor(s,i,c,w){this.offsetX=s,this.offsetY=i,this.blurRadius=c,this.color=w,this.type="drop-shadow"}interpolate(s,i,c){this.offsetX=C(s.offsetX,i.offsetX,c),this.offsetY=C(s.offsetY,i.offsetY,c),this.blurRadius=C(s.blurRadius,i.blurRadius,c),this.color[0]=Math.round(C(s.color[0],i.color[0],c)),this.color[1]=Math.round(C(s.color[1],i.color[1],c)),this.color[2]=Math.round(C(s.color[2],i.color[2],c)),this.color[3]=C(s.color[3],i.color[3],c)}clone(){return new K(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const s=[...this.color];return s[3]*=255,{type:"drop-shadow",xoffset:Y(this.offsetX),yoffset:Y(this.offsetY),blurRadius:Y(this.blurRadius),color:s}}}class Z{constructor(s){this.angle=s,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(s,i,c){this.angle=C(s.angle,i.angle,c),this._updateMatrix()}clone(){return new Z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const s=this._colorMatrix||ie();this._colorMatrix=er(s,this.angle)}}class ee{constructor(s){this.amount=s,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(s,i,c){this.amount=C(s.amount,i.amount,c)}clone(){return new ee(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function C(r,s,i){return r+(s-r)*i}function Y(r){return Math.round(Yt(r)*1e3)/1e3}function nr(r){switch(r.type){case"grayscale":case"sepia":case"invert":return new z(r.type,0);case"saturate":case"brightness":case"contrast":return new z(r.type,1);case"opacity":return new ee(1);case"hue-rotate":return new Z(0);case"blur":return new W(0);case"drop-shadow":return new K(0,0,0,[...zt("transparent")]);case"bloom":return new V(0,0,1)}}function sr(r,s){const i=r.length>s.length?r:s;return(r.length>s.length?s:r).every((w,l)=>w.type===i[l].type)}function ir(r,s){const i=r.length>s.length?r:s,c=r.length>s.length?s:r;for(let w=c.length;w<i.length;w++)c.push(nr(i[w]))}function Nr(r){const s=r[0];return s?"type"in s:!1}var se={},or={get exports(){return se},set exports(r){se=r}};(function(r){(function(s,i){r.exports&&(r.exports=i())})(Vt,function(){function s(l,$){function t(){this.constructor=l}t.prototype=$.prototype,l.prototype=new t}function i(l,$,t,x){var m=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(m,i.prototype),m.expected=$,m.found=t,m.location=x,m.name="SyntaxError",m}s(i,Error);function c(l,$,t){return t=t||" ",l.length>$?l:($-=l.length,t+=t.repeat($),l+t.slice(0,$))}i.prototype.format=function(l){var $="Error: "+this.message;if(this.location){var t=null,x;for(x=0;x<l.length;x++)if(l[x].source===this.location.source){t=l[x].text.split(/\r\n|\n|\r/g);break}var m=this.location.start,R=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(m):m,D=this.location.source+":"+R.line+":"+R.column;if(t){var X=this.location.end,L=c("",R.line.toString().length," "),v=t[m.line-1],p=m.line===X.line?X.column:v.length+1,E=p-m.column||1;$+=`
 --> `+D+`
`+L+` |
`+R.line+" | "+v+`
`+L+" | "+c("",m.column-1," ")+c("",E,"^")}else $+=`
 at `+D}return $},i.buildMessage=function(l,$){var t={literal:function(v){return'"'+m(v.text)+'"'},class:function(v){var p=v.parts.map(function(E){return Array.isArray(E)?R(E[0])+"-"+R(E[1]):R(E)});return"["+(v.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(v){return v.description}};function x(v){return v.charCodeAt(0).toString(16).toUpperCase()}function m(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+x(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+x(p)})}function R(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+x(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+x(p)})}function D(v){return t[v.type](v)}function X(v){var p=v.map(D),E,T;if(p.sort(),p.length>0){for(E=1,T=1;E<p.length;E++)p[E-1]!==p[E]&&(p[T]=p[E],T++);p.length=T}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function L(v){return v?'"'+m(v)+'"':"end of input"}return"Expected "+X(l)+" but "+L($)+" found."};function w(l,$){$=$!==void 0?$:{};var t={},x=$.grammarSource,m={start:Re},R=Re,D="none",X=")",L=",",v="(",p="%",E="px",T="cm",fe="mm",ue="in",he="pt",pe="pc",ge="deg",ve="rad",de="grad",$e="turn",Fe="#",_e=".",De="e",ye=/^[ \t\n\r]/,me=/^[a-z\-]/,we=/^[0-9a-fA-F]/,xe=/^[+\-]/,F=/^[0-9]/,Le=S("none"),Te=b("none",!1),je=b(")",!1),be=b(",",!1),Je=S("whitespace"),Ae=U([" ","	",`
`,"\r"],!1,!1),Xe=S("function"),ke=b("(",!1),Be=S("identifier"),Ee=U([["a","z"],"-"],!1,!1),Ue=S("percentage"),Ye=b("%",!1),ze=S("length"),qe=b("px",!1),Ge=b("cm",!1),He=b("mm",!1),Qe=b("in",!1),Ve=b("pt",!1),We=b("pc",!1),Ke=S("angle"),Ze=b("deg",!1),et=b("rad",!1),tt=b("grad",!1),rt=b("turn",!1),at=S("number"),nt=S("color"),st=b("#",!1),Me=U([["0","9"],["a","f"],["A","F"]],!1,!1),Ce=U(["+","-"],!1,!1),_=U([["0","9"]],!1,!1),it=b(".",!1),ot=b("e",!1),lt=function(){return[]},ct=function(e,n){return{type:"function",name:e,parameters:n||[]}},ft=function(e,n){return n.length>0?Ut(e,n,3):[e]},ut=function(e){return{type:"quantity",value:e.value,unit:e.unit}},ht=function(e){return{type:"color",colorType:e.type,value:e.value}},pt=function(e){return e},gt=function(){return Q()},vt=function(e){return{value:e,unit:"%"}},dt=function(e){return{value:e,unit:"px"}},$t=function(e){return{value:e,unit:"cm"}},yt=function(e){return{value:e,unit:"mm"}},mt=function(e){return{value:e,unit:"in"}},wt=function(e){return{value:e,unit:"pt"}},xt=function(e){return{value:e,unit:"pc"}},bt=function(e){return{value:e,unit:"deg"}},At=function(e){return{value:e,unit:"rad"}},Et=function(e){return{value:e,unit:"grad"}},Mt=function(e){return{value:e,unit:"turn"}},Ct=function(e){return{value:e,unit:null}},Nt=function(){return{type:"hex",value:Q()}},Ot=function(e){return{type:"function",value:e}},Rt=function(){return{type:"named",value:Q()}},It=function(){return parseFloat(Q())},a=0,d=0,G=[{line:1,column:1}],P=0,re=[],f=0,H;if("startRule"in $){if(!($.startRule in m))throw new Error(`Can't start parsing from rule "`+$.startRule+'".');R=m[$.startRule]}function Q(){return l.substring(d,a)}function b(e,n){return{type:"literal",text:e,ignoreCase:n}}function U(e,n,o){return{type:"class",parts:e,inverted:n,ignoreCase:o}}function Pt(){return{type:"end"}}function S(e){return{type:"other",description:e}}function Ne(e){var n=G[e],o;if(n)return n;for(o=e-1;!G[o];)o--;for(n=G[o],n={line:n.line,column:n.column};o<e;)l.charCodeAt(o)===10?(n.line++,n.column=1):n.column++,o++;return G[e]=n,n}function Oe(e,n,o){var h=Ne(e),y=Ne(n),g={source:x,start:{offset:e,line:h.line,column:h.column},end:{offset:n,line:y.line,column:y.column}};return o&&x&&typeof x.offset=="function"&&(g.start=x.offset(g.start),g.end=x.offset(g.end)),g}function u(e){a<P||(a>P&&(P=a,re=[]),re.push(e))}function St(e,n,o){return new i(i.buildMessage(e,n),e,n,o)}function Re(){var e;return e=Ft(),e===t&&(e=_t()),e}function Ft(){var e,n;return f++,e=a,A(),l.substr(a,4)===D?(n=D,a+=4):(n=t,f===0&&u(Te)),n!==t?(A(),d=e,e=lt()):(a=e,e=t),f--,e===t&&f===0&&u(Le),e}function _t(){var e,n;if(e=[],n=ae(),n!==t)for(;n!==t;)e.push(n),n=ae();else e=t;return e}function ae(){var e,n,o,h;return e=a,A(),n=Lt(),n!==t?(A(),o=Dt(),o===t&&(o=null),A(),l.charCodeAt(a)===41?(h=X,a++):(h=t,f===0&&u(je)),h!==t?(A(),d=e,e=ct(n,o)):(a=e,e=t)):(a=e,e=t),e}function Dt(){var e,n,o,h,y,g,O,k;if(e=a,n=ne(),n!==t){for(o=[],h=a,y=A(),l.charCodeAt(a)===44?(g=L,a++):(g=t,f===0&&u(be)),g===t&&(g=null),O=A(),k=ne(),k!==t?(y=[y,g,O,k],h=y):(a=h,h=t);h!==t;)o.push(h),h=a,y=A(),l.charCodeAt(a)===44?(g=L,a++):(g=t,f===0&&u(be)),g===t&&(g=null),O=A(),k=ne(),k!==t?(y=[y,g,O,k],h=y):(a=h,h=t);d=e,e=ft(n,o)}else a=e,e=t;return e}function ne(){var e,n;return e=a,n=Tt(),n===t&&(n=jt(),n===t&&(n=Jt(),n===t&&(n=Xt()))),n!==t&&(d=e,n=ut(n)),e=n,e===t&&(e=a,n=kt(),n!==t&&(d=e,n=ht(n)),e=n),e}function A(){var e,n;for(f++,e=[],ye.test(l.charAt(a))?(n=l.charAt(a),a++):(n=t,f===0&&u(Ae));n!==t;)e.push(n),ye.test(l.charAt(a))?(n=l.charAt(a),a++):(n=t,f===0&&u(Ae));return f--,n=t,f===0&&u(Je),e}function Lt(){var e,n,o;return f++,e=a,n=Ie(),n!==t?(l.charCodeAt(a)===40?(o=v,a++):(o=t,f===0&&u(ke)),o!==t?(d=e,e=pt(n)):(a=e,e=t)):(a=e,e=t),f--,e===t&&(n=t,f===0&&u(Xe)),e}function Ie(){var e,n,o;if(f++,e=a,n=[],me.test(l.charAt(a))?(o=l.charAt(a),a++):(o=t,f===0&&u(Ee)),o!==t)for(;o!==t;)n.push(o),me.test(l.charAt(a))?(o=l.charAt(a),a++):(o=t,f===0&&u(Ee));else n=t;return n!==t&&(d=e,n=gt()),e=n,f--,e===t&&(n=t,f===0&&u(Be)),e}function Tt(){var e,n,o;return f++,e=a,A(),n=N(),n!==t?(l.charCodeAt(a)===37?(o=p,a++):(o=t,f===0&&u(Ye)),o!==t?(d=e,e=vt(n)):(a=e,e=t)):(a=e,e=t),f--,e===t&&f===0&&u(Ue),e}function jt(){var e,n,o;return f++,e=a,A(),n=N(),n!==t?(l.substr(a,2)===E?(o=E,a+=2):(o=t,f===0&&u(qe)),o!==t?(d=e,e=dt(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,A(),n=N(),n!==t?(l.substr(a,2)===T?(o=T,a+=2):(o=t,f===0&&u(Ge)),o!==t?(d=e,e=$t(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,A(),n=N(),n!==t?(l.substr(a,2)===fe?(o=fe,a+=2):(o=t,f===0&&u(He)),o!==t?(d=e,e=yt(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,A(),n=N(),n!==t?(l.substr(a,2)===ue?(o=ue,a+=2):(o=t,f===0&&u(Qe)),o!==t?(d=e,e=mt(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,A(),n=N(),n!==t?(l.substr(a,2)===he?(o=he,a+=2):(o=t,f===0&&u(Ve)),o!==t?(d=e,e=wt(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,A(),n=N(),n!==t?(l.substr(a,2)===pe?(o=pe,a+=2):(o=t,f===0&&u(We)),o!==t?(d=e,e=xt(n)):(a=e,e=t)):(a=e,e=t)))))),f--,e===t&&f===0&&u(ze),e}function Jt(){var e,n,o;return f++,e=a,n=N(),n!==t?(l.substr(a,3)===ge?(o=ge,a+=3):(o=t,f===0&&u(Ze)),o!==t?(d=e,e=bt(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,n=N(),n!==t?(l.substr(a,3)===ve?(o=ve,a+=3):(o=t,f===0&&u(et)),o!==t?(d=e,e=At(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,n=N(),n!==t?(l.substr(a,4)===de?(o=de,a+=4):(o=t,f===0&&u(tt)),o!==t?(d=e,e=Et(n)):(a=e,e=t)):(a=e,e=t),e===t&&(e=a,n=N(),n!==t?(l.substr(a,4)===$e?(o=$e,a+=4):(o=t,f===0&&u(rt)),o!==t?(d=e,e=Mt(n)):(a=e,e=t)):(a=e,e=t)))),f--,e===t&&(n=t,f===0&&u(Ke)),e}function Xt(){var e,n;return f++,e=a,A(),n=N(),n!==t?(d=e,e=Ct(n)):(a=e,e=t),f--,e===t&&f===0&&u(at),e}function kt(){var e,n,o,h;if(f++,e=a,l.charCodeAt(a)===35?(n=Fe,a++):(n=t,f===0&&u(st)),n!==t){if(o=[],we.test(l.charAt(a))?(h=l.charAt(a),a++):(h=t,f===0&&u(Me)),h!==t)for(;h!==t;)o.push(h),we.test(l.charAt(a))?(h=l.charAt(a),a++):(h=t,f===0&&u(Me));else o=t;o!==t?(d=e,e=Nt()):(a=e,e=t)}else a=e,e=t;return e===t&&(e=a,n=ae(),n!==t&&(d=e,n=Ot(n)),e=n,e===t&&(e=a,n=Ie(),n!==t&&(d=e,n=Rt()),e=n)),f--,e===t&&(n=t,f===0&&u(nt)),e}function N(){var e,n,o,h,y,g,O;for(e=a,xe.test(l.charAt(a))?(l.charAt(a),a++):f===0&&u(Ce),n=a,o=[],F.test(l.charAt(a))?(h=l.charAt(a),a++):(h=t,f===0&&u(_));h!==t;)o.push(h),F.test(l.charAt(a))?(h=l.charAt(a),a++):(h=t,f===0&&u(_));if(l.charCodeAt(a)===46?(h=_e,a++):(h=t,f===0&&u(it)),h!==t){if(y=[],F.test(l.charAt(a))?(g=l.charAt(a),a++):(g=t,f===0&&u(_)),g!==t)for(;g!==t;)y.push(g),F.test(l.charAt(a))?(g=l.charAt(a),a++):(g=t,f===0&&u(_));else y=t;y!==t?(o=[o,h,y],n=o):(a=n,n=t)}else a=n,n=t;if(n===t)if(n=[],F.test(l.charAt(a))?(o=l.charAt(a),a++):(o=t,f===0&&u(_)),o!==t)for(;o!==t;)n.push(o),F.test(l.charAt(a))?(o=l.charAt(a),a++):(o=t,f===0&&u(_));else n=t;if(n!==t){if(o=a,l.charCodeAt(a)===101?(h=De,a++):(h=t,f===0&&u(ot)),h!==t){if(xe.test(l.charAt(a))?(y=l.charAt(a),a++):(y=t,f===0&&u(Ce)),y===t&&(y=null),g=[],F.test(l.charAt(a))?(O=l.charAt(a),a++):(O=t,f===0&&u(_)),O!==t)for(;O!==t;)g.push(O),F.test(l.charAt(a))?(O=l.charAt(a),a++):(O=t,f===0&&u(_));else g=t;g!==t?(h=[h,y,g],o=h):(a=o,o=t)}else a=o,o=t;o===t&&(o=null),d=e,e=It()}else a=e,e=t;return e}function Bt(e,n){return e.map(function(o){return o[n]})}function Ut(e,n,o){return[e].concat(Bt(n,o))}if(H=R(),H!==t&&a===l.length)return H;throw H!==t&&a<l.length&&u(Pt()),St(re,P<l.length?l.charAt(P):null,P<l.length?Oe(P,P+1):Oe(P,P))}return{SyntaxError:i,parse:w}})})(or);function Or(r){if(!r||r.length===0)return null;if(typeof r=="string"){const i=Pe(r);return!i||i.length===0?null:i}const s=r.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new M("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Pe(i.value)}});s.sort((i,c)=>c.effects.length-i.effects.length);for(let i=0;i<s.length-1;i++){if(!sr(s[i].effects,s[i+1].effects))throw new M("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:s[i].effects,b:s[i+1].effects});ir(s[i].effects,s[i+1].effects)}return s.sort((i,c)=>c.scale-i.scale),s}function Pe(r){let s;if(!r)return[];try{s=se.parse(r)}catch(i){throw new M("effect:invalid-syntax","Invalid effect syntax",{value:r,error:i})}return s.map(i=>lr(i))}function lr(r){try{switch(r.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return cr(r);case"opacity":return fr(r);case"hue-rotate":return ur(r);case"blur":return hr(r);case"drop-shadow":return pr(r);case"bloom":return gr(r)}}catch(s){throw s.details.filter=r,s}throw new M("effect:unknown-effect",`Effect '${r.name}' is not supported`,{effect:r})}function cr(r){let s=1;return B(r.parameters,1),r.parameters.length===1&&(s=I(r.parameters[0])),new z(r.name,s)}function fr(r){let s=1;return B(r.parameters,1),r.parameters.length===1&&(s=I(r.parameters[0])),new ee(s)}function ur(r){let s=0;return B(r.parameters,1),r.parameters.length===1&&(s=wr(r.parameters[0])),new Z(s)}function hr(r){let s=0;return B(r.parameters,1),r.parameters.length===1&&(s=ce(r.parameters[0]),q(s,r.parameters[0])),new W(s)}function pr(r){const s=[];let i=null;for(const c of r.parameters)if(c.type==="color"){if(s.length&&Object.freeze(s),i)throw new M("effect:type-error","Accepts only one color",{});i=xr(c)}else{const w=ce(c);if(Object.isFrozen(s))throw new M("effect:type-error","<length> parameters not consecutive",{lengths:s});s.push(w),s.length===3&&q(w,c)}if(s.length<2||s.length>3)throw new M("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${s.length}}`,{lengths:s});return new K(s[0],s[1],s[2]||0,i||Se("black"))}function gr(r){let s=1,i=0,c=0;return B(r.parameters,3),r.parameters[0]&&(s=I(r.parameters[0])),r.parameters[1]&&(i=ce(r.parameters[1]),q(i,r.parameters[1])),r.parameters[2]&&(c=I(r.parameters[2])),new V(s,i,c)}function B(r,s){if(r.length>s)throw new M("effect:type-error",`Function supports up to ${s} parameters, Actual: ${r.length}`,{parameters:r})}function te(r){if(r.type==="color")return"<color>";if(r.unit){if(r.unit in le)return"<length>";if(r.unit in oe)return"<angle>";if(r.unit==="%")return"<percentage>"}return"<double>"}function q(r,s){if(r<0)throw new M("effect:type-error",`Negative values are not allowed, Actual: ${r}`,{term:s})}function vr(r){if(!(r.type==="quantity"&&r.unit===null))throw new M("effect:type-error",`Expected <double>, Actual: ${te(r)}`,{term:r})}function dr(r){if(!(r.type==="quantity"&&(r.unit===null||r.unit==="%")))throw new M("effect:type-error",`Expected <double> or <percentage>, Actual: ${te(r)}`,{term:r})}const oe={deg:1,grad:360/400,rad:180/Math.PI,turn:360};function $r(r){if(!(r.type==="quantity"&&(r.value===0&&r.unit===null||r.unit&&oe[r.unit]!=null)))throw new M("effect:type-error",`Expected <angle>, Actual: ${te(r)}`,{term:r})}const le={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:96/6,pt:96/72};function yr(r){if(!(r.type==="quantity"&&(r.value===0&&r.unit===null||r.unit&&le[r.unit]!=null)))throw new M("effect:type-error",`Expected <length>, Actual: ${te(r)}`,{term:r})}function I(r){dr(r);const s=r.value;return q(s,r),r.unit==="%"?s*.01:s}function mr(r){return vr(r),q(r.value,r),r.value}function wr(r){return $r(r),r.value*oe[r.unit]||0}function ce(r){return yr(r),r.value*le[r.unit]||0}function xr(r){switch(r.colorType){case"hex":return qt(r.value);case"named":return Se(r.value);case"function":return Er(r.value)}}function Se(r){if(!Gt(r))throw new M("effect:unknown-color",`color '${r}' isn't valid`,{namedColor:r});return Ht(r)}const br=/^rgba?/i,Ar=/^hsla?/i;function Er(r){if(B(r.parameters,4),br.test(r.name))return[I(r.parameters[0]),I(r.parameters[1]),I(r.parameters[2]),r.parameters[3]?I(r.parameters[3]):1];if(Ar.test(r.name))return Qt(mr(r.parameters[0]),I(r.parameters[1]),I(r.parameters[2]),r.parameters[3]?I(r.parameters[3]):1);throw new M("effect:syntax-error",`Invalid color function '${r.name}'`,{colorFunction:r})}export{sr as c,Nr as i,ir as n,Or as p};
