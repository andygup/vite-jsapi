import{E as f,r as i,e3 as h,e4 as S,Z as d,dt as p,e5 as w}from"./index-b51e75d5.js";import{e as b}from"./featureFlags-dcf59b6a.js";let u={};async function I(e,t){try{return{data:(await N(e,t)).data,baseUrl:S(e),styleUrl:e}}catch(r){return d(r),null}}function $(e,t,r){const s=t.portal!=null?t.portal:p.getDefault();let o;const l=`${s.url} - ${s.user&&s.user.username} - ${e}`;return u[l]||(u[l]=q(e,s,r).then(n=>(o=n,n.fetchData())).then(n=>({data:n,baseUrl:o.itemUrl??"",styleName:e}))),u[l]}function q(e,t,r){return t.load(r).then(()=>{const s=new w({disableExtraQuery:!0,query:`owner:${y} AND type:${c} AND typekeywords:"${e}"`});return t.queryItems(s,r)}).then(({results:s})=>{var n;let o=null;const l=e.toLowerCase();if(s&&Array.isArray(s)){for(const a of s)if(((n=a.typeKeywords)==null?void 0:n.some(m=>m.toLowerCase()===l))&&a.type===c&&a.owner===y){o=a;break}}if(!o)throw new f("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return o.load(r)})}function j(e,t,r){return e&&e.styleUrl!=null?I(e.styleUrl,r):e&&e.styleName!=null?$(e.styleName,t,r):Promise.reject(new f("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function A(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function C(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!b()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function N(e,t){const r={responseType:"json",query:{f:"json"},...t};return i(h(e),r)}const y="esri_en",c="Style",D="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{D as S,j as f,A as m,N as r,C as s};
