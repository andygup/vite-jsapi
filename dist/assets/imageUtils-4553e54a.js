import{ae as T,ai as B}from"./index-06bb4acc.js";import{B as L}from"./BitmapTileContainer-f35e7b91.js";const M=t=>{let e=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new L(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var n;this.container.removeChild(this._bitmapView),(n=this._bitmapView)==null||n.removeAllChildren()}};return e=T([B("esri.views.2d.layers.BitmapTileLayerView2D")],e),e};function x(t){return t instanceof HTMLImageElement?t.naturalWidth:t.width}function R(t){return t instanceof HTMLImageElement?t.naturalHeight:t.height}function V(t,e,o,n){if(o.level===n.level)return e;const i=t.tileInfo.size,s=t.getTileResolution(o.level),l=t.getTileResolution(n.level);let a=t.getLODInfoAt(n.level);const u=a.getXForColumn(n.col),m=a.getYForRow(n.row);a=t.getLODInfoAt(o.level);const d=a.getXForColumn(o.col),p=a.getYForRow(o.row),r=x(e)/i[0],c=R(e)/i[1],w=Math.round(r*((u-d)/s)),g=Math.round(c*(-(m-p)/s)),v=Math.round(r*i[0]*(l/s)),f=Math.round(c*i[1]*(l/s)),h=C(i);return h.getContext("2d").drawImage(e,w,g,v,f,0,0,i[0],i[1]),h}function C(t){const e=document.createElement("canvas");return[e.width,e.height]=t,e}export{M as B,C as c,V as r};
