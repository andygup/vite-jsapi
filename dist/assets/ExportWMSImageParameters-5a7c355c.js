import{au as h,ae as t,af as i,ai as b,aj as g}from"./index-cc043433.js";const S={visible:"visibleSublayers"};let s=class extends h(g){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",r=>this.notifyChange(S[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,a=e==null?void 0:e.sublayers,o=[],l=n=>{const{minScale:y,maxScale:p,sublayers:c,visible:m}=n,u=r===0||(y===0||r<=y)&&(p===0||r>=p);m&&u&&(c?c.forEach(l):o.push(n))};return a==null||a.forEach(l),o}toJSON(){const{layer:e,layers:r}=this,{imageFormat:a,imageTransparency:o,version:l}=e;return{format:a,request:"GetMap",service:"WMS",styles:"",transparent:o?"TRUE":"FALSE",version:l,layers:r}}};t([i()],s.prototype,"layer",null);t([i({readOnly:!0})],s.prototype,"layers",null);t([i({type:Number})],s.prototype,"scale",void 0);t([i({readOnly:!0})],s.prototype,"version",null);t([i({readOnly:!0})],s.prototype,"visibleSublayers",null);s=t([b("esri.layers.support.ExportWMSImageParameters")],s);export{s as E};
