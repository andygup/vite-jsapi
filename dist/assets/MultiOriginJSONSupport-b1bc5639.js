import{eR as f,eS as u,cF as d,eT as E,ae as g,ai as l,dC as c,eU as w,eV as J,eW as h,eX as N,aj as M,eY as m}from"./index-6e11f365.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(f),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const e=new _,s=this._originStores[u.DEFAULTS];s&&s.forEach((r,i)=>{e.set(i,d(r),u.DEFAULTS)});for(let r=u.SERVICE;r<f;r++){const i=this._originStores[r];i&&i.forEach((o,n)=>{t&&t.has(n)||e.set(n,d(o),r)})}return e}get(t,e){const s=e===void 0?this._values:this._originStores[e];return s?s.get(t):void 0}keys(t){const e=t==null?this._values:this._originStores[t];return e?[...e.keys()]:[]}set(t,e,s=u.USER){let r=this._originStores[s];if(r||(r=new Map,this._originStores[s]=r),r.set(t,e),!this._values.has(t)||E(this._propertyOriginMap.get(t))<=s){const i=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,s),i!==e}return!1}delete(t,e=u.USER){const s=this._originStores[e];if(!s)return;const r=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===e){this._values.delete(t);for(let i=e-1;i>=0;i--){const o=this._originStores[i];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,i);break}}}return r}has(t,e){const s=e===void 0?this._values:this._originStores[e];return!!s&&s.has(t)}revert(t,e){for(;e>0&&!this.has(t,e);)--e;const s=this._originStores[e],r=s&&s.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,e),i!==r}originOf(t){return this._propertyOriginMap.get(t)||u.DEFAULTS}forEach(t){this._values.forEach(t)}}const $=a=>{let t=class extends a{constructor(...e){super(...e);const s=E(c(this)),r=s.store,i=new _;s.store=i,w(s,r,i)}read(e,s){J(this,e,s)}getAtOrigin(e,s){const r=O(this),i=h(s);if(typeof e=="string")return r.get(e,i);const o={};return e.forEach(n=>{o[n]=r.get(n,i)}),o}originOf(e){return N(this.originIdOf(e))}originIdOf(e){return O(this).originOf(e)}revert(e,s){const r=O(this),i=h(s),o=c(this);let n;n=typeof e=="string"?e==="*"?r.keys(i):[e]:e,n.forEach(p=>{o.invalidate(p),r.revert(p,i),o.commit(p)})}};return t=g([l("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function O(a){return c(a).store}let v=class extends $(M){};v=g([l("esri.core.ReadOnlyMultiOriginJSONSupport")],v);const A=a=>{let t=class extends a{constructor(...e){super(...e)}clear(e,s="user"){return S(this).delete(e,h(s))}write(e,s){return m(this,e=e||{},s),e}setAtOrigin(e,s,r){c(this).setAtOrigin(e,s,h(r))}removeOrigin(e){const s=S(this),r=h(e),i=s.keys(r);for(const o of i)s.originOf(o)===r&&s.set(o,s.get(o,r),u.USER)}updateOrigin(e,s){const r=S(this),i=h(s),o=this.get(e);for(let n=i+1;n<f;++n)r.delete(e,n);r.set(e,o,i)}toJSON(e){return this.write({},e)}};return t=g([l("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function S(a){return c(a).store}const R=a=>{let t=class extends A($(a)){constructor(...s){super(...s)}};return t=g([l("esri.core.MultiOriginJSONSupport")],t),t};let y=class extends R(M){};y=g([l("esri.core.MultiOriginJSONSupport")],y);export{R as O,y as S};
