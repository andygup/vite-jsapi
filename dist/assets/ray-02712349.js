import{hf as _,hg as o,hh as u,gJ as a,b as f}from"./index-14eace40.js";import{B as l}from"./ByteSizeUnit-c0a244d3.js";import{a as w}from"./mat3f64-c33d428a.js";import{a as g}from"./mat4f64-06a72c15.js";import{a as B}from"./quatf64-5b0101cd.js";import{a as P}from"./vec4f64-efdcb593.js";class p{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&_(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*n);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,n));t++)this._items.push(this._allocator())}}const n=1024;class i{constructor(t,s,h){this._itemByteSize=t,this._itemCreate=s,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(h/this._itemByteSize)}get(){this._itemsPtr===0&&_(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const s=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let h=0;h<this._itemsPerBuffer;++h)this._items.push(this._itemCreate(s,h*this._itemByteSize));this._buffers.push(s)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=r){return new i(2*8,o,t)}static createVec3f64(t=r){return new i(3*8,u,t)}static createVec4f64(t=r){return new i(4*8,P,t)}static createMat3f64(t=r){return new i(9*8,w,t)}static createMat4f64(t=r){return new i(16*8,g,t)}static createQuatf64(t=r){return new i(4*8,B,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const r=4*l.KILOBYTES;i.createVec2f64();const $=i.createVec3f64();i.createVec4f64();i.createMat3f64();i.createMat4f64();i.createQuatf64();var m;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(m||(m={}));function M(e){return e?c(a(e.origin),a(e.direction)):c(f(),f())}function c(e,t){return{origin:e,direction:t}}function I(e,t){const s=b.get();return s.origin=e,s.direction=t,s}const b=new p(()=>M());export{p as O,M as c,$ as s,I as w};
