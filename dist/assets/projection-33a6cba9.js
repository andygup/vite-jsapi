import{_ as Ne}from"./preload-helper-101896b7.js";import{a as ot}from"./Error-bd05b442.js";import{b as rt,a as _t,m as st,N as it}from"./mathUtils-daf59e84.js";import{t as N,e as at,r as k}from"./typedArrayUtil-2bcf3cee.js";import{f as ut,O as Ue}from"./promiseUtils-29120e0a.js";import{$ as Pt,I as Et,p as lt,E as ct,R as ft}from"./unitUtils-43365914.js";import{j as St}from"./cast-daef7652.js";import{e as pt}from"./SimpleObservable-7c382d01.js";import{x as At,r as Ct,o as Rt}from"./mat4-62d5e6a4.js";import{n as fe}from"./common-701a4199.js";import{s as g,e as ie,t as Q,E as ee,I as z,w as Ot,a as Nt,G as Tt,f as Mt,T as gt,S as Lt,P as dt,g as ht}from"./Extent-7f29a1bb.js";import{v as Gt,m as It,u as mt}from"./Polyline-c56eca9b.js";import{a as yt}from"./assets-4cb15247.js";import{h as Ft}from"./string-3d0ebcd3.js";import{o as Wt}from"./zscale-a508c8e5.js";let Ce,_=null;function Xe(){return!!_}function wt(){return!!Ft("esri-wasm")}function be(){return Ce||(Ce=Ne(()=>import("./pe-wasm-b4e8afc6.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:n=>yt(`esri/geometry/support/${n}`)})).then(e=>{Ze(e)}),Ce)}var Te,O,Me;(function(e){function n(i,u,s){_.ensureCache.prepare();const l=x(s),E=s===l,P=_.ensureFloat64(l),c=_._pe_geog_to_proj(_.getPointer(i),u,P);return c&&U(s,u,P,E),c}function t(i,u,s,l){switch(l){case O.PE_TRANSFORM_P_TO_G:return r(i,u,s);case O.PE_TRANSFORM_G_TO_P:return n(i,u,s)}return 0}function r(i,u,s){return a(i,u,s,0)}function a(i,u,s,l){_.ensureCache.prepare();const E=x(s),P=s===E,c=_.ensureFloat64(E),S=_._pe_proj_to_geog_center(_.getPointer(i),u,c,l);return S&&U(s,u,c,P),S}e.geogToProj=n,e.projGeog=t,e.projToGeog=r,e.projToGeogCenter=a})(Te||(Te={})),function(e){function n(){e.PE_BUFFER_MAX=_.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=_.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=_.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=_.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=_.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=_.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=_.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=_.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=_.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=_.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=_.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=_.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=_.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=_.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=_.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=_.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=_.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=_.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=_.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=_.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=_.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=_.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=_.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=_.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=_.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=_.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=_.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=_.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=_.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=_.PeDefs.prototype.PE_HORIZON_DELTA}e.init=n}(O||(O={})),function(e){const n={},t={},r=f=>{if(f){const p=f.getType();switch(p){case O.PE_TYPE_GEOGCS:f=_.castObject(f,_.PeGeogcs);break;case O.PE_TYPE_PROJCS:f=_.castObject(f,_.PeProjcs);break;case O.PE_TYPE_GEOGTRAN:f=_.castObject(f,_.PeGeogtran);break;default:p&O.PE_TYPE_UNIT&&(f=_.castObject(f,_.PeUnit))}}return f};function a(){_.PeFactory.prototype.initialize(null)}function i(f){return u(O.PE_TYPE_COORDSYS,f)}function u(f,p){let A=null,C=n[f];if(C||(C={},n[f]=C),C.hasOwnProperty(String(p)))A=C[p];else{const T=_.PeFactory.prototype.factoryByType(f,p);_.compare(T,_.NULL)||(A=T,C[p]=A)}return A=r(A),A}function s(f,p){let A=null,C=t[f];if(C||(C={},t[f]=C),C.hasOwnProperty(p))A=C[p];else{const T=_.PeFactory.prototype.fromString(f,p);_.compare(T,_.NULL)||(A=T,C[p]=A)}return A=r(A),A}function l(f){return u(O.PE_TYPE_GEOGCS,f)}function E(f){return u(O.PE_TYPE_GEOGTRAN,f)}function P(f){return _.PeFactory.prototype.getCode(f)}function c(f){return u(O.PE_TYPE_PROJCS,f)}function S(f){return u(O.PE_TYPE_UNIT,f)}e.initialize=a,e.coordsys=i,e.factoryByType=u,e.fromString=s,e.geogcs=l,e.geogtran=E,e.getCode=P,e.projcs=c,e.unit=S}(Me||(Me={}));let ze=null;var ae,ge,Le,de,ue,he,Pe,Ee,Ge;function Ze(e){function n(i,u,s){i[u]=s(i[u])}_=e,O.init(),ae.init(),ue.init(),Pe.init(),Ee.init(),ze=class extends _.PeGCSExtent{destroy(){_.destroy(this)}};const t=[_.PeDatum,_.PeGeogcs,_.PeGeogtran,_.PeObject,_.PeParameter,_.PePrimem,_.PeProjcs,_.PeSpheroid,_.PeUnit];for(const i of t)n(i.prototype,"getName",u=>function(){return u.call(this,new Array(O.PE_NAME_MAX))});for(const i of[_.PeGeogtran,_.PeProjcs])n(i.prototype,"getParameters",u=>function(){const s=new Array(O.PE_PARM_MAX);let l=u.call(this);for(let E=0;E<s.length;E++){const P=_.getValue(l,"*");s[E]=P?_.wrapPointer(P,_.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return s});n(_.PeHorizon.prototype,"getCoord",i=>function(){const u=this.getSize();if(!u)return null;const s=[];return U(s,u,i.call(this)),s}),n(_.PeGTlistExtendedEntry.prototype,"getEntries",i=>{const u=_._pe_getPeGTlistExtendedGTsSize();return function(){let s=null;const l=i.call(this);if(!_.compare(l,_.NULL)){s=[l];const E=this.getSteps();if(E>1){const P=_.getPointer(l);for(let c=1;c<E;c++)s.push(_.wrapPointer(P+u*c,_.PeGTlistExtendedGTs))}}return s}});const r=_._pe_getPeHorizonSize(),a=i=>function(){let u=this._cache;if(u||(u=new Map,this._cache=u),u.has(i))return u.get(i);let s=null;const l=i.call(this);if(!_.compare(l,_.NULL)){s=[l];const E=l.getNump();if(E>1){const P=_.getPointer(l);for(let c=1;c<E;c++)s.push(_.wrapPointer(P+r*c,_.PeHorizon))}}return u.set(i,s),s};n(_.PeProjcs.prototype,"horizonGcsGenerate",a),n(_.PeProjcs.prototype,"horizonPcsGenerate",a),_.PeObject.prototype.toString=function(i=O.PE_STR_OPTS_NONE){_.ensureCache.prepare();const u=_.getPointer(this),s=_.ensureInt8(new Array(O.PE_BUFFER_MAX));return _.UTF8ToString(_._pe_object_to_string_ext(u,i,s))}}function I(e){if(!e)return;const n=_.getClass(e);if(!n)return;const t=_.getCache(n);if(!t)return;const r=_.getPointer(e);r&&delete t[r]}function re(e,n){const t=[],r=new Array(n);for(let a=0;a<e;a++)t.push(_.ensureInt8(r));return t}function x(e){let n;return Array.isArray(e[0])?(n=[],e.forEach(t=>{n.push(t[0],t[1])})):n=e,n}function U(e,n,t,r=!1){if(r)for(let a=0;a<2*n;a++)e[a]=_.getValue(t+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=e.length===0;for(let i=0;i<n;i++)a&&(e[i]=new Array(2)),e[i][0]=_.getValue(t,"double"),e[i][1]=_.getValue(t+Float64Array.BYTES_PER_ELEMENT,"double"),t+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let n;function t(){e.PE_GTLIST_OPTS_COMMON=_.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,n=_._pe_getPeGTlistExtendedEntrySize()}function r(a,i,u,s,l,E){let P=null;const c=new _.PeInteger(E);try{const S=_.PeGTlistExtended.prototype.getGTlist(a,i,u,s,l,c);if((E=c.val)&&(P=[S],E>1)){const f=_.getPointer(S);for(let p=1;p<E;p++)P.push(_.wrapPointer(f+n*p,_.PeGTlistExtendedEntry))}}finally{_.destroy(c)}return P}e.init=t,e.getGTlist=r})(ae||(ae={})),function(e){function n(t){if(t&&t.length){for(const r of t)I(r),r.getEntries().forEach(a=>{I(a);const i=a.getGeogtran();I(i),i.getParameters().forEach(I),[i.getGeogcs1(),i.getGeogcs2()].forEach(u=>{I(u);const s=u.getDatum();I(s),I(s.getSpheroid()),I(u.getPrimem()),I(u.getUnit())})});_.PeGTlistExtendedEntry.prototype.Delete(t[0])}}e.destroy=n}(ge||(ge={})),function(e){function n(t,r,a,i,u){_.ensureCache.prepare();const s=x(a),l=a===s,E=_.ensureFloat64(s);let P=0;i&&(P=_.ensureFloat64(i));const c=_._pe_geog_to_geog(_.getPointer(t),r,E,P,u);return c&&U(a,r,E,l),c}e.geogToGeog=n}(Le||(Le={})),function(e){const n=(E,P,c,S,f,p)=>{let A,C;switch(_.ensureCache.prepare(),E){case"dd":A=_._pe_geog_to_dd,C=O.PE_DD_MAX;break;case"ddm":A=_._pe_geog_to_ddm,C=O.PE_DDM_MAX;break;case"dms":A=_._pe_geog_to_dms,C=O.PE_DMS_MAX}let T=0;P&&(T=_.getPointer(P));const m=x(S),y=_.ensureFloat64(m),F=re(c,C),G=A(T,c,y,f,_.ensureInt32(F));if(G)for(let L=0;L<c;L++)p[L]=_.UTF8ToString(F[L]);return G},t=(E,P,c,S,f)=>{let p;switch(_.ensureCache.prepare(),E){case"dd":p=_._pe_dd_to_geog;break;case"ddm":p=_._pe_ddm_to_geog;break;case"dms":p=_._pe_dms_to_geog}let A=0;P&&(A=_.getPointer(P));const C=S.map(F=>_.ensureString(F)),T=_.ensureInt32(C),m=_.ensureFloat64(new Array(2*c)),y=p(A,c,T,m);return y&&U(f,c,m),y};function r(E,P,c,S,f){return n("dms",E,P,c,S,f)}function a(E,P,c,S){return t("dms",E,P,c,S)}function i(E,P,c,S,f){return n("ddm",E,P,c,S,f)}function u(E,P,c,S){return t("ddm",E,P,c,S)}function s(E,P,c,S,f){return n("dd",E,P,c,S,f)}function l(E,P,c,S){return t("dd",E,P,c,S)}e.geogToDms=r,e.dmsToGeog=a,e.geogToDdm=i,e.ddmToGeog=u,e.geogToDd=s,e.ddToGeog=l}(de||(de={})),function(e){function n(){e.PE_MGRS_STYLE_NEW=_.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=_.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=_.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=_.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=_.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function t(a,i,u,s,l,E,P){_.ensureCache.prepare();let c=0;a&&(c=_.getPointer(a));const S=x(u),f=_.ensureFloat64(S),p=re(i,O.PE_MGRS_MAX),A=_.ensureInt32(p),C=_._pe_geog_to_mgrs_extended(c,i,f,s,l,E,A);if(C)for(let T=0;T<i;T++)P[T]=_.UTF8ToString(p[T]);return C}function r(a,i,u,s,l){_.ensureCache.prepare();let E=0;a&&(E=_.getPointer(a));const P=u.map(p=>_.ensureString(p)),c=_.ensureInt32(P),S=_.ensureFloat64(new Array(2*i)),f=_._pe_mgrs_to_geog_extended(E,i,c,s,S);return f&&U(l,i,S),f}e.init=n,e.geogToMgrsExtended=t,e.mgrsToGeogExtended=r}(ue||(ue={})),function(e){function n(r,a,i,u,s,l,E){_.ensureCache.prepare();let P=0;r&&(P=_.getPointer(r));const c=x(i),S=_.ensureFloat64(c),f=re(a,O.PE_MGRS_MAX),p=_.ensureInt32(f),A=_._pe_geog_to_usng(P,a,S,u,s,l,p);if(A)for(let C=0;C<a;C++)E[C]=_.UTF8ToString(f[C]);return A}function t(r,a,i,u){_.ensureCache.prepare();let s=0;r&&(s=_.getPointer(r));const l=i.map(S=>_.ensureString(S)),E=_.ensureInt32(l),P=_.ensureFloat64(new Array(2*a)),c=_._pe_usng_to_geog(s,a,E,P);return c&&U(u,a,P),c}e.geogToUsng=n,e.usngToGeog=t}(he||(he={})),function(e){function n(){e.PE_UTM_OPTS_NONE=_.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=_.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=_.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function t(a,i,u,s,l){_.ensureCache.prepare();let E=0;a&&(E=_.getPointer(a));const P=x(u),c=_.ensureFloat64(P),S=re(i,O.PE_UTM_MAX),f=_.ensureInt32(S),p=_._pe_geog_to_utm(E,i,c,s,f);if(p)for(let A=0;A<i;A++)l[A]=_.UTF8ToString(S[A]);return p}function r(a,i,u,s,l){_.ensureCache.prepare();let E=0;a&&(E=_.getPointer(a));const P=u.map(p=>_.ensureString(p)),c=_.ensureInt32(P),S=_.ensureFloat64(new Array(2*i)),f=_._pe_utm_to_geog(E,i,c,s,S);return f&&U(l,i,S),f}e.init=n,e.geogToUtm=t,e.utmToGeog=r}(Pe||(Pe={})),function(e){const n=new Map;function t(){e.PE_PCSINFO_OPTION_NONE=_.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=_.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=_.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=_.PePCSInfo.prototype.PE_POLE_POINT}function r(a,i=e.PE_PCSINFO_OPTION_DOMAIN){let u=null,s=null;return n.has(a)&&(s=n.get(a),s[i]&&(u=s[i])),u||(u=_.PePCSInfo.prototype.generate(a,i),s||(s=[],n.set(a,s)),s[i]=u),u}e.init=t,e.generate=r}(Ee||(Ee={})),function(e){function n(){return _.PeVersion.prototype.version_string()}e.versionString=n}(Ge||(Ge={}));const Dt=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return _},isLoaded:Xe,isSupported:wt,load:be,get PeCSTransformations(){return Te},get PeDefs(){return O},get PeFactory(){return Me},get PeGCSExtent(){return ze},get PeGTlistExtended(){return ae},get PeGTlistExtendedEntry(){return ge},get PeGTTransformations(){return Le},get PeNotationDms(){return de},get PeNotationMgrs(){return ue},get PeNotationUsng(){return he},get PeNotationUtm(){return Pe},get PePCSInfo(){return Ee},get PeVersion(){return Ge},_init:Ze},Symbol.toStringTag,{value:"Module"})),W=g.radius,d=g.eccentricitySquared,Ut={a1:W*d,a2:W*d*W*d,a3:W*d*d/2,a4:W*d*W*d*2.5,a5:W*d+W*d*d/2,a6:1-d};1/294.9786982,1/298.257222101,g.radius,g.flattening,ie.radius,ie.flattening,1/192.0430107526882,Q.radius,Q.flattening,1/10.2079945799458,1/43.61604095563141,Q.radius;let _e=0;class Z{constructor(n){this.uid=_e++,n?(this._wkt=n.wkt!=null?n.wkt:null,this._wkid=n.wkid!=null?n.wkid:-1,this._isInverse=n.isInverse!=null&&n.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(n){const t=new Z;return t._wkt=n.wkt,t._wkid=n.wkid,t._isInverse=n.isInverse,t}get wkt(){return this._wkt}set wkt(n){this._wkt=n,this.uid=_e++}get wkid(){return this._wkid}set wkid(n){this._wkid=n,this.uid=_e++}get isInverse(){return this._isInverse}set isInverse(n){this._isInverse=n,this.uid=_e++}getInverse(){const n=new Z;return n._wkt=this.wkt,n._wkid=this._wkid,n._isInverse=!this.isInverse,n}}class H{constructor(n){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,n&&n.steps)for(const t of n.steps)t instanceof Z?this.steps.push(t):this.steps.push(new Z({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}static cacheKey(n,t){return[n.wkid!==void 0&&n.wkid!==null?n.wkid.toString():"-1",n.wkt!==void 0&&n.wkt!==null?n.wkt.toString():"",t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():""].join(",")}static fromGE(n){const t=new H;let r="";for(const a of n.steps){const i=Z.fromGE(a);t.steps.push(i),r+=i.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=r,t}getInverse(){const n=new H;n.steps=[];for(let t=this.steps.length-1;t>=0;t--){const r=this.steps[t];n.steps.push(r.getInverse())}return n}getGTListEntry(){let n="";for(const t of this.steps)n+=t.uid.toString()+",";return n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n),this._gtlistentry}assignCachedGe(n,t,r){this._cachedProjection[H.cacheKey(n,t)]=r}getCachedGeTransformation(n,t){let r="";for(const i of this.steps)r+=i.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const a=this._cachedProjection[H.cacheKey(n,t)];return a===void 0?null:a}}let B=null,te=null,Re=null,Oe={};const qe=new pt;function Ve(){return!!B&&Xe()}function Ie(e){return N(Re)&&(Re=Promise.all([be(),Ne(()=>import("./geometryEngineBase-3dd302e0.js"),[]).then(n=>n.g),Ne(()=>import("./hydrated-2eaa529b.js"),["assets/hydrated-2eaa529b.js","assets/Extent-7f29a1bb.js","assets/cast-daef7652.js","assets/typedArrayUtil-2bcf3cee.js","assets/string-3d0ebcd3.js","assets/Error-bd05b442.js","assets/ensureType-fa162cfc.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-29120e0a.js","assets/Polyline-c56eca9b.js"])])),Re.then(([,n,{hydratedAdapter:t}])=>{ut(e),te=t,B=n.default,B._enableProjection(Dt),qe.notify()})}function Ht(e,n,t=null,r=null){return Array.isArray(e)?e.length===0?[]:He(te,e,e[0].spatialReference,n,t,r):He(te,[e],e.spatialReference,n,t,r)[0]}function He(e,n,t,r,a=null,i=null){if(N(t)||N(r))return n;if(le(t,r,a))return n.map(u=>at(vt(u,t,r)));if(N(a)){const u=H.cacheKey(t,r);Oe[u]!==void 0?a=Oe[u]:(a=Bt(t,r,void 0),N(a)&&(a=new H),Oe[u]=a)}if(N(B)||N(e))throw new me;return k(i)?B._project(e,n,t,r,a,i):B._project(e,n,t,r,a)}function dn(e,n){const t=kt([e],n);return k(t.pending)?{pending:t.pending,geometry:null}:k(t.geometries)?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function kt(e,n){if(!Ve()){for(const t of e)if(k(t)&&!ee(t.spatialReference,n)&&z(t.spatialReference)&&z(n)&&!le(t.spatialReference,n))return St(qe),{pending:Ie(),geometries:null}}return{pending:null,geometries:e.map(t=>N(t)?null:ee(t.spatialReference,n)?t:z(t.spatialReference)&&z(n)?xt(t,n):null)}}function Bt(e,n,t=null){if(N(e)||N(n))return null;if(N(B)||N(te))throw new me;const r=B._getTransformation(te,e,n,t,t==null?void 0:t.spatialReference);return r!==null?H.fromGE(r):null}class me extends ot{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var o;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(o||(o={}));function xt(e,n){try{const t=Ht(e,n);if(t==null)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);const r=Wt(t.type,e.spatialReference,n);return k(r)&&r(t),t}catch(t){if(!(t instanceof me))throw t;return null}}function le(e,n,t){return!t&&(!!ee(e,n)||z(e)&&z(n)&&!!tt(e,n,nt))}async function hn(e,n,t,r){if(Ve())return Ue(r);if(Array.isArray(e)){for(const{source:a,dest:i,geographicTransformation:u}of e)if(!le(a,i,u))return Ie(r)}else if(!le(e,n,t))return Ie(r);return Ue(r)}function vt(e,n,t){return e?"x"in e?Yt(e,n,new Ot,t,0):"xmin"in e?Kt(e,n,new Nt,t,0):"rings"in e?Je(e,n,new Gt,t,0):"paths"in e?$t(e,n,new It,t,0):"points"in e?jt(e,n,new mt,t,0):null:null}function Yt(e,n,t,r,a){M[0]=e.x,M[1]=e.y;const i=e.z;return M[2]=i!==void 0?i:a,oe(M,n,0,M,r,0,1)?(t.x=M[0],t.y=M[1],t.spatialReference=r,i===void 0?(t.z=void 0,t.hasZ=!1):(t.z=M[2],t.hasZ=!0),e.m===void 0?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function jt(e,n,t,r,a){const{points:i,hasZ:u,hasM:s}=e,l=[],E=i.length,P=[];for(const c of i)P.push(c[0],c[1],u?c[2]:a);if(!oe(P,n,0,P,r,0,E))return null;for(let c=0;c<E;++c){const S=3*c,f=P[S],p=P[S+1];u&&s?l.push([f,p,P[S+2],i[c][3]]):u?l.push([f,p,P[S+2]]):s?l.push([f,p,i[c][2]]):l.push([f,p])}return t.points=l,t.spatialReference=r,t.hasZ=u,t.hasM=s,t}function $t(e,n,t,r,a){const{paths:i,hasZ:u,hasM:s}=e,l=[];return Qe(i,u??!1,s??!1,n,l,r,a)?(t.paths=l,t.spatialReference=r,t.hasZ=u,t.hasM=s,t):null}function Gn(e,n,t=n.spatialReference,r=0){return k(e.spatialReference)&&k(t)&&k(Je(e,e.spatialReference,n,t,r))}function Je(e,n,t,r,a){const{rings:i,hasZ:u,hasM:s}=e,l=[];return Qe(i,u??!1,s??!1,n,l,r,a)?(t.rings=l,t.spatialReference=r,t.hasZ=u,t.hasM=s,t):null}function Kt(e,n,t,r,a){const{xmin:i,ymin:u,xmax:s,ymax:l,hasZ:E,hasM:P}=e;return ke(i,u,E?e.zmin:a,n,M,r)?(t.xmin=M[0],t.ymin=M[1],E&&(t.zmin=M[2]),ke(s,l,E?e.zmax:a,n,M,r)?(t.xmax=M[0],t.ymax=M[1],E&&(t.zmax=M[2]),P&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=r,t):null):null}function In(e,n,t,r=0){M[0]=e.x,M[1]=e.y;const a=e.z;return M[2]=a!==void 0?a:r,oe(M,e.spatialReference,0,n,t,0,1)}function ke(e,n,t,r,a,i){return se[0]=e,se[1]=n,se[2]=t,oe(se,r,0,a,i,0,1)}function oe(e,n,t,r,a,i,u=1){const s=tt(n,a,nt);if(N(s))return!1;if(s===R){if(e===r&&t===i)return!0;const E=t+3*u;for(let P=t,c=i;P<E;P++,c++)r[c]=e[P];return!0}const l=t+3*u;for(let E=t,P=i;E<l;E+=3,P+=3)s(e,E,r,P);return!0}function Qe(e,n,t,r,a,i,u=0){const s=new Array;for(const E of e)for(const P of E)s.push(P[0],P[1],n?P[2]:u);if(!oe(s,r,0,s,i,0,s.length/3))return!1;let l=0;a.length=0;for(const E of e){const P=new Array;for(const c of E)n&&t?P.push([s[l++],s[l++],s[l++],c[3]]):n?P.push([s[l++],s[l++],s[l++]]):t?(P.push([s[l++],s[l++],c[2]]),l++):(P.push([s[l++],s[l++]]),l++);a.push(P)}return!0}function mn(e,n,t,r){if(N(e)||N(r))return!1;const a=ce(e,un),i=ce(r,Pn);if(a===i&&!Be(i)&&(a!==o.UNKNOWN||ee(e,r)))return At(t,n),!0;if(Be(i)){const u=J[a][o.LON_LAT],s=J[o.LON_LAT][i];return!N(u)&&!N(s)&&(u(n,0,w,0),s(w,0,D,0),et(h*w[0],h*w[1],t),t[12]=D[0],t[13]=D[1],t[14]=D[2],!0)}if((i===o.WEB_MERCATOR||i===o.PLATE_CARREE)&&(a===o.WGS84||a===o.CGCS2000&&i===o.PLATE_CARREE||a===o.SPHERICAL_ECEF||a===o.WEB_MERCATOR)){const u=J[a][o.LON_LAT],s=J[o.LON_LAT][i];return!N(u)&&!N(s)&&(u(n,0,w,0),s(w,0,D,0),a===o.SPHERICAL_ECEF?Xt(h*w[0],h*w[1],t):Ct(t),t[12]=D[0],t[13]=D[1],t[14]=D[2],!0)}return!1}function Be(e){return e===o.SPHERICAL_ECEF||e===o.SPHERICAL_MARS_PCPF||e===o.SPHERICAL_MOON_PCPF}function et(e,n,t){const r=Math.sin(e),a=Math.cos(e),i=Math.sin(n),u=Math.cos(n),s=t;return s[0]=-r,s[4]=-i*a,s[8]=u*a,s[12]=0,s[1]=a,s[5]=-i*r,s[9]=u*r,s[13]=0,s[2]=0,s[6]=u,s[10]=i,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1,s}function Xt(e,n,t){return et(e,n,t),Rt(t,t),t}function ce(e,n){return e?n.spatialReference===e?n.spatialReferenceId:(n.spatialReference=e,"metersPerUnit"in n&&(n.metersPerUnit=Pt(e,1)),e.wkt===Et.wkt?n.spatialReferenceId=o.SPHERICAL_ECEF:Tt(e)?n.spatialReferenceId=o.WGS84:Mt(e)?n.spatialReferenceId=o.WEB_MERCATOR:gt(e)?n.spatialReferenceId=o.PLATE_CARREE:e.wkt===lt.wkt?n.spatialReferenceId=o.WGS84_ECEF:e.wkid===Lt.CGCS2000?n.spatialReferenceId=o.CGCS2000:e.wkt===ct.wkt?n.spatialReferenceId=o.SPHERICAL_MARS_PCPF:e.wkt===ft.wkt?n.spatialReferenceId=o.SPHERICAL_MOON_PCPF:dt(e)?n.spatialReferenceId=o.GCSMARS2000:ht(e)?n.spatialReferenceId=o.GCSMOON2000:n.spatialReferenceId=o.UNKNOWN):o.UNKNOWN}function R(e,n,t,r){e!==t&&(t[r++]=e[n++],t[r++]=e[n++],t[r]=e[n])}function q(e,n,t,r){t[r++]=V*(e[n++]/g.radius),t[r++]=V*(Math.PI/2-2*Math.atan(Math.exp(-e[n++]/g.radius))),t[r]=e[n]}function bt(e,n,t,r){q(e,n,t,r),j(t,r,t,r)}function zt(e,n,t,r){q(e,n,t,r),K(t,r,t,r)}function Zt(e,n,t,r,a){const i=.4999999*Math.PI,u=_t(h*e[n+1],-i,i),s=Math.sin(u);t[r++]=h*e[n]*a.radius,t[r++]=a.halfSemiMajorAxis*Math.log((1+s)/(1-s)),t[r]=e[n+2]}function ne(e,n,t,r){Zt(e,n,t,r,g)}const xe=g.radius*Math.PI/180,ve=180/(g.radius*Math.PI);function v(e,n,t,r){t[r]=e[n]*xe,t[r+1]=e[n+1]*xe,t[r+2]=e[n+2]}function Y(e,n,t,r){t[r]=e[n]*ve,t[r+1]=e[n+1]*ve,t[r+2]=e[n+2]}function qt(e,n,t,r){q(e,n,t,r),v(t,r,t,r)}function Vt(e,n,t,r){X(e,n,t,r),v(t,r,t,r)}function Jt(e,n,t,r){$(e,n,t,r),v(t,r,t,r)}function Qt(e,n,t,r){Y(e,n,t,r),j(t,r,t,r)}function en(e,n,t,r){Y(e,n,t,r),ne(t,r,t,r)}function tn(e,n,t,r){Y(e,n,t,r),K(t,r,t,r)}function ye(e,n,t,r,a){const i=a+e[n+2],u=h*e[n+1],s=h*e[n],l=Math.cos(u);t[r++]=Math.cos(s)*l*i,t[r++]=Math.sin(s)*l*i,t[r]=Math.sin(u)*i}function Ye(e,n,t,r){ye(e,n,t,r,ie.radius)}function je(e,n,t,r){ye(e,n,t,r,Q.radius)}function j(e,n,t,r){ye(e,n,t,r,g.radius)}function Fe(e,n,t,r,a){const i=e[n],u=e[n+1],s=e[n+2],l=Math.sqrt(i*i+u*u+s*s),E=it(s/(l===0?1:l)),P=Math.atan2(u,i);t[r++]=V*P,t[r++]=V*E,t[r]=l-a}function $e(e,n,t,r){Fe(e,n,t,r,ie.radius)}function Ke(e,n,t,r){Fe(e,n,t,r,Q.radius)}function $(e,n,t,r){Fe(e,n,t,r,g.radius)}function nn(e,n,t,r){$(e,n,t,r),ne(t,r,t,r)}function on(e,n,t,r){$(e,n,t,r),K(t,r,t,r)}function rn(e,n,t,r,a){const i=h*e[n],u=h*e[n+1],s=e[n+2],l=Math.sin(u),E=Math.cos(u),P=a.radius/Math.sqrt(1-a.eccentricitySquared*l*l);t[r++]=(P+s)*E*Math.cos(i),t[r++]=(P+s)*E*Math.sin(i),t[r++]=(P*(1-a.eccentricitySquared)+s)*l}function K(e,n,t,r){rn(e,n,t,r,g)}function X(e,n,t,r){const a=Ut,i=e[n],u=e[n+1],s=e[n+2];let l,E,P,c,S,f,p,A,C,T,m,y,F,G,L,Se,pe,Ae,b,we,De;l=Math.abs(s),E=i*i+u*u,P=Math.sqrt(E),c=E+s*s,S=Math.sqrt(c),we=Math.atan2(u,i),f=s*s/c,p=E/c,G=a.a2/S,L=a.a3-a.a4/S,p>.3?(A=l/S*(1+p*(a.a1+G+f*L)/S),b=Math.asin(A),T=A*A,C=Math.sqrt(1-T)):(C=P/S*(1-f*(a.a5-G-p*L)/S),b=Math.acos(C),T=1-C*C,A=Math.sqrt(T)),m=1-g.eccentricitySquared*T,y=g.radius/Math.sqrt(m),F=a.a6*y,G=P-y*C,L=l-F*A,pe=C*G+A*L,Se=C*L-A*G,Ae=Se/(F/m+pe),b+=Ae,De=pe+Se*Ae/2,s<0&&(b=-b),t[r++]=V*we,t[r++]=V*b,t[r]=De}function _n(e,n,t,r){X(e,n,t,r),j(t,r,t,r)}function sn(e,n,t,r){X(e,n,t,r),ne(t,r,t,r)}const J={[o.WGS84]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:R,[o.SPHERICAL_ECEF]:j,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:ne,[o.PLATE_CARREE]:v,[o.WGS84]:R,[o.WGS84_ECEF]:K},[o.CGCS2000]:{[o.CGCS2000]:R,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:R,[o.SPHERICAL_ECEF]:j,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:v,[o.WGS84]:null,[o.WGS84_ECEF]:K},[o.GCSMARS2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:R,[o.GCSMOON2000]:null,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:je,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.GCSMOON2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:R,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:Ye,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.WEB_MERCATOR]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:q,[o.WGS84_COMPARABLE_LON_LAT]:q,[o.SPHERICAL_ECEF]:bt,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:R,[o.PLATE_CARREE]:qt,[o.WGS84]:q,[o.WGS84_ECEF]:zt},[o.WGS84_ECEF]:{[o.CGCS2000]:X,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:X,[o.WGS84_COMPARABLE_LON_LAT]:X,[o.SPHERICAL_ECEF]:_n,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:sn,[o.PLATE_CARREE]:Vt,[o.WGS84]:X,[o.WGS84_ECEF]:R},[o.SPHERICAL_ECEF]:{[o.CGCS2000]:$,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:$,[o.WGS84_COMPARABLE_LON_LAT]:$,[o.SPHERICAL_ECEF]:R,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:nn,[o.PLATE_CARREE]:Jt,[o.WGS84]:$,[o.WGS84_ECEF]:on},[o.SPHERICAL_MARS_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:Ke,[o.GCSMOON2000]:null,[o.LON_LAT]:Ke,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:R,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.SPHERICAL_MOON_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:$e,[o.LON_LAT]:$e,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:R,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.UNKNOWN]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:null,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:R,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.LON_LAT]:{[o.CGCS2000]:R,[o.GCSMARS2000]:R,[o.GCSMOON2000]:R,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:R,[o.SPHERICAL_ECEF]:j,[o.SPHERICAL_MARS_PCPF]:je,[o.SPHERICAL_MOON_PCPF]:Ye,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:ne,[o.PLATE_CARREE]:v,[o.WGS84]:R,[o.WGS84_ECEF]:K},[o.WGS84_COMPARABLE_LON_LAT]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:R,[o.WGS84_COMPARABLE_LON_LAT]:R,[o.SPHERICAL_ECEF]:j,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:v,[o.WGS84]:R,[o.WGS84_ECEF]:K},[o.PLATE_CARREE]:{[o.CGCS2000]:Y,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:Y,[o.WGS84_COMPARABLE_LON_LAT]:Y,[o.SPHERICAL_ECEF]:Qt,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:en,[o.PLATE_CARREE]:R,[o.WGS84]:Y,[o.WGS84_ECEF]:tn}};function tt(e,n,t=We()){return N(e)||N(n)?null:an(e,n,t).projector}function an(e,n,t){if(N(e)||N(n)||t.source.spatialReference===e&&t.dest.spatialReference===n)return t;const r=ce(e,t.source),a=ce(n,t.dest);return r===o.UNKNOWN&&a===o.UNKNOWN?ee(e,n)?t.projector=R:t.projector=null:t.projector=J[r][a],t}function We(){return{source:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},projector:R}}const un={spatialReference:null,spatialReferenceId:o.UNKNOWN},Pn={spatialReference:null,spatialReferenceId:o.UNKNOWN},nt=We();We();const h=st(1),V=rt(1),se=fe(),w=fe(),D=fe(),M=fe();export{le as A,Me as E,Ee as O,Te as P,mn as Z,hn as _,Le as a,Bt as b,H as c,Ve as e,In as g,He as l,Gn as m,kt as o,Ht as r,O as s,Ie as t,dn as u,oe as x};
