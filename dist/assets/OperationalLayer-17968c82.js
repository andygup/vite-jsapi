import{ae as i,af as y,bG as l,ai as d,f6 as g,f7 as I,E as p,f8 as G}from"./index-cc043433.js";import{b as m,f as w}from"./commonProperties-5f6451de.js";const v={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},f=c=>{let a=class extends c{constructor(){super(...arguments),this.title=null}writeListMode(r,e,t,u){(u&&u.layerContainerType==="ground"||r&&g(this,t,{},u))&&(e[t]=r)}writeOperationalLayerType(r,e,t,u){r&&!(u&&u.layerContainerType==="tables")&&(e.layerType=r)}writeTitle(r,e){e.title=r??"Layer"}read(r,e){e&&(e.layer=this),I(this,r,t=>super.read(r,t),e)}write(r,e){var S,L;if(e!=null&&e.origin){const s=`${e.origin}/${e.layerContainerType||"operational-layers"}`,o=v[s];let n=!!(o!=null&&o[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&s==="web-scene/operational-layers"&&(n=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&s==="web-map/operational-layers"&&(n=!1),!n)return(S=e.messages)==null||S.push(new p("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${s}'`,{layer:this})),null}const t=super.write(r,{...e,layer:this}),u=!!e&&!!e.messages&&!!e.messages.filter(s=>s instanceof p&&s.name==="web-document-write:property-required").length;return G(t==null?void 0:t.url)?((L=e==null?void 0:e.messages)==null||L.push(new p("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&u?null:t}beforeSave(){}};return i([y({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],a.prototype,"id",void 0),i([y(m)],a.prototype,"listMode",void 0),i([l("listMode")],a.prototype,"writeListMode",null),i([y({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],a.prototype,"operationalLayerType",void 0),i([l("operationalLayerType")],a.prototype,"writeOperationalLayerType",null),i([y(w)],a.prototype,"opacity",void 0),i([y({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],a.prototype,"title",void 0),i([l("title"),l(["web-scene"],"title")],a.prototype,"writeTitle",null),i([y({type:Boolean,json:{name:"visibility"}})],a.prototype,"visible",void 0),a=i([d("esri.layers.mixins.OperationalLayer")],a),a};export{f as O};
