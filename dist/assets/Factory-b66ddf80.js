import{mU as A,nl as N,n0 as M,nK as p,nm as j,nn as L,e5 as T,A as w,C as d,nL as y,i as z,m9 as S,bY as Z}from"./index-ebffac9a.js";function P(t,n){return C(t,()=>n)}function C(t,n){const e=d(),c=d();let o=!1;return a=>{const l=n(a);if(a.action==="start"){const i=N(a.screenStart,M(p.get())),r=j(t.state.camera,i,D);r!=null&&(o=L(l,r,e))}if(!o)return null;const s=N(a.screenEnd,M(p.get())),u=j(t.state.camera,s,D);return u==null?null:L(l,u,c)?{...a,renderStart:e,renderEnd:c,plane:l,ray:u}:null}}var m;function E(t){let n=null;return e=>{switch(e.action){case"start":n=t.disableDisplay();break;case"end":case"cancel":n!=null&&(n.remove(),n=null)}return e}}function h(t,n=null){const e=T(t.state.viewingMode);e.options.selectionMode=!0,e.options.store=w.MIN,e.options.hud=!1;const c=S(),o={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},a=d(),l=n??t.spatialReference,s=i=>{t.map.ground&&t.map.ground.opacity<1?o.exclude.add(y):o.exclude.delete(y),t.sceneIntersectionHelper.intersectIntersectorScreen(N(i,c),e,o);const r=e.results.min;let I;if(r.getIntersectionPoint(a))I=r.intersector===z.TERRAIN?m.GROUND:m.OTHER;else{if(!e.results.ground.getIntersectionPoint(a))return null;I=m.GROUND}return{location:t.renderCoordsHelper.fromRenderCoords(a,l),surfaceType:I}};let u;return i=>{if(i.action==="start"){const I=s(i.screenStart);u=I!=null?I.location:null}if(u==null)return null;const r=s(i.screenEnd);return r!=null&&r.location!=null?{...i,mapStart:u,mapEnd:r.location,surfaceType:r.surfaceType}:null}}(function(t){t[t.GROUND=0]="GROUND",t[t.OTHER=1]="OTHER"})(m||(m={}));const D=A(),x="theme-style";function b(t,n){return R(f(H(Y(t),n)),n.size)}function H(t,{accentColor:n,contrastColor:e}){const c=n.toHex(),o=n.a,a=e.toHex(),l=e.a,s=t.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(x);return s&&(s.innerHTML=`
      .contrast-fill { fill: ${a}; fill-opacity: ${l}; }
      .contrast-stroke { stroke: ${a}; stroke-opacity: ${l};  }
      .accent-fill { fill: ${c}; fill-opacity: ${o}; }
      .accent-stroke { stroke: ${c}; stroke-opacity:  ${o}; }`),t}function Y(t){const n=t.split(",")[1],e=atob(n);return new DOMParser().parseFromString(e,"image/svg+xml")}function f(t){const n=new XMLSerializer().serializeToString(t);return`data:image/svg+xml;base64,${btoa(n)}`}function R(t,n){const e=new Image(n,n);return e.src=t,e}const v="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NnoiIGNsYXNzPSJhY2NlbnQtZmlsbCIvPjxwYXRoIHN0cm9rZS13aWR0aD0iNC45OSIgZD0iTTIwLjA1IDQwLjg2YTE1LjA1IDE1LjA1IDAgMCAwIDE3LjE0LTEuNSAxNS4wNSAxNS4wNSAwIDAgMCA0LjQ3LTE2LjY1IDE1LjA1IDE1LjA1IDAgMCAwLTIyLjcyLTcuMTUgMTUuMDUgMTUuMDUgMCAwIDAtNS41IDcuMTUiIGNsYXNzPSJjb250cmFzdC1zdHJva2UiLz48cGF0aCBkPSJtMTAuOTcgMzUuNTcgNS4zOCAxMi4wNyA3Ljc5LTEzLjQ3LTEzLjE3IDEuNHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+",G="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTgyIDExLjk4MiAwIDAgMC05LjggNy41MDciIGNsYXNzPSJjb250cmFzdC1zdHJva2UgY29udHJhc3QtZmlsbCIvPjxwYXRoIGQ9Im0yOS44MTggMjIuODA4LTYuMTg0IDQuNi0uNTQxLTguMzY0eiIgY2xhc3M9ImNvbnRyYXN0LWZpbGwiLz48L3N2Zz4=",g=64;function O(t,n){const{accentColor:e,contrastColor:c,preMultiplyAlpha:o}=n;return t.fromData(`heading-rotate:[accent:${e},contrast:${c},size:${g}]`,()=>new Z(b(v,{accentColor:e,contrastColor:c,size:g}),{mipmap:!0,preMultiplyAlpha:o}))}function U(t,n){const{accentColor:e,contrastColor:c,preMultiplyAlpha:o}=n;return t.fromData(`tilt-rotate:[accent:${e},contrast:${c},size:${g}]`,()=>new Z(b(G,{accentColor:e,contrastColor:c,size:g}),{mipmap:!0,preMultiplyAlpha:o}))}export{E as A,h as F,P as H,U as l,O as n};
