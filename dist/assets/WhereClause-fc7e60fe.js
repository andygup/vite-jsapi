import{b as Rs,h as gt}from"./string-3d0ebcd3.js";import"./typedArrayUtil-2bcf3cee.js";function Js(l,u){const o=Tt[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function ks(l,u){const o=Tt[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const Tt={min:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.min.apply(Math,l[0])},max:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.max.apply(Math,l[0])},avg:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:At(l[0])},sum:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Us(l[0])},stddev:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sqrt(wt(l[0]))},count:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].length},var:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:wt(l[0])}};function At(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u/l.length}function Us(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u}function wt(l){const u=At(l),o=l.length;let p=0;for(const i of l)p+=(i-u)**2;return o>1?p/(o-1):0}let J=class j{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(u){if(u.precision!==null||u.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(u){const o=new j;return o.second=u/1e3,o}static createFromValueAndQualifer(u,o,p){let i=null;const v=new j;if(v.op=p==="-"?"-":"+",o.type==="interval-period"){j._fixDefaults(o);const m=new RegExp("^[0-9]{1,}$");if(o.period==="year"||o.period==="month")throw new Error("Year-Month Intervals not supported");if(!m.test(u))throw new Error("Illegal Interval");v[o.period]=parseFloat(u)}else{if(j._fixDefaults(o.start),j._fixDefaults(o.end),o.start.period==="year"||o.start.period==="month")throw new Error("Year-Month Intervals not supported");if(o.end.period==="year"||o.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(o.start.period){case"day":switch(o.end.period){case"hour":if(i=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v[o.start.period]=parseFloat(u.split(" ")[0]),v[o.end.period]=parseFloat(u.split(" ")[1]);break;case"minute":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1])}break;case"second":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(o.end.period){case"minute":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v.hour=parseFloat(u.split(":")[0]),v.minute=parseFloat(u.split(":")[1]);break;case"second":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(o.end.period!=="second")throw new Error("Invalid Interval.");if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.minute=parseFloat(m[0]),v.second=parseFloat(m[1])}break;default:throw new Error("Invalid Interval.")}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};function It(l,u){const o=Et[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function Hs(l,u){const o=Et[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const Et={extract:{minParams:2,maxParams:2,evaluate:([l,u])=>{if(u==null)return null;if(u instanceof Date)switch(l.toUpperCase()){case"SECOND":return u.getSeconds();case"MINUTE":return u.getMinutes();case"HOUR":return u.getHours();case"DAY":return u.getDate();case"MONTH":return u.getMonth()+1;case"YEAR":return u.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(l.length===2){const[u,o]=l;return u==null||o==null?null:u.toString().substring(o-1)}if(l.length===3){const[u,o,p]=l;return u==null||o==null||p==null?null:p<=0?"":u.toString().substring(o-1,o+p-1)}}},position:{minParams:2,maxParams:2,evaluate:([l,u])=>l==null||u==null?null:u.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{const u=l.length===3,o=u?l[1]:" ",p=u?l[2]:l[1];if(o==null||p==null)return null;const i=`(${Rs(o)})`;switch(l[0]){case"BOTH":return p.replace(new RegExp(`^${i}*|${i}*$`,"g"),"");case"LEADING":return p.replace(new RegExp(`^${i}*`,"g"),"");case"TRAILING":return p.replace(new RegExp(`${i}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.cos(l[0])},tan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0]>0?1:l[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const u=l[0],o=l.length===2?10**l[1]:1;return u==null?null:Math.round(u*o)/o}},truncate:{minParams:1,maxParams:2,evaluate:l=>l[0]==null?null:l.length===1?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>typeof l[0]=="string"||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:l=>{let u="";for(let o=0;o<l.length;o++){if(l[o]==null)return null;u+=l[o].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toUpperCase()}};var yt,Nt,St={exports:{}};Nt=function(){function l(i,v){function m(){this.constructor=i}m.prototype=v.prototype,i.prototype=new m}function u(i,v,m,t){var N=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(N,u.prototype),N.expected=v,N.found=m,N.location=t,N.name="SyntaxError",N}function o(i,v,m){return m=m||" ",i.length>v?i:(v-=i.length,i+(m+=m.repeat(v)).slice(0,v))}function p(i,v){var m,t={},N=(v=v!==void 0?v:{}).grammarSource,T={start:qe},P=qe,k="!",M="=",x=">=",E=">",F="<=",S="<>",Rt="<",Se="!=",le="+",ce="-",Jt="*",kt="/",Ut="@",Ce="'",_e="N'",K="''",Ht=".",Vt="null",qt="true",Bt="false",$t="in",jt="is",Yt="like",zt="escape",Gt="not",Wt="and",Kt="or",Zt="between",Qt="from",Xt="for",en="substring",tn="extract",nn="trim",rn="position",an="timestamp",un="date",sn="leading",on="trailing",ln="both",cn="to",fn="interval",pn="year",vn="month",hn="day",dn="hour",mn="minute",gn="second",wn="case",yn="end",Nn="when",bn="then",xn="else",Tn=",",An="(",In=")",Pe="`",En=/^[A-Za-z_\x80-\uFFFF]/,Sn=/^[A-Za-z0-9_]/,Cn=/^[A-Za-z0-9_.\x80-\uFFFF]/,Fe=/^[^']/,_n=/^[0-9]/,Pn=/^[eE]/,Fn=/^[+\-]/,Ln=/^[ \t\n\r]/,Le=/^[^`]/,Mn=g("!",!1),Me=g("=",!1),Dn=g(">=",!1),On=g(">",!1),Rn=g("<=",!1),Jn=g("<>",!1),kn=g("<",!1),Un=g("!=",!1),fe=g("+",!1),pe=g("-",!1),Hn=g("*",!1),Vn=g("/",!1),qn=D([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Bn=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),$n=D([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),jn=g("@",!1),De=g("'",!1),Yn=g("N'",!1),Oe=g("''",!1),Re=D(["'"],!0,!1),zn=g(".",!1),Gn=D([["0","9"]],!1,!1),Wn=D(["e","E"],!1,!1),Kn=D(["+","-"],!1,!1),Zn=g("NULL",!0),Qn=g("TRUE",!0),Xn=g("FALSE",!0),er=g("IN",!0),tr=g("IS",!0),nr=g("LIKE",!0),rr=g("ESCAPE",!0),ar=g("NOT",!0),ur=g("AND",!0),sr=g("OR",!0),or=g("BETWEEN",!0),ir=g("FROM",!0),lr=g("FOR",!0),cr=g("SUBSTRING",!0),fr=g("EXTRACT",!0),pr=g("TRIM",!0),vr=g("POSITION",!0),hr=g("TIMESTAMP",!0),dr=g("DATE",!0),mr=g("LEADING",!0),gr=g("TRAILING",!0),wr=g("BOTH",!0),yr=g("TO",!0),Nr=g("INTERVAL",!0),br=g("YEAR",!0),xr=g("MONTH",!0),Tr=g("DAY",!0),Ar=g("HOUR",!0),Ir=g("MINUTE",!0),Er=g("SECOND",!0),Sr=g("CASE",!0),Cr=g("END",!0),_r=g("WHEN",!0),Pr=g("THEN",!0),Fr=g("ELSE",!0),Lr=g(",",!1),Mr=g("(",!1),Dr=g(")",!1),Or=D([" ","	",`
`,"\r"],!1,!1),Je=g("`",!1),ke=D(["`"],!0,!1),Rr=function(e){return e},Jr=function(e,r){var a={type:"expression-list"},s=Os(e,r);return a.value=s,a},kr=function(e,r){return G(e,r)},Ur=function(e,r){return G(e,r)},Hr=function(e){return Ms("NOT",e)},Vr=function(e,r){return r==""||r==null||r==null?e:r.type=="arithmetic"?G(e,r.tail):mt(r.op,e,r.right,r.escape)},qr=function(e){return{type:"arithmetic",tail:e}},Br=function(e,r){return{op:e+"NOT",right:r}},$r=function(e,r){return{op:e,right:r}},jr=function(e,r,a){return{op:"NOT"+e,right:{type:"expression-list",value:[r,a]}}},Yr=function(e,r,a){return{op:e,right:{type:"expression-list",value:[r,a]}}},zr=function(e){return e[0]+" "+e[2]},Gr=function(e){return e[0]+" "+e[2]},Wr=function(e,r,a){return{op:e,right:r,escape:a.value}},Kr=function(e,r){return{op:e,right:r,escape:""}},Zr=function(e,r){return{op:e,right:r}},Qr=function(e){return{op:e,right:{type:"expression-list",value:[]}}},Xr=function(e,r){return{op:e,right:r}},ea=function(e,r){return G(e,r)},ta=function(e,r){return G(e,r)},na=function(e){return e.paren=!0,e},ra=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},aa=function(e){return e},ua=function(e,r){return e+r.join("")},sa=function(e,r){return e+r.join("")},oa=function(e){return{type:"parameter",value:e[1]}},ia=function(e,r){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},r]}}},la=function(e,r,a){return{type:"function",name:"substring",args:{type:"expression-list",value:a?[e,r,a[2]]:[e,r]}}},ca=function(e,r,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},r,a]}}},fa=function(e,r){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},r]}}},pa=function(e,r){return{type:"function",name:"position",args:{type:"expression-list",value:[e,r]}}},va=function(e,r){return{type:"function",name:e,args:r||{type:"expression-list",value:[]}}},ha=function(e){return{type:"timestamp",value:e.value}},da=function(e,r,a){return{type:"interval",value:r,qualifier:a,op:e}},ma=function(e,r){return{type:"interval",value:e,qualifier:r,op:""}},ga=function(e,r){return{type:"interval-qualifier",start:e,end:r}},wa=function(e,r){return{type:"interval-period",period:e.value,precision:r,secondary:null}},ya=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Na=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},ba=function(e,r){return{type:"interval-period",period:"second",precision:e,secondary:r}},xa=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Ta=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Aa=function(e,r){return{type:"interval-period",period:e.value,precision:r,secondary:null}},Ia=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Ea=function(e,r){return{type:"interval-period",period:"second",precision:e,secondary:r}},Sa=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Ca=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},_a=function(){return{type:"string",value:"day"}},Pa=function(){return{type:"string",value:"hour"}},Fa=function(){return{type:"string",value:"minute"}},La=function(){return{type:"string",value:"month"}},Ma=function(){return{type:"string",value:"year"}},Da=function(e){return parseFloat(e)},Oa=function(e){return parseFloat(e)},Ra=function(e){return{type:"date",value:e.value}},Ja=function(){return{type:"null",value:null}},ka=function(){return{type:"boolean",value:!0}},Ua=function(){return{type:"boolean",value:!1}},Ue=function(){return"'"},Ha=function(e){return{type:"string",value:e.join("")}},Va=function(e,r){return{type:"case-expression",format:"simple",operand:e,clauses:r,else:null}},qa=function(e,r,a){return{type:"case-expression",format:"simple",operand:e,clauses:r,else:a.value}},Ba=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},$a=function(e,r){return{type:"case-expression",format:"searched",clauses:e,else:r.value}},ja=function(e,r){return{type:"when-clause",operand:e,value:r}},Ya=function(e,r){return{type:"when-clause",operand:e,value:r}},za=function(e){return{type:"else-clause",value:e}},Ga=function(e){return{type:"number",value:e}},Wa=function(e,r,a){return parseFloat(e+r+a)},Ka=function(e,r){return parseFloat(e+r)},Za=function(e,r){return parseFloat(e+r)},Qa=function(e){return parseFloat(e)},Xa=function(e,r){return e[0]+r},eu=function(e){return"."+(e??"")},tu=function(e,r){return e+r},nu=function(e){return e.join("")},ru=function(e,r){return"e"+(r===null?"":r)},au=function(){return"IN"},uu=function(){return"IS"},su=function(){return"LIKE"},ou=function(){return"ESCAPE"},iu=function(){return"NOT"},lu=function(){return"AND"},cu=function(){return"OR"},fu=function(){return"BETWEEN"},pu=function(){return"FROM"},vu=function(){return"FOR"},hu=function(){return"SUBSTRING"},du=function(){return"EXTRACT"},mu=function(){return"TRIM"},gu=function(){return"POSITION"},wu=function(){return"TIMESTAMP"},yu=function(){return"DATE"},Nu=function(){return"LEADING"},bu=function(){return"TRAILING"},xu=function(){return"BOTH"},Tu=function(){return"TO"},Au=function(){return"INTERVAL"},Iu=function(){return"YEAR"},Eu=function(){return"MONTH"},Su=function(){return"DAY"},Cu=function(){return"HOUR"},_u=function(){return"MINUTE"},Pu=function(){return"SECOND"},Fu=function(){return"CASE"},Lu=function(){return"END"},Mu=function(){return"WHEN"},Du=function(){return"THEN"},Ou=function(){return"ELSE"},Ru=function(e){return e},Ju=function(e){return e.join("")},n=0,Z=[{line:1,column:1}],L=0,ve=[],c=0;if("startRule"in v){if(!(v.startRule in T))throw new Error(`Can't start parsing from rule "`+v.startRule+'".');P=T[v.startRule]}function g(e,r){return{type:"literal",text:e,ignoreCase:r}}function D(e,r,a){return{type:"class",parts:e,inverted:r,ignoreCase:a}}function ku(){return{type:"end"}}function He(e){var r,a=Z[e];if(a)return a;for(r=e-1;!Z[r];)r--;for(a={line:(a=Z[r]).line,column:a.column};r<e;)i.charCodeAt(r)===10?(a.line++,a.column=1):a.column++,r++;return Z[e]=a,a}function Ve(e,r){var a=He(e),s=He(r);return{source:N,start:{offset:e,line:a.line,column:a.column},end:{offset:r,line:s.line,column:s.column}}}function h(e){n<L||(n>L&&(L=n,ve=[]),ve.push(e))}function Uu(e,r,a){return new u(u.buildMessage(e,r),e,r,a)}function qe(){var e,r;return e=n,f(),(r=I())!==t?(f(),e=Rr(r)):(n=e,e=t),e}function Be(){var e,r,a,s,d,y,b,A;if(e=n,(r=I())!==t){for(a=[],s=n,d=f(),(y=oe())!==t?(b=f(),(A=I())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(y=oe())!==t?(b=f(),(A=I())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);e=Jr(r,a)}else n=e,e=t;return e}function I(){var e,r,a,s,d,y,b,A;if(e=n,(r=he())!==t){for(a=[],s=n,d=f(),(y=at())!==t?(b=f(),(A=he())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(y=at())!==t?(b=f(),(A=he())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);e=kr(r,a)}else n=e,e=t;return e}function he(){var e,r,a,s,d,y,b,A;if(e=n,(r=Q())!==t){for(a=[],s=n,d=f(),(y=ae())!==t?(b=f(),(A=Q())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(y=ae())!==t?(b=f(),(A=Q())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);e=Ur(r,a)}else n=e,e=t;return e}function Q(){var e,r,a,s,d;return e=n,(r=z())===t&&(r=n,i.charCodeAt(n)===33?(a=k,n++):(a=t,c===0&&h(Mn)),a!==t?(s=n,c++,i.charCodeAt(n)===61?(d=M,n++):(d=t,c===0&&h(Me)),c--,d===t?s=void 0:(n=s,s=t),s!==t?r=a=[a,s]:(n=r,r=t)):(n=r,r=t)),r!==t?(a=f(),(s=Q())!==t?e=Hr(s):(n=e,e=t)):(n=e,e=t),e===t&&(e=Hu()),e}function Hu(){var e,r,a;return e=n,(r=O())!==t?(f(),(a=Vu())===t&&(a=null),e=Vr(r,a)):(n=e,e=t),e}function Vu(){var e;return(e=qu())===t&&(e=Yu())===t&&(e=$u())===t&&(e=Bu())===t&&(e=ju()),e}function qu(){var e,r,a,s,d,y;if(e=[],r=n,a=f(),(s=$e())!==t?(d=f(),(y=O())!==t?r=a=[a,s,d,y]:(n=r,r=t)):(n=r,r=t),r!==t)for(;r!==t;)e.push(r),r=n,a=f(),(s=$e())!==t?(d=f(),(y=O())!==t?r=a=[a,s,d,y]:(n=r,r=t)):(n=r,r=t);else e=t;return e!==t&&(e=qr(e)),e}function $e(){var e;return i.substr(n,2)===x?(e=x,n+=2):(e=t,c===0&&h(Dn)),e===t&&(i.charCodeAt(n)===62?(e=E,n++):(e=t,c===0&&h(On)),e===t&&(i.substr(n,2)===F?(e=F,n+=2):(e=t,c===0&&h(Rn)),e===t&&(i.substr(n,2)===S?(e=S,n+=2):(e=t,c===0&&h(Jn)),e===t&&(i.charCodeAt(n)===60?(e=Rt,n++):(e=t,c===0&&h(kn)),e===t&&(i.charCodeAt(n)===61?(e=M,n++):(e=t,c===0&&h(Me)),e===t&&(i.substr(n,2)===Se?(e=Se,n+=2):(e=t,c===0&&h(Un)))))))),e}function Bu(){var e,r,a,s;return e=n,(r=nt())!==t?(f(),(a=z())!==t?(f(),(s=O())!==t?e=Br(r,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=nt())!==t?(f(),(a=O())!==t?e=$r(r,a):(n=e,e=t)):(n=e,e=t)),e}function $u(){var e,r,a,s,d,y;return e=n,(r=z())!==t?(f(),(a=ut())!==t?(f(),(s=O())!==t?(f(),(d=ae())!==t?(f(),(y=O())!==t?e=jr(a,s,y):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ut())!==t?(f(),(a=O())!==t?(f(),(s=ae())!==t?(f(),(d=O())!==t?e=Yr(r,a,d):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function je(){var e,r,a,s,d;return e=n,r=n,(a=z())!==t?(s=f(),(d=rt())!==t?r=a=[a,s,d]:(n=r,r=t)):(n=r,r=t),r!==t&&(r=zr(r)),(e=r)===t&&(e=rt()),e}function de(){var e,r,a,s,d;return e=n,r=n,(a=z())!==t?(s=f(),(d=be())!==t?r=a=[a,s,d]:(n=r,r=t)):(n=r,r=t),r!==t&&(r=Gr(r)),(e=r)===t&&(e=be()),e}function ju(){var e,r,a,s;return e=n,(r=je())!==t?(f(),(a=q())!==t?(f(),Ns()!==t?(f(),(s=Ne())!==t?e=Wr(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=je())!==t?(f(),(a=q())!==t?e=Kr(r,a):(n=e,e=t)):(n=e,e=t)),e}function Yu(){var e,r,a,s;return e=n,(r=de())!==t?(f(),(a=C())!==t?(f(),(s=Be())!==t?(f(),_()!==t?e=Zr(r,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=de())!==t?(f(),(a=C())!==t?(f(),(s=_())!==t?e=Qr(r):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=de())!==t?(f(),(a=ye())!==t?e=Xr(r,a):(n=e,e=t)):(n=e,e=t))),e}function O(){var e,r,a,s,d,y,b,A;if(e=n,(r=me())!==t){for(a=[],s=n,d=f(),(y=Ye())!==t?(b=f(),(A=me())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(y=Ye())!==t?(b=f(),(A=me())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);e=ea(r,a)}else n=e,e=t;return e}function Ye(){var e;return i.charCodeAt(n)===43?(e=le,n++):(e=t,c===0&&h(fe)),e===t&&(i.charCodeAt(n)===45?(e=ce,n++):(e=t,c===0&&h(pe))),e}function me(){var e,r,a,s,d,y,b,A;if(e=n,(r=ge())!==t){for(a=[],s=n,d=f(),(y=ze())!==t?(b=f(),(A=ge())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(y=ze())!==t?(b=f(),(A=ge())!==t?s=d=[d,y,b,A]:(n=s,s=t)):(n=s,s=t);e=ta(r,a)}else n=e,e=t;return e}function ze(){var e;return i.charCodeAt(n)===42?(e=Jt,n++):(e=t,c===0&&h(Hn)),e===t&&(i.charCodeAt(n)===47?(e=kt,n++):(e=t,c===0&&h(Vn))),e}function ge(){var e,r;return(e=ns())===t&&(e=Ku())===t&&(e=Zu())===t&&(e=Qu())===t&&(e=Xu())===t&&(e=es())===t&&(e=fs())===t&&(e=zu())===t&&(e=ye())===t&&(e=n,C()!==t?(f(),(r=I())!==t?(f(),_()!==t?e=na(r):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function zu(){var e;return(e=Gu())!==t&&(e=ra(e)),e}function Gu(){var e;return(e=Wu())!==t&&(e=aa(e)),e}function Wu(){var e,r,a,s;if(e=n,(r=we())!==t){for(a=[],s=We();s!==t;)a.push(s),s=We();e=ua(r,a)}else n=e,e=t;return e}function Ge(){var e,r,a,s;if(e=n,(r=we())!==t){for(a=[],s=w();s!==t;)a.push(s),s=w();e=sa(r,a)}else n=e,e=t;return e}function we(){var e;return En.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(qn)),e}function w(){var e;return Sn.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Bn)),e}function We(){var e;return Cn.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h($n)),e}function ye(){var e,r,a;return e=n,i.charCodeAt(n)===64?(r=Ut,n++):(r=t,c===0&&h(jn)),r!==t&&(a=Ge())!==t?e=r=[r,a]:(n=e,e=t),e!==t&&(e=oa(e)),e}function Ku(){var e,r,a;return e=n,Ts()!==t?(f(),C()!==t?(f(),(r=ts())!==t?(f(),xe()!==t?(f(),(a=I())!==t?(f(),_()!==t?e=ia(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Zu(){var e,r,a,s,d,y,b;return e=n,xs()!==t?(f(),C()!==t?(f(),(r=I())!==t?(f(),xe()!==t?(f(),(a=I())!==t?(f(),s=n,(d=bs())!==t?(y=f(),(b=I())!==t?s=d=[d,y,b,f()]:(n=s,s=t)):(n=s,s=t),s===t&&(s=null),(d=_())!==t?e=la(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Qu(){var e,r,a,s;return e=n,st()!==t?(f(),C()!==t?(f(),(r=Ke())===t&&(r=null),f(),(a=I())!==t?(f(),xe()!==t?(f(),(s=I())!==t?(f(),_()!==t?e=ca(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,st()!==t?(f(),C()!==t?(f(),(r=Ke())===t&&(r=null),f(),(a=I())!==t?(f(),_()!==t?e=fa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ke(){var e;return(e=Ss())===t&&(e=Cs())===t&&(e=_s()),e}function Xu(){var e,r,a;return e=n,As()!==t?(f(),C()!==t?(f(),(r=I())!==t?(f(),be()!==t?(f(),(a=I())!==t?(f(),_()!==t?e=pa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function es(){var e,r,a;return e=n,(r=Ls())!==t?(f(),C()!==t?(f(),(a=Be())===t&&(a=null),f(),_()!==t?e=va(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function ts(){var e;return(e=it())===t&&(e=lt())===t&&(e=ct())===t&&(e=ft())===t&&(e=pt())===t&&(e=U()),e}function ns(){var e;return(e=Ne())===t&&(e=hs())===t&&(e=cs())===t&&(e=ls())===t&&(e=is())===t&&(e=rs())===t&&(e=as()),e}function rs(){var e,r;return e=n,Is()!==t?(f(),(r=q())!==t?e=ha(r):(n=e,e=t)):(n=e,e=t),e}function as(){var e,r,a,s;return e=n,ot()!==t?(f(),i.charCodeAt(n)===45?(r=ce,n++):(r=t,c===0&&h(pe)),r===t&&(i.charCodeAt(n)===43?(r=le,n++):(r=t,c===0&&h(fe))),r!==t?(f(),(a=q())!==t?(f(),(s=Ze())!==t?e=da(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,ot()!==t?(f(),(r=q())!==t?(f(),(a=Ze())!==t?e=ma(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ze(){var e,r,a;return e=n,(r=us())!==t?(f(),Ps()!==t?(f(),(a=ss())!==t?e=ga(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=os()),e}function us(){var e,r,a;return e=n,(r=Y())!==t?(f(),C()!==t?(f(),(a=ee())!==t?(f(),_()!==t?e=wa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Y())!==t&&(r=ya(r)),e=r),e}function ss(){var e,r,a,s;return e=n,(r=Y())!==t&&(r=Na(r)),(e=r)===t&&(e=n,(r=U())!==t?(f(),C()!==t?(f(),(a=ee())!==t?(f(),oe()!==t?(f(),(s=X())!==t?(f(),_()!==t?e=ba(a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t?(f(),C()!==t?(f(),(a=ee())!==t?(f(),_()!==t?e=xa(a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t&&(r=Ta()),e=r))),e}function os(){var e,r,a,s;return e=n,(r=Y())!==t?(f(),C()!==t?(f(),(a=X())!==t?(f(),_()!==t?e=Aa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Y())!==t&&(r=Ia(r)),(e=r)===t&&(e=n,(r=U())!==t?(f(),C()!==t?(f(),(a=ee())!==t?(f(),oe()!==t?(f(),(s=X())!==t?(f(),_()!==t?e=Ea(a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t?(f(),C()!==t?(f(),(a=X())!==t?(f(),_()!==t?e=Sa(a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t&&(r=Ca()),e=r)))),e}function Y(){var e,r;return e=n,(r=ct())!==t&&(r=_a()),(e=r)===t&&(e=n,(r=ft())!==t&&(r=Pa()),(e=r)===t&&(e=n,(r=pt())!==t&&(r=Fa()),(e=r)===t&&(e=n,(r=lt())!==t&&(r=La()),(e=r)===t&&(e=n,(r=it())!==t&&(r=Ma()),e=r)))),e}function X(){var e;return(e=B())!==t&&(e=Da(e)),e}function ee(){var e;return(e=B())!==t&&(e=Oa(e)),e}function is(){var e,r;return e=n,Es()!==t?(f(),(r=q())!==t?e=Ra(r):(n=e,e=t)):(n=e,e=t),e}function ls(){var e;return(e=gs())!==t&&(e=Ja()),e}function cs(){var e,r;return e=n,(r=ws())!==t&&(r=ka()),(e=r)===t&&(e=n,(r=ys())!==t&&(r=Ua()),e=r),e}function q(){var e;return(e=Ne())===t&&(e=ye()),e}function Ne(){var e,r,a,s,d;if(e=n,i.charCodeAt(n)===39?(r=Ce,n++):(r=t,c===0&&h(De)),r===t&&(i.substr(n,2)===_e?(r=_e,n+=2):(r=t,c===0&&h(Yn))),r!==t){for(a=[],s=n,i.substr(n,2)===K?(d=K,n+=2):(d=t,c===0&&h(Oe)),d!==t&&(d=Ue()),(s=d)===t&&(Fe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(Re)));s!==t;)a.push(s),s=n,i.substr(n,2)===K?(d=K,n+=2):(d=t,c===0&&h(Oe)),d!==t&&(d=Ue()),(s=d)===t&&(Fe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(Re)));i.charCodeAt(n)===39?(s=Ce,n++):(s=t,c===0&&h(De)),s!==t?e=Ha(a):(n=e,e=t)}else n=e,e=t;return e}function fs(){var e;return(e=ps())===t&&(e=vs()),e}function ps(){var e,r,a,s,d;if(e=n,ue()!==t)if(f(),(r=I())!==t){for(f(),a=[],s=ne();s!==t;)a.push(s),s=ne();s=f(),(d=se())!==t?e=Va(r,a):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,ue()!==t)if(f(),(r=I())!==t){for(f(),a=[],s=ne();s!==t;)a.push(s),s=ne();s=f(),(d=Qe())!==t?(f(),se()!==t?e=qa(r,a,d):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function vs(){var e,r,a,s;if(e=n,ue()!==t){for(f(),r=[],a=te();a!==t;)r.push(a),a=te();a=f(),(s=se())!==t?e=Ba(r):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,ue()!==t){for(f(),r=[],a=te();a!==t;)r.push(a),a=te();a=f(),(s=Qe())!==t?(f(),se()!==t?e=$a(r,s):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function te(){var e,r,a;return e=n,vt()!==t?(f(),(r=I())!==t?(f(),ht()!==t?(f(),(a=I())!==t?e=ja(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function ne(){var e,r,a;return e=n,vt()!==t?(f(),(r=I())!==t?(f(),ht()!==t?(f(),(a=I())!==t?e=Ya(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Qe(){var e,r;return e=n,Fs()!==t?(f(),(r=I())!==t?e=za(r):(n=e,e=t)):(n=e,e=t),e}function hs(){var e,r,a,s;return e=n,(r=ds())!==t?(a=n,c++,s=we(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Ga(r):(n=e,e=t)):(n=e,e=t),e}function ds(){var e,r,a,s;return e=n,(r=re())!==t&&(a=Xe())!==t&&(s=et())!==t?e=Wa(r,a,s):(n=e,e=t),e===t&&(e=n,(r=re())!==t&&(a=Xe())!==t?e=Ka(r,a):(n=e,e=t),e===t&&(e=n,(r=re())!==t&&(a=et())!==t?e=Za(r,a):(n=e,e=t),e===t&&(e=n,(r=re())!==t&&(r=Qa(r)),e=r))),e}function re(){var e,r,a;return(e=B())===t&&(e=n,i.charCodeAt(n)===45?(r=ce,n++):(r=t,c===0&&h(pe)),r===t&&(i.charCodeAt(n)===43?(r=le,n++):(r=t,c===0&&h(fe))),r!==t&&(a=B())!==t?e=Xa(r,a):(n=e,e=t)),e}function Xe(){var e,r,a;return e=n,i.charCodeAt(n)===46?(r=Ht,n++):(r=t,c===0&&h(zn)),r!==t?((a=B())===t&&(a=null),e=eu(a)):(n=e,e=t),e}function et(){var e,r,a;return e=n,(r=ms())!==t&&(a=B())!==t?e=tu(r,a):(n=e,e=t),e}function B(){var e,r;if(e=[],(r=tt())!==t)for(;r!==t;)e.push(r),r=tt();else e=t;return e!==t&&(e=nu(e)),e}function tt(){var e;return _n.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Gn)),e}function ms(){var e,r,a;return e=n,Pn.test(i.charAt(n))?(r=i.charAt(n),n++):(r=t,c===0&&h(Wn)),r!==t?(Fn.test(i.charAt(n))?(a=i.charAt(n),n++):(a=t,c===0&&h(Kn)),a===t&&(a=null),e=ru(r,a)):(n=e,e=t),e}function gs(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Vt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Zn)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function ws(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===qt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Qn)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function ys(){var e,r,a,s;return e=n,i.substr(n,5).toLowerCase()===Bt?(r=i.substr(n,5),n+=5):(r=t,c===0&&h(Xn)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function be(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===$t?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(er)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=au():(n=e,e=t)):(n=e,e=t),e}function nt(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===jt?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(tr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=uu():(n=e,e=t)):(n=e,e=t),e}function rt(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Yt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(nr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=su():(n=e,e=t)):(n=e,e=t),e}function Ns(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===zt?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(rr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=ou():(n=e,e=t)):(n=e,e=t),e}function z(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Gt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(ar)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=iu():(n=e,e=t)):(n=e,e=t),e}function ae(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Wt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(ur)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=lu():(n=e,e=t)):(n=e,e=t),e}function at(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===Kt?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(sr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=cu():(n=e,e=t)):(n=e,e=t),e}function ut(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===Zt?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(or)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=fu():(n=e,e=t)):(n=e,e=t),e}function xe(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Qt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(ir)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=pu():(n=e,e=t)):(n=e,e=t),e}function bs(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Xt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(lr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=vu():(n=e,e=t)):(n=e,e=t),e}function xs(){var e,r,a,s;return e=n,i.substr(n,9).toLowerCase()===en?(r=i.substr(n,9),n+=9):(r=t,c===0&&h(cr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=hu():(n=e,e=t)):(n=e,e=t),e}function Ts(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===tn?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(fr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=du():(n=e,e=t)):(n=e,e=t),e}function st(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===nn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(pr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=mu():(n=e,e=t)):(n=e,e=t),e}function As(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===rn?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(vr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=gu():(n=e,e=t)):(n=e,e=t),e}function Is(){var e,r,a,s;return e=n,i.substr(n,9).toLowerCase()===an?(r=i.substr(n,9),n+=9):(r=t,c===0&&h(hr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=wu():(n=e,e=t)):(n=e,e=t),e}function Es(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===un?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(dr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=yu():(n=e,e=t)):(n=e,e=t),e}function Ss(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===sn?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(mr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Nu():(n=e,e=t)):(n=e,e=t),e}function Cs(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===on?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(gr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=bu():(n=e,e=t)):(n=e,e=t),e}function _s(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===ln?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(wr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=xu():(n=e,e=t)):(n=e,e=t),e}function Ps(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===cn?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(yr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Tu():(n=e,e=t)):(n=e,e=t),e}function ot(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===fn?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(Nr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Au():(n=e,e=t)):(n=e,e=t),e}function it(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===pn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(br)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Iu():(n=e,e=t)):(n=e,e=t),e}function lt(){var e,r,a,s;return e=n,i.substr(n,5).toLowerCase()===vn?(r=i.substr(n,5),n+=5):(r=t,c===0&&h(xr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Eu():(n=e,e=t)):(n=e,e=t),e}function ct(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===hn?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(Tr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Su():(n=e,e=t)):(n=e,e=t),e}function ft(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===dn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Ar)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Cu():(n=e,e=t)):(n=e,e=t),e}function pt(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===mn?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(Ir)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=_u():(n=e,e=t)):(n=e,e=t),e}function U(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===gn?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(Er)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Pu():(n=e,e=t)):(n=e,e=t),e}function ue(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===wn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Sr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Fu():(n=e,e=t)):(n=e,e=t),e}function se(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===yn?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(Cr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Lu():(n=e,e=t)):(n=e,e=t),e}function vt(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Nn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(_r)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Mu():(n=e,e=t)):(n=e,e=t),e}function ht(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===bn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Pr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Du():(n=e,e=t)):(n=e,e=t),e}function Fs(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===xn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Fr)),r!==t?(a=n,c++,s=w(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Ou():(n=e,e=t)):(n=e,e=t),e}function oe(){var e;return i.charCodeAt(n)===44?(e=Tn,n++):(e=t,c===0&&h(Lr)),e}function C(){var e;return i.charCodeAt(n)===40?(e=An,n++):(e=t,c===0&&h(Mr)),e}function _(){var e;return i.charCodeAt(n)===41?(e=In,n++):(e=t,c===0&&h(Dr)),e}function f(){var e,r;for(e=[],r=dt();r!==t;)e.push(r),r=dt();return e}function dt(){var e;return Ln.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Or)),e}function Ls(){var e,r,a,s;if(e=n,(r=Ge())!==t&&(r=Ru(r)),(e=r)===t)if(e=n,i.charCodeAt(n)===96?(r=Pe,n++):(r=t,c===0&&h(Je)),r!==t){if(a=[],Le.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(ke)),s!==t)for(;s!==t;)a.push(s),Le.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(ke));else a=t;a!==t?(i.charCodeAt(n)===96?(s=Pe,n++):(s=t,c===0&&h(Je)),s!==t?e=Ju(a):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ms(e,r){return{type:"unary-expression",operator:e,expr:r}}function mt(e,r,a,s){var d={type:"binary-expression",operator:e,left:r,right:a};return s!==void 0&&(d.escape=s),d}function Ds(e,r){for(var a=[e],s=0;s<r.length;s++)a.push(r[s][3]);return a}function Os(e,r,a){return Ds(e,r)}function G(e,r){for(var a=e,s=0;s<r.length;s++)a=mt(r[s][1],a,r[s][3]);return a}if((m=P())!==t&&n===i.length)return m;throw m!==t&&n<i.length&&h(ku()),Uu(ve,L<i.length?i.charAt(L):null,L<i.length?Ve(L,L+1):Ve(L,L))}return l(u,Error),u.prototype.format=function(i){var v="Error: "+this.message;if(this.location){var m,t=null;for(m=0;m<i.length;m++)if(i[m].source===this.location.source){t=i[m].text.split(/\r\n|\n|\r/g);break}var N=this.location.start,T=this.location.source+":"+N.line+":"+N.column;if(t){var P=this.location.end,k=o("",N.line.toString().length," "),M=t[N.line-1],x=(N.line===P.line?P.column:M.length+1)-N.column||1;v+=`
 --> `+T+`
`+k+` |
`+N.line+" | "+M+`
`+k+" | "+o("",N.column-1," ")+o("",x,"^")}else v+=`
 at `+T}return v},u.buildMessage=function(i,v){var m={literal:function(x){return'"'+N(x.text)+'"'},class:function(x){var E=x.parts.map(function(F){return Array.isArray(F)?T(F[0])+"-"+T(F[1]):T(F)});return"["+(x.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};function t(x){return x.charCodeAt(0).toString(16).toUpperCase()}function N(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function T(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function P(x){return m[x.type](x)}function k(x){var E,F,S=x.map(P);if(S.sort(),S.length>0){for(E=1,F=1;E<S.length;E++)S[E-1]!==S[E]&&(S[F]=S[E],F++);S.length=F}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function M(x){return x?'"'+N(x)+'"':"end of input"}return"Expected "+k(i)+" but "+M(v)+" found."},{SyntaxError:u,parse:p}},(yt=St).exports&&(yt.exports=Nt());let Vs=class{static parse(u){return St.exports.parse(u)}};const Ct=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,qs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Bs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,$s=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,js=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Ys=new Set(["current_timestamp","current_date","current_time"]);function H(l,u){return(l+="").length>=u?l:new Array(u-l.length+1).join("0")+l}function W(l,u,o="0",p="0",i="0",v="0",m="",t="0",N="0"){if(m==="+"||m==="-"){const T=`${H(parseInt(l,10),4)}-${H(parseInt(u,10),2)}-${H(parseInt(o,10),2)}`;let P="";parseFloat(v)<10&&(P="0");const k=`${H(parseInt(p,10),2)}:${H(parseInt(i,10),2)}:${P+parseFloat(v).toString()}`,M=`${m}${H(parseInt(t,10),2)}:${H(parseInt(N,10),2)}`;return new Date(T+"T"+k+M)}return new Date(parseInt(l,10),parseInt(u,10)-1,parseInt(o,10),parseInt(p,10),parseInt(i,10),parseFloat(v))}class zs{static makeBool(u){return Pt(u)}static featureValue(u,o,p,i){return Ot(u,o,p,i)}static equalsNull(u){return u===null}static applyLike(u,o,p){return Ee(u,o,p)}static ensureArray(u){return Ae(u)}static applyIn(u,o){return Ie(u,o)}static currentDate(){const u=new Date;return u.setHours(0,0,0,0),u}static makeSqlInterval(u,o,p){return J.createFromValueAndQualifer(u,o,p)}static convertInterval(u){return u instanceof J?u.valueInMilliseconds():u}static currentTimestamp(){return new Date}static compare(u,o,p){return Mt(u,o,p)}static calculate(u,o,p){return Dt(u,o,p)}static makeComparable(u){return R(u)}static evaluateFunction(u,o){return It(u,o)}static lookup(u,o){const p=o[u];return p===void 0?null:p}static between(u,o){return u==null||o[0]==null||o[1]==null?null:u>=o[0]&&u<=o[1]}static notbetween(u,o){return u==null||o[0]==null||o[1]==null?null:u<o[0]||u>o[1]}static ternaryNot(u){return ie(u)}static ternaryAnd(u,o){return Ft(u,o)}static ternaryOr(u,o){return Lt(u,o)}}class _t{constructor(u,o){this.fieldsIndex=o,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Vs.parse(u);const{isStandardized:p,isAggregate:i,referencedFieldNames:v}=this._extractExpressionInfo(o);this._referencedFieldNames=v,this.isStandardized=p,this.isAggregate=i}static create(u,o){return new _t(u,o)}get fieldNames(){return this._referencedFieldNames}testSet(u,o=$){const p={};for(const i of this.fieldNames)p[i]=u.map(v=>o.getAttribute(v,i));return!!this._evaluateNode(this.parseTree,{attributes:p},$)}calculateValue(u,o=$){const p=this._evaluateNode(this.parseTree,u,o);return p instanceof J?p.valueInMilliseconds()/864e5:p}calculateValueCompiled(u,o=$){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(u,this.parameters,o,this._datefields):gt("esri-csp-restrictions")?this.calculateValue(u,o):(this._compileMe(),this.parseTree._compiledVersion(u,this.parameters,o,this._datefields))}testFeature(u,o=$){return!!this._evaluateNode(this.parseTree,u,o)}testFeatureCompiled(u,o=$){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(u,this.parameters,o,this._datefields):gt("esri-csp-restrictions")?this.testFeature(u,o):(this._compileMe(),!!this.parseTree._compiledVersion(u,this.parameters,o,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,u=>{u.type==="current-time"?this._hasDateFunctions=!0:u.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Ys.has(u.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="function"&&u.add(o.name.toLowerCase())}),Array.from(u)}getExpressions(){const u=new Map;return this._visitAll(this.parseTree,o=>{if(o.type==="function"){const p=o.name.toLowerCase(),i=o.args.value[0];if(i.type==="column-reference"){const v=i.column,m=`${p}-${v}`;u.has(m)||u.set(m,{aggregateType:p,field:v})}}}),[...u.values()]}getVariables(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="parameter"&&u.add(o.value.toLowerCase())}),Array.from(u)}_compileMe(){const u="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",u).bind(zs)}_extractExpressionInfo(u){const o=[],p=new Set;let i=!0,v=!0;return this._visitAll(this.parseTree,m=>{switch(m.type){case"column-reference":{const t=u==null?void 0:u.get(m.column);let N,T;t?N=T=t.name??"":(T=m.column,N=T.toLowerCase()),t&&t.name&&(t.type==="date"||t.type==="esriFieldTypeDate")&&(this._datefields[t.name]=1),p.has(N)||(p.add(N),o.push(T)),m.column=T;break}case"function":{const{name:t,args:N}=m,T=N.value.length;i&&(i=Hs(t,T)),v&&(v=ks(t,T));break}}}),{referencedFieldNames:Array.from(o),isStandardized:i,isAggregate:v}}_visitAll(u,o){if(u!=null)switch(o(u),u.type){case"when-clause":this._visitAll(u.operand,o),this._visitAll(u.value,o);break;case"case-expression":for(const p of u.clauses)this._visitAll(p,o);u.format==="simple"&&this._visitAll(u.operand,o),u.else!==null&&this._visitAll(u.else,o);break;case"expression-list":for(const p of u.value)this._visitAll(p,o);break;case"unary-expression":this._visitAll(u.expr,o);break;case"binary-expression":this._visitAll(u.left,o),this._visitAll(u.right,o);break;case"function":this._visitAll(u.args,o)}}evaluateNodeToJavaScript(u){switch(u.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(u.value)+", "+JSON.stringify(u.qualifier)+","+JSON.stringify(u.op)+")";case"case-expression":{let o="";if(u.format==="simple"){const p="this.makeComparable("+this.evaluateNodeToJavaScript(u.operand)+")";o="( ";for(let i=0;i<u.clauses.length;i++)o+=" ("+p+" === this.makeComparable("+this.evaluateNodeToJavaScript(u.clauses[i].operand)+")) ? ("+this.evaluateNodeToJavaScript(u.clauses[i].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}else{o="( ";for(let p=0;p<u.clauses.length;p++)o+=" this.makeBool("+this.evaluateNodeToJavaScript(u.clauses[p].operand)+")===true ? ("+this.evaluateNodeToJavaScript(u.clauses[p].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}return o}case"parameter":return"this.lookup("+JSON.stringify(u.value.toLowerCase())+",lookups)";case"expression-list":{let o="[";for(const p of u.value)o!=="["&&(o+=","),o+=this.evaluateNodeToJavaScript(p);return o+="]",o}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(u.expr)+")";case"binary-expression":switch(u.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")";case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")"}throw new Error("Not Supported Operator "+u.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(u.value);case"date":return"(new Date("+bt(u.value).getTime().toString()+"))";case"timestamp":return"(new Date("+Te(u.value).getTime().toString()+"))";case"current-time":return u.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(u.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(u.name)+","+this.evaluateNodeToJavaScript(u.args)+")"}throw new Error("Unsupported sql syntax "+u.type)}_evaluateNode(u,o,p){switch(u.type){case"interval":{const i=this._evaluateNode(u.value,o,p);return J.createFromValueAndQualifer(i,u.qualifier,u.op)}case"case-expression":if(u.format==="simple"){const i=R(this._evaluateNode(u.operand,o,p));for(let v=0;v<u.clauses.length;v++)if(i===R(this._evaluateNode(u.clauses[v].operand,o,p)))return this._evaluateNode(u.clauses[v].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}else{for(let i=0;i<u.clauses.length;i++)if(Pt(this._evaluateNode(u.clauses[i].operand,o,p)))return this._evaluateNode(u.clauses[i].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}return null;case"parameter":return this.parameters[u.value.toLowerCase()];case"expression-list":{const i=[];for(const v of u.value)i.push(this._evaluateNode(v,o,p));return i}case"unary-expression":return ie(this._evaluateNode(u.expr,o,p));case"binary-expression":switch(u.operator){case"AND":return Ft(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"OR":return Lt(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)===null;case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)!==null;case"IN":{const i=Ae(this._evaluateNode(u.right,o,p));return Ie(this._evaluateNode(u.left,o,p),i)}case"NOT IN":{const i=Ae(this._evaluateNode(u.right,o,p));return ie(Ie(this._evaluateNode(u.left,o,p),i))}case"BETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i>=R(v[0])&&i<=R(v[1])}case"NOTBETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i<R(v[0])||i>R(v[1])}case"LIKE":return Ee(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape);case"NOT LIKE":return ie(Ee(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return Mt(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"-":case"+":case"*":case"/":return Dt(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p))}case"null":case"boolean":case"string":case"number":return u.value;case"date":return bt(u.value);case"timestamp":return Te(u.value);case"current-time":{const i=new Date;return u.mode==="date"&&i.setHours(0,0,0,0),i}case"column-reference":return Ot(o,u.column,this._datefields,p);case"function":{const i=this._evaluateNode(u.args,o,p);return this.isAggregate?Js(u.name,i):It(u.name,i)}}throw new Error("Unsupported sql syntax "+u.type)}}function Te(l){let u=qs.exec(l);if(u!==null){const[,o,p,i,v,m,t]=u;return W(o,p,i,v,m,t)}if(u=Bs.exec(l),u!==null){const[,o,p,i,v,m,t,N,T,P]=u;return W(o,p,i,v,m,t,N,T,P)}if(u=$s.exec(l),u!==null){const[,o,p,i,v,m,t,N,T]=u;return W(o,p,i,v,m,"0",t,N,T)}if(u=js.exec(l),u!==null){const[,o,p,i,v,m]=u;return W(o,p,i,v,m)}if(u=Ct.exec(l),u!==null){const[,o,p,i]=u;return W(o,p,i)}throw new Error("SQL Invalid Timestamp")}function bt(l){const u=Ct.exec(l);if(u===null)try{return Te(l)}catch{throw new Error("SQL Invalid Date")}const[,o,p,i]=u;return new Date(parseInt(o,10),parseInt(p,10)-1,parseInt(i,10))}function Pt(l){return l===!0}function Ae(l){return Array.isArray(l)?l:[l]}function ie(l){return l!==null?l!==!0:null}function Ft(l,u){return l!=null&&u!=null?l===!0&&u===!0:l!==!1&&u!==!1&&null}function Lt(l,u){return l!=null&&u!=null?l===!0||u===!0:l===!0||u===!0||null}function Ie(l,u){if(l==null)return null;let o=!1;for(const p of u)if(p==null)o=null;else if(l===p){o=!0;break}return o}const xt="-[]/{}()*+?.\\^$|";var V;function Gs(l,u){const o=u;let p="",i=V.Normal;for(let v=0;v<l.length;v++){const m=l.charAt(v);switch(i){case V.Normal:m===o?i=V.Escaped:xt.includes(m)?p+="\\"+m:p+=m==="%"?".*":m==="_"?".":m;break;case V.Escaped:xt.includes(m)?p+="\\"+m:p+=m,i=V.Normal}}return new RegExp("^"+p+"$","m")}function Ee(l,u,o){return l==null?null:Gs(u,o).test(l)}function R(l){return l instanceof Date?l.valueOf():l}function Mt(l,u,o){if(u==null||o==null)return null;const p=R(u),i=R(o);switch(l){case"<>":return p!==i;case"=":return p===i;case">":return p>i;case"<":return p<i;case">=":return p>=i;case"<=":return p<=i}}function Dt(l,u,o){if(u instanceof J)if(o instanceof Date)switch(l){case"+":return new Date(u.valueInMilliseconds()+o.getTime());case"-":return u.valueInMilliseconds()-o.getTime();case"*":return u.valueInMilliseconds()*o.getTime();case"/":return u.valueInMilliseconds()/o.getTime()}else if(o instanceof J)switch(l){case"+":return J.createFromMilliseconds(u.valueInMilliseconds()+o.valueInMilliseconds());case"-":return J.createFromMilliseconds(u.valueInMilliseconds()-o.valueInMilliseconds());case"*":return u.valueInMilliseconds()*o.valueInMilliseconds();case"/":return u.valueInMilliseconds()/o.valueInMilliseconds()}else u=u.valueInMilliseconds();else if(o instanceof J)if(u instanceof Date)switch(l){case"+":return new Date(o.valueInMilliseconds()+u.getTime());case"-":return new Date(u.getTime()-o.valueInMilliseconds());case"*":return u.getTime()*o.valueInMilliseconds();case"/":return u.getTime()/o.valueInMilliseconds()}else o=o.valueInMilliseconds();else if(u instanceof Date&&typeof o=="number")switch(o=24*o*60*60*1e3,u=u.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}else if(o instanceof Date&&typeof u=="number")switch(u=24*u*60*60*1e3,o=o.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}switch(l){case"+":return u+o;case"-":return u-o;case"*":return u*o;case"/":return u/o}}function Ws(l){return l&&typeof l.attributes=="object"}function Ot(l,u,o,p){const i=p.getAttribute(l,u);return i!=null&&o[u]===1?new Date(i):i}(function(l){l[l.Normal=0]="Normal",l[l.Escaped=1]="Escaped"})(V||(V={}));const $={getAttribute:(l,u)=>(Ws(l)?l.attributes:l)[u]};export{_t as WhereClause,$ as defaultAttributeAdapter};
