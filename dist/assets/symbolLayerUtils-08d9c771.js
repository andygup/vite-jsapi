import{E as c,r as p,iM as b,iN as y,cP as d,_ as l,fz as w,iO as B}from"./index-37fc1c1b.js";import{I as _}from"./ItemCache-67dfd71e.js";import"./MemCache-88779bec.js";let i=a();function a(){return new _(50)}function R(){i=a()}function C(e,o){if(e.type==="icon")return f(e,o);if(e.type==="object")return h(e,o);throw new c("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function E(e,o){if(e.type==="icon")return I(e,o);if(e.type==="object")return g(e,o);throw new c("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function f(e,o){var r,n;if((r=e.resource)!=null&&r.href)return j(e.resource.href).then(t=>[t.width,t.height]);if((n=e.resource)!=null&&n.primitive)return o!=null?[o,o]:[256,256];throw new c("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function I(e,o){return f(e,o).then(r=>{if(e.size==null)return r;const n=r[0]/r[1];return n>1?[e.size,e.size/n]:[e.size*n,e.size]})}function j(e){return p(e,{responseType:"image"}).then(o=>o.data)}function h(e,o){return z(e,o).then(r=>b(r))}async function g(e,o){const r=await h(e,o);return y(r,e)}async function z(e,o){var n;if(!e.isPrimitive){const t=d((n=e.resource)==null?void 0:n.href),s=i.get(t);if(s!==void 0)return s;const u=await(await l(()=>import("./objectResourceUtils-f983882c.js").then(m=>m.o),["assets/objectResourceUtils-f983882c.js","assets/devEnvironmentUtils-e2e22b53.js","assets/index-37fc1c1b.js","assets/index-d832a396.css","assets/mat3f64-c33d428a.js","assets/mat4f64-06a72c15.js","assets/BufferView-c905fe92.js","assets/vec4-3dd523e8.js","assets/vec32-0aa8fd11.js","assets/DefaultMaterial_COLOR_GAMMA-f18cee9c.js","assets/enums-08489827.js","assets/Version-97b721b0.js","assets/quat-f041b3f9.js","assets/quatf64-5b0101cd.js","assets/resourceUtils-4053cd3b.js","assets/basicInterfaces-cc58f4ac.js","assets/Indices-585f84ed.js","assets/byteSizeEstimations-a7209dec.js","assets/NestedMap-d4ac5d57.js","assets/requestImageUtils-f43e1e78.js","assets/InterleavedLayout-68ae10eb.js","assets/types-c657ebd9.js","assets/ray-036f9405.js","assets/ByteSizeUnit-c0a244d3.js","assets/vec4f64-efdcb593.js","assets/sphere-e8ccb435.js","assets/VertexAttribute-8238ac80.js","assets/TextureDescriptor-b97332df.js","assets/VertexArrayObject-cf9dc3e5.js","assets/OrderIndependentTransparency-01632ab9.js","assets/vec3f32-ec4c3c20.js","assets/doublePrecisionUtils-a59b69fa.js","assets/symbolColorUtils-9adf6c84.js","assets/lengthUtils-03d7ac5d.js","assets/VertexElementDescriptor-24e04d97.js"])).fetch(t,{disableTextures:!0});return i.put(t,u.referenceBoundingBox),u.referenceBoundingBox}let r=null;if(e.resource&&e.resource.primitive&&(r=w(B(e.resource.primitive)),o!=null))for(let t=0;t<r.length;t++)r[t]*=o;return r?Promise.resolve(r):Promise.reject(new c("symbol:invalid-resource","The symbol does not have a valid resource"))}export{R as clearBoundingBoxCache,f as computeIconLayerResourceSize,C as computeLayerResourceSize,E as computeLayerSize,h as computeObjectLayerResourceSize};
