import{d$ as d,e0 as p,a as b,e1 as c,dv as w,e2 as h,bL as $,e3 as C,aY as x,e4 as L,e5 as D,dw as I,e6 as M,dz as k,e7 as v,e8 as T,m as r}from"./index-6eb28d6b.js";const m={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function j(e,o=m){var i,u;if(!e)return{symbol:null};const{retainId:a=m.retainId,ignoreDrivers:s=m.ignoreDrivers,hasLabelingContext:t=m.hasLabelingContext,retainCIM:l=m.retainCIM}=o;let n=null;if(d(e)||e instanceof p)n=e.clone();else if(e.type==="cim"){const y=(u=(i=e.data)==null?void 0:i.symbol)==null?void 0:u.type;if(y!=="CIMPointSymbol")return{error:new b("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${y||"unknown"}' is unsupported in 3D`,{symbol:e})};n=l?e.clone():c.fromCIMSymbol(e)}else if(e instanceof w)n=h.fromSimpleLineSymbol(e);else if(e instanceof $)n=c.fromSimpleMarkerSymbol(e);else if(e instanceof C)n=c.fromPictureMarkerSymbol(e);else if(e instanceof x)n=o.geometryType&&o.geometryType==="mesh"?L.fromSimpleFillSymbol(e):D.fromSimpleFillSymbol(e);else{if(!(e instanceof I))return{error:new b("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};n=t?M.fromTextSymbol(e):c.fromTextSymbol(e)}return a&&n&&n.type!=="cim"&&(n.id=e.id),s&&d(n)&&n.symbolLayers.forEach(y=>y.ignoreDrivers=!0),{symbol:n}}function E(e,o,a,s){const t=g(e,{},{context:s,isLabelSymbol:!1});t!=null&&(o[a]=t)}function W(e,o,a,s){const t=g(e,{},{context:s,isLabelSymbol:!0});t!=null&&(o[a]=t)}function f(e){return e instanceof T||e instanceof p}function g(e,o,a){if(e==null)return null;const{context:s,isLabelSymbol:t}=a,l=s==null?void 0:s.origin,n=s==null?void 0:s.messages;if(l==="web-scene"&&!f(e)){const i=j(e,{retainCIM:!0,hasLabelingContext:t});return i.symbol!=null?i.symbol.write(o,s):(n==null||n.push(new b("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:i.error})),null)}return(l==="web-map"||l==="portal-item"&&!k(s==null?void 0:s.layer))&&f(e)?(n==null||n.push(new b("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:s})),null):e.write(o,s)}function Y(e,o){return v(e,null,o)}const q=()=>!!r("enable-feature:force-wosr"),F=()=>r.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),P=()=>r.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),S=()=>r.add("enable-i3s-patching",!0,!0,!0),U=()=>r.add("enable-i3s-patching",!1,!0,!0),A=()=>!!r("enable-feature:SceneLayer-editing"),V=(e="i3s-patching")=>{switch(U(),P(),r.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":F();break;case"i3s-patching":S()}};V("i3s-patching");export{Y as b,q as e,W as i,E as l,A as n};
