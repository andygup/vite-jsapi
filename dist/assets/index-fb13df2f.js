(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}})();function v(t,e,i,r){var s,h=arguments.length,f=h<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,e,i,r);else for(var m=t.length-1;m>=0;m--)(s=t[m])&&(f=(h<3?s(f):h>3?s(e,i,f):s(e,i))||f);return h>3&&f&&Object.defineProperty(e,i,f),f}const QG="modulepreload",eq=function(t){return"/vite-jsapi/dist/"+t},S$={},he=function(e,i,r){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(h=>{if(h=eq(h),h in S$)return;S$[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(!!r)for(let I=s.length-1;I>=0;I--){const A=s[I];if(A.href===h&&(!f||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const S=document.createElement("link");if(S.rel=f?"stylesheet":QG,f||(S.as="script",S.crossOrigin=""),S.href=h,document.head.appendChild(S),f)return new Promise((I,A)=>{S.addEventListener("load",I),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})})).then(()=>e())};function tq(t){return t&&t.release&&typeof t.release=="function"}function iq(t){return t&&t.acquire&&typeof t.acquire=="function"}let eh=class x9{constructor(e,i,r,s=1,h=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(h),this._initialSize=h,this._ctor)for(let f=0;f<h;f++)this._pool[f]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(x9.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):iq(i)&&i.acquire(...e),i}release(e){e&&!x9.test.disabled&&(this._releaseFunction?this._releaseFunction(e):tq(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};eh.test={disabled:!1};function rq(t){t.length=0}let nn=class{constructor(e=50,i=50){this._pool=new eh(Array,void 0,rq,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return g3.acquire()}static release(e){return g3.release(e)}static prune(){g3.prune()}};const g3=new nn(100);function fbe(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function nq(t,e){for(const i of t)if(i!=null&&e(i))return i}function f2(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function Au(t,e){return t!=null?e(t):null}function Gn(t,e){return jw(t,e),t}function jw(t,e){if(t==null)throw new Error(e??"value is None")}function Ut(t){return t==null||t.destroy(),null}function ybe(t){return t==null||t.dispose(),null}function $i(t){return t==null||t.remove(),null}function cy(t){return t==null||t.abort(),null}function mbe(t){return t==null||t.release(),null}function sq(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function oq(t){return null}function gbe(t,e){const i=new Array;for(const r of t)i.push(r!=null?e(r):null);return i}function vbe(t,e){for(const i of t)Au(i,e)}function wbe(t){return t}let Mn=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(f2(e)){const r=this._getOrCreateGroup(i);for(const s of e)this._isHandle(s)&&r.push(s)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&f2(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){e.forEach(i=>i.remove())}};const $C=Symbol("Accessor-beforeDestroy");function Dw(t){return $0(()=>t.forEach(e=>e!=null&&e.remove()))}function $0(t){return{remove:()=>{t&&(t(),t=void 0)}}}let v3=class $h{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*$h._m}getInt(){return this._seed=($h._a*this._seed+$h._c)%$h._m,this._seed}getFloat(){return this.getInt()/($h._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/$h._m*r}};v3._m=2147483647,v3._a=48271,v3._c=0;const _be=1.5;function aq(t,e){return e?t.filter((i,r,s)=>s.findIndex(e.bind(null,i))===r):t.filter((i,r,s)=>s.indexOf(i)===r)}function zw(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function xbe(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function Sbe(t,e,i){let r,s;return i?(r=e.filter(h=>!t.some(f=>i(f,h))),s=t.filter(h=>!e.some(f=>i(f,h)))):(r=e.filter(h=>!t.includes(h)),s=t.filter(h=>!e.includes(h))),{added:r,removed:s}}function Mbe(t){return t&&typeof t.length=="number"}const lq=!!Array.prototype.fill;function $be(t,e){if(lq)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function Tbe(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let TC=class{constructor(){this.last=0}};const IC=new TC;function S9(t,e,i,r){r=r||IC;const s=Math.max(0,r.last-10);for(let f=s;f<i;++f)if(t[f]===e)return r.last=f,f;const h=Math.min(s,i);for(let f=0;f<h;++f)if(t[f]===e)return r.last=f,f;return-1}function uq(t,e,i,r){const s=i??t.length,h=S9(t,e,s,r);if(h!==-1)return t[h]=t[s-1],i==null&&t.pop(),e}const Ps=new Set;function hq(t,e,i=t.length,r=e.length,s,h){if(r===0||i===0)return i;Ps.clear();for(let m=0;m<r;++m)Ps.add(e[m]);s=s||IC;const f=Math.max(0,s.last-10);for(let m=f;m<i;++m)if(Ps.has(t[m])&&(h&&h.push(t[m]),Ps.delete(t[m]),t[m]=t[i-1],--i,--m,Ps.size===0||i===0))return Ps.clear(),i;for(let m=0;m<f;++m)if(Ps.has(t[m])&&(h&&h.push(t[m]),Ps.delete(t[m]),t[m]=t[i-1],--i,--m,Ps.size===0||i===0))return Ps.clear(),i;return Ps.clear(),i}function cq(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Zn(t,e){return t!=null}let Cu;function ue(t){return typeof Cu[t]=="function"?Cu[t]=Cu[t](globalThis):Cu[t]}var gC,vC,wC,bC;Cu=(gC=globalThis.dojoConfig)!=null&&gC.has||(vC=globalThis.esriConfig)!=null&&vC.has?{...(wC=globalThis.dojoConfig)==null?void 0:wC.has,...(bC=globalThis.esriConfig)==null?void 0:bC.has}:{},ue.add=(t,e,i,r)=>((r||Cu[t]===void 0)&&(Cu[t]=e),i&&ue(t)),ue.cache=Cu,ue.add("esri-deprecation-warnings",!0),ue.add("esri-force-fullscreen-debug",!1),(()=>{var e;ue.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ue.add("host-browser",t),ue.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ue.add("dom",t),ue("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,h=parseFloat(s);if(ue.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ue.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ue.add("khtml",s.includes("Konqueror")?h:void 0),ue.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ue.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ue.add("webkit",!ue("wp")&&!ue("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ue.add("chrome",!ue("edge")&&!ue("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ue.add("android",!ue("wp")&&parseFloat(r.split("Android ")[1])||void 0),ue.add("safari",!s.includes("Safari")||ue("wp")||ue("chrome")||ue("android")||ue("edge")||ue("opr")?void 0:parseFloat(s.split("Version/")[1])),ue.add("mac",s.includes("Macintosh")),!ue("wp")&&r.match(/(iPhone|iPod|iPad)/)){const f=RegExp.$1.replace(/P/,"p"),m=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",b=parseFloat(m.replace(/_/,".").replace(/_/g,""));ue.add(f,b),ue.add("ios",b)}ue("webkit")||(!r.includes("Gecko")||ue("wp")||ue("khtml")||ue("edge")||ue.add("mozilla",h),ue("mozilla")&&ue.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ue.add("esri-mobile",e),i&&ue.add("esri-iPhone",i),ue.add("esri-geolocation",!!navigator.geolocation)}ue.add("esri-wasm","WebAssembly"in globalThis),ue.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ue.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ue.add("esri-atomics","Atomics"in globalThis),ue.add("esri-workers","Worker"in globalThis),ue.add("web-feat:cache","caches"in globalThis),ue.add("esri-workers-arraybuffer-transfer",!ue("safari")||Number(ue("safari"))>=12),ue.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ue.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ue.add("featurelayer-animation-enabled",!0),ue.add("featurelayer-snapshot-enabled",!0),ue.add("featurelayer-snapshot-point-min-threshold",8e4),ue.add("featurelayer-snapshot-point-max-threshold",4e5),ue.add("featurelayer-snapshot-point-coverage",.1),ue.add("featurelayer-advanced-symbols",!1),ue.add("featurelayer-pbf",!0),ue.add("featurelayer-pbf-statistics",!1),ue.add("feature-layers-workers",!0),ue.add("feature-polyline-generalization-factor",1),ue.add("mapview-transitions-duration",200),ue.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ue.add("mapserver-pbf-version-support",10.81),ue.add("mapservice-popup-identify-max-tolerance",20),ue.add("heatmap-allow-raster-fallback",!1),ue.add("heatmap-force-raster",!1),ue("host-webworker")||ue("host-browser")&&(ue.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ue.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ue.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ue.add("esri-image-decode",!1,!0,!0)})}return!1}),ue.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})(),ue.add("enable-feature:SceneLayer-editing",!0),ue("enable-feature:SceneLayer-editing")&&(ue.add("enable-feature:direct-3d-object-feature-layer-display",!0),ue.add("enable-i3s-patching",!0));function Ebe(t){return t instanceof ArrayBuffer}function iS(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function EC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function AC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function rS(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function CC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function nS(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function kC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function Vw(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function Gw(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Abe(t){return!("buffer"in t)}const Cbe=1024;function kbe(t){return Gw(t)||Vw(t)||nS(t)||rS(t)||iS(t)}function Obe(t){return Gw(t)||Vw(t)}function Pbe(t){return Gw(t)?179769e303:Vw(t)?3402823e32:kC(t)?4294967295:CC(t)?65535:EC(t)||AC(t)?255:nS(t)?2147483647:rS(t)?32767:iS(t)?127:256}function OC(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&OC(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function se(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=FC(t);if(e!=null)return e;if(y2(t))return t.clone();if(PC(t))return t.map(se);if(RC(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=se(t[r]);return i}function M9(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=FC(t);if(e!=null)return e;if(PC(t)){let i=!0;const r=t.map(s=>{const h=M9(s);return s!=null&&h==null&&(i=!1),h});return i?r:null}if(y2(t))return t.clone();if(!RC(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const s=t[r],h=M9(s);if(s!=null&&h==null)return null;i[r]=h}return i}return null}function y2(t){return typeof t.clone=="function"}function PC(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function RC(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function M$(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function FC(t){if(iS(t)||EC(t)||AC(t)||rS(t)||CC(t)||nS(t)||kC(t)||Vw(t)||Gw(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,se(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(se(i));return e}return null}function sS(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function NC(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&zw(t,e):t instanceof Set?e instanceof Set&&dq(t,e):t instanceof Map?e instanceof Map&&fq(t,e):!!M$(t)&&M$(e)&&pq(t,e))}function pq(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function dq(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function fq(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function Hr(t){return t?t.__accessor__?t.__accessor__:t.propertyInvalidated?t:null:null}function yq(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function tv(t,e,i){return i?m2(t,e,{policy:i,path:""}):m2(t,e,null)}function m2(t,e,i){return e?Object.keys(e).reduce((r,s)=>{const h=s;let f=null,m="merge";if(i&&(f=i.path?`${i.path}.${s}`:s,m=i.policy(f)),m==="replace"||m==="replace-arrays"&&Array.isArray(r[h]))return r[h]=e[h],r;if(r[h]===void 0)return r[h]=se(e[h]),r;let b=r[h],S=e[h];if(b===S)return r;if(Array.isArray(S)||Array.isArray(r))b=b?Array.isArray(b)?r[h]=b.concat():r[h]=[b]:r[h]=[],S&&(Array.isArray(S)||(S=[S]),S.forEach(I=>{b.includes(I)||b.push(I)}));else if(S&&typeof S=="object")if(i){const I=i.path;i.path=f,r[h]=m2(b,S,i),i.path=I}else r[h]=m2(b,S,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[h]=S);return r},t||{}):t}function LC(t){return Array.isArray(t)?t:t.split(".")}function $$(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function mq(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...$$(i));return e}return $$(t)}function jC(t,e,i,r){const s=mq(e);if(s.length!==1){const h=s.map(f=>r(t,f,i));return Dw(h)}return r(t,s[0],i)}function DC(t){let e=!1;return()=>{e||(e=!0,t())}}function zC(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const r=Hr(e);return yq(r,i)?r.get(i):e[i]}function VC(t,e,i){if(t==null)return t;const r=zC(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:VC(r,e,i+1)}function Ky(t,e,i=0){return typeof e!="string"||e.includes(".")?VC(t,LC(e),i):zC(e,t)}function g2(t,e){return Ky(t,e)}function T$(t,e){return Ky(e,t)!==void 0}function Zy(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=se(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function qw(t,e){const i=Zy(t);let r=i[e];return r||(r=i[e]={}),r}function gq(t,e){return tv(t,e,wq)}const vq=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function wq(t){return vq.test(t)?"replace":"merge"}function GC(t,e,i=!1){return UC(t,e,i)}function Yy(t,e){if(e!=null)return e[t]||qC(t.split("."),!1,e)}function Wr(t,e,i){const r=t.split("."),s=r.pop(),h=qC(r,!0,i);h&&s&&(h[s]=e)}function qC(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function UC(t,e,i){return e?Object.keys(e).reduce((r,s)=>{let h=r[s],f=e[s];return h===f?r:h===void 0?(r[s]=se(f),r):(Array.isArray(f)||Array.isArray(r)?(h=h?Array.isArray(h)?r[s]=h.concat():r[s]=[h]:r[s]=[],f&&(Array.isArray(f)||(f=[f]),i?f.forEach(m=>{h.includes(m)||h.push(m)}):r[s]=f.concat())):f&&typeof f=="object"?r[s]=UC(h,f,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=f),r)},t||{}):t}const Uw="20230403",BC="f6f2de7dcdf830c858f0f4ce0805cff818b0b260";var _C;const Tt={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(_C=globalThis.location)==null?void 0:_C.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(GC(Tt,globalThis.esriConfig,!0),delete Tt.has),!Tt.assetsPath){{const t="4.27.0";Tt.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${t}-next.${Uw}/assets`}Tt.defaultAssetsPath=Tt.assetsPath}const bq=/\{([^\}]+)\}/g;function I$(t){return t??""}function na(t,e){return t.replace(bq,typeof e=="object"?(i,r)=>I$(Yy(r,e)):(i,r)=>I$(e(r)))}function Rbe(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function oS(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function Fbe(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}const E$={info:0,warn:1,error:2,none:3};let fe=class Nr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Nr._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Nr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const i=Nr._loggers;return Nr._loggers=e,i},set throttlingDisabled(e){Nr._throttlingDisabled=e}}}static getLogger(e){let i=Nr._loggers[e];return i||(i=new Nr({module:e})),i}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Nr._throttlingDisabled){const s=this._argsToKey(r),h=this._loggedMessages[e].get(s);if(i==="once"&&h!=null||i==="oncePerTick"&&h&&h>=Nr._tickCounter)return;this._loggedMessages[e].set(s,Nr._tickCounter),Nr._scheduleTickCounterIncrement()}for(const s of Tt.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const s=r[e];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Tt.log.level||"warn";return E$[this._parentWithMember("level",i)]<=E$[e]}_argsToKey(...e){return oS(JSON.stringify(e,(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}static _scheduleTickCounterIncrement(){Nr._tickCounterScheduled||(Nr._tickCounterScheduled=!0,Promise.resolve().then(()=>{Nr._tickCounter++,Nr._tickCounterScheduled=!1}))}};fe._loggers={},fe._tickCounter=0,fe._tickCounterScheduled=!1,fe._throttlingDisabled=!1;var Ka;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Ka||(Ka={}));let _q=class{constructor(e,i){this._observers=e,this._observer=i}remove(){cq(this._observers,this._observer)}},HC=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return xq;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const h=i.length;for(let f=0;f<h;++f){const m=i[f];if(m.destroyed)s=!0;else if(m===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new _q(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const xq={remove:()=>{}};var ft;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.USER=6]="USER"})(ft||(ft={}));const $9=ft.USER+1;function ku(t){switch(t){case"defaults":return ft.DEFAULTS;case"service":return ft.SERVICE;case"portal-item":return ft.PORTAL_ITEM;case"web-scene":return ft.WEB_SCENE;case"web-map":return ft.WEB_MAP;case"user":return ft.USER;default:return null}}function v2(t){switch(t){case ft.DEFAULTS:return"defaults";case ft.SERVICE:return"service";case ft.PORTAL_ITEM:return"portal-item";case ft.WEB_SCENE:return"web-scene";case ft.WEB_MAP:return"web-map";case ft.USER:return"user"}return void 0}function Sq(t){return v2(t)}var Vt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Vt||(Vt={}));const w2={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Of=[];let P1=w2;function rt(t){P1.onObservableAccessed(t)}let iv=!1,rv=!1;function nl(t,e,i){if(iv)return aS(t,e,i);WC(t);const r=e.call(i);return JC(),r}function Mq(t,e){return nl(w2,t,e)}function aS(t,e,i){const r=iv;iv=!0,WC(t);let s=null;try{s=e.call(i)}catch(h){rv&&fe.getLogger("esri.core.accessorSupport.tracking").error(h)}return JC(),iv=r,s}function WC(t){P1=t,Of.push(t)}function JC(){const t=Of.length;if(t>1){const e=Of.pop();P1=Of[t-2],e.onTrackingEnd()}else if(t===1){const e=Of.pop();P1=w2,e.onTrackingEnd()}else P1=w2}function KC(t,e){const i=e.observerObject;if(i.flags&Vt.DepTrackingInitialized)return;const r=rv;rv=!1,i.flags&Vt.AutoTracked?aS(e,e.metadata.get,t):ZC(t,e),rv=r}const $q=[];function ZC(t,e){const i=e.observerObject;i.flags&Vt.ExplicitlyTracking||(i.flags|=Vt.ExplicitlyTracking,aS(e,()=>{const r=e.metadata.dependsOn||$q;for(const s of r)if(typeof s!="string"||s.includes(".")){const h=LC(s);for(let f=0,m=t;f<h.length&&m!=null&&typeof m=="object";++f)m=A$(m,h[f],f!==h.length-1)}else A$(t,s,!1)}),i.flags&=~Vt.ExplicitlyTracking)}function A$(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const f=parseInt(r,10);if(!isNaN(f))return Array.isArray(t)?t[f]:t.getItemAt(f)}const s=Hr(t),h=s==null?void 0:s.properties.get(r);return h&&(rt(h.observerObject),KC(t,h)),i?t[r]:void 0}let C$=class{constructor(e,i,r){this.properties=e,this.propertyName=i,this.metadata=r,this.observerObject=new Tq,this._accessed=null,this._handles=null,this._finalizationToken={},this.observerObject.flags=Vt.Dirty|(r.nonNullable?Vt.NonNullable:0)|(r.hasOwnProperty("value")?Vt.HasDefaultValue:0)|(r.get===void 0?Vt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Vt.AutoTracked:0),k$.register(this,new WeakRef(this.observerObject),this._finalizationToken)}destroy(){k$.unregister(this._finalizationToken),this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(){const e=this.observerObject;rt(e);const i=this.properties.store,r=this.propertyName,s=e.flags,h=i.get(r);if(s&Vt.Computing||~s&Vt.Dirty&&i.has(r))return h;e.flags|=Vt.Computing;const f=this.properties.host;let m;s&Vt.AutoTracked?m=nl(this,this.metadata.get,f):(ZC(f,this),m=this.metadata.get.call(f)),i.set(r,m,ft.COMPUTED);const b=i.get(r);return b===h?e.flags&=~Vt.Dirty:Mq(this.commit,this),e.flags&=~Vt.Computing,b}onObservableAccessed(e){e!==this.observerObject&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Vt.DepTrackingInitialized;const i=this._accessed;if(i===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let s=0;s<i.length;++s)r.push(i[s].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Vt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},Tq=class extends HC{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Vt.Overriden&&(this.flags|=Vt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&Vt.Dirty&&this.onCommitted(),super.destroy()}};const k$=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});let Iq=class YC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new YC;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,se(r))}),i}get(e){return this._values.get(e)}originOf(){return ft.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function Vm(t,e,i){return t!==void 0}function O$(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&Vt.NonNullable)||(r.lifecycle,Ka.INITIALIZING,!1))}function Eq(t){return t&&typeof t.destroy=="function"}fe.getLogger("esri.core.accessorSupport.Properties");let Aq=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Ka.INITIALIZING,this.store=new Iq,this._origin=ft.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new C$(this,r,i[r]);this.properties.set(r,s)}this.metadatas=i}initialize(){this.lifecycle=Ka.CONSTRUCTING}constructed(){this.lifecycle=Ka.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.properties){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&Eq(r)&&(r.destroy(),~i.observerObject.flags&Vt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Ka.INITIALIZING}get(e){const i=this.properties.get(e);if(i.metadata.get)return i.getComputed();rt(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.properties.get(e);if(r!==void 0&&r.observerObject.flags&Vt.HasDefaultValue)return"defaults"}return v2(i)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const i=this.properties.get(e);if(Vm(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.properties.get(e);Vm(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.properties.get(i);if(!Vm(s))return"";const h=new Set,f=nl({onObservableAccessed:b=>h.add(b),onTrackingEnd:()=>{}},()=>{var b;return(b=s.metadata.get)==null?void 0:b.call(e)});let m=`${r}${e.declaredClass.split(".").pop()}.${i}: ${f}
`;if(h.size===0)return m;r+="  ";for(const b of h){if(!(b instanceof C$))continue;const S=b.properties.host,I=b.propertyName,A=Hr(S);m+=A?A.getDependsInfo(S,I,r):`${r}${I}: undefined
`}return m}setAtOrigin(e,i,r){const s=this.properties.get(e);if(Vm(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.properties.get(e);return i!==void 0&&!!(i.observerObject.flags&Vt.Overriden)}clearOverride(e){const i=this.properties.get(e),r=i==null?void 0:i.observerObject;r&&r.flags&Vt.Overriden&&(r.flags&=~Vt.Overriden,i.notifyChange())}override(e,i){const r=this.properties.get(e);if(!O$(r,e,i,this))return;const s=r.metadata.cast;if(s){const h=this._cast(s,i),{valid:f,value:m}=h;if(w3.release(h),!f)return;i=m}r.observerObject.flags|=Vt.Overriden,this._internalSet(r,i)}set(e,i){const r=this.properties.get(e);if(!O$(r,e,i,this))return;const s=r.metadata.cast;if(s){const f=this._cast(s,i),{valid:m,value:b}=f;if(w3.release(f),!m)return;i=b}const h=r.metadata.set;h?h.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=ku(e)}getDefaultOrigin(){return v2(this._origin)}notifyChange(e){const i=this.properties.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.properties.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.properties.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Ka.INITIALIZING?this._origin:ft.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,h=e.propertyName;s.has(h,r)&&sS(i,s.get(h))&&~e.observerObject.flags&Vt.Overriden&&r===s.originOf(h)||(e.invalidate(),s.set(h,i,r),e.commit(),KC(this.host,e))}_cast(e,i){const r=w3.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},Cq=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const w3=new eh(Cq);function kq(t,e){return t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=Yy(r,e),h=s??"";if(h===void 0)throw new Error(`could not find key "${r}" in template`);return h.toString()})}let XC=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&kq(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ne=class QC extends XC{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return se(i)}catch{return"[object]"}}))}}catch(e){throw fe.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new QC(e.name,e.message,e.details)}};ne.prototype.type="error";function b2(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))b2(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),h=s.splice(s.length-1,1)[0];return void b2(g2(t,s),h,i)}const r=t.__accessor__;r!=null&&Oq(e,r),t[e]=i}}function Oq(t,e){if(ue("esri-unknown-property-errors")&&!Pq(t,e))throw new ne("set:unknown-property",Rq(t,e))}function Pq(t,e){return e.metadatas[t]!=null}function Rq(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let ek=class extends eh{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=oq(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const Gm=[];function Xd(t){Gm.push(t),Gm.length===1&&queueMicrotask(()=>{const e=Gm.slice();Gm.length=0;for(const i of e)i()})}let R1=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var T9;(function(t){const e=(h,f,m,b)=>{let S=f,I=f;const A=m>>>1,O=h[S-1];for(;I<=A;){I=S<<1,I<m&&b(h[I-1],h[I])<0&&++I;const R=h[I-1];if(b(R,O)<=0)break;h[S-1]=R,S=I}h[S-1]=O},i=(h,f)=>h<f?-1:h>f?1:0;function r(h,f,m,b){f===void 0&&(f=0),m===void 0&&(m=h.length),b===void 0&&(b=i);for(let I=m>>>1;I>f;I--)e(h,I,m,b);const S=f+1;for(let I=m-1;I>f;I--){const A=h[f];h[f]=h[I],h[I]=A,e(h,S,I,b)}}function*s(h,f,m,b){f===void 0&&(f=0),m===void 0&&(m=h.length),b===void 0&&(b=i);for(let I=m>>>1;I>f;I--)e(h,I,m,b),yield;const S=f+1;for(let I=m-1;I>f;I--){const A=h[f];h[f]=h[I],h[I]=A,e(h,S,I,b),yield}}t.sort=r,t.iterableSort=s})(T9||(T9={}));const P$=T9,Fq=1.5,Nq=1.1;let jc=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new TC,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>R$(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,R$(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=S9(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(S9(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=hq(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){P$.sort(this.data,0,this.length,e)}iterableSort(e){return P$.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const s=this.data[r];if(e.call(i,s,r))return s}}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const h=this.data[s];e.call(i,h,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=h,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,s=this.data;for(let h=0;h<r;++h)e.call(i,s[h],h,s)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}};function R$(t){t.data.length>Fq*t.length&&(t.data.length=Math.floor(t.length*Nq))}function Lq(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const Xy=Lq(globalThis);function Bw(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function Hw(t,e,i){if(!Bw(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const s of r)t.addEventListener(s,i);return{remove(){for(const s of r)t.removeEventListener(s,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function tk(t,e,i){if(!Bw(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=Hw(t,e,s=>{r.remove(),i.call(t,s)});return{remove(){r.remove()}}}const jq={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function dc({key:t}){return jq[t]||t}function Xt(t="Aborted"){return new ne("AbortError",t)}function Oi(t,e="Aborted"){if(yo(t))throw Xt(e)}function Ww(t){return t!=null?"aborted"in t?t:t.signal:t}function yo(t){const e=Ww(t);return e!=null&&e.aborted}function Zo(t){if(Ts(t))throw t}function I9(t){if(!Ts(t))throw t}function Un(t,e){const i=Ww(t);if(i!=null){if(!i.aborted)return tk(i,"abort",()=>e());e()}}function lS(t,e){const i=Ww(t);if(i!=null)return Oi(i),tk(i,"abort",()=>e(Xt()))}function ik(t,e){return Ww(e)==null?t:new Promise((i,r)=>{let s=Un(e,()=>r(Xt()));const h=()=>s=$i(s);t.then(h,h),t.then(i,r)})}function Ts(t){return(t==null?void 0:t.name)==="AbortError"}async function Ld(t){try{return await t}catch(e){if(!Ts(e))throw e;return}}function sl(){let t=null;const e=new Promise((i,r)=>{t={promise:void 0,resolve:i,reject:r}});return t.promise=e,t}async function sn(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(f=>t[f]),s=await sn(r),h={};return i.map((f,m)=>h[f]=s[m]),h}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,s)=>{const h=i[s];return h.status==="fulfilled"?{promise:r,value:h.value}:{promise:r,error:h.reason}}))}async function Dq(t){return(await sn(t)).filter(e=>!!e.value).map(e=>e.value)}function Jw(t,e=void 0,i){const r=new AbortController;return Un(i,()=>r.abort()),new Promise((s,h)=>{let f=setTimeout(()=>{f=0,s(e)},t);Un(r,()=>{f&&(clearTimeout(f),h(Xt()))})})}function dl(t){return t&&typeof t.then=="function"}function E9(t){return dl(t)?t:Promise.resolve(t)}function rk(t,e=-1){let i,r,s,h,f=null;const m=(...b)=>{if(i){r=b,h&&h.reject(Xt()),h=sl();const O=h.promise;if(f){const R=f;f=null,R.abort()}return O}if(s=h||sl(),h=null,e>0){const O=new AbortController;i=E9(t(...b,O.signal));const R=i;Jw(e).then(()=>{i===R&&(h?O.abort():f=O)})}else i=1,i=E9(t(...b));const S=()=>{const O=r;r=s=i=f=null,O!=null&&m(...O)},I=i,A=s;return I.then(S,S),I.then(A.resolve,A.reject),A.promise};return m}function nk(){let t,e;const i=new Promise((s,h)=>{t=s,e=h}),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,h)=>Xy.setTimeout(()=>r.reject(h),s),r.promise=i,r}async function F$(t){await Promise.resolve(),Oi(t)}function Hbe(t){return t}function sk(t){return 1e3*t}let zq=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Vq=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},A9=0;const ef={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},C9=["prepare","preRender","render","postRender","update","finish"],k9=[],Hc=new jc;let Gq=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const _2={frameTasks:Hc,willDispatch:!1,clearFrameTasks:qq,dispatch:lk,executeFrameTasks:Uq};function T0(t){const e=new Vq(t);return k9.push(e),_2.willDispatch||(_2.willDispatch=!0,Xd(lk)),e}function Wc(t){const e=new zq(t);return Hc.push(e),x2==null&&(A9=performance.now(),x2=requestAnimationFrame(ok)),new Gq(e)}let x2=null;function qq(t=!1){Hc.forAll(e=>{e.removed=!0}),t&&ak()}function ok(){const t=performance.now();x2=null,x2=Hc.length>0?requestAnimationFrame(ok):null,_2.executeFrameTasks(t)}function Uq(t){const e=t-A9;A9=t;const i=1e3/60,r=Math.max(0,e-i);ef.time=t,ef.frameDuration=i-r;for(let s=0;s<C9.length;s++){const h=performance.now(),f=C9[s];Hc.forAll(m=>{var b;m.paused||m.removed||(s===0&&m.ticks++,m.phases[f]&&(ef.elapsedFrameTime=performance.now()-t,ef.deltaTime=m.ticks===0?0:e,(b=m.phases[f])==null||b.call(m,ef)))}),Bq[s].record(performance.now()-h)}ak(),Hq.record(performance.now()-t)}const qm=new jc;function ak(){Hc.forAll(t=>{t.removed&&qm.push(t)}),Hc.removeUnorderedMany(qm.data,qm.length),qm.clear()}function lk(){for(;k9.length;){const t=k9.shift();t.isActive&&t.callback()}_2.willDispatch=!1}function Zbe(t=1,e){const i=nk(),r=()=>{yo(e)?i.reject(Xt()):t===0?i():(--t,Xd(()=>r()))};return r(),i.promise}const Bq=C9.map(t=>new R1(t)),Hq=new R1("total");function Wq(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let Jq=0;function F1(){return++Jq}let Kw=class{constructor(e){this._accessed=[],this._handles=[],this._finalizationToken={},this._observerObject=new Kq(e),N$.register(this,new WeakRef(this._observerObject),this._finalizationToken)}destroy(){var e;N$.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let s=0;s<i.length;++s)e.push(i[s].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},Kq=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Zq}};const N$=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Zq(){}let jd=!1;const S2=[];function uk(t,e){let i=new Kw(h),r=null,s=!1;function h(){if(!i||s)return;if(jd)return void pk(h);const m=r;i.clear(),jd=!0,s=!0,r=nl(i,t),s=!1,jd=!1,e(r,m),dk()}function f(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=nl(i,t),s=!1,{remove:f}}function hk(t,e){let i=new Kw(s),r=null;function s(){e(r,f)}function h(){i&&(i.destroy(),i=null),r=null}function f(){return i?(i.clear(),r=nl(i,t),r):null}return f(),{remove:h}}function ck(t){let e=new Kw(r),i=!1;function r(){e&&!i&&(jd?pk(r):(e.clear(),jd=!0,i=!0,nl(e,t),i=!1,jd=!1,dk()))}function s(){e&&(e.destroy(),e=null)}return i=!0,nl(e,t),i=!1,{remove:s}}function pk(t){S2.includes(t)||S2.unshift(t)}function dk(){for(;S2.length;)S2.pop()()}var N1;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(N1||(N1={}));let py=class{constructor(){this.uid=F1(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,h){return this.pool.acquire(N1.Untracked,e,i,r,s,h,sS)}static acquireTracked(e,i,r,s){return this.pool.acquire(N1.Tracked,e,i,r,null,null,s)}notify(e,i){this.type===N1.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i)}acquire(e,i,r,s,h,f,m){this.uid=F1(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=h,this.path=f,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=F1(),this.removed=!0}};py.pool=new ek(py);const nv=new nn,Qa=new Set;let M2;function $2(t){Qa.delete(t),Qa.add(t),M2||(M2=T0(Qq))}function Yq(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Xq(t){for(const e of Qa.values())e.target===t&&(e.removed=!0)}function Qq(){let t=10;for(;M2&&t--;){M2=null;const e=eU(),i=nv.acquire();for(const r of e){const s=r.uid;Yq(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Qa)r.removed&&(i.push(r),Qa.delete(r));for(const r of i)py.pool.release(r);nv.release(i),nv.release(e),O9.forEach(r=>r())}}function eU(){const t=nv.acquire();t.length=Qa.size;let e=0;for(const i of Qa)t[e]=i,++e;return Qa.clear(),t}const O9=new Set;function tU(t){return O9.add(t),{remove(){O9.delete(t)}}}function iU(t,e,i){let r=jC(t,e,i,(s,h,f)=>{let m,b,S=hk(()=>Ky(s,h),(I,A)=>{s.__accessor__.destroyed||m&&m.uid!==b?r.remove():(m||(m=py.acquireUntracked(I,f,A,s,h),b=m.uid),$2(m))});return{remove:DC(()=>{S.remove(),m&&(m.uid!==b||m.removed||(m.removed=!0,$2(m)),m=null),r=S=null})}});return r}function rU(t,e,i){const r=jC(t,e,i,(s,h,f)=>{let m=!1;return uk(()=>Ky(s,h),(b,S)=>{s.__accessor__.destroyed?r.remove():m||(m=!0,sS(S,b)||f.call(s,b,S,h,s),m=!1)})});return r}function nU(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?rU(t,e,i):iU(t,e,i)}function sU(t,e,i){let r,s,h=hk(t,(f,m)=>{r&&r.uid!==s?h.remove():(r||(r=py.acquireTracked(f,e,m,i),s=r.uid),$2(r))});return{remove:DC(()=>{h.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,$2(r)),r=null),h=null})}}function oU(t,e,i){let r=!1;return uk(t,(s,h)=>{r||(r=!0,i(h,s)||e(s,h),r=!1)})}function aU(t,e,i=!1,r=NC){return i?oU(t,e,r):sU(t,e,r)}function L$(t){return Wq(Qa,e=>e.oldValue===t)}function Zw(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function fk(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}const Dd=fe.getLogger("esri.core.accessorSupport.ensureTypes");function lU(t){return t==null?t:new Date(t)}function uU(t){return t==null?t:!!t}function Qy(t){return t==null?t:t.toString()}function fs(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function uS(t){return t==null?t:Math.round(parseFloat(t))}function yk(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function T2(t,e){return e!=null&&t&&!(e instanceof t)}function mk(t){return t&&"isCollection"in t}function j$(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function hU(t,e){if(!e||!e.constructor||!mk(e.constructor))return P9(t,e)?e:new t(e);const i=j$(t.prototype.itemType),r=j$(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(P9(t,e),e):new t(e):e}function P9(t,e){return!!yk(e)&&(Dd.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+Xw(t)+"'"),!0)}function Yw(t,e){return e==null?e:mk(t)?hU(t,e):T2(t,e)?P9(t,e)?e:new t(e):e}function Xw(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const cU=new WeakMap;function pU(t){switch(t){case Number:return fs;case Bt:return uS;case Boolean:return uU;case String:return Qy;case Date:return lU;default:return fk(cU,t,()=>Yw.bind(null,t))}}function ei(t,e){const i=pU(t);return arguments.length===1?i:i(e)}function dy(t,e,i){return arguments.length===1?dy.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function dU(t,e){return arguments.length===1?dy(ei.bind(null,t)):dy(ei.bind(null,t),e)}function gk(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>gk(t,e-1,r)):t(i)}function I2(t,e,i){if(arguments.length===2)return I2.bind(null,t,e);if(!i)return i;let r=e,s=i=gk(t,e,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let h=0;h<r;h++)i=[i];return i}function fU(t,e,i){return arguments.length===2?I2(ei.bind(null,t),e):I2(ei.bind(null,t),e,i)}function vk(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function R9(t,e){if(arguments.length===2)return R9(t).call(null,e);const i=new Set,r=t.filter(m=>typeof m!="function"),s=t.filter(m=>typeof m=="function");for(const m of t)typeof m!="string"&&typeof m!="number"||i.add(m);let h=null,f=null;return(m,b)=>{if(m==null)return m;const S=typeof m,I=S==="string"||S==="number";return I&&(i.has(m)||s.some(A=>S==="string"&&A===String||S==="number"&&A===Number))||S==="object"&&s.some(A=>!T2(m,A))?m:(I&&r.length?(h||(h=r.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),Dd.error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${h}`)):typeof m=="object"&&s.length?(f||(f=s.map(A=>Xw(A)).join(", ")),Dd.error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${f}`)):Dd.error("Accessor#set",`'${m}' is not a valid value for this property`),b&&(b.valid=!1),null)}}function sa(t,e){if(arguments.length===2)return sa(t).call(null,e);const i={},r=[],s=[];for(const b in t.typeMap){const S=t.typeMap[b];i[b]=ei(S),r.push(Xw(S)),s.push(b)}const h=()=>`'${r.join("', '")}'`,f=()=>`'${s.join("', '")}'`,m=typeof t.key=="string"?b=>b[t.key]:t.key;return b=>{if(t.base&&!T2(t.base,b)||b==null)return b;const S=m(b)||t.defaultKeyValue,I=i[S];if(!I)return Dd.error("Accessor#set",`Invalid property value, value needs to be one of ${h()}, or a plain object that can autocast (having .type = ${f()})`),null;if(!T2(t.typeMap[S],b))return b;if(typeof t.key=="string"&&!yk(b)){const A={};for(const O in b)O!==t.key&&(A[O]=b[O]);return I(A)}return I(b)}}let Bt=class{};const t3e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function yU(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function wk(t){switch(t.type){case"native":return ei(t.value);case"array":return dy(wk(t.value));case"one-of":return mU(t);default:return null}}function mU(t){let e=null;return(i,r)=>N9(i,t)?i:(e==null&&(e=F9(t)),Dd.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function F9(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Bt:return"integer";case Date:return"date";default:return Xw(t.value)}case"array":return`array of ${F9(t.value)}`;case"one-of":{const e=t.values.map(i=>F9(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function N9(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Bt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!N9(i,e.value));case"one-of":return e.values.some(i=>N9(t,i))}}function x(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=qw(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&fe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const h=t.aliasOf;if(h){const b=typeof h=="string"?h:h.source,S=typeof h=="string"?null:h.overridable===!0;let I;s.dependsOn=[b],s.get=function(){let A=g2(this,b);if(typeof A=="function"){I||(I=b.split(".").slice(0,-1).join("."));const O=g2(this,I);O&&(A=A.bind(O))}return A},s.readOnly||(s.set=S?function(A){this._override(i,A)}:function(A){b2(this,b,A)})}const f=t.type,m=t.types;s.cast||(f?s.cast=gU(f):m&&(Array.isArray(m)?s.cast=dy(sa(m[0])):s.cast=sa(m))),gq(s,t),t.range&&(s.cast=vU(s.cast,t.range))}}function bk(t,e,i){const r=qw(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function gU(t){let e=0,i=t;if(yU(t))return wk(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(vk(r))return e===0?R9(r):I2(R9(r),e);if(e===1)return dU(r);if(e>1)return fU(r,e);const s=t;return s.from?s.from:ei(s)}function vU(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function wU(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach(h=>{e[h]=s}),delete e[r]}}}let Ss=class extends XC{constructor(e,i,r){super(e,i,r)}};Ss.prototype.type="warning";function _k(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const L9=fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function D$(t,e,i){var r,s;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((s=e.read)==null?void 0:s.enabled)===!1||xU(t)&&Wr("read.reader",th(t),e))}function th(t){var i,r;const e=t.ndimArray??0;if(e>1)return _U(t);if(e===1)return z$(t);if("type"in t&&Sk(t.type)){const s=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,h=z$(typeof s=="function"?{type:s}:{types:s});return(f,m,b)=>{const S=h(f,m,b);return S&&new t.type(S)}}return hS(t)}function hS(t){return"type"in t?bU(t.type):SU(t.types)}function bU(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void L9.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const h=new t;return h.read(e,r),h}:t.fromJSON}function xk(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(s=>xk(t,s,i,r-1)):t(e,void 0,i)}function _U(t){const e=hS(t),i=xk.bind(null,e),r=t.ndimArray??0;return(s,h,f)=>{if(s==null)return s;s=i(s,f,r);let m=r,b=s;for(;m>0&&Array.isArray(b);)m--,b=b[0];if(b!==void 0)for(let S=0;S<m;S++)s=[s];return s}}function z$(t){const e=hS(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const f=[];for(const m of i){const b=e(m,void 0,s);b!==void 0&&f.push(b)}return f}const h=e(i,void 0,s);return h!==void 0?[h]:void 0}}function Sk(t){if(!_k(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?cS(e.Type):Mk(e.Type))}function xU(t){return"types"in t?Mk(t.types):cS(t.type)}function cS(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Sk(t))}function Mk(t){for(const e in t.typeMap)if(!cS(t.typeMap[e]))return!1;return!0}function SU(t){let e=null;const i=t.errorContext??"type";return(r,s,h)=>{if(r==null)return r;const f=typeof r;if(f!=="object")return void L9.error(`Expected JSON value of type 'object' to deserialize, but got '${f}'`);e||(e=MU(t));const m=t.key;if(typeof m!="string")return;const b=r[m],S=b?e[b]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!S){const A=`Type '${b||"unknown"}' is not supported`;return h&&h.messages&&r&&h.messages.push(new Ss(`${i}:unsupported`,A,{definition:r,context:h})),void L9.error(A)}const I=new S;return I.read(r,h),I}}function MU(t){var i,r;const e={};for(const s in t.typeMap){const h=t.typeMap[s],f=Zy(h.prototype);if(typeof t.key=="function")continue;const m=f[t.key];if(!m)continue;(i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"&&(e[m.json.type[0]]=h);const b=(r=m.json)==null?void 0:r.write;if(!b||!b.writer){e[s]=h;continue}const S=b.target,I=typeof S=="string"?S:t.key,A={};b.writer(s,A,I),A[I]&&(e[A[I]]=h)}return e}function $U(t){if(t.json||(t.json={}),G$(t.json),q$(t.json),V$(t.json),t.json.origins)for(const e in t.json.origins)G$(t.json.origins[e]),q$(t.json.origins[e]),V$(t.json.origins[e]);return!0}function V$(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function G$(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function q$(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function U$(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&_k(t.type))?e.write.writer=EU:i>1?e.write.writer=AU(i):e.types?Array.isArray(e.types)?e.write.writer=IU(e.types[0]):e.write.writer=TU(e.types):e.write.writer=fy}function TU(t){return(e,i,r,s)=>e?$k(e,t,s)?fy(e,i,r,s):void 0:fy(e,i,r,s)}function $k(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ne(`${r}:unsupported`,s,{definition:t,context:i})),fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function IU(t){return(e,i,r,s)=>!e||!Array.isArray(e)?fy(e,i,r,s):fy(e.filter(h=>$k(h,t,s)),i,r,s)}function fy(t,e,i,r){Wr(i,E2(t,r),e)}function E2(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?A2(t):t}function A2(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function EU(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(h=>E2(h,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[E2(t,r)],Wr(i,s,e)}function Tk(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>Tk(r,e,i-1)):E2(t,e)}function AU(t){return(e,i,r,s)=>{let h;if(e===null)h=null;else{h=Tk(e,s,t);let f=t,m=h;for(;f>0&&Array.isArray(m);)f--,m=m[0];if(m!==void 0)for(let b=0;b<f;b++)h=[h]}Wr(r,h,i)}}function j9(t,e){return pS(t,"read",e)}function Ik(t,e){return pS(t,"write",e)}function pS(t,e,i){let r=t&&t.json;if(t&&t.json&&t.json.origins&&i){const s=i.origin&&t.json.origins[i.origin];s&&(e==="any"||e in s)&&(r=s)}return r}function CU(t){const e=kU(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],s=r.types?OU(r):e;D$(s,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),U$(s,r)}D$(e,t.json,!0),U$(e,t.json)}function kU(t){return t.json.types?D9(t.json):t.type?Ek(t):D9(t)}function OU(t){return t.type?Ek(t):D9(t)}function Ek(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!vk(i);)i=i[0],e++;return{type:i,ndimArray:e}}function D9(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function PU(t){$U(t)&&(wU(t),CU(t))}const b3=new Set,_3=new Set;function B(t){return e=>{e.prototype.declaredClass=t,FU(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!b3.has(s.initialize)&&(b3.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!_3.has(s.destroy)&&(_3.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);b3.clear(),_3.clear();class h extends e{constructor(...m){if(super(...m),this.constructor===h&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let b=i.length-1;b>=0;b--)i[b].call(this)}}),r.length){let b=!1;const S=this[$C];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!b){b=!0,S.call(this);for(let I=0;I<r.length;I++)r[I].call(this)}}})}this.postscript(...m)}}}return h.__accessorMetadata__=Zy(e.prototype),h.prototype.declaredClass=t,h}}function RU(t,e){return e.get==null?function(){const i=this.__accessor__.properties.get(t);if(i===void 0)return;rt(i.observerObject);const r=this.__accessor__.store;return r.has(t)?r.get(t):i.metadata.value}:function(){const i=this.__accessor__.properties.get(t);if(i!==void 0)return i.getComputed()}}function FU(t){const e=t.prototype,i=Zy(e),r={};for(const s of Object.getOwnPropertyNames(i)){const h=i[s];PU(h),r[s]={enumerable:!0,configurable:!0,get:RU(s,h),set(f){const m=this.__accessor__;if(m!==void 0){if(!Object.isFrozen(this)){if(m.initialized&&h.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(m.lifecycle===Ka.CONSTRUCTED&&h.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);m.set(s,f)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:f})}}}Object.defineProperties(t.prototype,r)}var Ak,Ck;function NU(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Gl=Symbol("Accessor-Handles"),z9=Symbol("Accessor-Initialized");let Oe=class kk{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const h=this;class f extends h{constructor(...b){super(...b),this.inherited=null,s&&s.apply(this,b)}}Zy(f.prototype);for(const m in e){const b=e[m];f.prototype[m]=typeof b=="function"?function(...S){const I=this.inherited;let A;this.inherited=function(...O){if(h.prototype[m])return h.prototype[m].apply(this,O)};try{A=b.apply(this,S)}catch(O){throw this.inherited=I,O}return this.inherited=I,A}:e[m]}for(const m in i){const b=NU(i[m]);x(b)(f.prototype,m)}return B(r)(f)}constructor(...e){if(this[Ak]=null,this[Ck]=!1,this.constructor===kk)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Aq(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[z9]=!0}initialize(){}[$C](){this[Gl]=Ut(this[Gl])}destroy(){this.destroyed||(Xq(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[z9]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return g2(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return b2(this,e,i),this}watch(e,i,r){return nU(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const s=Array.isArray(e)?e:[e];for(const h of s)h.remove();return}let r=this[Gl];r==null&&(r=this[Gl]=new Mn),r.add(e,i)}removeHandles(e){const i=this[Gl];i!=null&&i.remove(e)}removeAllHandles(){const e=this[Gl];e!=null&&e.removeAll()}hasHandles(e){const i=this[Gl];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};Ak=Gl,Ck=z9;let sv=class Ok{constructor(){this._emitter=new Ok.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,h){const f=this._listenersMap&&this._listenersMap.get(s);if(!f)return!1;const m=this._target||this;return[...f].forEach(b=>{b.call(m,h)}),f.length>0}on(s,h){if(Array.isArray(s)){const m=s.map(b=>this.on(b,h));return Dw(m)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const f=this._listenersMap.get(s)||[];return f.push(h),this._listenersMap.set(s,f),{remove:()=>{const m=this._listenersMap&&this._listenersMap.get(s)||[],b=m.indexOf(h);b>=0&&m.splice(b,1)}}}once(s,h){const f=this.on(s,m=>{f.remove(),h.call(null,m)});return f}hasEventListener(s){const h=this._listenersMap&&this._listenersMap.get(s);return h!=null&&h.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(h,f){return this._emitter.emit(h,f)}on(h,f){return this._emitter.on(h,f)}once(h,f){return this._emitter.once(h,f)}hasEventListener(h){return this._emitter.hasEventListener(h)}};return s=v([B("esri.core.Evented")],s),s};let i=class extends Oe{constructor(){super(...arguments),this._emitter=new sv.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=v([B("esri.core.Evented")],i),t.EventedAccessor=i})(sv||(sv={}));const pa=sv;var Dt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Dt||(Dt={}));function dS(t){return(e,i)=>{e[i]=t}}let fS=class extends HC{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Wa;let LU=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const Qn=new eh(LU,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),jU=()=>{};function x3(t){return t?t instanceof fc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function S3(t){if(t&&t.length)return t[0]}function DU(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let h=0;for(;h<s&&t[i+h]===e[r+h];)h++;return h}function Pk(t,e,i,r){e&&e.forEach((s,h,f)=>{t.push(s),Pk(t,i.call(r,s,h,f),i,r)})}const wl=new Set,bl=new Set,_l=new Set,M3=new Map;let zU=0,fc=Wa=class extends pa.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Wa}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new fS,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:zU++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Wa?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return rt(this._observable),this._items}set items(t){this._emitBeforeChanges(Dt.ADD)||(this._splice(0,this.length,x3(t)),this._emitAfterChanges(Dt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=jU,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(rt(this._observable),this._emitBeforeChanges(Dt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Dt.ADD),this}addMany(t,e=this._items.length){if(rt(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Dt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,x3(t)),this._emitAfterChanges(Dt.ADD),this}at(t){if(rt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(rt(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Dt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return rt(this._observable),this._createNewInstance({items:this._items.map(se)})}concat(...t){rt(this._observable);const e=t.map(x3);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(rt(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)t.call(e,i[s],s,i);this._emitAfterChanges(Dt.REMOVE)}every(t,e){return rt(this._observable),this._items.every(t,e)}filter(t,e){let i;return rt(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return rt(this._observable),this._items.find(t,e)}findIndex(t,e){return rt(this._observable),this._items.findIndex(t,e)}flatten(t,e){rt(this._observable);const i=[];return Pk(i,this,t,e),new Wa(i)}forEach(t,e){return rt(this._observable),this._items.forEach(t,e)}getItemAt(t){return rt(this._observable),this._items[t]}getNextIndex(t){rt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return rt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return rt(this._observable),this._items.indexOf(t,e)}join(t=","){return rt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return rt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){rt(this._observable);const i=this._items.map(t,e);return new Wa({items:i})}reorder(t,e=this.length-1){rt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Dt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Dt.MOVE)}return t}}pop(){if(rt(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const t=S3(this._splice(this.length-1,1));return this._emitAfterChanges(Dt.REMOVE),t}push(...t){return rt(this._observable),this._emitBeforeChanges(Dt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Dt.ADD)),this.length}reduce(t,e){rt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){rt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return rt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(rt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Dt.REMOVE))return;const e=S3(this._splice(t,1));return this._emitAfterChanges(Dt.REMOVE),e}removeMany(t){if(rt(this._observable),!t||!t.length||this._emitBeforeChanges(Dt.REMOVE))return[];const e=t instanceof Wa?t.toArray():t,i=this._items,r=[],s=e.length;for(let h=0;h<s;h++){const f=e[h],m=i.indexOf(f);if(m>-1){const b=1+DU(e,i,h+1,m+1),S=this._splice(m,b);S&&S.length>0&&r.push.apply(r,S),h+=b-1}}return this._emitAfterChanges(Dt.REMOVE),r}reverse(){if(rt(this._observable),this._emitBeforeChanges(Dt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Dt.MOVE),this}shift(){if(rt(this._observable),!this.length||this._emitBeforeChanges(Dt.REMOVE))return;const t=S3(this._splice(0,1));return this._emitAfterChanges(Dt.REMOVE),t}slice(t=0,e=this.length){return rt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return rt(this._observable),this._items.some(t,e)}sort(t){if(rt(this._observable),!this.length||this._emitBeforeChanges(Dt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Dt.MOVE),this}splice(t,e,...i){rt(this._observable);const r=(e?Dt.REMOVE:0)|(i.length?Dt.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(r),s}toArray(){return rt(this._observable),this._items.slice()}toJSON(){return rt(this._observable),this.toArray()}toLocaleString(){return rt(this._observable),this._items.toLocaleString()}toString(){return rt(this._observable),this._items.toString()}unshift(...t){return rt(this._observable),!t.length||this._emitBeforeChanges(Dt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Dt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,s=this.itemType;let h,f;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=T0(()=>this._dispatchChange())),e){if(f=r.splice(t,e),this.hasEventListener("before-remove")){const m=Qn.acquire();m.target=this,m.cancellable=!0;for(let b=0,S=f.length;b<S;b++)h=f[b],m.reset(h),this.emit("before-remove",m),m.defaultPrevented&&(f.splice(b,1),r.splice(t,0,h),t+=1,b-=1,S-=1);Qn.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=Qn.acquire();m.target=this,m.cancellable=!1;const b=f.length;for(let S=0;S<b;S++)m.reset(f[S]),this.emit("after-remove",m);Qn.release(m)}}if(i&&i.length){if(s){const I=[];for(const A of i){const O=s.ensureType(A);O==null&&A!=null||I.push(O)}i=I}const m=this.hasEventListener("before-add"),b=this.hasEventListener("after-add"),S=t===this.length;if(m||b){const I=Qn.acquire();I.target=this,I.cancellable=!0;const A=Qn.acquire();A.target=this,A.cancellable=!1;for(const O of i)m?(I.reset(O),this.emit("before-add",I),I.defaultPrevented||(S?r.push(O):r.splice(t++,0,O),this._set("length",r.length),b&&(A.reset(O),this.emit("after-add",A)))):(S?r.push(O):r.splice(t++,0,O),this._set("length",r.length),A.reset(O),this.emit("after-add",A));Qn.release(A),Qn.release(I)}else{if(S)for(const I of i)r.push(I);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||f&&f.length)&&this._notifyChangeEvent(i,f),f}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Qn.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Qn.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Qn.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Qn.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;wl.clear(),bl.clear(),_l.clear();for(const{added:b,removed:S}of i){if(b)if(_l.size===0&&bl.size===0)for(const I of b)wl.add(I);else for(const I of b)bl.has(I)?(_l.add(I),bl.delete(I)):_l.has(I)||wl.add(I);if(S)if(_l.size===0&&wl.size===0)for(const I of S)bl.add(I);else for(const I of S)wl.has(I)?wl.delete(I):(_l.delete(I),bl.add(I))}const r=nn.acquire();wl.forEach(b=>{r.push(b)});const s=nn.acquire();bl.forEach(b=>{s.push(b)});const h=this._items,f=e.items,m=nn.acquire();if(_l.forEach(b=>{f.indexOf(b)!==h.indexOf(b)&&m.push(b)}),e.listeners&&(r.length||s.length||m.length)){const b={target:this,added:r,removed:s,moved:m},S=e.listeners.length;for(let I=0;I<S;I++){const A=e.listeners[I];A.removed||A.callback.call(this,b)}}nn.release(r),nn.release(s),nn.release(m)}wl.clear(),bl.clear(),_l.clear()}};fc.ofType=t=>{if(!t)return Wa;if(M3.has(t))return M3.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const s=t.typeMap[r].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends Wa{};return v([dS({Type:t,ensureType:typeof t=="function"?ei(t):sa(t)})],i.prototype,"itemType",void 0),i=v([B(`esri.core.Collection<${e}>`)],i),M3.set(t,i),i},v([x()],fc.prototype,"length",void 0),v([x()],fc.prototype,"items",null),fc=Wa=v([B("esri.core.Collection")],fc);const qe=fc;function Jc(t,e,i=qe){return e||(e=new i),e===t||(e.removeAll(),VU(t)?e.addMany(t):t&&e.add(t)),e}function Rk(t){return t}function VU(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const B$=new Set;function GU(t,e,i=!1){i&&B$.has(e)||(i&&B$.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function yy(t,e,i={}){if(ue("esri-deprecation-warnings")){const{moduleName:r}=i;Fk(t,`Property: ${(r?r+"::":"")+e}`,i)}}function Fk(t,e,i={}){if(ue("esri-deprecation-warnings")){const{replacement:r,version:s,see:h,warnOnce:f}=i;let m=e;r&&(m+=`
	🛠️ Replacement: ${r}`),s&&(m+=`
	⚙️ Version: ${s}`),h&&(m+=`
	🔗 See ${h} for more details.`),GU(t,m,f)}}let qU=class Nk{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Nk;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,se(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??ft.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===ft.DEFAULTS){const s=this._values.get(e);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(e,new UU(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===ft.DEFAULTS?e:ft.USER}},UU=class{constructor(e,i){this.value=e,this.origin=i}};function Lk(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),ft.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),ft.DEFAULTS)})}function BU(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&T$(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.indexOf(e)===0&&T$(s,i))return!0;return!1}function HU(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function WU(t,e,i,r,s){let h=j9(e[i],s);HU(h)&&(t[i]=!0);for(const f of Object.getOwnPropertyNames(e))h=j9(e[f],s),BU(h,i,r)&&(t[f]=!0)}function JU(t,e,i,r){const s=i.metadatas,h=pS(s[e],"any",r),f=h&&h.default;if(f===void 0)return;const m=typeof f=="function"?f.call(t,e,r):f;m!==void 0&&i.set(e,m)}const jk={origin:"service"};function Dk(t,e,i=jk){if(!e||typeof e!="object")return;const r=Hr(t),s=r.metadatas,h={};for(const f of Object.getOwnPropertyNames(e))WU(h,s,f,e,i);r.setDefaultOrigin(i.origin);for(const f of Object.getOwnPropertyNames(h)){const m=j9(s[f],i).read,b=m&&m.source;let S;S=b&&typeof b=="string"?Ky(e,b):e[f],m&&m.reader&&(S=m.reader.call(t,S,e,i)),S!==void 0&&r.set(f,S)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const f of Object.getOwnPropertyNames(s))h[f]||JU(t,f,r,i)}r.setDefaultOrigin("user")}function KU(t,e,i,r=jk){var h;const s={...r,messages:[]};i(s),(h=s.messages)==null||h.forEach(f=>{f.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(f):t.loadWarnings.push(f)})}function ZU(t,e,i,r,s){var f,m;const h={};return(m=(f=e.write)==null?void 0:f.writer)==null||m.call(t,r,h,i,s),h}function zk(t,e,i,r,s,h){if(!r||!r.write)return!1;const f=t.get(i);if(!s&&r.write.overridePolicy){const m=r.write.overridePolicy.call(t,f,i,h);m!==void 0&&(s=m)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((f===null&&!s.allowNull&&!s.writerEnsuresNonNull||f===void 0)&&s.isRequired){const m=new ne("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return m&&h&&h.messages?h.messages.push(m):m&&!h&&fe.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(f===void 0||f===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!e.store.multipleOriginsSupported||e.store.originOf(i)===ft.DEFAULTS)&&YU(t,i,h,r,f)||!s.ignoreOrigin&&h&&h.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<ku(h.origin))}function YU(t,e,i,r,s){const h=r.default;if(h===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof h=="function"){if(Array.isArray(s)){const f=h.call(t,e,i);return zw(f,s)}return!1}return h===s}function XU(t,e,i,r){const s=Hr(t),h=s.metadatas,f=Ik(h[e],r);return!!f&&zk(t,s,e,f,i,r)}function Vk(t,e,i){var h,f;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return tv(e,t.toJSON(i));const r=Hr(t),s=r.metadatas;for(const m in s){const b=Ik(s[m],i);if(!zk(t,r,m,b,void 0,i))continue;const S=t.get(m),I=ZU(t,b,b.write&&typeof b.write.target=="string"?b.write.target:m,S,i);Object.keys(I).length>0&&(e=tv(e,I),(f=(h=i==null?void 0:i.resources)==null?void 0:h.pendingOperations)!=null&&f.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>tv(e,I,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:m,oldOrigin:Sq(r.store.originOf(m)),newOrigin:i.origin}))}return e}const em=t=>{let e=class extends t{constructor(...i){super(...i);const r=Hr(this),s=r.store,h=new qU;r.store=h,Lk(r,s,h)}read(i,r){Dk(this,i,r)}write(i,r){return Vk(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return QU.call(this,i,r)}};return e=v([B("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function QU(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let ye=class extends em(Oe){};ye=v([B("esri.core.JSONSupport")],ye);var fu;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(fu||(fu={}));let eB=class{constructor(e){this.instance=e,this._resolver=sl(),this._status=fu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=fu.RESOLVED,this._cleanUp()},()=>{this._status=fu.REJECTED,this._cleanUp()})}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===fu.RESOLVED}isRejected(){return this._status===fu.REJECTED}isFulfilled(){return this._status!==fu.PENDING}abort(){this._resolver.reject(Xt())}when(e,i){return this._resolver.promise.then(e,i)}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=sl(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||Ts(s)||this._resolver.reject(s)}),e.resolve()}};const Qw=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new eB(this),this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,h)=>{this._promiseProps.when(s,h)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=v([B("esri.core.Promise")],e),e};let C2=class extends Qw(Oe){};C2=v([B("esri.core.Promise")],C2);const tB="not-loaded",iB="loading",rB="failed",H$="loaded",Gk=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=h=>{const f=new Promise((m,b)=>{const S=lS(h,b);this.destroyed&&b(new ne("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(m,b).finally(()=>{S&&S.remove()})});if(this.loadStatus===tB){this._set("loadStatus",iB);const m=this._loadController=new AbortController;s({signal:m.signal}),Un(m.signal,()=>{this._promiseProps.abort()})}return r(),f}})),this.when(()=>{this._set("loadStatus",H$),this._loadController=null},r=>{this._set("loadStatus",rB),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=cy(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===H$}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ne("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return v([x({readOnly:!0})],e.prototype,"loaded",null),v([x({readOnly:!0})],e.prototype,"loadError",void 0),v([x({clonable:!1})],e.prototype,"loadStatus",void 0),v([x({type:[Ss],readOnly:!0})],e.prototype,"loadWarnings",null),e=v([B("esri.core.Loadable")],e),e};let Pf=class extends Gk(C2){};Pf=v([B("esri.core.Loadable")],Pf),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Gk,t.isLoadable=e}(Pf||(Pf={}));const ol=Pf;function nB(t,e,i){return sn(t.map((r,s)=>e.apply(i,[r,s])))}async function sB(t,e,i){return(await sn(t.map((r,s)=>e.apply(i,[r,s])))).map(r=>r.value)}function yS(t){return{ok:!0,value:t}}function mS(t){return{ok:!1,error:t}}function oB(t){return t!=null&&t.ok===!0?t.value:null}function aB(t){return t!=null&&t.ok===!1?t.error:null}async function Qd(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return yS(await t)}catch(e){return mS(e)}}async function h3e(t){try{return yS(await t)}catch(e){return Zo(e),mS(e)}}function qk(t,e){return new ql(t,e)}let ql=class extends Oe{get value(){return oB(this._result)}get error(){return aB(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=cy(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(s=>{this._result=yS(s),this._cleanup()},s=>{this._result=mS(s),this._cleanup()}),this._abortHandle=Un(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=$i(this._abortHandle),this._abortController=null}};v([x()],ql.prototype,"value",null),v([x()],ql.prototype,"error",null),v([x()],ql.prototype,"finished",null),v([x()],ql.prototype,"promise",void 0),v([x()],ql.prototype,"_result",void 0),ql=v([B("esri.core.asyncUtils.ReactiveTask")],ql);async function Uk(t,e){return await t.load(),lB(t,e)}async function lB(t,e){const i=[],r=(...h)=>{for(const f of h)f!=null&&(Array.isArray(f)?r(...f):qe.isCollection(f)?f.forEach(m=>r(m)):ol.isLoadable(f)&&i.push(f))};e(r);let s=null;if(await sB(i,async h=>{const f=await Qd(uB(h)?h.loadAll():h.load());f.ok!==!1||s||(s=f)}),s)throw s.error;return t}function uB(t){return"loadAll"in t&&typeof t.loadAll=="function"}const hB=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,cB={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function W$(t){const e=t==null?void 0:t.match(hB);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let h=null,f=null,m=null;const{devext:b,qaext:S,www:I}=cB;if(r)if(h=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=b);break;case"qa":({customBaseUrl:f,portalHostname:m}=S);break;default:return null}else({customBaseUrl:f,portalHostname:m}=I);else switch(i.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:m}=b);break;case"qaext":({customBaseUrl:f,portalHostname:m}=S);break;case"www":({customBaseUrl:f,portalHostname:m}=I);break;default:return null}return{customBaseUrl:f,isPortal:!1,portalHostname:m,urlKey:h}}function pB(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}const dB=fe.getLogger("esri.core.urlUtils"),I0=Tt.request,J$="esri/config: esriConfig.request.proxyUrl is not set.",Bk=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Hk=/^\s*http:/i,fB=/^\s*https:/i,yB=/^\s*file:/i,mB=/:\d+$/,gB=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,vB=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),wB=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let zd=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(vB);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(wB),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const Um={},bB=new zd(Tt.applicationUrl);let Gr=bB;const _B=xB();let gS=_B;const vS=()=>Gr,d3e=()=>gS;function xB(){const t=Gr.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${Gr.scheme}://${Gr.host}${Gr.port!=null?`:${Gr.port}`:""}`}${e}`}function Jr(t){if(!t)return null;const e={path:null,query:null},i=new zd(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=Wk(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function Wk(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let h,f;s<0?(h=decodeURIComponent(r),f=""):(h=decodeURIComponent(r.slice(0,s)),f=decodeURIComponent(r.slice(s+1)));let m=i[h];typeof m=="string"&&(m=i[h]=[m]),Array.isArray(m)?m.push(f):i[h]=f}return i}function K$(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function my(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",h=e&&e[i];return h?s+encodeURIComponent(h(r)):Array.isArray(r)?r.map(f=>K$(f)?s+encodeURIComponent(JSON.stringify(f)):s+encodeURIComponent(f)).join("&"):K$(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function SB(t=!1){let e,i=I0.proxyUrl;if(typeof t=="string"){e=CB(t);const r=eb(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw dB.warn(J$),new ne("urlutils:proxy-not-set",J$);return e&&V9()&&(i=SS(i)),Jr(i)}function f3e(t){const e=eb(t);let i,r;if(e){const s=wS(e.proxyUrl);i=s.path,r=s.query?Wk(s.query):null}if(i){const s=Jr(t);t=i+"?"+s.path;const h=my({...r,...s.query});h&&(t=`${t}?${h}`)}return t}const tf={path:"",query:""};function wS(t){const e=t.indexOf("?");return e!==-1?(tf.path=t.slice(0,e),tf.query=t.slice(e+1)):(tf.path=t,tf.query=null),tf}function Jk(t){return t=(t=O2(t=NB(t=wS(t).path),!0)).toLowerCase()}function MB(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Jk(t.urlPrefix)},i=I0.proxyRules,r=e.urlPrefix;let s=i.length;for(let h=0;h<i.length;h++){const f=i[h].urlPrefix;if(r.indexOf(f)===0){if(r.length===f.length)return-1;s=h;break}f.indexOf(r)===0&&(s=h+1)}return i.splice(s,0,e),s}function eb(t){const e=I0.proxyRules,i=Jk(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function $B(t,e){if(!t||!e)return!1;t=k2(t),e=k2(e);const i=W$(t),r=W$(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&e0(t,e,!0)}function Kk(t,e){return t=k2(t),e=k2(e),O2(t)===O2(e)}function k2(t){const e=(t=co(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function Zk(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=I0.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function e0(t,e,i=!1){if(!t||!e)return!1;const r=q9(t),s=q9(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function bS(t){if(typeof t=="string"){if(!Bn(t))return!0;t=q9(t)}if(e0(t,Gr))return!0;const e=I0.trustedServers||[];for(let i=0;i<e.length;i++){const r=TB(e[i]);for(let s=0;s<r.length;s++)if(e0(t,r[s]))return!0}return!1}function TB(t){return Um[t]||(xS(t)||oa(t)?Um[t]=[new zd(ms(t))]:Um[t]=[new zd(`http://${t}`),new zd(`https://${t}`)]),Um[t]}function ms(t,e=gS,i){return oa(t)?i&&i.preserveProtocolRelative?t:Gr.scheme==="http"&&Gr.authority===po(t).slice(2)?`http:${t}`:`https:${t}`:xS(t)?t:Kc(t[0]==="/"?RB(e):e,t)}function _S(t,e=gS,i){if(t==null||!Bn(t))return t;const r=co(t),s=r.toLowerCase(),h=co(e).toLowerCase().replace(/\/+$/,""),f=i?co(i).toLowerCase().replace(/\/+$/,""):null;if(f&&h.indexOf(f)!==0)return t;const m=(A,O,R)=>(R=A.indexOf(O,R))===-1?A.length:R;let b=m(s,"/",s.indexOf("//")+2),S=-1;for(;s.slice(0,b+1)===h.slice(0,b)+"/"&&(S=b+1,b!==s.length);)b=m(s,"/",b+1);if(S===-1||f&&S<f.length)return t;t=r.slice(S);const I=h.slice(S-1).replace(/[^/]+/g,"").length;if(I>0)for(let A=0;A<I;A++)t=`../${t}`;else t=`./${t}`;return t}function co(t){return t=DB(t=jB(t=LB(t=ms(t=t.trim()))))}function Kc(...t){const e=t.filter(Zn);if(!e||!e.length)return;const i=[];if(Bn(e[0])){const s=e[0],h=s.indexOf("//");h!==-1&&(i.push(s.slice(0,h+1)),OB(e[0])&&(i[0]+="/"),e[0]=s.slice(h+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((s,h)=>h?s.concat(h.split("/")):s,[]);for(let s=0;s<r.length;s++){const h=r[s];h===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!h&&s===r.length-1||h&&(h!=="."||i.length===0))&&i.push(h)}return i.join("/")}function po(t,e=!1){if(t==null||tb(t)||dp(t))return null;let i=t.indexOf("://");if(i===-1&&oa(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=O2(t,!0)),t}function Bn(t){return oa(t)||xS(t)}function tb(t){return t!=null&&t.slice(0,5)==="blob:"}function dp(t){return t!=null&&t.slice(0,5)==="data:"}function IB(t){const e=gy(t);if(!e||!e.isBase64)return null;const i=atob(e.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function y3e(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const EB=/^data:(.*?)(;base64)?,(.*)$/;function gy(t){const e=t.match(EB);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function Yk(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function m3e(t){const e=IB(t);if(!e)return null;const i=gy(t);return new Blob([e],{type:i.mediaType})}function g3e(t,e){AB(t,e)}function AB(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function oa(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function xS(t){return t!=null&&Bk.test(t)}function CB(t){return t!=null&&fB.test(t)||Gr.scheme==="https"&&oa(t)}function kB(t){return t!=null&&Hk.test(t)||Gr.scheme==="http"&&oa(t)}function OB(t){return t!=null&&yB.test(t)}function SS(t){return oa(t)?`https:${t}`:t.replace(Hk,"https:")}function PB(){return Gr.scheme==="http"}function V9(){return Gr.scheme==="https"}function O2(t,e=!1){return oa(t)?t.slice(2):(t=t.replace(Bk,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function RB(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function FB(t){let e=0;if(Bn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function v3e(t,e){if(!t)return"";const i=Jr(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const s=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(s,"")}function NB(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function Xk(t){return t.replace(/\/+$/,"")}function LB(t){if(/^https?:\/\//i.test(t)){const e=wS(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function jB(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function DB(t){const e=I0.httpsDomains;if(!kB(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),mB.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return PB()&&r===Gr.authority&&!gB.test(t)||(V9()&&r===Gr.authority||e&&e.some(s=>r===s||r.endsWith(`.${s}`))||V9()&&!eb(t))&&(t=SS(t)),t}function G9(t,e,i){if(!(e&&i&&t&&Bn(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),h=t.indexOf(":",r+2),f=Math.min(s<0?t.length:s,h<0?t.length:h);return t.slice(r+2,f).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(f)}`}function q9(t){return typeof t=="string"?new zd(ms(t)):(t.scheme||(t.scheme=Gr.scheme),t)}function w3e(t){return zB.test(t)}function Qk(t,e){const i=Jr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function eO(t,e,i){const r=Jr(t),s=r.query||{};return s[e]=String(i),`${r.path}?${my(s)}`}function $3(t,e){const i=Jr(t),r=i.query||{};for(const h in e)r[h]=e[h];const s=my(r);return s?`${i.path}?${s}`:i.path}function b3e(t){if(t==null)return null;const e=t.match(tO);return e?e[2]:null}function Z$(t){if(t==null)return null;const e=t.match(tO);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function _3e(t){return typeof t=="string"?gy(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(gy(r.result)),r.onerror=s=>i(s)})}const tO=/([^.]*)\.([^\/]*)$/,zB=/(^data:image\/svg|\.svg$)/i;function Ee(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;for(const b of r){const S=bk(h,b,s);S.write&&typeof S.write=="object"||(S.write={}),i&&(S.write.target=i),S.write.writer=m[f]}}}let tt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,h)=>{const f=this.toJSON(r);f!==void 0&&Wr(h,f,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function Ir(){return function(t,e){return new tt(t,{ignoreUnknown:!0,...e})}}let MS=class{constructor(e,i,r,s){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const oi=new MS(6378137,1/298.257223563,3e5,.006694379990137799),el=new MS(3396190,1/169.8944472236118,23e4),Hu=new MS(1737400,0,0);var gs;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(gs||(gs={}));let T;const q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(T=2e3;T<=2045;T++)q[T]=0;for(T=2056;T<=2065;T++)q[T]=0;for(T=2067;T<=2135;T++)q[T]=0;for(T=2137;T<=2154;T++)q[T]=0;for(T=2161;T<=2170;T++)q[T]=0;for(T=2172;T<=2193;T++)q[T]=0;for(T=2195;T<=2198;T++)q[T]=0;for(T=2200;T<=2203;T++)q[T]=0;for(T=2205;T<=2217;T++)q[T]=0;for(T=2222;T<=2224;T++)q[T]=1;for(T=2225;T<=2250;T++)q[T]=2;for(T=2251;T<=2253;T++)q[T]=1;for(T=2257;T<=2264;T++)q[T]=2;for(T=2274;T<=2279;T++)q[T]=2;for(T=2280;T<=2282;T++)q[T]=1;for(T=2283;T<=2289;T++)q[T]=2;for(T=2290;T<=2292;T++)q[T]=0;for(T=2308;T<=2313;T++)q[T]=0;for(T=2315;T<=2491;T++)q[T]=0;for(T=2494;T<=2866;T++)q[T]=0;for(T=2867;T<=2869;T++)q[T]=1;for(T=2870;T<=2888;T++)q[T]=2;for(T=2891;T<=2895;T++)q[T]=2;for(T=2896;T<=2898;T++)q[T]=1;for(T=2902;T<=2908;T++)q[T]=2;for(T=2915;T<=2920;T++)q[T]=2;for(T=2921;T<=2923;T++)q[T]=1;for(T=2924;T<=2930;T++)q[T]=2;for(T=2931;T<=2962;T++)q[T]=0;for(T=2964;T<=2968;T++)q[T]=2;for(T=2969;T<=2973;T++)q[T]=0;for(T=2975;T<=2991;T++)q[T]=0;for(T=2995;T<=3051;T++)q[T]=0;for(T=3054;T<=3079;T++)q[T]=0;for(T=3081;T<=3088;T++)q[T]=0;for(T=3092;T<=3101;T++)q[T]=0;for(T=3106;T<=3138;T++)q[T]=0;for(T=3146;T<=3151;T++)q[T]=0;for(T=3153;T<=3166;T++)q[T]=0;for(T=3168;T<=3172;T++)q[T]=0;for(T=3174;T<=3203;T++)q[T]=0;for(T=3294;T<=3358;T++)q[T]=0;for(T=3367;T<=3403;T++)q[T]=0;for(T=3408;T<=3416;T++)q[T]=0;for(T=3417;T<=3438;T++)q[T]=2;for(T=3441;T<=3446;T++)q[T]=2;for(T=3447;T<=3450;T++)q[T]=0;for(T=3451;T<=3459;T++)q[T]=2;for(T=3460;T<=3478;T++)q[T]=0;for(T=3554;T<=3559;T++)q[T]=0;for(T=3560;T<=3570;T++)q[T]=2;for(T=3571;T<=3581;T++)q[T]=0;for(T=3594;T<=3597;T++)q[T]=0;for(T=3601;T<=3604;T++)q[T]=0;for(T=3637;T<=3639;T++)q[T]=0;for(T=3665;T<=3667;T++)q[T]=0;for(T=3693;T<=3695;T++)q[T]=0;for(T=3701;T<=3727;T++)q[T]=0;for(T=3728;T<=3739;T++)q[T]=2;for(T=3740;T<=3751;T++)q[T]=0;for(T=3753;T<=3760;T++)q[T]=2;for(T=3761;T<=3773;T++)q[T]=0;for(T=3775;T<=3777;T++)q[T]=0;for(T=3779;T<=3781;T++)q[T]=0;for(T=3783;T<=3785;T++)q[T]=0;for(T=3788;T<=3791;T++)q[T]=0;for(T=3797;T<=3802;T++)q[T]=0;for(T=3814;T<=3816;T++)q[T]=0;for(T=3825;T<=3829;T++)q[T]=0;for(T=3832;T<=3841;T++)q[T]=0;for(T=3844;T<=3852;T++)q[T]=0;for(T=3873;T<=3885;T++)q[T]=0;for(T=3890;T<=3893;T++)q[T]=0;for(T=3907;T<=3912;T++)q[T]=0;for(T=3942;T<=3950;T++)q[T]=0;for(T=3968;T<=3970;T++)q[T]=0;for(T=3973;T<=3976;T++)q[T]=0;for(T=3986;T<=3989;T++)q[T]=0;for(T=3994;T<=3997;T++)q[T]=0;for(T=4048;T<=4051;T++)q[T]=0;for(T=4056;T<=4063;T++)q[T]=0;for(T=4093;T<=4096;T++)q[T]=0;for(T=4390;T<=4398;T++)q[T]=0;for(T=4399;T<=4413;T++)q[T]=2;for(T=4418;T<=4433;T++)q[T]=2;for(T=4455;T<=4457;T++)q[T]=2;for(T=4484;T<=4489;T++)q[T]=0;for(T=4491;T<=4554;T++)q[T]=0;for(T=4568;T<=4589;T++)q[T]=0;for(T=4652;T<=4656;T++)q[T]=0;for(T=4766;T<=4800;T++)q[T]=0;for(T=5014;T<=5016;T++)q[T]=0;for(T=5069;T<=5072;T++)q[T]=0;for(T=5105;T<=5130;T++)q[T]=0;for(T=5173;T<=5188;T++)q[T]=0;for(T=5253;T<=5259;T++)q[T]=0;for(T=5269;T<=5275;T++)q[T]=0;for(T=5292;T<=5311;T++)q[T]=0;for(T=5329;T<=5331;T++)q[T]=0;for(T=5343;T<=5349;T++)q[T]=0;for(T=5355;T<=5357;T++)q[T]=0;for(T=5387;T<=5389;T++)q[T]=0;for(T=5459;T<=5463;T++)q[T]=0;for(T=5479;T<=5482;T++)q[T]=0;for(T=5518;T<=5520;T++)q[T]=0;for(T=5530;T<=5539;T++)q[T]=0;for(T=5550;T<=5552;T++)q[T]=0;for(T=5562;T<=5583;T++)q[T]=0;for(T=5623;T<=5625;T++)q[T]=2;for(T=5631;T<=5639;T++)q[T]=0;for(T=5649;T<=5653;T++)q[T]=0;for(T=5663;T<=5680;T++)q[T]=0;for(T=5682;T<=5685;T++)q[T]=0;for(T=5875;T<=5877;T++)q[T]=0;for(T=5896;T<=5899;T++)q[T]=0;for(T=5921;T<=5940;T++)q[T]=0;for(T=6050;T<=6125;T++)q[T]=0;for(T=6244;T<=6275;T++)q[T]=0;for(T=6328;T<=6348;T++)q[T]=0;for(T=6350;T<=6356;T++)q[T]=0;for(T=6366;T<=6372;T++)q[T]=0;for(T=6381;T<=6387;T++)q[T]=0;for(T=6393;T<=6404;T++)q[T]=0;for(T=6480;T<=6483;T++)q[T]=0;for(T=6511;T<=6514;T++)q[T]=0;for(T=6579;T<=6581;T++)q[T]=0;for(T=6619;T<=6624;T++)q[T]=0;for(T=6625;T<=6627;T++)q[T]=2;for(T=6628;T<=6632;T++)q[T]=0;for(T=6634;T<=6637;T++)q[T]=0;for(T=6669;T<=6692;T++)q[T]=0;for(T=6707;T<=6709;T++)q[T]=0;for(T=6720;T<=6723;T++)q[T]=0;for(T=6732;T<=6738;T++)q[T]=0;for(T=6931;T<=6933;T++)q[T]=0;for(T=6956;T<=6959;T++)q[T]=0;for(T=7005;T<=7007;T++)q[T]=0;for(T=7057;T<=7070;T++)q[T]=2;for(T=7074;T<=7082;T++)q[T]=0;for(T=7109;T<=7118;T++)q[T]=0;for(T=7119;T<=7127;T++)q[T]=1;for(T=7374;T<=7376;T++)q[T]=0;for(T=7528;T<=7586;T++)q[T]=0;for(T=7587;T<=7645;T++)q[T]=2;for(T=7692;T<=7696;T++)q[T]=0;for(T=7755;T<=7787;T++)q[T]=0;for(T=7791;T<=7795;T++)q[T]=0;for(T=7799;T<=7801;T++)q[T]=0;for(T=7803;T<=7805;T++)q[T]=0;for(T=7825;T<=7831;T++)q[T]=0;for(T=7845;T<=7859;T++)q[T]=0;for(T=8013;T<=8032;T++)q[T]=0;for(T=8065;T<=8068;T++)q[T]=1;for(T=8518;T<=8529;T++)q[T]=2;for(T=8533;T<=8536;T++)q[T]=2;for(T=8538;T<=8540;T++)q[T]=2;for(T=8677;T<=8679;T++)q[T]=0;for(T=8836;T<=8840;T++)q[T]=0;for(T=8857;T<=8859;T++)q[T]=0;for(T=8908;T<=8910;T++)q[T]=0;for(T=9154;T<=9159;T++)q[T]=0;for(T=9205;T<=9218;T++)q[T]=0;for(T=9271;T<=9273;T++)q[T]=0;for(T=9295;T<=9297;T++)q[T]=0;for(T=9356;T<=9360;T++)q[T]=0;for(T=9404;T<=9407;T++)q[T]=0;for(T=9476;T<=9482;T++)q[T]=0;for(T=9487;T<=9494;T++)q[T]=0;for(T=9697;T<=9699;T++)q[T]=0;for(T=9821;T<=9865;T++)q[T]=0;for(T=20002;T<=20032;T++)q[T]=0;for(T=20047;T<=20049;T++)q[T]=0;for(T=20062;T<=20092;T++)q[T]=0;for(T=20135;T<=20138;T++)q[T]=0;for(T=20248;T<=20258;T++)q[T]=0;for(T=20348;T<=20358;T++)q[T]=0;for(T=20436;T<=20440;T++)q[T]=0;for(T=20822;T<=20824;T++)q[T]=0;for(T=20904;T<=20932;T++)q[T]=0;for(T=20934;T<=20936;T++)q[T]=0;for(T=21004;T<=21032;T++)q[T]=0;for(T=21035;T<=21037;T++)q[T]=0;for(T=21095;T<=21097;T++)q[T]=0;for(T=21148;T<=21150;T++)q[T]=0;for(T=21207;T<=21264;T++)q[T]=0;for(T=21307;T<=21364;T++)q[T]=0;for(T=21413;T<=21423;T++)q[T]=0;for(T=21453;T<=21463;T++)q[T]=0;for(T=21473;T<=21483;T++)q[T]=0;for(T=21780;T<=21782;T++)q[T]=0;for(T=21891;T<=21894;T++)q[T]=0;for(T=21896;T<=21899;T++)q[T]=0;for(T=22171;T<=22177;T++)q[T]=0;for(T=22181;T<=22187;T++)q[T]=0;for(T=22191;T<=22197;T++)q[T]=0;for(T=22207;T<=22222;T++)q[T]=0;for(T=22234;T<=22236;T++)q[T]=0;for(T=22243;T<=22250;T++)q[T]=0;for(T=22262;T<=22265;T++)q[T]=0;for(T=22307;T<=22322;T++)q[T]=0;for(T=22348;T<=22357;T++)q[T]=0;for(T=22407;T<=22422;T++)q[T]=0;for(T=22462;T<=22465;T++)q[T]=0;for(T=22521;T<=22525;T++)q[T]=0;for(T=22607;T<=22622;T++)q[T]=0;for(T=22641;T<=22646;T++)q[T]=0;for(T=22648;T<=22657;T++)q[T]=0;for(T=22707;T<=22722;T++)q[T]=0;for(T=22762;T<=22765;T++)q[T]=0;for(T=22991;T<=22994;T++)q[T]=0;for(T=23028;T<=23038;T++)q[T]=0;for(T=23830;T<=23853;T++)q[T]=0;for(T=23866;T<=23872;T++)q[T]=0;for(T=23877;T<=23884;T++)q[T]=0;for(T=23886;T<=23894;T++)q[T]=0;for(T=23946;T<=23948;T++)q[T]=0;for(T=24311;T<=24313;T++)q[T]=0;for(T=24342;T<=24347;T++)q[T]=0;for(T=24370;T<=24374;T++)q[T]=10;for(T=24375;T<=24381;T++)q[T]=0;for(T=24718;T<=24721;T++)q[T]=0;for(T=24817;T<=24821;T++)q[T]=0;for(T=24877;T<=24882;T++)q[T]=0;for(T=24891;T<=24893;T++)q[T]=0;for(T=25391;T<=25395;T++)q[T]=0;for(T=25828;T<=25838;T++)q[T]=0;for(T=26191;T<=26195;T++)q[T]=0;for(T=26391;T<=26393;T++)q[T]=0;for(T=26701;T<=26722;T++)q[T]=0;for(T=26729;T<=26799;T++)q[T]=2;for(T=26801;T<=26803;T++)q[T]=2;for(T=26811;T<=26813;T++)q[T]=2;for(T=26847;T<=26870;T++)q[T]=2;for(T=26891;T<=26899;T++)q[T]=0;for(T=26901;T<=26923;T++)q[T]=0;for(T=26929;T<=26946;T++)q[T]=0;for(T=26948;T<=26998;T++)q[T]=0;for(T=27037;T<=27040;T++)q[T]=0;for(T=27205;T<=27232;T++)q[T]=0;for(T=27258;T<=27260;T++)q[T]=0;for(T=27391;T<=27398;T++)q[T]=0;for(T=27561;T<=27564;T++)q[T]=0;for(T=27571;T<=27574;T++)q[T]=0;for(T=27581;T<=27584;T++)q[T]=0;for(T=27591;T<=27594;T++)q[T]=0;for(T=28191;T<=28193;T++)q[T]=0;for(T=28348;T<=28358;T++)q[T]=0;for(T=28402;T<=28432;T++)q[T]=0;for(T=28462;T<=28492;T++)q[T]=0;for(T=29118;T<=29122;T++)q[T]=0;for(T=29168;T<=29172;T++)q[T]=0;for(T=29177;T<=29185;T++)q[T]=0;for(T=29187;T<=29195;T++)q[T]=0;for(T=29900;T<=29903;T++)q[T]=0;for(T=30161;T<=30179;T++)q[T]=0;for(T=30491;T<=30494;T++)q[T]=0;for(T=30729;T<=30732;T++)q[T]=0;for(T=31251;T<=31259;T++)q[T]=0;for(T=31265;T<=31268;T++)q[T]=0;for(T=31275;T<=31279;T++)q[T]=0;for(T=31281;T<=31297;T++)q[T]=0;for(T=31461;T<=31469;T++)q[T]=0;for(T=31491;T<=31495;T++)q[T]=0;for(T=31917;T<=31922;T++)q[T]=0;for(T=31965;T<=32e3;T++)q[T]=0;for(T=32001;T<=32003;T++)q[T]=2;for(T=32005;T<=32031;T++)q[T]=2;for(T=32033;T<=32060;T++)q[T]=2;for(T=32064;T<=32067;T++)q[T]=2;for(T=32074;T<=32077;T++)q[T]=2;for(T=32081;T<=32086;T++)q[T]=0;for(T=32107;T<=32130;T++)q[T]=0;for(T=32133;T<=32159;T++)q[T]=0;for(T=32164;T<=32167;T++)q[T]=2;for(T=32180;T<=32199;T++)q[T]=0;for(T=32201;T<=32260;T++)q[T]=0;for(T=32301;T<=32360;T++)q[T]=0;for(T=32601;T<=32662;T++)q[T]=0;for(T=32664;T<=32667;T++)q[T]=2;for(T=32701;T<=32761;T++)q[T]=0;for(T=53001;T<=53004;T++)q[T]=0;for(T=53008;T<=53019;T++)q[T]=0;for(T=53021;T<=53032;T++)q[T]=0;for(T=53034;T<=53037;T++)q[T]=0;for(T=53042;T<=53046;T++)q[T]=0;for(T=53074;T<=53080;T++)q[T]=0;for(T=54001;T<=54004;T++)q[T]=0;for(T=54008;T<=54019;T++)q[T]=0;for(T=54021;T<=54032;T++)q[T]=0;for(T=54034;T<=54037;T++)q[T]=0;for(T=54042;T<=54046;T++)q[T]=0;for(T=54048;T<=54053;T++)q[T]=0;for(T=54074;T<=54080;T++)q[T]=0;for(T=54098;T<=54101;T++)q[T]=0;for(T=102001;T<=102040;T++)q[T]=0;for(T=102042;T<=102063;T++)q[T]=0;for(T=102065;T<=102067;T++)q[T]=0;for(T=102070;T<=102117;T++)q[T]=0;for(T=102122;T<=102216;T++)q[T]=0;for(T=102221;T<=102377;T++)q[T]=0;for(T=102382;T<=102388;T++)q[T]=0;for(T=102389;T<=102398;T++)q[T]=2;for(T=102399;T<=102444;T++)q[T]=0;for(T=102445;T<=102447;T++)q[T]=2;for(T=102448;T<=102458;T++)q[T]=0;for(T=102459;T<=102468;T++)q[T]=2;for(T=102469;T<=102499;T++)q[T]=0;for(T=102500;T<=102519;T++)q[T]=1;for(T=102520;T<=102524;T++)q[T]=0;for(T=102525;T<=102529;T++)q[T]=2;for(T=102530;T<=102588;T++)q[T]=0;for(T=102590;T<=102598;T++)q[T]=0;for(T=102601;T<=102603;T++)q[T]=0;for(T=102605;T<=102628;T++)q[T]=0;for(T=102629;T<=102646;T++)q[T]=2;for(T=102648;T<=102700;T++)q[T]=2;for(T=102701;T<=102703;T++)q[T]=0;for(T=102707;T<=102730;T++)q[T]=2;for(T=102733;T<=102758;T++)q[T]=2;for(T=102767;T<=102900;T++)q[T]=0;for(T=102901;T<=102933;T++)q[T]=2;for(T=102934;T<=102950;T++)q[T]=13;for(T=102951;T<=102955;T++)q[T]=0;for(T=102961;T<=102963;T++)q[T]=0;for(T=102965;T<=102969;T++)q[T]=0;for(T=102971;T<=102973;T++)q[T]=0;for(T=102975;T<=102989;T++)q[T]=0;for(T=102990;T<=102992;T++)q[T]=1;for(T=102997;T<=103002;T++)q[T]=0;for(T=103003;T<=103008;T++)q[T]=2;for(T=103009;T<=103011;T++)q[T]=0;for(T=103012;T<=103014;T++)q[T]=2;for(T=103019;T<=103021;T++)q[T]=0;for(T=103022;T<=103024;T++)q[T]=2;for(T=103029;T<=103031;T++)q[T]=0;for(T=103032;T<=103034;T++)q[T]=2;for(T=103065;T<=103068;T++)q[T]=0;for(T=103074;T<=103076;T++)q[T]=0;for(T=103077;T<=103079;T++)q[T]=1;for(T=103080;T<=103082;T++)q[T]=0;for(T=103083;T<=103085;T++)q[T]=2;for(T=103090;T<=103093;T++)q[T]=0;for(T=103097;T<=103099;T++)q[T]=0;for(T=103100;T<=103102;T++)q[T]=2;for(T=103107;T<=103109;T++)q[T]=0;for(T=103110;T<=103112;T++)q[T]=2;for(T=103113;T<=103116;T++)q[T]=0;for(T=103117;T<=103120;T++)q[T]=2;for(T=103153;T<=103157;T++)q[T]=0;for(T=103158;T<=103162;T++)q[T]=2;for(T=103163;T<=103165;T++)q[T]=0;for(T=103166;T<=103168;T++)q[T]=1;for(T=103169;T<=103171;T++)q[T]=2;for(T=103186;T<=103188;T++)q[T]=0;for(T=103189;T<=103191;T++)q[T]=2;for(T=103192;T<=103195;T++)q[T]=0;for(T=103196;T<=103199;T++)q[T]=2;for(T=103200;T<=103224;T++)q[T]=0;for(T=103225;T<=103227;T++)q[T]=1;for(T=103232;T<=103237;T++)q[T]=0;for(T=103238;T<=103243;T++)q[T]=2;for(T=103244;T<=103246;T++)q[T]=0;for(T=103247;T<=103249;T++)q[T]=2;for(T=103254;T<=103256;T++)q[T]=0;for(T=103257;T<=103259;T++)q[T]=2;for(T=103264;T<=103266;T++)q[T]=0;for(T=103267;T<=103269;T++)q[T]=2;for(T=103300;T<=103375;T++)q[T]=0;for(T=103381;T<=103383;T++)q[T]=0;for(T=103384;T<=103386;T++)q[T]=1;for(T=103387;T<=103389;T++)q[T]=0;for(T=103390;T<=103392;T++)q[T]=2;for(T=103397;T<=103399;T++)q[T]=0;for(T=103400;T<=103471;T++)q[T]=2;for(T=103476;T<=103478;T++)q[T]=0;for(T=103479;T<=103481;T++)q[T]=2;for(T=103486;T<=103488;T++)q[T]=0;for(T=103489;T<=103491;T++)q[T]=2;for(T=103492;T<=103495;T++)q[T]=0;for(T=103496;T<=103499;T++)q[T]=2;for(T=103528;T<=103543;T++)q[T]=0;for(T=103544;T<=103548;T++)q[T]=2;for(T=103549;T<=103551;T++)q[T]=0;for(T=103552;T<=103554;T++)q[T]=1;for(T=103555;T<=103557;T++)q[T]=2;for(T=103558;T<=103560;T++)q[T]=0;for(T=103571;T<=103573;T++)q[T]=0;for(T=103574;T<=103576;T++)q[T]=2;for(T=103577;T<=103580;T++)q[T]=0;for(T=103581;T<=103583;T++)q[T]=2;for(T=103595;T<=103694;T++)q[T]=0;for(T=103696;T<=103699;T++)q[T]=0;for(T=103700;T<=103793;T++)q[T]=2;for(T=103794;T<=103890;T++)q[T]=0;for(T=103891;T<=103896;T++)q[T]=2;for(T=103900;T<=103971;T++)q[T]=2;for(T=103972;T<=103977;T++)q[T]=0;for(T=112e3;T<=112101;T++)q[T]=0;const VB={102113:!0,102100:!0,3857:!0,3785:!0},GB={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},Y$='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Bm=[-20037508342788905e-9,20037508342788905e-9],Hm=[-20037508342787e-6,20037508342787e-6],iO={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Bm,origin:Hm,dx:1e-5},102100:{wkTemplate:Y$,valid:Bm,origin:Hm,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Bm,origin:Hm,dx:1e-5},3857:{wkTemplate:Y$,valid:Bm,origin:Hm,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ir(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||Zc(t)&&Zc(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function fo(t){return pr(t)&&t.wkid&&iO[t.wkid]||null}function rO(t){return!!pr(t)&&(t.wkid?q[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function qB(t){return!(TS(t)||ES(t))}function vy(t){return pr(t)&&t.wkid===4326}function M3e(t){return pr(t)&&t.wkid===gs.CGCS2000}function Zc(t){return pr(t)&&t.wkid!=null&&VB[t.wkid]===!0}function UB(t){return pr(t)&&t.wkid===32662}function $S(t){return t===gs.GCSMARS2000||t===gs.GCSMARS2000_SPHERE}function TS(t){return pr(t)&&t.wkid!=null&&$S(t.wkid)}function IS(t){return t===gs.GCSMOON2000}function ES(t){return pr(t)&&t.wkid!=null&&IS(t.wkid)}function BB(t){return pr(t)&&t.wkid!=null&&GB[t.wkid]===!0}function pr(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const HB={wkid:4326,wkt:na(iO[4326].wkTemplate,{Central_Meridian:"0.0"})},WB={wkid:102100,latestWkid:3857},JB={wkid:32662};function AS(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const KB=AS(oi),nO=AS(el),sO=AS(Hu),ZB={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${oi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function fl(t){return t!=null&&(TS(t)||ir(t,nO))?el:t!=null&&(ES(t)||ir(t,sO))?Hu:oi}function $3e(t){return $S(t)?el:IS(t)?Hu:oi}const CS=39.37,YB=oi.radius*Math.PI/200,oO=/UNIT\[([^\]]+)\]\]$/i,Dc=q,aO=/UNIT\[([^\]]+)\]/i,XB=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),QB=Ir()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Mo=t=>t*t,xl=t=>t*t*t,wy={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Mo(.001)},"square-centimeters":{inBaseUnits:Mo(.01)},"square-decimeters":{inBaseUnits:Mo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Mo(1e3)},"square-inches":{inBaseUnits:Mo(.0254)},"square-feet":{inBaseUnits:Mo(.3048)},"square-yards":{inBaseUnits:Mo(.9144)},"square-miles":{inBaseUnits:Mo(1609.344)},"square-us-feet":{inBaseUnits:Mo(1200/3937)},acres:{inBaseUnits:.0015625*Mo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*xl(.001)},"cubic-centimeters":{inBaseUnits:1e3*xl(.01)},"cubic-decimeters":{inBaseUnits:1e3*xl(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*xl(1e3)},"cubic-inches":{inBaseUnits:1e3*xl(.0254)},"cubic-feet":{inBaseUnits:1e3*xl(.3048)},"cubic-yards":{inBaseUnits:1e3*xl(.9144)},"cubic-miles":{inBaseUnits:1e3*xl(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},eH=(()=>{const t={};for(const e in wy)for(const i in wy[e].units)t[i]=e;return t})();function tH(t,e,i){return t*wy[i].units[e].inBaseUnits}function iH(t,e,i){return t/wy[i].units[e].inBaseUnits}function U9(t){const e=eH[t];if(!e)throw new Error("unknown type");return e}function X$(t,e=null){return e=e||U9(t),wy[e].baseUnit===t}function rs(t,e,i){if(e===i)return t;const r=U9(e);if(r!==U9(i))throw new Error("incompatible units");const s=X$(e,r)?t:tH(t,e,r);return X$(i,r)?s:iH(s,i,r)}function rH(t,e,i){return rs(t,e,"meters")/(i*Math.PI/180)}function lO(t){return QB.fromJSON(t.toLowerCase())||null}function t0(t){if(t!=null&&!qB(t))return 1;const e=yl(t);return e>1e5?1:e}function nH(t){return yl(t)>=fl(t).metersPerDegree?"meters":hO(t)}function yl(t,e=oi.metersPerDegree){return sH(t,!0)??e}function sH(t,e=!1){const i=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let s=null;if(i){if($S(i))return el.metersPerDegree;if(IS(i))return Hu.metersPerDegree;s=Dc.values[Dc[i]],!s&&e&&XB.has(i)&&(s=YB)}else r&&(pO(r)?s=Q$(oO.exec(r),s):cO(r)&&(s=Q$(aO.exec(r),s)));return s}function Q$(t,e){return t&&t[1]?uO(t[1]):e}function uO(t){return parseFloat(t.split(",")[1])}function hO(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let r=null;if(e)r=Dc.units[Dc[e]];else if(i){const s=pO(i)?oO:cO(i)?aO:null;if(s){const h=s.exec(i);h&&h[1]&&(r=aH(h[1]))}}return r!=null?lO(r):null}function cO(t){return/^GEOCCS/i.test(t)}function pO(t){return/^PROJCS/i.test(t)}const oH=1e-7;function aH(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!Dc.units.includes(i)){const r=uO(t);i=null;const s=Dc.values;for(let h=0;h<s.length;++h)if(Math.abs(r-s[h])<oH){i=Dc.units[h];break}}return i}const lH={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},uH={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},hH={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},cH=Ir()(lH),pH=Ir()(uH),T3e=Ir()(hH);var Eo;let jt=Eo=class extends ye{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Eo.WebMercator;if(t.wkid===4326)return Eo.WGS84}const e=new Eo;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return vy(this)}get isWebMercator(){return Zc(this)}get isGeographic(){return rO(this)}get isWrappable(){return BB(this)}get metersPerUnit(){return yl(this)}get unit(){return hO(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Eo.WGS84)return Eo.WGS84;if(this===Eo.WebMercator)return Eo.WebMercator;const t=new Eo;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=se(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return e==null||r?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===e&&s.referenceServiceName===i:s.id===e}return ir(this,t)}toJSON(t){return this.write(void 0,t)}};jt.GCS_NAD_1927=null,jt.WGS84=null,jt.WebMercator=null,jt.PlateCarree=null,v([x({readOnly:!0})],jt.prototype,"isWGS84",null),v([x({readOnly:!0})],jt.prototype,"isWebMercator",null),v([x({readOnly:!0})],jt.prototype,"isGeographic",null),v([x({readOnly:!0})],jt.prototype,"isWrappable",null),v([x({type:Bt,json:{write:!0}})],jt.prototype,"latestWkid",void 0),v([x({readOnly:!0})],jt.prototype,"metersPerUnit",null),v([x({readOnly:!0})],jt.prototype,"unit",null),v([x({type:Bt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],jt.prototype,"wkid",void 0),v([x({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],jt.prototype,"wkt",void 0),v([Ee("wkt"),Ee("web-scene","wkt")],jt.prototype,"writeWkt",null),v([x({type:Bt,json:{write:!0}})],jt.prototype,"vcsWkid",void 0),v([x({type:Bt,json:{write:!0}})],jt.prototype,"latestVcsWkid",void 0),v([x()],jt.prototype,"imageCoordinateSystem",void 0),jt=Eo=v([B("esri.geometry.SpatialReference")],jt),jt.prototype.toJSON.isDefaultToJSON=!0,jt.GCS_NAD_1927=new jt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),jt.WGS84=new jt(HB),jt.WebMercator=new jt(WB),jt.PlateCarree=new jt(JB),Object.freeze&&(Object.freeze(jt.GCS_NAD_1927),Object.freeze(jt.WGS84),Object.freeze(jt.WebMercator));const Ye=jt,dH="4.27";let kS=dH;kS=`4.27.0-next.${Uw}`;const fH={async request(t,e){var m,b;const{default:i}=await he(()=>Promise.resolve().then(()=>kH),void 0),r=t.options,s=r.responseType;r.signal=e==null?void 0:e.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((m=Zk(t.url))!=null&&m.after)?s:"array-buffer";const h=await i(t.url,r),f={data:h.data,httpStatus:h.httpStatus,ssl:h.ssl};switch((b=h.requestOptions)==null?void 0:b.responseType){case"native-request-init":return delete f.data.signal,f;case"blob":f.data=await f.data.arrayBuffer();break;case"json":f.data=new TextEncoder().encode(JSON.stringify(f.data)).buffer;break;case"text":f.data=new TextEncoder().encode(f.data).buffer}return{result:f,transferList:[f.data]}}};let $t;function I3e(t){$t=t}function E3e(t){const e=$t==null?void 0:$t.findCredential(t);return e!=null&&e.token?eO(t,"token",e.token):t}ue("host-webworker");const yH=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function dO(t){const e=po(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!yH.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function mH(t,e,i=!1,r){return new Promise((s,h)=>{if(yo(r))return void h(e8());let f=()=>{S(),h(new Error(`Unable to load ${e}`))},m=()=>{const I=t;S(),s(I)},b=()=>{if(!t)return;const I=t;S(),I.src="",h(e8())};const S=()=>{ue("esri-image-decode")||(t.removeEventListener("error",f),t.removeEventListener("load",m)),f=null,m=null,t=null,r!=null&&r.removeEventListener("abort",b),b=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",b),ue("esri-image-decode")?t.decode().then(m,f):(t.addEventListener("error",f),t.addEventListener("load",m))})}function e8(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}function gH(t){Tt.request.crossOriginNoCorsDomains||(Tt.request.crossOriginNoCorsDomains={});const e=Tt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[po(i)??""]=0:(e[po("http://"+i)??""]=0,e[po("https://"+i)??""]=0)}function vH(t){const e=Tt.request.crossOriginNoCorsDomains;if(e){let i=po(t);if(i)return i=i.toLowerCase(),!e0(i,vS())&&e[i]<Date.now()-36e5}return!1}async function wH(t){var s;const e=Tt.request.crossOriginNoCorsDomains,i=po(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=Jr(t);t=r.path,((s=r.query)==null?void 0:s.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function wi(t,e){var S;const i=dp(t),r=tb(t);r||i||(t=co(t));const s={url:t,requestOptions:{...e}};let h=Zk(t);if(h){const I=await IH(h,s);if(I!=null)return{data:I,getHeader:OS,httpStatus:200,requestOptions:s.requestOptions,url:s.url};h.after||h.error||(h=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"){if(ue("host-webworker")||ue("host-node"))throw uo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw uo("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),s);if(e.method==="head"){if(e.body)throw uo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw uo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await MH(),P2)return P2.execute(t,e);const f=new AbortController;Un(e,()=>f.abort());const m={controller:f,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:h,params:s,redoRequest:!1,useIdentity:no.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},b=await AH(m);return(S=h==null?void 0:h.after)==null||S.call(h,b),b}let P2;const no=Tt.request,fO="FormData"in globalThis,bH=[499,498,403,401],_H=["COM_0056","COM_0057","SB_0008"],xH=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],OS=()=>null,R2=Symbol();function SH(t){const e=po(t);e&&!wi._corsServers.includes(e)&&wi._corsServers.push(e)}function t8(t){const e=po(t);return!e||e.endsWith(".arcgis.com")||wi._corsServers.includes(e)||bS(e)}function uo(t,e,i,r){let s="Error";const h={url:i.url,requestOptions:i.requestOptions,getHeader:OS,ssl:!1};if(e instanceof ne)return e.details?(e.details=se(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=h,e;if(e){const f=r&&(S=>r.headers.get(S)),m=r&&r.status,b=e.message;b&&(s=b),f&&(h.getHeader=f),h.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||m||0,h.subCode=e.subcode,h.messageCode=e.messageCode,typeof e.details=="string"?h.messages=[e.details]:h.messages=e.details,h.raw=R2 in e?e[R2]:e}return Ts(e)?Xt():new ne(t,s,h)}async function MH(){ue("host-webworker")?P2||(P2=await he(()=>import("./request-3aa0e71b.js"),[])):wi._abortableFetch||(wi._abortableFetch=globalThis.fetch.bind(globalThis))}async function B9(){$t||await he(()=>import("./IdentityManager-53a44716.js"),[])}async function $H(t){var m;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let h=null,f=null;if(fO&&"HTMLFormElement"in globalThis&&(s instanceof FormData?h=s:s instanceof HTMLFormElement&&(h=new FormData(s))),typeof s=="string"&&(f=s),t.fetchOptions={cache:i.cacheBust&&!wi._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:no.priority,redirect:"follow",signal:r},(h||f)&&(t.fetchOptions.body=h||f),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(m=i.query)!=null&&m.token||h!=null&&h.get("token")),!t.hasToken&&Tt.apiKey&&dO(e)&&(i.query||(i.query={}),i.query.token=Tt.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!yO(e)&&!yo(r)){let b;i.authMode==="immediate"?(await B9(),b=await $t.getCredential(e,{signal:r}),t.credential=b):i.authMode==="no-prompt"?(await B9(),b=await $t.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=b):$t&&(b=$t.findCredential(e)),b&&(t.credentialToken=b.token,t.useSSL=!!b.ssl)}}function yO(t){return xH.some(e=>e.test(t))}async function TH(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},s=tb(e)||dp(e),h=i.responseType||"json",f=s?0:i.timeout!=null?i.timeout:no.timeout;let m=!1;if(!s){t.useSSL&&(e=SS(e)),i.cacheBust&&r.cache==="default"&&(e=eO(e,"request.preventCache",Date.now()));let O={...i.query};t.credentialToken&&(O.token=t.credentialToken);let R=my(O);ue("esri-url-encodes-apostrophe")&&(R=R.replace(/'/g,"%27"));const L=e.length+1+R.length;let z;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>no.maxUrlLength;const j=i.useProxy||!!eb(e);if(j){const H=SB(e);z=H.path,!m&&z.length+1+L>no.maxUrlLength&&(m=!0),H.query&&(O={...H.query,...O})}if(r.method==="HEAD"&&(m||j)){if(m)throw L>no.maxUrlLength?uo("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):uo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(j)throw uo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(m?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=$3(e,O):(r.body=my(O),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=$3(e,O),j&&(t.useProxy=!0,e=`${z}?${e}`),O.token&&fO&&r.body instanceof FormData&&!pB(e)&&r.body.set("token",O.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!e0(e,vS())){if(bS(e))t.withCredentials=!0;else if($t){const H=$t.findServerInfo(e);H&&H.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",vH(e)&&await wH(m?$3(e,O):e))}let b,S,I=0,A=!1;f>0&&(I=setTimeout(()=>{A=!0,t.controller.abort()},f));try{if(i.responseType==="native-request-init")S=r,S.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||m||EH(i.headers)||!s&&!t.useProxy&&no.proxyUrl&&!t8(e)){if(b=await wi._abortableFetch(e,r),t.useProxy||SH(e),i.responseType==="native")S=b;else if(r.method!=="HEAD")if(b.ok){switch(h){case"array-buffer":S=await b.arrayBuffer();break;case"blob":case"image":S=await b.blob();break;default:S=await b.text()}if(I&&(clearTimeout(I),I=0),h==="json"||h==="xml"||h==="document")if(S)switch(h){case"json":S=JSON.parse(S);break;case"xml":S=i8(S,"application/xml");break;case"document":S=i8(S,"text/html")}else S=null;if(S){if(h==="array-buffer"||h==="blob"){const O=b.headers.get("Content-Type");if(O&&/application\/json|text\/plain/i.test(O)&&S[h==="blob"?"size":"byteLength"]<=750)try{const R=await new Response(S).json();R.error&&(S=R)}catch{}}h==="image"&&S instanceof Blob&&(S=await r8(URL.createObjectURL(S),t,!0))}}else S=await b.text()}else S=await r8(e,t)}catch(O){if(O.name==="AbortError")throw A?new Error("Timeout exceeded"):Xt("Request canceled");if(!(!b&&O instanceof TypeError&&no.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||t8(e))throw O;t.redoRequest=!0,MB({proxyUrl:no.proxyUrl,urlPrefix:po(e)??""})}finally{I&&clearTimeout(I)}return[b,S]}async function IH(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=uo("request:interceptor",s,e)}if((r instanceof Error||r instanceof ne)&&(i=uo("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function EH(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function i8(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function AH(t){var h;let e,i;await $H(t);try{do[e,i]=await TH(t);while(!await CH(t,e,i))}catch(f){const m=uo("request:server",f,t.params,e);throw m.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(m),m}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((h=i.user)!=null&&h.username)&&!bS(r)){const f=po(r,!0);f&&no.trustedServers.push(f)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&gH(i.authorizedCrossOriginNoCorsDomains)}const s=t.credential;if(s&&$t){const f=$t.findServerInfo(s.server);let m=f&&f.owningSystemUrl;if(m){m=m.replace(/\/?$/,"/sharing");const b=$t.findCredential(m,s.userId);b&&$t._getIdenticalSvcIdx(m,b)===-1&&b.resources.unshift(m)}}return{data:i,getHeader:e?f=>e==null?void 0:e.headers.get(f):OS,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function CH(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,h;if(!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[R2]=i,s;i&&(i.error?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[R2]=i,s.details=i.messages));let f,m=null;s&&(h=Number(s.code),m=s.hasOwnProperty("subcode")?Number(s.subcode):null,f=s.messageCode,f=f&&f.toUpperCase());const b=r.authMode;if(h===403&&(m===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(b!=="no-prompt"||h===498)&&h!==void 0&&bH.includes(h)&&!yO(t.params.url)&&(h!==403||f&&!_H.includes(f)&&(m==null||m===2&&t.credentialToken))){await B9();try{const S=await $t.getCredential(t.params.url,{error:uo("request:server",s,t.params),prompt:b!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=S,t.credentialToken=S.token,t.useSSL=t.useSSL||S.ssl,!1}catch(S){if(b==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=S}}if(s)throw s;return!0}function r8(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=no.priority,s.src=t,mH(s,t,i,r)}wi._abortableFetch=null,wi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const kH=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"}));function Me(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(h,f)=>{const m=h.constructor.prototype;r.forEach(b=>{const S=bk(h,b,s);S.read&&typeof S.read=="object"||(S.read={}),S.read.reader=m[f],i&&(S.read.source=(S.read.source||[]).concat(i))})}}let Ao=class extends ye{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ye.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Ye)return e;if(e!=null){const r=new Ye;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};v([x()],Ao.prototype,"type",void 0),v([x({readOnly:!0})],Ao.prototype,"cache",null),v([x({readOnly:!0})],Ao.prototype,"extent",null),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ao.prototype,"hasM",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ao.prototype,"hasZ",void 0),v([x({type:Ye,json:{write:!0},value:Ye.WGS84})],Ao.prototype,"spatialReference",void 0),v([Me("spatialReference")],Ao.prototype,"readSpatialReference",null),Ao=v([B("esri.geometry.Geometry")],Ao);const ml=Ao,OH=Object.prototype.toString;function PH(t){const e="__accessorMetadata__"in t?ei(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return RH.apply(this,i)}}function RH(t,e,i,r){qw(t,e).cast=r}function FH(t){return(e,i)=>{qw(e,t).cast=e[i]}}function vt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&OH.call(t[0])==="[object Function]"?PH(t[0]):t.length===1&&typeof t[0]=="string"?FH(t[0]):void 0}function NH(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}const LH=57.29577951308232,jH=.017453292519943;function n8(t){return t*LH}function s8(t){return t*jH}function C3e(t){return Math.PI/2-2*Math.atan(Math.exp(-t/oi.radius))}function H9(t){return t.wkid!=null||t.wkt!=null}const T3=[0,0];function F2(t,e,i,r,s){const h=t,f=s;if(f.spatialReference=i,"x"in h&&"x"in f)[f.x,f.y]=e(h.x,h.y,T3,r);else if("xmin"in h&&"xmin"in f)[f.xmin,f.ymin]=e(h.xmin,h.ymin,T3,r),[f.xmax,f.ymax]=e(h.xmax,h.ymax,T3,r);else if("paths"in h&&"paths"in f||"rings"in h&&"rings"in f){const m="paths"in h?h.paths:h.rings,b=[];let S;for(let I=0;I<m.length;I++){const A=m[I];S=[],b.push(S);for(let O=0;O<A.length;O++)S.push(e(A[O][0],A[O][1],[0,0],r)),A[O].length>2&&S[O].push(A[O][2]),A[O].length>3&&S[O].push(A[O][3])}"paths"in f?f.paths=b:f.rings=b}else if("points"in h&&"points"in f){const m=h.points,b=[];for(let S=0;S<m.length;S++)b[S]=e(m[S][0],m[S][1],[0,0],r),m[S].length>2&&b[S].push(m[S][2]),m[S].length>3&&b[S].push(m[S][3]);f.points=b}return s}function Du(t,e){const i=t&&(H9(t)?t:t.spatialReference),r=e&&(H9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!ir(r,i)||Zc(r)&&vy(i)||Zc(i)&&vy(r))}function E0(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(H9(e)?e:e.spatialReference);return Du(i,r)?ir(i,r)?se(t):Zc(r)?F2(t,Td,Ye.WebMercator,!1,se(t)):vy(r)?F2(t,L1,Ye.WGS84,!1,se(t)):null:null}function Td(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=s8(e);return i[0]=s8(t)*oi.radius,i[1]=oi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function L1(t,e,i=[0,0],r=!1){const s=n8(t/oi.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=n8(Math.PI/2-2*Math.atan(Math.exp(-e/oi.radius))),i}function ea(t,e=!1,i=se(t)){return F2(t,Td,Ye.WebMercator,e,i)}function Id(t,e=!1,i=se(t)){return F2(t,L1,Ye.WGS84,e,i)}var ov;const rf=[0,0];function o8(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Xr=ov=class extends ml{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let h;if(Array.isArray(t))h=t,s=e,t=h[0],e=h[1],i=h[2],r=h[3];else if(t&&typeof t=="object"){if(h=t,t=h.x!=null?h.x:h.longitude,e=h.y!=null?h.y:h.latitude,i=h.z,r=h.m,(s=h.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Ye(s)),h.longitude!=null||h.latitude!=null){if(h.longitude==null)fe.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(h.latitude==null)fe.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!h.declaredClass&&s&&s.isWebMercator){const m=Td(h.longitude,h.latitude,rf);t=m[0],e=m[1]}}}else o8(i)?(s=i,i=null):o8(r)&&(s=r,r=null);const f={x:t,y:e};return f.x==null&&f.y!=null?fe.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):f.y==null&&f.x!=null&&fe.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(f.spatialReference=s),i!=null&&(f.z=i),r!=null&&(f.m=r),f}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return L1(e,i,rf)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Td(i,t,rf)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return L1(t,e,rf)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Td(t,e,rf)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new ov;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return ov.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:s,spatialReference:h}=this,{z:f,m}=t;let{x:b,y:S,spatialReference:I}=t;if(!h.equals(I))if(h.isWebMercator&&I.isWGS84)[b,S]=Td(b,S),I=h;else{if(!h.isWGS84||!I.isWebMercator)return!1;[b,S]=L1(b,S),I=h}return e===b&&i===S&&r===f&&s===m&&h.wkid===I.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=fo(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let h;return e>r?(h=Math.ceil(Math.abs(e-r)/s),e-=h*s):e<i&&(h=Math.ceil(Math.abs(e-i)/s),e+=h*s),this._set("x",e),this}distance(t){return NH(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};v([x({readOnly:!0})],Xr.prototype,"cache",null),v([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasM",null),v([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasZ",null),v([x({type:Number})],Xr.prototype,"latitude",null),v([x({type:Number})],Xr.prototype,"longitude",null),v([x({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),vt(t=>isNaN(t)?t:fs(t))],Xr.prototype,"x",void 0),v([Ee("x")],Xr.prototype,"writeX",null),v([Me("x")],Xr.prototype,"readX",null),v([x({type:Number,json:{write:!0}})],Xr.prototype,"y",void 0),v([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xr.prototype,"z",void 0),v([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xr.prototype,"m",void 0),Xr=ov=v([B("esri.geometry.Point")],Xr),Xr.prototype.toJSON.isDefaultToJSON=!0;const ke=Xr,I3=[0,0];function ib(t,e){return e!=null&&rn(t,e.x,e.y,e.z)}function k3e(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!i0(t,i))return!1;return!0}function DH(t,e){const{xmin:i,ymin:r,zmin:s,xmax:h,ymax:f,zmax:m}=e;return t.hasZ&&e.hasZ?rn(t,i,r,s)&&rn(t,i,f,s)&&rn(t,h,f,s)&&rn(t,h,r,s)&&rn(t,i,r,m)&&rn(t,i,f,m)&&rn(t,h,f,m)&&rn(t,h,r,m):rn(t,i,r)&&rn(t,i,f)&&rn(t,h,f)&&rn(t,h,r)}function i0(t,e){return rn(t,e[0],e[1])}function zH(t,e){return rn(t,e[0],e[1],e[2])}function rn(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function mO(t,e){return I3[1]=e.y,I3[0]=e.x,VH(t,I3)}function VH(t,e){return gO(t.rings,e)}function gO(t,e){if(!t)return!1;if(GH(t))return a8(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=a8(i,t[r],e);return i}function GH(t){return!Array.isArray(t[0][0])}function a8(t,e,i){const[r,s]=i;let h=t,f=0;for(let m=0,b=e.length;m<b;m++){f++,f===b&&(f=0);const[S,I]=e[m],[A,O]=e[f];(I<s&&O>=s||O<s&&I>=s)&&S+(s-I)/(O-I)*(A-S)<r&&(h=!h)}return h}function qH(t,e){return ib(t,e)}function UH(t,e){const i=t.hasZ&&e.hasZ;let r,s,h;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(h=e.zmin,t.zmax<h)return!1}else if(h=t.zmin,e.zmax<h)return!1}return!0}function BH(t,e){const{points:i,hasZ:r}=e,s=r?zH:i0;for(const h of i)if(s(t,h))return!0;return!1}const Yc=[0,0],Xc=[0,0],Qc=[0,0],ep=[0,0],HH=[Yc,Xc,Qc,ep],vO=[[Qc,Yc],[Yc,Xc],[Xc,ep],[ep,Qc]];function WH(t,e){return JH(t,e.rings)}function JH(t,e){Yc[0]=t.xmin,Yc[1]=t.ymax,Xc[0]=t.xmax,Xc[1]=t.ymax,Qc[0]=t.xmin,Qc[1]=t.ymin,ep[0]=t.xmax,ep[1]=t.ymin;for(const i of HH)if(gO(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(i0(t,r))return!0;for(let s=1;s<i.length;s++){const h=i[s];if(i0(t,h)||wO(r,h,vO))return!0;r=h}}return!1}function KH(t,e){Yc[0]=t.xmin,Yc[1]=t.ymax,Xc[0]=t.xmax,Xc[1]=t.ymax,Qc[0]=t.xmin,Qc[1]=t.ymin,ep[0]=t.xmax,ep[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(i0(t,s))return!0;for(let h=1;h<r.length;h++){const f=r[h];if(i0(t,f)||wO(s,f,vO))return!0;s=f}}return!1}const nr=[0,0];function ZH(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const h=i[s],f=i[s+1];for(let m=e+1;m<t.length;m++)for(let b=0;b<t[m].length-1;b++){const S=t[m][b],I=t[m][b+1];if(W9(h,f,S,I,nr)&&!(nr[0]===h[0]&&nr[1]===h[1]||nr[0]===S[0]&&nr[1]===S[1]||nr[0]===f[0]&&nr[1]===f[1]||nr[0]===I[0]&&nr[1]===I[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let h=r-1;s===0&&(h=r-2);const f=i[s],m=i[s+1];for(let b=s+2;b<h;b++){const S=i[b],I=i[b+1];if(W9(f,m,S,I,nr)&&!(nr[0]===f[0]&&nr[1]===f[1]||nr[0]===S[0]&&nr[1]===S[1]||nr[0]===m[0]&&nr[1]===m[1]||nr[0]===I[0]&&nr[1]===I[1]))return!0}}}return!1}function wO(t,e,i){for(let r=0;r<i.length;r++)if(W9(t,e,i[r][0],i[r][1]))return!0;return!1}function W9(t,e,i,r,s){const[h,f]=t,[m,b]=e,[S,I]=i,[A,O]=r,R=A-S,L=h-S,z=m-h,j=O-I,H=f-I,Y=b-f,X=j*z-R*Y;if(X===0)return!1;const te=(R*H-j*L)/X,oe=(z*H-Y*L)/X;return te>=0&&te<=1&&oe>=0&&oe<=1&&(s&&(s[0]=h+te*(m-h),s[1]=f+te*(b-f)),!0)}function YH(t){switch(t){case"esriGeometryEnvelope":case"extent":return UH;case"esriGeometryMultipoint":case"multipoint":return BH;case"esriGeometryPoint":case"point":return qH;case"esriGeometryPolygon":case"polygon":return WH;case"esriGeometryPolyline":case"polyline":return KH}}var ns;function XH(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Sl(t,e,i){return e==null?i:i==null?e:t(e,i)}let Wi=ns=class extends ml{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return XH(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Ye.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??Ye.WGS84}}static fromBounds(t,e){return new ns({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new ns({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ke({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new ns;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Du(e,i)&&(t=e.isWebMercator?ea(t):Id(t,!0)),t.type==="point"?ib(this,t):t.type==="extent"&&DH(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Du(e,i)&&(t=e.isWebMercator?ea(t):Id(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!ir(e,i)&&Du(e,i)&&(t=e.isWebMercator?ea(t):Id(t,!0)),YH(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Sl(Math.min,this.zmin,t.zmin),this.zmax=Sl(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Sl(Math.min,this.mmin,t.mmin),this.mmax=Sl(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Sl(Math.max,this.zmin,t.zmin),this.zmax=Sl(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Sl(Math.max,this.mmin,t.mmin),this.mmax=Sl(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=fo(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Id(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new Ye(na((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,h=this.xmax;return s>=i&&s<=r&&h>=i&&h<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??fo(r);if(s==null)return this;const h=this._getParts(s).map(b=>b.extent);if(h.length<2)return h[0]||this;if(h.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return h;let f=!0,m=!0;return h.forEach(b=>{b.hasZ||(f=!1),b.hasM||(m=!1)}),{rings:h.map(b=>{const S=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(f){const I=(b.zmax-b.zmin)/2;for(let A=0;A<S.length;A++)S[A].push(I)}if(m){const I=(b.mmax-b.mmin)/2;for(let A=0;A<S.length;A++)S[A].push(I)}return S}),hasZ:f,hasM:m,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:h,spatialReference:f}=this,m=this.width,b=this.xmin,S=this.xmax;let I;t=t||fo(f);const[A,O]=t.valid;I=this._normalizeX(this.xmin,t);const R=I.x,L=I.frameId;I=this._normalizeX(this.xmax,t);const z=I.x,j=I.frameId,H=R===z&&m>0;if(m>2*O){const Y=new ns(b<S?R:z,s,O,h,f),X=new ns(A,s,b<S?z:R,h,f),te=new ns(0,s,O,h,f),oe=new ns(A,s,0,h,f),le=[],ve=[];Y.contains(te)&&le.push(L),Y.contains(oe)&&ve.push(L),X.contains(te)&&le.push(j),X.contains(oe)&&ve.push(j);for(let xe=L+1;xe<j;xe++)le.push(xe),ve.push(xe);e.push({extent:Y,frameIds:[L]},{extent:X,frameIds:[j]},{extent:te,frameIds:le},{extent:oe,frameIds:ve})}else R>z||H?e.push({extent:new ns(R,s,O,h,f),frameIds:[L]},{extent:new ns(A,s,z,h,f),frameIds:[j]}):e.push({extent:new ns(R,s,z,h,f),frameIds:[L]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let h=0;h<e.length;h++)e[h].extent.set(s)}return e}_normalizeX(t,e){const[i,r]=e.valid,s=2*r;let h,f=0;return t>r?(h=Math.ceil(Math.abs(t-r)/s),t-=h*s,f=h):t<i&&(h=Math.ceil(Math.abs(t-i)/s),t+=h*s,f=-h),{x:t,frameId:f}}};v([x({readOnly:!0})],Wi.prototype,"cache",null),v([x({readOnly:!0})],Wi.prototype,"center",null),v([x({readOnly:!0})],Wi.prototype,"extent",null),v([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Wi.prototype,"hasM",null),v([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Wi.prototype,"hasZ",null),v([x({readOnly:!0})],Wi.prototype,"height",null),v([x({readOnly:!0})],Wi.prototype,"width",null),v([x({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Wi.prototype,"xmin",void 0),v([x({type:Number,json:{write:!0}})],Wi.prototype,"ymin",void 0),v([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wi.prototype,"mmin",void 0),v([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wi.prototype,"zmin",void 0),v([x({type:Number,json:{write:!0}})],Wi.prototype,"xmax",void 0),v([x({type:Number,json:{write:!0}})],Wi.prototype,"ymax",void 0),v([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wi.prototype,"mmax",void 0),v([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wi.prototype,"zmax",void 0),Wi=ns=v([B("esri.geometry.Extent")],Wi),Wi.prototype.toJSON.isDefaultToJSON=!0;const At=Wi;let j1;var xC,SC;const QH=((xC=globalThis.esriConfig)==null?void 0:xC.locale)??((SC=globalThis.dojoConfig)==null?void 0:SC.locale);function bO(){var t;return QH??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function _s(){return j1===void 0&&(j1=bO()),j1}const D1=[];function _O(t){return D1.push(t),{remove(){D1.splice(D1.indexOf(t),1)}}}const J9=[];function PS(t){return J9.push(t),{remove(){D1.splice(J9.indexOf(t),1)}}}function eW(){const t=bO();j1!==t&&(j1=t,[...J9].forEach(e=>{e.call(null,t)}),[...D1].forEach(e=>{e.call(null,t)}))}var MC;(MC=globalThis.addEventListener)==null||MC.call(globalThis,"languagechange",eW);var K9;const tW=new tt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ss=K9=class extends Oe{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new K9({categories:this.categories?se(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(f=>Array.isArray(f)?JSON.stringify(f):f));let r="";if(this.extent){const f=E0(this.extent,Ye.WGS84);f!=null&&(r=`${f.xmin},${f.ymin},${f.xmax},${f.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const h={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(h.sortField=this.sortField.split(",").map(f=>tW.toJSON(f.trim())).join(","),h.sortOrder=this.sortOrder),{query:{...e,...h}}}};v([x()],ss.prototype,"categories",void 0),v([x()],ss.prototype,"disableExtraQuery",void 0),v([x({type:At})],ss.prototype,"extent",void 0),v([x()],ss.prototype,"filter",void 0),v([x()],ss.prototype,"num",void 0),v([x()],ss.prototype,"query",void 0),v([x()],ss.prototype,"sortField",void 0),v([x()],ss.prototype,"sortOrder",null),v([x()],ss.prototype,"start",void 0),ss=K9=v([B("esri.portal.PortalQueryParams")],ss);const Za=ss;let Th=class extends Oe{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};v([x()],Th.prototype,"nextQueryParams",void 0),v([x()],Th.prototype,"queryParams",void 0),v([x()],Th.prototype,"results",void 0),v([x()],Th.prototype,"total",void 0),Th=v([B("esri.portal.PortalQueryResult")],Th);const iW=Th;let Ta=class extends ye{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ne("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};v([x({type:Date})],Ta.prototype,"created",void 0),v([x()],Ta.prototype,"id",void 0),v([x()],Ta.prototype,"portal",void 0),v([x()],Ta.prototype,"title",void 0),v([x({readOnly:!0})],Ta.prototype,"url",null),v([x()],Ta.prototype,"username",void 0),Ta=v([B("esri.portal.PortalFolder")],Ta);const rW=Ta;let Ji=class extends ye{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Gn(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return Gn(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=ei(Za,e);const s=Gn(this.portal);return parseFloat(s.currentVersion)>5?(r=r||new Za,s.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Za,r.query="group:"+this.id+(r.query?" "+r.query:""),s.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=Gn(this.portal);return r.fetchSelf(r.authMode,!0,i).then(s=>{const h=s.contentCategorySetsGroupQuery;if(h){const f=new Za;return f.disableExtraQuery=!0,f.num=1,f.query=h,r.queryGroups(f,i)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const h=s.results[0],f=new Za;return f.num=1,f.query=`typekeywords:"${e}"`,h.queryItems(f,i)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",i).then(h=>{const f=h&&h.categorySchema;return f&&f.length?f:[]}):[])}};v([x()],Ji.prototype,"access",void 0),v([x({type:Date})],Ji.prototype,"created",void 0),v([x()],Ji.prototype,"description",void 0),v([x()],Ji.prototype,"id",void 0),v([x()],Ji.prototype,"isInvitationOnly",void 0),v([x({type:Date})],Ji.prototype,"modified",void 0),v([x()],Ji.prototype,"owner",void 0),v([x()],Ji.prototype,"portal",void 0),v([x()],Ji.prototype,"snippet",void 0),v([x()],Ji.prototype,"sortField",void 0),v([x()],Ji.prototype,"sortOrder",void 0),v([x()],Ji.prototype,"tags",void 0),v([x()],Ji.prototype,"thumbnail",void 0),v([x({readOnly:!0})],Ji.prototype,"thumbnailUrl",null),v([x()],Ji.prototype,"title",void 0),v([x({readOnly:!0})],Ji.prototype,"url",null),Ji=v([B("esri.portal.PortalGroup")],Ji);const Z9=Ji,nW=Object.freeze(Object.defineProperty({__proto__:null,default:Z9},Symbol.toStringTag,{value:"Module"}));var Y9;let ri=Y9=class extends ye{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let h=this.userContentUrl;return r&&(h+="/"+(typeof r=="string"?r:r.id)),this.portal.request(h+"/addItem",s).then(f=>(e.id=f.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const s=rW.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Z9.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),he(()=>Promise.resolve().then(()=>xO),void 0).then(({default:s})=>{i=s;const h={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:h})}).then(s=>{let h;return s&&s.items?(h=s.items.map(f=>{const m=i.fromJSON(f);return m.portal=this.portal,m}),Promise.all(h.map(f=>f.load())).catch(f=>f).then(()=>({items:h,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Z9({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ne("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Y9;return e.sourceJSON=t,e.read(t),e}};v([x()],ri.prototype,"access",void 0),v([x({type:Date})],ri.prototype,"created",void 0),v([x()],ri.prototype,"culture",void 0),v([x()],ri.prototype,"description",void 0),v([x()],ri.prototype,"email",void 0),v([x()],ri.prototype,"favGroupId",void 0),v([x()],ri.prototype,"fullName",void 0),v([x({type:Date})],ri.prototype,"modified",void 0),v([x()],ri.prototype,"orgId",void 0),v([x()],ri.prototype,"portal",void 0),v([x()],ri.prototype,"preferredView",void 0),v([x()],ri.prototype,"privileges",void 0),v([x()],ri.prototype,"region",void 0),v([x()],ri.prototype,"role",void 0),v([x()],ri.prototype,"roleId",void 0),v([x()],ri.prototype,"sourceJSON",void 0),v([x()],ri.prototype,"thumbnail",void 0),v([x({readOnly:!0})],ri.prototype,"thumbnailUrl",null),v([x()],ri.prototype,"units",void 0),v([x({readOnly:!0})],ri.prototype,"userContentUrl",null),v([x({readOnly:!0})],ri.prototype,"url",null),v([x()],ri.prototype,"username",void 0),v([x()],ri.prototype,"userType",void 0),ri=Y9=v([B("esri.portal.PortalUser")],ri);const RS=ri,sW=Object.freeze(Object.defineProperty({__proto__:null,default:RS},Symbol.toStringTag,{value:"Module"}));var Pn;let E3;const l8={PortalGroup:()=>he(()=>Promise.resolve().then(()=>nW),void 0),PortalItem:()=>he(()=>Promise.resolve().then(()=>xO),void 0),PortalUser:()=>he(()=>Promise.resolve().then(()=>sW),void 0)};let $e=Pn=class extends em(ol){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Tt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null,this._finalizationToken={}}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){u8.unregister(this._finalizationToken),this.defaultBasemap=Ut(this.defaultBasemap),this.defaultDevBasemap=Ut(this.defaultDevBasemap),this.defaultVectorBasemap=Ut(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=$i(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Tt.request.trustedServers.includes(e)||Tt.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=RS.fromJSON(t),e.portal=this),e}load(t){const e=he(()=>Promise.resolve().then(()=>IW),void 0).then(({default:i})=>{Oi(t),E3=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if($t){const s=$t;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Pn.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",oW(new WeakRef(this))),u8.register(this,this._esriIdCredentialCreateHandle,this._finalizationToken))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await he(()=>import("./ElevationLayer-d47db0a2.js"),["assets/ElevationLayer-d47db0a2.js","assets/ArcGISCachedService-c9eb55ad.js","assets/TilemapCache-6a5dc5fa.js"])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}fetchBasemaps(t,e){const i=new Za;return i.query=t||(Tt.apiKey&&dO(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,e).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,e)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(h=>h.type==="Web Map").map(h=>new E3({portalItem:h})):[],s})}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):yo(t)?Promise.reject(Xt()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Za;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const s of e)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(s=>s.results)}return yo(t)?Promise.reject(Xt()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||_s();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||_s();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return Pn._default&&!Pn._default.destroyed||(Pn._default=new Pn),Pn._default}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",s={authMode:t,query:{culture:_s().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this.request(r,s)}queryPortal(t,e,i,r){const s=ei(Za,e),h=f=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...r}).then(m=>{const b=s.clone();return b.start=m.nextStart,new iW({nextQueryParams:b,queryParams:s,total:m.total,results:Pn._resultsToTypedArray(f,{portal:this},m,r)})}).then(m=>Promise.all(m.results.map(b=>typeof b.when=="function"?b.when():m)).then(()=>m,b=>(Zo(b),m)));return i&&l8[i]?l8[i]().then(({default:f})=>(Oi(r),h(f))):h()}signIn(){if(this.authMode===Pn.AUTH_MODE_ANONYMOUS)return Promise.reject(new ne("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return $t?$t.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const s=Pn._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(h=>typeof h.when=="function"?h.when():r)).then(()=>s,()=>s)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===Pn.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:h=!1,method:f="auto",responseType:m="json",signal:b}=e,S={authMode:r,body:s,cacheBust:h,method:f,query:i,responseType:m,timeout:0,signal:b};return wi(this._normalizeSSL(t),S).then(I=>I.data)}toJSON(){throw new ne("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Pn({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new ne("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=E3.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let s=[];if(i){const h=r!=null?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(s=s.map(f=>{const m=Object.assign(t?t.fromJSON(f):f,e);return typeof m.load=="function"&&m.load(h),m}))}else s=[];return s}};$e.AUTH_MODE_ANONYMOUS="anonymous",$e.AUTH_MODE_AUTO="auto",$e.AUTH_MODE_IMMEDIATE="immediate",v([x()],$e.prototype,"access",void 0),v([x()],$e.prototype,"allSSL",void 0),v([x()],$e.prototype,"authMode",void 0),v([x()],$e.prototype,"authorizedCrossOriginDomains",void 0),v([Me("authorizedCrossOriginDomains")],$e.prototype,"readAuthorizedCrossOriginDomains",null),v([x()],$e.prototype,"basemapGalleryGroupQuery",void 0),v([x()],$e.prototype,"bingKey",void 0),v([x()],$e.prototype,"canListApps",void 0),v([x()],$e.prototype,"canListData",void 0),v([x()],$e.prototype,"canListPreProvisionedItems",void 0),v([x()],$e.prototype,"canProvisionDirectPurchase",void 0),v([x()],$e.prototype,"canSearchPublic",void 0),v([x()],$e.prototype,"canShareBingPublic",void 0),v([x()],$e.prototype,"canSharePublic",void 0),v([x()],$e.prototype,"canSignInArcGIS",void 0),v([x()],$e.prototype,"canSignInIDP",void 0),v([x()],$e.prototype,"colorSetsGroupQuery",void 0),v([x()],$e.prototype,"commentsEnabled",void 0),v([x({type:Date})],$e.prototype,"created",void 0),v([x()],$e.prototype,"credential",void 0),v([x()],$e.prototype,"culture",void 0),v([x()],$e.prototype,"currentVersion",void 0),v([x()],$e.prototype,"customBaseUrl",void 0),v([x()],$e.prototype,"defaultBasemap",void 0),v([Me("defaultBasemap")],$e.prototype,"readDefaultBasemap",null),v([x()],$e.prototype,"defaultDevBasemap",void 0),v([Me("defaultDevBasemap")],$e.prototype,"readDefaultDevBasemap",null),v([x({type:At})],$e.prototype,"defaultExtent",void 0),v([x()],$e.prototype,"defaultVectorBasemap",void 0),v([Me("defaultVectorBasemap")],$e.prototype,"readDefaultVectorBasemap",null),v([x()],$e.prototype,"description",void 0),v([x()],$e.prototype,"devBasemapGalleryGroupQuery",void 0),v([x()],$e.prototype,"eueiEnabled",void 0),v([x({readOnly:!0})],$e.prototype,"extraQuery",null),v([x()],$e.prototype,"featuredGroups",void 0),v([x()],$e.prototype,"featuredItemsGroupQuery",void 0),v([x()],$e.prototype,"galleryTemplatesGroupQuery",void 0),v([x()],$e.prototype,"livingAtlasGroupQuery",void 0),v([x()],$e.prototype,"hasCategorySchema",void 0),v([x()],$e.prototype,"helpBase",void 0),v([x()],$e.prototype,"helperServices",void 0),v([x()],$e.prototype,"helpMap",void 0),v([x()],$e.prototype,"homePageFeaturedContent",void 0),v([x()],$e.prototype,"homePageFeaturedContentCount",void 0),v([x()],$e.prototype,"httpPort",void 0),v([x()],$e.prototype,"httpsPort",void 0),v([x()],$e.prototype,"id",void 0),v([x()],$e.prototype,"ipCntryCode",void 0),v([x({readOnly:!0})],$e.prototype,"isOrganization",null),v([x()],$e.prototype,"isPortal",void 0),v([x()],$e.prototype,"isReadOnly",void 0),v([x({readOnly:!0})],$e.prototype,"itemPageUrl",null),v([x()],$e.prototype,"layerTemplatesGroupQuery",void 0),v([x()],$e.prototype,"maxTokenExpirationMinutes",void 0),v([x({type:Date})],$e.prototype,"modified",void 0),v([x()],$e.prototype,"name",void 0),v([x()],$e.prototype,"portalHostname",void 0),v([x()],$e.prototype,"portalMode",void 0),v([x()],$e.prototype,"portalProperties",void 0),v([x()],$e.prototype,"region",void 0),v([x({readOnly:!0})],$e.prototype,"restUrl",null),v([x()],$e.prototype,"rotatorPanels",void 0),v([x()],$e.prototype,"showHomePageDescription",void 0),v([x()],$e.prototype,"sourceJSON",void 0),v([x()],$e.prototype,"staticImagesUrl",void 0),v([x({json:{name:"2DStylesGroupQuery"}})],$e.prototype,"stylesGroupQuery2d",void 0),v([x({json:{name:"stylesGroupQuery"}})],$e.prototype,"stylesGroupQuery3d",void 0),v([x()],$e.prototype,"supportsHostedServices",void 0),v([x()],$e.prototype,"symbolSetsGroupQuery",void 0),v([x()],$e.prototype,"templatesGroupQuery",void 0),v([x()],$e.prototype,"thumbnail",void 0),v([x({readOnly:!0})],$e.prototype,"thumbnailUrl",null),v([x()],$e.prototype,"units",void 0),v([x()],$e.prototype,"url",void 0),v([x()],$e.prototype,"urlKey",void 0),v([Me("urlKey")],$e.prototype,"readUrlKey",null),v([x()],$e.prototype,"user",void 0),v([Me("user")],$e.prototype,"readUser",null),v([x()],$e.prototype,"useStandardizedQuery",void 0),v([x()],$e.prototype,"useVectorBasemaps",void 0),v([x()],$e.prototype,"vectorBasemapGalleryGroupQuery",void 0),$e=Pn=v([B("esri.portal.Portal")],$e);const on=$e,u8=new FinalizationRegistry(t=>{t.remove()});function oW(t){const e=$t;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const aW=fe.getLogger("esri.assets");function Ft(t){if(!Tt.assetsPath)throw aW.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne("assets:path-not-set","config.assetsPath is not set");return Kc(Tt.assetsPath,t)}let Ul=class extends Oe{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&Bn(e)?fe.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.url;if(r==null)throw new ne("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){return(await he(()=>import("./resourceUtils-839cf4ca.js"),[])).addOrUpdateResource(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&Bn(e)&&(e=_S(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};v([x()],Ul.prototype,"portalItem",void 0),v([x({type:String,value:null})],Ul.prototype,"path",null),v([vt("path")],Ul.prototype,"_castPath",null),v([x({type:String,readOnly:!0})],Ul.prototype,"url",null),v([x({type:String,readOnly:!0})],Ul.prototype,"itemRelativeUrl",null),Ul=v([B("esri.portal.PortalItemResource")],Ul);const lW=Ul;let Rf=class extends Oe{constructor(e){super(e),this.created=null,this.rating=null}};v([x()],Rf.prototype,"created",void 0),v([x()],Rf.prototype,"rating",void 0),Rf=v([B("esri.portal.PortalRating")],Rf);const A3=Rf;var Ih;const uW=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),hW=new Set(["KML","GeoJson","CSV"]);let it=Ih=class extends em(ol){static from(t){return Yw(Ih,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replace(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"&&(i="Insights Report"),i}readExtent(t){return t&&t.length?new At(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,h=!1,f=!1,m=!1,b=!1,S=!1,I=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(h=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(f=e.includes("Table"),m=e.includes("Route Layer"),b=e.includes("Markup"),S=e.includes("Spatiotemporal"),I=e.includes("UtilityNetwork"),s=S&&f?"spatiotemporaltable":f?"table":m?"routelayer":b?"markup":S?"spatiotemporal":h?"featureshosted":I?"utilitynetwork":"features"):s=t==="map service"||t==="wms"||t==="wmts"?h||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?"mediaservice":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):s=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="360 vr experience"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":"maps",s?Ft(i+s+r+".png"):null}get isLayer(){return this.type!=null&&uW.has(this.type)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=on.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof A3&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new A3({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:se(this.applicationProxies),avgRating:this.avgRating,categories:se(this.categories),created:se(this.created),culture:this.culture,description:this.description,extent:se(this.extent),groupCategories:se(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:se(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:se(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Ih({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]&&(t[i]=t[i].join(", "));const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Gn(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Gn(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Gn(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new A3(e)):null}fetchRelatedItems(t,e){return Gn(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Ih)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Gn(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Gn(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ne("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Gn(e).signIn();const{copyResources:r,folder:s,tags:h,title:f}=t||{},m={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!r,tags:h==null?void 0:h.join(","),title:f}},{itemId:b}=await e.request(`${i}/copy`,m);return new Ih({id:b,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")dp(e)?r.query={data:e}:r.query={url:ms(e)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){return(await he(()=>import("./resourceUtils-839cf4ca.js"),[])).fetchResources(this,t,e)}async addResource(t,e,i){const r=await he(()=>import("./resourceUtils-839cf4ca.js"),[]);return t.portalItem=this,r.addOrUpdateResource(t,"add",e,i)}async removeResource(t,e){const i=await he(()=>import("./resourceUtils-839cf4ca.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ne("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,t,e)}async removeAllResources(t){return(await he(()=>import("./resourceUtils-839cf4ca.js"),[])).removeAllResources(this,t)}resourceFromPath(t){return new lW({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:se(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};return OC(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Ih({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};v([x({type:["private","shared","org","public"]})],it.prototype,"access",void 0),v([x()],it.prototype,"accessInformation",void 0),v([x({type:String})],it.prototype,"apiKey",void 0),v([x({json:{read:{source:"appProxies"}}})],it.prototype,"applicationProxies",void 0),v([x()],it.prototype,"avgRating",void 0),v([x()],it.prototype,"categories",void 0),v([x({type:Date})],it.prototype,"created",void 0),v([x()],it.prototype,"culture",void 0),v([x()],it.prototype,"description",void 0),v([x({readOnly:!0})],it.prototype,"displayName",null),v([x({type:At})],it.prototype,"extent",void 0),v([Me("extent")],it.prototype,"readExtent",null),v([x()],it.prototype,"groupCategories",void 0),v([x({readOnly:!0})],it.prototype,"iconUrl",null),v([x()],it.prototype,"id",void 0),v([x({readOnly:!0})],it.prototype,"isLayer",null),v([x({type:Boolean,readOnly:!0})],it.prototype,"isOrgItem",void 0),v([x()],it.prototype,"itemControl",void 0),v([x({readOnly:!0})],it.prototype,"itemPageUrl",null),v([x({readOnly:!0})],it.prototype,"itemUrl",null),v([x()],it.prototype,"licenseInfo",void 0),v([x({type:Date})],it.prototype,"modified",void 0),v([x()],it.prototype,"name",void 0),v([x()],it.prototype,"numComments",void 0),v([x()],it.prototype,"numRatings",void 0),v([x()],it.prototype,"numViews",void 0),v([x()],it.prototype,"owner",void 0),v([x()],it.prototype,"ownerFolder",void 0),v([x({type:on})],it.prototype,"portal",void 0),v([x()],it.prototype,"screenshots",void 0),v([x()],it.prototype,"size",void 0),v([x()],it.prototype,"snippet",void 0),v([x()],it.prototype,"sourceJSON",void 0),v([x({type:String})],it.prototype,"sourceUrl",void 0),v([x({type:String})],it.prototype,"spatialReference",void 0),v([x()],it.prototype,"tags",void 0),v([x()],it.prototype,"thumbnail",void 0),v([x({readOnly:!0})],it.prototype,"thumbnailUrl",null),v([x()],it.prototype,"title",void 0),v([x()],it.prototype,"type",void 0),v([x()],it.prototype,"typeKeywords",void 0),v([x({type:String,json:{read(t,e){var i;if(hW.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],it.prototype,"url",void 0),v([x({readOnly:!0})],it.prototype,"userItemUrl",null),it=Ih=v([B("esri.portal.PortalItem")],it);const z1=it,xO=Object.freeze(Object.defineProperty({__proto__:null,default:z1},Symbol.toStringTag,{value:"Module"})),h8=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,cW={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function c8(t){return t in cW}const Ff=[],Vd=new Map;function p8(t){for(const e of Vd.keys())MO(t.pattern,e)&&Vd.delete(e)}function pW(t){return Ff.includes(t)||(p8(t),Ff.unshift(t)),{remove(){const e=Ff.indexOf(t);e>-1&&(Ff.splice(e,1),p8(t))}}}async function SO(t){const e=_s();Vd.has(t)||Vd.set(t,fW(t,e));const i=Vd.get(t);return i&&await yW.add(i),i}function dW(t){if(!h8.test(t))return null;const e=h8.exec(t);if(e===null)return null;const[,i,r]=e,s=i+(r?"-"+r.toUpperCase():"");return c8(s)?s:c8(i)?i:null}async function fW(t,e){const i=[];for(const r of Ff)if(MO(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new ne("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ne("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function MO(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}PS(()=>{Vd.clear()});const yW=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=sl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function mW(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await SO("esri/t9n/basemaps");return i[t]||i[e]}const X9={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ft("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ft("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ft("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ft("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ft("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},L3e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function $O(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function FS(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function j3e(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function TO(t,e){const i=$t==null?void 0:$t.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.substring(0,r)}/rest/info`,h=e!=null?e.signal:null,{data:f}=await wi(s,{query:{f:"json"},responseType:"json",signal:h});return(f==null?void 0:f.owningSystemUrl)||null}function gW(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function IO(t){return gW(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function vW(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function wW(t){return!!vW(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const bW=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),_W=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function xW(t){return t.layerContainerType==="basemap"?bW:t.layerContainerType==="operational-layers"?_W:null}function SW(t,e){if(e.restrictedWebMapWriting){const i=xW(e);return i==null||i.has(t.type)&&!FS(t)}return!0}function MW(t,e){if(e)if(FS(t)){const i=Yy("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&C3(t,r)}else t.type==="stream"?C3(t,e.layerDefinition=e.layerDefinition||{}):t.type!=="group"&&C3(t,e)}function C3(t,e){"maxScale"in t&&(e.maxScale=A2(t.maxScale)??void 0),"minScale"in t&&(e.minScale=A2(t.minScale)??void 0)}function $W(t,e){if(MW(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=A2(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(FS(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function d8(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(SW(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&$W(t,e=se(e)),e}var av;let TW=0;const EO="esri.Basemap";let os=av=class extends em(ol){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+TW++,this.baseLayers=new qe,this.referenceLayers=new qe;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&fe.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{fe.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const e=this.referenceLayers.removeAll();for(const r of e)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Jc(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const h=d8(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&r.push(h)}),this.referenceLayers.forEach(s=>{const h=d8(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);h!=null&&(s.type!=="scene"&&(h.isReference=!0),r.push(h))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",Jc(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Uk(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>y2(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>y2(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new av({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=se(i);return r.url&&oa(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&oa(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Oi(t);const r=[];if(e){const s=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const h=e.data.id;r.push(mW(h).then(f=>{f&&this.read({title:f},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,h=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:f}=await he(()=>import("./layersCreator-befc28eb.js"),["assets/layersCreator-befc28eb.js","assets/lazyLayerLoader-5a0b40f1.js","assets/portalLayers-471dddc5.js","assets/layersLoader-2c9b54c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"]),m=[];if(Oi(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const b={context:{origin:h,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},S=O=>h==="web-scene"&&O.layerType==="ArcGISSceneServiceLayer"||O.isReference,I=f(this.baseLayers,t.baseMapLayers.filter(O=>!S(O)),b);m.push(I);const A=f(this.referenceLayers,t.baseMapLayers.filter(S),b);m.push(A)}await sn(m)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),s=Jr(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:t.type==="Web Scene"?"web-scene":"web-map",portal:t.portal||on.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||on.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}static fromId(t){const e=X9[t];if(e){if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),Fk(fe.getLogger(EO),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return av.fromJSON(e)}return null}};v([x({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:qe}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],os.prototype,"baseLayers",null),v([x({type:String,json:{origins:{"web-scene":{write:!0}}}})],os.prototype,"id",void 0),v([x({type:z1})],os.prototype,"portalItem",void 0),v([x()],os.prototype,"referenceLayers",null),v([x({readOnly:!0})],os.prototype,"resourceInfo",void 0),v([x({type:Ye})],os.prototype,"spatialReference",void 0),v([x()],os.prototype,"thumbnailUrl",void 0),v([x({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],os.prototype,"title",void 0),v([Ee("title")],os.prototype,"writeTitle",null),os=av=v([B(EO)],os);const N2=os,IW=Object.freeze(Object.defineProperty({__proto__:null,default:N2},Symbol.toStringTag,{value:"Module"})),L2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function AO(t){return!!L2[t]||!!L2[t.toLowerCase()]}function NS(t){return L2[t]??L2[t.toLowerCase()]}function EW(t){return[...NS(t)]}function k3(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function CO(t,e,i,r=1){const s=(t%360+360)%360/360,h=i<=.5?i*(e+1):i+e-i*e,f=2*i-h;return[Math.round(255*k3(f,h,s+1/3)),Math.round(255*k3(f,h,s)),Math.round(255*k3(f,h,s-1/3)),r]}function AW(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,h=e?t.length===9:t.length===5;let f=+("0x"+t.substr(1));if(isNaN(f))return null;const m=[0,0,0,1];let b;return h&&(b=f&r,f>>=i,m[3]=s*b/255),b=f&r,f>>=i,m[2]=s*b,b=f&r,f>>=i,m[1]=s*b,b=f&r,f>>=i,m[0]=s*b,m}function we(){return[0,0,0]}function xs(t){return[t[0],t[1],t[2]]}function fr(t,e,i){return[t,e,i]}function kO(t){const e=we(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function OO(t,e){return new Float64Array(t,e,3)}function PO(){return we()}function RO(){return fr(1,1,1)}function FO(){return fr(1,0,0)}function NO(){return fr(0,1,0)}function LO(){return fr(0,0,1)}const CW=PO(),jO=RO(),kW=FO(),OW=NO(),DO=LO();Object.freeze(Object.defineProperty({__proto__:null,ONES:jO,UNIT_X:kW,UNIT_Y:OW,UNIT_Z:DO,ZEROS:CW,clone:xs,create:we,createView:OO,fromArray:kO,fromValues:fr,ones:RO,unitX:FO,unitY:NO,unitZ:LO,zeros:PO},Symbol.toStringTag,{value:"Module"}));let LS=1e-6;function $n(){return LS}function PW(t){LS=t}const tm=Math.random,RW=Math.PI/180,FW=180/Math.PI;function jS(t){return t*RW}function NW(t){return t*FW}function LW(t,e){return Math.abs(t-e)<=LS*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:tm,equals:LW,getEpsilon:$n,setEpsilon:PW,toDegree:NW,toRadian:jS},Symbol.toStringTag,{value:"Module"}));function gt(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yt(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function Gt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function mt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function zO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function VO(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function jW(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function DW(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function zW(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function VW(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function GW(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function qW(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function UW(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Qe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function BW(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function mo(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function A0(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function tp(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function GO(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function HW(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function vi(t,e){const i=e[0],r=e[1],s=e[2];let h=i*i+r*r+s*s;return h>0&&(h=1/Math.sqrt(h),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h),t}function at(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ki(t,e,i){const r=e[0],s=e[1],h=e[2],f=i[0],m=i[1],b=i[2];return t[0]=s*b-h*m,t[1]=h*f-r*b,t[2]=r*m-s*f,t}function DS(t,e,i,r){const s=e[0],h=e[1],f=e[2];return t[0]=s+r*(i[0]-s),t[1]=h+r*(i[1]-h),t[2]=f+r*(i[2]-f),t}function WW(t,e,i,r,s,h){const f=h*h,m=f*(2*h-3)+1,b=f*(h-2)+h,S=f*(h-1),I=f*(3-2*h);return t[0]=e[0]*m+i[0]*b+r[0]*S+s[0]*I,t[1]=e[1]*m+i[1]*b+r[1]*S+s[1]*I,t[2]=e[2]*m+i[2]*b+r[2]*S+s[2]*I,t}function JW(t,e,i,r,s,h){const f=1-h,m=f*f,b=h*h,S=m*f,I=3*h*m,A=3*b*f,O=b*h;return t[0]=e[0]*S+i[0]*I+r[0]*A+s[0]*O,t[1]=e[1]*S+i[1]*I+r[1]*A+s[1]*O,t[2]=e[2]*S+i[2]*I+r[2]*A+s[2]*O,t}function KW(t,e){e=e||1;const i=tm,r=2*i()*Math.PI,s=2*i()-1,h=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*h,t[1]=Math.sin(r)*h,t[2]=s*e,t}function br(t,e,i){const r=e[0],s=e[1],h=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*h+i[12],t[1]=i[1]*r+i[5]*s+i[9]*h+i[13],t[2]=i[2]*r+i[6]*s+i[10]*h+i[14],t}function Ed(t,e,i){const r=e[0],s=e[1],h=e[2];return t[0]=r*i[0]+s*i[3]+h*i[6],t[1]=r*i[1]+s*i[4]+h*i[7],t[2]=r*i[2]+s*i[5]+h*i[8],t}function Q9(t,e,i){const r=i[0],s=i[1],h=i[2],f=i[3],m=e[0],b=e[1],S=e[2];let I=s*S-h*b,A=h*m-r*S,O=r*b-s*m,R=s*O-h*A,L=h*I-r*O,z=r*A-s*I;const j=2*f;return I*=j,A*=j,O*=j,R*=2,L*=2,z*=2,t[0]=m+I+R,t[1]=b+A+L,t[2]=S+O+z,t}function ZW(t,e,i,r){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0],h[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),h[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function YW(t,e,i,r){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),h[1]=s[1],h[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function XW(t,e,i,r){const s=[],h=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],h[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),h[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),h[2]=s[2],t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t}function QW(t,e){We(Wm,t),We(Jm,e),vi(Wm,Wm),vi(Jm,Jm);const i=at(Wm,Jm);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Wm=we(),Jm=we();function eJ(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ou(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function tJ(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],h=e[0],f=e[1],m=e[2],b=$n();return Math.abs(i-h)<=b*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-f)<=b*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-m)<=b*Math.max(1,Math.abs(s),Math.abs(m))}function im(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],h=i[2]-e[2];let f=r*r+s*s+h*h;return f>0?(f=1/Math.sqrt(f),t[0]=r*f,t[1]=s*f,t[2]=h*f,t):(t[0]=0,t[1]=0,t[2]=0,t)}const e5=mt,iJ=zO,rJ=VO,qO=mo,UO=A0,BO=gt,t5=tp;Object.freeze(Object.defineProperty({__proto__:null,abs:zW,add:Gt,angle:QW,bezier:JW,ceil:jW,copy:We,cross:ki,direction:im,dist:qO,distance:mo,div:rJ,divide:VO,dot:at,equals:tJ,exactEquals:Ou,floor:DW,hermite:WW,inverse:HW,len:BO,length:gt,lerp:DS,max:qW,min:GW,mul:iJ,multiply:zO,negate:GO,normalize:vi,random:KW,rotateX:ZW,rotateY:YW,rotateZ:XW,round:UW,scale:Qe,scaleAndAdd:BW,set:Yt,sign:VW,sqrDist:UO,sqrLen:t5,squaredDistance:A0,squaredLength:tp,str:eJ,sub:e5,subtract:mt,transformMat3:Ed,transformMat4:br,transformQuat:Q9},Symbol.toStringTag,{value:"Module"}));function xc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function j2(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function HO(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function WO(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function JO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function KO(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function nJ(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function sJ(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function oJ(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function aJ(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function lJ(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function zS(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function uJ(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function ZO(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+h*h)}function D2(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],h=e[3]-t[3];return i*i+r*r+s*s+h*h}function VS(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function GS(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function hJ(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cJ(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function YO(t,e){const i=e[0],r=e[1],s=e[2],h=e[3];let f=i*i+r*r+s*s+h*h;return f>0&&(f=1/Math.sqrt(f),t[0]=i*f,t[1]=r*f,t[2]=s*f,t[3]=h*f),t}function XO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function qS(t,e,i,r){const s=e[0],h=e[1],f=e[2],m=e[3];return t[0]=s+r*(i[0]-s),t[1]=h+r*(i[1]-h),t[2]=f+r*(i[2]-f),t[3]=m+r*(i[3]-m),t}function pJ(t,e){const i=tm;let r,s,h,f,m,b;e=e||1;do r=2*i()-1,s=2*i()-1,m=r*r+s*s;while(m>=1);do h=2*i()-1,f=2*i()-1,b=h*h+f*f;while(b>=1);const S=Math.sqrt((1-m)/b);return t[0]=e*r,t[1]=e*s,t[2]=e*h*S,t[3]=e*f*S,t}function Sc(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*h+i[12]*f,t[1]=i[1]*r+i[5]*s+i[9]*h+i[13]*f,t[2]=i[2]*r+i[6]*s+i[10]*h+i[14]*f,t[3]=i[3]*r+i[7]*s+i[11]*h+i[15]*f,t}function dJ(t,e,i){const r=e[0],s=e[1],h=e[2],f=i[0],m=i[1],b=i[2],S=i[3],I=S*r+m*h-b*s,A=S*s+b*r-f*h,O=S*h+f*s-m*r,R=-f*r-m*s-b*h;return t[0]=I*S+R*-f+A*-b-O*-m,t[1]=A*S+R*-m+O*-f-I*-b,t[2]=O*S+R*-b+I*-m-A*-f,t[3]=e[3],t}function fJ(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function V1(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function US(t,e){const i=t[0],r=t[1],s=t[2],h=t[3],f=e[0],m=e[1],b=e[2],S=e[3],I=$n();return Math.abs(i-f)<=I*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-m)<=I*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(s-b)<=I*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(h-S)<=I*Math.max(1,Math.abs(h),Math.abs(S))}const yJ=WO,mJ=JO,gJ=KO,vJ=ZO,wJ=D2,bJ=VS,_J=GS;Object.freeze(Object.defineProperty({__proto__:null,add:HO,ceil:nJ,copy:xc,dist:vJ,distance:ZO,div:gJ,divide:KO,dot:XO,equals:US,exactEquals:V1,floor:sJ,inverse:cJ,len:bJ,length:VS,lerp:qS,max:aJ,min:oJ,mul:mJ,multiply:JO,negate:hJ,normalize:YO,random:pJ,round:lJ,scale:zS,scaleAndAdd:uJ,set:j2,sqrDist:wJ,sqrLen:_J,squaredDistance:D2,squaredLength:GS,str:fJ,sub:yJ,subtract:WO,transformMat4:Sc,transformQuat:dJ},Symbol.toStringTag,{value:"Module"}));const f8=new Float32Array(1);function D3e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function fi(t,e,i){return Math.min(Math.max(t,e),i)}function z3e(t){return(t&t-1)==0}function V3e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function ao(t,e,i){return t+(e-t)*i}function Hi(t){return t*Math.PI/180}function Ms(t){return 180*t/Math.PI}function aa(t){return Math.acos(fi(t,-1,1))}function la(t){return Math.asin(fi(t,-1,1))}function O3(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const z2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function xJ(t){return z2.setFloat64(0,t),z2.getBigInt64(0)}function SJ(t){return z2.setBigInt64(0,t),z2.getFloat64(0)}const P3=BigInt("1000000");MJ(1);function MJ(t){const e=xJ(t=Math.abs(t)),i=SJ(e<=P3?P3:e-P3);return Math.abs(t-i)}function G3e(t){return QO(Math.max(-m8,Math.min(t,m8)))}function QO(t){return f8[0]=t,f8[0]}function y8(t,e){const i=gt(t),r=la(t[2]/i),s=Math.atan2(t[1]/i,t[0]/i);return Yt(e,i,r,s),e}function q3e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(O3(e,1)&&O3(i,1)&&O3(r,1))}const m8=QO(34028234663852886e22);function Km(t){return fi(uS(t),0,255)}function Zm(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let lv=class wr{static blendColors(e,i,r,s=new wr){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),h=r[1];if(h==="rgb"&&s.length===3||h==="rgba"&&s.length===4){const f=s[0];if(f.charAt(f.length-1)==="%"){const m=s.map(b=>2.56*parseFloat(b));return s.length===4&&(m[3]=parseFloat(s[3])),wr.fromArray(m,i)}return wr.fromArray(s.map(m=>parseFloat(m)),i)}if(h==="hsl"&&s.length===3||h==="hsla"&&s.length===4)return wr.fromArray(CO(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(e,i=new wr){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,s=(1<<r)-1;let h=+("0x"+e.substr(1));return isNaN(h)?null:(["b","g","r"].forEach(f=>{const m=h&s;h>>=r,i[f]=r===4?17*m:m}),i.a=1,i)}static fromArray(e,i=new wr){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=AO(e)?NS(e):null;return r&&wr.fromArray(r,i)||wr.fromRgb(e,i)||wr.fromHex(e,i)}static fromJSON(e){return e&&new wr([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?wr.fromString(e,this):Array.isArray(e)?wr.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof wr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=wr.AlphaMode.ALWAYS){const i=Km(this.r),r=Km(this.g),s=Km(this.b);return e===wr.AlphaMode.ALWAYS||this.a!==1?[i,r,s,Km(255*this.a)]:[i,r,s]}clone(){return new wr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Zm(this.r,0,255)),this.g=Math.round(Zm(this.g,0,255)),this.b=Math.round(Zm(this.b,0,255)),this.a=Zm(this.a,0,1),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};lv.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(lv||(lv={}));const Be=lv;function U3e(t){}function $J(t){return()=>t}function Le(t,e={}){const i=t instanceof tt?t:new tt(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),x(r)}var i5;let uv=i5=class extends ye{constructor(t){super(t),this.type="none"}clone(){return new i5({type:this.type})}};v([Le({none:"none",stayAbove:"stay-above"})],uv.prototype,"type",void 0),uv=i5=v([B("esri.ground.NavigationConstraint")],uv);function rb(t){const e=uS(100*(1-t));return Math.max(0,Math.min(e,100))}function by(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var r5;let Ia=r5=class extends em(ol){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new qe;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&fe.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{fe.getLogger(this.declaredClass).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Jc(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(h=>{if("write"in h){const f={};$J(h)().write(f,r)&&s.push(f)}else r&&r.messages&&r.messages.push(new ne("layer:unsupported",`Layers (${h.title}, ${h.id}) of type '${h.declaredClass}' cannot be persisted in the ground`,{layer:h}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Uk(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await he(()=>import("./ElevationQuery-9f0e740f.js"),[]);Oi(e);const r=new i,s=this.layers.filter(g8).toArray();return r.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await he(()=>import("./ElevationQuery-9f0e740f.js"),[]);Oi(e);const r=new i,s=this.layers.filter(g8).toArray();return r.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:se(this.surfaceColor),navigationConstraint:se(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new r5({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",s=e&&e.portal||null,h=e&&e.url||null;return he(()=>import("./layersCreator-befc28eb.js"),["assets/layersCreator-befc28eb.js","assets/lazyLayerLoader-5a0b40f1.js","assets/portalLayers-471dddc5.js","assets/layersLoader-2c9b54c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"]).then(({populateOperationalLayers:f})=>{Oi(i);const m=[];if(t.layers&&Array.isArray(t.layers)){const b={context:{origin:r,url:h,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(f(this.layers,t.layers,b))}return sn(m)}).then(()=>{})}};function TJ(t){return t&&"createElevationSampler"in t}function g8(t){return t.type==="elevation"||TJ(t)}v([x({json:{read:!1}})],Ia.prototype,"layers",null),v([Ee("layers")],Ia.prototype,"writeLayers",null),v([x({readOnly:!0})],Ia.prototype,"resourceInfo",void 0),v([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Bt,read:{reader:by,source:"transparency"},write:{writer:(t,e)=>{e.transparency=rb(t)},target:"transparency"}}})],Ia.prototype,"opacity",void 0),v([x({type:Be,json:{type:[Bt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ia.prototype,"surfaceColor",void 0),v([x({type:uv,json:{write:!0}})],Ia.prototype,"navigationConstraint",void 0),Ia=r5=v([B("esri.Ground")],Ia);const V2=Ia;let qp=class extends qe{constructor(e){super(e),this.getCollections=null}initialize(){this.own(ck(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new qe(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const h=this.indexOf(s,e);h>=0?h!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const h=this.getChildrenFunction(s);if(Array.isArray(h))for(const f of h)e=this._processCollection(e,f);else e=this._processCollection(e,h)}}return e}};v([x()],qp.prototype,"getCollections",void 0),v([x()],qp.prototype,"getChildrenFunction",void 0),v([x()],qp.prototype,"itemFilterFunction",void 0),qp=v([B("esri.core.CollectionFlattener")],qp);const _y=qp;function IJ(t){var e,i;return!(!(t!=null&&t.loaded)||!((i=(e=IO(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!wW(t))}const v8=fe.getLogger("esri.support.basemapUtils");function EJ(){return{}}function AJ(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function CJ(t,e){let i;if(typeof t=="string"){if(!(t in X9)){const r=Object.entries(X9).filter(([s,h])=>Tt.apiKey&&!h.classic||!Tt.apiKey&&h.classic&&!h.deprecated).map(([s])=>`"${s}"`).join(", ");return v8.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=N2.fromId(t),e&&(e[t]=i))}else i=ei(N2,t);return i!=null&&i.destroyed&&(v8.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function kJ(t){return new _y({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function R3(t){for(const e of t.values())e==null||e.destroy();t.clear()}const w8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function OJ(t){let e=null;if(typeof t=="string")if(t in w8){const i=w8[t];e=new V2({resourceInfo:{data:{layers:[i]}}})}else fe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ei(V2,t);return e}function r0(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var n5;function b8(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function PJ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Bl=n5=class extends ml{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):PJ(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new At,i=this.hasZ,r=this.hasM,s=i?3:2,h=t[0],f=b8(Math.min),m=b8(Math.max);let b,S,I,A,[O,R]=h,[L,z]=h;for(let j=0,H=t.length;j<H;j++){const Y=t[j],[X,te]=Y;if(O=f(O,X),R=f(R,te),L=m(L,X),z=m(z,te),i&&Y.length>2){const oe=Y[2];b=f(b,oe),I=m(I,oe)}if(r&&Y.length>s){const oe=Y[s];S=f(S,oe),A=m(A,oe)}}return e.xmin=O,e.ymin=R,e.xmax=L,e.ymax=z,e.spatialReference=this.spatialReference,i?(e.zmin=b,e.zmax=I):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=S,e.mmax=A):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=se(this.points)}addPoint(t){return r0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:se(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new n5(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ke(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ke(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(r0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};v([x({readOnly:!0})],Bl.prototype,"cache",null),v([x()],Bl.prototype,"extent",null),v([x({type:[[Number]],json:{write:{isRequired:!0}}})],Bl.prototype,"points",void 0),v([Ee("points")],Bl.prototype,"writePoints",null),Bl=n5=v([B("esri.geometry.Multipoint")],Bl),Bl.prototype.toJSON.isDefaultToJSON=!0;const rm=Bl;function H3e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return e}function RJ(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return e}function eP(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function FJ(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function NJ(t,e,i,r){const[s,h]=e,[f,m]=i[r],[b,S]=i[r+1],I=b-f,A=S-m,O=I*I+A*A,R=(s-f)*I+(h-m)*A,L=Math.min(1,Math.max(0,R/O));return t[0]=f+I*L,t[1]=m+A*L,t}function W3e(t,e,i){let r,s,h,f,m=!1,b=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,s=i.y;i.nextPoint();)h=i.x,f=i.y,s>e!=f>e&&t<(h-r)*(e-s)/(f-s)+r&&(m=!m),b=Math.min(b,LJ(t,e,r,s,h,f)),r=h,s=f;return b===0?0:(m?1:-1)*Math.sqrt(b)}function LJ(t,e,i,r,s,h){let f=i,m=r,b=s-f,S=h-m;if(b!==0||S!==0){const I=((t-f)*b+(e-m)*S)/(b*b+S*S);I>1?(f=s,m=h):I>0&&(f+=b*I,m+=S*I)}return b=t-f,S=e-m,b*b+S*S}function tP(t,e){return FJ(t,e,.5)}function iP(t,e,i){const r=t.length;let s=0,h=0,f=0;for(let m=0;m<r;m++){const b=t[m],S=t[(m+1)%r];let I=2;s+=b[0]*S[1]-S[0]*b[1],b.length>2&&S.length>2&&i&&(h+=b[0]*S[2]-S[0]*b[2],I=3),b.length>I&&S.length>I&&e&&(f+=b[0]*S[I]-S[0]*b[I])}return s<=0&&h<=0&&f<=0}function jJ(t){const e=t.length;return e>2&&zw(t[0],t[e-1])}function J3e(t){if("rings"in t&&(DJ(t),t.rings.length>0&&!iP(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function DJ(t){if("rings"in t)for(const e of t.rings)jJ(e)||e.push(e[0].slice())}function K3e(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function rP(t){if(!t||t.numPoints<3)return 0;let e,i,r=0;if(t.seekPathFront(),!t.nextPoint())return 0;e=t.x,i=t.y;const s=e,h=i;for(;t.nextPoint();)r+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return r+=(e-s)*(i+h),-.5*r}function Z3e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function zJ(t){return t?VJ(t.rings,t.hasZ??!1):null}function VJ(t,e){if(!t||!t.length)return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,f=t.length;h<f;h++){const m=nP(t[h],e,s);m&&r.push(m)}if(r.sort((h,f)=>{let m=h[2]-f[2];return m===0&&e&&(m=h[4]-f[4]),m}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const h=t[0]&&t[0].length?GJ(t[0],e):null;if(!h)return null;i[0]=h[0],i[1]=h[1],e&&h.length>2&&(i[2]=h[2])}return i}function nP(t,e,i){let r=0,s=0,h=0,f=0,m=0;const b=t.length?t[0][0]:0,S=t.length?t[0][1]:0,I=t.length&&e?t[0][2]:0;for(let O=0;O<t.length;O++){const R=t[O],L=t[(O+1)%t.length],[z,j,H]=R,Y=z-b,X=j-S,[te,oe,le]=L,ve=te-b,xe=oe-S,Fe=Y*xe-ve*X;if(f+=Fe,r+=(Y+ve)*Fe,s+=(X+xe)*Fe,e&&R.length>2&&L.length>2){const Pe=H-I,He=le-I,ze=Y*He-ve*Pe;h+=(Pe+He)*ze,m+=ze}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),j<i[2]&&(i[2]=j),j>i[3]&&(i[3]=j),e&&(H<i[4]&&(i[4]=H),H>i[5]&&(i[5]=H))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;f*=.5,m*=.5;const A=[r/(6*f)+b,s/(6*f)+S,f];return e&&(i[4]===i[5]||m===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=h/(6*m)+I,A[4]=m)),A}function GJ(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;for(let b=0,S=t.length;b<S-1;b++){const I=t[b],A=t[b+1];if(I&&A){i[0]=I[0],i[1]=I[1],r[0]=A[0],r[1]=A[1],e&&I.length>2&&A.length>2&&(i[2]=I[2],r[2]=A[2]);const O=eP(i,r);if(O){s+=O;const R=tP(I,A);h+=O*R[0],f+=O*R[1],e&&R.length>2&&(m+=O*R[2])}}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.length?t[0]:null}function qJ(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const r=[],s=[],h=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const f=nP(RJ(t),t.hasZ,h);f&&s.push(f)}if(s.sort((f,m)=>{let b=f[2]-m[2];return b===0&&e&&(b=f[4]-m[4]),b}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],e&&(r[2]=s[0][3]),(r[0]<h[0]||r[0]>h[1]||r[1]<h[2]||r[1]>h[3]||e&&(r[2]<h[4]||r[2]>h[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const f=t.numPoints?UJ(t):null;if(!f)return null;r[0]=f[0],r[1]=f[1],e&&f.length>2&&(r[2]=f[2])}return r}function UJ(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,h=0,f=0,m=0;if(t.nextPoint()){let b=t.x,S=t.y,I=t.z;for(;t.nextPoint();){const A=t.x,O=t.y,R=t.z;i[0]=b,i[1]=S,r[0]=A,r[1]=O,e&&(i[2]=I,r[2]=R);const L=eP(i,r);if(L){s+=L;const z=tP(i,r);h+=L*z[0],f+=L*z[1],e&&z.length>2&&(m+=L*z[2])}b=A,S=O,I=R}}return s>0?e?[h/s,f/s,m/s]:[h/s,f/s]:t.numPoints?(t.seekPathFront(),t.nextPoint(),[t.x,t.y]):null}const BJ=1e-6;function Y3e(t){let e=0;for(t.reset();t.nextPath();)e+=rP(t);if(e<BJ){const s=qJ(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)WJ(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const HJ=1/3;function WJ(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let h,f=i.x-r,m=i.y-s,b=0,S=0;for(;i.nextPoint();)b=i.x-r,S=i.y-s,h=.5*HJ*(b*m-S*f),t[0]+=h*(f+b),t[1]+=h*(m+S),f=b,m=S;const I=rP(i),A=[r,s];return A[0]-=e[0],A[1]-=e[1],A[0]*=I,A[1]*=I,t[0]+=A[0],t[1]+=A[1],t}function $s(t=QJ){return[t[0],t[1],t[2],t[3]]}function X3e(t){return[t[0],t[1],t[2],t[3]]}function sP(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function JJ(t,e,i,r,s=$s()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function Q3e(t,e=$s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function e_e(t,e){return new At({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function t_e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function i_e(t,e,i){if(e!=null)if("length"in e)s5(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else sP(i,t)}function oP(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function aP(t){return t[1]>=t[3]?0:t[3]-t[1]}function r_e(t){return oP(t)*aP(t)}function KJ(t,e){return ZJ(t,e[0],e[1])}function ZJ(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function n_e(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function s_e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function YJ(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function o_e(t){return t?sP(t,_8):$s(_8)}function s5(t){return t!=null&&t.length===4}function XJ(t){return!(oP(t)!==0&&isFinite(t[0])||aP(t)!==0&&isFinite(t[1]))}function a_e(t,e){return s5(t)&&s5(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const _8=[1/0,1/0,-1/0,-1/0],QJ=[0,0,0,0];function lP(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function uP(t){return t.points!==void 0}function hP(t){return t.x!==void 0&&t.y!==void 0}function cP(t){return t.paths!==void 0}function pP(t){return t.rings!==void 0}function dP(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Pu=dP(Math.min),Ru=dP(Math.max);function l_e(t,e){return cP(e)?n0(t,e.paths,!1,!1):pP(e)?n0(t,e.rings,!1,!1):uP(e)?BS(t,e.points,!1,!1,!1,!1):lP(e)?fP(t,e):(hP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function u_e(t){let e,i,r,s;for(t.reset(),e=r=1/0,i=s=-1/0;t.nextPath();){const h=eK(t);e=Math.min(h[0],e),r=Math.min(h[1],r),i=Math.max(h[2],i),s=Math.max(h[3],s)}return $s([e,r,i,s])}function eK(t){let e,i,r,s;for(e=r=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),s=Math.max(t.y,s);return $s([e,r,i,s])}function h_e(t,e){return cP(e)?n0(t,e.paths,!0,!1):pP(e)?n0(t,e.rings,!0,!1):uP(e)?BS(t,e.points,!0,!1,!0,!1):lP(e)?fP(t,e,!0,!1,!0,!1):(hP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function n0(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let h,f,m,b,[S,I]=e[0][0],[A,O]=e[0][0];for(let R=0;R<e.length;R++){const L=e[R];for(let z=0;z<L.length;z++){const j=L[z],[H,Y]=j;if(S=Pu(S,H),I=Pu(I,Y),A=Ru(A,H),O=Ru(O,Y),i&&j.length>2){const X=j[2];h=Pu(h,X),f=Ru(f,X)}if(r&&j.length>s){const X=j[s];m=Pu(h,X),b=Ru(f,X)}}}return i?r?(t[0]=S,t[1]=I,t[2]=h,t[3]=m,t[4]=A,t[5]=O,t[6]=f,t[7]=b,t.length=8,t):(t[0]=S,t[1]=I,t[2]=h,t[3]=A,t[4]=O,t[5]=f,t.length=6,t):r?(t[0]=S,t[1]=I,t[2]=m,t[3]=A,t[4]=O,t[5]=b,t.length=6,t):(t[0]=S,t[1]=I,t[2]=A,t[3]=O,t.length=4,t)}function fP(t,e,i,r,s,h){const f=e.xmin,m=e.xmax,b=e.ymin,S=e.ymax;let I=e.zmin,A=e.zmax,O=e.mmin,R=e.mmax;return s?(I=I||0,A=A||0,h?(O=O||0,R=R||0,t[0]=f,t[1]=b,t[2]=I,t[3]=O,t[4]=m,t[5]=S,t[6]=A,t[7]=R,t):(t[0]=f,t[1]=b,t[2]=I,t[3]=m,t[4]=S,t[5]=A,t)):h?(O=O||0,R=R||0,t[0]=f,t[1]=b,t[2]=O,t[3]=m,t[4]=S,t[5]=R,t):(t[0]=f,t[1]=b,t[2]=m,t[3]=S,t)}function BS(t,e,i,r,s,h){const f=i?3:2,m=r&&h,b=i&&s;if(!e.length||!e[0].length)return null;let S,I,A,O,[R,L]=e[0],[z,j]=e[0];for(let H=0;H<e.length;H++){const Y=e[H],[X,te]=Y;if(R=Pu(R,X),L=Pu(L,te),z=Ru(z,X),j=Ru(j,te),b&&Y.length>2){const oe=Y[2];S=Pu(S,oe),I=Ru(I,oe)}if(m&&Y.length>f){const oe=Y[f];A=Pu(S,oe),O=Ru(I,oe)}}return s?(S=S||0,I=I||0,h?(A=A||0,O=O||0,t[0]=R,t[1]=L,t[2]=S,t[3]=A,t[4]=z,t[5]=j,t[6]=I,t[7]=O,t):(t[0]=R,t[1]=L,t[2]=S,t[3]=z,t[4]=j,t[5]=I,t)):h?(A=A||0,O=O||0,t[0]=R,t[1]=L,t[2]=A,t[3]=z,t[4]=j,t[5]=O,t):(t[0]=R,t[1]=L,t[2]=z,t[3]=j,t)}function tK(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function iK(t){return t.points!==void 0}function rK(t){return t.x!==void 0&&t.y!==void 0}function nK(t){return t.paths!==void 0}function sK(t){return t.rings!==void 0}const HS=[];function yP(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function mP(t,e,i,r,s,h){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:h}}function gP(t,e,i,r,s,h){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:h}}function vP(t,e,i,r,s,h,f,m){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:h,zmax:f,mmax:m}}function WS(t,e=!1,i=!1){return e?i?vP(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):mP(t[0],t[1],t[2],t[3],t[4],t[5]):i?gP(t[0],t[1],t[2],t[3],t[4],t[5]):yP(t[0],t[1],t[2],t[3])}function c_e(t){return t?tK(t)?t:rK(t)?aK(t):sK(t)?wP(t):nK(t)?bP(t):iK(t)?oK(t):null:null}function oK(t){const{hasZ:e,hasM:i,points:r}=t;return WS(BS(HS,r,e??!1,i??!1),e,i)}function aK(t){const{x:e,y:i,z:r,m:s}=t,h=s!=null;return r!=null?h?vP(e,i,r,s,e,i,r,s):mP(e,i,r,e,i,r):h?gP(e,i,s,e,i,s):yP(e,i,e,i)}function wP(t){const{hasZ:e,hasM:i,rings:r}=t,s=n0(HS,r,e??!1,i??!1);return s?WS(s,e,i):null}function bP(t){const{hasZ:e,hasM:i,paths:r}=t,s=n0(HS,r,e??!1,i??!1);return s?WS(s,e,i):null}var hv;function x8(t){return!Array.isArray(t[0])}let Co=hv=class extends ml{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,s=!1;for(const f of e)f.hasZ&&(r=!0),f.hasM&&(s=!0);const h={rings:e.map(f=>{const m=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(r&&f.hasZ){const b=f.zmin+.5*(f.zmax-f.zmin);for(let S=0;S<m.length;S++)m[S].push(b)}if(s&&f.hasM){const b=f.mmin+.5*(f.mmax-f.mmin);for(let S=0;S<m.length;S++)m[S].push(b)}return m}),spatialReference:i};return r&&(h.hasZ=!0),s&&(h.hasM=!0),new hv(h)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,s=null,h=null;return t&&!Array.isArray(t)?(s=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):s=t,s=s||[],e=e||Ye.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),h=s[0]&&s[0][0],h&&(i===void 0&&r===void 0?(i=h.length>2,r=h.length>3):i===void 0?i=r?h.length>3:h.length>2:r===void 0&&(r=i?h.length>3:h.length>2)),{rings:s,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=zJ(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new ke;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=wP(this);if(!e)return null;const i=new At(e);return i.spatialReference=t,i}get isSelfIntersecting(){return ZH(this.rings)}writeRings(t,e){e.rings=se(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(x8(t)){const r=[];for(let s=0,h=t.length;s<h;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new hv;return t.spatialReference=this.spatialReference,t.rings=se(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,h,f,m],[b,S,I,A])=>s===b&&h===S&&(f==null&&I==null||f===I)&&(m==null&&A==null||m===A);for(let s=0;s<this.rings.length;s++){const h=this.rings[s],f=t.rings[s];if(!zw(h,f,r))return!1}return!0}contains(t){if(!t)return!1;const e=E0(t,this.spatialReference);return mO(this,e??t)}isClockwise(t){let e;return e=x8(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,iP(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ke(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ke(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ke(i[0],i[1],i[2],i[3],this.spatialReference):new ke(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(r0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ke(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new ke(s,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(r0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};v([x({readOnly:!0})],Co.prototype,"cache",null),v([x({readOnly:!0})],Co.prototype,"centroid",null),v([x({readOnly:!0})],Co.prototype,"extent",null),v([x({readOnly:!0})],Co.prototype,"isSelfIntersecting",null),v([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],Co.prototype,"rings",void 0),v([Ee("rings")],Co.prototype,"writeRings",null),Co=hv=v([B("esri.geometry.Polygon")],Co),Co.prototype.toJSON.isDefaultToJSON=!0;const ua=Co;var o5;function lK(t){return!Array.isArray(t[0])}let Hl=o5=class extends ml{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,s=null,h=null;return t&&!Array.isArray(t)?(s=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):s=t,s=s||[],e=e||Ye.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),h=s[0]&&s[0][0],h&&(i===void 0&&r===void 0?(i=h.length>2,r=!1):i===void 0?i=!r&&h.length>3:r===void 0&&(r=!i&&h.length>3)),{paths:s,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=bP(this);if(!e)return null;const i=new At(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=se(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(lK(t)){const r=[];for(let s=0,h=t.length;s<h;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new o5;return t.spatialReference=this.spatialReference,t.paths=se(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ke(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ke(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ke(i[0],i[1],i[2],i[3],this.spatialReference):new ke(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(r0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new ke(s,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ke(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(r0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};v([x({readOnly:!0})],Hl.prototype,"cache",null),v([x({readOnly:!0})],Hl.prototype,"extent",null),v([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],Hl.prototype,"paths",void 0),v([Ee("paths")],Hl.prototype,"writePaths",null),Hl=o5=v([B("esri.geometry.Polyline")],Hl),Hl.prototype.toJSON.isDefaultToJSON=!0;const _n=Hl,uK=Ir()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),S8=Ir()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function _P(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function JS(t){return t.points!==void 0}function KS(t){return t.x!==void 0&&t.y!==void 0}function ZS(t){return t.paths!==void 0}function zc(t){return t.rings!==void 0}function an(t){return t==null?null:t instanceof ml?t:KS(t)?ke.fromJSON(t):ZS(t)?_n.fromJSON(t):zc(t)?ua.fromJSON(t):JS(t)?rm.fromJSON(t):_P(t)?At.fromJSON(t):null}function C0(t){return t?KS(t)?"esriGeometryPoint":ZS(t)?"esriGeometryPolyline":zc(t)?"esriGeometryPolygon":_P(t)?"esriGeometryEnvelope":JS(t)?"esriGeometryMultipoint":null:null}const hK={esriGeometryPoint:ke,esriGeometryPolyline:_n,esriGeometryPolygon:ua,esriGeometryEnvelope:At,esriGeometryMultipoint:rm};function cK(t){return t&&hK[t]||null}const fp={base:ml,key:"type",typeMap:{extent:At,multipoint:rm,point:ke,polyline:_n,polygon:ua}};sa(fp);let xP=0;const nm=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+xP++})}};return e=v([B("esri.core.Identifiable")],e),e},YS=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:xP++})}};return e=v([B("esri.core.NumericIdentifiable")],e),e};let M8=class extends nm(class{}){};M8=v([B("esri.core.Identifiable")],M8);async function pK(t){const e="portalItem"in t?t:{portalItem:t},i=await he(()=>import("./portalLayers-471dddc5.js"),["assets/portalLayers-471dddc5.js","assets/lazyLayerLoader-5a0b40f1.js","assets/layersLoader-2c9b54c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"]);try{return await i.fromItem(e)}catch(r){const s=e&&e.portalItem,h=s&&s.id||"unset",f=s&&s.portal&&s.portal.url||Tt.portalUrl;throw fe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+f+"', id: '"+h+"')",r),r}}let dK=0,Ki=class extends pa.EventedMixin(nm(ol)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new At(-180,-90,180,90,Ye.WGS84),this.id=Date.now().toString(16)+"-layer-"+dK++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ye.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await he(()=>import("./arcgisLayers-6d30ba1d.js"),["assets/arcgisLayers-6d30ba1d.js","assets/fetchService-2b0c289c.js","assets/lazyLayerLoader-5a0b40f1.js"])).fromUrl(i)}static fromPortalItem(e){return pK(e)}initialize(){this.when().catch(e=>{Ts(e)||fe.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Jr(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await wi(e,{query:{f:"json"},responseType:"json"})).data;throw new ne("layer:no-attribution-data","Layer does not have attribution data")}};v([x({type:String})],Ki.prototype,"attributionDataUrl",void 0),v([x({type:At})],Ki.prototype,"fullExtent",void 0),v([x({readOnly:!0})],Ki.prototype,"hasAttributionData",null),v([x({type:String,clonable:!1})],Ki.prototype,"id",void 0),v([x({type:Boolean,nonNullable:!0})],Ki.prototype,"legendEnabled",void 0),v([x({type:["show","hide","hide-children"]})],Ki.prototype,"listMode",void 0),v([x({type:Number,range:{min:0,max:1},nonNullable:!0})],Ki.prototype,"opacity",void 0),v([x({clonable:!1})],Ki.prototype,"parent",void 0),v([x({readOnly:!0})],Ki.prototype,"parsedUrl",null),v([x({type:Boolean})],Ki.prototype,"popupEnabled",void 0),v([x({type:Boolean})],Ki.prototype,"attributionVisible",void 0),v([x({type:Ye})],Ki.prototype,"spatialReference",void 0),v([x({type:String})],Ki.prototype,"title",void 0),v([x({readOnly:!0,json:{read:!1}})],Ki.prototype,"type",void 0),v([x()],Ki.prototype,"url",void 0),v([x({type:Boolean,nonNullable:!0})],Ki.prototype,"visible",void 0),Ki=v([B("esri.layers.Layer")],Ki);const G2=Ki;function a5(t,e,i){let r,s;if(t)for(let h=0,f=t.length;h<f;h++){if(r=t.getItemAt(h),r[e]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=a5(r.layers,e,i),s))return s}}const fK=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new qe;const r=f=>{f.parent&&"remove"in f.parent&&f.parent.remove(f)},s=f=>{f.parent=this,this.layerAdded(f),f.type!=="elevation"&&f.type!=="base-elevation"||fe.getLogger(this.declaredClass).error(`Layer 'title:${f.title}, id:${f.id}' of type '${f.type}' is not supported as an operational layer and will therefore be ignored.`)},h=f=>{f.parent=null,this.layerRemoved(f)};this.addHandles([this.layers.on("before-add",f=>r(f.item)),this.layers.on("after-add",f=>s(f.item)),this.layers.on("after-remove",f=>h(f.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Jc(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof G2){const h=i;h.parent===this?this.reorder(h,r):s.add(h,r)}else dl(i)?i.then(h=>{this.destroyed||this.add(h,r)}):fe.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let h=s.getNextIndex(r);i.slice().forEach(f=>{f.parent!==this?(s.add(f,h),h+=1):this.reorder(f,h)})}findLayerById(i){return a5(this.layers,"id",i)}findLayerByUid(i){return a5(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return v([x()],e.prototype,"layers",null),e=v([B("esri.support.LayersMixin")],e),e};function l5(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const h=t.getItemAt(r);if(h[e]===i)return h;if((h==null?void 0:h.type)==="group"){const f=l5(h.tables,e,i);if(f)return f}}}const yK=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new qe,this.addHandles([this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&fe.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Jc(i,this._get("tables")))}findTableById(i){return l5(this.tables,"id",i)}findTableByUid(i){return l5(this.tables,"uid",i)}};return v([x()],e.prototype,"tables",null),e=v([B("esri.support.TablesMixin")],e),e};let ko=class extends yK(fK(pa.EventedMixin(Oe))){constructor(e){super(e),this.allLayers=new _y({getCollections:()=>{var i,r,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=kJ(this),this.basemap=null,this.editableLayers=new _y({getCollections:()=>[this.allLayers],itemFilterFunction:IJ}),this.ground=new V2,this._basemapCache=EJ()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),AJ(this._basemapCache),this._basemapCache=null}castBasemap(e){return CJ(e,this._basemapCache)}castGround(e){return OJ(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};v([x({readOnly:!0,dependsOn:[]})],ko.prototype,"allLayers",void 0),v([x({readOnly:!0})],ko.prototype,"allTables",void 0),v([x({type:N2})],ko.prototype,"basemap",void 0),v([vt("basemap")],ko.prototype,"castBasemap",null),v([x({readOnly:!0})],ko.prototype,"editableLayers",void 0),v([x({type:V2,nonNullable:!0})],ko.prototype,"ground",void 0),v([vt("ground")],ko.prototype,"castGround",null),ko=v([B("esri.Map")],ko);const SP=ko,ti=t=>{let e=class extends t{clone(){var b;const i=Gn(Hr(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,h={},f=new Map;for(const S in r){const I=r[S],A=s==null?void 0:s.originOf(S),O=I.clonable;if(I.readOnly||O===!1||A!==ft.USER&&A!==ft.DEFAULTS&&A!==ft.WEB_MAP&&A!==ft.WEB_SCENE)continue;const R=this[S];let L=null;L=typeof O=="function"?O(R):O==="reference"?R:M9(R),R!=null&&L==null||(A===ft.DEFAULTS?f.set(S,L):h[S]=L)}const m=new(Object.getPrototypeOf(this)).constructor(h);if(f.size){const S=(b=Hr(m))==null?void 0:b.store;if(S)for(const[I,A]of f)S.set(I,A,ft.DEFAULTS)}return m}};return e=v([B("esri.core.Clonable")],e),e};let $8=class extends ti(Oe){};$8=v([B("esri.core.Clonable")],$8);var s0;function mK(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return s0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return s0.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(s0||(s0={}));const gK=fe.getLogger("esri.support.arcadeOnDemand");let F3;function al(){return F3||(F3=(async()=>{const t=await he(()=>import("./arcadeUtils-9301309c.js").then(e=>e.ax),["assets/arcadeUtils-9301309c.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/number-ae984153.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),F3}const m_e=(t,e,i)=>XS.create(t,e,i,null,["$feature"]),g_e=(t,e,i)=>XS.create(t,e,i,null,["$feature","$view"]),vK=(t,e,i,r)=>XS.create(t,e,i,r,["$feature","$view"]);let XS=class MP{constructor(e,i,r,s,h,f,m){this.script=e,this.evaluate=s;const b=Array.isArray(f)?f:f.fields;this.fields=b,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=h,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,s,h,f){const{arcade:m,Feature:b,Dictionary:S}=await al(),I=Ye.fromJSON(i);let A;try{A=m.parseScript(e,f)}catch(xe){return gK.error(new ne("arcade-bad-expression","Failed to parse arcade script",{script:e,error:xe})),null}const O=h.reduce((xe,Fe)=>({...xe,[Fe]:null}),{});let R=null;s!=null&&(R=new S(s),R.immutable=!0,O.$config=null);const L=m.scriptUsesGeometryEngine(A),z=L&&m.enableGeometrySupport(),j=m.scriptUsesFeatureSet(A)&&m.enableFeatureSetSupport(),H=m.scriptIsAsync(A),Y=H&&m.enableAsyncSupport(),X={vars:O,spatialReference:I,useAsync:!!Y};await Promise.all([z,j,Y]);const te=new Set;await m.loadDependentModules(te,A,null,H,L);const oe=new S;oe.immutable=!1,oe.setField("scale",0);const le=m.compileScript(A,X),ve=xe=>("$view"in xe&&xe.$view&&(oe.setField("scale",typeof xe.$view=="object"?xe.$view.scale:void 0),xe.$view=oe),R&&(xe.$config=R),le({vars:xe,spatialReference:I}));return new MP(e,m,A,ve,new b,r,I)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const wK=/^([0-9])/,bK=/[^a-z0-9_\u0080-\uffff]/gi,_K=/_{2,}/g,xK=/^_/,SK=/_$/;function MK(t){return t==null?null:t.trim().replace(bK,"_").replace(_K,"_").replace(xK,"").replace(SK,"").replace(wK,"F$1")||null}const $K=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],TK=["field","normalizationField"];function T8(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(I8($K,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)I8(TK,r,e)}}function I8(t,e,i){if(t)for(const r of t){const s=Yy(r,e),h=s&&typeof s!="function"&&i.get(s);h&&Wr(r,h.name,e)}}function $P(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),s=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(s==null?void 0:s.name)??null}else{const r=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(s==null?void 0:s.name)??null}}const N3=new Set;function TP(t,e){return t&&e?(N3.clear(),xy(N3,t,e),Array.from(N3).sort()):[]}function xy(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)Hn(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function Hn(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function v_e(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function ln(t,e,i){var h;if(!i)return;const{arcadeUtils:r}=await al(),s=r.extractFieldNames(i,(h=e==null?void 0:e.fields)==null?void 0:h.map(f=>f.name));for(const f of s)Hn(t,e,f)}async function IP(t,e,i){if(i&&i!=="1=1"){const r=(await he(()=>import("./WhereClause-70d00d99.js").then(s=>s.W),["assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js"])).WhereClause.create(i,e);if(!r.isStandardized)throw new ne("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});xy(t,e,r.fieldNames)}}function IK({displayField:t,fields:e}){return t||(e&&e.length?L3(e,"name-or-title")||L3(e,"unique-identifier")||L3(e,"type-or-category")||EK(e):null)}function EK(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function L3(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function w_e(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function AK(t,e,i){i.onStatisticExpression?ln(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function b_e(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(CK(t,e,s)),i.fields&&r.push(...i.fields.map(async h=>AK(t,e.fieldsIndex,h))),await Promise.all(r)}async function CK(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(h=>ln(t,e.fieldsIndex,h.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const h of s)h.type==="expression"&&h.expressionInfo&&r.push(ln(t,e.fieldsIndex,h.expressionInfo.expression));await Promise.all(r)}async function __e(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&xy(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&xy(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await IP(t,e.fieldsIndex,i.where))}async function x_e(t,e,i){e&&i&&await Promise.all(i.map(r=>kK(t,e,r)))}async function kK(t,e,i){e&&i&&(i.valueExpression?await ln(t,e.fieldsIndex,i.valueExpression):i.field&&Hn(t,e.fieldsIndex,i.field))}function S_e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?TP(t.fieldsIndex,[e.creatorField,e.creationDateField,e.editorField,e.editDateField]):[]}async function M_e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(s=>OK(t,r,s)))}async function OK(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await ln(t,e,r.expression);else{const h=r.expression.match(/{[^}]*}/g);h&&h.forEach(f=>{Hn(t,e,f.slice(1,-1))})}await IP(t,e,s)}function PK(t){const e=t.defaultValue;return e!==void 0&&CP(t,e)?e:t.nullable?null:void 0}function EP(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function RK(t){return t===null||EP(t)}const QS="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function FK(t){return t===null||QS(t)}function AP(t){return t!=null&&typeof t=="string"}function NK(t){return t===null||AP(t)}function LK(){return!0}function CP(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?FK:QS;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?RK:EP;break;case"string":case"esriFieldTypeString":i=t.nullable?NK:AP;break;default:i=LK}return arguments.length===1?i:i(e)}const jK=["integer","small-integer","single","double"],DK=new Set([...jK,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function e7(t){return t!=null&&DK.has(t.type)}function $_e(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}var q2,U2;function T_e(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function I_e(t,e){return t==null||t.nullable&&e===null?null:e7(t)&&!zK(t.type,Number(e))?q2.OUT_OF_RANGE:CP(t,e)?t.domain?mK(t.domain,e):null:U2.INVALID_TYPE}function zK(t,e){const i=typeof t=="string"?kP(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?QS(e)&&e>=r&&e<=s:e>=r&&e<=s}function kP(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return VK;case"esriFieldTypeInteger":case"integer":return GK;case"esriFieldTypeBigInteger":case"big-integer":return qK;case"esriFieldTypeSingle":case"single":return UK;case"esriFieldTypeDouble":case"double":return BK}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(q2||(q2={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(U2||(U2={}));const VK={min:-32768,max:32767,isInteger:!0},GK={min:-2147483648,max:2147483647,isInteger:!0},qK={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},UK={min:-34e37,max:12e37,isInteger:!1},BK={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function E_e(t,e,i){switch(t){case s0.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case s0.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case U2.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case q2.OUT_OF_RANGE:{const{min:r,max:s}=kP(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function HK(t,e){return!WK(t,e,null)}function WK(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const h of t??[])i.add(h);return!0}const r=e.attributes;let s=!1;for(const h of t)if(!(h in r)){if(s=!0,i==null)break;i.add(h)}return s}function OP(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let cv=class extends ye{constructor(e){super(e),this.type=null}};v([x({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],cv.prototype,"type",void 0),cv=v([B("esri.popup.content.Content")],cv);const ih=cv;var u5;let Eh=u5=class extends ih{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new u5({description:this.description,displayType:this.displayType,title:this.title})}};v([x({type:String,json:{write:!0}})],Eh.prototype,"description",void 0),v([x({type:["auto","preview","list"],json:{write:!0}})],Eh.prototype,"displayType",void 0),v([x({type:String,json:{write:!0}})],Eh.prototype,"title",void 0),v([x({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Eh.prototype,"type",void 0),Eh=u5=v([B("esri.popup.content.AttachmentsContent")],Eh);const Sy=Eh;var h5;let Ah=h5=class extends ih{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new h5({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?se(this.outFields):null})}};v([x()],Ah.prototype,"creator",void 0),v([x()],Ah.prototype,"destroyer",void 0),v([x()],Ah.prototype,"outFields",void 0),v([x({type:["custom"],readOnly:!0})],Ah.prototype,"type",void 0),Ah=h5=v([B("esri.popup.content.CustomContent")],Ah);const JK=Ah;var c5;let Up=c5=class extends ye{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new c5({title:this.title,expression:this.expression})}};v([x({type:String,json:{write:!0}})],Up.prototype,"title",void 0),v([x({type:String,json:{write:!0}})],Up.prototype,"expression",void 0),v([x({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Up.prototype,"returnType",void 0),Up=c5=v([B("esri.popup.ElementExpressionInfo")],Up);const PP=Up;var p5;let Nf=p5=class extends ih{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new p5({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};v([x({type:PP,json:{write:!0}})],Nf.prototype,"expressionInfo",void 0),v([x({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Nf.prototype,"type",void 0),Nf=p5=v([B("esri.popup.content.ExpressionContent")],Nf);const t7=Nf,My=Ir()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});My.toJSON.bind(My);My.fromJSON.bind(My);const $o={year:"numeric",month:"numeric",day:"numeric"},nf={year:"numeric",month:"long",day:"numeric"},sf={year:"numeric",month:"short",day:"numeric"},of={year:"numeric",month:"long",weekday:"long",day:"numeric"},as={hour:"numeric",minute:"numeric"},Rs={...as,second:"numeric"},i7={"short-date":$o,"short-date-short-time":{...$o,...as},"short-date-short-time-24":{...$o,...as,hour12:!1},"short-date-long-time":{...$o,...Rs},"short-date-long-time-24":{...$o,...Rs,hour12:!1},"short-date-le":$o,"short-date-le-short-time":{...$o,...as},"short-date-le-short-time-24":{...$o,...as,hour12:!1},"short-date-le-long-time":{...$o,...Rs},"short-date-le-long-time-24":{...$o,...Rs,hour12:!1},"long-month-day-year":nf,"long-month-day-year-short-time":{...nf,...as},"long-month-day-year-short-time-24":{...nf,...as,hour12:!1},"long-month-day-year-long-time":{...nf,...Rs},"long-month-day-year-long-time-24":{...nf,...Rs,hour12:!1},"day-short-month-year":sf,"day-short-month-year-short-time":{...sf,...as},"day-short-month-year-short-time-24":{...sf,...as,hour12:!1},"day-short-month-year-long-time":{...sf,...Rs},"day-short-month-year-long-time-24":{...sf,...Rs,hour12:!1},"long-date":of,"long-date-short-time":{...of,...as},"long-date-short-time-24":{...of,...as,hour12:!1},"long-date-long-time":{...of,...Rs},"long-date-long-time-24":{...of,...Rs,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":as,"long-time":Rs},$y=Ir()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});$y.apiValues;$y.toJSON.bind($y);$y.fromJSON.bind($y);const KK={ar:"ar-u-nu-latn-ca-gregory"};let d5=new WeakMap,RP=i7["short-date-short-time"];function ZK(t){const e=t||RP;let i=d5.get(e);if(!i){const r=_s(),s=KK[_s()]||r;i=new Intl.DateTimeFormat(s,e),d5.set(e,i)}return i}function r7(t){return t?i7[t]:null}function ll(t,e){return ZK(e).format(t)}PS(()=>{d5=new WeakMap,RP=i7["short-date-short-time"]});const YK={ar:"ar-u-nu-latn"};let pv=new WeakMap,FP={};function XK(t){const e=t||FP;if(!pv.has(e)){const i=_s(),r=YK[_s()]||i;pv.set(e,new Intl.NumberFormat(r,t))}return pv.get(e)}function NP(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Wu(t,e){return Object.is(t,-0)&&(t=0),XK(e).format(t)}PS(()=>{pv=new WeakMap,FP={}});var f5;let Ch=f5=class extends ye{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new f5({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?ll(t,{...r7(this.dateFormat),...this.dateTimeFormatOptions}):Wu(t,NP(this))}formatRasterPixelValue(t){if(t.includes("-"))return t;let e,i;return t.trim().includes(",")?(e=",",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(";")?(e=";",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(" ")?(e=i=" ",this._formatDelimitedString(t,e,i,this)):this.format(Number(t))}_formatDelimitedString(t,e,i,r){return t&&e&&i&&r?t.trim().split(e).map(s=>this.format(Number(s))).join(i):t}};v([Le(My)],Ch.prototype,"dateFormat",void 0),v([x({type:Object,json:{read:!1}})],Ch.prototype,"dateTimeFormatOptions",void 0),v([x({type:Boolean,json:{write:!0}})],Ch.prototype,"digitSeparator",void 0),v([x({type:Bt,json:{write:!0}})],Ch.prototype,"places",void 0),Ch=f5=v([B("esri.popup.support.FieldInfoFormat")],Ch);const Ad=Ch;var y5;let zs=y5=class extends ye{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new y5({fieldName:this.fieldName,format:this.format?se(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};v([x({type:String,json:{write:!0}})],zs.prototype,"fieldName",void 0),v([x({type:Ad,json:{write:!0}})],zs.prototype,"format",void 0),v([x({type:Boolean,json:{write:!0,default:!1}})],zs.prototype,"isEditable",void 0),v([x({type:String,json:{write:!0}})],zs.prototype,"label",void 0),v([Le(new tt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],zs.prototype,"stringFieldOption",void 0),v([x({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],zs.prototype,"statisticType",void 0),v([x({type:String,json:{write:!0}})],zs.prototype,"tooltip",void 0),v([x({type:Boolean,json:{write:!0}})],zs.prototype,"visible",void 0),zs=y5=v([B("esri.popup.FieldInfo")],zs);const sm=zs;var m5;let Ea=m5=class extends ih{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new m5(se({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};v([x({type:Object,json:{write:!0}})],Ea.prototype,"attributes",void 0),v([x({type:String,json:{write:!0}})],Ea.prototype,"description",void 0),v([x({type:[sm]})],Ea.prototype,"fieldInfos",void 0),v([Ee("fieldInfos")],Ea.prototype,"writeFieldInfos",null),v([x({type:String,json:{write:!0}})],Ea.prototype,"title",void 0),v([x({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ea.prototype,"type",void 0),Ea=m5=v([B("esri.popup.content.FieldsContent")],Ea);const o0=Ea;let kh=class extends ye{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};v([x({type:String,json:{write:!0}})],kh.prototype,"altText",void 0),v([x({type:String,json:{write:!0}})],kh.prototype,"caption",void 0),v([x({type:String,json:{write:!0}})],kh.prototype,"title",void 0),v([x({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],kh.prototype,"type",void 0),kh=v([B("esri.popup.content.mixins.MediaInfo")],kh);const n7=kh;var g5;let Bp=g5=class extends Oe{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new g5({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};v([x()],Bp.prototype,"fieldName",void 0),v([x()],Bp.prototype,"tooltip",void 0),v([x()],Bp.prototype,"value",void 0),Bp=g5=v([B("esri.popup.content.support.ChartMediaInfoValueSeries")],Bp);const LP=Bp;var v5;let Oh=v5=class extends ye{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new v5({fields:se(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};v([x({type:[String],json:{write:!0}})],Oh.prototype,"fields",void 0),v([x({type:String,json:{write:!0}})],Oh.prototype,"normalizeField",void 0),v([x({type:[LP],json:{read:!1}})],Oh.prototype,"series",void 0),v([x({type:String,json:{write:!0}})],Oh.prototype,"tooltipField",void 0),Oh=v5=v([B("esri.popup.content.support.ChartMediaInfoValue")],Oh);const QK=Oh;let Lf=class extends n7{constructor(e){super(e),this.type=null,this.value=null}};v([x({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Lf.prototype,"type",void 0),v([x({type:QK,json:{write:!0}})],Lf.prototype,"value",void 0),Lf=v([B("esri.popup.content.mixins.ChartMediaInfo")],Lf);const nb=Lf,sb=Ir()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var w5;let dv=w5=class extends nb{constructor(t){super(t),this.type="bar-chart"}clone(){return new w5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([x({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:sb.write}})],dv.prototype,"type",void 0),dv=w5=v([B("esri.popup.content.BarChartMediaInfo")],dv);const jP=dv;var b5;let fv=b5=class extends nb{constructor(t){super(t),this.type="column-chart"}clone(){return new b5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([x({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:sb.write}})],fv.prototype,"type",void 0),fv=b5=v([B("esri.popup.content.ColumnChartMediaInfo")],fv);const DP=fv;var _5;let jf=_5=class extends ye{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new _5({linkURL:this.linkURL,sourceURL:this.sourceURL})}};v([x({type:String,json:{write:!0}})],jf.prototype,"linkURL",void 0),v([x({type:String,json:{write:!0}})],jf.prototype,"sourceURL",void 0),jf=_5=v([B("esri.popup.content.support.ImageMediaInfoValue")],jf);const eZ=jf;var x5;let Hp=x5=class extends n7{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new x5({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};v([x({type:Number,json:{write:!0}})],Hp.prototype,"refreshInterval",void 0),v([x({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Hp.prototype,"type",void 0),v([x({type:eZ,json:{write:!0}})],Hp.prototype,"value",void 0),Hp=x5=v([B("esri.popup.content.ImageMediaInfo")],Hp);const zP=Hp;var S5;let yv=S5=class extends nb{constructor(t){super(t),this.type="line-chart"}clone(){return new S5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([x({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:sb.write}})],yv.prototype,"type",void 0),yv=S5=v([B("esri.popup.content.LineChartMediaInfo")],yv);const VP=yv;var M5;let mv=M5=class extends nb{constructor(t){super(t),this.type="pie-chart"}clone(){return new M5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([x({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:sb.write}})],mv.prototype,"type",void 0),mv=M5=v([B("esri.popup.content.PieChartMediaInfo")],mv);const GP=mv,qP={base:n7,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":jP,"column-chart":DP,"line-chart":VP,"pie-chart":GP,image:zP}};var $5;let Vs=$5=class extends ih{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?zP.fromJSON(e):e.type==="barchart"?jP.fromJSON(e):e.type==="columnchart"?DP.fromJSON(e):e.type==="linechart"?VP.fromJSON(e):e.type==="piechart"?GP.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new $5(se({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};v([x()],Vs.prototype,"activeMediaInfoIndex",void 0),v([x({type:Object,json:{write:!0}})],Vs.prototype,"attributes",void 0),v([x({type:String,json:{write:!0}})],Vs.prototype,"description",void 0),v([x({types:[qP]})],Vs.prototype,"mediaInfos",void 0),v([Me("mediaInfos")],Vs.prototype,"readMediaInfos",null),v([Ee("mediaInfos")],Vs.prototype,"writeMediaInfos",null),v([x({type:String,json:{write:!0}})],Vs.prototype,"title",void 0),v([x({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Vs.prototype,"type",void 0),Vs=$5=v([B("esri.popup.content.MediaContent")],Vs);const Ty=Vs;var T5;let Df=T5=class extends ye{constructor(t){super(t),this.field=null,this.order=null}clone(){return new T5({field:this.field,order:this.order})}};v([x({type:String,json:{write:!0}})],Df.prototype,"field",void 0),v([x({type:["asc","desc"],json:{write:!0}})],Df.prototype,"order",void 0),Df=T5=v([B("esri.popup.support.RelatedRecordsInfoFieldOrder")],Df);const s7=Df;let Oo=class extends ti(ih){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};v([x({type:String,json:{write:!0}})],Oo.prototype,"description",void 0),v([x({type:Number,json:{type:Bt,write:!0}})],Oo.prototype,"displayCount",void 0),v([x({type:["list"],json:{write:!0}})],Oo.prototype,"displayType",void 0),v([x({type:[s7],json:{write:!0}})],Oo.prototype,"orderByFields",void 0),v([x({type:Number,json:{type:Bt,write:!0}})],Oo.prototype,"relationshipId",void 0),v([x({type:String,json:{write:!0}})],Oo.prototype,"title",void 0),v([x({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Oo.prototype,"type",void 0),Oo=v([B("esri.popup.content.RelationshipContent")],Oo);const B2=Oo;var I5;let zf=I5=class extends ih{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new I5({text:this.text})}};v([x({type:String,json:{write:!0}})],zf.prototype,"text",void 0),v([x({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],zf.prototype,"type",void 0),zf=I5=v([B("esri.popup.content.TextContent")],zf);const a0=zf,tZ={base:null,key:"type",typeMap:{attachment:Sy,media:Ty,text:a0,expression:t7,field:o0,relationship:B2}};var E5;let Ph=E5=class extends ye{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new E5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([x({type:String,json:{write:!0}})],Ph.prototype,"name",void 0),v([x({type:String,json:{write:!0}})],Ph.prototype,"title",void 0),v([x({type:String,json:{write:!0}})],Ph.prototype,"expression",void 0),v([x({type:["string","number"],json:{write:!0}})],Ph.prototype,"returnType",void 0),Ph=E5=v([B("esri.popup.ExpressionInfo")],Ph);const UP=Ph;var A5;let Vf=A5=class extends ye{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new A5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};v([x({type:Boolean,json:{write:!0}})],Vf.prototype,"returnTopmostRaster",void 0),v([x({type:Boolean,json:{write:!0}})],Vf.prototype,"showNoDataRecords",void 0),Vf=A5=v([B("esri.popup.LayerOptions")],Vf);const iZ=Vf;var C5;let Gf=C5=class extends ye{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new C5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?se(this.orderByFields):null})}};v([x({type:Boolean,json:{write:!0}})],Gf.prototype,"showRelatedRecords",void 0),v([x({type:[s7],json:{write:!0}})],Gf.prototype,"orderByFields",void 0),Gf=C5=v([B("esri.popup.RelatedRecordsInfo")],Gf);const rZ=Gf;var k5;let Gs=k5=class extends nm(Oe){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new k5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};v([x()],Gs.prototype,"active",void 0),v([x()],Gs.prototype,"className",void 0),v([x()],Gs.prototype,"disabled",void 0),v([x()],Gs.prototype,"id",void 0),v([x()],Gs.prototype,"indicator",void 0),v([x()],Gs.prototype,"title",void 0),v([x()],Gs.prototype,"type",void 0),v([x()],Gs.prototype,"visible",void 0),Gs=k5=v([B("esri.support.actions.ActionBase")],Gs);const ob=Gs;var O5;let gv=O5=class extends ob{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new O5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};v([x()],gv.prototype,"image",void 0),gv=O5=v([B("esri.support.Action.ActionButton")],gv);const k0=gv;var P5;let qf=P5=class extends ob{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new P5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};v([x()],qf.prototype,"image",void 0),v([x()],qf.prototype,"value",void 0),qf=P5=v([B("esri.support.Action.ActionToggle")],qf);const BP=qf,nZ="esri.PopupTemplate",sZ=fe.getLogger(nZ),af="relationships/",E8="expression/",oZ=qe.ofType({key:"type",defaultKeyValue:"button",base:ob,typeMap:{button:k0,toggle:BP}}),aZ={base:ih,key:"type",typeMap:{media:Ty,custom:JK,text:a0,attachments:Sy,fields:o0,expression:t7,relationship:B2}},lZ=["attachments","fields","media","text","expression","relationship"];let Zi=class extends ti(ye){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>sa(aZ,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||dl(e)?e:(sZ.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(h=>lZ.includes(h.type)).map(h=>h&&h.toJSON(s)),i.popupElements.forEach(h=>{h.type==="attachments"?this._writeAttachmentContent(i):h.type==="media"?this._writeMediaContent(h,i):h.type==="text"?this._writeTextContent(h,i):h.type==="relationship"&&this._writeRelationshipContent(h,i)})):i.description=e}writeFieldInfos(e,i,r,s){const{content:h}=this,f=Array.isArray(h)?h:null;if(e){const m=f?f.filter(S=>S.type==="fields"):[],b=m.length&&m.every(S=>{var I;return(I=S.fieldInfos)==null?void 0:I.length});i.fieldInfos=e.filter(Boolean).map(S=>{const I=S.toJSON(s);return b&&(I.visible=!1),I})}if(f)for(const m of f)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),xy(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=se(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const h=i.fieldInfos.find(f=>f.fieldName.toLowerCase()===s.fieldName.toLowerCase());h?h.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var h,f;const r=((h=e.orderByFields)==null?void 0:h.map(m=>this._toFieldOrderJSON(m,e.relationshipId)))||[],s=[...((f=i.relatedRecordsInfo)==null?void 0:f.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=se(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map(h=>h.type==="media"?(h.mediaInfos||!i||s.mediaInfos||(h.mediaInfos=i,s.mediaInfos=!0),Ty.fromJSON(h)):h.type==="text"?(h.text||!e||s.description||(h.text=e,s.description=!0),a0.fromJSON(h)):h.type==="attachments"?Sy.fromJSON(h):h.type==="fields"?o0.fromJSON(h):h.type==="expression"?t7.fromJSON(h):h.type==="relationship"?B2.fromJSON(h):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(af)))return null;const s=i.replace(af,"").split("/");if(s.length!==2)return null;const h=parseInt(s[0],10),f=s[1];return typeof h=="number"&&f?B2.fromJSON({relationshipId:h,orderByFields:[{field:f,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${af}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const h=[];e?h.push(new a0({text:e})):h.push(new o0),Array.isArray(i)&&i.length&&h.push(Ty.fromJSON({mediaInfos:i})),r&&h.push(Sy.fromJSON({displayType:"auto"}));const{showRelatedRecords:f,orderByFields:m}=s;return f&&(m!=null&&m.length)&&m.forEach(b=>{const S=this._toRelationshipContent(b);S&&h.push(S)}),h.length?h:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,h)=>[...s,...this._getMediaInfoFields(h)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,h=s||{},{fields:f,normalizeField:m,tooltipField:b,sourceURL:S,linkURL:I}=h,A=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(S),...this._extractFieldNames(I),...f??[]];return m&&A.push(m),b&&A.push(b),A}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(s=>ln(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(af)&&!i.startsWith(E8)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,h=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(h)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const s=/\{(\w+):.+\}/,h=r.filter(f=>!(f.indexOf(`{${af}`)===0||f.indexOf(`{${E8}`)===0)).map(f=>f.replace(s,"{$1}"));return h?h.map(f=>f.slice(1,-1)):[]}};v([x({type:oZ})],Zi.prototype,"actions",void 0),v([x()],Zi.prototype,"content",void 0),v([vt("content")],Zi.prototype,"castContent",null),v([Me("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Zi.prototype,"readContent",null),v([Ee("content",{popupElements:{type:qe.ofType(tZ)},showAttachments:{type:Boolean},mediaInfos:{type:qe.ofType(qP)},description:{type:String},relatedRecordsInfo:{type:rZ}})],Zi.prototype,"writeContent",null),v([x({type:[UP],json:{write:!0}})],Zi.prototype,"expressionInfos",void 0),v([x({type:[sm]})],Zi.prototype,"fieldInfos",void 0),v([Ee("fieldInfos")],Zi.prototype,"writeFieldInfos",null),v([x({type:iZ})],Zi.prototype,"layerOptions",void 0),v([Ee("layerOptions")],Zi.prototype,"writeLayerOptions",null),v([x({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Zi.prototype,"lastEditInfoEnabled",void 0),v([x()],Zi.prototype,"outFields",void 0),v([x()],Zi.prototype,"overwriteActions",void 0),v([x()],Zi.prototype,"returnGeometry",void 0),v([x({json:{type:String}})],Zi.prototype,"title",void 0),v([Ee("title")],Zi.prototype,"writeTitle",null),Zi=v([B("esri.PopupTemplate")],Zi);const om=Zi,A8=new tt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let uZ=0,Wp=class extends ye{constructor(e){super(e),this.id="sym"+uZ++,this.type=null,this.color=new Be([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};v([x({type:A8.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:A8.write}}})],Wp.prototype,"type",void 0),v([x({type:Be,json:{write:{allowNull:!0}}})],Wp.prototype,"color",void 0),v([Me("color")],Wp.prototype,"readColor",null),Wp=v([B("esri.symbols.Symbol")],Wp);const Tn=Wp;var R5;let Wl=R5=class extends Tn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){if(t)for(const i in t)e[i]=t[i]}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(h=>{const f=h.valueExpressionInfo;return ln(t,e,f.expression)});await Promise.all(s)}}}clone(){return new R5({data:se(this.data)})}hash(){return oS(JSON.stringify(this.data)).toString()}};v([x({json:{write:!1}})],Wl.prototype,"color",void 0),v([x({json:{write:!0}})],Wl.prototype,"data",void 0),v([Me("data",["symbol"])],Wl.prototype,"readData",null),v([Ee("data",{})],Wl.prototype,"writeData",null),v([Le({CIMSymbolReference:"cim"},{readOnly:!0})],Wl.prototype,"type",void 0),Wl=R5=v([B("esri.symbols.CIMSymbol")],Wl);const O0=Wl;let Jp=class extends ye{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,i,r){e||(i[r]=e)}};v([x({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Jp.prototype,"enabled",void 0),v([Ee("enabled")],Jp.prototype,"writeEnabled",null),v([x({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Jp.prototype,"type",void 0),Jp=v([B("esri.symbols.Symbol3DLayer")],Jp);const da=Jp,hZ=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,cZ="screenUtils.toPt: input not recognized!",HP=96;function WP(t){return t?t/72*HP:0}function ul(t){return t?72*t/HP:0}function It(t){if(typeof t=="string"){const e=t.match(hZ);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",h=r==="px"?ul(i):i;return s?-h:h}return console.warn(cZ),null}return t}function Ur(t=0,e=0){return{x:t,y:e}}function pZ(t=0,e=0){return[t,e]}function dZ(t=0,e=0,i=0){return[t,e,i]}function fZ(t,e){const i=e.transparency!=null?by(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Be([r[0]||0,r[1]||0,r[2]||0,i]):null}function yZ(t,e){e.color=t.toJSON().slice(0,3);const i=rb(t.a);i!==0&&(e.transparency=i)}const rh={type:Be,json:{type:[Bt],default:null,read:{source:["color","transparency"],reader:fZ},write:{target:{color:{type:[Bt]},transparency:{type:Bt}},writer:yZ}}},ha={type:Number,cast:It,json:{write:!0}};let Rh=class extends ye{constructor(e){super(e),this.color=new Be([0,0,0,1]),this.extensionLength=0,this.size=ul(1)}clone(){}cloneProperties(){return{color:se(this.color),size:this.size,extensionLength:this.extensionLength}}};v([x({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Rh.prototype,"type",void 0),v([x(rh)],Rh.prototype,"color",void 0),v([x({...ha,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Rh.prototype,"extensionLength",void 0),v([x(ha)],Rh.prototype,"size",void 0),Rh=v([B("esri.symbols.edges.Edges3D")],Rh);const o7=Rh;var F5;let vv=F5=class extends o7{constructor(t){super(t),this.type="sketch"}clone(){return new F5(this.cloneProperties())}};v([Le({sketch:"sketch"},{readOnly:!0})],vv.prototype,"type",void 0),vv=F5=v([B("esri.symbols.edges.SketchEdges3D")],vv);const mZ=vv;var N5;let wv=N5=class extends o7{constructor(t){super(t),this.type="solid"}clone(){return new N5(this.cloneProperties())}};v([Le({solid:"solid"},{readOnly:!0})],wv.prototype,"type",void 0),wv=N5=v([B("esri.symbols.support.SolidEdges3D")],wv);const gZ=wv,JP={types:{key:"type",base:o7,typeMap:{solid:gZ,sketch:mZ}},json:{write:!0}};var L5;let Wn=L5=class extends ye{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new L5(t)}};v([x(rh)],Wn.prototype,"color",void 0),Wn=L5=v([B("esri.symbols.support.Symbol3DMaterial")],Wn);var j5;let Jl=j5=class extends da{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new j5({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};v([Le({Extrude:"extrude"},{readOnly:!0})],Jl.prototype,"type",void 0),v([x({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Jl.prototype,"size",void 0),v([x({type:Wn,json:{write:!0}})],Jl.prototype,"material",void 0),v([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Jl.prototype,"castShadows",void 0),v([x(JP)],Jl.prototype,"edges",void 0),Jl=j5=v([B("esri.symbols.ExtrudeSymbol3DLayer")],Jl);const KP=Jl;let Uf=class extends Tn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};v([Le({esriSLS:"simple-line"},{readOnly:!0})],Uf.prototype,"type",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Uf.prototype,"width",void 0),Uf=v([B("esri.symbols.LineSymbol")],Uf);const vZ=Uf,wZ=["begin","end","begin-end"],ZP=["arrow","circle","square","diamond","cross","x"];var D5;let Po=D5=class extends ye{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new D5({color:se(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};v([x({type:["begin","end","begin-end"],json:{write:!0}})],Po.prototype,"placement",void 0),v([Le({"line-marker":"line-marker"},{readOnly:!0}),x({json:{origins:{"web-map":{write:!1}}}})],Po.prototype,"type",void 0),v([x({type:ZP})],Po.prototype,"style",void 0),v([Ee("style")],Po.prototype,"writeStyle",null),v([x({type:Be,value:null,json:{write:{allowNull:!0}}})],Po.prototype,"color",null),v([Me("color")],Po.prototype,"readColor",null),v([Ee("color")],Po.prototype,"writeColor",null),Po=D5=v([B("esri.symbols.LineSymbolMarker")],Po);const bZ=Po;var z5;const j3=new tt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Aa=z5=class extends vZ{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,h){if(t&&typeof t!="string")return t;const f={};return t!=null&&(f.style=t),e!=null&&(f.color=e),i!=null&&(f.width=It(i)),r!=null&&(f.cap=r),s!=null&&(f.join=s),h!=null&&(f.miterLimit=It(h)),f}clone(){var t;return new z5({color:se(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};v([Le({esriSLS:"simple-line"},{readOnly:!0})],Aa.prototype,"type",void 0),v([x({type:j3.apiValues,json:{read:j3.read,write:j3.write}})],Aa.prototype,"style",void 0),v([x({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Aa.prototype,"cap",void 0),v([x({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Aa.prototype,"join",void 0),v([x({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":bZ}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Aa.prototype,"marker",void 0),v([x({type:Number,json:{read:!1,write:!1}})],Aa.prototype,"miterLimit",void 0),Aa=z5=v([B("esri.symbols.SimpleLineSymbol")],Aa);const Is=Aa;let Bf=class extends Tn{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};v([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],Bf.prototype,"outline",void 0),v([x({type:["simple-fill","picture-fill"],readOnly:!0})],Bf.prototype,"type",void 0),Bf=v([B("esri.symbols.FillSymbol")],Bf);const YP=Bf;let bv=class extends ye{constructor(e){super(e)}clone(){}};v([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],bv.prototype,"type",void 0),bv=v([B("esri.symbols.patterns.LinePattern3D")],bv);const XP=bv,_Z=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var V5;const xZ=Ir()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Hf=V5=class extends XP{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new V5(t)}};v([x({type:["style"]})],Hf.prototype,"type",void 0),v([Le(xZ),x({type:_Z})],Hf.prototype,"style",void 0),Hf=V5=v([B("esri.symbols.patterns.LineStylePattern3D")],Hf);const a7=Hf;let _v=class extends ye{constructor(e){super(e)}clone(){}};v([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],_v.prototype,"type",void 0),_v=v([B("esri.symbols.patterns.Pattern3D")],_v);const QP=_v,SZ=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var G5;let Wf=G5=class extends QP{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new G5(t)}};v([x({type:["style"]})],Wf.prototype,"type",void 0),v([x({type:SZ,json:{read:!0,write:!0}})],Wf.prototype,"style",void 0),Wf=G5=v([B("esri.symbols.patterns.StylePattern3D")],Wf);const eR=Wf,MZ={types:{key:"type",base:QP,typeMap:{style:eR}},json:{write:!0}},tR={types:{key:"type",base:XP,typeMap:{style:a7}},json:{write:!0}},G1=new Be("white");new Be("black");const $Z=new Be([255,255,255,0]);function TZ(t){return t.r===0&&t.g===0&&t.b===0}var q5;let q1=q5=class extends Wn{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new q5(t)}};v([Le({multiply:"multiply",replace:"replace",tint:"tint"})],q1.prototype,"colorMixMode",void 0),q1=q5=v([B("esri.symbols.support.Symbol3DFillMaterial")],q1);function ab(t=PZ){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function l7(t,e,i,r,s,h,f=ab()){return f[0]=t,f[1]=e,f[2]=i,f[3]=r,f[4]=s,f[5]=h,f}function V_e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new At(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function IZ(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function iR(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function lb(t){return t[0]>=t[3]?0:t[3]-t[0]}function ub(t){return t[1]>=t[4]?0:t[4]-t[1]}function hb(t){return t[2]>=t[5]?0:t[5]-t[2]}function EZ(t,e=[0,0,0]){return e[0]=t[0]+lb(t)/2,e[1]=t[1]+ub(t)/2,e[2]=t[2]+hb(t)/2,e}function G_e(t,e=[0,0,0]){return e[0]=lb(t),e[1]=ub(t),e[2]=hb(t),e}function q_e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function U_e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function AZ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function rR(t){return t?AZ(t,C8):ab(C8)}function CZ(t,e){return e||(e=$s()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function B_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function kZ(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function U5(t){return t.length===6}function OZ(t){return lb(t)===0&&ub(t)===0&&hb(t)===0}function H_e(t,e,i){if(t==null||e==null)return t===e;if(!U5(t)||!U5(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const C8=[1/0,1/0,1/0,-1/0,-1/0,-1/0],PZ=[0,0,0,0,0,0];ab();function W_e(t,{isPrimitive:e,width:i,depth:r,height:s}){const h=e?10:1;if(i==null&&s==null&&r==null)return[h*t[0],h*t[1],h*t[2]];const f=fr(i,r,s);let m;for(let b=0;b<3;b++){const S=f[b];if(S!=null){m=S/t[b];break}}for(let b=0;b<3;b++)f[b]==null&&(f[b]=t[b]*m);return f}const RZ=l7(-.5,-.5,-.5,.5,.5,.5),FZ=l7(-.5,-.5,0,.5,.5,1),NZ=l7(-.5,-.5,0,.5,.5,.5);function J_e(t){switch(t){case"sphere":case"cube":case"diamond":return RZ;case"cylinder":case"cone":case"inverted-cone":return FZ;case"tetrahedron":return NZ;default:return}}const u7=["butt","square","round"],LZ=[...u7,"none"],nR=["miter","bevel","round"];var B5;let Fh=B5=class extends ye{constructor(t){super(t),this.color=new Be([0,0,0,1]),this.size=ul(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new B5(t)}};v([x(rh)],Fh.prototype,"color",void 0),v([x(ha)],Fh.prototype,"size",void 0),v([x(tR)],Fh.prototype,"pattern",void 0),v([x({type:u7,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Fh.prototype,"patternCap",void 0),Fh=B5=v([B("esri.symbols.support.Symbol3DOutline")],Fh);var xv;let Ca=xv=class extends da{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new xv(t)}static fromSimpleFillSymbol(t){var r,s,h;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new a7({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((s=t.outline)==null?void 0:s.color)??G1).clone(),pattern:e};return e&&((h=t.outline)!=null&&h.cap)&&(i.patternCap=t.outline.cap),new xv({material:new q1({color:(t.color??$Z).clone()}),pattern:t.style&&t.style!=="solid"?new eR({style:t.style}):null,outline:i})}};v([Le({Fill:"fill"},{readOnly:!0})],Ca.prototype,"type",void 0),v([x({type:q1,json:{write:!0}})],Ca.prototype,"material",void 0),v([x(MZ)],Ca.prototype,"pattern",void 0),v([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ca.prototype,"castShadows",void 0),v([x({type:Fh,json:{write:!0}})],Ca.prototype,"outline",void 0),v([x(JP)],Ca.prototype,"edges",void 0),Ca=xv=v([B("esri.symbols.FillSymbol3DLayer")],Ca);const am=Ca,jZ=["none","underline","line-through"],DZ=["normal","italic","oblique"],zZ=["normal","lighter","bold","bolder"],sR={type:Number,cast:t=>{const e=fs(t);return e===0?1:fi(e,.1,4)},nonNullable:!0},VZ=["left","right","center"],GZ=["baseline","top","middle","bottom"],oR={type:VZ,nonNullable:!0},aR={type:GZ,nonNullable:!0};var H5;let ka=H5=class extends ye{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return It(t)}clone(){return new H5({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};v([x({type:jZ,json:{default:"none",write:!0}})],ka.prototype,"decoration",void 0),v([x({type:String,json:{write:!0}})],ka.prototype,"family",void 0),v([x({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ka.prototype,"size",void 0),v([vt("size")],ka.prototype,"castSize",null),v([x({type:DZ,json:{default:"normal",write:!0}})],ka.prototype,"style",void 0),v([x({type:zZ,json:{default:"normal",write:!0}})],ka.prototype,"weight",void 0),ka=H5=v([B("esri.symbols.Font")],ka);const cb=ka;function P0(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=ms(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=_S(t,e.portalItem.itemUrl);r!=null&&qZ.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return W5(t,e&&e.portal)}function lm(t,e,i=Iy.YES){if(t==null)return t;!Bn(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=ms(t);if(e){const s=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(s){const h=W5(s,e.portal),f=W5(r,e.portal);r=_S(f,h,h),r!=null&&r!==f&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=uR(r,e==null?void 0:e.portal),Bn(r)&&(r=co(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Bn(r)&&!dp(r)&&i===Iy.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function h7(t,e,i){return P0(t,i)}function ip(t,e,i,r){const s=lm(t,r);s!==void 0&&(e[i]=s)}const lR=/\/items\/([^\/]+)\/resources\/(.*)/,qZ=/^\.\/resources\//;function UZ(t){const e=(t==null?void 0:t.match(lR))??null;return(e==null?void 0:e[1])??null}function BZ(t){const e=(t==null?void 0:t.match(lR))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:f,extension:m}=Z$(i);return{prefix:null,filename:f,extension:m}}const{path:s,extension:h}=Z$(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:h}}function uR(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?G9(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function W5(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=vS();return e0(r,`${r.scheme}://${i}`)?G9(t,e.portalHostname,i):G9(t,i,e.portalHostname)}var Iy;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Iy||(Iy={}));const K_e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Iy},ensureMainOnlineDomain:uR,fromJSON:P0,itemIdFromResourceUrl:UZ,prefixAndFilenameFromResourceUrl:BZ,read:h7,toJSON:lm,write:ip},Symbol.toStringTag,{value:"Module"}));var J5;const HZ=Ir()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Nh=J5=class extends ye{constructor(t){super(t)}readHref(t,e,i){return t?P0(t,i):e.dataURI}writeHref(t,e,i,r){t&&(dp(t)?e.dataURI=t:(e.href=lm(t,r),Bn(e.href)&&(e.href=co(e.href))))}clone(){return new J5({href:this.href,primitive:this.primitive})}};v([x({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Nh.prototype,"href",void 0),v([Me("href")],Nh.prototype,"readHref",null),v([Ee("href",{href:{type:String},dataURI:{type:String}})],Nh.prototype,"writeHref",null),v([Le(HZ)],Nh.prototype,"primitive",void 0),Nh=J5=v([B("esri.symbols.support.IconSymbol3DLayerResource")],Nh);var K5;let Cd=K5=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new K5({x:this.x,y:this.y})}};v([x({type:Number})],Cd.prototype,"x",void 0),v([x({type:Number})],Cd.prototype,"y",void 0),Cd=K5=v([B("esri.symbols.support.Symbol3DAnchorPosition2D")],Cd);var Z5;let Jf=Z5=class extends ye{constructor(t){super(t),this.color=new Be([0,0,0,1]),this.size=ul(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new Z5(t)}};v([x(rh)],Jf.prototype,"color",void 0),v([x(ha)],Jf.prototype,"size",void 0),Jf=Z5=v([B("esri.symbols.support.Symbol3DIconOutline")],Jf);var Kp;const hR="esri.symbols.IconSymbol3DLayer";let Ro=Kp=class extends da{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Kp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||G1,i=k8(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||G1).clone()}:null;return new Kp({size:t.size,resource:{primitive:JZ(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||TZ(t.color)?G1:t.color,i=k8(t);return new Kp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Kp({resource:{href:Yk({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function k8(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=O8(t.xoffset),s=O8(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function O8(t){return isFinite(t)?t:0}v([x({type:Wn,json:{write:!0}})],Ro.prototype,"material",void 0),v([x({type:Nh,json:{write:!0}})],Ro.prototype,"resource",void 0),v([Le({Icon:"icon"},{readOnly:!0})],Ro.prototype,"type",void 0),v([x(ha)],Ro.prototype,"size",void 0),v([Le({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),x({json:{default:"center"}})],Ro.prototype,"anchor",void 0),v([x({type:Cd,json:{type:[Number],read:{reader:t=>new Cd({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ro.prototype,"anchorPosition",void 0),v([x({type:Jf,json:{write:!0}})],Ro.prototype,"outline",void 0),Ro=Kp=v([B(hR)],Ro);const WZ={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function JZ(t){return WZ[t]||(fe.getLogger(hR).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Mc=Ro;let Lh=class extends ti(ye){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};v([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Lh.prototype,"type",void 0),v([x({type:wZ,json:{default:"begin-end",write:!0}})],Lh.prototype,"placement",void 0),v([x({type:ZP,json:{default:"arrow",write:!0}})],Lh.prototype,"style",void 0),v([x({type:Be,json:{type:[Bt],default:null,write:!0}})],Lh.prototype,"color",void 0),Lh=v([B("esri.symbols.LineStyleMarker3D")],Lh);const Y5=Lh;var Sv;let Fo=Sv=class extends da{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ul(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Sv(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??ul(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new a7({style:t.style}):null,material:new Wn({color:(t.color||G1).clone()}),marker:t.marker?new Y5({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new Sv(e)}};v([x({type:Wn,json:{write:!0}})],Fo.prototype,"material",void 0),v([Le({Line:"line"},{readOnly:!0})],Fo.prototype,"type",void 0),v([x({type:nR,json:{write:!0,default:"miter"}})],Fo.prototype,"join",void 0),v([x({type:u7,json:{write:!0,default:"butt"}})],Fo.prototype,"cap",void 0),v([x(ha)],Fo.prototype,"size",void 0),v([x(tR)],Fo.prototype,"pattern",void 0),v([x({types:{key:"type",base:Y5,typeMap:{style:Y5}},json:{write:!0}})],Fo.prototype,"marker",void 0),Fo=Sv=v([B("esri.symbols.LineSymbol3DLayer")],Fo);const um=Fo;var X5;const KZ=Ir()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Kf=X5=class extends ye{clone(){return new X5({href:this.href,primitive:this.primitive})}};v([x({type:String,json:{read:h7,write:ip}})],Kf.prototype,"href",void 0),v([Le(KZ)],Kf.prototype,"primitive",void 0),Kf=X5=v([B("esri.symbols.support.ObjectSymbol3DLayerResource")],Kf);var Q5;let yc=Q5=class extends Oe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Q5({x:this.x,y:this.y,z:this.z})}};v([x({type:Number})],yc.prototype,"x",void 0),v([x({type:Number})],yc.prototype,"y",void 0),v([x({type:Number})],yc.prototype,"z",void 0),yc=Q5=v([B("esri.symbols.support.Symbol3DAnchorPosition3D")],yc);var e4;let Lr=e4=class extends da{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new e4({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};v([x({type:Wn,json:{write:!0}})],Lr.prototype,"material",void 0),v([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Lr.prototype,"castShadows",void 0),v([x({type:Kf,json:{write:!0}})],Lr.prototype,"resource",void 0),v([Le({Object:"object"},{readOnly:!0})],Lr.prototype,"type",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"width",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"height",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"depth",void 0),v([Le({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),x({json:{default:"origin"}})],Lr.prototype,"anchor",void 0),v([x({type:yc,json:{type:[Number],read:{reader:t=>new yc({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Lr.prototype,"anchorPosition",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"heading",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"tilt",void 0),v([x({type:Number,json:{write:!0}})],Lr.prototype,"roll",void 0),v([x({readOnly:!0})],Lr.prototype,"isPrimitive",null),Lr=e4=v([B("esri.symbols.ObjectSymbol3DLayer")],Lr);const c7=Lr;var t4;let Qr=t4=class extends da{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new t4({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};v([x({type:Wn,json:{write:!0}})],Qr.prototype,"material",void 0),v([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Qr.prototype,"castShadows",void 0),v([Le({Path:"path"},{readOnly:!0})],Qr.prototype,"type",void 0),v([x({type:["circle","quad"],json:{write:!0,default:"circle"}})],Qr.prototype,"profile",void 0),v([x({type:nR,json:{write:!0,default:"miter"}})],Qr.prototype,"join",void 0),v([x({type:LZ,json:{write:!0,default:"butt"}})],Qr.prototype,"cap",void 0),v([x({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Qr.prototype,"width",void 0),v([Me("width",["width","size","height"])],Qr.prototype,"readWidth",null),v([x({type:Number,json:{write:!0}})],Qr.prototype,"height",void 0),v([Me("height",["height","size","width"])],Qr.prototype,"readHeight",null),v([x({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Qr.prototype,"anchor",void 0),v([x({type:["heading","all"],json:{write:!0,default:"all"}})],Qr.prototype,"profileRotation",void 0),Qr=t4=v([B("esri.symbols.PathSymbol3DLayer")],Qr);const p7=Qr;var i4;let kd=i4=class extends ye{constructor(){super(...arguments),this.color=new Be([0,0,0,1]),this.size=0}clone(){const t={color:se(this.color),size:this.size};return new i4(t)}};v([x(rh)],kd.prototype,"color",void 0),v([x(ha)],kd.prototype,"size",void 0),kd=i4=v([B("esri.symbols.support.Symbol3DHalo")],kd);let U1=class extends ti(ye){constructor(e){super(e),this.color=null}};v([x(rh)],U1.prototype,"color",void 0),U1=v([B("esri.symbols.support.Symbol3DTextBackground")],U1);var Mv;let cn=Mv=class extends da{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const s={...r,textSymbol3D:!0};e.font=t.write({},s),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Mv({enabled:this.enabled,font:this.font&&se(this.font),halo:this.halo&&se(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:se(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Mv({font:t.font!=null?t.font.clone():new cb,halo:ZZ(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Wn({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new U1({color:t.backgroundColor.clone()}):null})}};function ZZ(t,e){return t&&e!=null&&e>0?new kd({color:se(t),size:e}):null}v([x({type:cb,json:{write:!0}})],cn.prototype,"font",null),v([Ee("font")],cn.prototype,"writeFont",null),v([x({type:kd,json:{write:!0}})],cn.prototype,"halo",void 0),v([x({...oR,json:{default:"center",write:!0}})],cn.prototype,"horizontalAlignment",void 0),v([x({...sR,json:{default:1,write:!0}})],cn.prototype,"lineHeight",void 0),v([x({type:Wn,json:{write:!0}})],cn.prototype,"material",void 0),v([x({type:U1,json:{write:!0}})],cn.prototype,"background",void 0),v([x(ha)],cn.prototype,"size",null),v([x({type:String,json:{write:!0}})],cn.prototype,"text",void 0),v([Le({Text:"text"},{readOnly:!0})],cn.prototype,"type",void 0),v([x({...aR,json:{default:"baseline",write:!0}})],cn.prototype,"verticalAlignment",void 0),cn=Mv=v([B("esri.symbols.TextSymbol3DLayer")],cn);const R0=cn;var r4;let Kl=r4=class extends da{constructor(t){super(t),this.color=n4.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new r4({color:se(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};v([x({type:Be,nonNullable:!0,json:{type:[Bt],write:(t,e,i)=>e[i]=t.toArray(Be.AlphaMode.UNLESS_OPAQUE),default:()=>n4.clone(),defaultEquals:t=>t.toCss(!0)===n4.toCss(!0)}})],Kl.prototype,"color",void 0),v([Le({Water:"water"},{readOnly:!0})],Kl.prototype,"type",void 0),v([x({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Kl.prototype,"waterbodySize",void 0),v([x({type:Number,json:{write:!0,default:null}})],Kl.prototype,"waveDirection",void 0),v([x({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Kl.prototype,"waveStrength",void 0),Kl=r4=v([B("esri.symbols.WaterSymbol3DLayer")],Kl);const n4=new Be([0,119,190]),cR=Kl;var s4;let jh=s4=class extends Oe{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new s4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};v([x({type:String})],jh.prototype,"name",void 0),v([x({type:String})],jh.prototype,"styleUrl",void 0),v([x({type:String})],jh.prototype,"styleName",void 0),v([x({type:on})],jh.prototype,"portal",void 0),jh=s4=v([B("esri.symbols.support.StyleOrigin")],jh);const o4=jh;var a4;let B1=a4=class extends Oe{constructor(){super(...arguments),this.url=""}clone(){return new a4({url:this.url})}};v([x({type:String})],B1.prototype,"url",void 0),B1=a4=v([B("esri.symbols.support.Thumbnail")],B1);const pR={icon:Mc,object:c7,line:um,path:p7,fill:am,extrude:KP,text:R0,water:cR},YZ=qe.ofType({base:da,key:"type",typeMap:pR,errorContext:"symbol-layer"});let No=class extends Tn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||qe;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&fe.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Jc(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=P0(e.styleUrl,r);return new o4({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new o4({portal:r&&r.portal||on.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Ss("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let h=lm(e.styleUrl,s);Bn(h)&&(h=co(h)),i.styleOrigin={styleUrl:h,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!Kk(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new Ss("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof da||e&&pR[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};v([x({json:{read:!1,write:!1}})],No.prototype,"color",null),v([x({type:YZ,nonNullable:!0,json:{write:!0}}),vt(Rk)],No.prototype,"symbolLayers",null),v([x({type:o4})],No.prototype,"styleOrigin",void 0),v([Me("styleOrigin")],No.prototype,"readStyleOrigin",null),v([Ee("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],No.prototype,"writeStyleOrigin",null),v([x({type:B1,json:{read:!1}})],No.prototype,"thumbnail",void 0),v([x({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],No.prototype,"type",void 0),No=v([B("esri.symbols.Symbol3D")],No);const F0=No;let Zf=class extends ye{constructor(e){super(e),this.visible=!0}clone(){}};v([x({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Zf.prototype,"type",void 0),v([x({readOnly:!0})],Zf.prototype,"visible",void 0),Zf=v([B("esri.symbols.callouts.Callout3D")],Zf);const dR=Zf;var l4;let $v=l4=class extends ye{constructor(){super(...arguments),this.color=new Be("white")}clone(){return new l4({color:se(this.color)})}};v([x(rh)],$v.prototype,"color",void 0),$v=l4=v([B("esri.symbols.callouts.LineCallout3DBorder")],$v);const fR=$v;Object.freeze(Object.defineProperty({__proto__:null,default:fR},Symbol.toStringTag,{value:"Module"}));var u4;let Zl=u4=class extends dR{constructor(t){super(t),this.type="line",this.color=new Be([0,0,0,1]),this.size=ul(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new u4({color:se(this.color),size:this.size,border:se(this.border)})}};v([Le({line:"line"},{readOnly:!0})],Zl.prototype,"type",void 0),v([x(rh)],Zl.prototype,"color",void 0),v([x(ha)],Zl.prototype,"size",void 0),v([x({type:fR,json:{write:!0}})],Zl.prototype,"border",void 0),v([x({readOnly:!0})],Zl.prototype,"visible",null),Zl=u4=v([B("esri.symbols.callouts.LineCallout3D")],Zl);const XZ=Zl;function d7(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function yR(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!d7(t)}const mR={types:{key:"type",base:dR,typeMap:{line:XZ}},json:{write:!0}};var h4;let Zp=h4=class extends ye{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new h4({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};v([x(ha)],Zp.prototype,"screenLength",void 0),v([x({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Zp.prototype,"minWorldLength",void 0),v([x({type:Number,json:{write:!0}})],Zp.prototype,"maxWorldLength",void 0),Zp=h4=v([B("esri.symbols.support.Symbol3DVerticalOffset")],Zp);const gR=Zp;var Tv;const vR=qe.ofType({base:null,key:"type",typeMap:{text:R0}});let Yl=Tv=class extends F0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new vR,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return yR(this)}hasVisibleVerticalOffset(){return d7(this)}clone(){return new Tv({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail),callout:se(this.callout),verticalOffset:se(this.verticalOffset)})}static fromTextSymbol(t){return new Tv({symbolLayers:[R0.fromTextSymbol(t)]})}};v([x({type:gR,json:{write:!0}})],Yl.prototype,"verticalOffset",void 0),v([x(mR)],Yl.prototype,"callout",void 0),v([x({json:{read:!1,write:!1}})],Yl.prototype,"styleOrigin",void 0),v([x({type:vR})],Yl.prototype,"symbolLayers",void 0),v([Le({LabelSymbol3D:"label-3d"},{readOnly:!0})],Yl.prototype,"type",void 0),Yl=Tv=v([B("esri.symbols.LabelSymbol3D")],Yl);const pb=Yl;var Iv;const wR=qe.ofType({base:null,key:"type",typeMap:{line:um,path:p7}}),QZ=qe.ofType({base:null,key:"type",typeMap:{line:um,path:p7}});let Yf=Iv=class extends F0{constructor(t){super(t),this.symbolLayers=new wR,this.type="line-3d"}clone(){return new Iv({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Iv({symbolLayers:[um.fromSimpleLineSymbol(t)]})}};v([x({type:wR,json:{type:QZ}})],Yf.prototype,"symbolLayers",void 0),v([Le({LineSymbol3D:"line-3d"},{readOnly:!0})],Yf.prototype,"type",void 0),Yf=Iv=v([B("esri.symbols.LineSymbol3D")],Yf);const db=Yf;let Xl=class extends Tn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};v([x({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Xl.prototype,"angle",void 0),v([x({type:["simple-marker","picture-marker"],readOnly:!0})],Xl.prototype,"type",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Xl.prototype,"xoffset",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Xl.prototype,"yoffset",void 0),v([x({type:Number,cast:t=>t==="auto"?t:It(t),json:{write:!0}})],Xl.prototype,"size",void 0),Xl=v([B("esri.symbols.MarkerSymbol")],Xl);const bR=Xl;var Ev;const _R=qe.ofType({base:null,key:"type",typeMap:{fill:am}});let Xf=Ev=class extends F0{constructor(t){super(t),this.symbolLayers=new _R,this.type="mesh-3d"}clone(){return new Ev({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Ev({symbolLayers:[am.fromSimpleFillSymbol(t)]})}};v([x({type:_R})],Xf.prototype,"symbolLayers",void 0),v([Le({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Xf.prototype,"type",void 0),Xf=Ev=v([B("esri.symbols.MeshSymbol3D")],Xf);const fb=Xf;function eY(t,e,i){return e.imageData?Yk({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):xR(e.url,i)}function xR(t,e){var i;return iY(e)&&!Bn(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Kc(e.layer.parsedUrl.path,"images",t):P0(t,e)}function tY(t,e,i,r){if(dp(t)){const s=gy(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&ip(i.url,e,"url",r)}else ip(t,e,"url",r)}const SR={json:{read:{source:["imageData","url"],reader:eY},write:{writer(t,e,i,r){tY(t,e,this.source,r)}}}},MR={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=xR(e.url,i)),r}}}};function iY(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var c4;let ls=c4=class extends YP{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=It(i)),r!=null&&(s.height=It(r)),s}clone(){const t=new c4({color:se(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",se(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};v([Le({esriPFS:"picture-fill"},{readOnly:!0})],ls.prototype,"type",void 0),v([x(SR)],ls.prototype,"url",void 0),v([x({type:Number,json:{write:!0}})],ls.prototype,"xscale",void 0),v([x({type:Number,json:{write:!0}})],ls.prototype,"yscale",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ls.prototype,"width",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ls.prototype,"height",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ls.prototype,"xoffset",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ls.prototype,"yoffset",void 0),v([x(MR)],ls.prototype,"source",void 0),ls=c4=v([B("esri.symbols.PictureFillSymbol")],ls);const $R=ls;var p4;let qs=p4=class extends bR{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=It(e)),i!=null&&(r.height=It(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new p4({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",se(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};v([x({json:{write:!1}})],qs.prototype,"color",void 0),v([Le({esriPMS:"picture-marker"},{readOnly:!0})],qs.prototype,"type",void 0),v([x(SR)],qs.prototype,"url",void 0),v([x(MR)],qs.prototype,"source",void 0),v([x({type:Number,cast:It,json:{write:!0}})],qs.prototype,"height",void 0),v([Me("height",["height","size"])],qs.prototype,"readHeight",null),v([x({type:Number,cast:It,json:{write:!0}})],qs.prototype,"width",void 0),v([x({json:{write:!1}})],qs.prototype,"size",void 0),qs=p4=v([B("esri.symbols.PictureMarkerSymbol")],qs);const yb=qs;var Dh;const TR=qe.ofType({base:null,key:"type",typeMap:{icon:Mc,object:c7,text:R0}});let zh=Dh=class extends F0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new TR,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return yR(this)}hasVisibleVerticalOffset(){return d7(this)}clone(){return new Dh({verticalOffset:se(this.verticalOffset),callout:se(this.callout),styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Dh({symbolLayers:[Mc.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Dh({symbolLayers:[Mc.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var r,s;if(((s=(r=t.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Dh(i!=null&&i.callout?{symbolLayers:[Mc.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Mc.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new Dh({symbolLayers:[R0.fromTextSymbol(t)]})}};v([x({type:gR,json:{write:!0}})],zh.prototype,"verticalOffset",void 0),v([x(mR)],zh.prototype,"callout",void 0),v([x({type:TR,json:{origins:{"web-scene":{write:!0}}}})],zh.prototype,"symbolLayers",void 0),v([Le({PointSymbol3D:"point-3d"},{readOnly:!0})],zh.prototype,"type",void 0),zh=Dh=v([B("esri.symbols.PointSymbol3D")],zh);const $c=zh;var Qf;const IR=qe.ofType({base:null,key:"type",typeMap:{extrude:KP,fill:am,icon:Mc,line:um,object:c7,text:R0,water:cR}});let e1=Qf=class extends F0{constructor(t){super(t),this.symbolLayers=new IR,this.type="polygon-3d"}clone(){return new Qf({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromJSON(t){const e=new Qf;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.getItemAt(0).type==="fill"&&e.symbolLayers.getItemAt(1).type==="line"){const i=e.symbolLayers.getItemAt(0),r=e.symbolLayers.getItemAt(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new Qf({symbolLayers:[am.fromSimpleFillSymbol(t)]})}};v([x({type:IR,json:{write:!0}})],e1.prototype,"symbolLayers",void 0),v([Le({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],e1.prototype,"type",void 0),e1=Qf=v([B("esri.symbols.PolygonSymbol3D")],e1);const hm=e1;var d4;const D3=new tt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Vh=d4=class extends YP{constructor(...t){super(...t),this.color=new Be([0,0,0,.25]),this.outline=new Is,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new d4({color:se(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};v([x()],Vh.prototype,"color",void 0),v([x()],Vh.prototype,"outline",void 0),v([Le({esriSFS:"simple-fill"},{readOnly:!0})],Vh.prototype,"type",void 0),v([x({type:D3.apiValues,json:{read:D3.read,write:D3.write}})],Vh.prototype,"style",void 0),Vh=d4=v([B("esri.symbols.SimpleFillSymbol")],Vh);const nh=Vh;var f4;const z3=new tt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Lo=f4=class extends bR{constructor(...t){super(...t),this.color=new Be([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Is}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=It(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new f4({angle:this.angle,color:se(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};v([x()],Lo.prototype,"color",void 0),v([Ee("color")],Lo.prototype,"writeColor",null),v([Le({esriSMS:"simple-marker"},{readOnly:!0})],Lo.prototype,"type",void 0),v([x()],Lo.prototype,"size",void 0),v([x({type:z3.apiValues,json:{read:z3.read,write:z3.write}})],Lo.prototype,"style",void 0),v([x({type:String,json:{write:!0}})],Lo.prototype,"path",null),v([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],Lo.prototype,"outline",void 0),Lo=f4=v([B("esri.symbols.SimpleMarkerSymbol")],Lo);const sh=Lo;var y4;let ui=y4=class extends Tn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new cb,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return It(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new y4({angle:this.angle,backgroundColor:se(this.backgroundColor),borderLineColor:se(this.borderLineColor),borderLineSize:this.borderLineSize,color:se(this.color),font:this.font&&this.font.clone(),haloColor:se(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};v([x({type:Be,json:{write:!0}})],ui.prototype,"backgroundColor",void 0),v([x({type:Be,json:{write:!0}})],ui.prototype,"borderLineColor",void 0),v([x({type:Number,json:{write:!0},cast:It})],ui.prototype,"borderLineSize",void 0),v([x({type:cb,json:{write:!0}})],ui.prototype,"font",void 0),v([x({...oR,json:{write:!0}})],ui.prototype,"horizontalAlignment",void 0),v([x({type:Boolean,json:{write:!0}})],ui.prototype,"kerning",void 0),v([x({type:Be,json:{write:!0}})],ui.prototype,"haloColor",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ui.prototype,"haloSize",void 0),v([x({type:Boolean,json:{write:!0}})],ui.prototype,"rightToLeft",void 0),v([x({type:Boolean,json:{write:!0}})],ui.prototype,"rotated",void 0),v([x({type:String,json:{write:!0}})],ui.prototype,"text",void 0),v([Le({esriTS:"text"},{readOnly:!0})],ui.prototype,"type",void 0),v([x({...aR,json:{write:!0}})],ui.prototype,"verticalAlignment",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ui.prototype,"xoffset",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ui.prototype,"yoffset",void 0),v([x({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ui.prototype,"angle",void 0),v([x({type:Number,json:{write:!0}})],ui.prototype,"width",void 0),v([x({type:Number})],ui.prototype,"lineWidth",void 0),v([Ee("lineWidth")],ui.prototype,"writeLineWidth",null),v([vt("lineWidth")],ui.prototype,"castLineWidth",null),v([x(sR)],ui.prototype,"lineHeight",void 0),v([Ee("lineHeight")],ui.prototype,"writeLineHeight",null),ui=y4=v([B("esri.symbols.TextSymbol")],ui);const N0=ui;var m4;let Us=m4=class extends Tn{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:on.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new m4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const m=r&&i.get(r);if(m)return m.clone()}const s=await rY();Oi(e);const h=s.resolveWebStyleSymbol(this,{portal:this.portal},t,e);h.catch(m=>{fe.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",m)});const f=await h;return t==="webRef"&&f.type==="point-3d"||t==="cimRef"&&f.type==="cim"?(i!=null&&i.set(r,f.clone()),f):null}};function rY(){return he(()=>import("./webStyleSymbolUtils-818e26c6.js"),["assets/webStyleSymbolUtils-818e26c6.js","assets/devEnvironmentUtils-5002a058.js"])}v([x({json:{write:!1}})],Us.prototype,"color",void 0),v([x({type:String,json:{write:!0}})],Us.prototype,"styleName",void 0),v([x({type:on,json:{write:!1}})],Us.prototype,"portal",void 0),v([x({type:String,json:{read:h7,write:ip}})],Us.prototype,"styleUrl",void 0),v([x({type:B1,json:{read:!1}})],Us.prototype,"thumbnail",void 0),v([x({type:String,json:{write:!0}})],Us.prototype,"name",void 0),v([Le({styleSymbolReference:"web-style"},{readOnly:!0})],Us.prototype,"type",void 0),v([x()],Us.prototype,"_fetchCacheKey",null),Us=m4=v([B("esri.symbols.WebStyleSymbol")],Us);const yp=Us;function mb(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function l0(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Vc={base:Tn,key:"type",typeMap:{"simple-fill":nh,"picture-fill":$R,"picture-marker":yb,"simple-line":Is,"simple-marker":sh,text:N0,"label-3d":pb,"line-3d":db,"mesh-3d":fb,"point-3d":$c,"polygon-3d":hm,"web-style":yp,cim:O0},errorContext:"symbol"},nY={base:Tn,key:"type",typeMap:{"picture-marker":yb,"simple-marker":sh,text:N0,"web-style":yp,cim:O0},errorContext:"symbol"},sY=th({types:Vc}),gb={base:Tn,key:"type",typeMap:{"simple-fill":nh,"picture-fill":$R,"picture-marker":yb,"simple-line":Is,"simple-marker":sh,text:N0,"line-3d":db,"mesh-3d":fb,"point-3d":$c,"polygon-3d":hm,"web-style":yp,cim:O0},errorContext:"symbol"},oY={base:Tn,key:"type",typeMap:{text:N0,"label-3d":pb},errorContext:"symbol"},P8={base:Tn,key:"type",typeMap:{"line-3d":db,"mesh-3d":fb,"point-3d":$c,"polygon-3d":hm,"web-style":yp,cim:O0},errorContext:"symbol"},aY={base:Tn,key:"type",typeMap:{"label-3d":pb},errorContext:"symbol"},ER=sa(Vc);function lY(t){if(!t)return null;const e={};for(const i in t){const r=an(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function uY(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let pn=class extends ti(ye){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:F1(),configurable:!0})}normalizeCtorArgs(e,i,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:i,attributes:r,popupTemplate:s}}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),this._notifyLayer("geometry",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const i of[this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i},this._notifyLayer("attributes",void 0,i,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:uY(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){this.geometry!=null&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,i,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const h={graphic:this,property:e,oldValue:i,newValue:r};e==="attributes"&&(h.attributeName=s),this.layer.graphicChanged(h)}};v([x({value:null,json:{read:lY}})],pn.prototype,"aggregateGeometries",null),v([x({value:null})],pn.prototype,"attributes",null),v([x({value:null,types:fp,json:{read:an}})],pn.prototype,"geometry",null),v([x({type:Boolean})],pn.prototype,"isAggregate",void 0),v([x({clonable:"reference"})],pn.prototype,"layer",void 0),v([x({type:om})],pn.prototype,"popupTemplate",void 0),v([x({clonable:"reference"})],pn.prototype,"sourceLayer",void 0),v([x({value:null,types:Vc})],pn.prototype,"symbol",null),v([x({type:Boolean,value:!0})],pn.prototype,"visible",null),pn=v([B("esri.Graphic")],pn),function(t){t.generateUID=F1}(pn||(pn={}));const Mr=pn;let L0=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,s=0,h=!1){return(r-=s)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),h&&r===i&&(r=e),r+s}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return fi(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function f7(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}const hY=f7(new L0(0,2*Math.PI));f7(new L0(-Math.PI,Math.PI));const y7=f7(new L0(0,360));let Oa=class extends ti(ye){constructor(...e){super(...e),this.position=new ke([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const h={position:e};return i!=null&&(h.heading=i),r!=null&&(h.tilt=r),s!=null&&(h.fov=s),h}return e}writePosition(e,i,r,s){const h=e.clone();h.x=fs(e.x||0),h.y=fs(e.y||0),h.z=e.hasZ?fs(e.z||0):e.z,i[r]=h.write({},s)}readPosition(e,i){const r=new ke;return r.read(e,i),r.x=fs(r.x||0),r.y=fs(r.y||0),r.z=r.hasZ?fs(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};v([x({type:ke,json:{write:{isRequired:!0}}})],Oa.prototype,"position",void 0),v([Ee("position")],Oa.prototype,"writePosition",null),v([Me("position")],Oa.prototype,"readPosition",null),v([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),vt(t=>y7.normalize(fs(t)))],Oa.prototype,"heading",void 0),v([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),vt(t=>fi(fs(t),-180,180))],Oa.prototype,"tilt",void 0),v([x({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Oa.prototype,"fov",void 0),Oa=v([B("esri.Camera")],Oa);const go=Oa;var g4;let Ql=g4=class extends ye{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new g4({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function V3(){return{enabled:!this.camera}}v([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:V3}}}}})],Ql.prototype,"rotation",void 0),v([vt("rotation")],Ql.prototype,"castRotation",null),v([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:V3}}}}})],Ql.prototype,"scale",void 0),v([x({types:fp,json:{read:an,write:!0,origins:{"web-scene":{read:an,write:{overridePolicy:V3}}}}})],Ql.prototype,"targetGeometry",void 0),v([x({type:go,json:{write:!0}})],Ql.prototype,"camera",void 0),Ql=g4=v([B("esri.Viewpoint")],Ql);const _r=Ql;function me(t,e,i={}){return m7(t,e,i,AR)}function Sn(t,e,i={}){return m7(t,e,i,CR)}function m7(t,e,i={},r){let s=null;const h=i.once?(f,m)=>{r(f)&&($i(s),e(f,m))}:(f,m)=>{r(f)&&e(f,m)};if(s=aU(t,h,i.sync,i.equals),i.initial){const f=t();h(f,f)}return s}function un(t,e,i,r={}){let s=null,h=null,f=null;function m(){var I;s&&h&&(h.remove(),(I=r.onListenerRemove)==null||I.call(r,s),s=null,h=null)}function b(I){r.once&&r.once&&$i(f),i(I)}const S=me(t,(I,A)=>{var O;m(),Bw(I)&&(s=I,h=Hw(I,e,b),(O=r.onListenerAdd)==null||O.call(r,I))},{sync:r.sync,initial:!0});return f=$0(()=>{S.remove(),m()}),f}function vb(t,e){return cY(t,CR,e)}function cY(t,e,i){if(yo(i))return Promise.reject(Xt());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let s=null;function h(){s=$i(s)}return new Promise((f,m)=>{s=Dw([Un(i,()=>{h(),m(Xt())}),m7(t,b=>{h(),f(b)},{sync:!1,once:!0},e??AR)])})}function AR(t){return!0}function CR(t){return!!t}const qn={sync:!0},_t={initial:!0},Gh={sync:!0,initial:!0};let H2=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let e;for(e of this._items);return e}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach(i=>{e(i)||this._items.delete(i)}),this}};const pY={statsWorker:()=>he(()=>import("./statsWorker-a767554a.js"),["assets/statsWorker-a767554a.js","assets/quantizationUtils-7b7f0e9b.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js"]),geometryEngineWorker:()=>he(()=>import("./geometryEngineWorker-ba3186c9.js"),["assets/geometryEngineWorker-ba3186c9.js","assets/geometryEngineJSON-fbe3c6b1.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>he(()=>import("./CSVSourceWorker-19e3b36d.js"),["assets/CSVSourceWorker-19e3b36d.js","assets/json-48e3ea08.js","assets/FeatureStore-1ed546e8.js","assets/BoundsStore-22a14f50.js","assets/PooledRBush-315472b9.js","assets/centroid-8e8cfa47.js","assets/utils-5ece330d.js","assets/projectionSupport-a7984413.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js","assets/number-ae984153.js","assets/clientSideDefaults-b7d95c01.js"]),EdgeProcessingWorker:()=>he(()=>import("./EdgeProcessingWorker-63eabf0e.js"),["assets/EdgeProcessingWorker-63eabf0e.js","assets/InterleavedLayout-93752cf7.js","assets/BufferView-dec1102b.js","assets/types-1305598a.js","assets/edgeProcessing-8bfb99bf.js","assets/deduplicate-cad27dd8.js","assets/Indices-50c09fc6.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>he(()=>import("./ElevationSamplerWorker-dad8a330.js"),["assets/ElevationSamplerWorker-dad8a330.js","assets/PooledRBush-315472b9.js","assets/georeference-a777a2a2.js","assets/spatialReferenceEllipsoidUtils-77c5e826.js","assets/vec32-a8b0e3a5.js","assets/BufferView-dec1102b.js"]),FeatureServiceSnappingSourceWorker:()=>he(()=>import("./FeatureServiceSnappingSourceWorker-a98ace30.js"),["assets/FeatureServiceSnappingSourceWorker-a98ace30.js","assets/FeatureStore-1ed546e8.js","assets/BoundsStore-22a14f50.js","assets/PooledRBush-315472b9.js","assets/centroid-8e8cfa47.js","assets/utils-5ece330d.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js"]),GeoJSONSourceWorker:()=>he(()=>import("./GeoJSONSourceWorker-c85133ec.js"),["assets/GeoJSONSourceWorker-c85133ec.js","assets/FeatureStore-1ed546e8.js","assets/BoundsStore-22a14f50.js","assets/PooledRBush-315472b9.js","assets/centroid-8e8cfa47.js","assets/utils-5ece330d.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js","assets/geojson-58c4aae5.js","assets/clientSideDefaults-b7d95c01.js","assets/sourceUtils-a237a89b.js"]),LercWorker:()=>he(()=>import("./LercWorker-cff8329a.js"),[]),MemorySourceWorker:()=>he(()=>import("./MemorySourceWorker-fdb86435.js"),["assets/MemorySourceWorker-fdb86435.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-1ed546e8.js","assets/BoundsStore-22a14f50.js","assets/PooledRBush-315472b9.js","assets/centroid-8e8cfa47.js","assets/utils-5ece330d.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js","assets/clientSideDefaults-b7d95c01.js","assets/sourceUtils-a237a89b.js"]),PBFDecoderWorker:()=>he(()=>import("./PBFDecoderWorker-c3ef0486.js"),[]),Pipeline:()=>he(()=>import("./Pipeline-18dc7474.js"),["assets/Pipeline-18dc7474.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/utils-5ece330d.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js","assets/FeatureStore2D-5651cf69.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/centroid-8e8cfa47.js","assets/definitions-43101aab.js","assets/visualVariablesUtils-79ded321.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/visualVariablesUtils-15c65c16.js","assets/ogcFeatureUtils-737ec3b8.js","assets/geojson-58c4aae5.js","assets/clientSideDefaults-b7d95c01.js","assets/createConnection-b126002c.js"]),PointCloudWorker:()=>he(()=>import("./PointCloudWorker-8615a3e6.js"),["assets/PointCloudWorker-8615a3e6.js","assets/I3SBinaryReader-5f07f5c2.js","assets/VertexAttribute-9f2e53ec.js","assets/PointCloudUniqueValueRenderer-13e12492.js"]),RasterWorker:()=>he(()=>import("./RasterWorker-b1b14344.js"),["assets/RasterWorker-b1b14344.js","assets/dataUtils-1e2e12a8.js","assets/RasterSymbolizer-713e85e8.js","assets/colorUtils-c0f43caf.js","assets/utils-d70d9c52.js","assets/rasterProjectionHelper-2eb0d45f.js"]),SceneLayerSnappingSourceWorker:()=>he(()=>import("./SceneLayerSnappingSourceWorker-c6088918.js"),["assets/SceneLayerSnappingSourceWorker-c6088918.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/utils-5ece330d.js","assets/InterleavedLayout-93752cf7.js","assets/BufferView-dec1102b.js","assets/types-1305598a.js","assets/edgeProcessing-8bfb99bf.js","assets/deduplicate-cad27dd8.js","assets/Indices-50c09fc6.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>he(()=>import("./SceneLayerWorker-e90263c2.js"),[]),WFSSourceWorker:()=>he(()=>import("./WFSSourceWorker-260a630b.js"),["assets/WFSSourceWorker-260a630b.js","assets/FeatureStore-1ed546e8.js","assets/BoundsStore-22a14f50.js","assets/PooledRBush-315472b9.js","assets/centroid-8e8cfa47.js","assets/utils-5ece330d.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/QueryEngine-bbd029a2.js","assets/QueryEngineResult-5b7608b8.js","assets/quantizationUtils-7b7f0e9b.js","assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js","assets/utils-cc37fbbf.js","assets/generateRendererUtils-6b01664b.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-9ef75cf5.js","assets/geojson-58c4aae5.js","assets/sourceUtils-a237a89b.js","assets/wfsUtils-5e7fee73.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>he(()=>import("./WorkerTileHandler-9ef587f2.js"),["assets/WorkerTileHandler-9ef587f2.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-2880c0e5.js","assets/definitions-43101aab.js","assets/StyleRepository-3e483beb.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-61f7b102.js","assets/BidiEngine-9a40f2f4.js"])};var cr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(cr||(cr={}));let dY=0;function kR(){return dY++}function fY(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Ey(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function g7(t,e,i,r){if(e.type===cr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==cr.INVOKE&&e.type!==cr.RESPONSE)return void t.postMessage(e);let s;if(fY(i)?(s=R8(i.transferList),e.data=i.result):(s=R8(r),e.data=i),s){if(ue("ff")){for(const h of s)if("byteLength"in h&&h.byteLength>267386880){const f="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case cr.INVOKE:throw f;case cr.RESPONSE:return void g7(t,{type:cr.RESPONSE,jobId:e.jobId,error:Ey(f)})}}}t.postMessage(e,s)}else t.postMessage(e)}function Ay(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function R8(t){if(!t||!t.length)return null;if(ue("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!yY(i));return e.length?e:null}function yY(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:F8,ABORT:N8,INVOKE:L8,RESPONSE:lf,OPEN_PORT:j8,ON:mY}=cr,gY=2;let vY=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===cr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Ju=class Yp{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Yp(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Yp.clients.set(s,r),i.port2}static loadWorker(e){const i=pY[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new vY(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:F8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const s=r==null?void 0:r.signal,h=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ne("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const f=kR();return new Promise((m,b)=>{if(yo(s))return this._processWork(),void b(Xt());const S=Un(s,()=>{const A=this._outJobs.get(f);A&&(this._outJobs.delete(f),this._processWork(),$i(A.abortHandle),this._post({type:N8,jobId:f}),b(Xt()))}),I={resolve:m,reject:b,abortHandle:S,debugInfo:e};this._outJobs.set(f,I),this._post({type:L8,jobId:f,methodName:e,abortable:s!=null},i,h)})}on(e,i){const r=new MessageChannel;function s(h){i(h.data)}return this._port.postMessage({type:cr.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:cr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:j8,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=gY)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:s,deferred:h}=e;this.invoke(i,r,s).then(f=>h.resolve(f)).catch(f=>h.reject(f))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{$i(e.abortHandle),e.reject(Xt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=Ay(e);if(i)switch(i.type){case lf:this._onResponseMessage(i);break;case L8:this._invokeQueue.push(i);break;case N8:this._onAbortMessage(i);break;case F8:this._onCloseMessage();break;case j8:this._onOpenPortMessage(i);break;case mY:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Yp.clients.get(this)===e&&e.destroy(),Yp.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:h}=e,f=h?new AbortController:null,m=this._inJobs;let b,S=this._client,I=S[i];try{if(!I&&i&&i.includes(".")){const A=i.split(".");for(let O=0;O<A.length-1;O++)S=S[A[O]],I=S[A[O+1]]}if(typeof I!="function")throw new TypeError(`${i} is not a function`);b=I.call(S,s,{client:this,signal:f?f.signal:null})}catch(A){return void this._post({type:lf,jobId:r,error:Ey(A)})}dl(b)?(m.set(r,{controller:f,promise:b}),b.then(A=>{m.has(r)&&(m.delete(r),this._post({type:lf,jobId:r},A))},A=>{m.has(r)&&(m.delete(r),Ts(A)||this._post({type:lf,jobId:r,error:Ey(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:lf,jobId:r},b)}_onOpenPortMessage(e){new Yp(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,h=>{i.postMessage(h)}),s=Hw(e.port,"message",h=>{const f=Ay(h);(f==null?void 0:f.type)===cr.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,h=this._outJobs;if(!h.has(i))return;const f=h.get(i);h.delete(i),this._processWork(),$i(f.abortHandle),r?f.reject(ne.fromJSON(JSON.parse(r))):f.resolve(s)}_post(e,i,r){return g7(this._port,e,i,r)}};Ju.kernelInfo={buildDate:Uw,fullVersion:kS,revision:BC},Ju.clients=new Map;let wY=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new H2}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,s)=>{let h=!0;const f=m=>{Oi(i.signal),h&&(h=!1,m())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let m=0;m<e.length;++m){const b=e[m];dl(b)?this._clientPromises[m]=b.then(S=>(this._clients[m]=new Ju(S,i,()=>this._ongoingJobsQueue.pop()??null),f(r),this._clients[m]),()=>(f(s),null)):(this._clients[m]=new Ju(b,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[m]=Promise.resolve(this._clients[m]),f(r))}})}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let h=0;h<this._clientPromises.length;++h){const f=this._clientPromises[h];s[h]=f.then(m=>m==null?void 0:m.invoke(e,i,r))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(Xt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,r){let s;Array.isArray(r)?(fe.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const h=sl();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:s,deferred:h});for(let f=0;f<this._clientPromises.length;f++){const m=this._clients[f];m?m.jobAdded():this._clientPromises[f].then(b=>b==null?void 0:b.jobAdded())}return h.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>Dw(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(h=>{h&&(i[s]=h.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const OR=fe.getLogger("esri.intl.substitute");function Ho(t,e,i={}){const{format:r={}}=i;return na(t,s=>bY(s,e,r))}function bY(t,e,i){let r,s;const h=t.indexOf(":");if(h===-1?r=t.trim():(r=t.slice(0,h).trim(),s=t.slice(h+1).trim()),!r)return"";const f=Yy(r,e);if(f==null)return"";const m=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[r]);return m?_Y(f,m):s?xY(f,s):v7(f)}function _Y(t,e){switch(e.type){case"date":return ll(t,e.intlOptions);case"number":return Wu(t,e.intlOptions);default:return OR.warn("missing format descriptor for key {key}"),v7(t)}}function xY(t,e){switch(e.toLowerCase()){case"dateformat":return ll(t);case"numberformat":return Wu(t);default:return OR.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?ll(t):/^numberformat/i.test(e)?Wu(t):v7(t)}}function v7(t){switch(typeof t){case"string":return t;case"number":return Wu(t);case"boolean":return""+t;default:return t instanceof Date?ll(t):""}}async function SY(t,e,i,r){const s=e.exec(i);if(!s)throw new ne("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const h=s[1]?`${s[1]}/`:"",f=s[2],m=dW(r),b=`${h}${f}.json`,S=m?`${h}${f}_${m}.json`:b;let I;try{I=await D8(t(S))}catch(A){if(S===b)throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{I=await D8(t(b))}catch(O){throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:O})}}return I}async function D8(t){if(z8.fetchBundleAsset!=null)return z8.fetchBundleAsset(t);const e=await wi(t,{responseType:"text"});return JSON.parse(e.data)}let MY=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?h=>new URL(h,new URL(r,window.location.href)).href:r instanceof URL?h=>new URL(h,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return SY(this.getAssetUrl,this.matcher,e,i)}};function $Y(t){return new MY(t)}const z8={};pW($Y({pattern:"esri/",location:Ft}));const TY={};function IY(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=TY.baseUrl),e}let EY=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},Av=class{constructor(){this._dispatcher=new EY,this._workerPostMessage({type:cr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Xd(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){Xd(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=Ay(e);if(i&&i.type===cr.OPEN){const{modulePath:r,jobId:s}=i;let h=await Ju.loadWorker(r);h||(h=await he(()=>import(r),[]));const f=Ju.connect(h);this._workerPostMessage({type:cr.OPENED,jobId:s,data:f})}}};const v4=fe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:AY}=cr,CY='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ym,Xm;const V8="Failed to create Worker. Fallback to execute module in main thread";async function kY(){if(!ue("esri-workers")||(ue("mozilla"),0))return G8(new Av);if(!Ym&&!Xm)try{const e=CY.split('"{CONFIGURATION}"').join(`'${OY()}'`);Ym=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Xm=e||{}}let t;if(Ym)try{t=new Worker(Ym,{name:"esri-worker-"+PY++})}catch{v4.warn(V8,Xm),t=new Av}else v4.warn(V8,Xm),t=new Av;return G8(t)}async function G8(t){return new Promise(e=>{function i(s){const h=Ay(s);h&&h.type===AY&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),v4.warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new Av).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function OY(){let t;if(Tt.default!=null){const s={...Tt};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(Tt));t.assetsPath=ms(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?ms(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=_s(),t.has={"esri-csp-restrictions":ue("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ue("esri-2d-update-debug"),"featurelayer-pbf":ue("featurelayer-pbf"),"featurelayer-simplify-thresholds":ue("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ue("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ue("featurelayer-simplify-mobile-factor"),"esri-atomics":ue("esri-atomics"),"esri-shared-array-buffer":ue("esri-shared-array-buffer"),"esri-tiles-debug":ue("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ue("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ue("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":ue("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=ms(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=ms(t.workers.workerPath):t.workers.workerPath=ms(Ft("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Tt.workers.loaderConfig,i=IY({baseUrl:e==null?void 0:e.baseUrl,locale:_s(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Uw,fullVersion:kS,revision:BC}})}let PY=0;const{ABORT:q8,INVOKE:RY,OPEN:FY,OPENED:NY,RESPONSE:uf}=cr;let LY=class PR{static async create(e){const i=await kY();return new PR(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),fe.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=kR();return new Promise((h,f)=>{const m={resolve:h,reject:f,abortHandle:lS(r,()=>{this._outJobs.delete(s),this._post({type:q8,jobId:s})})};this._outJobs.set(s,m),this._post({type:FY,jobId:s,modulePath:e})})}_onMessage(e){const i=Ay(e);if(i)switch(i.type){case NY:this._onOpenedMessage(i);break;case uf:this._onResponseMessage(i);break;case q8:this._onAbortMessage(i);break;case RY:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:h}=e,f=h?new AbortController:null,m=this._inJobs,b=fH[i];let S;try{if(typeof b!="function")throw new TypeError(`${i} is not a function`);S=b.call(null,s,{signal:f?f.signal:null})}catch(I){return void this._post({type:uf,jobId:r,error:Ey(I)})}dl(S)?(m.set(r,{controller:f,promise:S}),S.then(I=>{m.has(r)&&(m.delete(r),this._post({type:uf,jobId:r},I))},I=>{m.has(r)&&(m.delete(r),I||(I={message:"Error encountered at method"+i}),Ts(I)||this._post({type:uf,jobId:r,error:Ey(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:uf,jobId:r},S)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),$i(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,h=this._outJobs.get(i);h&&(this._outJobs.delete(i),$i(h.abortHandle),r?h.reject(ne.fromJSON(JSON.parse(r))):h.resolve(s))}_post(e,i,r){return g7(this.worker,e,i,r)}},Tc=ue("esri-workers-debug")?1:ue("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):ue("host-browser")?navigator.hardwareConcurrency-1:0;Tc||(Tc=ue("safari")&&ue("mac")?7:2);let U8=0;const Cv=[];function jY(){RR()}async function Qm(t,e){const i=new wY;return await i.open(t,e),i}async function DY(t,e={}){if(typeof t!="string")throw new ne("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ue("host-webworker")&&!ue("esri-workers")&&(i="local"),i==="local"){let r=await Ju.loadWorker(t);r||(r=await he(()=>import(t),[])),Oi(e.signal);const s=e.client||r;return Qm([Ju.connect(r)],{...e,client:s})}if(await RR(),Oi(e.signal),i==="dedicated"){const r=U8++%Tc;return Qm([await Cv[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Tc);if(r<Tc){const s=new Array(r);for(let h=0;h<r;++h){const f=U8++%Tc;s[h]=Cv[f].open(t,e)}return Qm(s,e)}}return Qm(Cv.map(r=>r.open(t,e)),e)}let eg=null;async function RR(){if(eg)return eg;new AbortController;const t=[];for(let e=0;e<Tc;e++){const i=LY.create(e).then(r=>(Cv[e]=r,r));t.push(i)}return eg=Promise.all(t),eg}function zu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function oh(t,e,i,r,s,h,f,m,b,S,I,A,O,R,L,z,j){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=b,t[8]=S,t[9]=I,t[10]=A,t[11]=O,t[12]=R,t[13]=L,t[14]=z,t[15]=j,t}function cm(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yn(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],h=e[6],f=e[7],m=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=h,t[11]=e[14],t[12]=s,t[13]=f,t[14]=m}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function zY(t,e){return Vu(t,e)||cm(t),t}function Vu(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5],b=e[6],S=e[7],I=e[8],A=e[9],O=e[10],R=e[11],L=e[12],z=e[13],j=e[14],H=e[15],Y=i*m-r*f,X=i*b-s*f,te=i*S-h*f,oe=r*b-s*m,le=r*S-h*m,ve=s*S-h*b,xe=I*z-A*L,Fe=I*j-O*L,Pe=I*H-R*L,He=A*j-O*z,ze=A*H-R*z,st=O*H-R*j;let Ne=Y*st-X*ze+te*He+oe*Pe-le*Fe+ve*xe;return Ne?(Ne=1/Ne,t[0]=(m*st-b*ze+S*He)*Ne,t[1]=(s*ze-r*st-h*He)*Ne,t[2]=(z*ve-j*le+H*oe)*Ne,t[3]=(O*le-A*ve-R*oe)*Ne,t[4]=(b*Pe-f*st-S*Fe)*Ne,t[5]=(i*st-s*Pe+h*Fe)*Ne,t[6]=(j*te-L*ve-H*X)*Ne,t[7]=(I*ve-O*te+R*X)*Ne,t[8]=(f*ze-m*Pe+S*xe)*Ne,t[9]=(r*Pe-i*ze-h*xe)*Ne,t[10]=(L*le-z*te+H*Y)*Ne,t[11]=(A*te-I*le-R*Y)*Ne,t[12]=(m*Fe-f*He-b*xe)*Ne,t[13]=(i*He-r*Fe+s*xe)*Ne,t[14]=(z*X-L*oe-j*Y)*Ne,t[15]=(I*oe-A*X+O*Y)*Ne,t):null}function VY(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5],b=e[6],S=e[7],I=e[8],A=e[9],O=e[10],R=e[11],L=e[12],z=e[13],j=e[14],H=e[15];return t[0]=m*(O*H-R*j)-A*(b*H-S*j)+z*(b*R-S*O),t[1]=-(r*(O*H-R*j)-A*(s*H-h*j)+z*(s*R-h*O)),t[2]=r*(b*H-S*j)-m*(s*H-h*j)+z*(s*S-h*b),t[3]=-(r*(b*R-S*O)-m*(s*R-h*O)+A*(s*S-h*b)),t[4]=-(f*(O*H-R*j)-I*(b*H-S*j)+L*(b*R-S*O)),t[5]=i*(O*H-R*j)-I*(s*H-h*j)+L*(s*R-h*O),t[6]=-(i*(b*H-S*j)-f*(s*H-h*j)+L*(s*S-h*b)),t[7]=i*(b*R-S*O)-f*(s*R-h*O)+I*(s*S-h*b),t[8]=f*(A*H-R*z)-I*(m*H-S*z)+L*(m*R-S*A),t[9]=-(i*(A*H-R*z)-I*(r*H-h*z)+L*(r*R-h*A)),t[10]=i*(m*H-S*z)-f*(r*H-h*z)+L*(r*S-h*m),t[11]=-(i*(m*R-S*A)-f*(r*R-h*A)+I*(r*S-h*m)),t[12]=-(f*(A*j-O*z)-I*(m*j-b*z)+L*(m*O-b*A)),t[13]=i*(A*j-O*z)-I*(r*j-s*z)+L*(r*O-s*A),t[14]=-(i*(m*j-b*z)-f*(r*j-s*z)+L*(r*b-s*m)),t[15]=i*(m*O-b*A)-f*(r*O-s*A)+I*(r*b-s*m),t}function GY(t){const e=t[0],i=t[1],r=t[2],s=t[3],h=t[4],f=t[5],m=t[6],b=t[7],S=t[8],I=t[9],A=t[10],O=t[11],R=t[12],L=t[13],z=t[14],j=t[15];return(e*f-i*h)*(A*j-O*z)-(e*m-r*h)*(I*j-O*L)+(e*b-s*h)*(I*z-A*L)+(i*m-r*f)*(S*j-O*R)-(i*b-s*f)*(S*z-A*R)+(r*b-s*m)*(S*L-I*R)}function u0(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=e[6],I=e[7],A=e[8],O=e[9],R=e[10],L=e[11],z=e[12],j=e[13],H=e[14],Y=e[15];let X=i[0],te=i[1],oe=i[2],le=i[3];return t[0]=X*r+te*m+oe*A+le*z,t[1]=X*s+te*b+oe*O+le*j,t[2]=X*h+te*S+oe*R+le*H,t[3]=X*f+te*I+oe*L+le*Y,X=i[4],te=i[5],oe=i[6],le=i[7],t[4]=X*r+te*m+oe*A+le*z,t[5]=X*s+te*b+oe*O+le*j,t[6]=X*h+te*S+oe*R+le*H,t[7]=X*f+te*I+oe*L+le*Y,X=i[8],te=i[9],oe=i[10],le=i[11],t[8]=X*r+te*m+oe*A+le*z,t[9]=X*s+te*b+oe*O+le*j,t[10]=X*h+te*S+oe*R+le*H,t[11]=X*f+te*I+oe*L+le*Y,X=i[12],te=i[13],oe=i[14],le=i[15],t[12]=X*r+te*m+oe*A+le*z,t[13]=X*s+te*b+oe*O+le*j,t[14]=X*h+te*S+oe*R+le*H,t[15]=X*f+te*I+oe*L+le*Y,t}function qY(t,e,i){const r=i[0],s=i[1],h=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*h+e[12],t[13]=e[1]*r+e[5]*s+e[9]*h+e[13],t[14]=e[2]*r+e[6]*s+e[10]*h+e[14],t[15]=e[3]*r+e[7]*s+e[11]*h+e[15];else{const f=e[0],m=e[1],b=e[2],S=e[3],I=e[4],A=e[5],O=e[6],R=e[7],L=e[8],z=e[9],j=e[10],H=e[11];t[0]=f,t[1]=m,t[2]=b,t[3]=S,t[4]=I,t[5]=A,t[6]=O,t[7]=R,t[8]=L,t[9]=z,t[10]=j,t[11]=H,t[12]=f*r+I*s+L*h+e[12],t[13]=m*r+A*s+z*h+e[13],t[14]=b*r+O*s+j*h+e[14],t[15]=S*r+R*s+H*h+e[15]}return t}function UY(t,e,i){const r=i[0],s=i[1],h=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function FR(t,e,i,r){let s,h,f,m,b,S,I,A,O,R,L,z,j,H,Y,X,te,oe,le,ve,xe,Fe,Pe,He,ze=r[0],st=r[1],Ne=r[2],ii=Math.sqrt(ze*ze+st*st+Ne*Ne);return ii<$n()?null:(ii=1/ii,ze*=ii,st*=ii,Ne*=ii,s=Math.sin(i),h=Math.cos(i),f=1-h,m=e[0],b=e[1],S=e[2],I=e[3],A=e[4],O=e[5],R=e[6],L=e[7],z=e[8],j=e[9],H=e[10],Y=e[11],X=ze*ze*f+h,te=st*ze*f+Ne*s,oe=Ne*ze*f-st*s,le=ze*st*f-Ne*s,ve=st*st*f+h,xe=Ne*st*f+ze*s,Fe=ze*Ne*f+st*s,Pe=st*Ne*f-ze*s,He=Ne*Ne*f+h,t[0]=m*X+A*te+z*oe,t[1]=b*X+O*te+j*oe,t[2]=S*X+R*te+H*oe,t[3]=I*X+L*te+Y*oe,t[4]=m*le+A*ve+z*xe,t[5]=b*le+O*ve+j*xe,t[6]=S*le+R*ve+H*xe,t[7]=I*le+L*ve+Y*xe,t[8]=m*Fe+A*Pe+z*He,t[9]=b*Fe+O*Pe+j*He,t[10]=S*Fe+R*Pe+H*He,t[11]=I*Fe+L*Pe+Y*He,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function NR(t,e,i){const r=Math.sin(i),s=Math.cos(i),h=e[4],f=e[5],m=e[6],b=e[7],S=e[8],I=e[9],A=e[10],O=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=h*s+S*r,t[5]=f*s+I*r,t[6]=m*s+A*r,t[7]=b*s+O*r,t[8]=S*s-h*r,t[9]=I*s-f*r,t[10]=A*s-m*r,t[11]=O*s-b*r,t}function BY(t,e,i){const r=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],b=e[3],S=e[8],I=e[9],A=e[10],O=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s-S*r,t[1]=f*s-I*r,t[2]=m*s-A*r,t[3]=b*s-O*r,t[8]=h*r+S*s,t[9]=f*r+I*s,t[10]=m*r+A*s,t[11]=b*r+O*s,t}function HY(t,e,i){const r=Math.sin(i),s=Math.cos(i),h=e[0],f=e[1],m=e[2],b=e[3],S=e[4],I=e[5],A=e[6],O=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s+S*r,t[1]=f*s+I*r,t[2]=m*s+A*r,t[3]=b*s+O*r,t[4]=S*s-h*r,t[5]=I*s-f*r,t[6]=A*s-m*r,t[7]=O*s-b*r,t}function LR(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function WY(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pm(t,e,i){if(e===0)return cm(t);let r,s,h,f=i[0],m=i[1],b=i[2],S=Math.sqrt(f*f+m*m+b*b);return S<$n()?null:(S=1/S,f*=S,m*=S,b*=S,r=Math.sin(e),s=Math.cos(e),h=1-s,t[0]=f*f*h+s,t[1]=m*f*h+b*r,t[2]=b*f*h-m*r,t[3]=0,t[4]=f*m*h-b*r,t[5]=m*m*h+s,t[6]=b*m*h+f*r,t[7]=0,t[8]=f*b*h+m*r,t[9]=m*b*h-f*r,t[10]=b*b*h+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function JY(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KY(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jR(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DR(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=r+r,b=s+s,S=h+h,I=r*m,A=r*b,O=r*S,R=s*b,L=s*S,z=h*S,j=f*m,H=f*b,Y=f*S;return t[0]=1-(R+z),t[1]=A+Y,t[2]=O-H,t[3]=0,t[4]=A-Y,t[5]=1-(I+z),t[6]=L+j,t[7]=0,t[8]=O+H,t[9]=L-j,t[10]=1-(I+R),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function ZY(t,e){const i=YY,r=-e[0],s=-e[1],h=-e[2],f=e[3],m=e[4],b=e[5],S=e[6],I=e[7],A=r*r+s*s+h*h+f*f;return A>0?(i[0]=2*(m*f+I*r+b*h-S*s)/A,i[1]=2*(b*f+I*s+S*r-m*h)/A,i[2]=2*(S*f+I*h+m*s-b*r)/A):(i[0]=2*(m*f+I*r+b*h-S*s),i[1]=2*(b*f+I*s+S*r-m*h),i[2]=2*(S*f+I*h+m*s-b*r)),DR(t,e,i),t}const YY=we();function XY(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function QY(t,e){const i=e[0],r=e[1],s=e[2],h=e[4],f=e[5],m=e[6],b=e[8],S=e[9],I=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(h*h+f*f+m*m),t[2]=Math.sqrt(b*b+S*S+I*I),t}function eX(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function tX(t,e,i,r){const s=e[0],h=e[1],f=e[2],m=e[3],b=s+s,S=h+h,I=f+f,A=s*b,O=s*S,R=s*I,L=h*S,z=h*I,j=f*I,H=m*b,Y=m*S,X=m*I,te=r[0],oe=r[1],le=r[2];return t[0]=(1-(L+j))*te,t[1]=(O+X)*te,t[2]=(R-Y)*te,t[3]=0,t[4]=(O-X)*oe,t[5]=(1-(A+j))*oe,t[6]=(z+H)*oe,t[7]=0,t[8]=(R+Y)*le,t[9]=(z-H)*le,t[10]=(1-(A+L))*le,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function iX(t,e,i,r,s){const h=e[0],f=e[1],m=e[2],b=e[3],S=h+h,I=f+f,A=m+m,O=h*S,R=h*I,L=h*A,z=f*I,j=f*A,H=m*A,Y=b*S,X=b*I,te=b*A,oe=r[0],le=r[1],ve=r[2],xe=s[0],Fe=s[1],Pe=s[2],He=(1-(z+H))*oe,ze=(R+te)*oe,st=(L-X)*oe,Ne=(R-te)*le,ii=(1-(O+H))*le,Ar=(j+Y)*le,ai=(L+X)*ve,xt=(j-Y)*ve,In=(1-(O+z))*ve;return t[0]=He,t[1]=ze,t[2]=st,t[3]=0,t[4]=Ne,t[5]=ii,t[6]=Ar,t[7]=0,t[8]=ai,t[9]=xt,t[10]=In,t[11]=0,t[12]=i[0]+xe-(He*xe+Ne*Fe+ai*Pe),t[13]=i[1]+Fe-(ze*xe+ii*Fe+xt*Pe),t[14]=i[2]+Pe-(st*xe+Ar*Fe+In*Pe),t[15]=1,t}function rX(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=i+i,m=r+r,b=s+s,S=i*f,I=r*f,A=r*m,O=s*f,R=s*m,L=s*b,z=h*f,j=h*m,H=h*b;return t[0]=1-A-L,t[1]=I+H,t[2]=O-j,t[3]=0,t[4]=I-H,t[5]=1-S-L,t[6]=R+z,t[7]=0,t[8]=O+j,t[9]=R-z,t[10]=1-S-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zR(t,e,i,r,s,h,f){const m=1/(i-e),b=1/(s-r),S=1/(h-f);return t[0]=2*h*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*b,t[6]=0,t[7]=0,t[8]=(i+e)*m,t[9]=(s+r)*b,t[10]=(f+h)*S,t[11]=-1,t[12]=0,t[13]=0,t[14]=f*h*2*S,t[15]=0,t}function nX(t,e,i,r,s){const h=1/Math.tan(e/2);let f;return t[0]=h/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(f=1/(r-s),t[10]=(s+r)*f,t[14]=2*s*r*f):(t[10]=-1,t[14]=-2*r),t}function sX(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),h=Math.tan(e.downDegrees*Math.PI/180),f=Math.tan(e.leftDegrees*Math.PI/180),m=Math.tan(e.rightDegrees*Math.PI/180),b=2/(f+m),S=2/(s+h);return t[0]=b,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=S,t[6]=0,t[7]=0,t[8]=-(f-m)*b*.5,t[9]=(s-h)*S*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function oX(t,e,i,r,s,h,f){const m=1/(e-i),b=1/(r-s),S=1/(h-f);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*b,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*S,t[11]=0,t[12]=(e+i)*m,t[13]=(s+r)*b,t[14]=(f+h)*S,t[15]=1,t}function VR(t,e,i,r){let s,h,f,m,b,S,I,A,O,R;const L=e[0],z=e[1],j=e[2],H=r[0],Y=r[1],X=r[2],te=i[0],oe=i[1],le=i[2],ve=$n();return Math.abs(L-te)<ve&&Math.abs(z-oe)<ve&&Math.abs(j-le)<ve?cm(t):(I=L-te,A=z-oe,O=j-le,R=1/Math.sqrt(I*I+A*A+O*O),I*=R,A*=R,O*=R,s=Y*O-X*A,h=X*I-H*O,f=H*A-Y*I,R=Math.sqrt(s*s+h*h+f*f),R?(R=1/R,s*=R,h*=R,f*=R):(s=0,h=0,f=0),m=A*f-O*h,b=O*s-I*f,S=I*h-A*s,R=Math.sqrt(m*m+b*b+S*S),R?(R=1/R,m*=R,b*=R,S*=R):(m=0,b=0,S=0),t[0]=s,t[1]=m,t[2]=I,t[3]=0,t[4]=h,t[5]=b,t[6]=A,t[7]=0,t[8]=f,t[9]=S,t[10]=O,t[11]=0,t[12]=-(s*L+h*z+f*j),t[13]=-(m*L+b*z+S*j),t[14]=-(I*L+A*z+O*j),t[15]=1,t)}function aX(t,e,i,r){const s=e[0],h=e[1],f=e[2],m=r[0],b=r[1],S=r[2];let I=s-i[0],A=h-i[1],O=f-i[2],R=I*I+A*A+O*O;R>0&&(R=1/Math.sqrt(R),I*=R,A*=R,O*=R);let L=b*O-S*A,z=S*I-m*O,j=m*A-b*I;return R=L*L+z*z+j*j,R>0&&(R=1/Math.sqrt(R),L*=R,z*=R,j*=R),t[0]=L,t[1]=z,t[2]=j,t[3]=0,t[4]=A*j-O*z,t[5]=O*L-I*j,t[6]=I*z-A*L,t[7]=0,t[8]=I,t[9]=A,t[10]=O,t[11]=0,t[12]=s,t[13]=h,t[14]=f,t[15]=1,t}function lX(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function uX(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function hX(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function GR(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function cX(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function pX(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function dX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function qR(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],h=t[3],f=t[4],m=t[5],b=t[6],S=t[7],I=t[8],A=t[9],O=t[10],R=t[11],L=t[12],z=t[13],j=t[14],H=t[15],Y=e[0],X=e[1],te=e[2],oe=e[3],le=e[4],ve=e[5],xe=e[6],Fe=e[7],Pe=e[8],He=e[9],ze=e[10],st=e[11],Ne=e[12],ii=e[13],Ar=e[14],ai=e[15],xt=$n();return Math.abs(i-Y)<=xt*Math.max(1,Math.abs(i),Math.abs(Y))&&Math.abs(r-X)<=xt*Math.max(1,Math.abs(r),Math.abs(X))&&Math.abs(s-te)<=xt*Math.max(1,Math.abs(s),Math.abs(te))&&Math.abs(h-oe)<=xt*Math.max(1,Math.abs(h),Math.abs(oe))&&Math.abs(f-le)<=xt*Math.max(1,Math.abs(f),Math.abs(le))&&Math.abs(m-ve)<=xt*Math.max(1,Math.abs(m),Math.abs(ve))&&Math.abs(b-xe)<=xt*Math.max(1,Math.abs(b),Math.abs(xe))&&Math.abs(S-Fe)<=xt*Math.max(1,Math.abs(S),Math.abs(Fe))&&Math.abs(I-Pe)<=xt*Math.max(1,Math.abs(I),Math.abs(Pe))&&Math.abs(A-He)<=xt*Math.max(1,Math.abs(A),Math.abs(He))&&Math.abs(O-ze)<=xt*Math.max(1,Math.abs(O),Math.abs(ze))&&Math.abs(R-st)<=xt*Math.max(1,Math.abs(R),Math.abs(st))&&Math.abs(L-Ne)<=xt*Math.max(1,Math.abs(L),Math.abs(Ne))&&Math.abs(z-ii)<=xt*Math.max(1,Math.abs(z),Math.abs(ii))&&Math.abs(j-Ar)<=xt*Math.max(1,Math.abs(j),Math.abs(Ar))&&Math.abs(H-ai)<=xt*Math.max(1,Math.abs(H),Math.abs(ai))}function fX(t){const e=$n(),i=t[0],r=t[1],s=t[2],h=t[4],f=t[5],m=t[6],b=t[8],S=t[9],I=t[10];return Math.abs(1-(i*i+h*h+b*b))<=e&&Math.abs(1-(r*r+f*f+S*S))<=e&&Math.abs(1-(s*s+m*m+I*I))<=e}function yX(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const mX=u0,gX=GR;Object.freeze(Object.defineProperty({__proto__:null,add:hX,adjoint:VY,copy:zu,determinant:GY,equals:qR,exactEquals:dX,frob:uX,fromQuat:rX,fromQuat2:ZY,fromRotation:pm,fromRotationTranslation:DR,fromRotationTranslationScale:tX,fromRotationTranslationScaleOrigin:iX,fromScaling:WY,fromTranslation:LR,fromXRotation:JY,fromYRotation:KY,fromZRotation:jR,frustum:zR,getRotation:eX,getScaling:QY,getTranslation:XY,hasIdentityRotation:yX,identity:cm,invert:Vu,invertOrIdentity:zY,isOrthoNormal:fX,lookAt:VR,mul:mX,multiply:u0,multiplyScalar:cX,multiplyScalarAndAdd:pX,ortho:oX,perspective:nX,perspectiveFromFieldOfView:sX,rotate:FR,rotateX:NR,rotateY:BY,rotateZ:HY,scale:UY,set:oh,str:lX,sub:gX,subtract:GR,targetTo:aX,translate:qY,transpose:Yn},Symbol.toStringTag,{value:"Module"}));let G3,re=null;function UR(){return!!re}function vX(){return!!ue("esri-wasm")}function BR(){return G3||(G3=he(()=>import("./pe-wasm-67793c2f.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Ft(`esri/geometry/support/${e}`)})).then(t=>{WR(t)}),G3)}var w4,ci,b4;(function(t){function e(h,f,m){re.ensureCache.prepare();const b=mc(m),S=m===b,I=re.ensureFloat64(b),A=re._pe_geog_to_proj(re.getPointer(h),f,I);return A&&$u(m,f,I,S),A}function i(h,f,m,b){switch(b){case ci.PE_TRANSFORM_P_TO_G:return r(h,f,m);case ci.PE_TRANSFORM_G_TO_P:return e(h,f,m)}return 0}function r(h,f,m){return s(h,f,m,0)}function s(h,f,m,b){re.ensureCache.prepare();const S=mc(m),I=m===S,A=re.ensureFloat64(S),O=re._pe_proj_to_geog_center(re.getPointer(h),f,A,b);return O&&$u(m,f,A,I),O}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=s})(w4||(w4={})),function(t){function e(){t.PE_BUFFER_MAX=re.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=re.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=re.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=re.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=re.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=re.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=re.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=re.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=re.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=re.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=re.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=re.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=re.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=re.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=re.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=re.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=re.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=re.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=re.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=re.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=re.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=re.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=re.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=re.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=re.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=re.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=re.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=re.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=re.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=re.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(ci||(ci={})),function(t){const e={},i={},r=R=>{if(R){const L=R.getType();switch(L){case ci.PE_TYPE_GEOGCS:R=re.castObject(R,re.PeGeogcs);break;case ci.PE_TYPE_PROJCS:R=re.castObject(R,re.PeProjcs);break;case ci.PE_TYPE_GEOGTRAN:R=re.castObject(R,re.PeGeogtran);break;default:L&ci.PE_TYPE_UNIT&&(R=re.castObject(R,re.PeUnit))}}return R};function s(){re.PeFactory.prototype.initialize(null)}function h(R){return f(ci.PE_TYPE_COORDSYS,R)}function f(R,L){let z=null,j=e[R];if(j||(j={},e[R]=j),j.hasOwnProperty(String(L)))z=j[L];else{const H=re.PeFactory.prototype.factoryByType(R,L);re.compare(H,re.NULL)||(z=H,j[L]=z)}return z=r(z),z}function m(R,L){let z=null,j=i[R];if(j||(j={},i[R]=j),j.hasOwnProperty(L))z=j[L];else{const H=re.PeFactory.prototype.fromString(R,L);re.compare(H,re.NULL)||(z=H,j[L]=z)}return z=r(z),z}function b(R){return f(ci.PE_TYPE_GEOGCS,R)}function S(R){return f(ci.PE_TYPE_GEOGTRAN,R)}function I(R){return re.PeFactory.prototype.getCode(R)}function A(R){return f(ci.PE_TYPE_PROJCS,R)}function O(R){return f(ci.PE_TYPE_UNIT,R)}t.initialize=s,t.coordsys=h,t.factoryByType=f,t.fromString=m,t.geogcs=b,t.geogtran=S,t.getCode=I,t.projcs=A,t.unit=O}(b4||(b4={}));let HR=null;var W2,_4,x4,S4,J2,M4,K2,Z2,$4;function WR(t){function e(h,f,m){h[f]=m(h[f])}re=t,ci.init(),W2.init(),J2.init(),K2.init(),Z2.init(),HR=class extends re.PeGCSExtent{destroy(){re.destroy(this)}};const i=[re.PeDatum,re.PeGeogcs,re.PeGeogtran,re.PeObject,re.PeParameter,re.PePrimem,re.PeProjcs,re.PeSpheroid,re.PeUnit];for(const h of i)e(h.prototype,"getName",f=>function(){return f.call(this,new Array(ci.PE_NAME_MAX))});for(const h of[re.PeGeogtran,re.PeProjcs])e(h.prototype,"getParameters",f=>function(){const m=new Array(ci.PE_PARM_MAX);let b=f.call(this);for(let S=0;S<m.length;S++){const I=re.getValue(b,"*");m[S]=I?re.wrapPointer(I,re.PeParameter):null,b+=Int32Array.BYTES_PER_ELEMENT}return m});e(re.PeHorizon.prototype,"getCoord",h=>function(){const f=this.getSize();if(!f)return null;const m=[];return $u(m,f,h.call(this)),m}),e(re.PeGTlistExtendedEntry.prototype,"getEntries",h=>{const f=re._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const b=h.call(this);if(!re.compare(b,re.NULL)){m=[b];const S=this.getSteps();if(S>1){const I=re.getPointer(b);for(let A=1;A<S;A++)m.push(re.wrapPointer(I+f*A,re.PeGTlistExtendedGTs))}}return m}});const r=re._pe_getPeHorizonSize(),s=h=>function(){let f=this._cache;if(f||(f=new Map,this._cache=f),f.has(h))return f.get(h);let m=null;const b=h.call(this);if(!re.compare(b,re.NULL)){m=[b];const S=b.getNump();if(S>1){const I=re.getPointer(b);for(let A=1;A<S;A++)m.push(re.wrapPointer(I+r*A,re.PeHorizon))}}return f.set(h,m),m};e(re.PeProjcs.prototype,"horizonGcsGenerate",s),e(re.PeProjcs.prototype,"horizonPcsGenerate",s),re.PeObject.prototype.toString=function(h=ci.PE_STR_OPTS_NONE){re.ensureCache.prepare();const f=re.getPointer(this),m=re.ensureInt8(new Array(ci.PE_BUFFER_MAX));return re.UTF8ToString(re._pe_object_to_string_ext(f,h,m))}}function ma(t){if(!t)return;const e=re.getClass(t);if(!e)return;const i=re.getCache(e);if(!i)return;const r=re.getPointer(t);r&&delete i[r]}function tg(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(re.ensureInt8(r));return i}function mc(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function $u(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=re.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let h=0;h<e;h++)s&&(t[h]=new Array(2)),t[h][0]=re.getValue(i,"double"),t[h][1]=re.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=re.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=re._pe_getPeGTlistExtendedEntrySize()}function r(s,h,f,m,b,S){let I=null;const A=new re.PeInteger(S);try{const O=re.PeGTlistExtended.prototype.getGTlist(s,h,f,m,b,A);if((S=A.val)&&(I=[O],S>1)){const R=re.getPointer(O);for(let L=1;L<S;L++)I.push(re.wrapPointer(R+e*L,re.PeGTlistExtendedEntry))}}finally{re.destroy(A)}return I}t.init=i,t.getGTlist=r})(W2||(W2={})),function(t){function e(i){if(i&&i.length){for(const r of i)ma(r),r.getEntries().forEach(s=>{ma(s);const h=s.getGeogtran();ma(h),h.getParameters().forEach(ma),[h.getGeogcs1(),h.getGeogcs2()].forEach(f=>{ma(f);const m=f.getDatum();ma(m),ma(m.getSpheroid()),ma(f.getPrimem()),ma(f.getUnit())})});re.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(_4||(_4={})),function(t){function e(i,r,s,h,f){re.ensureCache.prepare();const m=mc(s),b=s===m,S=re.ensureFloat64(m);let I=0;h&&(I=re.ensureFloat64(h));const A=re._pe_geog_to_geog(re.getPointer(i),r,S,I,f);return A&&$u(s,r,S,b),A}t.geogToGeog=e}(x4||(x4={})),function(t){const e=(S,I,A,O,R,L)=>{let z,j;switch(re.ensureCache.prepare(),S){case"dd":z=re._pe_geog_to_dd,j=ci.PE_DD_MAX;break;case"ddm":z=re._pe_geog_to_ddm,j=ci.PE_DDM_MAX;break;case"dms":z=re._pe_geog_to_dms,j=ci.PE_DMS_MAX}let H=0;I&&(H=re.getPointer(I));const Y=mc(O),X=re.ensureFloat64(Y),te=tg(A,j),oe=z(H,A,X,R,re.ensureInt32(te));if(oe)for(let le=0;le<A;le++)L[le]=re.UTF8ToString(te[le]);return oe},i=(S,I,A,O,R)=>{let L;switch(re.ensureCache.prepare(),S){case"dd":L=re._pe_dd_to_geog;break;case"ddm":L=re._pe_ddm_to_geog;break;case"dms":L=re._pe_dms_to_geog}let z=0;I&&(z=re.getPointer(I));const j=O.map(te=>re.ensureString(te)),H=re.ensureInt32(j),Y=re.ensureFloat64(new Array(2*A)),X=L(z,A,H,Y);return X&&$u(R,A,Y),X};function r(S,I,A,O,R){return e("dms",S,I,A,O,R)}function s(S,I,A,O){return i("dms",S,I,A,O)}function h(S,I,A,O,R){return e("ddm",S,I,A,O,R)}function f(S,I,A,O){return i("ddm",S,I,A,O)}function m(S,I,A,O,R){return e("dd",S,I,A,O,R)}function b(S,I,A,O){return i("dd",S,I,A,O)}t.geogToDms=r,t.dmsToGeog=s,t.geogToDdm=h,t.ddmToGeog=f,t.geogToDd=m,t.ddToGeog=b}(S4||(S4={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=re.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=re.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,h,f,m,b,S,I){re.ensureCache.prepare();let A=0;s&&(A=re.getPointer(s));const O=mc(f),R=re.ensureFloat64(O),L=tg(h,ci.PE_MGRS_MAX),z=re.ensureInt32(L),j=re._pe_geog_to_mgrs_extended(A,h,R,m,b,S,z);if(j)for(let H=0;H<h;H++)I[H]=re.UTF8ToString(L[H]);return j}function r(s,h,f,m,b){re.ensureCache.prepare();let S=0;s&&(S=re.getPointer(s));const I=f.map(L=>re.ensureString(L)),A=re.ensureInt32(I),O=re.ensureFloat64(new Array(2*h)),R=re._pe_mgrs_to_geog_extended(S,h,A,m,O);return R&&$u(b,h,O),R}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(J2||(J2={})),function(t){function e(r,s,h,f,m,b,S){re.ensureCache.prepare();let I=0;r&&(I=re.getPointer(r));const A=mc(h),O=re.ensureFloat64(A),R=tg(s,ci.PE_MGRS_MAX),L=re.ensureInt32(R),z=re._pe_geog_to_usng(I,s,O,f,m,b,L);if(z)for(let j=0;j<s;j++)S[j]=re.UTF8ToString(R[j]);return z}function i(r,s,h,f){re.ensureCache.prepare();let m=0;r&&(m=re.getPointer(r));const b=h.map(O=>re.ensureString(O)),S=re.ensureInt32(b),I=re.ensureFloat64(new Array(2*s)),A=re._pe_usng_to_geog(m,s,S,I);return A&&$u(f,s,I),A}t.geogToUsng=e,t.usngToGeog=i}(M4||(M4={})),function(t){function e(){t.PE_UTM_OPTS_NONE=re.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=re.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=re.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,h,f,m,b){re.ensureCache.prepare();let S=0;s&&(S=re.getPointer(s));const I=mc(f),A=re.ensureFloat64(I),O=tg(h,ci.PE_UTM_MAX),R=re.ensureInt32(O),L=re._pe_geog_to_utm(S,h,A,m,R);if(L)for(let z=0;z<h;z++)b[z]=re.UTF8ToString(O[z]);return L}function r(s,h,f,m,b){re.ensureCache.prepare();let S=0;s&&(S=re.getPointer(s));const I=f.map(L=>re.ensureString(L)),A=re.ensureInt32(I),O=re.ensureFloat64(new Array(2*h)),R=re._pe_utm_to_geog(S,h,A,m,O);return R&&$u(b,h,O),R}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(K2||(K2={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=re.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=re.PePCSInfo.prototype.PE_POLE_POINT}function r(s,h=t.PE_PCSINFO_OPTION_DOMAIN){let f=null,m=null;return e.has(s)&&(m=e.get(s),m[h]&&(f=m[h])),f||(f=re.PePCSInfo.prototype.generate(s,h),m||(m=[],e.set(s,m)),m[h]=f),f}t.init=i,t.generate=r}(Z2||(Z2={})),function(t){function e(){return re.PeVersion.prototype.version_string()}t.versionString=e}($4||($4={}));const wX=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return w4},get PeDefs(){return ci},get PeFactory(){return b4},get PeGCSExtent(){return HR},get PeGTTransformations(){return x4},get PeGTlistExtended(){return W2},get PeGTlistExtendedEntry(){return _4},get PeNotationDms(){return S4},get PeNotationMgrs(){return J2},get PeNotationUsng(){return M4},get PeNotationUtm(){return K2},get PePCSInfo(){return Z2},get PeVersion(){return $4},_init:WR,get _pe(){return re},isLoaded:UR,isSupported:vX,load:BR},Symbol.toStringTag,{value:"Module"})),Ml=oi.radius,Fs=oi.eccentricitySquared,bX={a1:Ml*Fs,a2:Ml*Fs*Ml*Fs,a3:Ml*Fs*Fs/2,a4:Ml*Fs*Ml*Fs*2.5,a5:Ml*Fs+Ml*Fs*Fs/2,a6:1-Fs};1/294.9786982,1/298.257222101,oi.radius,oi.flattening,Hu.radius,Hu.flattening,1/192.0430107526882,el.radius,el.flattening,1/10.2079945799458,1/43.61604095563141,el.radius;let ig=0,q3=class T4{static fromGE(e){const i=new T4;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=ig++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=ig++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=ig++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=ig++}getInverse(){const e=new T4;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},I4=class t1{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new t1;let r="";for(const s of e.steps){const h=q3.fromGE(s);i.steps.push(h),r+=h.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof q3?this.steps.push(i):this.steps.push(new q3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new t1;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[t1.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const h of this.steps)r+=h.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[t1.cacheKey(e,i)];return s===void 0?null:s}};function JR(t,e,i){if(e==null||i==null||i.vcsWkid||ir(e,i))return null;const r=t0(e)/t0(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>_X(s,r);case"polyline":case"esriGeometryPolyline":return s=>SX(s,r);case"polygon":case"esriGeometryPolygon":return s=>xX(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>MX(s,r);case"extent":case"esriGeometryEnvelope":return s=>$X(s,r);default:return null}}function _X(t,e){t&&t.z!=null&&(t.z*=e)}function xX(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function SX(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function MX(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function $X(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Gu=null,Cy=null,U3=null,B3={};const KR=new fS;function rp(){return!!Gu&&UR()}function np(t){return U3==null&&(U3=Promise.all([BR(),he(()=>Promise.resolve().then(()=>fwe),void 0).then(e=>e.g),he(()=>Promise.resolve().then(()=>_we),void 0)])),U3.then(([,e,{hydratedAdapter:i}])=>{Oi(t),Cy=i,Gu=e.default,Gu._enableProjection(wX),KR.notify()})}function ah(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:B8(Cy,t,t[0].spatialReference,e,i,r):B8(Cy,[t],t.spatialReference,e,i,r)[0]}function B8(t,e,i,r,s=null,h=null){if(i==null||r==null)return e;if(Ku(i,r,s))return e.map(f=>CX(f,i,r));if(s==null){const f=I4.cacheKey(i,r);B3[f]!==void 0?s=B3[f]:((s=IX(i,r,void 0))==null&&(s=new I4),B3[f]=s)}if(Gu==null||t==null)throw new w7;return h!=null?Gu._project(t,e,i,r,s,h):Gu._project(t,e,i,r,s)}function h9e(t,e){const i=TX([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function TX(t,e){if(!rp()){for(const i of t)if(i!=null&&!ir(i.spatialReference,e)&&pr(i.spatialReference)&&pr(e)&&!Ku(i.spatialReference,e))return rt(KR),{pending:np(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:ir(i.spatialReference,e)?i:pr(i.spatialReference)&&pr(e)?EX(i,e):null)}}function IX(t,e,i=null){if(t==null||e==null)return null;if(Gu==null||Cy==null)throw new w7;const r=Gu._getTransformation(Cy,t,e,i,i==null?void 0:i.spatialReference);return r!==null?I4.fromGE(r):null}class w7 extends ne{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Q;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(Q||(Q={}));function EX(t,e){try{const i=ah(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=JR(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof w7))throw i;return null}}function Ku(t,e,i){return!i&&(!!ir(t,e)||pr(t)&&pr(e)&&!!QR(t,e,eF))}async function AX(t,e,i,r){if(rp())return F$(r);if(Array.isArray(t)){for(const{source:s,dest:h,geographicTransformation:f}of t)if(!Ku(s,h,f))return np(r)}else if(!Ku(t,e,i))return np(r);return F$(r)}function CX(t,e,i){return t?"x"in t?kX(t,e,new ke,i,0):"xmin"in t?RX(t,e,new At,i,0):"rings"in t?ZR(t,e,new ua,i,0):"paths"in t?PX(t,e,new _n,i,0):"points"in t?OX(t,e,new rm,i,0):null:null}function kX(t,e,i,r,s){gi[0]=t.x,gi[1]=t.y;const h=t.z;return gi[2]=h!==void 0?h:s,lh(gi,e,0,gi,r,0,1)?(i.x=gi[0],i.y=gi[1],i.spatialReference=r,h===void 0?(i.z=void 0,i.hasZ=!1):(i.z=gi[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function OX(t,e,i,r,s){const{points:h,hasZ:f,hasM:m}=t,b=[],S=h.length,I=[];for(const A of h)I.push(A[0],A[1],f?A[2]:s);if(!lh(I,e,0,I,r,0,S))return null;for(let A=0;A<S;++A){const O=3*A,R=I[O],L=I[O+1];f&&m?b.push([R,L,I[O+2],h[A][3]]):f?b.push([R,L,I[O+2]]):m?b.push([R,L,h[A][2]]):b.push([R,L])}return i.points=b,i.spatialReference=r,i.hasZ=f,i.hasM=m,i}function PX(t,e,i,r,s){const{paths:h,hasZ:f,hasM:m}=t,b=[];return YR(h,f??!1,m??!1,e,b,r,s)?(i.paths=b,i.spatialReference=r,i.hasZ=f,i.hasM=m,i):null}function c9e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&ZR(t,t.spatialReference,e,i,r)!=null}function ZR(t,e,i,r,s){const{rings:h,hasZ:f,hasM:m}=t,b=[];return YR(h,f??!1,m??!1,e,b,r,s)?(i.rings=b,i.spatialReference=r,i.hasZ=f,i.hasM=m,i):null}function RX(t,e,i,r,s){const{xmin:h,ymin:f,xmax:m,ymax:b,hasZ:S,hasM:I}=t;return H8(h,f,S?t.zmin:s,e,gi,r)?(i.xmin=gi[0],i.ymin=gi[1],S&&(i.zmin=gi[2]),H8(m,b,S?t.zmax:s,e,gi,r)?(i.xmax=gi[0],i.ymax=gi[1],S&&(i.zmax=gi[2]),I&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function sp(t,e,i){if(e==null||i==null)return null;const r=new ke({spatialReference:i});return lh(t,e,0,gi,i,0,1)?(r.x=gi[0],r.y=gi[1],r.z=gi[2],r):null}function Zu(t,e,i,r=0){gi[0]=t.x,gi[1]=t.y;const s=t.z;return gi[2]=s!==void 0?s:r,lh(gi,t.spatialReference,0,e,i,0,1)}function H8(t,e,i,r,s,h){return Fu[0]=t,Fu[1]=e,Fu[2]=i,lh(Fu,r,0,s,h,0,1)}function h0(t,e,i,r){return!(e==null||r==null||t.length<2)&&(t.length===2&&(Fu[0]=t[0],Fu[1]=t[1],Fu[2]=0,t=Fu),lh(t,e,0,i,r,0,1))}function lh(t,e,i,r,s,h,f=1){const m=QR(e,s,eF);if(m==null)return!1;if(m===Zt){if(t===r&&i===h)return!0;const S=i+3*f;for(let I=i,A=h;I<S;I++,A++)r[A]=t[I];return!0}const b=i+3*f;for(let S=i,I=h;S<b;S+=3,I+=3)m(t,S,r,I);return!0}function YR(t,e,i,r,s,h,f=0){const m=new Array;for(const S of t)for(const I of S)m.push(I[0],I[1],e?I[2]:f);if(!lh(m,r,0,m,h,0,m.length/3))return!1;let b=0;s.length=0;for(const S of t){const I=new Array;for(const A of S)e&&i?I.push([m[b++],m[b++],m[b++],A[3]]):e?I.push([m[b++],m[b++],m[b++]]):i?(I.push([m[b++],m[b++],A[2]]),b++):(I.push([m[b++],m[b++]]),b++);s.push(I)}return!0}function FX(t,e,i,r){if(t==null||r==null)return!1;const s=Y2(t,XX),h=Y2(r,QX);if(s===h&&!W8(h)&&(s!==Q.UNKNOWN||ir(t,r)))return LR(i,e),!0;if(W8(h)){const f=i1[s][Q.LON_LAT],m=i1[Q.LON_LAT][h];return f!=null&&m!=null&&(f(e,0,$l,0),m($l,0,Tl,0),XR(Xo*$l[0],Xo*$l[1],i),i[12]=Tl[0],i[13]=Tl[1],i[14]=Tl[2],!0)}if((h===Q.WEB_MERCATOR||h===Q.PLATE_CARREE)&&(s===Q.WGS84||s===Q.CGCS2000&&h===Q.PLATE_CARREE||s===Q.SPHERICAL_ECEF||s===Q.WEB_MERCATOR)){const f=i1[s][Q.LON_LAT],m=i1[Q.LON_LAT][h];return f!=null&&m!=null&&(f(e,0,$l,0),m($l,0,Tl,0),s===Q.SPHERICAL_ECEF?NX(Xo*$l[0],Xo*$l[1],i):cm(i),i[12]=Tl[0],i[13]=Tl[1],i[14]=Tl[2],!0)}return!1}function W8(t){return t===Q.SPHERICAL_ECEF||t===Q.SPHERICAL_MARS_PCPF||t===Q.SPHERICAL_MOON_PCPF}function XR(t,e,i){const r=Math.sin(t),s=Math.cos(t),h=Math.sin(e),f=Math.cos(e),m=i;return m[0]=-r,m[4]=-h*s,m[8]=f*s,m[12]=0,m[1]=s,m[5]=-h*r,m[9]=f*r,m[13]=0,m[2]=0,m[6]=f,m[10]=h,m[14]=0,m[3]=0,m[7]=0,m[11]=0,m[15]=1,m}function NX(t,e,i){return XR(t,e,i),Yn(i,i),i}function Y2(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=yl(t,1)),t.wkt===KB.wkt?e.spatialReferenceId=Q.SPHERICAL_ECEF:vy(t)?e.spatialReferenceId=Q.WGS84:Zc(t)?e.spatialReferenceId=Q.WEB_MERCATOR:UB(t)?e.spatialReferenceId=Q.PLATE_CARREE:t.wkt===ZB.wkt?e.spatialReferenceId=Q.WGS84_ECEF:t.wkid===gs.CGCS2000?e.spatialReferenceId=Q.CGCS2000:t.wkt===nO.wkt?e.spatialReferenceId=Q.SPHERICAL_MARS_PCPF:t.wkt===sO.wkt?e.spatialReferenceId=Q.SPHERICAL_MOON_PCPF:TS(t)?e.spatialReferenceId=Q.GCSMARS2000:ES(t)?e.spatialReferenceId=Q.GCSMOON2000:e.spatialReferenceId=Q.UNKNOWN):Q.UNKNOWN}function Zt(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function Gd(t,e,i,r){i[r++]=c0*(t[e++]/oi.radius),i[r++]=c0*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/oi.radius))),i[r]=t[e]}function LX(t,e,i,r){Gd(t,e,i,r),Ac(i,r,i,r)}function jX(t,e,i,r){Gd(t,e,i,r),kc(i,r,i,r)}function DX(t,e,i,r,s){const h=.4999999*Math.PI,f=fi(Xo*t[e+1],-h,h),m=Math.sin(f);i[r++]=Xo*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[r]=t[e+2]}function ky(t,e,i,r){DX(t,e,i,r,oi)}const J8=oi.radius*Math.PI/180,K8=180/(oi.radius*Math.PI);function Ic(t,e,i,r){i[r]=t[e]*J8,i[r+1]=t[e+1]*J8,i[r+2]=t[e+2]}function Ec(t,e,i,r){i[r]=t[e]*K8,i[r+1]=t[e+1]*K8,i[r+2]=t[e+2]}function zX(t,e,i,r){Gd(t,e,i,r),Ic(i,r,i,r)}function VX(t,e,i,r){Oc(t,e,i,r),Ic(i,r,i,r)}function GX(t,e,i,r){Cc(t,e,i,r),Ic(i,r,i,r)}function qX(t,e,i,r){Ec(t,e,i,r),Ac(i,r,i,r)}function UX(t,e,i,r){Ec(t,e,i,r),ky(i,r,i,r)}function BX(t,e,i,r){Ec(t,e,i,r),kc(i,r,i,r)}function b7(t,e,i,r,s){const h=s+t[e+2],f=Xo*t[e+1],m=Xo*t[e],b=Math.cos(f);i[r++]=Math.cos(m)*b*h,i[r++]=Math.sin(m)*b*h,i[r]=Math.sin(f)*h}function Z8(t,e,i,r){b7(t,e,i,r,Hu.radius)}function Y8(t,e,i,r){b7(t,e,i,r,el.radius)}function Ac(t,e,i,r){b7(t,e,i,r,oi.radius)}function _7(t,e,i,r,s){const h=t[e],f=t[e+1],m=t[e+2],b=Math.sqrt(h*h+f*f+m*m),S=la(m/(b===0?1:b)),I=Math.atan2(f,h);i[r++]=c0*I,i[r++]=c0*S,i[r]=b-s}function X8(t,e,i,r){_7(t,e,i,r,Hu.radius)}function Q8(t,e,i,r){_7(t,e,i,r,el.radius)}function Cc(t,e,i,r){_7(t,e,i,r,oi.radius)}function HX(t,e,i,r){Cc(t,e,i,r),ky(i,r,i,r)}function WX(t,e,i,r){Cc(t,e,i,r),kc(i,r,i,r)}function JX(t,e,i,r,s){const h=Xo*t[e],f=Xo*t[e+1],m=t[e+2],b=Math.sin(f),S=Math.cos(f),I=s.radius/Math.sqrt(1-s.eccentricitySquared*b*b);i[r++]=(I+m)*S*Math.cos(h),i[r++]=(I+m)*S*Math.sin(h),i[r++]=(I*(1-s.eccentricitySquared)+m)*b}function kc(t,e,i,r){JX(t,e,i,r,oi)}function Oc(t,e,i,r){const s=bX,h=t[e],f=t[e+1],m=t[e+2];let b,S,I,A,O,R,L,z,j,H,Y,X,te,oe,le,ve,xe,Fe,Pe,He,ze;b=Math.abs(m),S=h*h+f*f,I=Math.sqrt(S),A=S+m*m,O=Math.sqrt(A),He=Math.atan2(f,h),R=m*m/A,L=S/A,oe=s.a2/O,le=s.a3-s.a4/O,L>.3?(z=b/O*(1+L*(s.a1+oe+R*le)/O),Pe=Math.asin(z),H=z*z,j=Math.sqrt(1-H)):(j=I/O*(1-R*(s.a5-oe-L*le)/O),Pe=Math.acos(j),H=1-j*j,z=Math.sqrt(H)),Y=1-oi.eccentricitySquared*H,X=oi.radius/Math.sqrt(Y),te=s.a6*X,oe=I-X*j,le=b-te*z,xe=j*oe+z*le,ve=j*le-z*oe,Fe=ve/(te/Y+xe),Pe+=Fe,ze=xe+ve*Fe/2,m<0&&(Pe=-Pe),i[r++]=c0*He,i[r++]=c0*Pe,i[r]=ze}function KX(t,e,i,r){Oc(t,e,i,r),Ac(i,r,i,r)}function ZX(t,e,i,r){Oc(t,e,i,r),ky(i,r,i,r)}const i1={[Q.WGS84]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:Zt,[Q.SPHERICAL_ECEF]:Ac,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:ky,[Q.PLATE_CARREE]:Ic,[Q.WGS84]:Zt,[Q.WGS84_ECEF]:kc},[Q.CGCS2000]:{[Q.CGCS2000]:Zt,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:Zt,[Q.SPHERICAL_ECEF]:Ac,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:Ic,[Q.WGS84]:null,[Q.WGS84_ECEF]:kc},[Q.GCSMARS2000]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:Zt,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:Y8,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.GCSMOON2000]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:Zt,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:Z8,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.WEB_MERCATOR]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Gd,[Q.WGS84_COMPARABLE_LON_LAT]:Gd,[Q.SPHERICAL_ECEF]:LX,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:Zt,[Q.PLATE_CARREE]:zX,[Q.WGS84]:Gd,[Q.WGS84_ECEF]:jX},[Q.WGS84_ECEF]:{[Q.CGCS2000]:Oc,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Oc,[Q.WGS84_COMPARABLE_LON_LAT]:Oc,[Q.SPHERICAL_ECEF]:KX,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:ZX,[Q.PLATE_CARREE]:VX,[Q.WGS84]:Oc,[Q.WGS84_ECEF]:Zt},[Q.SPHERICAL_ECEF]:{[Q.CGCS2000]:Cc,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Cc,[Q.WGS84_COMPARABLE_LON_LAT]:Cc,[Q.SPHERICAL_ECEF]:Zt,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:HX,[Q.PLATE_CARREE]:GX,[Q.WGS84]:Cc,[Q.WGS84_ECEF]:WX},[Q.SPHERICAL_MARS_PCPF]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:Q8,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Q8,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:Zt,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.SPHERICAL_MOON_PCPF]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:X8,[Q.LON_LAT]:X8,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:Zt,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.UNKNOWN]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:null,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:Zt,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.LON_LAT]:{[Q.CGCS2000]:Zt,[Q.GCSMARS2000]:Zt,[Q.GCSMOON2000]:Zt,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:Zt,[Q.SPHERICAL_ECEF]:Ac,[Q.SPHERICAL_MARS_PCPF]:Y8,[Q.SPHERICAL_MOON_PCPF]:Z8,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:ky,[Q.PLATE_CARREE]:Ic,[Q.WGS84]:Zt,[Q.WGS84_ECEF]:kc},[Q.WGS84_COMPARABLE_LON_LAT]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Zt,[Q.WGS84_COMPARABLE_LON_LAT]:Zt,[Q.SPHERICAL_ECEF]:Ac,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:Ic,[Q.WGS84]:Zt,[Q.WGS84_ECEF]:kc},[Q.PLATE_CARREE]:{[Q.CGCS2000]:Ec,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Ec,[Q.WGS84_COMPARABLE_LON_LAT]:Ec,[Q.SPHERICAL_ECEF]:qX,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:UX,[Q.PLATE_CARREE]:Zt,[Q.WGS84]:Ec,[Q.WGS84_ECEF]:BX}};function QR(t,e,i=x7()){return t==null||e==null?null:YX(t,e,i).projector}function YX(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=Y2(t,i.source),s=Y2(e,i.dest);return r===Q.UNKNOWN&&s===Q.UNKNOWN?ir(t,e)?i.projector=Zt:i.projector=null:i.projector=i1[r][s],i}function x7(){return{source:{spatialReference:null,spatialReferenceId:Q.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Q.UNKNOWN,metersPerUnit:1},projector:Zt}}const XX={spatialReference:null,spatialReferenceId:Q.UNKNOWN},QX={spatialReference:null,spatialReferenceId:Q.UNKNOWN},eF=x7();x7();const Xo=Hi(1),c0=Ms(1),Fu=we(),$l=we(),Tl=we(),gi=we();var E4;let jo=E4=class extends ye{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new E4({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};v([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],jo.prototype,"cols",void 0),v([x({type:Bt,json:{write:!0}})],jo.prototype,"level",void 0),v([x({type:String,json:{write:!0}})],jo.prototype,"levelValue",void 0),v([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],jo.prototype,"origin",void 0),v([x({type:Number,json:{write:!0}})],jo.prototype,"resolution",void 0),v([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],jo.prototype,"rows",void 0),v([x({type:Number,json:{write:!0}})],jo.prototype,"scale",void 0),jo=E4=v([B("esri.layers.support.LOD")],jo);const yu=jo;let eQ=class{constructor(e,i,r,s,h=void 0){this.id=e,this.level=i,this.row=r,this.col=s,this.extent=h}};var eu;const eT=new tt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Yi=eu=class extends ye{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:s=Ye.WebMercator,numLODs:h=24}=t;if(!pr(s)){const A=[];if(i)for(let O=0;O<i.length;O++){const R=i[O];A.push(new yu({level:O,scale:R,resolution:R}))}else{let O=5e-4;for(let R=h-1;R>=0;R--)A.unshift(new yu({level:R,scale:O,resolution:O})),O*=2}return new eu({dpi:96,lods:A,origin:new ke(0,0,s),size:[r,r],spatialReference:s})}const f=fo(s),m=t.origin?new ke({x:t.origin.x,y:t.origin.y,spatialReference:s}):new ke(f?{x:f.origin[0],y:f.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),b=96,S=1/(yl(s)*39.37*b),I=[];if(i)for(let A=0;A<i.length;A++){const O=i[A],R=O*S;I.push(new yu({level:A,scale:O,resolution:R}))}else{let A=rO(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const O=Math.ceil(h/e);I.push(new yu({level:0,scale:A,resolution:A*S}));for(let R=1;R<O;R++){const L=A/2**e,z=L*S;I.push(new yu({level:R,scale:L,resolution:z})),A=L}}return new eu({dpi:b,lods:I,origin:m,size:[r,r],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=fo(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return ke.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],s=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(h=>{r.push(h.scale),e=h.scale>e?h.scale:e,i=h.scale<i?h.scale:i,s[h.level]=h})),this._set("scales",r),this._set("minScale",e),this._set("maxScale",i),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const s=e[r],h=e[r+1];if(s<=t)return r;if(h===t)return r+1;if(s>t&&h<t)return r+Math.log(s/t)/Math.log(s/h)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const s=this.lodAt(t);if(!s)return null;let h,f;if(typeof e=="number")h=e,f=i;else if(ir(e.spatialReference,this.spatialReference))h=e.x,f=e.y,r=i;else{const S=E0(e,this.spatialReference);if(S==null)return null;h=S.x,f=S.y,r=i}const m=s.resolution*this.size[0],b=s.resolution*this.size[1];return r||(r=new eQ(null,0,0,0,$s())),r.level=t,r.row=Math.floor((this.origin.y-f)/b+.001),r.col=Math.floor((h-this.origin.x)/m+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=eu.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===eu.ExtrapolateOptions.POWER_OF_TWO){const f=this.lods[this.lods.length-1];f.level<t.level&&(i=f)}if(!i)return;const r=t.level-i.level,s=i.resolution*this.size[0]/2**r,h=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=$s()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*h,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+h}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],h=r*this.size[1];return t[0]=this.origin.x+e.col*s,t[1]=this.origin.y-(e.row+1)*h,t[2]=t[0]+s,t[3]=t[1]+h,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return eu.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const h=this.lods[s],f=h.resolution*e;i.push(new yu({level:h.level,scale:h.scale,resolution:f}))}return new eu({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};v([x({type:Number,json:{write:!0}})],Yi.prototype,"compressionQuality",void 0),v([x({type:Number,json:{write:!0}})],Yi.prototype,"dpi",void 0),v([x({type:String,json:{read:eT.read,write:eT.write,origins:{"web-scene":{read:!1,write:!1}}}})],Yi.prototype,"format",void 0),v([x({readOnly:!0})],Yi.prototype,"isWrappable",null),v([x({type:ke,json:{write:!0}})],Yi.prototype,"origin",void 0),v([Me("origin")],Yi.prototype,"readOrigin",null),v([x({type:[yu],value:null,json:{write:!0}})],Yi.prototype,"lods",null),v([x({readOnly:!0})],Yi.prototype,"minScale",void 0),v([x({readOnly:!0})],Yi.prototype,"maxScale",void 0),v([x({readOnly:!0})],Yi.prototype,"scales",void 0),v([x({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Yi.prototype,"size",void 0),v([Me("size",["rows","cols"])],Yi.prototype,"readSize",null),v([Ee("size",{cols:{type:Bt},rows:{type:Bt}})],Yi.prototype,"writeSize",null),v([x({type:Ye,json:{write:!0}})],Yi.prototype,"spatialReference",void 0),Yi=eu=v([B("esri.layers.support.TileInfo")],Yi),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Yi||(Yi={}));const tQ=Yi,kv={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},H3={xsmall:544,small:768,medium:992,large:1200};function iQ(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function W3(t,e){return e?kv[t].valueToClassName[e].split(" "):[]}const rQ=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Mn,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=H3}initialize(){this._breakpointsHandles.add(me(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),_t))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Ut(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=iQ(i);if(!r){const s=JSON.stringify(H3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:H3,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=nn.acquire(),r=nn.acquire();let s,h=!1;for(s in kv){const f=this[s],m=kv[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==m&&(h=!0,this[s]=m,W3(s,f).forEach(b=>r.push(b)),W3(s,m).forEach(b=>i.push(b)))}h&&(this._applyClassNameChanges(i,r),nn.release(i),nn.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(h=>s.classList.remove(h)),i.forEach(h=>s.classList.add(h)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in kv)W3(r,this[r]).forEach(s=>i.classList.remove(s))}};return v([x()],e.prototype,"breakpoints",null),v([x()],e.prototype,"orientation",void 0),v([x()],e.prototype,"widthBreakpoint",void 0),v([x()],e.prototype,"heightBreakpoint",void 0),e=v([B("esri.views.BreakpointsOwner")],e),e};function S7(t){return typeof t=="string"?document.getElementById(t):t??null}function tF(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function tT(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function iT(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let qd=class extends Oe{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Mn,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,me)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Sn)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const h=++this._handleId;return this._handles.add([un(e,"after-changes",this._createSyncUpdatingCallback(),qn),un(e,"change",i,{onListenerAdd:r?f=>i({added:f.toArray(),removed:[]}):void 0,onListenerRemove:s?f=>i({added:[],removed:f.toArray()}):void 0})],h),{remove:()=>this._handles.remove(h)}}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(rg)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},s){const h=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,h);const f=s(e,i,r);return this._handles.add(f,h),{remove:()=>this._handles.remove(h)}}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=me(e,r,{sync:!0,equals:()=>!1});return this._handles.add(s,i),s}_createSyncUpdatingCallback(){return()=>{this._handles.remove(rg),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(T0(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(rg))}),rg)}}};v([x({readOnly:!0})],qd.prototype,"updating",void 0),qd=v([B("esri.core.support.WatchUpdatingTracking")],qd);const rg=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var nQ=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},gc={exports:{}},Ti={},Oy={exports:{}},mp={};function iF(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function sQ(t,e,i){}function oQ(t,e,i){}var aQ=/javascript\s*\:/img;function lQ(t,e){return aQ.test(e)?"":e}mp.whiteList=iF();mp.getDefaultWhiteList=iF;mp.onAttr=sQ;mp.onIgnoreAttr=oQ;mp.safeAttrValue=lQ;var uQ={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},hf=uQ;function hQ(t,e){t=hf.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,h=0,f="";function m(){if(!r){var I=hf.trim(t.slice(s,h)),A=I.indexOf(":");if(A!==-1){var O=hf.trim(I.slice(0,A)),R=hf.trim(I.slice(A+1));if(O){var L=e(s,f.length,O,R,I);L&&(f+=L+"; ")}}}s=h+1}for(;h<i;h++){var b=t[h];if(b==="/"&&t[h+1]==="*"){var S=t.indexOf("*/",h+2);if(S===-1)break;h=S+1,s=h+1,r=!1}else b==="("?r=!0:b===")"?r=!1:b===";"?r||m():b===`
`&&m()}return hf.trim(f)}var cQ=hQ,ng=mp,pQ=cQ;function rT(t){return t==null}function dQ(t){var e={};for(var i in t)e[i]=t[i];return e}function rF(t){t=dQ(t||{}),t.whiteList=t.whiteList||ng.whiteList,t.onAttr=t.onAttr||ng.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||ng.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||ng.safeAttrValue,this.options=t}rF.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,h=i.onIgnoreAttr,f=i.safeAttrValue,m=pQ(t,function(b,S,I,A,O){var R=r[I],L=!1;if(R===!0?L=R:typeof R=="function"?L=R(A):R instanceof RegExp&&(L=R.test(A)),L!==!0&&(L=!1),A=f(I,A),!!A){var z={position:S,sourcePosition:b,source:O,isWhite:L};if(L){var j=s(I,A,z);return rT(j)?I+":"+A:j}else{var j=h(I,A,z);if(!rT(j))return j}}});return m};var fQ=rF;(function(t,e){var i=mp,r=fQ;function s(f,m){var b=new r(m);return b.process(f)}e=t.exports=s,e.FilterCSS=r;for(var h in i)e[h]=i[h]})(Oy,Oy.exports);var M7={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},yQ=Oy.exports.FilterCSS,mQ=Oy.exports.getDefaultWhiteList,X2=M7;function nF(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var sF=new yQ;function gQ(t,e,i){}function vQ(t,e,i){}function wQ(t,e,i){}function bQ(t,e,i){}function oF(t){return t.replace(xQ,"&lt;").replace(SQ,"&gt;")}function _Q(t,e,i,r){if(i=pF(i),e==="href"||e==="src"){if(i=X2.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(sg.lastIndex=0,sg.test(i))return""}else if(e==="style"){if(nT.lastIndex=0,nT.test(i)||(sT.lastIndex=0,sT.test(i)&&(sg.lastIndex=0,sg.test(i))))return"";r!==!1&&(r=r||sF,i=r.process(i))}return i=dF(i),i}var xQ=/</g,SQ=/>/g,MQ=/"/g,$Q=/&quot;/g,TQ=/&#([a-zA-Z0-9]*);?/gim,IQ=/&colon;?/gim,EQ=/&newline;?/gim,sg=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,nT=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,sT=/u\s*r\s*l\s*\(.*/gi;function aF(t){return t.replace(MQ,"&quot;")}function lF(t){return t.replace($Q,'"')}function uF(t){return t.replace(TQ,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function hF(t){return t.replace(IQ,":").replace(EQ," ")}function cF(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return X2.trim(e)}function pF(t){return t=lF(t),t=uF(t),t=hF(t),t=cF(t),t}function dF(t){return t=aF(t),t=oF(t),t}function AQ(){return""}function CQ(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(f){return i?!0:X2.indexOf(t,f)!==-1}var s=[],h=!1;return{onIgnoreTag:function(f,m,b){if(r(f))if(b.isClosing){var S="[/removed]",I=b.position+S.length;return s.push([h!==!1?h:b.position,I]),h=!1,S}else return h||(h=b.position),"[removed]";else return e(f,m,b)},remove:function(f){var m="",b=0;return X2.forEach(s,function(S){m+=f.slice(b,S[0]),b=S[1]}),m+=f.slice(b),m}}}function kQ(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function OQ(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Ti.whiteList=nF();Ti.getDefaultWhiteList=nF;Ti.onTag=gQ;Ti.onIgnoreTag=vQ;Ti.onTagAttr=wQ;Ti.onIgnoreTagAttr=bQ;Ti.safeAttrValue=_Q;Ti.escapeHtml=oF;Ti.escapeQuote=aF;Ti.unescapeQuote=lF;Ti.escapeHtmlEntities=uF;Ti.escapeDangerHtml5Entities=hF;Ti.clearNonPrintableCharacter=cF;Ti.friendlyAttrValue=pF;Ti.escapeAttrValue=dF;Ti.onIgnoreTagStripAll=AQ;Ti.StripTagBody=CQ;Ti.stripCommentTag=kQ;Ti.stripBlankChar=OQ;Ti.cssFilter=sF;Ti.getDefaultCSSWhiteList=mQ;var wb={},mu=M7;function PQ(t){var e=mu.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=mu.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function RQ(t){return t.slice(0,2)==="</"}function FQ(t,e,i){var r="",s=0,h=!1,f=!1,m=0,b=t.length,S="",I="";e:for(m=0;m<b;m++){var A=t.charAt(m);if(h===!1){if(A==="<"){h=m;continue}}else if(f===!1){if(A==="<"){r+=i(t.slice(s,m)),h=m,s=m;continue}if(A===">"){r+=i(t.slice(s,h)),I=t.slice(h,m+1),S=PQ(I),r+=e(h,r.length,S,I,RQ(I)),s=m+1,h=!1;continue}if(A==='"'||A==="'")for(var O=1,R=t.charAt(m-O);R.trim()===""||R==="=";){if(R==="="){f=A;continue e}R=t.charAt(m-++O)}}else if(A===f){f=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var NQ=/[^a-zA-Z0-9\\_:.-]/gim;function LQ(t,e){var i=0,r=0,s=[],h=!1,f=t.length;function m(O,R){if(O=mu.trim(O),O=O.replace(NQ,"").toLowerCase(),!(O.length<1)){var L=e(O,R||"");L&&s.push(L)}}for(var b=0;b<f;b++){var S=t.charAt(b),I,A;if(h===!1&&S==="="){h=t.slice(i,b),i=b+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:DQ(t,b+1);continue}if(h!==!1&&b===r){if(A=t.indexOf(S,b+1),A===-1)break;I=mu.trim(t.slice(r+1,A)),m(h,I),h=!1,b=A,i=b+1;continue}if(/\s|\n|\t/.test(S))if(t=t.replace(/\s|\n|\t/g," "),h===!1)if(A=jQ(t,b),A===-1){I=mu.trim(t.slice(i,b)),m(I),h=!1,i=b+1;continue}else{b=A-1;continue}else if(A=zQ(t,b-1),A===-1){I=mu.trim(t.slice(i,b)),I=oT(I),m(h,I),h=!1,i=b+1;continue}else continue}return i<t.length&&(h===!1?m(t.slice(i)):m(h,oT(mu.trim(t.slice(i))))),mu.trim(s.join(" "))}function jQ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function DQ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function zQ(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function VQ(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function oT(t){return VQ(t)?t.substr(1,t.length-2):t}wb.parseTag=FQ;wb.parseAttr=LQ;var GQ=Oy.exports.FilterCSS,ro=Ti,fF=wb,qQ=fF.parseTag,UQ=fF.parseAttr,Ov=M7;function og(t){return t==null}function BQ(t){var e=Ov.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Ov.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Ov.trim(t.slice(0,-1))),{html:t,closing:i}}function HQ(t){var e={};for(var i in t)e[i]=t[i];return e}function WQ(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function yF(t){t=HQ(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=ro.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=WQ(t.whiteList||t.allowList):t.whiteList=ro.whiteList,t.onTag=t.onTag||ro.onTag,t.onTagAttr=t.onTagAttr||ro.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||ro.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||ro.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||ro.safeAttrValue,t.escapeHtml=t.escapeHtml||ro.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new GQ(t.css))}yF.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,h=i.onIgnoreTag,f=i.onTagAttr,m=i.onIgnoreTagAttr,b=i.safeAttrValue,S=i.escapeHtml,I=e.cssFilter;i.stripBlankChar&&(t=ro.stripBlankChar(t)),i.allowCommentTag||(t=ro.stripCommentTag(t));var A=!1;i.stripIgnoreTagBody&&(A=ro.StripTagBody(i.stripIgnoreTagBody,h),h=A.onIgnoreTag);var O=qQ(t,function(R,L,z,j,H){var Y={sourcePosition:R,position:L,isClosing:H,isWhite:Object.prototype.hasOwnProperty.call(r,z)},X=s(z,j,Y);if(!og(X))return X;if(Y.isWhite){if(Y.isClosing)return"</"+z+">";var te=BQ(j),oe=r[z],le=UQ(te.html,function(ve,xe){var Fe=Ov.indexOf(oe,ve)!==-1,Pe=f(z,ve,xe,Fe);return og(Pe)?Fe?(xe=b(z,ve,xe,I),xe?ve+'="'+xe+'"':ve):(Pe=m(z,ve,xe,Fe),og(Pe)?void 0:Pe):Pe});return j="<"+z,le&&(j+=" "+le),te.closing&&(j+=" /"),j+=">",j}else return X=h(z,j,Y),og(X)?S(j):X},S);return A&&(O=A.remove(O)),O};var JQ=yF;(function(t,e){var i=Ti,r=wb,s=JQ;function h(m,b){var S=new s(b);return S.process(m)}e=t.exports=h,e.filterXSS=h,e.FilterXSS=s,function(){for(var m in i)e[m]=i[m];for(var b in r)e[b]=r[b]}();function f(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}f()&&(self.filterXSS=t.exports)})(gc,gc.exports);var KQ=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(h,f,m,b){return h==="a"&&f==="href"||(h==="img"||h==="source")&&f==="src"?r.sanitizeUrl(m):gc.exports.safeAttrValue(h,f,m,b)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(h){h==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):s[h]=e[h]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new gc.exports.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,h=this._trim(e.substring(0,e.indexOf(":"))),f=e==="/",m=/^#/.test(e),b=h&&this.allowedProtocols.indexOf(h.toLowerCase())>-1;return f||m||b?gc.exports.escapeAttrValue(e):!h&&!s?gc.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):gc.exports.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,h=void 0;if(Array.isArray(e))h=e.reduce(function(m,b){var S=r.validate(b,i);return S.isValid?m.concat([b]):(s=!0,m.concat([S.sanitized]))},[]);else if(nQ(e)){var f=Object.keys(e);h=f.reduce(function(m,b){var S=e[b],I=r.validate(S,i);return I.isValid?m[b]=S:(s=!0,m[b]=I.sanitized),m},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?h:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const bb=new Map;function mF(){bb.clear()}function ZQ(t){return bb.get(t)}function YQ(t,e){bb.set(t,e)}function J3(t){bb.delete(t)}var op,p0,XQ=function(t){if("WebkitTransition"in t.style)op="webkitTransitionEnd",p0="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");op="transitionend",p0="animationend"}},gF=function(t){op||XQ(t)},QQ=function(t,e){return e===void 0&&(e=t+"-active"),function(i){gF(i);var r=!1,s=function(h){r||(r=!0,i.removeEventListener(op,s),i.removeEventListener(p0,s),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(op,s),i.addEventListener(p0,s),requestAnimationFrame(function(){i.classList.add(e)})}},eee=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){gF(i);var s=!1,h=function(f){s||(s=!0,i.removeEventListener(op,h),i.removeEventListener(p0,h),r())};i.classList.add(t),i.addEventListener(op,h),i.addEventListener(p0,h),requestAnimationFrame(function(){i.classList.add(e)})}};const tee=fe.getLogger("esri.widgets.support.widgetUtils");function vF(t){const e=nn.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],h=typeof s;if(h==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(h==="object")for(const f in s)s[f]&&e.push(f)}const i=e.join(" ");return nn.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(i=>{var r;mF();for(const s of i)(r=t.get(s.target))==null||r(s)});return(i,r,s)=>(t.has(i)&&tee.error("Already observing element",i),t.set(i,r),e.observe(i,s),$0(()=>{e.unobserve(i),t.delete(i)}))})();function Qo(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function aT(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Q2(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function iee(t,e){return(t==="enter"?QQ:eee)(e)}const ree=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],nee=ree.reduce((t,e)=>(t[e]=[],t),{}),see=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],wF=new KQ({whiteList:nee,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(see.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function oee(t){return t==="Enter"||t===" "}const bF="http://www.w3.org/",_b=`${bF}2000/svg`,_F=`${bF}1999/xlink`;let lT=[],$7=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},T7=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),xF=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},aee=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(T7(t[r],e))return r}return-1},K3=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let h=s.properties;if(!(h&&(h.key===void 0?h.bind:h.key))){for(let f=0;f<t.length;f++)if(f!==e){let m=t[f];if(T7(m,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},lee=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},A4=[],C4=!1,SF=t=>{(t.children||[]).forEach(SF),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},uT=()=>{C4=!1,A4.forEach(SF),A4.length=0},hT=t=>{A4.push(t),C4||(C4=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(uT,{timeout:16}):setTimeout(uT,16))},cT=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),hT(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),hT(t))},uee=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),h=s.length;for(let f=0;f<h;f++){let m=s[f],b=e[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")k4(t,b,!0);else if(m==="classes"){let S=Object.keys(b),I=S.length;for(let A=0;A<I;A++){let O=S[A];b[O]&&t.classList.add(O)}}else if(m==="styles"){let S=Object.keys(b),I=S.length;for(let A=0;A<I;A++){let O=S[A],R=b[O];R&&(xF(R),i.styleApplyer(t,O,R))}}else if(m!=="key"&&b!=null){let S=typeof b;S==="function"?(m.lastIndexOf("on",0)===0&&(r&&(b=r(m,b,t,e)),m==="oninput"&&function(){let I=b;b=function(A){I.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),t[m]=b):i.namespace===_b?m==="href"?t.setAttributeNS(_F,m,b):t.setAttribute(m,b):S==="string"&&m!=="value"?m==="innerHTML"?t[m]=wF.sanitize(b):MF(t)&&m in t?t[m]=b:t.setAttribute(m,b):t[m]=b}}};function MF(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let ew,hee=(t,e,i)=>{if(e)for(let r of e)Od(r,t,void 0,i)},$F=(t,e,i)=>{hee(t,e.children,i),e.text&&(t.textContent=e.text),uee(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Od=(t,e,i,r)=>{let s,h=0,f=t.vnodeSelector,m=e.ownerDocument;if(f==="")s=t.domNode=m.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let b=0;b<=f.length;++b){let S=f.charAt(b);if(b===f.length||S==="."||S==="#"){let I=f.charAt(h-1),A=f.slice(h,b);I==="."?s.classList.add(A):I==="#"?s.id=A:(A==="svg"&&(r=$7(r,{namespace:_b})),r.namespace!==void 0?s=t.domNode=m.createElementNS(r.namespace,A):(s=t.domNode=t.domNode||m.createElement(A),A==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),h=b+1}}$F(s,t,r)}},k4=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},cee=(t,e,i,r)=>{if(!i)return;let s=!1,h=Object.keys(i),f=h.length;for(let m=0;m<f;m++){let b=h[m],S=i[b],I=e[b];if(b==="class")I!==S&&(k4(t,I,!1),k4(t,S,!0));else if(b==="classes"){let A=t.classList,O=Object.keys(S),R=O.length;for(let L=0;L<R;L++){let z=O[L],j=!!S[z];j!==!!I[z]&&(s=!0,j?A.add(z):A.remove(z))}}else if(b==="styles"){let A=Object.keys(S),O=A.length;for(let R=0;R<O;R++){let L=A[R],z=S[L];z!==I[L]&&(s=!0,z?(xF(z),r.styleApplyer(t,L,z)):r.styleApplyer(t,L,""))}}else if(S||typeof I!="string"||(S=""),b==="value"){let A=t[b];A!==S&&(t["oninput-value"]?A===t["oninput-value"]:S!==I)&&(t[b]=S,t["oninput-value"]=void 0),S!==I&&(s=!0)}else if(S!==I){let A=typeof S;A==="function"&&r.eventHandlerInterceptor||(r.namespace===_b?b==="href"?t.setAttributeNS(_F,b,S):t.setAttribute(b,S):A==="string"?b==="innerHTML"?t[b]=wF.sanitize(S):b==="role"&&S===""?t.removeAttribute(b):MF(t)&&b in t?t[b]=S:t.setAttribute(b,S):t[b]!==S&&(t[b]=S),s=!0)}}return s},pee=(t,e,i,r,s)=>{if(i===r)return!1;r=r||lT;let h,f=(i=i||lT).length,m=r.length,b=0,S=0,I=!1;for(;S<m;){let A=b<f?i[b]:void 0,O=r[S];if(A!==void 0&&T7(A,O))I=ew(A,O,s)||I,b++;else{let R=aee(i,O,b+1);if(R>=0){for(h=b;h<R;h++)cT(i[h]),K3(i,h,t,"removed");I=ew(i[R],O,s)||I,b=R+1}else Od(O,e,b<f?i[b].domNode:void 0,s),lee(O),K3(r,S,t,"added")}S++}if(f>b)for(h=b;h<f;h++)cT(i[h]),K3(i,h,t,"removed");return I};ew=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let h=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let f=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(f,r),e.domNode=f,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=$7(i,{namespace:_b})),t.text!==e.text&&(h=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,h=pee(e,r,t.children,e.children,i)||h,h=cee(r,t.properties,e.properties,i)||h,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return h&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let cf=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,ew(r,i,e)},domNode:t.domNode});const dee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Xp=t=>$7(dee,t),Nu={create:(t,e)=>(e=Xp(e),Od(t,document.createElement("div"),void 0,e),cf(t,e)),append:(t,e,i)=>(i=Xp(i),Od(e,t,void 0,i),cf(e,i)),insertBefore:(t,e,i)=>(i=Xp(i),Od(e,t.parentNode,t,i),cf(e,i)),merge:(t,e,i)=>(i=Xp(i),e.domNode=t,$F(t,e,i),cf(e,i)),replace:(t,e,i)=>(i=Xp(i),Od(e,t.parentNode,t,i),t.parentNode.removeChild(t),cf(e,i))},TF,fee=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};TF=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let yee=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?TF(i.children,s=>s.domNode===r):void 0}),i},mee=(t,e,i)=>{let r=function(s){i("domEvent",s);let h=e(),f=fee(s.currentTarget,h.domNode);f.reverse();let m,b=yee(h.getLastRender(),f);return t.scheduleRender(),b&&(m=b.properties[`on${s.type}`].apply(b.properties.bind||this,arguments)),i("domEventProcessed",s),m};return(s,h,f,m)=>r},O4=t=>{let e,i,r=Xp(t),s=r.performanceLogger,h=!0,f=!1,m=[],b=[],S=(A,O,R)=>{let L,z=()=>L;r.eventHandlerInterceptor=mee(e,z,s),L=A(O,R(),r),m.push(L),b.push(R)},I=()=>{if(i=void 0,h){h=!1,s("renderStart",void 0);for(let A=0;A<m.length;A++){let O=b[A]();s("rendered",void 0),m[A].update(O),s("patched",void 0)}s("renderDone",void 0),h=!0}};return e={renderNow:I,scheduleRender:()=>{i||f||(i=requestAnimationFrame(I))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),f=!0},resume:()=>{f=!1,h=!0,e.scheduleRender()},append:(A,O)=>{S(Nu.append,A,O)},insertBefore:(A,O)=>{S(Nu.insertBefore,A,O)},merge:(A,O)=>{S(Nu.merge,A,O)},replace:(A,O)=>{S(Nu.replace,A,O)},detach:A=>{for(let O=0;O<b.length;O++)if(b[O]===A)return b.splice(O,1),m.splice(O,1)[0];throw new Error("renderFunction was not found")}},e},tu=class extends Oe{constructor(){super(...arguments),this.items=new qe,this._watchUpdatingTracking=new qd,this._callbacks=new Map,this._projector=O4(),this._hiddenProjector=O4()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const h=()=>(s=e.render(),s);r.append(i,h),r.renderNow();const f={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const m=s.domNode.getBoundingClientRect();f.left=m.left,f.top=m.top,f.right=m.right,f.bottom=m.bottom}for(r.detach(h);i.firstChild;)i.removeChild(i.firstChild);return f}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};v([x({readOnly:!0})],tu.prototype,"surface",void 0),v([x({readOnly:!0})],tu.prototype,"items",void 0),v([x({readOnly:!0})],tu.prototype,"needsRender",null),v([x({readOnly:!0})],tu.prototype,"_watchUpdatingTracking",void 0),v([x({readOnly:!0})],tu.prototype,"updating",null),tu=v([B("esri.views.overlay.ViewOverlay")],tu);const pT=tu;function Ud(t,e,i,r){let s=null,h=1e3;typeof e=="number"?(h=e,r=i):(s=e??null,h=i);let f,m=0;const b=()=>{m=0,t.apply(r,f)},S=(...I)=>{s&&s.apply(r,I),f=I,h?m||(m=setTimeout(b,h)):b()};return S.remove=()=>{m&&(clearTimeout(m),m=0)},S.forceUpdate=()=>{m&&(clearTimeout(m),b())},S.hasPendingUpdates=()=>!!m,S}const gee="randomUUID"in crypto;function vee(){if(gee)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}const wee={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},bee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},_ee=t=>({...bee,...t}),xee=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},See=(t,e)=>t.find(e),dT=(t,e,i=!1)=>{let r=t;return e.forEach((s,h)=>{const f=r!=null&&r.children?See(r.children,m=>m.domNode===s):void 0;i&&!f&&h!==e.length-1||(r=f)}),r},Mee=t=>{let e;const i={...wee,...t},r=_ee(i),s=r.performanceLogger;let h,f=!0,m=!1;const b=[],S=[],I=(O,R,L)=>{var H;let z;r.eventHandlerInterceptor=(Y,X,te,oe)=>function(le){let ve;s("domEvent",le);const xe=xee(le.currentTarget,z.domNode),Fe=xe.some(He=>{var ze;return customElements.get((ze=He==null?void 0:He.tagName)==null?void 0:ze.toLowerCase())});if(le.eventPhase===Event.CAPTURING_PHASE||!Fe)xe.reverse(),ve=dT(z.getLastRender(),xe);else{const He=le.composedPath(),ze=He.slice(He.indexOf(le.currentTarget),He.indexOf(z.domNode)).filter(st=>st.getRootNode()===st.ownerDocument).reverse();ve=dT(z.getLastRender(),ze,!0)}let Pe;return ve&&(Pe=i.handleInterceptedEvent(e,ve,this,le)),s("domEventProcessed",le),Pe},(H=i.postProcessProjectionOptions)==null||H.call(i,r);const j=L();z=O(R,j,r),b.push(z),S.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,j)};let A=()=>{if(h=void 0,f){f=!1,s("renderStart",void 0);for(let O=0;O<b.length;O++){const R=S[O]();s("rendered",void 0),b[O].update(R),s("patched",void 0)}s("renderDone",void 0),f=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,b,S)),e={renderNow:A,scheduleRender:()=>{h||m||(h=requestAnimationFrame(A))},stop:()=>{h&&(cancelAnimationFrame(h),h=void 0),m=!0},resume:()=>{m=!1,f=!0,e.scheduleRender()},append:(O,R)=>{I(Nu.append,O,R)},insertBefore:(O,R)=>{I(Nu.insertBefore,O,R)},merge:(O,R)=>{I(Nu.merge,O,R)},replace:(O,R)=>{I(Nu.replace,O,R)},detach:O=>{for(let R=0;R<S.length;R++)if(S[R]===O)return S.splice(R,1),b.splice(R,1)[0];throw new Error("renderFunction was not found")}},e},Qp={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ed,IF,xb,EF=!1,tw=!1,I7=!1,Dn=!1,fT=null,P4=!1;const y9e=t=>{const e=new URL(t,$r.$resourcesUrl$);return e.origin!==ym.location.origin?e.href:e.pathname},$ee=t=>$r.$resourcesUrl$=t,ap=(t,e="")=>()=>{},yT="http://www.w3.org/1999/xlink",mT={},Tee="http://www.w3.org/2000/svg",Iee="http://www.w3.org/1999/xhtml",Eee=t=>t!=null,E7=t=>(t=typeof t,t==="object"||t==="function"),AF=(t,e,...i)=>{let r=null,s=null,h=null,f=!1,m=!1;const b=[],S=A=>{for(let O=0;O<A.length;O++)r=A[O],Array.isArray(r)?S(r):r!=null&&typeof r!="boolean"&&((f=typeof t!="function"&&!E7(r))&&(r=String(r)),f&&m?b[b.length-1].$text$+=r:b.push(f?iw(null,r):r),m=f)};if(S(i),e){e.key&&(s=e.key),e.name&&(h=e.name);{const A=e.className||e.class;A&&(e.class=typeof A!="object"?A:Object.keys(A).filter(O=>A[O]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,b,kee);const I=iw(t,null);return I.$attrs$=e,b.length>0&&(I.$children$=b),I.$key$=s,I.$name$=h,I},iw=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Aee={},Cee=t=>t&&t.$tag$===Aee,kee={forEach:(t,e)=>t.map(gT).forEach(e),map:(t,e)=>t.map(gT).map(e).map(Oee)},gT=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Oee=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),AF(t.vtag,i,...t.vchildren||[])}const e=iw(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Pee=t=>ote.map(e=>e(t)).find(e=>!!e),Ree=(t,e)=>t!=null&&!E7(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Fee=t=>t,m9e=(t,e,i)=>{const r=Fee(t);return{emit:s=>Nee(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},Nee=(t,e,i)=>{const r=$r.ce(e,i);return t.dispatchEvent(r),r},vT=new WeakMap,Lee=(t,e,i)=>{let r=nw.get(t);ute&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,nw.set(t,r)},jee=(t,e,i,r)=>{let s=CF(e,i);const h=nw.get(s);if(t=t.nodeType===11?t:ta,h)if(typeof h=="string"){t=t.head||t;let f=vT.get(t),m;f||vT.set(t,f=new Set),f.has(s)||(m=ta.createElement("style"),m.innerHTML=h,t.insertBefore(m,t.querySelector("link")),f&&f.add(s))}else t.adoptedStyleSheets.includes(h)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,h]);return s},Dee=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,s=ap("attachStyles",e.$tagName$),h=jee(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=h,i.classList.add(h+"-h"),r&2&&i.classList.add(h+"-s")),s()},CF=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),wT=(t,e,i,r,s,h)=>{if(i!==r){let f=ST(t,e),m=e.toLowerCase();if(e==="class"){const b=t.classList,S=bT(i),I=bT(r);b.remove(...S.filter(A=>A&&!I.includes(A))),b.add(...I.filter(A=>A&&!S.includes(A)))}else if(e==="style"){for(const b in i)(!r||r[b]==null)&&(b.includes("-")?t.style.removeProperty(b):t.style[b]="");for(const b in r)(!i||r[b]!==i[b])&&(b.includes("-")?t.style.setProperty(b,r[b]):t.style[b]=r[b])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):ST(ym,m)?e=m.slice(2):e=m[2]+e.slice(3),i&&$r.rel(t,e,i,!1),r&&$r.ael(t,e,r,!1);else{const b=E7(r);if((f||b&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const I=r??"";e==="list"?f=!1:(i==null||t[e]!=I)&&(t[e]=I)}}catch{}let S=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(e=m,S=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(S?t.removeAttributeNS(yT,e):t.removeAttribute(e)):(!f||h&4||s)&&!b&&(r=r===!0?"":r,S?t.setAttributeNS(yT,e,r):t.setAttribute(e,r))}}},zee=/\s/,bT=t=>t?t.split(zee):[],kF=(t,e,i,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,h=t&&t.$attrs$||mT,f=e.$attrs$||mT;for(r in h)r in f||wT(s,r,h[r],void 0,i,e.$flags$);for(r in f)wT(s,r,h[r],f[r],i,e.$flags$)},rw=(t,e,i,r)=>{const s=e.$children$[i];let h=0,f,m,b;if(EF||(I7=!0,s.$tag$==="slot"&&(ed&&r.classList.add(ed+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)f=s.$elm$=ta.createTextNode(s.$text$);else if(s.$flags$&1)f=s.$elm$=ta.createTextNode("");else{if(Dn||(Dn=s.$tag$==="svg"),f=s.$elm$=ta.createElementNS(Dn?Tee:Iee,s.$flags$&2?"slot-fb":s.$tag$),Dn&&s.$tag$==="foreignObject"&&(Dn=!1),kF(null,s,Dn),Eee(ed)&&f["s-si"]!==ed&&f.classList.add(f["s-si"]=ed),s.$children$)for(h=0;h<s.$children$.length;++h)m=rw(t,s,h,f),m&&f.appendChild(m);s.$tag$==="svg"?Dn=!1:f.tagName==="foreignObject"&&(Dn=!0)}return f["s-hn"]=xb,s.$flags$&3&&(f["s-sr"]=!0,f["s-cr"]=IF,f["s-sn"]=s.$name$||"",b=t&&t.$children$&&t.$children$[i],b&&b.$tag$===s.$tag$&&t.$elm$&&Py(t.$elm$,!1)),f},Py=(t,e)=>{$r.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==xb&&s["s-ol"]&&(RF(s).insertBefore(s,A7(s)),s["s-ol"].remove(),s["s-ol"]=void 0,I7=!0),e&&Py(s,e)}$r.$flags$&=-2},OF=(t,e,i,r,s,h)=>{let f=t["s-cr"]&&t["s-cr"].parentNode||t,m;for(f.shadowRoot&&f.tagName===xb&&(f=f.shadowRoot);s<=h;++s)r[s]&&(m=rw(null,i,s,t),m&&(r[s].$elm$=m,f.insertBefore(m,A7(e))))},PF=(t,e,i,r,s)=>{for(;e<=i;++e)(r=t[e])&&(s=r.$elm$,LF(r),tw=!0,s["s-ol"]?s["s-ol"].remove():Py(s,!0),s.remove())},Vee=(t,e,i,r)=>{let s=0,h=0,f=0,m=0,b=e.length-1,S=e[0],I=e[b],A=r.length-1,O=r[0],R=r[A],L,z;for(;s<=b&&h<=A;)if(S==null)S=e[++s];else if(I==null)I=e[--b];else if(O==null)O=r[++h];else if(R==null)R=r[--A];else if(ag(S,O))td(S,O),S=e[++s],O=r[++h];else if(ag(I,R))td(I,R),I=e[--b],R=r[--A];else if(ag(S,R))(S.$tag$==="slot"||R.$tag$==="slot")&&Py(S.$elm$.parentNode,!1),td(S,R),t.insertBefore(S.$elm$,I.$elm$.nextSibling),S=e[++s],R=r[--A];else if(ag(I,O))(S.$tag$==="slot"||R.$tag$==="slot")&&Py(I.$elm$.parentNode,!1),td(I,O),t.insertBefore(I.$elm$,S.$elm$),I=e[--b],O=r[++h];else{for(f=-1,m=s;m<=b;++m)if(e[m]&&e[m].$key$!==null&&e[m].$key$===O.$key$){f=m;break}f>=0?(z=e[f],z.$tag$!==O.$tag$?L=rw(e&&e[h],i,f,t):(td(z,O),e[f]=void 0,L=z.$elm$),O=r[++h]):(L=rw(e&&e[h],i,h,t),O=r[++h]),L&&RF(S.$elm$).insertBefore(L,A7(S.$elm$))}s>b?OF(t,r[A+1]==null?null:r[A+1].$elm$,i,r,h,A):h>A&&PF(e,s,b)},ag=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,A7=t=>t&&t["s-ol"]||t,RF=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,td=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$,h=e.$tag$,f=e.$text$;let m;f===null?(Dn=h==="svg"?!0:h==="foreignObject"?!1:Dn,h==="slot"||kF(t,e,Dn),r!==null&&s!==null?Vee(i,r,e,s):s!==null?(t.$text$!==null&&(i.textContent=""),OF(i,null,e,s,0,s.length-1)):r!==null&&PF(r,0,r.length-1),Dn&&h==="svg"&&(Dn=!1)):(m=i["s-cr"])?m.parentNode.textContent=f:t.$text$!==f&&(i.data=f)},FF=t=>{const e=t.childNodes;let i,r,s,h,f,m;for(r=0,s=e.length;r<s;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(f=i["s-sn"],i.hidden=!1,h=0;h<s;h++)if(m=e[h].nodeType,e[h]["s-hn"]!==i["s-hn"]||f!==""){if(m===1&&f===e[h].getAttribute("slot")){i.hidden=!0;break}}else if(m===1||m===3&&e[h].textContent.trim()!==""){i.hidden=!0;break}}FF(i)}},lo=[],NF=t=>{let e,i,r,s,h,f,m=0;const b=t.childNodes,S=b.length;for(;m<S;m++){if(e=b[m],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=e["s-sn"],f=r.length-1;f>=0;f--)i=r[f],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(_T(i,s)?(h=lo.find(I=>I.$nodeToRelocate$===i),tw=!0,i["s-sn"]=i["s-sn"]||s,h?h.$slotRefNode$=e:lo.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&lo.map(I=>{_T(I.$nodeToRelocate$,i["s-sn"])&&(h=lo.find(A=>A.$nodeToRelocate$===i),h&&!I.$slotRefNode$&&(I.$slotRefNode$=h.$slotRefNode$))})):lo.some(I=>I.$nodeToRelocate$===i)||lo.push({$nodeToRelocate$:i}));e.nodeType===1&&NF(e)}},_T=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",LF=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(LF)},Gee=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,s=t.$vnode$||iw(null,null),h=Cee(e)?e:AF(null,null,e);xb=i.tagName,r.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},r.$attrsToReflect$.map(([f,m])=>h.$attrs$[m]=i[f])),h.$tag$=null,h.$flags$|=4,t.$vnode$=h,h.$elm$=s.$elm$=i.shadowRoot||i,ed=i["s-sc"],IF=i["s-cr"],EF=(r.$flags$&1)!==0,tw=!1,td(s,h);{if($r.$flags$|=1,I7){NF(h.$elm$);let f,m,b,S,I,A,O=0;for(;O<lo.length;O++)f=lo[O],m=f.$nodeToRelocate$,m["s-ol"]||(b=ta.createTextNode(""),b["s-nr"]=m,m.parentNode.insertBefore(m["s-ol"]=b,m));for(O=0;O<lo.length;O++)if(f=lo[O],m=f.$nodeToRelocate$,f.$slotRefNode$){for(S=f.$slotRefNode$.parentNode,I=f.$slotRefNode$.nextSibling,b=m["s-ol"];b=b.previousSibling;)if(A=b["s-nr"],A&&A["s-sn"]===m["s-sn"]&&S===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){I=A;break}(!I&&S!==m.parentNode||m.nextSibling!==I)&&m!==I&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),S.insertBefore(m,I))}else m.nodeType===1&&(m.hidden=!0)}tw&&FF(h.$elm$),$r.$flags$&=-2,lo.length=0}},qee=(t,e)=>{},C7=(t,e)=>(t.$flags$|=16,qee(t,t.$ancestorComponent$),pte(()=>Uee(t,e))),Uee=(t,e)=>{const i=t.$hostElement$,r=ap("scheduleUpdate",t.$cmpMeta$.$tagName$),s=i;let h;return e?h=Bd(s,"componentWillLoad"):h=Bd(s,"componentWillUpdate"),h=xT(h,()=>Bd(s,"componentWillRender")),r(),xT(h,()=>Bee(t,s,e))},Bee=async(t,e,i)=>{const r=t.$hostElement$,s=ap("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&Dee(t);const h=ap("render",t.$cmpMeta$.$tagName$);Hee(t,e,r),h(),s(),Wee(t)},Hee=(t,e,i)=>{try{fT=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Qp.hasRenderFn||Qp.reflect)&&(Qp.vdomRender||Qp.reflect)&&(Qp.hydrateServerSide||Gee(t,e))}catch(m){fm(m,t.$hostElement$)}return fT=null,null},Wee=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=ap("postUpdate",e),s=i;t.$ancestorComponent$,Bd(s,"componentDidRender"),t.$flags$&64?(Bd(s,"componentDidUpdate"),r()):(t.$flags$|=64,Bd(s,"componentDidLoad"),r())},g9e=t=>{{const e=dm(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&C7(e,!1),i}},Bd=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){fm(r)}},xT=(t,e)=>t&&t.then?t.then(e):e(),Jee=(t,e)=>dm(t).$instanceValues$.get(e),Kee=(t,e,i,r)=>{const s=dm(t),h=t,f=s.$instanceValues$.get(e),m=s.$flags$,b=h;i=Ree(i,r.$members$[e][0]);const S=Number.isNaN(f)&&Number.isNaN(i);if(i!==f&&!S){s.$instanceValues$.set(e,i);{if(r.$watchers$&&m&128){const A=r.$watchers$[e];A&&A.map(O=>{try{b[O](i,f,e)}catch(R){fm(R,h)}})}if((m&18)===2){if(b.componentShouldUpdate&&b.componentShouldUpdate(i,f,e)===!1)return;C7(s,!1)}}}},Zee=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;r.map(([h,[f]])=>{(f&31||f&32)&&Object.defineProperty(s,h,{get(){return Jee(this,h)},set(m){Kee(this,h,m,e)},configurable:!0,enumerable:!0})});{const h=new Map;s.attributeChangedCallback=function(f,m,b){$r.jmp(()=>{const S=h.get(f);if(this.hasOwnProperty(S))b=this[S],delete this[S];else if(s.hasOwnProperty(S)&&typeof this[S]=="number"&&this[S]==b)return;this[S]=b===null&&typeof this[S]=="boolean"?!1:b})},t.observedAttributes=r.filter(([f,m])=>m[0]&15).map(([f,m])=>{const b=m[1]||f;return h.set(b,f),m[0]&512&&e.$attrsToReflect$.push([f,b]),b})}}return t},Yee=async(t,e,i,r,s)=>{if(!(e.$flags$&32)&&(s=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),s.style)){let f=s.style;typeof f!="string"&&(f=f[e.$modeName$=Pee(t)]);const m=CF(i,e.$modeName$);if(!nw.has(m)){const b=ap("registerStyles",i.$tagName$);Lee(m,f,!!(i.$flags$&1)),b()}}e.$ancestorComponent$,(()=>C7(e,!0))()},Xee=t=>{},Qee=t=>{if(!($r.$flags$&1)){const e=dm(t),i=e.$cmpMeta$,r=ap("connectedCallback",i.$tagName$);e.$flags$&1?(jF(t,e,i.$listeners$),Xee(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&ete(t),i.$members$&&Object.entries(i.$members$).map(([s,[h]])=>{if(h&31&&t.hasOwnProperty(s)){const f=t[s];delete t[s],t[s]=f}}),Yee(t,e,i)),r()}},ete=t=>{const e=t["s-cr"]=ta.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},tte=t=>{if(!($r.$flags$&1)){const e=dm(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},v9e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){ste(this,i)},connectedCallback(){Qee(this),r&&r.call(this)},disconnectedCallback(){tte(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,Zee(t,i)},w9e=(t,e)=>e,jF=(t,e,i,r)=>{i&&i.map(([s,h,f])=>{const m=rte(t,s),b=ite(e,f),S=nte(s);$r.ael(m,h,b,S),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>$r.rel(m,h,b,S))})},ite=(t,e)=>i=>{try{Qp.lazyLoad||t.$hostElement$[e](i)}catch(r){fm(r)}},rte=(t,e)=>e&4?ta:e&8?ym:e&16?ta.body:t,nte=t=>ate?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,DF=new WeakMap,dm=t=>DF.get(t),ste=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return jF(t,i,e.$listeners$),DF.set(t,i)},ST=(t,e)=>e in t,fm=(t,e)=>(0,console.error)(t,e),nw=new Map,ote=[],ym=typeof window<"u"?window:{},ta=ym.document||{head:{}},b9e=ym.HTMLElement||class{},$r={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},ate=(()=>{let t=!1;try{ta.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),lte=t=>Promise.resolve(t),ute=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),MT=[],zF=[],hte=(t,e)=>i=>{t.push(i),P4||(P4=!0,e&&$r.$flags$&4?cte(R4):$r.raf(R4))},$T=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){fm(i)}t.length=0},R4=()=>{$T(MT),$T(zF),(P4=MT.length>0)&&$r.raf(R4)},cte=t=>lte().then(t),pte=hte(zF,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const VF="calcite-mode-auto",GF="calcite-mode-dark",dte="calcite-mode-light",_9e={autoMode:VF,darkMode:GF,lightMode:dte,rtl:"calcite--rtl"};/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var qF=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],sw=qF.join(","),UF=typeof Element>"u",lp=UF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ow=!UF&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},BF=function(e,i,r){var s=Array.prototype.slice.apply(e.querySelectorAll(sw));return i&&lp.call(e,sw)&&s.unshift(e),s=s.filter(r),s},HF=function t(e,i,r){for(var s=[],h=Array.from(e);h.length;){var f=h.shift();if(f.tagName==="SLOT"){var m=f.assignedElements(),b=m.length?m:f.children,S=t(b,!0,r);r.flatten?s.push.apply(s,S):s.push({scopeParent:f,candidates:S})}else{var I=lp.call(f,sw);I&&r.filter(f)&&(i||!e.includes(f))&&s.push(f);var A=f.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(f),O=!r.shadowRootFilter||r.shadowRootFilter(f);if(A&&O){var R=t(A===!0?f.children:A.children,!0,r);r.flatten?s.push.apply(s,R):s.push({scopeParent:f,candidates:R})}else h.unshift.apply(h,f.children)}}return s},WF=function(e,i){return e.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},fte=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},JF=function(e){return e.tagName==="INPUT"},yte=function(e){return JF(e)&&e.type==="hidden"},mte=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},gte=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},vte=function(e){if(!e.name)return!0;var i=e.form||ow(e),r=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(f){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",f.message),!1}var h=gte(s,e.form);return!h||h===e},wte=function(e){return JF(e)&&e.type==="radio"},bte=function(e){return wte(e)&&!vte(e)},_te=function(e){for(var i,r=ow(e).host,s=!!((i=r)!==null&&i!==void 0&&i.ownerDocument.contains(r)||e.ownerDocument.contains(e));!s&&r;){var h;r=ow(r).host,s=!!((h=r)!==null&&h!==void 0&&h.ownerDocument.contains(r))}return s},TT=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},xte=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var h=lp.call(e,"details>summary:first-of-type"),f=h?e.parentElement:e;if(lp.call(f,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var m=e;e;){var b=e.parentElement,S=ow(e);if(b&&!b.shadowRoot&&s(b)===!0)return TT(e);e.assignedSlot?e=e.assignedSlot:!b&&S!==e.ownerDocument?e=S.host:e=b}e=m}if(_te(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return TT(e);return!1},Ste=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return lp.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},aw=function(e,i){return!(i.disabled||yte(i)||xte(i,e)||mte(i)||Ste(i))},F4=function(e,i){return!(bte(i)||WF(i)<0||!aw(e,i))},Mte=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},$te=function t(e){var i=[],r=[];return e.forEach(function(s,h){var f=!!s.scopeParent,m=f?s.scopeParent:s,b=WF(m,f),S=f?t(s.candidates):m;b===0?f?i.push.apply(i,S):i.push(m):r.push({documentOrder:h,tabIndex:b,item:s,isScope:f,content:S})}),r.sort(fte).reduce(function(s,h){return h.isScope?s.push.apply(s,h.content):s.push(h.content),s},[]).concat(i)},Tte=function(e,i){i=i||{};var r;return i.getShadowRoot?r=HF([e],i.includeContainer,{filter:F4.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Mte}):r=BF(e,i.includeContainer,F4.bind(null,i)),$te(r)},x9e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=HF([e],i.includeContainer,{filter:aw.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=BF(e,i.includeContainer,aw.bind(null,i)),r},S9e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return lp.call(e,sw)===!1?!1:F4(i,e)},Ite=qF.concat("iframe").join(","),M9e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return lp.call(e,Ite)===!1?!1:aw(i,e)};const Ete={getShadowRoot:!0};function $9e(t){const e="dir",i=`[${e}]`,r=Ate(t,i);return r?r.getAttribute(e):"ltr"}function T9e(t,e,i){const r=`[${e}]`,s=t.closest(r);return s?s.getAttribute(e):i}function KF(t){return t.getRootNode()}function ZF(t){return t.host||null}function I9e(t,{selector:e,id:i}){function r(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const h=KF(s),f=i?"getElementById"in h?h.getElementById(i):null:e?h.querySelector(e):null,m=ZF(h);return f||(m?r(m):null)}return r(t)}function Ate(t,e){function i(r){return r?r.closest(e)||i(ZF(KF(r))):null}return i(t)}function Cte(t,e){return YF(t,e)}function YF(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return YF(r instanceof ShadowRoot?r.host:r,e)}function E9e(t,e){return!!Cte(e,i=>i===t?!0:void 0)}function kte(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function A9e(t){if(t)return kte(t)?t.setFocus():t.focus()}function C9e(t){(Tte(t,Ete)[0]||t).focus()}const Ry=":not([slot])";function k9e(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(s=>`[slot="${s}"]`).join(","):`[slot="${e}"]`:Ry;return i!=null&&i.all?Ote(t,r,i):Pte(t,r,i)}function XF(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function Ote(t,e,i){let r=e===Ry?XF(t,Ry):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(h=>h.parentElement===t),r=i!=null&&i.matches?r.filter(h=>h==null?void 0:h.matches(i.matches)):r;const s=i==null?void 0:i.selector;return s?r.map(h=>Array.from(h.querySelectorAll(s))).reduce((h,f)=>[...h,...f],[]).filter(h=>!!h):r}function Pte(t,e,i){let r=e===Ry?XF(t,Ry)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const s=i==null?void 0:i.selector;return s?r==null?void 0:r.querySelector(s):r}function O9e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function P9e(t){return(!!t).toString()}function R9e(t){return!!Rte(t).length}function Rte(t){return t.target.assignedElements({flatten:!0})}function F9e(t){return!!(t.isPrimary&&t.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function IT(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(GF)||t.contains(VF)&&e?"dark":"light",r=f=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:f}})),s=f=>{h!==f&&r(f),h=f};let h=i();r(h),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f=>s(f.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Fte(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?IT():document.addEventListener("DOMContentLoaded",()=>IT(),{once:!0}))}const Nte=Fte;Nte();let N4;function Lte(){N4&&$ee(ms(Ft(N4)))}function Sb(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return Promise.all(e)}ue("esri-disable-components-assets-path")||(N4="components/assets");const QF=Symbol("widget"),jte=Symbol("widget-test-data"),Dte=[],zte={},lw=new WeakMap;function eN(t,e){let i=e.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=eN(t,i[s]);else i=Dte;const r=e.vnodeSelector;if(k7(r)){const s=e.properties||zte,h=s.key||r;return{vnodeSelector:"div",properties:{key:h,afterCreate:Vte,afterUpdate:Gte,afterRemoved:tN,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:h,children:i}},children:void 0,text:void 0,domNode:null}}return e}function Vte(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:h}){var m;const f=new s(h);f.container=t,lw.set(t,f),(m=f.afterCreate)==null||m.call(f,f,t),r._internalHandles.add($0(()=>tN(t)))}function Gte(t,e,i,{widgetProperties:r}){var h;const s=lw.get(t);s&&(s.set(r),(h=s.afterUpdate)==null||h.call(s,s,t))}function tN(t){var i;const e=lw.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),lw.delete(t))}function k7(t){return typeof t=="function"&&t[QF]}const ET=new Set;function qte(t){ET.add(t),t.finally(()=>ET.delete(t))}var iN;const Ute="esri.widgets.Widget";let Bte=0;const Hte={widgetIcon:"esri-icon-checkbox-unchecked"};function rN(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?rN(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const Wte=Mee({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,h,f)=>{const m=e==null?void 0:e(r,s,h,f),b=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in h)||b){const S=r[2].toLowerCase()+r.slice(3),I=R=>m==null?void 0:m.call(h,R);h.addEventListener(S,I,b);const A=()=>h.removeEventListener(S,I,b),O=f.afterRemoved;f.afterRemoved=R=>{O==null||O(R),A()}}return m}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:h}=r,f=s===Event.CAPTURING_PHASE;let m=`on${h}${f?"capture":""}`;const b=e.properties;(b&&m in b||(m=`on${h[0].toUpperCase()}${h.slice(1)}${f?"Capture":""}`,b&&m in b))&&(mF(),t.scheduleRender(),b[m].call(b.bind||i,r))}});let Z3=!1,ji=class extends Qw(pa.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Mn,this._projector=Wte,this._readyForTrueRender=!1,this.iconClass=Hte.widgetIcon,this.icon=null,this.key=this,this._loadLocale=rk(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const f=await sn(this._messageBundleProps.map(async({bundlePath:m,propertyName:b})=>{if(this.destroyed)return;let S=await SO(m);this.uiStrings&&Object.keys(this.uiStrings)&&(S=rN(se(S),this.uiStrings)),this[b]=S}));if(this.destroyed)return;for(const m of f)m.error&&fe.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,m.error)}await this.loadLocale()}),Lte();const r="esri-widget-uid-"+vee(),s=this.render.bind(this);this._trackingTarget=new Kw(()=>this.scheduleRender());const h=()=>{var A;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const f=s();let{properties:m}=f;m||(f.properties=m={});let{key:b,styles:S}=m;b||(m.key=r),S||(m.styles=S={}),S.display||(S.display="");let I=0;return(A=f.children)==null||A.forEach(O=>{if(k7(O.vnodeSelector))return;let{properties:R}=O;R||(O.properties=R={}),R.key||(R.key=`${this.id}--${I++}`)}),eN(this,f)};this.render=()=>{if(Z3)return h();let f=ZQ(this)??null;if(f)return f;this._trackingTarget.clear(),Z3=!0;try{f=nl(this._trackingTarget,h)}catch(m){throw console.error(m),m}finally{Z3=!1}return f&&YQ(this,f),f},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),qte(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(I9)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Ut(this._trackingTarget),Ut(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,J3(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return S7(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Bte++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(iN=QF,jte)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(J3(this),this._projector.scheduleRender())}classes(...e){return vF.apply(this,e)}renderNow(){J3(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(me(()=>this.viewModel,(r,s)=>{s&&this._internalHandles.remove("delegated-events"),r&&Bw(r)&&this._internalHandles.add(this._delegatedEventNames.map(h=>Hw(r,h,f=>{this.emit(h,f)})),"delegated-events")},_t)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(I9),this.scheduleRender()};this._internalHandles.add([_O(e),me(()=>this.uiStrings,e),Sn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};ji[iN]=!0,v([x()],ji.prototype,"_readyForTrueRender",void 0),v([x({value:null})],ji.prototype,"container",null),v([vt("container")],ji.prototype,"castContainer",null),v([x()],ji.prototype,"iconClass",void 0),v([x()],ji.prototype,"icon",void 0),v([x()],ji.prototype,"id",null),v([x()],ji.prototype,"label",null),v([x()],ji.prototype,"renderable",null),v([x()],ji.prototype,"uiStrings",void 0),v([x()],ji.prototype,"viewModel",void 0),v([x({value:!0})],ji.prototype,"visible",null),v([x()],ji.prototype,"key",void 0),v([x()],ji.prototype,"children",void 0),v([x()],ji.prototype,"afterCreate",void 0),v([x()],ji.prototype,"afterUpdate",void 0),v([x()],ji.prototype,"afterRemoved",void 0),ji=v([B(Ute)],ji);const Er=ji;function nN(t){return 32+t.length}function sN(t){return 16}function L9e(t){if(!t)return 0;let e=aN;for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];switch(typeof r){case"string":e+=nN(r);break;case"number":e+=sN();break;case"boolean":e+=4}}return e}function Jte(t){if(!t)return 0;if(Array.isArray(t))return Kte(t);let e=aN;for(const i in t)t.hasOwnProperty(i)&&(e+=oN(t[i]));return e}function Kte(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=lN;for(let r=0;r<e;r++)i+=oN(t[r]);return i}function oN(t){switch(typeof t){case"object":return Jte(t);case"string":return nN(t);case"number":return sN();case"boolean":return 4;default:return 8}}function j9e(t,e){return lN+t.length*e}const aN=32,lN=32;var Fy;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(Fy||(Fy={}));const AT=["B","kB","MB","GB","TB"];function Zte(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(Fy.KILOBYTES));i=fi(i,0,AT.length-1);const r=Wu(e/Fy.KILOBYTES**i,{maximumFractionDigits:2});return na(t.units.bytes[AT[i]],{fileSize:r})}function Yte(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const s=e.find(h=>h.name===i);return s?Xte({tagName:r,tags:s.tags}):null}function Xte(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(s=>s.name===e);return r&&r.value||null}var L4;const Qte={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let dn=L4=class extends ye{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=Yte({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return Qte[e]||null}clone(){return new L4({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};v([x({type:String})],dn.prototype,"contentType",void 0),v([x()],dn.prototype,"exifInfo",void 0),v([x({readOnly:!0})],dn.prototype,"orientationInfo",null),v([x({type:Bt})],dn.prototype,"id",void 0),v([x({type:String})],dn.prototype,"globalId",void 0),v([x({type:String})],dn.prototype,"keywords",void 0),v([x({type:String})],dn.prototype,"name",void 0),v([x({json:{read:!1}})],dn.prototype,"parentGlobalId",void 0),v([x({json:{read:!1}})],dn.prototype,"parentObjectId",void 0),v([x({type:Bt})],dn.prototype,"size",void 0),v([x({json:{read:!1}})],dn.prototype,"url",void 0),dn=L4=v([B("esri.layers.support.AttachmentInfo")],dn);const eie=dn;var j4;let sr=j4=class extends ye{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new j4(se({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};v([x({type:[String],json:{write:!0}})],sr.prototype,"attachmentTypes",void 0),v([x({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],sr.prototype,"attachmentsWhere",void 0),v([x({type:Boolean,json:{write:!0}})],sr.prototype,"cacheHint",void 0),v([x({type:[String],json:{write:!0}})],sr.prototype,"keywords",void 0),v([x({type:[Number],json:{write:!0}})],sr.prototype,"globalIds",void 0),v([x({json:{write:!0}})],sr.prototype,"name",void 0),v([x({type:Number,json:{read:{source:"resultRecordCount"}}})],sr.prototype,"num",void 0),v([x({type:[Number],json:{write:!0}})],sr.prototype,"objectIds",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],sr.prototype,"returnMetadata",void 0),v([x({type:[Number],json:{write:!0}})],sr.prototype,"size",void 0),v([x({type:Number,json:{read:{source:"resultOffset"}}})],sr.prototype,"start",void 0),v([Ee("start"),Ee("num")],sr.prototype,"writeStart",null),v([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],sr.prototype,"where",void 0),sr=j4=v([B("esri.rest.support.AttachmentQuery")],sr),sr.from=ei(sr);const D4=sr,tie="esri.widgets.Feature.support.featureUtils",CT=fe.getLogger(tie),iie=/href=(""|'')/gi,rie=/(\{([^\{\r\n]+)\})/g,nie=/\'/g,uN=/^\s*expression\//i,sie=/(\n)/gi,oie=/[\u00A0-\u9999<>\&]/gim,aie=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,lie=/^(?:mailto:|tel:)/,hN="relationships/",z4=r7("short-date-short-time");function cN(t){if(t!=null)return t.get("sourceLayer")||t.get("layer")}async function uw(t,e){return typeof t=="function"?t.call(null,e):t}function pN(t=""){if(t)return!lie.test(t.trim().toLowerCase())}function O7(t){return!!t&&uN.test(t)}function uie(t,e){if(!O7(e)||!t)return null;const i=e.replace(uN,"").toLowerCase();let r=null;return t.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function dN(t,e){const i=uie(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function hie(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function cie(t){return t.replace(iie,"")}function Ny(t,e){const i=P7(e,t);return i?i.name:t}function pie(t,e){return t&&t.map(i=>Ny(i,e))}function P7(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function fN(t){return`${t}`.trim()}function Pc({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:s,fieldInfoMap:h}){return r?V4({formattedAttributes:e,template:mie(r,{...e,...s,...t},i),fieldInfoMap:h}):""}function V4({formattedAttributes:t,template:e,fieldInfoMap:i}){return fN(cie(na(na(e,r=>hie(r,i)),t)))}function die(t,e,i=!1){const r=e[t];if(typeof r=="string"){const s="%27",h=(i?encodeURIComponent(r):r).replace(nie,s);e[t]=h}}function fie(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>die(r,i,e)),i}function yie(t,e,i){const r=(e=fN(e))&&e[0]!=="{";return na(t,fie(i,r||!1))}function G4(t,e){return t.replace(rie,(i,r,s)=>{const h=P7(e,s);return h?`{${h.name}}`:r})}function mie(t,e,i){const r=G4(t,i);return r&&r.replace(aie,(s,h,f)=>yie(s,h||f,e))}function gie(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function vie(t){return(t==null?void 0:t.type)==="feature"}function kT(t){return!!(t!=null&&t.layer)}function wie(t){return(t==null?void 0:t.type)==="map-image"}function bie(t,e){const i=e.fieldInfos,r=e.fieldName,s=yN(i,r),h=s==null?void 0:s.clone(),f=e.preventPlacesFormatting,m=e.layer,b=P7(m,r);if(h&&(b==null?void 0:b.type)==="date"){const I=h.format||new Ad;I.dateFormat=I.dateFormat||"short-date-short-time",I.dateTimeFormatOptions=!kT(m)&&vie(m)&&m.datesInUnknownTimezone||kT(m)&&wie(m.layer)&&m.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,h.format=I}const S=h&&h.format;return typeof t=="string"&&OP(r)&&S?S.formatRasterPixelValue(t):typeof(t=gie(t,S))=="string"||t==null||S==null?mm(t):f?Wu(t,{...NP(S),minimumFractionDigits:0,maximumFractionDigits:20}):S.format(t)}function yN(t,e){if(!t||!t.length||!e)return;const i=e.toLowerCase();let r;return t.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function _ie({fieldName:t,graphic:e,layer:i}){if(Ya(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const s=i.getFeatureType(e);return s?s.name:null}function xie({fieldName:t,value:e,graphic:i,layer:r}){if(Ya(t)||!r||typeof r.getFieldDomain!="function")return null;const s=i&&r.getFieldDomain(t,{feature:i});return s&&s.type==="coded-value"?s.getName(e):null}function Sie(t,e){const{creatorField:i,creationDateField:r,editorField:s,editDateField:h}=t;if(!e)return;const f=e[h];if(typeof f=="number"){const b=e[s];return{type:"edit",date:ll(f,z4),user:b}}const m=e[r];if(typeof m=="number"){const b=e[i];return{type:"create",date:ll(m,z4),user:b}}return null}function Mie(t,e){const i=new Map;return t&&t.forEach(r=>{const s=Ny(r.fieldName,e);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function OT(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const h=s&&s.fieldInfos;h&&e.push(...h)}}),e}function R7(t){return t.replace(oie,e=>`&#${e.charCodeAt(0)};`)}function mm(t){return typeof t=="string"?t.replace(sie,'<br class="esri-text-new-line" />'):t}function mN(t){const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:h,graphic:f}=t;if(e==null)return"";const m=xie({fieldName:i,value:e,graphic:f,layer:h});if(m)return m;const b=_ie({fieldName:i,graphic:f,layer:h});if(b)return b;if(s.get(i.toLowerCase()))return bie(e,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:h});const S=h&&h.fieldsIndex;return S&&S.isDateField(i)?ll(e,z4):mm(e)}function Y3({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:h}){const f={};return h==null||h.forEach(m=>Eie({attributes:f,relatedInfo:m,fieldInfoMap:s,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(m=>{const b=e[m];f[m]=mN({fieldName:m,fieldInfos:t,fieldInfoMap:s,layer:i,value:b,graphic:r})}),f}async function gN(t,e){var I,A;const{layer:i,graphic:r,outFields:s,objectIds:h,returnGeometry:f,spatialReference:m}=t,b=h[0];if(typeof b!="number"&&typeof b!="string"){const O="Could not query required fields for the specified feature. The feature's ID is invalid.",R={layer:i,graphic:r,objectId:b,requiredFields:s};return CT.warn(O,R),null}if(!((A=(I=IO(i))==null?void 0:I.operations)!=null&&A.supportsQuery)){const O="The specified layer cannot be queried. The following fields will not be available.",R={layer:i,graphic:r,requiredFields:s,returnGeometry:f};return CT.warn(O,R),null}const S=i.createQuery();return S.objectIds=h,S.outFields=s!=null&&s.length?s:[i.objectIdField],S.returnGeometry=!!f,S.returnZ=!!f,S.returnM=!!f,S.outSpatialReference=m,(await i.queryFeatures(S,e)).features[0]}async function $ie(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await al(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function Tie({graphic:t,popupTemplate:e,layer:i,spatialReference:r},s){if(!i||!e||(typeof i.load=="function"&&await i.load(s),!t.attributes))return;const h=t.attributes[i.objectIdField];if(h==null)return;const f=[h],m=await e.getRequiredFields(i.fieldsIndex),b=HK(m,t),S=b?[]:m,I=e.returnGeometry||await $ie(e);if(b&&!I)return;const A=await gN({layer:i,graphic:t,outFields:S,objectIds:f,returnGeometry:I,spatialReference:r},s);A&&(A.geometry&&(t.geometry=A.geometry),A.attributes&&(t.attributes={...t.attributes,...A.attributes}))}function Ya(t=""){return!!t&&t.includes(hN)}function Iie(t){return t?`${hN}${t.layerId}/${t.fieldName}`:""}function PT({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:h}){t&&e&&i&&Object.keys(e.attributes).forEach(f=>{const m=Iie({layerId:i.relation.id.toString(),fieldName:f}),b=e.attributes[f];t[m]=mN({fieldName:m,fieldInfos:r,fieldInfoMap:s,layer:h,value:b,graphic:e})})}function Eie({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(h=>PT({attributes:t,graphic:h,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(h=>PT({attributes:t,graphic:h,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s})))}const RT=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},vN=({layer:t,method:e,query:i,definitionExpression:r})=>{var f,m;if(!((m=(f=t.capabilities)==null?void 0:f.query)!=null&&m.supportsCacheHint)||e==="attachments")return;const s=i.where!=null?i.where:null,h=i.geometry!=null?i.geometry:null;RT(r)||RT(s)||(h==null?void 0:h.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},Aie=({query:t,layer:e,method:i})=>{vN({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},Cie=({queryPayload:t,layer:e,method:i})=>{vN({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function kie(t,e,i){return t&&e&&i?FT(t.allLayers,e,i)||FT(t.allTables,e,i):null}function FT(t,e,i){return t.find(r=>r!==e&&r.type==="feature"&&r.url===e.url&&r.layerId===i.relatedTableId)}const NT={editing:!1,operations:{add:!0,update:!0,delete:!0}},wN=qe.ofType(eie);let fn=class extends Oe{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...NT},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new wN,this.fileInfos=new qe,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(me(()=>this.graphic,()=>this._graphicChanged(),_t))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...NT,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new ne("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),s=new D4({objectIds:[r],returnMetadata:!0}),h=[],f=e.queryAttachments(s).then(b=>b[r]||h).catch(()=>h);this._getAttachmentsPromise=f,this.notifyChange("state");const m=await f;return i.removeAll(),m.length&&i.addMany(m),this._getAttachmentsPromise=null,this.notifyChange("state"),m}async addAttachment(e,i=this.graphic){var b;const{_attachmentLayer:r,attachmentInfos:s,abilities:h}=this;if(!i)throw new ne("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new ne("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((b=h.operations)!=null&&b.add))throw new ne("invalid-abilities","addAttachment(): add abilities are required.");if(!r||typeof r.addAttachment!="function")throw new ne("invalid-layer","addAttachment(): A valid layer is required.");const f=r.addAttachment(i,e).then(S=>this._queryAttachment(S.objectId,i)),m=await f;return s.add(m),m}async deleteAttachment(e){var b;const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:h}=this;if(!e)throw new ne("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((b=h.operations)!=null&&b.delete))throw new ne("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ne("invalid-layer","deleteAttachment(): A valid layer is required.");if(!s)throw new ne("invalid-graphic","deleteAttachment(): A graphic is required.");const f=i.deleteAttachments(s,[e.id]).then(()=>e),m=await f;return r.remove(m),m}async updateAttachment(e,i=this.activeAttachmentInfo){var I;const{_attachmentLayer:r,attachmentInfos:s,graphic:h,abilities:f}=this;if(!e)throw new ne("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new ne("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((I=f.operations)!=null&&I.update))throw new ne("invalid-abilities","updateAttachment(): Update abilities are required.");const m=s.findIndex(A=>A===i);if(!r||typeof r.updateAttachment!="function")throw new ne("invalid-layer","updateAttachment(): A valid layer is required.");if(!h)throw new ne("invalid-graphic","updateAttachment(): A graphic is required.");const b=r.updateAttachment(h,i.id,e).then(A=>this._queryAttachment(A.objectId)),S=await b;return s.splice(m,1,S),S}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const s=this.fileInfos.findIndex(h=>r===h);return s>-1&&this.fileInfos.splice(s,1,{file:e,form:i}),this.fileInfos.items[s]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new ne("invalid-attachment-id","Could not query attachment.");const s=this._getObjectId(i),h=new D4({objectIds:[s],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(h).then(f=>f[s][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=cN(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};v([x()],fn.prototype,"abilities",void 0),v([vt("abilities")],fn.prototype,"castAbilities",null),v([x()],fn.prototype,"activeAttachmentInfo",void 0),v([x()],fn.prototype,"activeFileInfo",void 0),v([x({readOnly:!0,type:wN})],fn.prototype,"attachmentInfos",void 0),v([x()],fn.prototype,"fileInfos",void 0),v([x({type:Mr})],fn.prototype,"graphic",void 0),v([x()],fn.prototype,"mode",void 0),v([x({readOnly:!0})],fn.prototype,"state",null),v([x()],fn.prototype,"filesEnabled",void 0),v([x({readOnly:!0})],fn.prototype,"supportsResizeAttachments",null),fn=v([B("esri.widgets.Attachments.AttachmentsViewModel")],fn);const F7=fn;function LT(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function Oie(t){const e=Ft("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}function xr(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Pie=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},bN=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?bN(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=Pie(s)),e.push(s))}},Rie=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return bN(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function ie(t,e,...i){return typeof t!="function"||k7(t)?Rie(t,e,...i):t(e,...i)}const jT={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Mt="esri-attachments",hh="esri-button",Te={base:Mt,loaderContainer:`${Mt}__loader-container`,loader:`${Mt}__loader`,fadeIn:`${Mt}--fade-in`,container:`${Mt}__container`,containerList:`${Mt}__container--list`,containerPreview:`${Mt}__container--preview`,actions:`${Mt}__actions`,deleteButton:`${Mt}__delete-button`,addAttachmentButton:`${Mt}__add-attachment-button`,errorMessage:`${Mt}__error-message`,items:`${Mt}__items`,item:`${Mt}__item`,itemButton:`${Mt}__item-button`,itemMask:`${Mt}__item-mask`,itemMaskIcon:`${Mt}__item-mask--icon`,itemImage:`${Mt}__image`,itemImageResizable:`${Mt}__image--resizable`,itemLabel:`${Mt}__label`,itemFilename:`${Mt}__filename`,itemChevronIcon:`${Mt}__item-chevron-icon`,itemLink:`${Mt}__item-link`,itemLinkOverlay:`${Mt}__item-link-overlay`,itemLinkOverlayIcon:`${Mt}__item-link-overlay-icon`,itemEditIcon:`${Mt}__item-edit-icon`,itemAddIcon:`${Mt}__item-add-icon`,itemAddButton:`${Mt}__item-add-button`,formNode:`${Mt}__form-node`,fileFieldset:`${Mt}__file-fieldset`,fileLabel:`${Mt}__file-label`,fileName:`${Mt}__file-name`,fileInput:`${Mt}__file-input`,metadata:`${Mt}__metadata`,metadataFieldset:`${Mt}__metadata-fieldset`,progressBar:`${Mt}__progress-bar`,esriWidget:"esri-widget",esriButton:hh,buttonDisabled:`${hh}--disabled`,esriButtonSecondary:`${hh}--secondary`,esriButtonTertiary:`${hh}--tertiary`,esriButtonThird:`${hh}--third`,esriButtonSmall:`${hh}--small`,esriButtonHalf:`${hh}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},X3=window.CSS;let jr=class extends Er{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...jT},this._supportsImageOrientation=X3&&X3.supports&&X3.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new F7),this.addHandles([un(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),un(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),me(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),_t)])}loadDependencies(){return Sb({icon:()=>he(()=>import("./calcite-icon-fff7f4a5.js"),["assets/calcite-icon-fff7f4a5.js","assets/icon-dff2d65d.js","assets/observers-4f67f1fb.js"])})}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...jT,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return ie("div",{class:this.classes(Te.base,Te.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?ie("div",{key:"error-message",class:Te.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||e):this.renderAttachmentContainer()}renderLoading(){return ie("div",{class:Te.loaderContainer,key:"loader"},ie("div",{class:Te.loader}))}renderProgressBar(){return this.visibleElements.progressBar?ie("div",{class:Te.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,s=this.visibleElements.cancelAddButton?ie("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Te.esriButton,Te.esriButtonTertiary,Te.esriButtonSmall,Te.esriButtonHalf,e&&Te.buttonDisabled)},this.messages.cancel):null,h=this.visibleElements.addSubmitButton?ie("button",{type:"submit",disabled:r,class:this.classes(Te.esriButton,Te.esriButtonSecondary,Te.esriButtonSmall,Te.esriButtonHalf,{[Te.buttonDisabled]:r})},this.messages.add):null,f=i?ie("span",{key:"file-name",class:Te.fileName},i.name):null,m=ie("form",{bind:this,afterCreate:Q2,afterRemoved:aT,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},ie("fieldset",{class:Te.fileFieldset},f,ie("label",{class:this.classes(Te.fileLabel,Te.esriButton,Te.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,ie("input",{class:Te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),h,s);return ie("div",{key:"add-form-container",class:Te.formNode},m)}renderDetailsForm(e){var te,oe,le;const{visibleElements:i,viewModel:r,selectedFile:s,submitting:h}=this,{abilities:f}=r,m=h||!s;let b,S,I,A;s?(b=s.type,S=s.name,I=s.size):e&&"file"in e?(b=e.file.type,S=e.file.name,I=e.file.size):e&&"contentType"in e&&(b=e.contentType,S=e.name,I=e.size,A=e.url);const O=f.editing&&((te=f.operations)!=null&&te.delete)&&i.deleteButton?ie("button",{key:"delete-button",type:"button",disabled:h,bind:this,onclick:ve=>this._submitDeleteAttachment(ve,e),class:this.classes(Te.esriButton,Te.esriButtonSmall,Te.esriButtonTertiary,Te.deleteButton,{[Te.buttonDisabled]:h})},this.messages.delete):void 0,R=f.editing&&((oe=f.operations)!=null&&oe.update)&&i.updateButton?ie("button",{disabled:m,key:"update-button",type:"submit",class:this.classes(Te.esriButton,Te.esriButtonSmall,Te.esriButtonThird,{[Te.buttonDisabled]:m})},this.messages.update):void 0,L=this.visibleElements.cancelUpdateButton?ie("button",{disabled:h,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Te.esriButton,Te.esriButtonSmall,Te.esriButtonTertiary,Te.esriButtonThird,{[Te.buttonDisabled]:h})},this.messages.cancel):void 0,z=f.editing&&((le=f.operations)!=null&&le.update)?ie("fieldset",{key:"file",class:Te.fileFieldset},ie("span",{key:"file-name",class:Te.fileName},S),ie("label",{class:this.classes(Te.fileLabel,Te.esriButton,Te.esriButtonSecondary)},this.messages.changeFile,ie("input",{class:Te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,j=ie("fieldset",{key:"size",class:Te.metadataFieldset},ie("label",null,Zte(this.messagesUnits,I??0))),H=ie("fieldset",{key:"content-type",class:Te.metadataFieldset},ie("label",null,b)),Y=A!=null?ie("a",{class:Te.itemLink,href:A,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),ie("div",{class:Te.itemLinkOverlay},ie("span",{class:Te.itemLinkOverlayIcon},ie("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),X=ie("form",{bind:this,afterCreate:Q2,afterRemoved:aT,"data-node-ref":"_updateAttachmentForm",onsubmit:ve=>this._submitUpdateAttachment(ve,e)},ie("div",{class:Te.metadata},j,H),z,ie("div",{class:Te.actions},O,L,R));return ie("div",{key:"edit-form-container",class:Te.formNode},Y,X)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,s=Oie(i),h={[Te.itemImageResizable]:r};return ie("div",{class:this.classes(Te.itemMaskIcon,Te.itemMask)},ie("img",{title:e,alt:e,src:s,class:this.classes(h,Te.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:s,name:h,url:f}=e;if(!r||!LT(s))return this.renderGenericImageMask(h,s);const m=this._getCSSTransform(e),b=m?{transform:m,"image-orientation":"none"}:{},S=`${f}${f!=null&&f.includes("?")?"&":"?"}w=${i}`,I={[Te.itemImageResizable]:r};return ie("div",{class:this.classes(Te.itemMask)},ie("img",{styles:b,alt:h,title:h,src:S,class:this.classes(I,Te.itemImage)}))}renderFile(e){const{file:i}=e;return ie("li",{class:Te.item,key:i},ie("button",{key:"details-button",bind:this,class:Te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),ie("label",{class:Te.itemLabel},ie("span",{class:Te.itemFilename},i.name||this.messages.noTitle),ie("span",{"aria-hidden":"true",class:this.classes(Te.itemChevronIcon,Qo(this.container)?Te.iconLeft:Te.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:s}=this,{abilities:h,supportsResizeAttachments:f}=r,{contentType:m,name:b,url:S}=e,I=this.renderImageMask(e,i==="list"?48:400),A=h.editing?ie("span",{"aria-hidden":"true",class:this.classes(Te.itemChevronIcon,Qo(this.container)?Te.iconLeft:Te.iconRight)}):null,O=[I,s==="preview"&&f&&LT(m)?null:ie("label",{class:Te.itemLabel},ie("span",{class:Te.itemFilename},b||this.messages.noTitle),A)],R=h.editing?ie("button",{key:"details-button",bind:this,class:Te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},O):ie("a",{key:"details-link",class:Te.itemButton,href:S??void 0,target:"_blank"},O);return ie("li",{class:Te.item,key:e},R)}renderAttachmentContainer(){var L;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:s,abilities:h,fileInfos:f}=i,m=!!(s!=null&&s.length),b=!!(f!=null&&f.length),S={[Te.containerList]:e!=="preview",[Te.containerPreview]:e==="preview"},I=h.editing&&((L=h.operations)!=null&&L.add)&&r.addButton?ie("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Te.esriButton,Te.esriButtonTertiary,Te.addAttachmentButton),type:"button"},ie("span",{"aria-hidden":"true",class:this.classes(Te.itemAddIcon,Te.iconPlus)}),this.messages.add):void 0,A=m?ie("ul",{key:"attachments-list",class:Te.items},s.toArray().map(z=>this.renderAttachmentInfo({attachmentInfo:z,displayType:e}))):void 0,O=b?ie("ul",{key:"file-list",class:Te.items},f.toArray().map(z=>this.renderFile(z))):void 0,R=b||m?void 0:ie("div",{class:Te.empty},this.messages.noAttachments);return ie("div",{key:"attachments-container",class:this.classes(Te.container,S)},A,O,R,I)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};v([x()],jr.prototype,"abilities",null),v([x()],jr.prototype,"displayType",void 0),v([x({readOnly:!0})],jr.prototype,"effectiveDisplayType",null),v([x()],jr.prototype,"graphic",null),v([x()],jr.prototype,"label",null),v([x(),xr("esri/widgets/Attachments/t9n/Attachments")],jr.prototype,"messages",void 0),v([x(),xr("esri/core/t9n/Units")],jr.prototype,"messagesUnits",void 0),v([x({readOnly:!0})],jr.prototype,"selectedFile",void 0),v([x({readOnly:!0})],jr.prototype,"submitting",void 0),v([x({readOnly:!0})],jr.prototype,"error",void 0),v([x({type:F7})],jr.prototype,"viewModel",void 0),v([x()],jr.prototype,"visibleElements",void 0),v([vt("visibleElements")],jr.prototype,"castVisibleElements",null),jr=v([B("esri.widgets.Attachments")],jr);const Fie=jr;let r1=class extends F7{constructor(e){super(e),this.description=null,this.title=null}};v([x()],r1.prototype,"description",void 0),v([x()],r1.prototype,"title",void 0),r1=v([B("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],r1);const N7=r1,Nie={heading:"esri-widget__heading"};function L7({level:t,class:e,...i},r){const s=Lie(t);return ie(`h${s}`,{...i,class:vF(Nie.heading,e),role:"heading","aria-level":String(s)},r)}function Lie(t){return fi(Math.ceil(t),1,6)}const Q3="esri-feature-element-info",e_={base:Q3,title:`${Q3}__title`,description:`${Q3}__description`};let id=class extends Er{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return ie("div",{class:e_.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?ie(L7,{level:this.headingLevel,class:e_.title},e):null}renderDescription(){const{description:e}=this;return e?ie("div",{key:"description",class:e_.description},e):null}};v([x()],id.prototype,"description",void 0),v([x()],id.prototype,"headingLevel",void 0),v([x()],id.prototype,"title",void 0),id=v([B("esri.widgets.Feature.support.FeatureElementInfo")],id);const Mb=id,jie={base:"esri-feature-attachments"};let Do=class extends Er{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new Fie,this.headingLevel=2,this.viewModel=new N7}initialize(){this._featureElementInfo=new Mb,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),_t),me(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,_t)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return ie("div",{class:jie.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var s;const{description:e,title:i,headingLevel:r}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:i,headingLevel:r})}};v([x({readOnly:!0})],Do.prototype,"attachmentsWidget",void 0),v([x()],Do.prototype,"description",null),v([x()],Do.prototype,"displayType",null),v([x()],Do.prototype,"graphic",null),v([x()],Do.prototype,"headingLevel",void 0),v([x()],Do.prototype,"title",null),v([x({type:N7})],Do.prototype,"viewModel",void 0),Do=v([B("esri.widgets.Feature.FeatureAttachments")],Do);const Die=Do,gp=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Mn,this._updatingHandles=new qd}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return v([x({readOnly:!0})],e.prototype,"handles",null),v([x({readOnly:!0})],e.prototype,"updatingHandles",null),e=v([B("esri.core.HandleOwner")],e),e};let hw=class extends gp(Oe){};hw=v([B("esri.core.HandleOwner")],hw);let iu=class extends gp(Oe){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(me(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},_t))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(uw(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=uw(e,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const s=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};v([x({readOnly:!0})],iu.prototype,"created",void 0),v([x()],iu.prototype,"creator",void 0),v([x()],iu.prototype,"destroyer",void 0),v([x({type:Mr})],iu.prototype,"graphic",void 0),v([x({readOnly:!0})],iu.prototype,"state",null),iu=v([B("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],iu);const cw=iu;function zn(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:Vie(t[e])}}}function zie(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Vie(t){return function(e,...i){zie(e)?oee(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function _N(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:Gie(t);i.push(...r)}}function Gie(t){return t.split(",").map(e=>e.trim())}const xN="calcite-mode-";function qie(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function pw(){return qie().startsWith("dark")}function Uie(){return`${xN}${pw()?"dark":"light"}`}function Bie(t){Hie(t),t.classList.add(Uie())}function Hie(t){Array.from(t.classList).forEach(e=>{e.startsWith(xN)&&t.classList.remove(e)})}function SN(t){return t&&typeof t.render=="function"}function Wie(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const t_="esri-feature-content",i_={base:t_,loaderContainer:`${t_}__loader-container`,loader:`${t_}__loader`};let rd=class extends Er{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(s=>{pN(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return ie("div",{class:i_.loaderContainer,key:"loader"},ie("div",{class:i_.loader}))}renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?ie("div",{key:e,bind:e,afterCreate:this._attachToNode}):SN(e)?ie("div",{key:e},!e.destroyed&&e.render()):ie("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return ie("div",{class:i_.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};v([x()],rd.prototype,"creator",null),v([x()],rd.prototype,"graphic",null),v([x({type:cw})],rd.prototype,"viewModel",void 0),rd=v([B("esri.widgets.Feature.FeatureContent")],rd);const Pv=rd;let Pa=class extends Oe{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const h=s.clone();h.label=dN(h,e),r.push(h)}),r}};v([x()],Pa.prototype,"attributes",void 0),v([x({type:[UP]})],Pa.prototype,"expressionInfos",void 0),v([x()],Pa.prototype,"description",void 0),v([x({type:[sm]})],Pa.prototype,"fieldInfos",void 0),v([x({readOnly:!0})],Pa.prototype,"formattedFieldInfos",null),v([x()],Pa.prototype,"title",void 0),Pa=v([B("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Pa);const $b=Pa,Jie=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Kie(t){let e=null;return Jie.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function Zie(t,e){if(typeof e!="string"||!e)return e;const i=Kie(e);if(!i)return e;const r=e.match(i.pattern),s=r&&r[2],h=na(na(i.label,{messages:t,hierPart:s}),{appName:i.appName}),f=i.target?` target="${i.target}"`:"",m=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${f} href="$1"${m}>${h}</a>`)}const lg="esri-feature-fields",pf={base:lg,fieldHeader:`${lg}__field-header`,fieldData:`${lg}__field-data`,fieldDataDate:`${lg}__field-data--date`,esriTable:"esri-widget__table"};let Bs=class extends Er{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new $b,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Mb,this.addHandles(me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),_t))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:r}=this.viewModel,s=e.fieldName,h=e.label||s,f=r?r[s]==null?"":r[s]:"",m=!(!e.format||!e.format.dateFormat),b=typeof f=="number"&&!m?this._forceLTR(f):Zie(this.messagesURIUtils,f),S={[pf.fieldDataDate]:m};return ie("tr",{key:`fields-element-info-row-${s}-${i}`},ie("th",{key:`fields-element-info-row-header-${s}-${i}`,class:pf.fieldHeader,innerHTML:h}),ie("td",{key:`fields-element-info-row-data-${s}-${i}`,class:this.classes(pf.fieldData,S),innerHTML:b}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?ie("table",{class:pf.esriTable,summary:this.messages.fieldsSummary},ie("tbody",null,e.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){var e;return ie("div",{class:pf.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};v([x()],Bs.prototype,"attributes",null),v([x()],Bs.prototype,"description",null),v([x()],Bs.prototype,"expressionInfos",null),v([x()],Bs.prototype,"fieldInfos",null),v([x()],Bs.prototype,"title",null),v([x({type:$b,nonNullable:!0})],Bs.prototype,"viewModel",void 0),v([x(),xr("esri/widgets/Feature/t9n/Feature")],Bs.prototype,"messages",void 0),v([x(),xr("esri/widgets/support/t9n/uriUtils")],Bs.prototype,"messagesURIUtils",void 0),Bs=v([B("esri.widgets.Feature.FeatureFields")],Bs);const MN=Bs,Yie={maximumFractionDigits:20};function Xie(t){return Wu(t,Yie)}var q4;let qh=q4=class extends ye{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new q4({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};v([x({type:Be,json:{type:[Bt],write:!0}})],qh.prototype,"color",void 0),v([x({type:String,json:{write:!0}})],qh.prototype,"label",void 0),v([x({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],qh.prototype,"value",void 0),v([Ee("value")],qh.prototype,"writeValue",null),qh=q4=v([B("esri.renderers.visualVariables.support.ColorStop")],qh);const Qie=qh;function Tb(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ere(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function tre(t,e,i,r,s,h,f,m,b,S,I,A,O,R,L,z){const j=new Float32Array(16);return j[0]=t,j[1]=e,j[2]=i,j[3]=r,j[4]=s,j[5]=h,j[6]=f,j[7]=m,j[8]=b,j[9]=S,j[10]=I,j[11]=A,j[12]=O,j[13]=R,j[14]=L,j[15]=z,j}function ire(t,e){return new Float32Array(t,e,16)}const rre=Tb();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rre,clone:ere,create:Tb,createView:ire,fromValues:tre},Symbol.toStringTag,{value:"Module"}));const nre=(t,e)=>{const i=oh(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Yn(i,i)},sre=(t,e)=>{const i=oh(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Yn(i,i)},ore=(t,e)=>{const i=1-e,r=oh(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Yn(r,r)},are=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=oh(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Yn(s,s)},lre=(t,e)=>{const i=1-2*e,r=oh(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Yn(r,r)},ure=(t,e)=>{const i=oh(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Yn(i,i)},hre=(t,e)=>{const i=1-e,r=oh(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Yn(r,r)};let $N=class TN{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=wn(e.strength,i.strength,r),this.radius=wn(e.radius,i.radius,r),this.threshold=wn(e.threshold,i.threshold,r)}clone(){return new TN(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:H1(this.radius),strength:this.strength,threshold:this.threshold}}},IN=class EN{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(wn(e.radius,i.radius,r))}clone(){return new EN(this.radius)}toJSON(){return{type:"blur",radius:H1(this.radius)}}},U4=class AN{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=wn(e.amount,i.amount,r),this._updateMatrix()}clone(){return new AN(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||Tb();switch(this.type){case"brightness":this._colorMatrix=nre(e,this.amount);break;case"contrast":this._colorMatrix=sre(e,this.amount);break;case"grayscale":this._colorMatrix=ore(e,this.amount);break;case"invert":this._colorMatrix=lre(e,this.amount);break;case"saturate":this._colorMatrix=ure(e,this.amount);break;case"sepia":this._colorMatrix=hre(e,this.amount)}}},CN=class kN{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=wn(e.offsetX,i.offsetX,r),this.offsetY=wn(e.offsetY,i.offsetY,r),this.blurRadius=wn(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(wn(e.color[0],i.color[0],r)),this.color[1]=Math.round(wn(e.color[1],i.color[1],r)),this.color[2]=Math.round(wn(e.color[2],i.color[2],r)),this.color[3]=wn(e.color[3],i.color[3],r)}clone(){return new kN(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:H1(this.offsetX),yoffset:H1(this.offsetY),blurRadius:H1(this.blurRadius),color:e}}},ON=class PN{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=wn(e.angle,i.angle,r),this._updateMatrix()}clone(){return new PN(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||Tb();this._colorMatrix=are(e,this.angle)}},RN=class FN{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=wn(e.amount,i.amount,r)}clone(){return new FN(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function wn(t,e,i){return t+(e-t)*i}function H1(t){return Math.round(1e3*ul(t))/1e3}function cre(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new U4(t.type,0);case"saturate":case"brightness":case"contrast":return new U4(t.type,1);case"opacity":return new RN(1);case"hue-rotate":return new ON(0);case"blur":return new IN(0);case"drop-shadow":return new CN(0,0,0,[...NS("transparent")]);case"bloom":return new $N(0,0,1)}}function pre(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,s)=>r.type===i[s].type)}function dre(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(cre(i[s]))}function fre(t){const e=t[0];return!!e&&"type"in e}var DT,zT,B4={};function NN(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=VT(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ne("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:VT(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!pre(e[i].effects,e[i+1].effects))throw new ne("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});dre(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function VT(t){let e;if(!t)return[];try{e=B4.parse(t)}catch(i){throw new ne("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>yre(i))}function yre(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return mre(t);case"opacity":return gre(t);case"hue-rotate":return vre(t);case"blur":return wre(t);case"drop-shadow":return bre(t);case"bloom":return _re(t)}}catch(e){throw e.details.filter=t,e}throw new ne("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function mre(t){let e=1;return j0(t.parameters,1),t.parameters.length===1&&(e=so(t.parameters[0])),new U4(t.name,e)}function gre(t){let e=1;return j0(t.parameters,1),t.parameters.length===1&&(e=so(t.parameters[0])),new RN(e)}function vre(t){let e=0;return j0(t.parameters,1),t.parameters.length===1&&(e=Ire(t.parameters[0])),new ON(e)}function wre(t){let e=0;return j0(t.parameters,1),t.parameters.length===1&&(e=z7(t.parameters[0]),gm(e,t.parameters[0])),new IN(e)}function bre(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ne("effect:type-error","Accepts only one color",{});i=Ere(r)}else{const s=z7(r);if(Object.isFrozen(e))throw new ne("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&gm(s,r)}if(e.length<2||e.length>3)throw new ne("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new CN(e[0],e[1],e[2]||0,i||LN("black"))}function _re(t){let e=1,i=0,r=0;return j0(t.parameters,3),t.parameters[0]&&(e=so(t.parameters[0])),t.parameters[1]&&(i=z7(t.parameters[1]),gm(i,t.parameters[1])),t.parameters[2]&&(r=so(t.parameters[2])),new $N(e,i,r)}function j0(t,e){if(t.length>e)throw new ne("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function Ib(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in D7)return"<length>";if(t.unit in j7)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function gm(t,e){if(t<0)throw new ne("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function xre(t){if(t.type!=="quantity"||t.unit!==null)throw new ne("effect:type-error",`Expected <double>, Actual: ${Ib(t)}`,{term:t})}function Sre(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ne("effect:type-error",`Expected <double> or <percentage>, Actual: ${Ib(t)}`,{term:t})}zT=function(){function t(s,h){function f(){this.constructor=s}f.prototype=h.prototype,s.prototype=new f}function e(s,h,f,m){var b=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(b,e.prototype),b.expected=h,b.found=f,b.location=m,b.name="SyntaxError",b}function i(s,h,f){return f=f||" ",s.length>h?s:(h-=s.length,s+(f+=f.repeat(h)).slice(0,h))}function r(s,h){var f,m={},b=(h=h!==void 0?h:{}).grammarSource,S={start:Ii},I=Ii,A="none",O=")",R=",",L="(",z="%",j="px",H="cm",Y="mm",X="in",te="pt",oe="pc",le="deg",ve="rad",xe="grad",Fe="turn",Pe="#",He=".",ze="e",st=/^[ \t\n\r]/,Ne=/^[a-z\-]/,ii=/^[0-9a-fA-F]/,Ar=/^[+\-]/,ai=/^[0-9]/,xt=be("none"),In=de("none",!1),n3=de(")",!1),Rm=de(",",!1),s3=be("whitespace"),Fm=ce([" ","	",`
`,"\r"],!1,!1),o3=be("function"),a3=de("(",!1),l3=be("identifier"),Nm=ce([["a","z"],"-"],!1,!1),u3=be("percentage"),h3=de("%",!1),c3=be("length"),p3=de("px",!1),d3=de("cm",!1),Lm=de("mm",!1),f3=de("in",!1),y3=de("pt",!1),m3=de("pc",!1),Ni=be("angle"),U=de("deg",!1),Cr=de("rad",!1),jm=de("grad",!1),St=de("turn",!1),bi=be("number"),Cs=be("color"),xo=de("#",!1),ks=ce([["0","9"],["a","f"],["A","F"]],!1,!1),So=ce(["+","-"],!1,!1),Os=ce([["0","9"]],!1,!1),Dm=de(".",!1),ya=de("e",!1),Se=function(){return[]},vl=function(K,pe){return{type:"function",name:K,parameters:pe||[]}},c=function(K,pe){return pe.length>0?XG(K,pe,3):[K]},C=function(K){return{type:"quantity",value:K.value,unit:K.unit}},w=function(K){return{type:"color",colorType:K.type,value:K.value}},u=function(K){return K},a=function(){return ae()},n=function(K){return{value:K,unit:"%"}},o=function(K){return{value:K,unit:"px"}},l=function(K){return{value:K,unit:"cm"}},p=function(K){return{value:K,unit:"mm"}},d=function(K){return{value:K,unit:"in"}},y=function(K){return{value:K,unit:"pt"}},g=function(K){return{value:K,unit:"pc"}},_=function(K){return{value:K,unit:"deg"}},M=function(K){return{value:K,unit:"rad"}},$=function(K){return{value:K,unit:"grad"}},E=function(K){return{value:K,unit:"turn"}},k=function(K){return{value:K,unit:null}},P=function(){return{type:"hex",value:ae()}},F=function(K){return{type:"function",value:K}},D=function(){return{type:"named",value:ae()}},V=function(){return parseFloat(ae())},N=0,G=0,J=[{line:1,column:1}],W=0,ee=[],Z=0;if("startRule"in h){if(!(h.startRule in S))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');I=S[h.startRule]}function ae(){return s.substring(G,N)}function de(K,pe){return{type:"literal",text:K,ignoreCase:pe}}function ce(K,pe,_e){return{type:"class",parts:K,inverted:pe,ignoreCase:_e}}function Ae(){return{type:"end"}}function be(K){return{type:"other",description:K}}function Je(K){var pe,_e=J[K];if(_e)return _e;for(pe=K-1;!J[pe];)pe--;for(_e={line:(_e=J[pe]).line,column:_e.column};pe<K;)s.charCodeAt(pe)===10?(_e.line++,_e.column=1):_e.column++,pe++;return J[K]=_e,_e}function Ve(K,pe,_e){var lt=Je(K),Li=Je(pe),Wt={source:b,start:{offset:K,line:lt.line,column:lt.column},end:{offset:pe,line:Li.line,column:Li.column}};return _e&&b&&typeof b.offset=="function"&&(Wt.start=b.offset(Wt.start),Wt.end=b.offset(Wt.end)),Wt}function Ie(K){N<W||(N>W&&(W=N,ee=[]),ee.push(K))}function qt(K,pe,_e){return new e(e.buildMessage(K,pe),K,pe,_e)}function Ii(){var K;return(K=Ht())===m&&(K=wt()),K}function Ht(){var K,pe;return Z++,K=N,nt(),s.substr(N,4)===A?(pe=A,N+=4):(pe=m,Z===0&&Ie(In)),pe!==m?(nt(),G=K,K=Se()):(N=K,K=m),Z--,K===m&&Z===0&&Ie(xt),K}function wt(){var K,pe;if(K=[],(pe=bt())!==m)for(;pe!==m;)K.push(pe),pe=bt();else K=m;return K}function bt(){var K,pe,_e,lt;return K=N,nt(),(pe=En())!==m?(nt(),(_e=ot())===m&&(_e=null),nt(),s.charCodeAt(N)===41?(lt=O,N++):(lt=m,Z===0&&Ie(n3)),lt!==m?(nt(),G=K,K=vl(pe,_e)):(N=K,K=m)):(N=K,K=m),K}function ot(){var K,pe,_e,lt,Li,Wt,Xn,zm;if(K=N,(pe=Qt())!==m){for(_e=[],lt=N,Li=nt(),s.charCodeAt(N)===44?(Wt=R,N++):(Wt=m,Z===0&&Ie(Rm)),Wt===m&&(Wt=null),Xn=nt(),(zm=Qt())!==m?lt=Li=[Li,Wt,Xn,zm]:(N=lt,lt=m);lt!==m;)_e.push(lt),lt=N,Li=nt(),s.charCodeAt(N)===44?(Wt=R,N++):(Wt=m,Z===0&&Ie(Rm)),Wt===m&&(Wt=null),Xn=nt(),(zm=Qt())!==m?lt=Li=[Li,Wt,Xn,zm]:(N=lt,lt=m);G=K,K=c(pe,_e)}else N=K,K=m;return K}function Qt(){var K,pe;return K=N,(pe=yr())===m&&(pe=Pt())===m&&(pe=_p())===m&&(pe=xp()),pe!==m&&(G=K,pe=C(pe)),(K=pe)===m&&(K=N,(pe=Sp())!==m&&(G=K,pe=w(pe)),K=pe),K}function nt(){var K,pe;for(Z++,K=[],st.test(s.charAt(N))?(pe=s.charAt(N),N++):(pe=m,Z===0&&Ie(Fm));pe!==m;)K.push(pe),st.test(s.charAt(N))?(pe=s.charAt(N),N++):(pe=m,Z===0&&Ie(Fm));return Z--,pe=m,Z===0&&Ie(s3),K}function En(){var K,pe,_e;return Z++,K=N,(pe=pt())!==m?(s.charCodeAt(N)===40?(_e=L,N++):(_e=m,Z===0&&Ie(a3)),_e!==m?(G=K,K=u(pe)):(N=K,K=m)):(N=K,K=m),Z--,K===m&&(pe=m,Z===0&&Ie(o3)),K}function pt(){var K,pe,_e;if(Z++,K=N,pe=[],Ne.test(s.charAt(N))?(_e=s.charAt(N),N++):(_e=m,Z===0&&Ie(Nm)),_e!==m)for(;_e!==m;)pe.push(_e),Ne.test(s.charAt(N))?(_e=s.charAt(N),N++):(_e=m,Z===0&&Ie(Nm));else pe=m;return pe!==m&&(G=K,pe=a()),Z--,(K=pe)===m&&(pe=m,Z===0&&Ie(l3)),K}function yr(){var K,pe,_e;return Z++,K=N,nt(),(pe=kr())!==m?(s.charCodeAt(N)===37?(_e=z,N++):(_e=m,Z===0&&Ie(h3)),_e!==m?(G=K,K=n(pe)):(N=K,K=m)):(N=K,K=m),Z--,K===m&&Z===0&&Ie(u3),K}function Pt(){var K,pe,_e;return Z++,K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===j?(_e=j,N+=2):(_e=m,Z===0&&Ie(p3)),_e!==m?(G=K,K=o(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===H?(_e=H,N+=2):(_e=m,Z===0&&Ie(d3)),_e!==m?(G=K,K=l(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===Y?(_e=Y,N+=2):(_e=m,Z===0&&Ie(Lm)),_e!==m?(G=K,K=p(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===X?(_e=X,N+=2):(_e=m,Z===0&&Ie(f3)),_e!==m?(G=K,K=d(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===te?(_e=te,N+=2):(_e=m,Z===0&&Ie(y3)),_e!==m?(G=K,K=y(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,nt(),(pe=kr())!==m?(s.substr(N,2)===oe?(_e=oe,N+=2):(_e=m,Z===0&&Ie(m3)),_e!==m?(G=K,K=g(pe)):(N=K,K=m)):(N=K,K=m)))))),Z--,K===m&&Z===0&&Ie(c3),K}function _p(){var K,pe,_e;return Z++,K=N,(pe=kr())!==m?(s.substr(N,3)===le?(_e=le,N+=3):(_e=m,Z===0&&Ie(U)),_e!==m?(G=K,K=_(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,(pe=kr())!==m?(s.substr(N,3)===ve?(_e=ve,N+=3):(_e=m,Z===0&&Ie(Cr)),_e!==m?(G=K,K=M(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,(pe=kr())!==m?(s.substr(N,4)===xe?(_e=xe,N+=4):(_e=m,Z===0&&Ie(jm)),_e!==m?(G=K,K=$(pe)):(N=K,K=m)):(N=K,K=m),K===m&&(K=N,(pe=kr())!==m?(s.substr(N,4)===Fe?(_e=Fe,N+=4):(_e=m,Z===0&&Ie(St)),_e!==m?(G=K,K=E(pe)):(N=K,K=m)):(N=K,K=m)))),Z--,K===m&&(pe=m,Z===0&&Ie(Ni)),K}function xp(){var K,pe;return Z++,K=N,nt(),(pe=kr())!==m?(G=K,K=k(pe)):(N=K,K=m),Z--,K===m&&Z===0&&Ie(bi),K}function Sp(){var K,pe,_e,lt;if(Z++,K=N,s.charCodeAt(N)===35?(pe=Pe,N++):(pe=m,Z===0&&Ie(xo)),pe!==m){if(_e=[],ii.test(s.charAt(N))?(lt=s.charAt(N),N++):(lt=m,Z===0&&Ie(ks)),lt!==m)for(;lt!==m;)_e.push(lt),ii.test(s.charAt(N))?(lt=s.charAt(N),N++):(lt=m,Z===0&&Ie(ks));else _e=m;_e!==m?(G=K,K=P()):(N=K,K=m)}else N=K,K=m;return K===m&&(K=N,(pe=bt())!==m&&(G=K,pe=F(pe)),(K=pe)===m&&(K=N,(pe=pt())!==m&&(G=K,pe=D()),K=pe)),Z--,K===m&&(pe=m,Z===0&&Ie(Cs)),K}function kr(){var K,pe,_e,lt,Li,Wt,Xn;for(K=N,Ar.test(s.charAt(N))?(s.charAt(N),N++):Z===0&&Ie(So),pe=N,_e=[],ai.test(s.charAt(N))?(lt=s.charAt(N),N++):(lt=m,Z===0&&Ie(Os));lt!==m;)_e.push(lt),ai.test(s.charAt(N))?(lt=s.charAt(N),N++):(lt=m,Z===0&&Ie(Os));if(s.charCodeAt(N)===46?(lt=He,N++):(lt=m,Z===0&&Ie(Dm)),lt!==m){if(Li=[],ai.test(s.charAt(N))?(Wt=s.charAt(N),N++):(Wt=m,Z===0&&Ie(Os)),Wt!==m)for(;Wt!==m;)Li.push(Wt),ai.test(s.charAt(N))?(Wt=s.charAt(N),N++):(Wt=m,Z===0&&Ie(Os));else Li=m;Li!==m?pe=_e=[_e,lt,Li]:(N=pe,pe=m)}else N=pe,pe=m;if(pe===m)if(pe=[],ai.test(s.charAt(N))?(_e=s.charAt(N),N++):(_e=m,Z===0&&Ie(Os)),_e!==m)for(;_e!==m;)pe.push(_e),ai.test(s.charAt(N))?(_e=s.charAt(N),N++):(_e=m,Z===0&&Ie(Os));else pe=m;if(pe!==m){if(_e=N,s.charCodeAt(N)===101?(lt=ze,N++):(lt=m,Z===0&&Ie(ya)),lt!==m){if(Ar.test(s.charAt(N))?(Li=s.charAt(N),N++):(Li=m,Z===0&&Ie(So)),Li===m&&(Li=null),Wt=[],ai.test(s.charAt(N))?(Xn=s.charAt(N),N++):(Xn=m,Z===0&&Ie(Os)),Xn!==m)for(;Xn!==m;)Wt.push(Xn),ai.test(s.charAt(N))?(Xn=s.charAt(N),N++):(Xn=m,Z===0&&Ie(Os));else Wt=m;Wt!==m?_e=lt=[lt,Li,Wt]:(N=_e,_e=m)}else N=_e,_e=m;_e===m&&(_e=null),G=K,K=V()}else N=K,K=m;return K}function YG(K,pe){return K.map(function(_e){return _e[pe]})}function XG(K,pe,_e){return[K].concat(YG(pe,_e))}if((f=I())!==m&&N===s.length)return f;throw f!==m&&N<s.length&&Ie(Ae()),qt(ee,W<s.length?s.charAt(W):null,W<s.length?Ve(W,W+1):Ve(W,W))}return t(e,Error),e.prototype.format=function(s){var h="Error: "+this.message;if(this.location){var f,m=null;for(f=0;f<s.length;f++)if(s[f].source===this.location.source){m=s[f].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,S=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,I=this.location.source+":"+S.line+":"+S.column;if(m){var A=this.location.end,O=i("",S.line.toString().length," "),R=m[b.line-1],L=(b.line===A.line?A.column:R.length+1)-b.column||1;h+=`
 --> `+I+`
`+O+` |
`+S.line+" | "+R+`
`+O+" | "+i("",b.column-1," ")+i("",L,"^")}else h+=`
 at `+I}return h},e.buildMessage=function(s,h){var f={literal:function(R){return'"'+b(R.text)+'"'},class:function(R){var L=R.parts.map(function(z){return Array.isArray(z)?S(z[0])+"-"+S(z[1]):S(z)});return"["+(R.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function m(R){return R.charCodeAt(0).toString(16).toUpperCase()}function b(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function S(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function I(R){return f[R.type](R)}function A(R){var L,z,j=R.map(I);if(j.sort(),j.length>0){for(L=1,z=1;L<j.length;L++)j[L-1]!==j[L]&&(j[z]=j[L],z++);j.length=z}switch(j.length){case 1:return j[0];case 2:return j[0]+" or "+j[1];default:return j.slice(0,-1).join(", ")+", or "+j[j.length-1]}}function O(R){return R?'"'+b(R)+'"':"end of input"}return"Expected "+A(s)+" but "+O(h)+" found."},{SyntaxError:e,parse:r}},(DT={get exports(){return B4},set exports(t){B4=t}}).exports&&(DT.exports=zT());const j7={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Mre(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&j7[t.unit]!=null))throw new ne("effect:type-error",`Expected <angle>, Actual: ${Ib(t)}`,{term:t})}const D7={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function $re(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&D7[t.unit]!=null))throw new ne("effect:type-error",`Expected <length>, Actual: ${Ib(t)}`,{term:t})}function so(t){Sre(t);const e=t.value;return gm(e,t),t.unit==="%"?.01*e:e}function Tre(t){return xre(t),gm(t.value,t),t.value}function Ire(t){return Mre(t),t.value*j7[t.unit]||0}function z7(t){return $re(t),t.value*D7[t.unit]||0}function Ere(t){switch(t.colorType){case"hex":return AW(t.value);case"named":return LN(t.value);case"function":return kre(t.value)}}function LN(t){if(!AO(t))throw new ne("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return EW(t)}const Are=/^rgba?/i,Cre=/^hsla?/i;function kre(t){if(j0(t.parameters,4),Are.test(t.name))return[so(t.parameters[0]),so(t.parameters[1]),so(t.parameters[2]),t.parameters[3]?so(t.parameters[3]):1];if(Cre.test(t.name))return CO(Tre(t.parameters[0]),so(t.parameters[1]),so(t.parameters[2]),t.parameters[3]?so(t.parameters[3]):1);throw new ne("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function V7(t,e,i){var r;try{return Pre(t)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function G7(t,e,i,r){try{const s=Ore(t);Wr(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function Ore(t){const e=NN(t);return e?fre(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function Pre(t){if(!t||t.length===0)return null;if(Rre(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:GT(i.value)});return e}return GT(t)}function Rre(t){const e=t[0];return!!e&&"scale"in e}function GT(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ga(i,"amount")];break;case"blur":r=[ga(i,"radius","pt")];break;case"hue-rotate":r=[ga(i,"angle","deg")];break;case"drop-shadow":r=[ga(i,"xoffset","pt"),ga(i,"yoffset","pt"),ga(i,"blurRadius","pt"),Fre(i,"color")];break;case"bloom":r=[ga(i,"strength"),ga(i,"radius","pt"),ga(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;NN(s),e.push(s)}return e.join(" ")}function ga(t,e,i){if(t[e]==null)throw new ne("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Fre(t,e){if(t[e]==null)throw new ne("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const r_=-3;var gu;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(gu||(gu={}));let K9e=class{constructor(e,i,r){this._namespace=e,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,i,r,s=0){this._storage.put(this._namespace+e,i,r,s)}get(e){const i=this._storage.get(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this._namespace+e,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}},jN=class{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new jc,this._users=new jc}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get size(){return this._size}get sizeMB(){return this._size/1024/1024}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,i,r,s){const h=this._db.get(e);if(h&&(this._size-=h.size,this._db.delete(e),h.entry!==i&&this._notifyRemove(e,h.entry,gu.ALL)),r>this._maxSize)return void this._notifyRemove(e,i,gu.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const f=1+Math.max(s,r_)-r_;this._db.set(e,{entry:i,size:r,lifetime:f,lives:f}),this._size+=r,this._checkSizeLimit()}updateSize(e,i,r){const s=this._db.get(e);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const h=this._notifyRemove(e,i,gu.SOME);if(!(h!=null&&h>0))return void this._db.delete(e);r=h}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const i=this._db.get(e);if(i)return this._size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(e){const i=this._db.get(e);if(i!==void 0)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((f,m)=>{const b=f.lifetime;r[b]=(r[b]||0)+f.size,this._users.forAll(S=>{const I=S.namespace;if(m.startsWith(I)){const A=i[I]||0;i[I]=A+f.size}})});const s={};this._users.forAll(f=>{const m=f.namespace;if(!isNaN(f.hitRate)&&f.hitRate>0){const b=i[m]||0;i[m]=b,s[m]=Math.round(100*f.hitRate)+"%"}else s[m]="0%"});const h=Object.keys(i);h.sort((f,m)=>i[m]-i[f]),h.forEach(f=>e[f]=Math.round(i[f]/2**20)+"MB / "+s[f]);for(let f=r.length-1;f>=0;--f){const m=r[f];m&&(e["Priority "+(f+r_-1)]=Math.round(m/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){this._db.forEach((i,r)=>{r.startsWith(e)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,gu.ALL))})}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,gu.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let s;return this._removeFuncs.some(h=>{if(e.startsWith(h[0])){const f=h[1](i,r);return typeof f=="number"&&(s=f),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,i]of this._db){if(this._db.delete(e),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(e,i.entry,gu.SOME);r!=null&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(e,i))}else--i.lives,this._db.set(e,i);if(this._size<=.9*this.maxSize)return}}},Nre=class{constructor(e,i){this._storage=new jN,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i){this._storage.put(e,i,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}};new Nre(1e3);new Be([128,128,128]);const Lre=new Be("white");function Mp(t,e){if(!t)return null;let i=null;return l0(t)?i=jre(t):mb(t)&&(i=t.color?new Be(t.color):null),i?Ly(i,e):null}function jre(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var s;r.type==="object"&&((s=r.resource)==null?void 0:s.href)!=null||(i=r.type==="water"?r.color:r.material!=null?r.material.color:null)}),i?new Be(i):null}function Ly(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Be(i)}function Dre(t,e,i){const r=t.symbolLayers;if(!r)return;const s=h=>Ly(e=e??h??null??(i!=null?Lre:null),i);r.forEach(h=>{var f;if(h.type!=="object"||((f=h.resource)==null?void 0:f.href)==null||e)if(h.type==="water")h.color=s(h.color);else{const m=h.material!=null?h.material.color:null,b=s(m);h.material==null?h.material=new Wn({color:b}):h.material.color=b,i!=null&&"outline"in h&&h.outline!=null&&h.outline.color!=null&&(h.outline.color=Ly(h.outline.color,i))}})}function zre(t,e,i){(e=e??t.color)&&(t.color=Ly(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=Ly(t.outline.color,i))}function n_(t,e,i){t&&(e||i!=null)&&(e&&(e=new Be(e)),l0(t)?Dre(t,e,i):mb(t)&&zre(t,e,i))}async function Vre(t,e){const i=t.symbolLayers;i&&await nB(i,async r=>Gre(r,e))}async function Gre(t,e){switch(t.type){case"extrude":Ure(t,e);break;case"icon":case"line":case"text":qre(t,e);break;case"path":Hre(t,e);break;case"object":await Bre(t,e)}}function qre(t,e){const i=DN(e);i!=null&&(t.size=i)}function DN(t){for(const e of t)if(typeof e=="number")return e;return null}function Ure(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function Bre(t,e){const{resourceSize:i,symbolSize:r}=await Wre(t),s=zN(e,i,r);t.width=W1(e[0],r[0],i[0],s),t.depth=W1(e[1],r[1],i[1],s),t.height=W1(e[2],r[2],i[2],s)}function Hre(t,e){const i=zN(e,jO,[t.width,void 0,t.height]);t.width=W1(e[0],t.width,1,i),t.height=W1(e[2],t.height,1,i)}function zN(t,e,i){for(let r=0;r<3;r++){const s=t[r];switch(s){case"symbol-value":{const h=i[r];return h!=null?h/e[r]:1}case"proportional":break;default:if(s&&e[r])return s/e[r]}}return 1}async function Wre(t){const e=await he(()=>import("./symbolLayerUtils-9ff6b893.js"),[]),i=await e.computeObjectLayerResourceSize(t,10),{width:r,height:s,depth:h}=t,f=[r,h,s];let m=1;for(let b=0;b<3;b++){const S=f[b];if(S!=null){m=S/i[b];break}}for(let b=0;b<3;b++)f[b]==null&&(f[b]=i[b]*m);return{resourceSize:i,symbolSize:f}}function W1(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function Jre(t,e){const i=DN(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function Kre(t,e){if(t&&e)return l0(t)?Vre(t,e):void(mb(t)&&Jre(t,e))}function Zre(t,e,i){if(t&&e!=null)if(l0(t)){const r=t.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=e;break;case"roll":s.roll=e;break;default:s.heading=e}})}else mb(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}async function Yre(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const Xre="<",Qre=">",ene=r7("short-date");function tne(t,e,i,r){let s="";e===0?s=`${Xre} `:e===i&&(s=`${Qre} `);let h=null;return h=r?ll(t,ene):Xie(t),s+h}const ine=new Be([64,64,64]);function rne(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((s,h)=>i.includes(h)?tne(s,h,r,e):null)}async function nne(t,e,i){let r=!1,s=[],h=[];if(t.stops){const S=t.stops;s=S.map(I=>I.value),r=S.some(I=>!!I.label),r&&(h=S.map(I=>I.label))}const f=s[0],m=s[s.length-1];if(f==null&&m==null)return null;const b=r?null:rne(s,i??!1);return(await Promise.all(s.map(async(S,I)=>({value:S,color:t.type==="opacity"?await sne(S,t,e):(await he(()=>Promise.resolve().then(()=>nM),void 0)).getColor(t,S),label:r?h[I]:(b==null?void 0:b[I])??""})))).reverse()}async function sne(t,e,i){const r=new Be(i??ine),s=(await he(()=>Promise.resolve().then(()=>nM),void 0)).getOpacity(e,t);return s!=null&&(r.a=s),r}var H4;let n1=H4=class extends ye{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new H4({color:this.color,ratio:this.ratio})}};v([x({type:Be,json:{type:[Bt],default:null,write:!0}})],n1.prototype,"color",void 0),v([x({type:Number,json:{write:!0}})],n1.prototype,"ratio",void 0),n1=H4=v([B("esri.renderers.support.HeatmapColorStop")],n1);const J1=n1;function one(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new J1({ratio:1,color:r.color})),i++)}return e.map((r,s)=>{var f,m;let h="";return s===0?h=((f=t.legendOptions)==null?void 0:f.minLabel)||"low":s===i&&(h=((m=t.legendOptions)==null?void 0:m.maxLabel)||"high"),{color:r.color,label:h,ratio:r.ratio}}).reverse()}fe.getLogger("esri.renderers.support.utils");async function An(t,e,i){fk(t,e,()=>[]).push(...i)}async function ane(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const s=t.visualVariables.filter(h=>h.type==="color");for(const h of s){const f=(await nne(h)??[]).map(m=>m.color);await An(e,h.field||h.valueExpression,f)}}if(t.type==="heatmap"){const s=one(t).map(h=>h.color);await An(e,t.field||t.valueExpression,s)}else if(t.type==="pie-chart"){for(const s of t.attributes)await An(e,s.field||s.valueExpression,[s.color]);await An(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,Mp(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const s of t.attributes)await An(e,s.field||s.valueExpression,[s.color]);await An(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const s of t.uniqueValueInfos??[])await An(e,s.value.toString(),[Mp(s.symbol,null)]);else{const s=(t.uniqueValueInfos??[]).map(S=>Mp(S.symbol,null)),{field:h,field2:f,field3:m,valueExpression:b}=t;(h||b)&&await An(e,h||b,s),f&&await An(e,f,s),m&&await An(e,m,s)}else if(t.type==="class-breaks"){const s=t.classBreakInfos.map(m=>Mp(m.symbol,null)),{field:h,valueExpression:f}=t;await An(e,h??f,s)}else t.type==="simple"&&await An(e,"default",[Mp(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await An(e,"default",[Mp(t.defaultSymbol,null)]),e.forEach((s,h)=>{const f=aq(s.filter(Boolean),(m,b)=>JSON.stringify(m)===JSON.stringify(b));e.set(h,f)}),e}var W4;let s1=W4=class extends ye{constructor(t){super(t),this.name=null,this.code=null}clone(){return new W4({name:this.name,code:this.code})}};v([x({type:String,json:{write:!0}})],s1.prototype,"name",void 0),v([x({type:[String,Number],json:{write:!0}})],s1.prototype,"code",void 0),s1=W4=v([B("esri.layers.support.CodedValue")],s1);const lne=new tt({inherited:"inherited",codedValue:"coded-value",range:"range"});let o1=class extends ye{constructor(e){super(e),this.name=null,this.type=null}};v([x({type:String,json:{write:!0}})],o1.prototype,"name",void 0),v([Le(lne)],o1.prototype,"type",void 0),o1=v([B("esri.layers.support.Domain")],o1);const Eb=o1;var J4;let a1=J4=class extends Eb{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new J4({codedValues:se(this.codedValues),name:this.name})}};v([x({type:[s1],json:{write:!0}})],a1.prototype,"codedValues",void 0),v([Le({codedValue:"coded-value"})],a1.prototype,"type",void 0),a1=J4=v([B("esri.layers.support.CodedValueDomain")],a1);const VN=a1;var K4;let Rv=K4=class extends Eb{constructor(t){super(t),this.type="inherited"}clone(){return new K4}};v([Le({inherited:"inherited"})],Rv.prototype,"type",void 0),Rv=K4=v([B("esri.layers.support.InheritedDomain")],Rv);const GN=Rv;var Z4;let nd=Z4=class extends Eb{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Z4({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};v([x({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],nd.prototype,"maxValue",void 0),v([x({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],nd.prototype,"minValue",void 0),v([Le({range:"range"})],nd.prototype,"type",void 0),nd=Z4=v([B("esri.layers.support.RangeDomain")],nd);const qN=nd,UN={key:"type",base:Eb,typeMap:{range:qN,"coded-value":VN,inherited:GN}};function q7(t){if(!t||!t.type)return null;switch(t.type){case"range":return qN.fromJSON(t);case"codedValue":return VN.fromJSON(t);case"inherited":return GN.fromJSON(t)}return null}const une=new tt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Y4;const hne=new tt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Dr=Y4=class extends ye{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?hne.fromJSON(i.fieldValueType):null}clone(){return new Y4({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};v([x({type:String,json:{write:!0}})],Dr.prototype,"alias",void 0),v([x({type:[String,Number],json:{write:{allowNull:!0}}})],Dr.prototype,"defaultValue",void 0),v([x()],Dr.prototype,"description",void 0),v([Me("description")],Dr.prototype,"readDescription",null),v([x({types:UN,json:{read:{reader:q7},write:!0}})],Dr.prototype,"domain",void 0),v([x({type:Boolean,json:{write:!0}})],Dr.prototype,"editable",void 0),v([x({type:Bt,json:{write:!0}})],Dr.prototype,"length",void 0),v([x({type:String,json:{write:!0}})],Dr.prototype,"name",void 0),v([x({type:Boolean,json:{write:!0}})],Dr.prototype,"nullable",void 0),v([Le(une)],Dr.prototype,"type",void 0),v([x()],Dr.prototype,"valueType",void 0),v([Me("valueType",["description"])],Dr.prototype,"readValueType",null),v([x({type:Boolean,json:{read:!1}})],Dr.prototype,"visible",void 0),Dr=Y4=v([B("esri.layers.support.Field")],Dr);const U7=Dr;var X4;let sd=X4=class extends ye{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new X4({mapLayerId:t,gdbVersion:e})}};v([Le({mapLayer:"map-layer"})],sd.prototype,"type",void 0),v([x({type:Bt,json:{write:!0}})],sd.prototype,"mapLayerId",void 0),v([x({type:String,json:{write:!0}})],sd.prototype,"gdbVersion",void 0),sd=X4=v([B("esri.layers.support.source.MapLayerSource")],sd);var Q4;let Ra=Q4=class extends ye{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,h={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:s};return new Q4(h)}};v([Le({queryTable:"query-table"})],Ra.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Ra.prototype,"workspaceId",void 0),v([x({type:String,json:{write:!0}})],Ra.prototype,"query",void 0),v([x({type:String,json:{write:!0}})],Ra.prototype,"oidFields",void 0),v([x({type:Ye,json:{write:!0}})],Ra.prototype,"spatialReference",void 0),v([Le(uK)],Ra.prototype,"geometryType",void 0),Ra=Q4=v([B("esri.layers.support.source.QueryTableDataSource")],Ra);var ex;let od=ex=class extends ye{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new ex({workspaceId:t,dataSourceName:e})}};v([Le({raster:"raster"})],od.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],od.prototype,"dataSourceName",void 0),v([x({type:String,json:{write:!0}})],od.prototype,"workspaceId",void 0),od=ex=v([B("esri.layers.support.source.RasterDataSource")],od);var tx;let Uh=tx=class extends ye{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new tx({workspaceId:t,gdbVersion:e,dataSourceName:i})}};v([Le({table:"table"})],Uh.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Uh.prototype,"workspaceId",void 0),v([x({type:String,json:{write:!0}})],Uh.prototype,"gdbVersion",void 0),v([x({type:String,json:{write:!0}})],Uh.prototype,"dataSourceName",void 0),Uh=tx=v([B("esri.layers.support.source.TableDataSource")],Uh);var ix,rx;const cne=Ir()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Rn=ix=class extends ye{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return qT()(t,e,i)}castLeftTableSource(t){return sa(nx(),t)}readRightTableSource(t,e,i){return qT()(t,e,i)}castRightTableSource(t){return sa(nx(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,h={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:s};return new ix(h)}};v([Le({joinTable:"join-table"})],Rn.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Rn.prototype,"leftTableKey",void 0),v([x({type:String,json:{write:!0}})],Rn.prototype,"rightTableKey",void 0),v([x({json:{write:!0}})],Rn.prototype,"leftTableSource",void 0),v([Me("leftTableSource")],Rn.prototype,"readLeftTableSource",null),v([vt("leftTableSource")],Rn.prototype,"castLeftTableSource",null),v([x({json:{write:!0}})],Rn.prototype,"rightTableSource",void 0),v([Me("rightTableSource")],Rn.prototype,"readRightTableSource",null),v([vt("rightTableSource")],Rn.prototype,"castRightTableSource",null),v([Le(cne)],Rn.prototype,"joinType",void 0),Rn=ix=v([B("esri.layers.support.source.JoinTableDataSource")],Rn);let s_=null;function qT(){return s_||(s_=th({types:nx()})),s_}let o_=null;function nx(){return o_||(o_={key:"type",base:null,typeMap:{"data-layer":oo,"map-layer":sd}}),o_}const pne={key:"type",base:null,typeMap:{"join-table":Rn,"query-table":Ra,raster:od,table:Uh}};let oo=rx=class extends ye{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new rx({fields:t,dataSource:e})}};v([Le({dataLayer:"data-layer"})],oo.prototype,"type",void 0),v([x({type:[U7],json:{write:!0}})],oo.prototype,"fields",void 0),v([x({types:pne,json:{write:!0}})],oo.prototype,"dataSource",void 0),oo=rx=v([B("esri.layers.support.source.DataLayerSource")],oo),oo.from=ei(oo);function dne(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function B7(t){return typeof t=="string"?Jr(t):se(t)}function fne(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const h=t[s];if(h!=null&&typeof h!="function")if(Array.isArray(h)){r[s]=[];for(let f=0;f<h.length;f++)r[s][f]=fne(h[f])}else if(typeof h=="object")if(h.toJSON){const f=h.toJSON(i&&i[s]);r[s]=e?f:JSON.stringify(f)}else r[s]=e?h:JSON.stringify(h);else r[s]=h}return r}const ug={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new _n({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ye.WebMercator}),minus180Line:new _n({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ye.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _n({paths:[[[180,-180],[180,180]]],spatialReference:Ye.WGS84}),minus180Line:new _n({paths:[[[-180,-180],[-180,180]]],spatialReference:Ye.WGS84})}};function Rc(t,e){return Math.ceil((t-e)/(2*e))}function BN(t,e){const i=K1(t);for(const r of i)for(const s of r)s[0]+=e;return t}function K1(t){return zc(t)?t.rings:t.paths}async function yne(t,e,i,r){const s=B7(t),h=e[0].spatialReference,f={...r,query:{...s.query,f:"json",sr:JSON.stringify(h),target:JSON.stringify({geometryType:C0(e[0]),geometries:e}),cutter:JSON.stringify(i)}},m=await wi(s.path+"/cut",f),{cutIndexes:b,geometries:S=[]}=m.data;return{cutIndexes:b,geometries:S.map(I=>{const A=an(I);return A.spatialReference=h,A})}}function mne(t){return{geometryType:C0(t[0]),geometries:t.map(e=>e.toJSON())}}function HN(t,e,i){const r=cK(e);return t.map(s=>{const h=r.fromJSON(s);return h.spatialReference=i,h})}async function gne(t,e,i){const r=typeof t=="string"?Jr(t):t,s=e[0].spatialReference,h=C0(e[0]),f={...i,query:{...r.query,f:"json",sr:s.wkid??JSON.stringify(s),geometries:JSON.stringify(mne(e))}},{data:m}=await wi(r.path+"/simplify",f);return HN(m.geometries,h,s)}const WN=fe.getLogger("esri.geometry.support.normalizeUtils");function vne(t){return t.type==="polygon"}function wne(t){return t[0].type==="polygon"}function bne(t){return t[0].type==="polyline"}function _ne(t,e){if(!(t instanceof _n||t instanceof ua)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw WN.error(s),new ne(s)}const i=K1(t),r=[];for(const s of i){const h=[];r.push(h),h.push([s[0][0],s[0][1]]);for(let f=0;f<s.length-1;f++){const m=s[f][0],b=s[f][1],S=s[f+1][0],I=s[f+1][1],A=Math.sqrt((S-m)*(S-m)+(I-b)*(I-b)),O=(I-b)/A,R=(S-m)/A,L=A/e;if(L>1){for(let Y=1;Y<=L-1;Y++){const X=Y*e,te=R*X+m,oe=O*X+b;h.push([te,oe])}const z=(A+Math.floor(L-1)*e)/2,j=R*z+m,H=O*z+b;h.push([j,H])}h.push([S,I])}}return vne(t)?new ua({rings:r,spatialReference:t.spatialReference}):new _n({paths:r,spatialReference:t.spatialReference})}function UT(t,e,i){if(e){const r=_ne(t,1e6);t=Id(r,!0)}return i&&(t=BN(t,i)),t}function BT(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=Rc(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=Rc(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=Rc(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=Rc(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function xne(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],h=e.geometries[r],f=K1(h);for(let m=0;m<f.length;m++){const b=f[m];b.some(S=>{if(S[0]<180)return!0;{let I=0;for(let O=0;O<b.length;O++){const R=b[O][0];I=R>I?R:I}I=Number(I.toFixed(9));const A=-360*Rc(I,180);for(let O=0;O<b.length;O++){const R=h.getPoint(m,O);h.setPoint(m,O,R.clone().offset(A,0))}return!0}})}if(s===i){if(wne(t))for(const m of K1(h))t[s]=t[s].addRing(m);else if(bne(t))for(const m of K1(h))t[s]=t[s].addPath(m)}else i=s,t[s]=h}return t}async function JN(t,e,i){if(!Array.isArray(t))return JN([t],e);e&&typeof e!="string"&&WN.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Tt.geometryServiceUrl;let s,h,f,m,b,S,I,A,O=0;const R=[],L=[];for(const te of t)if(te!=null)if(s||(s=te.spatialReference,h=fo(s),f=s.isWebMercator,S=f?102100:4326,m=ug[S].maxX,b=ug[S].minX,I=ug[S].plus180Line,A=ug[S].minus180Line),h)if(te.type==="mesh")L.push(te);else if(te.type==="point")L.push(BT(te.clone(),m,b));else if(te.type==="multipoint"){const oe=te.clone();oe.points=oe.points.map(le=>BT(le,m,b)),L.push(oe)}else if(te.type==="extent"){const oe=te.clone()._normalize(!1,!1,h);L.push(oe.rings?new ua(oe):oe)}else if(te.extent){const oe=te.extent,le=Rc(oe.xmin,b)*(2*m);let ve=le===0?te.clone():BN(te.clone(),le);oe.offset(le,0),oe.intersects(I)&&oe.xmax!==m?(O=oe.xmax>O?oe.xmax:O,ve=UT(ve,f),R.push(ve),L.push("cut")):oe.intersects(A)&&oe.xmin!==b?(O=oe.xmax*(2*m)>O?oe.xmax*(2*m):O,ve=UT(ve,f,360),R.push(ve),L.push("cut")):L.push(ve)}else L.push(te.clone());else L.push(te);else L.push(te);let z=Rc(O,m),j=-90;const H=z,Y=new _n;for(;z>0;){const te=360*z-180;Y.addPath([[te,j],[te,-1*j]]),j*=-1,z--}if(R.length>0&&H>0){const te=xne(R,await yne(r,R,Y,i)),oe=[],le=[];for(let Fe=0;Fe<L.length;Fe++){const Pe=L[Fe];if(Pe!=="cut")le.push(Pe);else{const He=te.shift(),ze=t[Fe];ze!=null&&ze.type==="polygon"&&ze.rings&&ze.rings.length>1&&He.rings.length>=ze.rings.length?(oe.push(He),le.push("simplify")):le.push(f?ea(He):He)}}if(!oe.length)return le;const ve=await gne(r,oe,i),xe=[];for(let Fe=0;Fe<le.length;Fe++){const Pe=le[Fe];Pe!=="simplify"?xe.push(Pe):xe.push(f?ea(ve.shift()):ve.shift())}return xe}const X=[];for(let te=0;te<L.length;te++){const oe=L[te];if(oe!=="cut")X.push(oe);else{const le=R.shift();X.push(f===!0?ea(le):le)}}return X}function e5e(t,e){const i=fo(e);if(i){const[r,s]=i.valid,h=s-r;if(t<r)for(;t<r;)t+=h;if(t>s)for(;t>s;)t-=h}return t}function KN(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let s=0;s<r.length;s++)e[i][s]=KN(r[s])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var vu;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(vu||(vu={}));const HT=4294967296,Sne=new TextDecoder("utf-8"),Mne=ue("safari")||ue("ios")?6:ue("ff")?12:32;let sx=class Fv{constructor(e,i,r=0,s=e?e.byteLength:0){this._tag=0,this._dataType=vu.unknown,this._init(e,i,r,s)}_init(e,i,r,s){this._data=e,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new Fv(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*HT;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*HT;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,s){const h=this.getMessage(),f=e(h,i,r,s);return h.release(),f}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=Fv.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){Fv.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case vu.varint:this._decodeVarint();break;case vu.fixed64:this._skip(8);break;case vu.delimited:this._skip(this._getLength());break;case vu.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=e[i++],r|=127&s,(128&s)==0||(s=e[i++],r|=(127&s)<<7,(128&s)==0)||(s=e[i++],r|=(127&s)<<14,(128&s)==0)||(s=e[i++],r|=(127&s)<<21,(128&s)==0)||(s=e[i++],r+=268435456*(127&s),(128&s)==0)||(s=e[i++],r+=34359738368*(127&s),(128&s)==0)||(s=e[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=e[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=e[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=e[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let h=1;for(;i!==this._end&&(s=e[i],(128&s)!=0);)++i,r+=(127&s)*h,h*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*h}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,s=0;const h=1&e[i];if(this._end-i>=10)do{if(s=e[i++],r|=127&s,(128&s)==0||(s=e[i++],r|=(127&s)<<7,(128&s)==0)||(s=e[i++],r|=(127&s)<<14,(128&s)==0)||(s=e[i++],r|=(127&s)<<21,(128&s)==0)||(s=e[i++],r+=268435456*(127&s),(128&s)==0)||(s=e[i++],r+=34359738368*(127&s),(128&s)==0)||(s=e[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=e[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=e[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=e[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let f=1;for(;i!==this._end&&(s=e[i],(128&s)!=0);)++i,r+=(127&s)*f,f*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*f}return this._pos=i,h?-(r+1)/2:r/2}_getLength(){if(this._dataType!==vu.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Mne){const f=e.subarray(i,r);return Sne.decode(f)}let s="",h="";for(let f=i;f<r;++f){const m=e[f];128&m?h+="%"+m.toString(16):(s+=decodeURIComponent(h)+String.fromCharCode(m),h="")}return h.length&&(s+=decodeURIComponent(h)),s}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};sx.pool=new eh(sx,void 0,t=>{t._data=null,t._dataView=null});let vo=class Nv{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,s,h]=e,f=s-i,m=h-r;return new Nv([5],[i,r,f,0,0,m,-f,0,0,-m])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let h=0;h<s;h++)e(this.coords[2*(h+i)],this.coords[2*(h+i)+1]);i+=s}}clone(e){return e?(e.set(this.coords),new Nv(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new Nv(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Yu=class ZN{constructor(e=null,i={},r,s){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new ZN(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function $ne(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let t5e=class extends Yu{},YN=class XN{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new XN;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const QN=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let r5e=class{constructor(e){this._options=e,this.geometryTypes=QN,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new YN}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||ir(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=t0(this._options.sourceSpatialReference)/t0(e.spatialReference);if(i!==1)for(const r of e.features){if(!$ne(r))continue;const s=r.geometry.coords;for(let h=2;h<s.length;h+=3)s[h]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Yu}createSpatialReference(){return{wkid:0}}createGeometry(){return new vo}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new vo}};const WT=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],JT=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],KT=["upperLeft","lowerLeft"];function ZT(t){return t>=WT.length?null:WT[t]}function Tne(t){return t>=JT.length?null:JT[t]}function YT(t){return t>=KT.length?null:KT[t]}function XT(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Ine(t,e,i){const s=t.asUnsafe(),h=e.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const f=s.getUInt32(),m=s.pos()+f;let b=0;for(;s.pos()<m;)e.addCoordinatePoint(h,s.getSInt64(),b++);break}default:s.skip()}return h}function Ene(t,e,i){const h=t.asUnsafe(),f=e.createGeometry(i),m=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;h.next();)switch(h.tag()){case 2:{const b=h.getUInt32(),S=h.pos()+b;let I=0;for(;h.pos()<S;)e.addLength(f,h.getUInt32(),I++);break}case 3:{const b=h.getUInt32(),S=h.pos()+b;let I=0;for(e.allocateCoordinates(f);h.pos()<S;)e.addCoordinate(f,h.getSInt64(),I),I++,I===m&&(I=0);break}default:h.skip()}return f}function Ane(t){const s=t.asUnsafe(),h=new vo;let f="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const m=s.getUInt32(),b=s.pos()+m;for(;s.pos()<b;)h.lengths.push(s.getUInt32());break}case 3:{const m=s.getUInt32(),b=s.pos()+m;for(;s.pos()<b;)h.coords.push(s.getSInt64());break}case 1:f=QN[s.getEnum()];break;default:s.skip()}return{queryGeometry:h,queryGeometryType:f}}function Cne(t){const I=t.asUnsafe();for(;I.next();)switch(I.tag()){case 1:return I.getString();case 2:return I.getFloat();case 3:return I.getDouble();case 4:return I.getSInt32();case 5:return I.getUInt32();case 6:return I.getInt64();case 7:return I.getUInt64();case 8:return I.getSInt64();case 9:return I.getBool();default:return I.skip(),null}return null}function kne(t){const m=t.asUnsafe(),b={type:ZT(0)};for(;m.next();)switch(m.tag()){case 1:b.name=m.getString();break;case 2:b.type=ZT(m.getEnum());break;case 3:b.alias=m.getString();break;case 4:b.sqlType=Tne(m.getEnum());break;case 5:m.skip();break;case 6:b.defaultValue=m.getString();break;default:m.skip()}return b}function One(t){const r={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function Pne(t,e,i,r){const m=e.createFeature(i);let b=0;for(;t.next();)switch(t.tag()){case 1:{const S=r[b++].name;m.attributes[S]=t.processMessage(Cne);break}case 2:m.geometry=t.processMessageWithArgs(Ene,e,i);break;case 4:m.centroid=t.processMessageWithArgs(Ine,e,i);break;default:t.skip()}return m}function Rne(t){const h=[1,1,1,1],f=t.asUnsafe();for(;f.next();)switch(f.tag()){case 1:h[0]=f.getDouble();break;case 2:h[1]=f.getDouble();break;case 4:h[2]=f.getDouble();break;case 3:h[3]=f.getDouble();break;default:f.skip()}return h}function Fne(t){const h=[0,0,0,0],f=t.asUnsafe();for(;f.next();)switch(f.tag()){case 1:h[0]=f.getDouble();break;case 2:h[1]=f.getDouble();break;case 4:h[2]=f.getDouble();break;case 3:h[3]=f.getDouble();break;default:f.skip()}return h}function Nne(t){const s={originPosition:YT(0)},h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:s.originPosition=YT(h.getEnum());break;case 2:s.scale=h.processMessage(Rne);break;case 3:s.translate=h.processMessage(Fne);break;default:h.skip()}return s}function Lne(t){const s={},h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:s.shapeAreaFieldName=h.getString();break;case 2:s.shapeLengthFieldName=h.getString();break;case 3:s.units=h.getString();break;default:h.skip()}return s}function jne(t,e){const m=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:m.wkid=t.getUInt32();break;case 5:m.wkt=t.getString();break;case 2:m.latestWkid=t.getUInt32();break;case 3:m.vcsWkid=t.getUInt32();break;case 4:m.latestVcsWkid=t.getUInt32();break;default:t.skip()}return m}function Dne(t,e){const z=e.createFeatureResult(),j=t.asUnsafe();z.geometryType=XT(e,0);let H=!1;for(;j.next();)switch(j.tag()){case 1:z.objectIdFieldName=j.getString();break;case 3:z.globalIdFieldName=j.getString();break;case 4:z.geohashFieldName=j.getString();break;case 5:z.geometryProperties=j.processMessage(Lne);break;case 7:z.geometryType=XT(e,j.getEnum());break;case 8:z.spatialReference=j.processMessageWithArgs(jne,e);break;case 10:z.hasZ=j.getBool();break;case 11:z.hasM=j.getBool();break;case 12:z.transform=j.processMessage(Nne);break;case 9:{const Y=j.getBool();z.exceededTransferLimit=Y;break}case 13:e.addField(z,j.processMessage(kne));break;case 15:H||(e.prepareFeatures(z),H=!0),e.addFeature(z,j.processMessageWithArgs(Pne,e,z,z.fields));break;case 2:z.uniqueIdField=j.processMessage(One);break;default:j.skip()}return e.finishFeatureResult(z),z}function zne(t,e){const s={};let h=null;for(;t.next();)switch(t.tag()){case 4:h=t.processMessageWithArgs(Ane);break;case 1:s.featureResult=t.processMessageWithArgs(Dne,e);break;default:t.skip()}return h!=null&&s.featureResult&&e.addQueryGeometry(s,h),s}function Vne(t,e){try{const r=new sx(new Uint8Array(t),new DataView(t)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(zne,e):r.skip();return s}catch(i){throw new ne("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Gne(t,e){const i=Vne(t,e),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,h=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const f=r.objectIdFieldName;for(const m of r.features)m.attributes&&(m.objectId=m.attributes[f])}return r&&(r.queryGeometry=s,r.queryGeometryType=h),r}function ox(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=JR(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}const QT="Layer does not support extent calculation.";function qne(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Une(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let h,f,m;if(i!=null&&(f=i.spatialReference,m=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=C0(i),s.geometry=qne(i,t.compactGeometryEnabled),s.inSR=m),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),h=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,h=f),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&f!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&f.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const b=r.timeExtent,{start:S,end:I}=b;S==null&&I==null||(s.time=S===I?S:`${S??"null"},${I??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&f!=null&&h!=null&&f.equals(h)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function Bne(t,e,i,r){const s=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await vm(t,e,"json",r);return ox(e,i,s.data),s}async function s5e(t,e,i,r){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await Hne(t,e,r),h=s;return h.data=Gne(s.data,i),h}function Hne(t,e,i){return vm(t,e,"pbf",i)}function o5e(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):vm(t,e,"json",i,{returnIdsOnly:!0})}function a5e(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):vm(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function l5e(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):vm(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(QT);if(s.hasOwnProperty("count"))throw new Error(QT);return r})}function vm(t,e,i,r={},s={}){const h=typeof t=="string"?Jr(t):t,f=e.geometry?[e.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",JN(f,null,r).then(m=>{const b=m&&m[0];b!=null&&((e=e.clone()).geometry=b);const S=KN({...h.query,f:i,...s,...Une(e,s)});return wi(Kc(h.path,"query"),{...r,query:{...S,...r.query}})})}var ax;const lx=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let or=ax=class extends ye{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=Ye.fromJSON(e.spatialReference),r=[];for(let s=0;s<t.length;s++){const h=t[s],f=Mr.fromJSON(h),m=h.geometry&&h.geometry.spatialReference;f.geometry==null||m||(f.geometry.spatialReference=i);const b=h.aggregateGeometries,S=f.aggregateGeometries;if(b&&S!=null)for(const I in S){const A=S[I],O=b[I],R=O==null?void 0:O.spatialReference;A==null||R||(A.spatialReference=i)}r.push(f)}return r}writeGeometryType(t,e,i,r){if(t)return void lx.write(t,e,i,r);const{features:s}=this;if(s){for(const h of s)if(h&&h.geometry!=null)return void lx.write(h.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=an(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Ye.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new ax(this.cloneProperties())}cloneProperties(){return se({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t&&t[i];r.geometry=s&&s.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,h=S=>Math.round((S-r)/e),f=S=>Math.round((s-S)/i),m=this.features,b=this._getQuantizationFunction(this.geometryType,h,f);for(let S=0,I=m.length;S<I;S++)b!=null&&b(m[S].geometry)||(m.splice(S,1),S--,I--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[h,f]}=i,m=I=>I*h+r,b=I=>s-I*f,S=this._getHydrationFunction(t,m,b);for(const{geometry:I}of e)I!=null&&S&&S(I);return this.transform=null,this}_quantizePoints(t,e,i){let r,s;const h=[];for(let f=0,m=t.length;f<m;f++){const b=t[f];if(f>0){const S=e(b[0]),I=i(b[1]);S===r&&I===s||(h.push([S-r,I-s]),r=S,s=I)}else r=e(b[0]),s=i(b[1]),h.push([r,s])}return h.length>0?h:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=zc(r)?r.rings:r.paths,h=[];for(let f=0,m=s.length;f<m;f++){const b=s[f],S=this._quantizePoints(b,e,i);S&&h.push(S)}return h.length>0?(zc(r)?r.rings=h:r.paths=h,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i){return t==="point"?r=>{r.x=e(r.x),r.y=i(r.y)}:t==="polyline"||t==="polygon"?r=>{const s=zc(r)?r.rings:r.paths;let h,f;for(let m=0,b=s.length;m<b;m++){const S=s[m];for(let I=0,A=S.length;I<A;I++){const O=S[I];I>0?(h+=O[0],f+=O[1]):(h=O[0],f=O[1]),O[0]=e(h),O[1]=i(f)}}}:t==="extent"?r=>{r.xmin=e(r.xmin),r.ymin=i(r.ymin),r.xmax=e(r.xmax),r.ymax=i(r.ymax)}:t==="multipoint"?r=>{const s=r.points;let h,f;for(let m=0,b=s.length;m<b;m++){const S=s[m];m>0?(h+=S[0],f+=S[1]):(h=S[0],f=S[1]),S[0]=e(h),S[1]=i(f)}}:null}};v([x({type:String,json:{write:!0}})],or.prototype,"displayFieldName",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],or.prototype,"exceededTransferLimit",void 0),v([x({type:[Mr],json:{write:!0}})],or.prototype,"features",void 0),v([Me("features")],or.prototype,"readFeatures",null),v([x({type:[U7],json:{write:!0}})],or.prototype,"fields",void 0),v([x({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:lx.read}}})],or.prototype,"geometryType",void 0),v([Ee("geometryType")],or.prototype,"writeGeometryType",null),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],or.prototype,"hasM",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],or.prototype,"hasZ",void 0),v([x({types:fp,json:{write:!0}})],or.prototype,"queryGeometry",void 0),v([Me("queryGeometry")],or.prototype,"readQueryGeometry",null),v([x({type:Ye,json:{write:!0}})],or.prototype,"spatialReference",void 0),v([Ee("spatialReference")],or.prototype,"writeSpatialReference",null),v([x({json:{write:!0}})],or.prototype,"transform",void 0),or=ax=v([B("esri.rest.support.FeatureSet")],or),or.prototype.toJSON.isDefaultToJSON=!0;const H7=or,eI={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Wne={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Jne(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function Gc(t,e,i){const r=new Date(t.getTime());if(e&&i){const s=Wne[i],{getter:h,setter:f,multiplier:m}=s;if(i==="months"){const b=Jne(r.getFullYear(),r.getMonth()+e);r.getDate()>b&&r.setDate(b)}r[f](r[h]()+e*m)}return r}function tI(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function Kne(t,e,i){return t===0?0:t*eI[e]/eI[i]}var Hs;let jn=Hs=class extends ye{static get allTime(){return iI}static get empty(){return Zne}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(Hs.allTime)}get isEmpty(){return this.equals(Hs.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new Hs({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=t.start!=null?t.start.getTime():t.start,s=t.end!=null?t.end.getTime():t.end;return e===r&&i===s}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=Au(this.start,r=>tI(r,t)),i=Au(this.end,r=>{const s=tI(r,t);return r.getTime()===s.getTime()?s:Gc(s,1,t)});return new Hs({start:e,end:i})}intersection(t){var m,b,S,I;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Hs.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((b=this.end)==null?void 0:b.getTime())??1/0,r=((S=t.start)==null?void 0:S.getTime())??-1/0,s=((I=t.end)==null?void 0:I.getTime())??1/0;let h,f;if(r>=e&&r<=i?h=r:e>=r&&e<=s&&(h=e),i>=r&&i<=s?f=i:s>=e&&s<=i&&(f=s),h!=null&&f!=null&&!isNaN(h)&&!isNaN(f)){const A=new Hs;return A.start=h===-1/0?null:new Date(h),A.end=f===1/0?null:new Date(f),A}return Hs.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Hs,{start:r,end:s}=this;return r!=null&&(i.start=Gc(r,t,e)),s!=null&&(i.end=Gc(s,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return iI.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Hs({start:e,end:i})}};v([x({type:Date,json:{write:{allowNull:!0}}})],jn.prototype,"end",void 0),v([Me("end")],jn.prototype,"readEnd",null),v([Ee("end")],jn.prototype,"writeEnd",null),v([x({readOnly:!0,json:{read:!1}})],jn.prototype,"isAllTime",null),v([x({readOnly:!0,json:{read:!1}})],jn.prototype,"isEmpty",null),v([x({type:Date,json:{write:{allowNull:!0}}})],jn.prototype,"start",void 0),v([Me("start")],jn.prototype,"readStart",null),v([Ee("start")],jn.prototype,"writeStart",null),jn=Hs=v([B("esri.TimeExtent")],jn);const iI=new jn,Zne=new jn({start:void 0,end:void 0}),fa=jn;let Bh=class extends ti(ye){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};v([x({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Bh.prototype,"onFields",void 0),v([x({type:String,json:{write:!0}})],Bh.prototype,"operator",void 0),v([x({type:String,json:{write:!0}})],Bh.prototype,"searchTerm",void 0),v([x({type:String,json:{write:!0}})],Bh.prototype,"searchType",void 0),Bh=v([B("esri.rest.support.FullTextSearch")],Bh);const Yne=Bh;var ux;const rI=new tt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Hh=ux=class extends ye{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new ux(se({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};v([x({type:At,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hh.prototype,"extent",void 0),v([x({type:["view","edit"],json:{write:!0}})],Hh.prototype,"mode",void 0),v([x({type:String,json:{read:rI.read,write:rI.write}})],Hh.prototype,"originPosition",void 0),v([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hh.prototype,"tolerance",void 0),Hh=ux=v([B("esri.rest.support.QuantizationParameters")],Hh);const eL=Hh;var hx;const nI=new tt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ws=hx=class extends ye{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=se(t))}clone(){return new hx({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:se(this.statisticParameters)})}};v([x({type:Number,json:{write:!0}})],Ws.prototype,"maxPointCount",void 0),v([x({type:Number,json:{write:!0}})],Ws.prototype,"maxRecordCount",void 0),v([x({type:Number,json:{write:!0}})],Ws.prototype,"maxVertexCount",void 0),v([x({type:String,json:{write:!0}})],Ws.prototype,"onStatisticField",void 0),v([x({type:String,json:{write:!0}})],Ws.prototype,"outStatisticFieldName",void 0),v([x({type:String,json:{read:{source:"statisticType",reader:nI.read},write:{target:"statisticType",writer:nI.write}}})],Ws.prototype,"statisticType",void 0),v([x({type:Object})],Ws.prototype,"statisticParameters",void 0),v([Ee("statisticParameters")],Ws.prototype,"writeStatisticParameters",null),Ws=hx=v([B("esri.rest.support.StatisticDefinition")],Ws);const tL=Ws;var Hd;const Xne=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Qne=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ue=Hd=class extends ye{static from(t){return Yw(Hd,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const s=t[r];Array.isArray(s)?i[r]=s.map(h=>h instanceof Date?h.getTime():h):s instanceof Date?i[r]=s.getTime():i[r]=s}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new Hd(se({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ue.MAX_MAX_RECORD_COUNT_FACTOR=5,v([x({json:{write:!0}})],Ue.prototype,"aggregateIds",void 0),v([x({type:Boolean,json:{write:!0}})],Ue.prototype,"cacheHint",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"compactGeometryEnabled",void 0),v([x({json:{write:!0}})],Ue.prototype,"datumTransformation",void 0),v([vt("datumTransformation")],Ue.prototype,"castDatumTransformation",null),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"defaultSpatialReferenceEnabled",void 0),v([x({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ue.prototype,"distance",void 0),v([x({type:oo,json:{write:!0}})],Ue.prototype,"dynamicDataSource",void 0),v([x({type:String,json:{write:!0}})],Ue.prototype,"formatOf3DObjects",void 0),v([x({type:[Yne],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ue.prototype,"fullText",void 0),v([x({type:String,json:{write:!0}})],Ue.prototype,"gdbVersion",void 0),v([x({types:fp,json:{read:an,write:!0}})],Ue.prototype,"geometry",void 0),v([x({type:Number,json:{write:!0}})],Ue.prototype,"geometryPrecision",void 0),v([x({type:[String],json:{write:!0}})],Ue.prototype,"groupByFieldsForStatistics",void 0),v([x({type:String,json:{write:!0}})],Ue.prototype,"having",void 0),v([x({type:Date})],Ue.prototype,"historicMoment",void 0),v([Ee("historicMoment")],Ue.prototype,"writeHistoricMoment",null),v([x({type:Number,json:{write:!0}})],Ue.prototype,"maxAllowableOffset",void 0),v([x({type:Number,cast:t=>t<1?1:t>Hd.MAX_MAX_RECORD_COUNT_FACTOR?Hd.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ue.prototype,"maxRecordCountFactor",void 0),v([x({type:["xyFootprint"],json:{write:!0}})],Ue.prototype,"multipatchOption",void 0),v([x({type:Number,json:{read:{source:"resultRecordCount"}}})],Ue.prototype,"num",void 0),v([x({json:{write:!0}})],Ue.prototype,"objectIds",void 0),v([x({type:[String],json:{write:!0}})],Ue.prototype,"orderByFields",void 0),v([x({type:[String],json:{write:!0}})],Ue.prototype,"outFields",void 0),v([x({type:Ye,json:{name:"outSR",write:!0}})],Ue.prototype,"outSpatialReference",void 0),v([x({type:[tL],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ue.prototype,"outStatistics",void 0),v([x({json:{write:!0}})],Ue.prototype,"parameterValues",void 0),v([Ee("parameterValues")],Ue.prototype,"writeParameterValues",null),v([x({type:ke,json:{write:!0}})],Ue.prototype,"pixelSize",void 0),v([x({type:eL,json:{write:!0}})],Ue.prototype,"quantizationParameters",void 0),v([x({type:[Object],json:{write:!0}})],Ue.prototype,"rangeValues",void 0),v([x({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ue.prototype,"relationParameter",void 0),v([x({type:String,json:{write:!0}})],Ue.prototype,"resultType",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnCentroid",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnDistinctValues",void 0),v([x({type:Boolean,json:{default:!0,write:!0}})],Ue.prototype,"returnExceededLimitFeatures",void 0),v([x({type:Boolean,json:{write:!0}})],Ue.prototype,"returnGeometry",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnQueryGeometry",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnM",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ue.prototype,"returnZ",void 0),v([x({type:Ye,json:{write:!0}})],Ue.prototype,"sourceSpatialReference",void 0),v([Le(Xne,{ignoreUnknown:!1,name:"spatialRel"})],Ue.prototype,"spatialRelationship",void 0),v([x({type:Number,json:{read:{source:"resultOffset"}}})],Ue.prototype,"start",void 0),v([Ee("start"),Ee("num")],Ue.prototype,"writeStart",null),v([x({type:String,json:{write:!0}})],Ue.prototype,"sqlFormat",void 0),v([x({type:String,json:{write:!0}})],Ue.prototype,"text",void 0),v([x({type:fa,json:{write:!0}})],Ue.prototype,"timeExtent",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"timeReferenceUnknownClient",void 0),v([Le(Qne,{ignoreUnknown:!1}),x({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ue.prototype,"units",void 0),v([x({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ue.prototype,"where",void 0),v([Ee("where")],Ue.prototype,"writeWhere",null),Ue=Hd=v([B("esri.rest.support.Query")],Ue);const ia=Ue;async function a_(t,e,i){const r=await ese(t,e,i);return H7.fromJSON(r)}async function ese(t,e,i){const r=B7(t),s={...i},h=ia.from(e),{data:f}=await Bne(r,h,h.sourceSpatialReference,s);return f}function Tr(t,e){return t?e?4:3:e?3:2}const D0=fe.getLogger("esri.layers.graphics.featureConversionUtils"),iL={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},tse=(t,e,i,r,s,h)=>{t[i]=s,t[i+1]=h},sI=(t,e,i,r,s,h)=>{t[i]=s,t[i+1]=h,t[i+2]=e[r+2]},ise=(t,e,i,r,s,h)=>{t[i]=s,t[i+1]=h,t[i+2]=e[r+3]},rse=(t,e,i,r,s,h)=>{t[i]=s,t[i+1]=h,t[i+2]=e[r+2],t[i+3]=e[r+3]};function W7(t,e,i,r){if(t){if(i)return e&&r?rse:sI;if(e&&r)return ise}else if(e&&r)return sI;return tse}function l_({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function u_({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function h_({scale:t,translate:e},i,r){return i*t[r]+e[r]}function h5e(t,e,i){return t?e?i?Z7(t):J7(t):i?K7(t):Ab(t):null}function Ab(t){const e=t.coords;return{x:e[0],y:e[1]}}function rL(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function J7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function nse(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function K7(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function sse(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function Z7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function ose(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function ase(t,e,i,r){let s=Ab;i&&r?s=Z7:i?s=J7:r&&(s=K7);for(const h of e){const{geometry:f,attributes:m}=h,b=f!=null?s(f):null;t.push({attributes:m,geometry:b})}return t}function Y7(t,e){return t&&e?ose:t?nse:e?sse:rL}function nL(t,e,i,r,s){const h=Y7(i,r);for(const{geometry:f,attributes:m}of e){const b=f!=null?h(new vo,f):null;t.push(new Yu(b,m,null,s?m[s]:void 0))}return t}function c5e(t,e,i=Y7(e.z!=null,e.m!=null)){return i(t,e)}function lse(t,e,i,r){for(const{geometry:s,attributes:h}of e)t.push({attributes:h,geometry:s!=null?sL(s,i,r):null});return t}function sL(t,e,i){if(t==null)return null;const r=Tr(e,i),s=[];for(let h=0;h<t.coords.length;h+=r){const f=[];for(let m=0;m<r;m++)f.push(t.coords[h+m]);s.push(f)}return e?i?{points:s,hasZ:e,hasM:i}:{points:s,hasZ:e}:i?{points:s,hasM:i}:{points:s}}function oL(t,e,i,r,s){const h=Tr(i,r);for(const{geometry:f,attributes:m}of e){const b=f!=null?aL(new vo,f,h):null;t.push(new Yu(b,m,null,s?m[s]:void 0))}return t}function aL(t,e,i=Tr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let s=0;for(const h of e.points)for(let f=0;f<i;f++)r[s++]=h[f];return t}function use(t,e,i,r){for(const{geometry:s,attributes:h}of e)t.push({attributes:h,geometry:s!=null?lL(s,i,r):null});return t}function lL(t,e,i){if(!t)return null;const r=Tr(e,i),{coords:s,lengths:h}=t,f=[];let m=0;for(const b of h){const S=[];for(let I=0;I<b;I++){const A=[];for(let O=0;O<r;O++)A.push(s[m++]);S.push(A)}f.push(S)}return e?i?{paths:f,hasZ:e,hasM:i}:{paths:f,hasZ:e}:i?{paths:f,hasM:i}:{paths:f}}function uL(t,e,i,r,s){const h=Tr(i,r);for(const{geometry:f,attributes:m}of e){const b=f!=null?hL(new vo,f,h):null;t.push(new Yu(b,m,null,s?m[s]:void 0))}return t}function hL(t,e,i=Tr(e.hasZ,e.hasM)){const{lengths:r,coords:s}=t;let h=0;for(const f of e.paths){for(const m of f)for(let b=0;b<i;b++)s[h++]=m[b];r.push(f.length)}return t}function hse(t,e,i,r){for(const{geometry:s,attributes:h,centroid:f}of e){const m=s!=null?cL(s,i,r):null;if(f!=null){const b=Ab(f);t.push({attributes:h,centroid:b,geometry:m})}else t.push({attributes:h,geometry:m})}return t}function cL(t,e,i){if(!t)return null;const r=Tr(e,i),{coords:s,lengths:h}=t,f=[];let m=0;for(const b of h){const S=[];for(let I=0;I<b;I++){const A=[];for(let O=0;O<r;O++)A.push(s[m++]);S.push(A)}f.push(S)}return e?i?{rings:f,hasZ:e,hasM:i}:{rings:f,hasZ:e}:i?{rings:f,hasM:i}:{rings:f}}function pL(t,e,i,r,s){for(const{geometry:h,centroid:f,attributes:m}of e){const b=h!=null?dL(new vo,h,i,r):null,S=s?m[s]:void 0;f!=null?t.push(new Yu(b,m,rL(new vo,f),S)):t.push(new Yu(b,m,null,S))}return t}function dL(t,e,i=e.hasZ,r=e.hasM){return cse(t,e.rings,i,r)}function cse(t,e,i,r){const s=Tr(i,r),{lengths:h,coords:f}=t;let m=0;tl(t);for(const b of e){for(const S of b)for(let I=0;I<s;I++)f[m++]=S[I];h.push(b.length)}return t}const Wd=[],Z1=[];function p5e(t,e,i,r,s){Wd[0]=t;const[h]=fL(Z1,Wd,e,i,r,s);return wo(Wd),wo(Z1),h}function fL(t,e,i,r,s,h){if(wo(t),!i){for(const f of e){const m=h?f.attributes[h]:void 0;t.push(new Yu(null,f.attributes,null,m))}return t}switch(i){case"esriGeometryPoint":return nL(t,e,r,s,h);case"esriGeometryMultipoint":return oL(t,e,r,s,h);case"esriGeometryPolyline":return uL(t,e,r,s,h);case"esriGeometryPolygon":return pL(t,e,r,s,h);default:D0.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`)),wo(t)}return t}function d5e(t,e,i,r,s,h){const f=t.length;switch(i){case"esriGeometryPoint":nL(t,e,r,s,h);break;case"esriGeometryMultipoint":oL(t,e,r,s,h);break;case"esriGeometryPolyline":uL(t,e,r,s,h);break;case"esriGeometryPolygon":pL(t,e,r,s,h);break;default:D0.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}for(let m=0;m<e.length;m++)t[m+f].geometryType=i,t[m+f].insertAfter=e[m].insertAfter,t[m+f].groupId=e[m].groupId;return t}function f5e(t,e,i,r){Z1[0]=t,yL(Wd,Z1,e,i,r);const s=Wd[0];return wo(Wd),wo(Z1),s}function y5e(t,e,i){if(t==null)return null;const r=new vo;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),KS(t)?Y7(e??t.z!=null,i??t.m!=null)(r,t):zc(t)?dL(r,t,e,i):ZS(t)?hL(r,t,Tr(e,i)):JS(t)?aL(r,t,Tr(e,i)):void D0.error("convertFromGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${t}'`))}function pse(t,e,i,r){const s=t&&("coords"in t?t:t.geometry);if(s==null)return null;switch(e){case"esriGeometryPoint":{let h=Ab;return i&&r?h=Z7:i?h=J7:r&&(h=K7),h(s)}case"esriGeometryMultipoint":return sL(s,i,r);case"esriGeometryPolyline":return lL(s,i,r);case"esriGeometryPolygon":return cL(s,i,r);default:return D0.error("convertToGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${e}'`)),null}}function dse(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function yL(t,e,i,r,s){if(wo(t),i==null)return dse(t,e);switch(i){case"esriGeometryPoint":return ase(t,e,r,s);case"esriGeometryMultipoint":return lse(t,e,r,s);case"esriGeometryPolyline":return use(t,e,r,s);case"esriGeometryPolygon":return hse(t,e,r,s);default:D0.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}return t}function m5e(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:s,hasM:h,hasZ:f,features:m,geometryType:b,exceededTransferLimit:S,uniqueIdField:I,queryGeometry:A,queryGeometryType:O}=t,R={features:yL([],m,b,f,h),fields:s,geometryType:b,objectIdFieldName:e,spatialReference:i,uniqueIdField:I,queryGeometry:pse(A,O,!1,!1)};return r&&(R.transform=r),S&&(R.exceededTransferLimit=S),h&&(R.hasM=h),f&&(R.hasZ=f),R}function g5e(t,e){const i=new YN,{hasM:r,hasZ:s,features:h,objectIdFieldName:f,spatialReference:m,geometryType:b,exceededTransferLimit:S,transform:I,fields:A}=t;return A&&(i.fields=A),i.geometryType=b??null,i.objectIdFieldName=f??e??null,i.spatialReference=m??null,i.objectIdFieldName?(h&&fL(i.features,h,b,s,r,i.objectIdFieldName),S&&(i.exceededTransferLimit=S),r&&(i.hasM=r),s&&(i.hasZ=s),I&&(i.transform=I),i):(D0.error(new ne("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function v5e(t){const{transform:e,features:i,hasM:r,hasZ:s}=t;if(!e)return t;for(const h of i)h.geometry!=null&&aI(h.geometry,h.geometry,r,s,e),h.centroid!=null&&aI(h.centroid,h.centroid,r,s,e);return t.transform=null,t}function w5e(t,e){const{geometryType:i,features:r,hasM:s,hasZ:h}=e;if(!t)return e;for(let f=0;f<r.length;f++){const m=r[f],b=m.weakClone();b.geometry=new vo,oI(b.geometry,m.geometry,s,h,i,t),m.centroid&&(b.centroid=new vo,oI(b.centroid,m.centroid,s,h,"esriGeometryPoint",t)),r[f]=b}return e.transform=t,e}function oI(t,e,i,r,s,h,f=i,m=r){if(tl(t),e==null||!e.coords.length)return null;const b=iL[s],{coords:S,lengths:I}=e,A=Tr(i,r),O=Tr(i&&f,r&&m),R=W7(i,r,f,m);if(!I.length)return R(t.coords,S,0,0,l_(h,S[0]),u_(h,S[1])),tl(t,A,0),t;let L,z,j,H,Y=0,X=0,te=X;for(const oe of I){if(oe<b)continue;let le=0;X=te,j=L=l_(h,S[Y]),H=z=u_(h,S[Y+1]),R(t.coords,S,X,Y,j,H),le++,Y+=A,X+=O;for(let ve=1;ve<oe;ve++,Y+=A)j=l_(h,S[Y]),H=u_(h,S[Y+1]),j===L&&H===z||(R(t.coords,S,X,Y,j-L,H-z),X+=O,le++,L=j,z=H);le>=b&&(t.lengths.push(le),te=X)}return wo(t.coords,te),t.coords.length?t:null}function b5e(t,e,i,r,s,h,f=i,m=r){if(tl(t),!e||!e.coords.length)return null;const b=iL[s],{coords:S,lengths:I}=e,A=Tr(i,r),O=Tr(i&&f,r&&m),R=W7(i,r,f,m);if(!I.length)return R(t.coords,S,0,0,S[0],S[1]),tl(t,A,0),t;let L=0;const z=h*h;for(const j of I){if(j<b){L+=j*A;continue}const H=t.coords.length/O,Y=L,X=L+(j-1)*A;R(t.coords,S,t.coords.length,Y,S[Y],S[Y+1]),cx(t.coords,S,A,z,R,Y,X),R(t.coords,S,t.coords.length,X,S[X],S[X+1]);const te=t.coords.length/O-H;te>=b?t.lengths.push(te):wo(t.coords,H*O),L+=j*A}return t.coords.length?t:null}function fse(t,e,i,r){const s=t[e],h=t[e+1],f=t[i],m=t[i+1],b=t[r],S=t[r+1];let I=f,A=m,O=b-I,R=S-A;if(O!==0||R!==0){const L=((s-I)*O+(h-A)*R)/(O*O+R*R);L>1?(I=b,A=S):L>0&&(I+=O*L,A+=R*L)}return O=s-I,R=h-A,O*O+R*R}function cx(t,e,i,r,s,h,f){let m,b=r,S=0;for(let I=h+i;I<f;I+=i)m=fse(e,I,h,f),m>b&&(S=I,b=m);b>r&&(S-h>i&&cx(t,e,i,r,s,h,S),s(t,e,t.length,S,e[S],e[S+1]),f-S>i&&cx(t,e,i,r,s,S,f))}function _5e(t,e,i,r){if(e==null||!e.coords||!e.coords.length)return null;const s=Tr(i,r);let h=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,b=Number.NEGATIVE_INFINITY;if(e&&e.coords){const S=e.coords;for(let I=0;I<S.length;I+=s){const A=S[I],O=S[I+1];h=Math.min(h,A),m=Math.max(m,A),f=Math.min(f,O),b=Math.max(b,O)}}return U5(t)?kZ(t,h,f,m,b):JJ(h,f,m,b,t),t}function aI(t,e,i,r,s){const{coords:h,lengths:f}=e,m=Tr(i,r);if(!h.length)return t!==e&&tl(t),t;jw(s);const{originPosition:b,scale:S,translate:I}=s,A=mse;A.originPosition=b;const O=A.scale;O[0]=S[0]??1,O[1]=-(S[1]??1),O[2]=S[2]??1,O[3]=S[3]??1;const R=A.translate;if(R[0]=I[0]??0,R[1]=I[1]??0,R[2]=I[2]??0,R[3]=I[3]??0,!f.length){for(let z=0;z<m;++z)t.coords[z]=h_(A,h[z],z);return t!==e&&tl(t,m,0),t}let L=0;for(let z=0;z<f.length;z++){const j=f[z];t.lengths[z]=j;for(let X=0;X<m;++X)t.coords[L+X]=h_(A,h[L+X],X);let H=t.coords[L],Y=t.coords[L+1];L+=m;for(let X=1;X<j;X++,L+=m){H+=h[L]*O[0],Y+=h[L+1]*O[1],t.coords[L]=H,t.coords[L+1]=Y;for(let te=2;te<m;++te)t.coords[L+te]=h_(A,h[L+te],te)}}return t!==e&&tl(t,h.length,f.length),t}function x5e(t,e,i,r,s,h){if(tl(t),t.lengths.push(...e.lengths),i===s&&r===h)for(let f=0;f<e.coords.length;f++)t.coords.push(e.coords[f]);else{const f=Tr(i,r),m=W7(i,r,s,h),b=e.coords;for(let S=0;S<b.length;S+=f)m(t.coords,b,t.coords.length,S,b[S],b[S+1])}return t}function yse(t,e,i,r){let s=0,h=t[r*e],f=t[r*(e+1)];for(let m=1;m<i;m++){const b=h+t[r*(e+m)],S=f+t[r*(e+m)+1],I=(b-h)*(S+f);h=b,f=S,s+=I}return .5*s}function S5e(t,e){const{coords:i,lengths:r}=t;let s=0,h=0;for(let f=0;f<r.length;f++){const m=r[f];h+=yse(i,s,m,e),s+=m}return Math.abs(h)}function M5e(t,e){if(t==null)return null;const i=t.clone(),r=t.coords,s=t.lengths;let h=0;for(let f=0;f<s.length;f++){const m=s[f];let b=r[e*h],S=r[e*h+1];for(let I=1;I<m;I++){const A=b+r[e*(h+I)],O=S+r[e*(h+I)+1];i.coords[e*(h+I)]=A,i.coords[e*(h+I)+1]=O,b=A,S=O}h+=m}return i}function tl(t,e=0,i=0){wo(t.lengths,i),wo(t.coords,e)}function wo(t,e=0){t.length!==e&&(t.length=e)}const mse={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var px;let yi=px=class extends ye{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new px(se({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};v([x({type:Boolean,json:{write:!0}})],yi.prototype,"cacheHint",void 0),v([x({type:oo,json:{write:!0}})],yi.prototype,"dynamicDataSource",void 0),v([x({type:String,json:{write:!0}})],yi.prototype,"gdbVersion",void 0),v([x({type:Number,json:{write:!0}})],yi.prototype,"geometryPrecision",void 0),v([x({type:Date})],yi.prototype,"historicMoment",void 0),v([Ee("historicMoment")],yi.prototype,"_writeHistoricMoment",null),v([x({type:Number,json:{write:!0}})],yi.prototype,"maxAllowableOffset",void 0),v([x({type:[Number],json:{write:!0}})],yi.prototype,"objectIds",void 0),v([x({type:[String],json:{write:!0}})],yi.prototype,"orderByFields",void 0),v([x({type:[String],json:{write:!0}})],yi.prototype,"outFields",void 0),v([x({type:Ye,json:{read:{source:"outSR"},write:{target:"outSR"}}})],yi.prototype,"outSpatialReference",void 0),v([x({json:{write:!0}})],yi.prototype,"relationshipId",void 0),v([x({type:Number,json:{read:{source:"resultOffset"}}})],yi.prototype,"start",void 0),v([Ee("start"),Ee("num")],yi.prototype,"writeStart",null),v([x({type:Number,json:{read:{source:"resultRecordCount"}}})],yi.prototype,"num",void 0),v([x({json:{write:!0}})],yi.prototype,"returnGeometry",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],yi.prototype,"returnM",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],yi.prototype,"returnZ",void 0),v([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],yi.prototype,"where",void 0),yi=px=v([B("esri.rest.support.RelationshipQuery")],yi),yi.from=ei(yi);const d0=yi,$5e=Object.freeze(Object.defineProperty({__proto__:null,default:d0},Symbol.toStringTag,{value:"Module"}));var dx;let ad=dx=class extends ye{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new dx({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};v([x({type:[String],json:{write:!0}})],ad.prototype,"groupByFields",void 0),v([x({type:Number,json:{write:!0}})],ad.prototype,"topCount",void 0),v([x({type:[String],json:{write:!0}})],ad.prototype,"orderByFields",void 0),ad=dx=v([B("esri.rest.support.TopFilter")],ad);const gse=ad;var fx;const lI=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),uI=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ni=fx=class extends ye{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new fx(se({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};v([x({type:Boolean,json:{write:!0}})],ni.prototype,"cacheHint",void 0),v([x({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],ni.prototype,"distance",void 0),v([x({types:fp,json:{read:an,write:!0}})],ni.prototype,"geometry",void 0),v([x({type:Number,json:{write:!0}})],ni.prototype,"geometryPrecision",void 0),v([x({type:Number,json:{write:!0}})],ni.prototype,"maxAllowableOffset",void 0),v([x({type:Number,json:{read:{source:"resultRecordCount"}}})],ni.prototype,"num",void 0),v([x({json:{write:!0}})],ni.prototype,"objectIds",void 0),v([x({type:[String],json:{write:!0}})],ni.prototype,"orderByFields",void 0),v([x({type:[String],json:{write:!0}})],ni.prototype,"outFields",void 0),v([x({type:Ye,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ni.prototype,"outSpatialReference",void 0),v([x({type:String,json:{write:!0}})],ni.prototype,"resultType",void 0),v([x({json:{write:!0}})],ni.prototype,"returnGeometry",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ni.prototype,"returnM",void 0),v([x({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ni.prototype,"returnZ",void 0),v([x({type:Number,json:{read:{source:"resultOffset"}}})],ni.prototype,"start",void 0),v([Ee("start"),Ee("num")],ni.prototype,"writeStart",null),v([x({type:String,json:{read:{source:"spatialRel",reader:lI.read},write:{target:"spatialRel",writer:lI.write}}})],ni.prototype,"spatialRelationship",void 0),v([x({type:fa,json:{write:!0}})],ni.prototype,"timeExtent",void 0),v([x({type:gse,json:{write:!0}})],ni.prototype,"topFilter",void 0),v([x({type:String,json:{read:uI.read,write:{writer:uI.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],ni.prototype,"units",void 0),v([x({type:String,json:{write:!0}})],ni.prototype,"where",void 0),ni=fx=v([B("esri.rest.support.TopFeaturesQuery")],ni),ni.from=ei(ni);const hg=ni,vse="esri.widgets.Feature.support.relatedFeatureUtils",hI=fe.getLogger(vse),cI=new Map;function Lv(t){if(!Ya(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function wse(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(s=>s.id===parseInt(t,10)&&(i=s,!0)),i}function bse({originRelationship:t,relationships:e,layerId:i}){let r=null;return e&&e.some(s=>(`${s.relatedTableId}`===i&&s.id===(t==null?void 0:t.id)&&(r=s),!!r)),r}function _se(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function xse(t,e){const i=wse(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function Sse(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,s=i&&i.value;e.relatedFeatures=s?s.features:[];const h=r&&r.value;e.relatedStatsFeatures=h?h.features:[]}function Mse(t,e,i,r){var h;const s=new d0;return s.outFields=["*"],s.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),s.objectIds=[t.attributes[i.objectIdField]],((h=i.queryRelatedFeatures)==null?void 0:h.call(i,s,r))??Promise.resolve({})}function $se(t,e,i){let r=0;const s=[];for(;r<e.length;)s.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function Tse(t,e,i,r){const s=i.layerId.toString(),{layerInfo:h,relation:f,relatedFields:m,outStatistics:b,url:S,sourceSpatialReference:I}=e;if(!h||!f)return null;const A=bse({originRelationship:f,relationships:h.relationships,layerId:s});if(A!=null&&A.relationshipTableId&&A.keyFieldInRelationshipTable){const R=(await Mse(t,A,i,r))[t.attributes[i.objectIdField]];if(!R)return null;const L=R.features.map(z=>z.attributes[h.objectIdField]);if(b!=null&&b.length&&h.supportsStatistics){const z=new ia;z.where=$se(h.objectIdField,L,1e3),z.outFields=m,z.outStatistics=b,z.sourceSpatialReference=I;const j={features:Promise.resolve(R),statsFeatures:a_(S,z)};return sn(j)}}const O=A==null?void 0:A.keyField;if(O){const R=e7(kse(h.fields,O)),L=_se(t.attributes,f.keyField),z=R?`${O}=${L}`:`${O}='${L}'`,j=a_(S,new ia({where:z,outFields:e.relatedFields,sourceSpatialReference:I}),r),H=e.outStatistics&&e.outStatistics.length>0&&h.supportsStatistics?a_(S,new ia({where:z,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:I}),r):null,Y={features:j};return H&&(Y.statsFeatures=H),sn(Y)}return null}function Ise(t,e){return wi(t,{query:{f:"json"},signal:e&&e.signal})}function Ese({relatedInfos:t,layer:e},i){const r={};return t.forEach((s,h)=>{const{relation:f}=s;if(!f){const A=new ne("relation-required","A relation is required on a layer to retrieve related records.");throw hI.error(A),A}const{relatedTableId:m}=f;if(typeof m!="number"){const A=new ne("A related table ID is required on a layer to retrieve related records.");throw hI.error(A),A}const b=`${e.url}/${m}`,S=cI.get(b),I=S??Ise(b,i);S||cI.set(b,I),r[h]=I}),ik(sn(r),i)}function Ase({graphic:t,relatedInfos:e,layer:i},r){const s={};return e.forEach((h,f)=>{h.layerInfo&&(s[f]=Tse(t,h,i,r))}),sn(s)}function Cse({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,s;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const h=new tL({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(s=t.outStatistics)==null||s.push(h)}}function kse(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const pI={chartAnimation:!0};let Di=class extends Oe{constructor(e){super(e),this.abilities={...pI},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...pI,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},s=this.formattedAttributes??{},h=this.expressionAttributes??{},f=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(m=>{const b=m==null?void 0:m.clone();if(!b)return null;if(b.title=Pc({attributes:r,fieldInfoMap:f,globalAttributes:s,expressionAttributes:h,layer:i,text:b.title}),b.caption=Pc({attributes:r,fieldInfoMap:f,globalAttributes:s,expressionAttributes:h,layer:i,text:b.caption}),b.altText=Pc({attributes:r,fieldInfoMap:f,globalAttributes:s,expressionAttributes:h,layer:i,text:b.altText}),b.type==="image"){const{value:S}=b;return this._setImageValue({value:S,formattedAttributes:s,layer:i}),b.value.sourceURL?b:void 0}if(b.type==="pie-chart"||b.type==="line-chart"||b.type==="column-chart"||b.type==="bar-chart"){const{value:S}=b;return this._setChartValue({value:S,chartType:b.type,attributes:r,formattedAttributes:s,layer:i,expressionAttributes:h}),b}return null}).filter(Zn))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:s,layer:h}=e,{linkURL:f,sourceURL:m}=r;if(m){const b=G4(m,h);r.sourceURL=V4({formattedAttributes:s,template:b,fieldInfoMap:i})}if(f){const b=G4(f,h);r.linkURL=V4({formattedAttributes:s,template:b,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:s,chartType:h,layer:f,expressionAttributes:m}=e,{popupTemplate:b,relatedInfos:S}=this,{fields:I,normalizeField:A}=i,O=f;if(i.fields=pie(I,O),A&&(i.normalizeField=Ny(A,O)),!I.some(L=>!!(s[L]!=null||Ya(L)&&(S!=null&&S.size))))return;const R=(b==null?void 0:b.fieldInfos)??[];I.forEach(L=>{if(Ya(L))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:R,fieldName:L,formattedAttributes:s,chartType:h,value:i})]);const z=this._getChartOption({value:i,attributes:r,chartType:h,formattedAttributes:s,expressionAttributes:m,fieldName:L,fieldInfos:R});i.series.push(z)})}_getRelatedChartInfos(e){var R;const{fieldInfos:i,fieldName:r,formattedAttributes:s,chartType:h,value:f}=e,m=[],b=Lv(r),S=b&&((R=this.relatedInfos)==null?void 0:R.get(b.layerId.toString()));if(!S)return m;const{relatedFeatures:I,relation:A}=S;if(!A||!I)return m;const{cardinality:O}=A;return I.forEach(L=>{const{attributes:z}=L;z&&Object.keys(z).forEach(j=>{j===b.fieldName&&m.push(this._getChartOption({value:f,attributes:z,formattedAttributes:s,fieldName:r,chartType:h,relatedFieldName:j,hasMultipleRelatedFeatures:(I==null?void 0:I.length)>1,fieldInfos:i}))})}),O==="one-to-many"||O==="many-to-many"?m:[m[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var le;const{value:i,attributes:r,formattedAttributes:s,expressionAttributes:h,fieldName:f,relatedFieldName:m,fieldInfos:b,chartType:S,hasMultipleRelatedFeatures:I}=e,A=this.layer,O=this.fieldInfoMap??new Map,{normalizeField:R,tooltipField:L}=i,z=R?Ya(R)?r[Lv(R).fieldName]:r[R]:null,j=O7(f)&&h&&h[f]!==void 0?h[f]:m&&r[m]!==void 0?r[m]:r[f]!==void 0?r[f]:s[f],H=new LP({fieldName:f,value:j===void 0?null:j&&z?j/z:j});if(Ya(f)){const ve=O.get(f.toLowerCase()),xe=L&&O.get(L.toLowerCase()),Fe=(ve==null?void 0:ve.fieldName)??f,Pe=I&&L?Lv(L).fieldName:(xe==null?void 0:xe.fieldName)??L,He=I&&Pe?r[Pe]:s[Pe]??(ve==null?void 0:ve.label)??(ve==null?void 0:ve.fieldName)??m,ze=I&&m?r[m]:s[Fe];return H.tooltip=this._getTooltip({label:He,value:ze,chartType:S}),H}const Y=yN(b,f),X=Ny(f,A),te=L&&s[L]!==void 0?s[L]:dN(Y||new sm({fieldName:X}),(le=this.popupTemplate)==null?void 0:le.expressionInfos),oe=s[X];return H.tooltip=this._getTooltip({label:te,value:oe,chartType:S}),H}};v([x()],Di.prototype,"abilities",void 0),v([vt("abilities")],Di.prototype,"castAbilities",null),v([x()],Di.prototype,"activeMediaInfoIndex",void 0),v([x({readOnly:!0})],Di.prototype,"activeMediaInfo",null),v([x()],Di.prototype,"attributes",void 0),v([x()],Di.prototype,"description",void 0),v([x()],Di.prototype,"fieldInfoMap",void 0),v([x()],Di.prototype,"formattedAttributes",void 0),v([x()],Di.prototype,"expressionAttributes",void 0),v([x({readOnly:!0})],Di.prototype,"formattedMediaInfos",null),v([x()],Di.prototype,"isAggregate",void 0),v([x()],Di.prototype,"layer",void 0),v([x({readOnly:!0})],Di.prototype,"formattedMediaInfoCount",null),v([x()],Di.prototype,"mediaInfos",void 0),v([x()],Di.prototype,"popupTemplate",void 0),v([x()],Di.prototype,"relatedInfos",void 0),v([x()],Di.prototype,"title",void 0),Di=v([B("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Di);const Fc=Di;var dI=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Ose=[].concat(dI.slice(30,39),dI.slice(28,30).reverse()),Pse=[{name:"default",colors:Ose},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const fI="en-us",X7=new Map([["ar",()=>he(()=>import("./ar-bb1fe5ab.js"),["assets/ar-bb1fe5ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.a)],["bg-bg",()=>he(()=>import("./bg_BG-184a2bfa.js"),["assets/bg_BG-184a2bfa.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.b)],["bs-ba",()=>he(()=>import("./bs_BA-f32cc344.js"),["assets/bs_BA-f32cc344.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.b)],["ca-es",()=>he(()=>import("./ca_ES-d17ee95b.js"),["assets/ca_ES-d17ee95b.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.c)],["cs-cz",()=>he(()=>import("./cs_CZ-bcd1e782.js"),["assets/cs_CZ-bcd1e782.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.c)],["da-dk",()=>he(()=>import("./da_DK-27b1b06e.js"),["assets/da_DK-27b1b06e.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["de-de",()=>he(()=>import("./de_DE-c0a1d8dd.js"),["assets/de_DE-c0a1d8dd.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["de-ch",()=>he(()=>import("./de_CH-be7b4255.js"),["assets/de_CH-be7b4255.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["el-gr",()=>he(()=>import("./el_GR-05fb9ec0.js"),["assets/el_GR-05fb9ec0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["en-us",()=>he(()=>import("./en_US-170979d8.js"),["assets/en_US-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["en-ca",()=>he(()=>import("./en_CA-170979d8.js"),["assets/en_CA-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["es-es",()=>he(()=>import("./es_ES-d0b66640.js"),["assets/es_ES-d0b66640.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["et-ee",()=>he(()=>import("./et_EE-56dd74d3.js"),["assets/et_EE-56dd74d3.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["fi-fi",()=>he(()=>import("./fi_FI-91d58cb9.js"),["assets/fi_FI-91d58cb9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.f)],["fr-fr",()=>he(()=>import("./fr_FR-a11503e0.js"),["assets/fr_FR-a11503e0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.f)],["he-il",()=>he(()=>import("./he_IL-90db98c4.js"),["assets/he_IL-90db98c4.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["hr-hr",()=>he(()=>import("./hr_HR-fac8bb29.js"),["assets/hr_HR-fac8bb29.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["hu-hu",()=>he(()=>import("./hu_HU-e8803856.js"),["assets/hu_HU-e8803856.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["id-id",()=>he(()=>import("./id_ID-86e57d06.js"),["assets/id_ID-86e57d06.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.i)],["it-it",()=>he(()=>import("./it_IT-2d4485ba.js"),["assets/it_IT-2d4485ba.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.i)],["ja-jp",()=>he(()=>import("./ja_JP-77c6c16d.js"),["assets/ja_JP-77c6c16d.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.j)],["ko-kr",()=>he(()=>import("./ko_KR-e155b9ab.js"),["assets/ko_KR-e155b9ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.k)],["lt-lt",()=>he(()=>import("./lt_LT-fde47ae9.js"),["assets/lt_LT-fde47ae9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.l)],["lv-lv",()=>he(()=>import("./lv_LV-359be050.js"),["assets/lv_LV-359be050.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.l)],["nb-no",()=>he(()=>import("./nb_NO-30d57c1a.js"),["assets/nb_NO-30d57c1a.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.n)],["nl-nl",()=>he(()=>import("./nl_NL-cb904b48.js"),["assets/nl_NL-cb904b48.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.n)],["pl-pl",()=>he(()=>import("./pl_PL-58c54c9f.js"),["assets/pl_PL-58c54c9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["pt-br",()=>he(()=>import("./pt_BR-d2e10248.js"),["assets/pt_BR-d2e10248.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["pt-pt",()=>he(()=>import("./pt_PT-65a41842.js"),["assets/pt_PT-65a41842.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["ro-ro",()=>he(()=>import("./ro_RO-15e90e9f.js"),["assets/ro_RO-15e90e9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.r)],["ru-ru",()=>he(()=>import("./ru_RU-a74d21e5.js"),["assets/ru_RU-a74d21e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.r)],["sk-sk",()=>he(()=>import("./sk_SK-a928dbd1.js"),["assets/sk_SK-a928dbd1.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sl-sl",()=>he(()=>import("./sl_SL-1a3c3078.js"),["assets/sl_SL-1a3c3078.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sr-rs",()=>he(()=>import("./sr_RS-0b18b911.js"),["assets/sr_RS-0b18b911.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sv-se",()=>he(()=>import("./sv_SE-ce7e3f84.js"),["assets/sv_SE-ce7e3f84.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["th-th",()=>he(()=>import("./th_TH-1448f333.js"),["assets/th_TH-1448f333.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.t)],["tr-tr",()=>he(()=>import("./tr_TR-dd92f630.js"),["assets/tr_TR-dd92f630.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.t)],["uk-ua",()=>he(()=>import("./uk_UA-fe4434ed.js"),["assets/uk_UA-fe4434ed.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.u)],["vi-vn",()=>he(()=>import("./vi_VN-41938633.js"),["assets/vi_VN-41938633.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.v)],["zh-cn",()=>he(()=>import("./zh_Hans-524a1291.js"),["assets/zh_Hans-524a1291.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)],["zh-hk",()=>he(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)],["zh-tw",()=>he(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)]]);function Rse(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const r of X7.keys())if(r.startsWith(e)){i=r;break}return i}function Fse(t){return t?X7.has(t.toLowerCase())?t.toLowerCase():Rse(t)||fI:fI}let $p=null,df=null;async function Nse(t=_s()){if(t=Fse(t),$p&&t===df)return $p;$p=he(()=>import("./index-a1a574a3.js"),["assets/index-a1a574a3.js","assets/_commonjsHelpers-2f3e7994.js"]).then(e=>e.i),df=t;try{const[e,i]=await Promise.all([$p,X7.get(df)()]);df===t&&(e.am4core.options.defaultLocale=i.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return $p=null,df=null,null}return $p}function Lse(t,e="default"){const i=Pse.find(r=>r.name===e);return i?i.colors.map(r=>t.color(r)):null}const Kr="esri-feature-media",_i={base:Kr,mediaContainer:`${Kr}__container`,mediaItemContainer:`${Kr}__item-container`,mediaItem:`${Kr}__item`,mediaItemTitle:`${Kr}__item-title`,mediaItemCaption:`${Kr}__item-caption`,mediaPrevious:`${Kr}__previous`,mediaPreviousIconLTR:`${Kr}__previous-icon`,mediaPreviousIconRTL:`${Kr}__previous-icon--rtl`,mediaNext:`${Kr}__next`,mediaNextIconLTR:`${Kr}__next-icon`,mediaNextIconRTL:`${Kr}__next-icon--rtl`,mediaChart:`${Kr}__chart`,mediaButton:`${Kr}__button`,mediaIcon:`${Kr}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},c_=.05,p_=.95,d_=15,va="color",Il="tooltip",ff="value",yI="default-line-value";let yn=class extends Er{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new Fc,this.messages=null,this._getChartDependencies=async r=>{const s=await Nse(),{destroyed:h,viewModel:f}=this;if(h||!f||!r)return;const{activeMediaInfo:m}=f,b=await this._getRendererColors(s);this._renderChart({chartDiv:r,mediaInfo:m,chartsModule:s,colorMap:b})}}initialize(){this._featureElementInfo=new Mb,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),_t),me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),_t)])}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return ie("div",{bind:this,class:_i.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?ie("div",{key:"media-element-container",class:_i.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:s}=this.viewModel,{value:h,refreshInterval:f,altText:m,title:b,type:S}=e,{sourceURL:I,linkURL:A}=h,O=pN(A??void 0)?"_blank":"_self",R=O==="_blank"?"noreferrer":"",L=f?i:null,z=L?L.timestamp:0,j=L?L.sourceURL:I,H=ie("img",{alt:m||b,key:`media-${S}-${r}-${s}-${z}`,src:j??void 0});return(A?ie("a",{title:b,href:A,rel:R,target:O},H):null)??H}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return ie("div",{key:`media-${e.type}-${i}-${r}`,bind:this,class:_i.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e.title?ie("div",{key:"media-title",class:_i.mediaItemTitle,innerHTML:e.title}):null,r=e.caption?ie("div",{key:"media-caption",class:_i.mediaItemCaption,innerHTML:e.caption}):null;return ie("div",{key:"media-container",class:_i.mediaItemContainer},ie("div",{key:"media-item-container",class:_i.mediaItem},this.renderMediaInfoType()),i,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,s=i?this.classes(_i.mediaButton,_i.mediaPrevious):this.classes(_i.mediaButton,_i.mediaNext),h=i?this.classes(_i.mediaIcon,_i.mediaPreviousIconLTR,_i.iconLeftTriangleArrow):this.classes(_i.mediaIcon,_i.mediaNextIconLTR,_i.iconRightTriangleArrow),f=i?this.classes(_i.mediaIcon,_i.mediaPreviousIconRTL,_i.iconRightTriangleArrow):this.classes(_i.mediaIcon,_i.mediaNextIconRTL,_i.iconLeftTriangleArrow),m=i?"media-previous":"media-next",b=i?this._previous:this._next;return ie("button",{type:"button",key:m,title:r,"aria-label":r,tabIndex:0,class:s,bind:this,onclick:b},ie("span",{"aria-hidden":"true",class:h}),ie("span",{"aria-hidden":"true",class:f}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getRendererColors(e){const{am4core:i}=e,r=new Map,s=this._getRenderer(),h="default";if(!s)return r;const f=await ane(s);return f.delete(h),Array.from(f.values()).every(m=>(m==null?void 0:m.length)===1)&&(r.set(yI,i.color({r:50,g:50,b:50,a:1})),Array.from(f.keys()).forEach(m=>{var b,S;m&&r.set(m,i.color((S=(b=f.get(m))==null?void 0:b[0])==null?void 0:S.toCss(!0)))})),r}_handleMediaKeyup(e){const i=dc(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:i}=this.viewModel,{chartsModule:r,chartDiv:s,mediaInfo:h,colorMap:f}=e,{value:m,type:b}=h,{am4core:S}=r,I=Lse(S);function A(L){L instanceof S.ColorSet&&I&&(L.list=I)}pw()&&S.useTheme(r.am4themes_dark);const O=window.matchMedia("(prefers-reduced-motion: reduce)");i.chartAnimation&&!O.matches?S.useTheme(r.am4themes_animated):S.unuseTheme(r.am4themes_animated),S.useTheme(A);const R=b==="pie-chart"?this._createPieChart(e):this._createXYChart(e);s.setAttribute("aria-label",h.altText||h.title),R.data=m.series.map(L=>({[Il]:L.tooltip,[ff]:L.value,[va]:f.get(L.fieldName)})).filter(L=>b!=="pie-chart"||L.value!=null&&L.value>0)}_customizeChartTooltip(e,i){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=i.color("#ffffff"),e.background.fill=i.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:i,chartsModule:r}=e,{am4core:s,am4charts:h}=r,f=s.create(i,h.PieChart);f.rtl=Qo(this.container);const m=f.series.push(new h.PieSeries);return m.labels.template.disabled=!0,m.ticks.template.disabled=!0,m.dataFields.value=ff,m.dataFields.category=Il,this._customizeChartTooltip(m.tooltip,s),m.slices.template.propertyFields.fill=va,m.slices.template.propertyFields.stroke=va,f}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}_createColumnChart(e,i){const{chartsModule:r,mediaInfo:s}=i,{value:h}=s,{am4core:f,am4charts:m}=r,b=e.xAxes.push(new m.CategoryAxis);b.dataFields.category=Il,b.renderer.labels.template.disabled=!0;const S=b.tooltip;this._customizeChartTooltip(S,f),S.events.on("sizechanged",()=>{S.dy=-S.contentHeight});const I=e.yAxes.push(new m.ValueAxis),A=I.renderer.labels.template;I.renderer.minLabelPosition=c_,I.renderer.maxLabelPosition=p_,I.min=this._getMinSeriesValue(h.series),this._customizeChartTooltip(I.tooltip,f),A.wrap=!0;const O=e.series.push(new m.ColumnSeries);O.dataFields.valueY=ff,O.dataFields.categoryX=Il,O.columns.template.propertyFields.fill=va,O.columns.template.propertyFields.stroke=va,e.cursor=new m.XYCursor,h.series.length>d_&&(e.scrollbarX=new f.Scrollbar)}_createBarChart(e,i){const{chartsModule:r,mediaInfo:s}=i,{value:h}=s,{am4core:f,am4charts:m}=r,b=e.yAxes.push(new m.CategoryAxis);b.dataFields.category=Il,b.renderer.inversed=!0,b.renderer.labels.template.disabled=!0;const S=b.tooltip;this._customizeChartTooltip(S,f),S.events.on("sizechanged",()=>{S.dx=S.contentWidth});const I=e.xAxes.push(new m.ValueAxis),A=I.renderer.labels.template;I.renderer.minLabelPosition=c_,I.renderer.maxLabelPosition=p_,I.min=this._getMinSeriesValue(h.series),this._customizeChartTooltip(I.tooltip,f),A.wrap=!0;const O=e.series.push(new m.ColumnSeries);O.dataFields.valueX=ff,O.dataFields.categoryY=Il,O.columns.template.propertyFields.fill=va,O.columns.template.propertyFields.stroke=va,e.cursor=new m.XYCursor,h.series.length>d_&&(e.scrollbarY=new f.Scrollbar)}_createLineChart(e,i){const{chartsModule:r,mediaInfo:s,colorMap:h}=i,{value:f}=s,{am4core:m,am4charts:b}=r,S=e.xAxes.push(new b.CategoryAxis);S.dataFields.category=Il,S.renderer.labels.template.disabled=!0;const I=S.tooltip;this._customizeChartTooltip(I,m),I.events.on("sizechanged",()=>{I.dy=-I.contentHeight});const A=e.yAxes.push(new b.ValueAxis),O=A.renderer.labels.template;A.renderer.minLabelPosition=c_,A.renderer.maxLabelPosition=p_,A.min=this._getMinSeriesValue(f.series),this._customizeChartTooltip(A.tooltip,m),O.wrap=!0;const R=e.series.push(new b.LineSeries);R.dataFields.categoryX=Il,R.dataFields.valueY=ff,R.strokeWidth=1;const L=h.get(yI);L&&(R.stroke=L);const z=R.bullets.push(new b.CircleBullet);z.propertyFields.fill=va,z.propertyFields.stroke=va,e.cursor=new b.XYCursor,f.series.length>d_&&(e.scrollbarX=new m.Scrollbar)}_createXYChart(e){const{chartDiv:i,chartsModule:r,mediaInfo:s}=e,{type:h}=s,{am4core:f,am4charts:m}=r,b=f.create(i,m.XYChart);return b.rtl=Qo(this.container),h==="column-chart"&&this._createColumnChart(b,e),h==="bar-chart"&&this._createBarChart(b,e),h==="line-chart"&&this._createLineChart(b,e),b}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e;if(!i)return;const s=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const h=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},s);this._refreshTimer=h}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[s,h=""]=e.split("#");return`${s}${r}timestamp=${i}${h?"#":""}${h}`}};v([x()],yn.prototype,"attributes",null),v([x()],yn.prototype,"activeMediaInfoIndex",null),v([x()],yn.prototype,"description",null),v([x()],yn.prototype,"fieldInfoMap",null),v([x()],yn.prototype,"layer",null),v([x()],yn.prototype,"mediaInfos",null),v([x()],yn.prototype,"popupTemplate",null),v([x()],yn.prototype,"relatedInfos",null),v([x()],yn.prototype,"title",null),v([x({type:Fc})],yn.prototype,"viewModel",void 0),v([x(),xr("esri/widgets/Feature/t9n/Feature")],yn.prototype,"messages",void 0),yn=v([B("esri.widgets.Feature.FeatureMedia")],yn);const mL=yn;var yx;let l1=yx=class extends ye{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new yx({minValue:this.minValue,maxValue:this.maxValue})}};v([x({type:Number,json:{write:!0}})],l1.prototype,"minValue",void 0),v([x({type:Number,json:{write:!0}})],l1.prototype,"maxValue",void 0),l1=yx=v([B("esri.renderer.support.AuthoringInfoClassBreakInfo")],l1);var mx;let wu=mx=class extends ye{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new mx({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:se(this.classBreakInfos)})}};v([x({type:String,json:{write:!0}})],wu.prototype,"field",void 0),v([x({type:String,json:{write:!0}})],wu.prototype,"normalizationField",void 0),v([x({type:String,json:{write:!0}})],wu.prototype,"label",void 0),v([x({type:[l1],json:{write:!0}})],wu.prototype,"classBreakInfos",void 0),wu=mx=v([B("esri.renderers.support.AuthoringInfoFieldInfo")],wu);var gx;const cg=new tt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),pg=new tt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),mI={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},gI=["high-to-low","above-and-below","centered-on","extremes"],vI=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],wI=["seconds","minutes","hours","days","months","years"];let mn=gx=class extends ye{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new gx({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};v([x({types:mI,json:{write:!0}})],mn.prototype,"endTime",void 0),v([vt("endTime")],mn.prototype,"castEndTime",null),v([x({type:String,json:{write:!0}})],mn.prototype,"field",void 0),v([x({type:Number,json:{write:!0}})],mn.prototype,"maxSliderValue",void 0),v([x({type:Number,json:{write:!0}})],mn.prototype,"minSliderValue",void 0),v([x({types:mI,json:{write:!0}})],mn.prototype,"startTime",void 0),v([vt("startTime")],mn.prototype,"castStartTime",null),v([x({type:cg.apiValues,value:null,json:{type:cg.jsonValues,read:cg.read,write:cg.write}})],mn.prototype,"style",null),v([x({type:vI,value:null,json:{type:vI,origins:{"web-scene":{type:gI,write:{writer:(t,e)=>{gI.includes(t)&&(e.theme=t)}}}},write:!0}})],mn.prototype,"theme",null),v([x({type:pg.apiValues,json:{type:pg.jsonValues,read:pg.read,write:pg.write}})],mn.prototype,"type",void 0),v([x({type:wI,json:{type:wI,write:!0}})],mn.prototype,"units",void 0),mn=gx=v([B("esri.renderers.support.AuthoringInfoVisualVariable")],mn);const jse=mn;let jv=class extends ye{constructor(e){super(e),this.type=null}};v([x({readOnly:!0,json:{read:!1,write:!0}})],jv.prototype,"type",void 0),jv=v([B("esri.rest.support.ColorRamp")],jv);const Q7=jv;var vx;let Wh=vx=class extends Q7{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new vx({fromColor:se(this.fromColor),toColor:se(this.toColor),algorithm:this.algorithm})}};v([Le({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Wh.prototype,"algorithm",void 0),v([x({type:Be,json:{type:[Bt],write:!0}})],Wh.prototype,"fromColor",void 0),v([x({type:Be,json:{type:[Bt],write:!0}})],Wh.prototype,"toColor",void 0),v([x({type:["algorithmic"]})],Wh.prototype,"type",void 0),Wh=vx=v([B("esri.rest.support.AlgorithmicColorRamp")],Wh);const eM=Wh;var wx;let u1=wx=class extends Q7{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new wx({colorRamps:se(this.colorRamps)})}};v([x({type:[eM],json:{write:!0}})],u1.prototype,"colorRamps",void 0),v([x({type:["multipart"]})],u1.prototype,"type",void 0),u1=wx=v([B("esri.rest.support.MultipartColorRamp")],u1);const gL=u1,Dse={key:"type",base:Q7,typeMap:{algorithmic:eM,multipart:gL}};function zse(t){return t&&t.type?t.type==="algorithmic"?eM.fromJSON(t):t.type==="multipart"?gL.fromJSON(t):null:null}var bx;const ch=new tt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),dg=new tt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),bI=new tt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),_I=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Vse=["high-to-low","above-and-below","above","below","90-10"],Gse=["flow-line","wave-front"],qse=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let xi=bx=class extends ye{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?zse(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new bx({classificationMethod:this.classificationMethod,colorRamp:se(this.colorRamp),fadeRatio:se(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:se(this.field1),field2:se(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};v([x({type:ch.apiValues,value:null,json:{type:ch.jsonValues,read:ch.read,write:ch.write,origins:{"web-document":{default:"manual",type:ch.jsonValues,read:ch.read,write:ch.write}}}})],xi.prototype,"classificationMethod",null),v([x({types:Dse,json:{write:!0}})],xi.prototype,"colorRamp",void 0),v([Me("colorRamp")],xi.prototype,"readColorRamp",null),v([x({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],xi.prototype,"fadeRatio",void 0),v([x({type:[String],value:null,json:{write:!0}})],xi.prototype,"fields",null),v([x({type:wu,value:null,json:{write:!0}})],xi.prototype,"field1",null),v([x({type:wu,value:null,json:{write:!0}})],xi.prototype,"field2",null),v([x({type:Gse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],xi.prototype,"flowTheme",null),v([x({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],xi.prototype,"focus",null),v([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],xi.prototype,"isAutoGenerated",void 0),v([x({type:Number,value:null,json:{type:Bt,write:!0}})],xi.prototype,"numClasses",null),v([x({type:_I,json:{type:_I,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],xi.prototype,"lengthUnit",void 0),v([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],xi.prototype,"maxSliderValue",void 0),v([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],xi.prototype,"minSliderValue",void 0),v([x({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],xi.prototype,"statistics",null),v([x({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],xi.prototype,"standardDeviationInterval",null),v([x({type:dg.apiValues,value:null,json:{type:dg.jsonValues,read:dg.read,write:dg.write,origins:{"web-scene":{type:bI.jsonValues,write:{writer:bI.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],xi.prototype,"type",null),v([x({type:[jse],json:{write:!0}})],xi.prototype,"visualVariables",void 0),v([x({type:qse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],xi.prototype,"univariateSymbolStyle",null),v([x({type:Vse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],xi.prototype,"univariateTheme",null),xi=bx=v([B("esri.renderers.support.AuthoringInfo")],xi);const tM=xi,f_=new tt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let h1=class extends ye{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};v([x({type:tM,json:{write:!0}})],h1.prototype,"authoringInfo",void 0),v([x({type:f_.apiValues,readOnly:!0,json:{type:f_.jsonValues,read:!1,write:{writer:f_.write,ignoreOrigin:!0}}})],h1.prototype,"type",void 0),h1=v([B("esri.renderers.Renderer")],h1);const gl=h1;function Use(t){var e,i;return((i=(e=t.match(Bse))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Bse=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var _x;let Jd=_x=class extends ye{constructor(){super(...arguments),this.title=null}clone(){return new _x({title:this.title})}};v([x({type:String,json:{write:!0}})],Jd.prototype,"title",void 0),Jd=_x=v([B("esri.renderers.support.LegendOptions")],Jd);var xx;let Dv=xx=class extends Jd{constructor(){super(...arguments),this.showLegend=null}clone(){return new xx({title:this.title,showLegend:this.showLegend})}};v([x({type:Boolean,json:{write:!0}})],Dv.prototype,"showLegend",void 0),Dv=xx=v([B("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Dv);const vL=Dv,y_=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Js=class extends ye{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(fe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Qy(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};v([x()],Js.prototype,"index",void 0),v([x({type:y_.apiValues,readOnly:!0,json:{read:y_.read,write:y_.write}})],Js.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Js.prototype,"field",void 0),v([vt("field")],Js.prototype,"castField",null),v([x({type:String,json:{write:!0}})],Js.prototype,"valueExpression",void 0),v([x({type:String,json:{write:!0}})],Js.prototype,"valueExpressionTitle",void 0),v([x({readOnly:!0})],Js.prototype,"arcadeRequired",null),v([x({type:vL,json:{write:!0}})],Js.prototype,"legendOptions",void 0),Js=v([B("esri.renderers.visualVariables.VisualVariable")],Js);const wm=Js;var Sx;let Jh=Sx=class extends wm{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new Sx({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([x({readOnly:!0})],Jh.prototype,"cache",null),v([x({type:["color"],json:{type:["colorInfo"]}})],Jh.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Jh.prototype,"normalizationField",void 0),v([x({type:[Qie],json:{write:!0}})],Jh.prototype,"stops",null),Jh=Sx=v([B("esri.renderers.visualVariables.ColorVariable")],Jh);const wL=Jh;var Mx;let ru=Mx=class extends ye{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return by(e.transparency)}writeOpacity(t,e,i){e[i]=rb(t)}clone(){return new Mx({label:this.label,opacity:this.opacity,value:this.value})}};v([x({type:String,json:{write:!0}})],ru.prototype,"label",void 0),v([x({type:Number,json:{type:Bt,write:{target:"transparency"}}})],ru.prototype,"opacity",void 0),v([Me("opacity",["transparency"])],ru.prototype,"readOpacity",null),v([Ee("opacity")],ru.prototype,"writeOpacity",null),v([x({type:Number,json:{write:!0}})],ru.prototype,"value",void 0),ru=Mx=v([B("esri.renderers.visualVariables.support.OpacityStop")],ru);const Hse=ru;var $x;let Kh=$x=class extends wm{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new $x({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([x({readOnly:!0})],Kh.prototype,"cache",null),v([x({type:["opacity"],json:{type:["transparencyInfo"]}})],Kh.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Kh.prototype,"normalizationField",void 0),v([x({type:[Hse],json:{write:!0}})],Kh.prototype,"stops",null),Kh=$x=v([B("esri.renderers.visualVariables.OpacityVariable")],Kh);const bL=Kh;var Tx;let Fa=Tx=class extends wm{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new Tx({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};v([x({readOnly:!0})],Fa.prototype,"cache",null),v([x({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Fa.prototype,"axis",void 0),v([x({type:["rotation"],json:{type:["rotationInfo"]}})],Fa.prototype,"type",void 0),v([x({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Fa.prototype,"rotationType",void 0),v([x({type:String,json:{write:!0}})],Fa.prototype,"valueExpressionTitle",void 0),v([Ee("web-scene","valueExpressionTitle")],Fa.prototype,"writeValueExpressionTitleWebScene",null),Fa=Tx=v([B("esri.renderers.visualVariables.RotationVariable")],Fa);const _L=Fa;var Ix;let ld=Ix=class extends ye{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Ix({label:this.label,size:this.size,value:this.value})}};v([x({type:String,json:{write:!0}})],ld.prototype,"label",void 0),v([x({type:Number,cast:It,json:{write:!0}})],ld.prototype,"size",void 0),v([x({type:Number,json:{write:!0}})],ld.prototype,"value",void 0),ld=Ix=v([B("esri.renderers.visualVariables.support.SizeStop")],ld);const ud=ld;var Ex;let zv=Ex=class extends vL{constructor(){super(...arguments),this.customValues=null}clone(){return new Ex({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};v([x({type:[Number],json:{write:!0}})],zv.prototype,"customValues",void 0),zv=Ex=v([B("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],zv);const Wse=zv;var il,er;function Lu(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function jy(t){return t!=null&&!isNaN(t)&&isFinite(t)}function xL(t){return t.valueExpression?il.Expression:t.field&&typeof t.field=="string"?il.Field:il.Unknown}function Jse(t,e){const i=e||xL(t),r=t.valueUnit||"unknown";return i===il.Unknown?er.Constant:t.stops?er.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?er.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?er.Proportional:er.Additive:er.Identity:er.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(il||(il={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(er||(er={}));const iM={unknown:1,inches:rs(1,"meters","inches"),feet:rs(1,"meters","feet"),"us-feet":rs(1,"meters","us-feet"),yards:rs(1,"meters","yards"),miles:rs(1,"meters","miles"),"nautical-miles":rs(1,"meters","nautical-miles"),millimeters:rs(1,"meters","millimeters"),centimeters:rs(1,"meters","centimeters"),decimeters:rs(1,"meters","decimeters"),meters:rs(1,"meters","meters"),kilometers:rs(1,"meters","kilometers"),"decimal-degrees":1/rH(1,"meters",oi.radius)},Xu=fe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),xI=new Mr,Vv=Math.PI,SL=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function ML(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(L=>L.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Xu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof e=="number",h=s?null:e,f=h&&h.attributes;let m=s?e:null;const b=r.field,{ipData:S,hasExpression:I}=r.cache;let A=r.cache.compiledFunc;if(!b&&!I){const L=r.stops;return L&&L[0]&&L[0].color}if(typeof m!="number")if(I){if(i==null||i.arcade==null)return void Xu.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,j=z.getViewInfo(L),H=z.createExecContext(h,j);if(!A){const Y=z.createSyntaxTree(r.valueExpression);A=z.createFunction(Y),r.cache.compiledFunc=A}m=z.executeFunction(A,H)}else f&&(m=f[b]);const O=r.normalizationField,R=f!=null&&O!=null?parseFloat(f[O]):void 0;if(m!=null&&(!O||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(m/=R);const L=rM(m,S);if(L){const z=L[0],j=L[1],H=z===j?r.stops[z].color:Be.blendColors(r.stops[z].color,r.stops[j].color,L[2],i!=null?i.color:void 0);return new Be(H)}}}function $L(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(L=>L.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Xu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof e=="number",h=s?null:e,f=h&&h.attributes;let m=s?e:null;const b=r.field,{ipData:S,hasExpression:I}=r.cache;let A=r.cache.compiledFunc;if(!b&&!I){const L=r.stops;return L&&L[0]&&L[0].opacity}if(typeof m!="number")if(I){if(i==null||i.arcade==null)return void Xu.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,j=z.getViewInfo(L),H=z.createExecContext(h,j);if(!A){const Y=z.createSyntaxTree(r.valueExpression);A=z.createFunction(Y),r.cache.compiledFunc=A}m=z.executeFunction(A,H)}else f&&(m=f[b]);const O=r.normalizationField,R=f!=null&&O!=null?parseFloat(f[O]):void 0;if(m!=null&&(!O||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(m/=R);const L=rM(m,S);if(L){const z=L[0],j=L[1];if(z===j)return r.stops[z].opacity;{const H=r.stops[z].opacity;return H+(r.stops[j].opacity-H)*L[2]}}}}function TL(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(R=>R.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Xu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",h=s==="heading"&&r.rotationType==="arithmetic"?90:0,f=s==="heading"&&r.rotationType==="arithmetic"?-1:1,m=typeof e=="number"?null:e,b=m&&m.attributes,S=r.field,{hasExpression:I}=r.cache;let A=r.cache.compiledFunc,O=0;if(!S&&!I)return O;if(I){if(i==null||i.arcade==null)return void Xu.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,z=L.getViewInfo(R),j=L.createExecContext(m,z);if(!A){const H=L.createSyntaxTree(r.valueExpression);A=L.createFunction(H),r.cache.compiledFunc=A}O=L.executeFunction(A,j)}else b&&(O=b[S]||0);return O=typeof O!="number"||isNaN(O)?null:h+f*O,O}function Kse(t,e,i){const r=typeof e=="number",s=r?null:e,h=s&&s.attributes;let f=r?e:null;const{isScaleDriven:m}=t.cache;let b=t.cache.compiledFunc;if(m){const I=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;f=I==null||A==="3d"?Zse(t):I}else if(!r)switch(t.inputValueType){case il.Expression:{if(i==null||i.arcade==null)return void Xu.error("Use of arcade expressions requires an arcade context");const I={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,O=A.getViewInfo(I),R=A.createExecContext(s,O);if(!b){const L=A.createSyntaxTree(t.valueExpression);b=A.createFunction(L),t.cache.compiledFunc=b}f=A.executeFunction(b,R);break}case il.Field:h&&(f=h[t.field]);break;case il.Unknown:f=null}if(!jy(f))return null;if(r||!t.normalizationField)return f;const S=h?parseFloat(h[t.normalizationField]):null;return jy(S)&&S!==0?f/S:null}function Zse(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function Cb(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(h=>h.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Xu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=EL(Kse(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function xn(t,e,i){return t==null?null:Lu(t)?Cb(t,e,i):jy(t)?t:null}function IL(t,e,i){return jy(i)&&t>i?i:jy(e)&&t<e?e:t}function Yse(t,e,i,r){return t+((xn(e.minSize,i,r)||e.minDataValue)??0)}function Xse(t,e,i){const r=t.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=t.minSize),xn(s,e,i)}function Qse(t,e,i,r){const s=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),h=xn(e.minSize,i,r),f=xn(e.maxSize,i,r),m=r!=null?r.shape:void 0;if(t<=e.minDataValue)return h;if(t>=e.maxDataValue)return f;if(h==null||f==null)return null;if(e.scaleBy==="area"&&m){const b=m==="circle",S=b?Vv*(h/2)**2:h*h,I=S+s*((b?Vv*(f/2)**2:f*f)-S);return b?2*Math.sqrt(I/Vv):Math.sqrt(I)}return h+s*(f-h)}function eoe(t,e,i,r){const s=r!=null?r.shape:void 0,h=t/e.minDataValue,f=xn(e.minSize,i,r),m=xn(e.maxSize,i,r);let b=null;return b=s==="circle"?2*Math.sqrt(h*(f/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(h*f**2):h*f,IL(b,f,m)}function toe(t,e,i,r,s){var b,S,I;const[h,f,m]=rM(t,s);if(h===f)return xn((b=e.stops)==null?void 0:b[h].size,i,r);{const A=xn((S=e.stops)==null?void 0:S[h].size,i,r);return A+(xn((I=e.stops)==null?void 0:I[f].size,i,r)-A)*m}}function ioe(t,e,i,r){const s=(r!=null&&r.resolution?r.resolution:1)*iM[e.valueUnit],h=xn(e.minSize,i,r),f=xn(e.maxSize,i,r),{valueRepresentation:m}=e;let b=null;return b=m==="area"?2*Math.sqrt(t/Vv)/s:m==="radius"||m==="distance"?2*t/s:t/s,IL(b,h,f)}function EL(t,e,i,r,s){switch(e.transformationType){case er.Additive:return Yse(t,e,i,r);case er.Constant:return Xse(e,i,r);case er.ClampedLinear:return Qse(t,e,i,r);case er.Proportional:return eoe(t,e,i,r);case er.Stops:return toe(t,e,i,r,s);case er.RealWorldSize:return ioe(t,e,i,r);case er.Identity:return t;case er.Unknown:return null}}function roe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let h=xn(t.minSize,xI,s),f=xn(t.maxSize,xI,s);if(h!=null||f!=null){if(h>f){const m=f;f=h,h=m}return{minSize:h,maxSize:f}}}function noe(t,e,i){if(!t.visualVariables)return;const r=[],s=[],h=[],f=[],m=[];for(const b of t.visualVariables)switch(b.type){case"color":s.push(b);break;case"opacity":h.push(b);break;case"rotation":m.push(b);break;case"size":f.push(b)}return s.forEach(b=>{const S=ML(b,e,i);r.push({variable:b,value:S})}),h.forEach(b=>{const S=$L(b,e,i);r.push({variable:b,value:S})}),m.forEach(b=>{const S=TL(b,e,i);r.push({variable:b,value:S})}),f.forEach(b=>{const S=Cb(b,e,i);r.push({variable:b,value:S})}),r.filter(b=>b.value!=null)}function rM(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((s,h)=>t<s?(r=h,!0):(i=h,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function soe(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const h=s.useSymbolValue?"symbol-value":Cb(s,e,i);switch(s.axis){case"width":r[0]=h;break;case"depth":r[1]=h;break;case"height":r[2]=h;break;case"width-and-depth":r[0]=h,r[1]=h;break;case"all":case void 0:case null:r[0]=h,r[1]=h,r[2]=h;break;default:s.axis}}return r}const nM=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:soe,getColor:ML,getOpacity:$L,getRotationAngle:TL,getSize:Cb,getSizeForValue:EL,getSizeFromNumberOrVariable:xn,getSizeRangeAtScale:roe,getVisualVariableValues:noe,viewScaleRE:SL},Symbol.toStringTag,{value:"Module"}));var Ax;const fg=new tt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Cx=new tt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function SI(t){if(t!=null)return typeof t=="string"||typeof t=="number"?It(t):t.type==="size"?Lu(t)?t:(delete(t={...t}).type,new Rt(t)):void 0}function MI(t,e,i){if(typeof t!="object")return t;const r=new Rt;return r.read(t,i),r}let Rt=Ax=class extends wm{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&SL.test(this.valueExpression)}}set expression(t){fe.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){Lu(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Lu(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return xL(this)}set maxDataValue(t){t&&this.stops&&(fe.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(fe.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return SI(t)}readMaxSize(t,e,i){return MI(t,e,i)}set minDataValue(t){t&&this.stops&&(fe.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(fe.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return SI(t)}readMinSize(t,e,i){return MI(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(fe.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return Jse(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const s=this.index,h=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:h+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?Cx.read(t):null}clone(){return new Ax({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Lu(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Lu(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===er.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===er.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([x({readOnly:!0})],Rt.prototype,"cache",null),v([x({type:fg.apiValues,json:{type:fg.jsonValues,origins:{"web-map":{read:!1}},read:fg.read,write:fg.write}})],Rt.prototype,"axis",void 0),v([x({type:String,value:null,json:{read:!1}})],Rt.prototype,"expression",null),v([x()],Rt.prototype,"index",null),v([x({type:String,readOnly:!0})],Rt.prototype,"inputValueType",null),v([x({type:Wse,json:{write:!0}})],Rt.prototype,"legendOptions",void 0),v([x({type:Number,value:null,json:{write:!0}})],Rt.prototype,"maxDataValue",null),v([x({type:Number,value:null,json:{write:!0}})],Rt.prototype,"maxSize",null),v([vt("maxSize")],Rt.prototype,"castMaxSize",null),v([Me("maxSize")],Rt.prototype,"readMaxSize",null),v([x({type:Number,value:null,json:{write:!0}})],Rt.prototype,"minDataValue",null),v([x({type:Number,value:null,json:{write:!0}})],Rt.prototype,"minSize",null),v([vt("minSize")],Rt.prototype,"castMinSize",null),v([Me("minSize")],Rt.prototype,"readMinSize",null),v([x({type:String,json:{write:!0}})],Rt.prototype,"normalizationField",void 0),v([x({readOnly:!0})],Rt.prototype,"arcadeRequired",null),v([x({type:String})],Rt.prototype,"scaleBy",void 0),v([x({type:[ud],value:null,json:{write:!0}})],Rt.prototype,"stops",null),v([x({type:["outline"],json:{write:!0}})],Rt.prototype,"target",void 0),v([x({type:String,readOnly:!0})],Rt.prototype,"transformationType",null),v([x({type:["size"],json:{type:["sizeInfo"]}})],Rt.prototype,"type",void 0),v([x({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Rt.prototype,"useSymbolValue",void 0),v([x({type:String,json:{write:!0}})],Rt.prototype,"valueExpression",void 0),v([Me("valueExpression",["valueExpression","expression"])],Rt.prototype,"readValueExpression",null),v([Ee("web-scene","valueExpression")],Rt.prototype,"writeValueExpressionWebScene",null),v([x({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Rt.prototype,"valueRepresentation",void 0),v([x({type:Cx.apiValues,json:{write:Cx.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Rt.prototype,"valueUnit",void 0),v([Me("valueUnit")],Rt.prototype,"readValueUnit",null),Rt=Ax=v([B("esri.renderers.visualVariables.SizeVariable")],Rt);const kb=Rt,ooe={color:wL,size:kb,opacity:bL,rotation:_L},aoe=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),loe=/^\[([^\]]+)\]$/i;let Gv=class extends Oe{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:h}=i,f=s&&s.match(loe),m=f&&f[1];if(m&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:h,field:m})),e)return e.map(b=>{const S=aoe.read(b.type),I=ooe[S];I||(fe.getLogger(this.declaredClass).warn(`Unknown variable type: ${S}`),r&&r.messages&&r.messages.push(new Ss("visual-variable:unsupported",`visualVariable of type '${S}' is not supported`,{definition:b,context:r})));const A=new I;return A.read(b,r),A})}writeVariables(e,i){const r=[];for(const s of e){const h=s.toJSON(i);h&&r.push(h)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};v([x()],Gv.prototype,"visualVariables",null),Gv=v([B("esri.renderers.visualVariables.VisualVariableFactory")],Gv);const uoe=Gv,hoe={base:wm,key:"type",typeMap:{opacity:bL,color:wL,rotation:_L,size:kb}},z0=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new uoe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,h){r[s]=this._vvFactory.writeVariables(i,h)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(h=>h.type===i&&(typeof r=="string"?h.target===r:r!==!1||!h.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const h of s)h&&(h.field&&Hn(i,r,h.field),h.normalizationField&&Hn(i,r,h.normalizationField),h.valueExpression&&(coe(h.valueExpression,i,r)||await ln(i,r,h.valueExpression)))}};return v([x({types:[hoe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),v([Me("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),v([Ee("visualVariables")],e.prototype,"writeVisualVariables",null),e=v([B("esri.renderers.mixins.VisualVariablesMixin")],e),e};function coe(t,e,i){const r=Use(t);return r!=null&&(Hn(e,i,r),!0)}const yf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function poe(t,e=yf){var m,b;if(!t)return{symbol:null};const{retainId:i=yf.retainId,ignoreDrivers:r=yf.ignoreDrivers,hasLabelingContext:s=yf.hasLabelingContext,retainCIM:h=yf.retainCIM}=e;let f=null;if(l0(t)||t instanceof yp)f=t.clone();else if(t.type==="cim"){const S=(b=(m=t.data)==null?void 0:m.symbol)==null?void 0:b.type;if(S!=="CIMPointSymbol")return{error:new ne("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${S||"unknown"}' is unsupported in 3D`,{symbol:t})};f=h?t.clone():$c.fromCIMSymbol(t)}else if(t instanceof Is)f=db.fromSimpleLineSymbol(t);else if(t instanceof sh)f=$c.fromSimpleMarkerSymbol(t);else if(t instanceof yb)f=$c.fromPictureMarkerSymbol(t);else if(t instanceof nh)f=e.geometryType&&e.geometryType==="mesh"?fb.fromSimpleFillSymbol(t):hm.fromSimpleFillSymbol(t);else{if(!(t instanceof N0))return{error:new ne("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};f=s?pb.fromTextSymbol(t):$c.fromTextSymbol(t)}if(i&&f&&f.type!=="cim"&&(f.id=t.id),r&&l0(f))for(let S=0;S<f.symbolLayers.length;++S)f.symbolLayers.getItemAt(S)._ignoreDrivers=!0;return{symbol:f}}function dw(t,e,i,r){const s=AL(t,{},{context:r,isLabelSymbol:!1});s!=null&&(e[i]=s)}function $I(t,e,i,r){const s=AL(t,{},{context:r,isLabelSymbol:!0});s!=null&&(e[i]=s)}function TI(t){return t instanceof F0||t instanceof yp}function AL(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:s}=i,h=r==null?void 0:r.origin,f=r==null?void 0:r.messages;if(h==="web-scene"&&!TI(t)){const m=poe(t,{retainCIM:!0,hasLabelingContext:s});return m.symbol!=null?m.symbol.write(e,r):(f==null||f.push(new ne("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:m.error})),null)}return(h==="web-map"||h==="portal-item"&&!$O(r==null?void 0:r.layer))&&TI(t)?(f==null||f.push(new ne("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function O5e(t,e){return sY(t,null,e)}const V0={types:gb,json:{write:{writer:dw},origins:{"web-scene":{types:P8,write:{writer:dw},read:{reader:th({types:P8})}}}}},CL={types:{base:Tn,key:"type",typeMap:{"simple-fill":Vc.typeMap["simple-fill"],"picture-fill":Vc.typeMap["picture-fill"],"polygon-3d":Vc.typeMap["polygon-3d"]}},json:{write:{writer:dw},origins:{"web-scene":{type:hm,write:{writer:dw}}}}},qv={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var kx;let nu=kx=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new kx({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};v([x({type:String,json:{write:!0}})],nu.prototype,"description",void 0),v([x({type:String,json:{write:!0}})],nu.prototype,"label",void 0),v([x({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],nu.prototype,"minValue",void 0),v([x({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],nu.prototype,"maxValue",void 0),v([x(V0)],nu.prototype,"symbol",void 0),nu=kx=v([B("esri.renderers.support.ClassBreakInfo")],nu);const fw=nu;var Ox;const kL="log",Uv="percent-of-total",Bv="field",yg=new tt({esriNormalizeByLog:kL,esriNormalizeByPercentOfTotal:Uv,esriNormalizeByField:Bv}),doe=ei(fw);let zi=Ox=class extends z0(gl){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(s=>{const h=new fw;return h.read(s,i),h.minValue==null&&(h.minValue=r),h.maxValue==null&&(h.maxValue=h.minValue),r=h.maxValue,h})}writeClassBreakInfos(t,e,i,r){const s=t.map(h=>h.write({},r));this._areClassBreaksConsecutive()&&s.forEach(h=>delete h.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(fe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Qy(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&Bv||i&&Uv||null,e&&i&&fe.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):t!==Bv&&t!==Uv||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new fw({minValue:t,maxValue:e,symbol:ER(i)}):doe(se(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||fe.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await al()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void fe.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const s=await al(),{arcadeUtils:h}=s;h.hasGeometryOperations(this.valueExpression)&&await h.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Ox({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:se(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),ln(t,e,this.valueExpression)];Hn(t,e,this.field),Hn(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:h}=e??{},{valueExpression:f}=this;let m=this._compiledValueExpression.valueExpression===f?this._compiledValueExpression.compiledFunction:null;const b=h.arcadeUtils;if(!m){const I=b.createSyntaxTree(f);m=b.createFunction(I),this._compiledValueExpression.compiledFunction=m}this._compiledValueExpression.valueExpression=f;const S=b.executeFunction(m,b.createExecContext(t,b.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(S)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const h=this.normalizationTotal,f=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===kL)s=Math.log(s)*Math.LOG10E;else if(r!==Uv||h==null||isNaN(h)){if(r===Bv&&!isNaN(f)){if(isNaN(s)||isNaN(f))return-1;s/=f}}else s=s/h*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};v([x(CL)],zi.prototype,"backgroundFillSymbol",void 0),v([x({type:[fw]})],zi.prototype,"classBreakInfos",void 0),v([Me("classBreakInfos")],zi.prototype,"readClassBreakInfos",null),v([Ee("classBreakInfos")],zi.prototype,"writeClassBreakInfos",null),v([x({type:String,json:{write:!0}})],zi.prototype,"defaultLabel",void 0),v([x(V0)],zi.prototype,"defaultSymbol",void 0),v([x({type:String,json:{write:!0}})],zi.prototype,"field",void 0),v([vt("field")],zi.prototype,"castField",null),v([x({type:Boolean})],zi.prototype,"isMaxInclusive",void 0),v([x({type:Jd,json:{write:!0}})],zi.prototype,"legendOptions",void 0),v([x({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],zi.prototype,"minValue",null),v([x({type:String,json:{write:!0}})],zi.prototype,"normalizationField",void 0),v([x({type:Number,cast:t=>fs(t),json:{write:!0}})],zi.prototype,"normalizationTotal",void 0),v([x({type:yg.apiValues,value:null,json:{type:yg.jsonValues,read:yg.read,write:yg.write}})],zi.prototype,"normalizationType",null),v([Le({classBreaks:"class-breaks"})],zi.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],zi.prototype,"valueExpression",void 0),v([x({type:String,json:{write:!0}})],zi.prototype,"valueExpressionTitle",void 0),zi=Ox=v([B("esri.renderers.ClassBreaksRenderer")],zi);const OL=zi;let foe=class{constructor(e,i){this._storage=new jN,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i,r){this._storage.put(e,i,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}};function yoe(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function II(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function EI(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let PL=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const s=r==null?void 0:r.name,h=CI(r==null?void 0:r.name);if(s&&h){const f=AI(s);this._fieldsMap.set(s,r),this._fieldsMap.set(f,r),this._normalizedFieldsMap.set(h,r),i.push(f),yoe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):e7(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),II(r)||EI(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)II(e)||EI(e)||e.nullable||PK(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(AI(e))??this._normalizedFieldsMap.get(CI(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function AI(t){return t.trim().toLowerCase()}function CI(t){var e;return((e=MK(t))==null?void 0:e.toLowerCase())??""}const kI="esri.renderers.support.DictionaryLoader",moe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let sM=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new foe(100),this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(R){if(Ts(R))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const R of this._symbolFields){const L=this._getFieldName(this.fieldMap[R]);s[R]=L?""+e.attributes[L]:""}let h=null;try{h=r==null?void 0:r(s,i)}catch{return null}if(!h||typeof h!="string")return null;const f=oS(h).toString(),m=this._symbolCache.get(f);if(m)return m.catch(()=>{this._symbolCache.pop(f)}),m;const b=h.split(";"),S=[],I=[];for(const R of b)if(R)if(R.includes("po:")){const L=R.substr(3).split("|");if(L.length===3){const z=L[0],j=L[1];let H=L[2];if(j==="DashTemplate")H=H.split(" ").map(Y=>Number(Y));else if(j==="Color"){const Y=new Be(H).toRgba();H=[Y[0],Y[1],Y[2],255*Y[3]]}else H=Number(H);I.push({primitiveName:z,propertyName:j,value:H})}}else if(R.includes("|")){for(const L of R.split("|"))if(this._itemNames.has(L)){S.push(L);break}}else this._itemNames.has(R)&&S.push(R);const A=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",O=this._cimPartsToCIMSymbol(S,I,A,i);return this._symbolCache.put(f,O,1),O}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void fe.getLogger(kI).error("no valid URL!");const i=wi(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,al()]);if(!r)throw this._dictionaryPromise=null,new ne("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,h=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=h.symbol;const f={};if(this.config){const S=this.config;for(const I in S)f[I]=S[I]}if(h.configuration)for(const S of h.configuration)f.hasOwnProperty(S.name)||(f[S.name]=S.value);const m=[];if(e!=null&&e.fields&&this.fieldMap)for(const S of this._symbolFields){const I=this.fieldMap[S],A=e.fields.filter(O=>O.name.toLowerCase()===(I==null?void 0:I.toLowerCase()));A.length>0&&m.push({...A[0],type:"esriFieldTypeString"})}m.length>0&&(this._fieldIndex=new PL(m));const b=vK(s,e!=null?e.spatialReference:null,m,f).then(S=>{const I={scale:0};return(A,O)=>{if(S==null)return null;const R=S.repurposeFeature({geometry:null,attributes:A});return I.scale=O!=null?O.scale??void 0:void 0,S.evaluate({$feature:R,$view:I})}}).catch(S=>(fe.getLogger(kI).error("Creating dictinoary expression failed:",S),null));return this._dictionaryPromise=b,b}async _cimPartsToCIMSymbol(e,i,r,s){const h=new Array(e.length);for(let b=0;b<e.length;b++)h[b]=this._getSymbolPart(e[b],s);const f=await Promise.all(h),m=this.fieldMap;if(m)for(const b of f)RL(b,m);return new O0({data:this._combineSymbolParts(f,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(h=>h.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),s=wi(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,s);try{return(await s).data}catch(h){throw this._ongoingRequests.delete(e),h}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const s={...e[0]};if(e.length>1){s.symbolLayers=[];for(const h of e){const f=h;s.symbolLayers.unshift(...f.symbolLayers)}}return r&&(s.callout=moe),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function RL(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&goe(s,e)}}function goe(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":RL(s,e);break;case"CIMTextSymbol":s.fieldMap=e}}}const N5e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:sM},Symbol.toStringTag,{value:"Module"}));var Px;let Ks=Px=class extends z0(gl){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new sM(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new Px({config:se(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:se(this.fieldMap),url:se(this.url),visualVariables:se(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await ln(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};v([x({type:sM})],Ks.prototype,"_loader",null),v([x({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ks.prototype,"config",void 0),v([x({type:Object,json:{write:!0}})],Ks.prototype,"fieldMap",void 0),v([x({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ks.prototype,"scaleExpression",void 0),v([Ee("scaleExpression")],Ks.prototype,"writeData",null),v([x({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Ks.prototype,"scaleExpressionTitle",void 0),v([x({type:String,json:{write:!0}})],Ks.prototype,"url",void 0),v([Ee("visualVariables")],Ks.prototype,"writeVisualVariables",null),Ks=Px=v([B("esri.renderers.DictionaryRenderer")],Ks);const voe=Ks;var Rx;let Na=Rx=class extends ye{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(fe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Qy(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Rx({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([x({type:Be,json:{type:[Number],write:!0}})],Na.prototype,"color",void 0),v([x({type:String,json:{write:!0}})],Na.prototype,"field",void 0),v([vt("field")],Na.prototype,"castField",null),v([x({type:String,json:{write:!0}})],Na.prototype,"label",void 0),v([x({type:String,json:{write:!0}})],Na.prototype,"valueExpression",void 0),v([x({type:String,json:{write:!0}})],Na.prototype,"valueExpressionTitle",void 0),Na=Rx=v([B("esri.renderers.support.AttributeColorInfo")],Na);const FL=Na;var Fx;let Hv=Fx=class extends ye{constructor(){super(...arguments),this.unit=null}clone(){return new Fx({unit:this.unit})}};v([x({type:String,json:{write:!0}})],Hv.prototype,"unit",void 0),Hv=Fx=v([B("esri.renderers.support.DotDensityLegendOptions")],Hv);const woe=Hv;var Nx;let gn=Nx=class extends z0(gl){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Be([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Is,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new nh({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Nx({attributes:se(this.attributes),backgroundColor:se(this.backgroundColor),dotBlendingEnabled:se(this.dotBlendingEnabled),dotShape:se(this.dotShape),dotSize:se(this.dotSize),dotValue:se(this.dotValue),legendOptions:se(this.legendOptions),outline:se(this.outline),referenceScale:se(this.referenceScale),visualVariables:se(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await ln(t,e,i.valueExpression),i.field&&t.add(i.field)}};v([x({type:[FL],json:{write:!0}})],gn.prototype,"attributes",void 0),v([x({type:Be,json:{write:!0}})],gn.prototype,"backgroundColor",void 0),v([x({type:Boolean,json:{write:!0}})],gn.prototype,"dotBlendingEnabled",void 0),v([x({type:String,json:{write:!1}})],gn.prototype,"dotShape",void 0),v([x({type:Number,json:{write:!0}})],gn.prototype,"dotSize",void 0),v([x({type:woe,json:{write:!0}})],gn.prototype,"legendOptions",void 0),v([x({type:Is,json:{default:null,write:!0}})],gn.prototype,"outline",void 0),v([x({type:Number,json:{write:!0}})],gn.prototype,"dotValue",void 0),v([x({type:Number,json:{write:!0}})],gn.prototype,"referenceScale",void 0),v([x({type:Number,json:{write:!0}})],gn.prototype,"seed",void 0),v([Le({dotDensity:"dot-density"})],gn.prototype,"type",void 0),gn=Nx=v([B("esri.renderers.DotDensityRenderer")],gn);const boe=gn;let hd=class extends ti(ye){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};v([x({type:String,json:{write:!0}})],hd.prototype,"minLabel",void 0),v([x({type:String,json:{write:!0}})],hd.prototype,"maxLabel",void 0),v([x({type:String,json:{write:!0}})],hd.prototype,"title",void 0),hd=v([B("esri.renderers.support.HeatmapLegendOptions")],hd);function ca(){return[0,0,0,0]}function _oe(t){return[t[0],t[1],t[2],t[3]]}function hr(t,e,i,r){return[t,e,i,r]}function xoe(t){const e=ca(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function NL(t,e){return new Float64Array(t,e,4)}function LL(){return ca()}function jL(){return hr(1,1,1,1)}function DL(){return hr(1,0,0,0)}function zL(){return hr(0,1,0,0)}function VL(){return hr(0,0,1,0)}function GL(){return hr(0,0,0,1)}const Soe=LL(),Moe=jL(),$oe=DL(),Toe=zL(),Ioe=VL(),Eoe=GL();Object.freeze(Object.defineProperty({__proto__:null,ONES:Moe,UNIT_W:Eoe,UNIT_X:$oe,UNIT_Y:Toe,UNIT_Z:Ioe,ZEROS:Soe,clone:_oe,create:ca,createView:NL,fromArray:xoe,fromValues:hr,ones:jL,unitW:GL,unitX:DL,unitY:zL,unitZ:VL,zeros:LL},Symbol.toStringTag,{value:"Module"}));const oM=2.4;function Aoe(t){return ul(t*oM)}function Coe(t){return WP(t)/oM}function koe(t,e,i,r){let{color:s,ratio:h}=e,{color:f,ratio:m}=i;m===h&&(m===1?h-=1e-6:m+=1e-6);const b=fi((r-h)/(m-h),0,1);qS(t,s.toArray(),f.toArray(),b)}function j5e(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:m})=>m>=0&&m<=1).sort((m,b)=>m.ratio-b.ratio).map(({color:m,ratio:b})=>({color:m,ratio:Math.max(b,.001)})),t.length<1)return i;let r=t[0],s=t[0],h=1;const f=ca();for(let m=0;m<512;m++){const b=(m+.5)/512;for(;b>s.ratio&&h<t.length;)r=s,s=t[h++];koe(f,r,s,b),i.set(f,4*m)}return i}function D5e(t,e,i,r){const{radius:s,fieldOffset:h,field:f}=e,m=Math.round(WP(s)),b=new Float64Array(i*r);let S,I=Number.NEGATIVE_INFINITY;const A=Roe(f,h),O=new Set;for(const R of t){const L=R.getCursor();for(;L.next();){const z=L.getObjectId();if(O.has(z))continue;O.add(z);const j=L.readLegacyPointGeometry(),H=128;if(j.x<-H||j.x>=i+H||j.y<-H||j.y>r+H)continue;const Y=+A(L),X=Math.max(0,Math.round(j.x)-m),te=Math.max(0,Math.round(j.y)-m),oe=Math.min(r,Math.round(j.y)+m),le=Math.min(i,Math.round(j.x)+m);for(let ve=te;ve<oe;ve++)for(let xe=X;xe<le;xe++){const Fe=ve*i+xe,Pe=Poe(j.x-xe,j.y-ve,m);S=b[Fe]+=Pe*Y,S>I&&(I=S)}}}return{matrix:b.buffer,max:I}}function z5e(t,e,i,r,s,h){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const f=t.getImageData(0,0,e,e);i&&r&&f.data.set(new Uint8ClampedArray(Ooe(e,i,r,s,h))),t.putImageData(f,0,0)}function Ooe(t,e,i,r,s){const h=new Uint32Array(t*t),f="buffer"in e?e:new Float64Array(e),m="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),b=m.length/(s-r);for(let S=0;S<f.length;S++){const I=f[S],A=Math.floor((I-r)*b);h[S]=m[fi(A,0,m.length-1)]}return h.buffer}function Poe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function V5e(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function Roe(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var Lx;const qL="esri.renderers.HeatmapRenderer",Foe=fe.getLogger(qL);function OI(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:h,minPixelIntensity:f,...m}=t;return m}}return t}let Xi=Lx=class extends gl{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new J1({ratio:0,color:new Be("rgba(255, 140, 0, 0)")}),new J1({ratio:.75,color:new Be("rgba(255, 140, 0, 1)")}),new J1({ratio:.9,color:new Be("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return OI(t)}get blurRadius(){return Coe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Aoe(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(oM**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Hr(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,T0(()=>{yy(Foe,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=OI(t),super.read(t,e)}getSymbol(){return new sh}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Hn(t,e,i),r&&typeof r=="string"&&await ln(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Lx({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:se(this.colorStops),field:this.field,legendOptions:se(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([x({type:tM,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xi.prototype,"authoringInfo",void 0),v([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xi.prototype,"blurRadius",null),v([x({type:[J1],json:{write:!0}})],Xi.prototype,"colorStops",void 0),v([x({type:String,json:{write:!0}})],Xi.prototype,"field",void 0),v([x({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Xi.prototype,"fieldOffset",void 0),v([x({type:hd,json:{write:!0}})],Xi.prototype,"legendOptions",void 0),v([x({type:Number,json:{write:!0}})],Xi.prototype,"maxDensity",void 0),v([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xi.prototype,"maxPixelIntensity",null),v([x({type:Number,json:{write:!0}})],Xi.prototype,"minDensity",void 0),v([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xi.prototype,"minPixelIntensity",null),v([x({type:Number,cast:It,json:{write:!0}})],Xi.prototype,"radius",void 0),v([x({type:Number,range:{min:0},json:{default:0,write:!0}})],Xi.prototype,"referenceScale",void 0),v([Le({heatmap:"heatmap"})],Xi.prototype,"type",void 0),v([x({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Xi.prototype,"valueExpression",void 0),v([x({type:String})],Xi.prototype,"valueExpressionTitle",void 0),v([x({readOnly:!0})],Xi.prototype,"_pixelIntensityToDensity",null),Xi=Lx=v([B(qL)],Xi);const UL=Xi;let vc=class extends ti(ye){constructor(){super(...arguments),this.color=new Be([0,0,0,0]),this.label=null,this.threshold=0}};v([x({type:Be,json:{write:!0}})],vc.prototype,"color",void 0),v([x({type:String,json:{write:!0}})],vc.prototype,"label",void 0),v([x({type:Number,range:{min:0,max:1},json:{write:!0}})],vc.prototype,"threshold",void 0),vc=v([B("esri.renderers.support.OthersCategory")],vc);let Wv=class extends ti(ye){constructor(){super(...arguments),this.title=null}};v([x({type:String,json:{write:!0}})],Wv.prototype,"title",void 0),Wv=v([B("esri.renderers.support.PieChartLegendOptions")],Wv);let Fn=class extends z0(ti(gl)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Be([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new vc,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new sh({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Zn)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await ln(e,i,r.valueExpression),r.field&&e.add(r.field)}};v([x({type:[FL],json:{write:!0}})],Fn.prototype,"attributes",void 0),v([x({type:nh,json:{default:null,write:!0}})],Fn.prototype,"backgroundFillSymbol",void 0),v([x({type:Be,json:{write:!0}})],Fn.prototype,"defaultColor",void 0),v([x({type:String,json:{write:!0}})],Fn.prototype,"defaultLabel",void 0),v([x({type:Number,range:{min:0,max:1},json:{write:!0}})],Fn.prototype,"holePercentage",void 0),v([x({type:vc,json:{write:!0}})],Fn.prototype,"othersCategory",void 0),v([x({type:Wv,json:{write:!0}})],Fn.prototype,"legendOptions",void 0),v([x({type:Is,json:{default:null,write:!0}})],Fn.prototype,"outline",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Fn.prototype,"size",void 0),v([Le({pieChart:"pie-chart"})],Fn.prototype,"type",void 0),Fn=v([B("esri.renderers.PieChartRenderer")],Fn);const Noe=Fn;var jx;let Zh=jx=class extends z0(gl){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new jx({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:se(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};v([x({type:String,json:{write:!0}})],Zh.prototype,"description",void 0),v([x({type:String,json:{write:!0}})],Zh.prototype,"label",void 0),v([x(V0)],Zh.prototype,"symbol",void 0),v([Le({simple:"simple"})],Zh.prototype,"type",void 0),Zh=jx=v([B("esri.renderers.SimpleRenderer")],Zh);const f0=Zh,Loe=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function Dx(t){return t instanceof Oe}function PI(t){return t instanceof qe?Object.keys(t.items):Dx(t)?Hr(t).keys():t?Object.keys(t):[]}function mg(t,e){return t instanceof qe?t.items[e]:t[e]}function joe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Y1(t){return t?t.declaredClass:null}function BL(t,e){var A;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=PI(t),s=PI(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||joe(t,e))return{type:"complete",oldValue:t,newValue:e};const h=s.filter(O=>!r.includes(O)),f=r.filter(O=>!s.includes(O)),m=r.filter(O=>s.includes(O)&&mg(t,O)!==mg(e,O)).concat(h,f).sort(),b=Y1(t);if(b&&Loe.includes(b)&&m.length)return{type:"complete",oldValue:t,newValue:e};let S;const I=Dx(t)&&Dx(e);for(const O of m){const R=mg(t,O),L=mg(e,O);let z;if((I||typeof R!="function"&&typeof L!="function")&&R!==L&&(R!=null||L!=null)){if(i&&i[O]&&typeof i[O]=="function")z=(A=i[O])==null?void 0:A.call(i,R,L);else if(R instanceof Date&&L instanceof Date){if(R.getTime()===L.getTime())continue;z={type:"complete",oldValue:R,newValue:L}}else z=typeof R=="object"&&typeof L=="object"&&Y1(R)===Y1(L)?BL(R,L):{type:"complete",oldValue:R,newValue:L};z!=null&&(S!=null?S.diff[O]=z:S={type:"partial",diff:{[O]:z}})}}return S}function Doe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const h=r.diff[s];if(!h)return!1;r=h}}return!0}function B5e(t,e){for(const i of e)if(Doe(t,i))return!0;return!1}function zoe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Y1(t)!==Y1(e)?{type:"complete",oldValue:t,newValue:e}:BL(t,e)}let cd=class extends ti(ye){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};v([x(qv)],cd.prototype,"value",void 0),v([x(qv)],cd.prototype,"value2",void 0),v([x(qv)],cd.prototype,"value3",void 0),cd=v([B("esri.renderers.support.UniqueValue")],cd);const Kd=cd;let su=class extends ti(ye){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Kd({value:r})):i==="object"?e[0]instanceof Kd?e:e.map(r=>new Kd(r)):null}};v([x({type:String,json:{write:!0}})],su.prototype,"description",void 0),v([x({type:String,json:{write:!0}})],su.prototype,"label",void 0),v([x(V0)],su.prototype,"symbol",void 0),v([x({type:[Kd],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Kd({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(Zn).map(h=>h.toString());i.push(s)}e.values=i}}}})],su.prototype,"values",void 0),v([vt("values")],su.prototype,"castValues",null),su=v([B("esri.renderers.support.UniqueValueClass")],su);const HL=su;let c1=class extends ti(ye){constructor(e){super(e),this.heading=null,this.classes=null}};v([x({type:String,json:{write:!0}})],c1.prototype,"heading",void 0),v([x({type:[HL],json:{write:!0}})],c1.prototype,"classes",void 0),c1=v([B("esri.renderers.support.UniqueValueGroup")],c1);const zx=c1;var Vx;let Yh=Vx=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Vx({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};v([x({type:String,json:{write:!0}})],Yh.prototype,"description",void 0),v([x({type:String,json:{write:!0}})],Yh.prototype,"label",void 0),v([x(V0)],Yh.prototype,"symbol",void 0),v([x(qv)],Yh.prototype,"value",void 0),Yh=Vx=v([B("esri.renderers.support.UniqueValueInfo")],Yh);const X1=Yh,Voe=()=>!!ue("enable-feature:force-wosr"),K5e=()=>!!ue("enable-feature:SceneLayer-editing");let m_={};async function Goe(t,e){try{return{data:(await Hoe(t,e)).data,baseUrl:FB(t),styleUrl:t}}catch(i){return Zo(i),null}}function qoe(t,e,i){const r=e.portal!=null?e.portal:on.getDefault();let s;const h=`${r.url} - ${r.user&&r.user.username} - ${t}`;return m_[h]||(m_[h]=Uoe(t,r,i).then(f=>(s=f,f.fetchData())).then(f=>({data:f,baseUrl:s.itemUrl??"",styleName:t}))),m_[h]}function Uoe(t,e,i){return e.load(i).then(()=>{const r=new Za({disableExtraQuery:!0,query:`owner:${RI} AND type:${FI} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var f;let s=null;const h=t.toLowerCase();if(r&&Array.isArray(r)){for(const m of r)if(((f=m.typeKeywords)==null?void 0:f.some(S=>S.toLowerCase()===h))&&m.type===FI&&m.owner===RI){s=m;break}}if(!s)throw new ne("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function Boe(t,e,i){return t&&t.styleUrl!=null?Goe(t.styleUrl,i):t&&t.styleName!=null?qoe(t.styleName,e,i):Promise.reject(new ne("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Z5e(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Y5e(t,e){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!Voe()){for(const i of t.formatInfos)if(i.type==="gltf")return i.href}return t.webRef}function Hoe(t,e){const i={responseType:"json",query:{f:"json"},...e};return wi(co(t),i)}const RI="esri_en",FI="Style",X5e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var p1;const WL="esri.renderers.UniqueValueRenderer",El=fe.getLogger(WL),NI="uvInfos-watcher",LI="uvGroups-watcher",Woe=",",Joe=ei(X1);function Koe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:h,valueExpression:f}=t,m=!(!e||!i);return[{classes:(h??[]).map(b=>{var H;const{symbol:S,label:I,value:A,description:O}=b,[R,L,z]=m?((H=A==null?void 0:A.toString())==null?void 0:H.split(s||""))||[]:[A],j=[];return(e||f)&&j.push(R),i&&j.push(L),r&&j.push(z),{symbol:S,label:I,values:[j],description:O}})}]}let hi=p1=class extends z0(gl){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let h=0;h<i.length;h++){const f=e.find(m=>m.value===i[h].value);f?zoe(f,i[h])?(s.changed.push({type:"complete",oldValue:f,newValue:i[h]}),r=!0):s.unchanged.push({oldValue:f,newValue:i[h]}):(s.added.push(i[h]),r=!0)}for(let h=0;h<e.length;h++)i.find(f=>f.value===e[h].value)||(s.removed.push(e[h]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Qy(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new ne("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):El.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||on.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=P0(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=lm(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?El.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?El.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void El.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Joe(t):new X1({value:t,symbol:ER(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void El.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await al()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void El.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const s=await al(),{arcadeUtils:h}=s;h.hasGeometryOperations(this.valueExpression)&&await h.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,h)=>s+h.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new p1({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:se(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:se(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=se(this.uniqueValueInfos),i=se(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(se(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),ln(t,e,this.valueExpression)];Hn(t,e,this.field),Hn(t,e,this.field2),Hn(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Boe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const s=new yp({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const h=new X1({value:r.name,symbol:s});e.push(h),this._valueInfoMap[r.name]=h}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Woe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(NI);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(me(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,NI)}}_watchUniqueValueGroups(){this.removeHandles(LI);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(me(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(me(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,h)=>{s!==h&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,LI)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:h,valueExpression:f}=this;if(!e&&!f)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const m=!(!e||!i);for(const b of h)for(const S of b.classes??[]){const{symbol:I,label:A,values:O,description:R}=S;for(const L of O??[]){const{value:z,value2:j,value3:H}=L,Y=[z];i&&Y.push(j),r&&Y.push(H);const X=m?Y.join(s||""):Y[0];t.push(new X1({symbol:I,label:A,value:X,description:R}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:h}=this;if(!e&&!r||!h.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const f=!(!e||!i),m=h.map(S=>{var H;const{symbol:I,label:A,value:O,description:R}=S,[L,z,j]=f?((H=O==null?void 0:O.toString())==null?void 0:H.split(s||""))||[]:[O];return new HL({symbol:I,label:A,description:R,values:[new Kd({value:L,value2:z,value3:j})]})}),b=[new zx({classes:m})];t&&Object.freeze(b),this._set("uniqueValueGroups",b),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:h}=e??{};let f=this._cache.compiledFunc;const m=h.arcadeUtils;if(!f){const S=m.createSyntaxTree(this.valueExpression);f=m.createFunction(S),this._cache.compiledFunc=f}const b=m.executeFunction(f,m.createExecContext(t,m.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[b+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const s=this.field2,h=this.field3,f=[];e&&f.push(i[e]),s&&f.push(i[s]),h&&f.push(i[h]),r=f.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new p1(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||on.getDefault());const r=i.populateFromStyle();return r.catch(s=>{El.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(t,e){const i=new p1(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(s=>{El.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};v([x({readOnly:!0})],hi.prototype,"_cache",null),v([Le({uniqueValue:"unique-value"})],hi.prototype,"type",void 0),v([x(CL)],hi.prototype,"backgroundFillSymbol",void 0),v([x({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],hi.prototype,"field",null),v([vt("field")],hi.prototype,"castField",null),v([Ee("field")],hi.prototype,"writeField",null),v([x({type:String,value:null,json:{write:!0}})],hi.prototype,"field2",null),v([x({type:String,value:null,json:{write:!0}})],hi.prototype,"field3",null),v([x({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],hi.prototype,"orderByClassesEnabled",void 0),v([x({type:String,value:null,json:{write:!0}})],hi.prototype,"valueExpression",null),v([x({type:String,json:{write:!0}})],hi.prototype,"valueExpressionTitle",void 0),v([x({type:Jd,json:{write:!0}})],hi.prototype,"legendOptions",void 0),v([x({type:String,json:{write:!0}})],hi.prototype,"defaultLabel",void 0),v([x(GC({...V0},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],hi.prototype,"defaultSymbol",null),v([x({type:String,value:null,json:{write:!0}})],hi.prototype,"fieldDelimiter",null),v([x({type:on,readOnly:!0})],hi.prototype,"portal",void 0),v([Me("portal",["styleName"])],hi.prototype,"readPortal",null),v([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],hi.prototype,"styleOrigin",void 0),v([Me("styleOrigin",["styleName","styleUrl"])],hi.prototype,"readStyleOrigin",null),v([Ee("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],hi.prototype,"writeStyleOrigin",null),v([x({type:[zx],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||Koe(e)).map(r=>zx.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],hi.prototype,"uniqueValueGroups",null),v([x({type:[X1],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],hi.prototype,"uniqueValueInfos",null),hi=p1=v([B(WL)],hi);const bm=hi,Ob={key:"type",base:gl,typeMap:{heatmap:UL,simple:f0,"unique-value":bm,"class-breaks":OL,"dot-density":boe,dictionary:voe,"pie-chart":Noe},errorContext:"renderer"},Zoe={key:"type",base:gl,typeMap:{simple:f0,"unique-value":bm,"class-breaks":OL,heatmap:UL},errorContext:"renderer"};function Q5e(t,e){return Dy(t,null,e)}const Yoe=th({types:Ob});function Dy(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Ss("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Yoe(t,e,i):null}let Xoe=class JL{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array($9),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new JL,r=this._originStores[ft.DEFAULTS];r&&r.forEach((s,h)=>{i.set(h,se(s),ft.DEFAULTS)});for(let s=ft.SERVICE;s<$9;s++){const h=this._originStores[s];h&&h.forEach((f,m)=>{e&&e.has(m)||i.set(m,se(f),s)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=ft.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const h=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),h!==i}return!1}delete(e,i=ft.USER){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let h=i-1;h>=0;h--){const f=this._originStores[h];if(f&&f.has(e)){this._values.set(e,f.get(e)),this._propertyOriginMap.set(e,h);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r&&r.get(e),h=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),h!==s}originOf(e){return this._propertyOriginMap.get(e)||ft.DEFAULTS}forEach(e){this._values.forEach(e)}};const KL=t=>{let e=class extends t{constructor(...i){super(...i);const r=Hr(this),s=r.store,h=new Xoe;r.store=h,Lk(r,s,h)}read(i,r){Dk(this,i,r)}getAtOrigin(i,r){const s=g_(this),h=ku(r);if(typeof i=="string")return s.get(i,h);const f={};return i.forEach(m=>{f[m]=s.get(m,h)}),f}originOf(i){return v2(this.originIdOf(i))}originIdOf(i){return g_(this).originOf(i)}revert(i,r){const s=g_(this),h=ku(r),f=Hr(this);let m;m=typeof i=="string"?i==="*"?s.keys(h):[i]:i,m.forEach(b=>{f.invalidate(b),s.revert(b,h),f.commit(b)})}};return e=v([B("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function g_(t){return Hr(t).store}let jI=class extends KL(Oe){};jI=v([B("esri.core.ReadOnlyMultiOriginJSONSupport")],jI);const Qoe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return v_(this).delete(i,ku(r))}write(i,r){return Vk(this,i=i||{},r),i}setAtOrigin(i,r,s){Hr(this).setAtOrigin(i,r,ku(s))}removeOrigin(i){const r=v_(this),s=ku(i),h=r.keys(s);for(const f of h)r.originOf(f)===s&&r.set(f,r.get(f,s),ft.USER)}updateOrigin(i,r){const s=v_(this),h=ku(r),f=this.get(i);for(let m=h+1;m<$9;++m)s.delete(i,m);s.set(i,f,h)}toJSON(i){return this.write({},i)}};return e=v([B("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function v_(t){return Hr(t).store}const ZL=t=>{let e=class extends Qoe(KL(t)){constructor(...i){super(...i)}};return e=v([B("esri.core.MultiOriginJSONSupport")],e),e};let DI=class extends ZL(Oe){};DI=v([B("esri.core.MultiOriginJSONSupport")],DI);async function eae(t,e){const{WhereClause:i}=await he(()=>import("./WhereClause-70d00d99.js").then(r=>r.W),["assets/WhereClause-70d00d99.js","assets/executionError-fb3f283a.js"]);return i.create(t,e)}function tae(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}var Gx;let Xh=Gx=class extends ye{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Gx({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([x({type:String,json:{write:!0}})],Xh.prototype,"expression",void 0),v([x({type:String,json:{write:!0}})],Xh.prototype,"name",void 0),v([x({type:["boolean","date","number","string"],json:{write:!0}})],Xh.prototype,"returnType",void 0),v([x({type:String,json:{write:!0}})],Xh.prototype,"title",void 0),Xh=Gx=v([B("esri.form.ExpressionInfo")],Xh);const iae=Xh;let Qh=class extends ye{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};v([x({type:String,json:{write:!0}})],Qh.prototype,"description",void 0),v([x({type:String,json:{write:!0}})],Qh.prototype,"label",void 0),v([x()],Qh.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],Qh.prototype,"visibilityExpression",void 0),Qh=v([B("esri.form.elements.Element")],Qh);const y0=Qh;var qx;let Jv=qx=class extends ye{constructor(t){super(t),this.type=null}clone(){return new qx({type:this.type})}};v([x({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Jv.prototype,"type",void 0),Jv=qx=v([B("esri.form.elements.inputs.AttachmentInput")],Jv);const rae=Jv;var Ux;let ec=Ux=class extends y0{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new Ux({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};v([x({type:String,json:{write:!0}})],ec.prototype,"attachmentKeyword",void 0),v([x({type:Boolean,json:{write:!0}})],ec.prototype,"editable",void 0),v([x({type:rae,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ec.prototype,"input",void 0),v([x({type:["attachment"],json:{read:!1,write:!0}})],ec.prototype,"type",void 0),ec=Ux=v([B("esri.form.elements.AttachmentElement")],ec);const zI=ec;let Kv=class extends ye{constructor(e){super(e),this.type=null}};v([x()],Kv.prototype,"type",void 0),Kv=v([B("esri.form.elements.inputs.Input")],Kv);const G0=Kv;let d1=class extends G0{constructor(e){super(e),this.maxLength=null,this.minLength=0}};v([x({type:Number,json:{write:!0}})],d1.prototype,"maxLength",void 0),v([x({type:Number,json:{write:!0}})],d1.prototype,"minLength",void 0),d1=v([B("esri.form.elements.inputs.TextInput")],d1);const aM=d1;var Bx;let Zv=Bx=class extends aM{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Bx({maxLength:this.maxLength,minLength:this.minLength})}};v([x({type:["barcode-scanner"],json:{read:!1,write:!0}})],Zv.prototype,"type",void 0),Zv=Bx=v([B("esri.form.elements.inputs.BarcodeScannerInput")],Zv);const nae=Zv;var Hx;let pd=Hx=class extends G0{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Hx({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};v([x({type:String,json:{write:!0}})],pd.prototype,"noValueOptionLabel",void 0),v([x({type:Boolean,json:{write:!0}})],pd.prototype,"showNoValueOption",void 0),v([x({type:["combo-box"],json:{read:!1,write:!0}})],pd.prototype,"type",void 0),pd=Hx=v([B("esri.form.elements.inputs.ComboBoxInput")],pd);const sae=pd;var Wx;function VI(t){return t!=null?new Date(t):null}function GI(t){return t?t.getTime():null}let Zs=Wx=class extends G0{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return VI(e.max)}writeMax(t,e){e.max=GI(t)}readMin(t,e){return VI(e.min)}writeMin(t,e){e.min=GI(t)}clone(){return new Wx({includeTime:this.includeTime,max:this.max,min:this.min})}};v([x({type:Boolean,json:{write:!0}})],Zs.prototype,"includeTime",void 0),v([x({type:Date,json:{type:Number,write:!0}})],Zs.prototype,"max",void 0),v([Me("max")],Zs.prototype,"readMax",null),v([Ee("max")],Zs.prototype,"writeMax",null),v([x({type:Date,json:{type:Number,write:!0}})],Zs.prototype,"min",void 0),v([Me("min")],Zs.prototype,"readMin",null),v([Ee("min")],Zs.prototype,"writeMin",null),v([x({type:["datetime-picker"],json:{read:!1,write:!0}})],Zs.prototype,"type",void 0),Zs=Wx=v([B("esri.form.elements.inputs.DateTimePickerInput")],Zs);const oae=Zs;var Jx;let dd=Jx=class extends G0{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Jx({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};v([x({type:String,json:{write:!0}})],dd.prototype,"noValueOptionLabel",void 0),v([x({type:Boolean,json:{write:!0}})],dd.prototype,"showNoValueOption",void 0),v([x({type:["radio-buttons"],json:{read:!1,write:!0}})],dd.prototype,"type",void 0),dd=Jx=v([B("esri.form.elements.inputs.RadioButtonsInput")],dd);const aae=dd;var Kx;let fd=Kx=class extends G0{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Kx({offValue:this.offValue,onValue:this.onValue})}};v([x({type:[String,Number],json:{write:!0}})],fd.prototype,"offValue",void 0),v([x({type:[String,Number],json:{write:!0}})],fd.prototype,"onValue",void 0),v([x({type:["switch"],json:{read:!1,write:!0}})],fd.prototype,"type",void 0),fd=Kx=v([B("esri.form.elements.inputs.SwitchInput")],fd);const lae=fd;var Zx;let Yv=Zx=class extends aM{constructor(t){super(t),this.type="text-area"}clone(){return new Zx({maxLength:this.maxLength,minLength:this.minLength})}};v([x({type:["text-area"],json:{read:!1,write:!0}})],Yv.prototype,"type",void 0),Yv=Zx=v([B("esri.form.elements.inputs.TextAreaInput")],Yv);const uae=Yv;var Yx;let Xv=Yx=class extends aM{constructor(t){super(t),this.type="text-box"}clone(){return new Yx({maxLength:this.maxLength,minLength:this.minLength})}};v([x({type:["text-box"],json:{read:!1,write:!0}})],Xv.prototype,"type",void 0),Xv=Yx=v([B("esri.form.elements.inputs.TextBoxInput")],Xv);const hae=Xv,cae={base:G0,key:"type",typeMap:{"barcode-scanner":nae,"combo-box":sae,"datetime-picker":oae,"radio-buttons":aae,switch:lae,"text-area":uae,"text-box":hae}};var Xx;const YL="esri.form.elements.FieldElement",qI=fe.getLogger(YL);let us=Xx=class extends y0{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return yy(qI,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){yy(qI,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new Xx({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};v([x({types:UN,json:{read:{reader:q7},write:!0}})],us.prototype,"domain",void 0),v([x({type:Boolean,json:{write:!0}})],us.prototype,"editable",null),v([x({type:String,json:{write:!0}})],us.prototype,"editableExpression",void 0),v([x({type:String,json:{write:!0}})],us.prototype,"fieldName",void 0),v([x({type:String,json:{write:!0}})],us.prototype,"hint",void 0),v([x({types:cae,json:{read:{source:"inputType"},write:{target:"inputType"}}})],us.prototype,"input",void 0),v([x({type:String,json:{write:!0}})],us.prototype,"requiredExpression",void 0),v([x({type:String,json:{read:!1,write:!0}})],us.prototype,"type",void 0),v([x({type:String,json:{write:!0}})],us.prototype,"valueExpression",void 0),us=Xx=v([B(YL)],us);const UI=us;var Qx;let La=Qx=class extends y0{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Qx({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:se(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};v([x({type:Number,json:{write:!0}})],La.prototype,"displayCount",void 0),v([x({type:["list"],json:{write:!0}})],La.prototype,"displayType",void 0),v([x({type:Boolean,json:{write:!0}})],La.prototype,"editable",void 0),v([x({type:[s7],json:{write:!0}})],La.prototype,"orderByFields",void 0),v([x({type:Number,json:{write:!0}})],La.prototype,"relationshipId",void 0),v([x({type:["relationship"],json:{read:!1,write:!0}})],La.prototype,"type",void 0),La=Qx=v([B("esri.form.elements.RelationshipElement")],La);const BI=La;function XL(t){return{typesWithGroup:{base:y0,key:"type",typeMap:{attachment:zI,field:UI,group:t,relationship:BI}},typesWithoutGroup:{base:y0,key:"type",typeMap:{attachment:zI,field:UI,relationship:BI}}}}function QL(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function ej(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}function tj(t,e,i=!0){return t?t.map(r=>sa(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var e6;let Wo=e6=class extends y0{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return tj(t,w_,!1)}readElements(t,e){return QL(e.formElements,w_,!1)}writeElements(t,e){e.formElements=ej(t,w_,!1)}clone(){return new e6({description:this.description,elements:se(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};v([x({json:{write:!0}})],Wo.prototype,"elements",void 0),v([vt("elements")],Wo.prototype,"castElements",null),v([Me("elements",["formElements"])],Wo.prototype,"readElements",null),v([Ee("elements")],Wo.prototype,"writeElements",null),v([x({type:["collapsed","expanded"],json:{write:!0}})],Wo.prototype,"initialState",void 0),v([x({type:String,json:{read:!1,write:!0}})],Wo.prototype,"type",void 0),Wo=e6=v([B("esri.form.elements.GroupElement")],Wo);const w_=XL(Wo),pae=Wo;var t6;const b_=XL(pae);let Ys=t6=class extends ye{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return tj(t,b_)}readElements(t,e){return QL(e.formElements,b_)}writeElements(t,e){e.formElements=ej(t,b_)}clone(){return new t6({description:this.description,expressionInfos:se(this.expressionInfos),elements:se(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};v([x({type:String,json:{write:!0}})],Ys.prototype,"description",void 0),v([x({json:{write:!0}})],Ys.prototype,"elements",void 0),v([vt("elements")],Ys.prototype,"castElements",null),v([Me("elements",["formElements"])],Ys.prototype,"readElements",null),v([Ee("elements")],Ys.prototype,"writeElements",null),v([x({type:[iae],json:{write:!0}})],Ys.prototype,"expressionInfos",void 0),v([x({type:Boolean,json:{default:!1,write:!0}})],Ys.prototype,"preserveFieldValuesWhenHidden",void 0),v([x({type:String,json:{write:!0}})],Ys.prototype,"title",void 0),Ys=t6=v([B("esri.form.FormTemplate")],Ys);const dae=Ys;function HI(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const s of r)s.length>2&&(s[2]*=i)}function fae(t,e,i){if(!t&&!e||!i)return;const r=t0(i);WI(t,i,r),WI(e,i,r)}function WI(t,e,i){if(t)for(const r of t)yae(r.geometry,e,i)}function yae(t,e,i){if(t==null||!t.spatialReference||ir(t.spatialReference,e))return;const r=t0(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)HI(t,t.rings,r);else if("paths"in t)HI(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=r)}}let mae=0;const ij="esri.layers.graphics.sources.MemorySource",__=fe.getLogger(ij);let Ba=class extends ol.LoadableMixin(Qw(gp(qe))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);ox(e,this.layer.spatialReference,r);const s=H7.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const h=this.layer.objectIdField;for(const f of s.features){const m=f.attributes[h],b=this._idToClientGraphic.get(m);b&&(f.geometry=b.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ne("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return ox(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:At.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new ne("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],h=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const f=I=>"objectId"in I&&I.objectId!=null?I.objectId:"attributes"in I&&I.attributes[i]!=null?I.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const I of e.deleteFeatures){const A=f(I);A!=null&&s.push(A)}const m=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const I of e.updateFeatures)if(h.push(this._serializeFeature(I)),m){const A=f(I);A!=null&&m.set(A,I)}}fae(r?r.features:null,h,this.layer.spatialReference);const{fullExtent:b,featureEditResults:S}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:h,deletes:s});return this.fullExtent=b,r&&r.finish(S.uidToObjectId),this._updateClientGraphicIds(m,S),this._createEditsResult(S)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new ne("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let s=null;for(let f=0;f<e.length;f++){const m=e[f],b=this._serializeFeature(m);s||m.geometry==null||(s=m.geometry.type),r[f]=b,i.set(`${b.uid}`,m)}const h=this;return{features:r,inferredGeometryType:s,finish(f){const m=h.sourceJSON.objectIdField;for(const b in f){const S=f[b],I=i.get(b);I&&(I.attributes||(I.attributes={}),S===-1?delete I.attributes[m]:I.attributes[m]=S,h._addIdToClientGraphic(I))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),s=(mae++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?ua.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await DY("MemorySourceWorker",{strategy:ue("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:s,hasM:h,hasZ:f,timeInfo:m}=this.layer,b=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const S=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",R=>{__.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),R.preventDefault()}));const I={features:S.features,fields:i&&i.map(R=>R.toJSON()),geometryType:S8.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&h,hasZ:this._layerOrSourceGeometryType==="mesh"||f,objectIdField:s,spatialReference:b?null:r&&r.toJSON(),timeInfo:m?m.toJSON():null},A=await this._connection.invoke("load",I,{signal:e});for(const R of A.warnings)__.warn(R.message,{layer:this.layer,warning:R});A.featureErrors.length&&__.warn(`Encountered ${A.featureErrors.length} validation errors while loading features`,A.featureErrors);const O=A.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(S.inferredGeometryType)&&(O.geometryType=S8.toJSON(S.inferredGeometryType)),this.sourceJSON=O,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),S.finish(A.assignedObjectIds)}};v([dS({Type:Mr,ensureType:ei(Mr)})],Ba.prototype,"itemType",void 0),v([x()],Ba.prototype,"type",void 0),v([x({constructOnly:!0})],Ba.prototype,"layer",void 0),v([x({readOnly:!0})],Ba.prototype,"_workerGeometryType",null),v([x()],Ba.prototype,"sourceJSON",void 0),Ba=v([B(ij)],Ba);function gae(t){return"portalItem"in t}const vae=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):gae(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return v([x({type:String})],e.prototype,"apiKey",null),e=v([B("esri.layers.mixins.APIKeyMixin")],e),e},rj={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},nj=Object.values(rj),sj=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${nj.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),wae=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${nj.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bae=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function o4e(t){return!!sj.test(t)}function q0(t){if(t==null)return null;const e=Jr(t),i=e.path.match(sj)||e.path.match(wae);if(!i)return null;const[,r,s,h,f]=i,m=s.indexOf("/");return{title:lM(m!==-1?s.slice(m+1):s),serverType:rj[h.toLowerCase()],sublayer:f!=null&&f!==""?parseInt(f,10):null,url:{path:r}}}function _ae(t){const e=Jr(t).path.match(bae);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function lM(t){return(t=t.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function xae(t,e){const i=[];if(t){const r=q0(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=lM(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function oj(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",s="//features",h=(t=t.toLowerCase()).includes(e),f=t.includes(i)||t.includes(r)||t.includes(s);return h&&f}function Sae(t,e){return t&&Xk(Qk(t,e))}function Mae(t){let{url:e}=t;if(!e)return{url:e};e=Qk(e,t.logger);const i=Jr(e),r=q0(i.path);let s;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const h=_ae(i.path);h!=null&&(e=h.serviceUrl,s=h.sublayerId)}return{url:Xk(e),layerId:s}}function $ae(t,e,i,r,s){ip(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=Kc(r.url,i,t.layerId.toString()))}function a4e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),h=e.includes("/wmsserver");return i&&(r||s||h)}const Tae=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=q0(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Sae(i,fe.getLogger(this.declaredClass)))}};return v([x()],e.prototype,"title",null),v([x({type:String})],e.prototype,"url",null),e=v([B("esri.layers.mixins.ArcGISService")],e),e},JI={read:{reader:V7},write:{allowNull:!0,writer:G7}},Iae=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return v([x({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),v([x({json:{read:!1,write:!1,origins:{"web-map":JI,"portal-item":JI}}})],e.prototype,"effect",void 0),e=v([B("esri.layers.mixins.BlendLayer")],e),e},Eae=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return v([x({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=v([B("esri.layers.mixins.CustomParametersMixin")],e),e},Aae=new pa.EventEmitter,aj="esri.layers.mixins.EditBusLayer",lj=Symbol(aj);function l4e(t){return t!=null&&typeof t=="object"&&lj in t}const Cae=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([Aae.on("edits",s=>{var I,A,O;const h="layer"in s?s.layer:null,f="layer"in s?(I=s.layer)==null?void 0:I.url:s.serviceUrl,m="layer"in s?(A=s.layer)==null?void 0:A.layerId:s.layerId,b=s.event;if(h===this||f!==this.url)return;if(m!=null&&this.layerId!=null&&m===this.layerId)return void this.emit("edits",se(b));const S=(O=b.editedFeatures)==null?void 0:O.find(({layerId:R})=>R===this.layerId);if(S){const{adds:R,updates:L,deletes:z}=S.editedFeatures,j={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:R?R.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],deletedFeatures:z?z.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],updatedFeatures:L?L.map(({current:{attributes:H}})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],editedFeatures:se(b.editedFeatures),exceededTransferLimit:!1};this.emit("edits",j)}})])},()=>{})}};return e=lj,i=v([B(aj)],i),i};var i6;const x_=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S_=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let zo=i6=class extends ye{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:h,units:f,distance:m}=this;return new ia({geometry:se(i),objectIds:se(h),spatialRelationship:r,timeExtent:se(s),where:e,units:f,distance:m,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:h,distance:f}=this;return new i6({geometry:se(e),objectIds:se(s),spatialRelationship:i,timeExtent:se(r),where:t,units:h,distance:f})}};v([x({type:String,json:{write:!0}})],zo.prototype,"where",void 0),v([x({types:fp,json:{write:!0}})],zo.prototype,"geometry",void 0),v([x({type:x_.apiValues,json:{name:"spatialRel",read:{reader:x_.read},write:{allowNull:!1,writer:x_.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],zo.prototype,"spatialRelationship",void 0),v([x({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],zo.prototype,"distance",void 0),v([x({type:[Number],json:{write:!0}})],zo.prototype,"objectIds",void 0),v([x({type:S_.apiValues,json:{read:S_.read,write:{writer:S_.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],zo.prototype,"units",void 0),v([x({type:fa,json:{write:!0}})],zo.prototype,"timeExtent",void 0),zo=i6=v([B("esri.layers.support.FeatureFilter")],zo);const kae=zo;var r6;const KI={read:{reader:V7},write:{writer:G7,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},ZI={read:{reader:V7},write:{writer:G7,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},YI={name:"showExcludedLabels",default:!0};let tc=r6=class extends ye{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,s;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const h=Object.keys(i.filter);if(h.length>1||h[0]!=="where")return(r=e.messages)==null||r.push(new ne("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=e.messages)==null||s.push(new ne("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new r6({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};v([x({type:kae,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t==null?void 0:t.write({},r);s&&Object.keys(s).length!==0?Wr(i,s,e):Wr(i,null,e)}}}})],tc.prototype,"filter",void 0),v([x({json:{write:!0,origins:{"web-map":KI,"portal-item":KI}}})],tc.prototype,"includedEffect",void 0),v([x({json:{write:!0,origins:{"web-map":ZI,"portal-item":ZI}}})],tc.prototype,"excludedEffect",void 0),v([x({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":YI,"portal-item":YI}}})],tc.prototype,"excludedLabelsVisible",void 0),tc=r6=v([B("esri.layers.support.FeatureEffect")],tc);const Oae=tc,XI={write:{allowNull:!0}},Pae=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return v([x({type:Oae,json:{origins:{"web-map":XI,"portal-item":XI}}})],e.prototype,"featureEffect",void 0),e=v([B("esri.layers.mixins.FeatureEffectLayer")],e),e};var f1;const yw=Ir()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),uj=yw.jsonValues.slice();uq(uj,"orthometric");const Q1=Ir()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Xs=f1=class extends ye{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return yw.write(t,e,i)}readHeightModel(t,e,i){return yw.read(t)||(i&&i.messages&&i.messages.push(Rae(t,{context:i})),null)}readHeightUnit(t,e,i){return Q1.read(t)||(i&&i.messages&&i.messages.push(QI(t,{context:i})),null)}readHeightUnitService(t,e,i){return lO(t)||Q1.read(t)||(i&&i.messages&&i.messages.push(QI(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new f1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=nH(e);return new f1({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new f1;return e.read(t,{origin:"web-scene"}),e}};function QI(t,e){return new Ss("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Rae(t,e){return new Ss("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}v([x({type:yw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:uj,default:"ellipsoidal"}}}})],Xs.prototype,"heightModel",void 0),v([Ee("web-scene","heightModel")],Xs.prototype,"writeHeightModel",null),v([Me(["web-scene","service"],"heightModel")],Xs.prototype,"readHeightModel",null),v([x({type:Q1.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Q1.jsonValues,write:Q1.write}}}})],Xs.prototype,"heightUnit",void 0),v([Me("web-scene","heightUnit")],Xs.prototype,"readHeightUnit",null),v([Me("service","heightUnit")],Xs.prototype,"readHeightUnitService",null),v([x({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Xs.prototype,"vertCRS",void 0),v([Me("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Xs.prototype,"readVertCRS",null),Xs=f1=v([B("esri.geometry.HeightModelInfo")],Xs);const Pb=Xs;function Fae(t){if(!t)return t;const{start:e,end:i}=t;return new fa({start:e!=null?Gc(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?Gc(i,-i.getTimezoneOffset(),"minutes"):i})}function Nae(t){if(!t)return t;const{start:e,end:i}=t;return new fa({start:e!=null?Gc(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?Gc(i,i.getTimezoneOffset(),"minutes"):i})}var n6;let y1=n6=class extends ye{constructor(t){super(t)}async collectRequiredFields(t,e){return ln(t,e,this.expression)}clone(){return new n6({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};v([x({type:String,json:{write:!0}})],y1.prototype,"expression",void 0),v([x({type:String,json:{write:!0}})],y1.prototype,"title",void 0),y1=n6=v([B("esri.layers.support.FeatureExpressionInfo")],y1);const eE=y1;function u4e(t){return 1/(iM[t]||1)}function Lae(){const t=Object.keys(iM);return t.sort(),t}const jae=Lae();var s6;const gg=Ir()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),tE=new tt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ja=s6=class extends ye{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new s6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&sq(this.featureExpressionInfo,t.featureExpressionInfo)}};v([x({type:eE,json:{write:!0}})],ja.prototype,"featureExpressionInfo",void 0),v([Me("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ja.prototype,"readFeatureExpressionInfo",null),v([Ee("featureExpressionInfo",{featureExpressionInfo:{type:eE},"featureExpression.value":{type:[0]}})],ja.prototype,"writeFeatureExpressionInfo",null),v([x({type:gg.apiValues,nonNullable:!0,json:{type:gg.jsonValues,read:gg.read,write:{writer:gg.write,isRequired:!0}}})],ja.prototype,"mode",null),v([x({type:Number,json:{write:!0}})],ja.prototype,"offset",void 0),v([x({type:jae,json:{type:String,read:tE.read,write:tE.write}})],ja.prototype,"unit",null),ja=s6=v([B("esri.layers.support.ElevationInfo")],ja);const Dae=ja,zae={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},uM={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},hM={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},Vae={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:ip}}},Gae={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},qae={value:null,type:Dae,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function h4e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const hj={write:!0,read:!0},o6={type:Number,json:{origins:{"web-document":hj,"portal-item":{write:!0}}}},Uae={...o6,json:{...o6.json,origins:{"web-document":{...hj,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?by(e.layerDefinition.drawingInfo.transparency):void 0:by(e.drawingInfo.transparency)}}},c4e={type:fa,readOnly:!0,get(){var m,b;if(!((m=this.layer)!=null&&m.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(b=this.view)==null?void 0:b.timeExtent;let s=this.layer.timeExtent;t&&(s=Nae(s));let h=i?r&&s?r.intersection(s):r||s:s;if(!h||h.isEmpty||h.isAllTime)return h;e&&(h=h.offset(-e.value,e.unit)),t&&(h=Fae(h));const f=this._get("timeExtent");return h.equals(f)?f:h}},p4e={type:At,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=At.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Ye.fromJSON(e.spatialReference)),i}}}},read:!1}},Bae={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Hae={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Wae={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},cj={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},iE=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class vp extends Error{}class Jae extends vp{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Kae extends vp{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Zae extends vp{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class m1 extends vp{}class pj extends vp{constructor(e){super(`Invalid unit ${e}`)}}class ys extends vp{}class Al extends vp{constructor(){super("Zone is an abstract class")}}const Ce="numeric",bo="short",Jn="long",mw={year:Ce,month:Ce,day:Ce},dj={year:Ce,month:bo,day:Ce},Yae={year:Ce,month:bo,day:Ce,weekday:bo},fj={year:Ce,month:Jn,day:Ce},yj={year:Ce,month:Jn,day:Ce,weekday:Jn},mj={hour:Ce,minute:Ce},gj={hour:Ce,minute:Ce,second:Ce},vj={hour:Ce,minute:Ce,second:Ce,timeZoneName:bo},wj={hour:Ce,minute:Ce,second:Ce,timeZoneName:Jn},bj={hour:Ce,minute:Ce,hourCycle:"h23"},_j={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23"},xj={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:bo},Sj={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:Jn},Mj={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce},$j={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce,second:Ce},Tj={year:Ce,month:bo,day:Ce,hour:Ce,minute:Ce},Ij={year:Ce,month:bo,day:Ce,hour:Ce,minute:Ce,second:Ce},Xae={year:Ce,month:bo,day:Ce,weekday:bo,hour:Ce,minute:Ce},Ej={year:Ce,month:Jn,day:Ce,hour:Ce,minute:Ce,timeZoneName:bo},Aj={year:Ce,month:Jn,day:Ce,hour:Ce,minute:Ce,second:Ce,timeZoneName:bo},Cj={year:Ce,month:Jn,day:Ce,weekday:Jn,hour:Ce,minute:Ce,timeZoneName:Jn},kj={year:Ce,month:Jn,day:Ce,weekday:Jn,hour:Ce,minute:Ce,second:Ce,timeZoneName:Jn};class _m{get type(){throw new Al}get name(){throw new Al}get ianaName(){return this.name}get isUniversal(){throw new Al}offsetName(e,i){throw new Al}formatOffset(e,i){throw new Al}offset(e){throw new Al}equals(e){throw new Al}get isValid(){throw new Al}}let M_=null;class Rb extends _m{static get instance(){return M_===null&&(M_=new Rb),M_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Pj(e,i,r)}formatOffset(e,i){return ty(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Qv={};function Qae(t){return Qv[t]||(Qv[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Qv[t]}const ele={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tle(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,h,f,m,b,S,I]=r;return[f,s,h,m,b,S,I]}function ile(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:h,value:f}=i[s],m=ele[h];h==="era"?r[m]=f:kt(m)||(r[m]=parseInt(f,10))}return r}let vg={};class hl extends _m{static create(e){return vg[e]||(vg[e]=new hl(e)),vg[e]}static resetCache(){vg={},Qv={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=hl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Pj(e,i,r,this.name)}formatOffset(e,i){return ty(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=Qae(this.name);let[s,h,f,m,b,S,I]=r.formatToParts?ile(r,i):tle(r,i);m==="BC"&&(s=-Math.abs(s)+1);const O=dM({year:s,month:h,day:f,hour:b===24?0:b,minute:S,second:I,millisecond:0});let R=+i;const L=R%1e3;return R-=L>=0?L:1e3+L,(O-R)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let rE={};function rle(t,e={}){const i=JSON.stringify([t,e]);let r=rE[i];return r||(r=new Intl.ListFormat(t,e),rE[i]=r),r}let a6={};function l6(t,e={}){const i=JSON.stringify([t,e]);let r=a6[i];return r||(r=new Intl.DateTimeFormat(t,e),a6[i]=r),r}let u6={};function nle(t,e={}){const i=JSON.stringify([t,e]);let r=u6[i];return r||(r=new Intl.NumberFormat(t,e),u6[i]=r),r}let h6={};function sle(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let h=h6[s];return h||(h=new Intl.RelativeTimeFormat(t,e),h6[s]=h),h}let g1=null;function ole(){return g1||(g1=new Intl.DateTimeFormat().resolvedOptions().locale,g1)}function ale(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=l6(t).resolvedOptions(),s=t}catch{const b=t.substring(0,i);r=l6(b).resolvedOptions(),s=b}const{numberingSystem:h,calendar:f}=r;return[s,h,f]}}function lle(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function ule(t){const e=[];for(let i=1;i<=12;i++){const r=ht.utc(2016,i,1);e.push(t(r))}return e}function hle(t){const e=[];for(let i=1;i<=7;i++){const r=ht.utc(2016,11,13+i);e.push(t(r))}return e}function wg(t,e,i,r,s){const h=t.listingMode(i);return h==="error"?null:h==="en"?r(e):s(e)}function cle(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class ple{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:h,...f}=r;if(!i||Object.keys(f).length>0){const m={useGrouping:!1,...r};r.padTo>0&&(m.minimumIntegerDigits=r.padTo),this.inf=nle(e,m)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):pM(e,3);return qi(i,this.padTo)}}}class dle{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const f=-1*(e.offset/60),m=f>=0?`Etc/GMT+${f}`:`Etc/GMT${f}`;e.offset!==0&&hl.create(m).valid?(s=m,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const h={...this.opts};h.timeZone=h.timeZone||s,this.dtf=l6(i,h)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class fle{constructor(e,i,r){this.opts={style:"long",...r},!i&&Oj()&&(this.rtf=sle(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):kle(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class pi{static fromOpts(e){return pi.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,s=!1){const h=e||Gi.defaultLocale,f=h||(s?"en-US":ole()),m=i||Gi.defaultNumberingSystem,b=r||Gi.defaultOutputCalendar;return new pi(f,m,b,h)}static resetCache(){g1=null,a6={},u6={},h6={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return pi.create(e,i,r)}constructor(e,i,r,s){const[h,f,m]=ale(e);this.locale=h,this.numberingSystem=i||f||null,this.outputCalendar=r||m||null,this.intl=lle(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cle(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:pi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return wg(this,e,r,Nj,()=>{const s=i?{month:e,day:"numeric"}:{month:e},h=i?"format":"standalone";return this.monthsCache[h][e]||(this.monthsCache[h][e]=ule(f=>this.extract(f,s,"month"))),this.monthsCache[h][e]})}weekdays(e,i=!1,r=!0){return wg(this,e,r,Dj,()=>{const s=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},h=i?"format":"standalone";return this.weekdaysCache[h][e]||(this.weekdaysCache[h][e]=hle(f=>this.extract(f,s,"weekday"))),this.weekdaysCache[h][e]})}meridiems(e=!0){return wg(this,void 0,e,()=>zj,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ht.utc(2016,11,13,9),ht.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return wg(this,e,i,Vj,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[ht.utc(-40,1,1),ht.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),h=s.formatToParts(),f=h.find(m=>m.type.toLowerCase()===r);return f?f.value:null}numberFormatter(e={}){return new ple(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new dle(e,this.intl,i)}relFormatter(e={}){return new fle(this.intl,this.isEnglish(),e)}listFormatter(e={}){return rle(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let $_=null;class Br extends _m{static get utcInstance(){return $_===null&&($_=new Br(0)),$_}static instance(e){return e===0?Br.utcInstance:new Br(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Br(Nb(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ty(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ty(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return ty(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class yle extends _m{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Tu(t,e){if(kt(t)||t===null)return e;if(t instanceof _m)return t;if(mle(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Rb.instance:i==="utc"||i==="gmt"?Br.utcInstance:Br.parseSpecifier(i)||hl.create(t)}else return qc(t)?Br.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new yle(t)}let nE=()=>Date.now(),sE="system",oE=null,aE=null,lE=null,uE=60,hE;class Gi{static get now(){return nE}static set now(e){nE=e}static set defaultZone(e){sE=e}static get defaultZone(){return Tu(sE,Rb.instance)}static get defaultLocale(){return oE}static set defaultLocale(e){oE=e}static get defaultNumberingSystem(){return aE}static set defaultNumberingSystem(e){aE=e}static get defaultOutputCalendar(){return lE}static set defaultOutputCalendar(e){lE=e}static get twoDigitCutoffYear(){return uE}static set twoDigitCutoffYear(e){uE=e%100}static get throwOnInvalid(){return hE}static set throwOnInvalid(e){hE=e}static resetCaches(){pi.resetCache(),hl.resetCache()}}function kt(t){return typeof t>"u"}function qc(t){return typeof t=="number"}function Fb(t){return typeof t=="number"&&t%1===0}function mle(t){return typeof t=="string"}function gle(t){return Object.prototype.toString.call(t)==="[object Date]"}function Oj(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function vle(t){return Array.isArray(t)?t:[t]}function cE(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const h=[e(s),s];return r&&i(r[0],h[0])===r[0]?r:h},null)[1]}function wle(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function m0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xa(t,e,i){return Fb(t)&&t>=e&&t<=i}function ble(t,e){return t-e*Math.floor(t/e)}function qi(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function bu(t){if(!(kt(t)||t===null||t===""))return parseInt(t,10)}function ph(t){if(!(kt(t)||t===null||t===""))return parseFloat(t)}function cM(t){if(!(kt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function pM(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function xm(t){return t%4===0&&(t%100!==0||t%400===0)}function ey(t){return xm(t)?366:365}function gw(t,e){const i=ble(e-1,12)+1,r=t+(e-i)/12;return i===2?xm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function dM(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function vw(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function c6(t){return t>99?t:t>Gi.twoDigitCutoffYear?1900+t:2e3+t}function Pj(t,e,i,r=null){const s=new Date(t),h={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(h.timeZone=r);const f={timeZoneName:e,...h},m=new Intl.DateTimeFormat(i,f).formatToParts(s).find(b=>b.type.toLowerCase()==="timezonename");return m?m.value:null}function Nb(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function Rj(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ys(`Invalid unit value ${t}`);return e}function ww(t,e){const i={};for(const r in t)if(m0(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=Rj(s)}return i}function ty(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${qi(i,2)}:${qi(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${qi(i,2)}${qi(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Lb(t){return wle(t,["hour","minute","second","millisecond"])}const _le=["January","February","March","April","May","June","July","August","September","October","November","December"],Fj=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xle=["J","F","M","A","M","J","J","A","S","O","N","D"];function Nj(t){switch(t){case"narrow":return[...xle];case"short":return[...Fj];case"long":return[..._le];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Lj=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],jj=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Sle=["M","T","W","T","F","S","S"];function Dj(t){switch(t){case"narrow":return[...Sle];case"short":return[...jj];case"long":return[...Lj];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zj=["AM","PM"],Mle=["Before Christ","Anno Domini"],$le=["BC","AD"],Tle=["B","A"];function Vj(t){switch(t){case"narrow":return[...Tle];case"short":return[...$le];case"long":return[...Mle];default:return null}}function Ile(t){return zj[t.hour<12?0:1]}function Ele(t,e){return Dj(e)[t.weekday-1]}function Ale(t,e){return Nj(e)[t.month-1]}function Cle(t,e){return Vj(e)[t.year<0?0:1]}function kle(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},h=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&h){const A=t==="days";switch(e){case 1:return A?"tomorrow":`next ${s[t][0]}`;case-1:return A?"yesterday":`last ${s[t][0]}`;case 0:return A?"today":`this ${s[t][0]}`}}const f=Object.is(e,-0)||e<0,m=Math.abs(e),b=m===1,S=s[t],I=r?b?S[1]:S[2]||S[1]:b?s[t][0]:t;return f?`${m} ${I} ago`:`in ${m} ${I}`}function pE(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const Ole={D:mw,DD:dj,DDD:fj,DDDD:yj,t:mj,tt:gj,ttt:vj,tttt:wj,T:bj,TT:_j,TTT:xj,TTTT:Sj,f:Mj,ff:Tj,fff:Ej,ffff:Cj,F:$j,FF:Ij,FFF:Aj,FFFF:kj};class qr{static create(e,i={}){return new qr(e,i)}static parseFormat(e){let i=null,r="",s=!1;const h=[];for(let f=0;f<e.length;f++){const m=e.charAt(f);m==="'"?(r.length>0&&h.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||m===i?r+=m:(r.length>0&&h.push({literal:/^\s+$/.test(r),val:r}),r=m,i=m)}return r.length>0&&h.push({literal:s||/^\s+$/.test(r),val:r}),h}static macroTokenToFormatOpts(e){return Ole[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return qi(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",h=(R,L)=>this.loc.extract(e,R,L),f=R=>e.isOffsetFixed&&e.offset===0&&R.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,R.format):"",m=()=>r?Ile(e):h({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(R,L)=>r?Ale(e,R):h(L?{month:R}:{month:R,day:"numeric"},"month"),S=(R,L)=>r?Ele(e,R):h(L?{weekday:R}:{weekday:R,month:"long",day:"numeric"},"weekday"),I=R=>{const L=qr.macroTokenToFormatOpts(R);return L?this.formatWithSystemDefault(e,L):R},A=R=>r?Cle(e,R):h({era:R},"era"),O=R=>{switch(R){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return f({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return f({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return f({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return s?h({day:"numeric"},"day"):this.num(e.day);case"dd":return s?h({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return s?h({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?h({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return s?h({month:"numeric"},"month"):this.num(e.month);case"MM":return s?h({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return s?h({year:"numeric"},"year"):this.num(e.year);case"yy":return s?h({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?h({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?h({year:"numeric"},"year"):this.num(e.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return I(R)}};return pE(qr.parseFormat(i),O)}formatDurationFromString(e,i){const r=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=b=>S=>{const I=r(S);return I?this.num(b.get(I),S.length):S},h=qr.parseFormat(i),f=h.reduce((b,{literal:S,val:I})=>S?b:b.concat(I),[]),m=e.shiftTo(...f.map(r).filter(b=>b));return pE(h,s(m))}}class ho{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Gj=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function U0(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function B0(...t){return e=>t.reduce(([i,r,s],h)=>{const[f,m,b]=h(e,s);return[{...i,...f},m||r,b]},[{},null,1]).slice(0,2)}function H0(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function qj(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=bu(e[i+s]);return[r,null,i+s]}}const Uj=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ple=`(?:${Uj.source}?(?:\\[(${Gj.source})\\])?)?`,fM=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Bj=RegExp(`${fM.source}${Ple}`),yM=RegExp(`(?:T${Bj.source})?`),Rle=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Fle=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nle=/(\d{4})-?(\d{3})/,Lle=qj("weekYear","weekNumber","weekDay"),jle=qj("year","ordinal"),Dle=/(\d{4})-(\d\d)-(\d\d)/,Hj=RegExp(`${fM.source} ?(?:${Uj.source}|(${Gj.source}))?`),zle=RegExp(`(?: ${Hj.source})?`);function Zd(t,e,i){const r=t[e];return kt(r)?i:bu(r)}function Vle(t,e){return[{year:Zd(t,e),month:Zd(t,e+1,1),day:Zd(t,e+2,1)},null,e+3]}function W0(t,e){return[{hours:Zd(t,e,0),minutes:Zd(t,e+1,0),seconds:Zd(t,e+2,0),milliseconds:cM(t[e+3])},null,e+4]}function Sm(t,e){const i=!t[e]&&!t[e+1],r=Nb(t[e+1],t[e+2]),s=i?null:Br.instance(r);return[{},s,e+3]}function Mm(t,e){const i=t[e]?hl.create(t[e]):null;return[{},i,e+1]}const Gle=RegExp(`^T?${fM.source}$`),qle=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Ule(t){const[e,i,r,s,h,f,m,b,S]=t,I=e[0]==="-",A=b&&b[0]==="-",O=(R,L=!1)=>R!==void 0&&(L||R&&I)?-R:R;return[{years:O(ph(i)),months:O(ph(r)),weeks:O(ph(s)),days:O(ph(h)),hours:O(ph(f)),minutes:O(ph(m)),seconds:O(ph(b),b==="-0"),milliseconds:O(cM(S),A)}]}const Ble={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mM(t,e,i,r,s,h,f){const m={year:e.length===2?c6(bu(e)):bu(e),month:Fj.indexOf(i)+1,day:bu(r),hour:bu(s),minute:bu(h)};return f&&(m.second=bu(f)),t&&(m.weekday=t.length>3?Lj.indexOf(t)+1:jj.indexOf(t)+1),m}const Hle=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Wle(t){const[,e,i,r,s,h,f,m,b,S,I,A]=t,O=mM(e,s,r,i,h,f,m);let R;return b?R=Ble[b]:S?R=0:R=Nb(I,A),[O,new Br(R)]}function Jle(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Kle=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Zle=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Yle=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function dE(t){const[,e,i,r,s,h,f,m]=t;return[mM(e,s,r,i,h,f,m),Br.utcInstance]}function Xle(t){const[,e,i,r,s,h,f,m]=t;return[mM(e,m,i,r,s,h,f),Br.utcInstance]}const Qle=U0(Rle,yM),eue=U0(Fle,yM),tue=U0(Nle,yM),iue=U0(Bj),Wj=B0(Vle,W0,Sm,Mm),rue=B0(Lle,W0,Sm,Mm),nue=B0(jle,W0,Sm,Mm),sue=B0(W0,Sm,Mm);function oue(t){return H0(t,[Qle,Wj],[eue,rue],[tue,nue],[iue,sue])}function aue(t){return H0(Jle(t),[Hle,Wle])}function lue(t){return H0(t,[Kle,dE],[Zle,dE],[Yle,Xle])}function uue(t){return H0(t,[qle,Ule])}const hue=B0(W0);function cue(t){return H0(t,[Gle,hue])}const pue=U0(Dle,zle),due=U0(Hj),fue=B0(W0,Sm,Mm);function yue(t){return H0(t,[pue,Wj],[due,fue])}const mue="Invalid Duration",Jj={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},gue={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Jj},es=146097/400,Tp=146097/4800,vue={years:{quarters:4,months:12,weeks:es/7,days:es,hours:es*24,minutes:es*24*60,seconds:es*24*60*60,milliseconds:es*24*60*60*1e3},quarters:{months:3,weeks:es/28,days:es/4,hours:es*24/4,minutes:es*24*60/4,seconds:es*24*60*60/4,milliseconds:es*24*60*60*1e3/4},months:{weeks:Tp/7,days:Tp,hours:Tp*24,minutes:Tp*24*60,seconds:Tp*24*60*60,milliseconds:Tp*24*60*60*1e3},...Jj},ic=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wue=ic.slice(0).reverse();function Cl(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Nt(r)}function bue(t){return t<0?Math.floor(t):Math.ceil(t)}function Kj(t,e,i,r,s){const h=t[s][i],f=e[i]/h,m=Math.sign(f)===Math.sign(r[s]),b=!m&&r[s]!==0&&Math.abs(f)<=1?bue(f):Math.trunc(f);r[s]+=b,e[i]-=b*h}function _ue(t,e){wue.reduce((i,r)=>kt(e[r])?i:(i&&Kj(t,e,i,e,r),r),null)}function xue(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Nt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?vue:gue;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||pi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Nt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ys(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Nt({values:ww(e,Nt.normalizeUnit),loc:pi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(qc(e))return Nt.fromMillis(e);if(Nt.isDuration(e))return e;if(typeof e=="object")return Nt.fromObject(e);throw new ys(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=uue(e);return r?Nt.fromObject(r,i):Nt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=cue(e);return r?Nt.fromObject(r,i):Nt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ys("need to specify a reason the Duration is invalid");const r=e instanceof ho?e:new ho(e,i);if(Gi.throwOnInvalid)throw new Zae(r);return new Nt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new pj(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?qr.create(this.loc,r).formatDurationFromString(this,e):mue}toHuman(e={}){const i=ic.map(r=>{const s=this.values[r];return kt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=pM(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let h=r.toFormat(s);return e.includePrefix&&(h="T"+h),h}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Nt.fromDurationLike(e),r={};for(const s of ic)(m0(i.values,s)||m0(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Cl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Nt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Rj(e(this.values[r],r));return Cl(this,{values:i},!0)}get(e){return this[Nt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...ww(e,Nt.normalizeUnit)};return Cl(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const f={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Cl(this,f)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return _ue(this.matrix,e),Cl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=xue(this.normalize().shiftToAll().toObject());return Cl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(f=>Nt.normalizeUnit(f));const i={},r={},s=this.toObject();let h;for(const f of ic)if(e.indexOf(f)>=0){h=f;let m=0;for(const S in r)m+=this.matrix[S][f]*r[S],r[S]=0;qc(s[f])&&(m+=s[f]);const b=Math.trunc(m);i[f]=b,r[f]=(m*1e3-b*1e3)/1e3;for(const S in s)ic.indexOf(S)>ic.indexOf(f)&&Kj(this.matrix,s,S,i,f)}else qc(s[f])&&(r[f]=s[f]);for(const f in r)r[f]!==0&&(i[h]+=f===h?r[f]:r[f]/this.matrix[h][f]);return Cl(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Cl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of ic)if(!i(this.values[r],e.values[r]))return!1;return!0}}const Ip="Invalid Interval";function Sue(t,e){return!t||!t.isValid?Ci.invalid("missing or invalid start"):!e||!e.isValid?Ci.invalid("missing or invalid end"):e<t?Ci.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ci{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ys("need to specify a reason the Interval is invalid");const r=e instanceof ho?e:new ho(e,i);if(Gi.throwOnInvalid)throw new Kae(r);return new Ci({invalid:r})}static fromDateTimes(e,i){const r=vf(e),s=vf(i),h=Sue(r,s);return h??new Ci({start:r,end:s})}static after(e,i){const r=Nt.fromDurationLike(i),s=vf(e);return Ci.fromDateTimes(s,s.plus(r))}static before(e,i){const r=Nt.fromDurationLike(i),s=vf(e);return Ci.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let h,f;try{h=ht.fromISO(r,i),f=h.isValid}catch{f=!1}let m,b;try{m=ht.fromISO(s,i),b=m.isValid}catch{b=!1}if(f&&b)return Ci.fromDateTimes(h,m);if(f){const S=Nt.fromISO(s,i);if(S.isValid)return Ci.after(h,S)}else if(b){const S=Nt.fromISO(r,i);if(S.isValid)return Ci.before(m,S)}}return Ci.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ci.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(vf).filter(f=>this.contains(f)).sort(),r=[];let{s}=this,h=0;for(;s<this.e;){const f=i[h]||this.e,m=+f>+this.e?this.e:f;r.push(Ci.fromDateTimes(s,m)),s=m,h+=1}return r}splitBy(e){const i=Nt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,h;const f=[];for(;r<this.e;){const m=this.start.plus(i.mapUnits(b=>b*s));h=+m>+this.e?this.e:m,f.push(Ci.fromDateTimes(r,h)),r=h,s+=1}return f}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Ci.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Ci.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,h)=>s.s-h.s).reduce(([s,h],f)=>h?h.overlaps(f)||h.abutsStart(f)?[s,h.union(f)]:[s.concat([h]),f]:[s,f],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],h=e.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),f=Array.prototype.concat(...h),m=f.sort((b,S)=>b.time-S.time);for(const b of m)r+=b.type==="s"?1:-1,r===1?i=b.time:(i&&+i!=+b.time&&s.push(Ci.fromDateTimes(i,b.time)),i=null);return Ci.merge(s)}difference(...e){return Ci.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ip}toLocaleString(e=mw,i={}){return this.isValid?qr.create(this.s.loc.clone(i),e).formatInterval(this):Ip}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ip}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ip}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ip}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Ip}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Nt.invalid(this.invalidReason)}mapEndpoints(e){return Ci.fromDateTimes(e(this.s),e(this.e))}}class bg{static hasDST(e=Gi.defaultZone){const i=ht.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return hl.isValidZone(e)}static normalizeZone(e){return Tu(e,Gi.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||pi.create(i,r,h)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||pi.create(i,r,h)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||pi.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||pi.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return pi.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return pi.create(i,null,"gregory").eras(e)}static features(){return{relative:Oj()}}}function fE(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Nt.fromMillis(r).as("days"))}function Mue(t,e,i){const r=[["years",(b,S)=>S.year-b.year],["quarters",(b,S)=>S.quarter-b.quarter+(S.year-b.year)*4],["months",(b,S)=>S.month-b.month+(S.year-b.year)*12],["weeks",(b,S)=>{const I=fE(b,S);return(I-I%7)/7}],["days",fE]],s={},h=t;let f,m;for(const[b,S]of r)i.indexOf(b)>=0&&(f=b,s[b]=S(t,e),m=h.plus(s),m>e?(s[b]--,t=h.plus(s)):t=m);return[t,s,m,f]}function $ue(t,e,i,r){let[s,h,f,m]=Mue(t,e,i);const b=e-s,S=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);S.length===0&&(f<e&&(f=s.plus({[m]:1})),f!==s&&(h[m]=(h[m]||0)+b/(f-s)));const I=Nt.fromObject(h,r);return S.length>0?Nt.fromMillis(b,r).shiftTo(...S).plus(I):I}const gM={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},yE={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Tue=gM.hanidec.replace(/[\[|\]]/g,"").split("");function Iue(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(gM.hanidec)!==-1)e+=Tue.indexOf(t[i]);else for(const s in yE){const[h,f]=yE[s];r>=h&&r<=f&&(e+=r-h)}}return parseInt(e,10)}else return e}function Ns({numberingSystem:t},e=""){return new RegExp(`${gM[t||"latn"]}${e}`)}const Eue="missing Intl.DateTimeFormat.formatToParts support";function zt(t,e=i=>i){return{regex:t,deser:([i])=>e(Iue(i))}}const Aue=String.fromCharCode(160),Zj=`[ ${Aue}]`,Yj=new RegExp(Zj,"g");function Cue(t){return t.replace(/\./g,"\\.?").replace(Yj,Zj)}function mE(t){return t.replace(/\./g,"").replace(Yj," ").toLowerCase()}function Ls(t,e){return t===null?null:{regex:RegExp(t.map(Cue).join("|")),deser:([i])=>t.findIndex(r=>mE(i)===mE(r))+e}}function gE(t,e){return{regex:t,deser:([,i,r])=>Nb(i,r),groups:e}}function _g(t){return{regex:t,deser:([e])=>e}}function kue(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Oue(t,e){const i=Ns(e),r=Ns(e,"{2}"),s=Ns(e,"{3}"),h=Ns(e,"{4}"),f=Ns(e,"{6}"),m=Ns(e,"{1,2}"),b=Ns(e,"{1,3}"),S=Ns(e,"{1,6}"),I=Ns(e,"{1,9}"),A=Ns(e,"{2,4}"),O=Ns(e,"{4,6}"),R=j=>({regex:RegExp(kue(j.val)),deser:([H])=>H,literal:!0}),z=(j=>{if(t.literal)return R(j);switch(j.val){case"G":return Ls(e.eras("short",!1),0);case"GG":return Ls(e.eras("long",!1),0);case"y":return zt(S);case"yy":return zt(A,c6);case"yyyy":return zt(h);case"yyyyy":return zt(O);case"yyyyyy":return zt(f);case"M":return zt(m);case"MM":return zt(r);case"MMM":return Ls(e.months("short",!0,!1),1);case"MMMM":return Ls(e.months("long",!0,!1),1);case"L":return zt(m);case"LL":return zt(r);case"LLL":return Ls(e.months("short",!1,!1),1);case"LLLL":return Ls(e.months("long",!1,!1),1);case"d":return zt(m);case"dd":return zt(r);case"o":return zt(b);case"ooo":return zt(s);case"HH":return zt(r);case"H":return zt(m);case"hh":return zt(r);case"h":return zt(m);case"mm":return zt(r);case"m":return zt(m);case"q":return zt(m);case"qq":return zt(r);case"s":return zt(m);case"ss":return zt(r);case"S":return zt(b);case"SSS":return zt(s);case"u":return _g(I);case"uu":return _g(m);case"uuu":return zt(i);case"a":return Ls(e.meridiems(),0);case"kkkk":return zt(h);case"kk":return zt(A,c6);case"W":return zt(m);case"WW":return zt(r);case"E":case"c":return zt(i);case"EEE":return Ls(e.weekdays("short",!1,!1),1);case"EEEE":return Ls(e.weekdays("long",!1,!1),1);case"ccc":return Ls(e.weekdays("short",!0,!1),1);case"cccc":return Ls(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return gE(new RegExp(`([+-]${m.source})(?::(${r.source}))?`),2);case"ZZZ":return gE(new RegExp(`([+-]${m.source})(${r.source})?`),2);case"z":return _g(/[a-z_+-/]{1,256}?/i);case" ":return _g(/[^\S\n\r]/);default:return R(j)}})(t)||{invalidReason:Eue};return z.token=t,z}const Pue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Rue(t,e){const{type:i,value:r}=t;if(i==="literal"){const f=/^\s+$/.test(r);return{literal:!f,val:f?" ":r}}const s=e[i];let h=Pue[i];if(typeof h=="object"&&(h=h[s]),h)return{literal:!1,val:h}}function Fue(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function Nue(t,e,i){const r=t.match(e);if(r){const s={};let h=1;for(const f in i)if(m0(i,f)){const m=i[f],b=m.groups?m.groups+1:1;!m.literal&&m.token&&(s[m.token.val[0]]=m.deser(r.slice(h,h+b))),h+=b}return[r,s]}else return[r,{}]}function Lue(t){const e=h=>{switch(h){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return kt(t.z)||(i=hl.create(t.z)),kt(t.Z)||(i||(i=new Br(t.Z)),r=t.Z),kt(t.q)||(t.M=(t.q-1)*3+1),kt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),kt(t.u)||(t.S=cM(t.u)),[Object.keys(t).reduce((h,f)=>{const m=e(f);return m&&(h[m]=t[f]),h},{}),i,r]}let T_=null;function jue(){return T_||(T_=ht.fromMillis(1555555555555)),T_}function Due(t,e){if(t.literal)return t;const i=qr.macroTokenToFormatOpts(t.val),r=eD(i,e);return r==null||r.includes(void 0)?t:r}function Xj(t,e){return Array.prototype.concat(...t.map(i=>Due(i,e)))}function Qj(t,e,i){const r=Xj(qr.parseFormat(i),t),s=r.map(f=>Oue(f,t)),h=s.find(f=>f.invalidReason);if(h)return{input:e,tokens:r,invalidReason:h.invalidReason};{const[f,m]=Fue(s),b=RegExp(f,"i"),[S,I]=Nue(e,b,m),[A,O,R]=I?Lue(I):[null,null,void 0];if(m0(I,"a")&&m0(I,"H"))throw new m1("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:b,rawMatches:S,matches:I,result:A,zone:O,specificOffset:R}}}function zue(t,e,i){const{result:r,zone:s,specificOffset:h,invalidReason:f}=Qj(t,e,i);return[r,s,h,f]}function eD(t,e){return t?qr.create(e,t).formatDateTimeParts(jue()).map(s=>Rue(s,t)):null}const tD=[0,31,59,90,120,151,181,212,243,273,304,334],iD=[0,31,60,91,121,152,182,213,244,274,305,335];function vs(t,e){return new ho("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function rD(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function nD(t,e,i){return i+(xm(t)?iD:tD)[e-1]}function sD(t,e){const i=xm(t)?iD:tD,r=i.findIndex(h=>h<e),s=e-i[r];return{month:r+1,day:s}}function p6(t){const{year:e,month:i,day:r}=t,s=nD(e,i,r),h=rD(e,i,r);let f=Math.floor((s-h+10)/7),m;return f<1?(m=e-1,f=vw(m)):f>vw(e)?(m=e+1,f=1):m=e,{weekYear:m,weekNumber:f,weekday:h,...Lb(t)}}function vE(t){const{weekYear:e,weekNumber:i,weekday:r}=t,s=rD(e,1,4),h=ey(e);let f=i*7+r-s-3,m;f<1?(m=e-1,f+=ey(m)):f>h?(m=e+1,f-=ey(e)):m=e;const{month:b,day:S}=sD(m,f);return{year:m,month:b,day:S,...Lb(t)}}function I_(t){const{year:e,month:i,day:r}=t,s=nD(e,i,r);return{year:e,ordinal:s,...Lb(t)}}function wE(t){const{year:e,ordinal:i}=t,{month:r,day:s}=sD(e,i);return{year:e,month:r,day:s,...Lb(t)}}function Vue(t){const e=Fb(t.weekYear),i=Xa(t.weekNumber,1,vw(t.weekYear)),r=Xa(t.weekday,1,7);return e?i?r?!1:vs("weekday",t.weekday):vs("week",t.week):vs("weekYear",t.weekYear)}function Gue(t){const e=Fb(t.year),i=Xa(t.ordinal,1,ey(t.year));return e?i?!1:vs("ordinal",t.ordinal):vs("year",t.year)}function oD(t){const e=Fb(t.year),i=Xa(t.month,1,12),r=Xa(t.day,1,gw(t.year,t.month));return e?i?r?!1:vs("day",t.day):vs("month",t.month):vs("year",t.year)}function aD(t){const{hour:e,minute:i,second:r,millisecond:s}=t,h=Xa(e,0,23)||e===24&&i===0&&r===0&&s===0,f=Xa(i,0,59),m=Xa(r,0,59),b=Xa(s,0,999);return h?f?m?b?!1:vs("millisecond",s):vs("second",r):vs("minute",i):vs("hour",e)}const E_="Invalid DateTime",bE=864e13;function xg(t){return new ho("unsupported zone",`the zone "${t.name}" is not supported`)}function A_(t){return t.weekData===null&&(t.weekData=p6(t.c)),t.weekData}function mf(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ht({...i,...e,old:i})}function lD(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const h=i.offset(r);return s===h?[r,s]:[t-Math.min(s,h)*60*1e3,Math.max(s,h)]}function _E(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function e2(t,e,i){return lD(dM(t),e,i)}function xE(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,h={...t.c,year:r,month:s,day:Math.min(t.c.day,gw(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},f=Nt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=dM(h);let[b,S]=lD(m,i,t.zone);return f!==0&&(b+=f,S=t.zone.offset(b)),{ts:b,o:S}}function gf(t,e,i,r,s,h){const{setZone:f,zone:m}=i;if(t&&Object.keys(t).length!==0||e){const b=e||m,S=ht.fromObject(t,{...i,zone:b,specificOffset:h});return f?S:S.setZone(m)}else return ht.invalid(new ho("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Sg(t,e,i=!0){return t.isValid?qr.create(pi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function C_(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=qi(t.c.year,i?6:4),e?(r+="-",r+=qi(t.c.month),r+="-",r+=qi(t.c.day)):(r+=qi(t.c.month),r+=qi(t.c.day)),r}function SE(t,e,i,r,s,h){let f=qi(t.c.hour);return e?(f+=":",f+=qi(t.c.minute),(t.c.second!==0||!i)&&(f+=":")):f+=qi(t.c.minute),(t.c.second!==0||!i)&&(f+=qi(t.c.second),(t.c.millisecond!==0||!r)&&(f+=".",f+=qi(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!h?f+="Z":t.o<0?(f+="-",f+=qi(Math.trunc(-t.o/60)),f+=":",f+=qi(Math.trunc(-t.o%60))):(f+="+",f+=qi(Math.trunc(t.o/60)),f+=":",f+=qi(Math.trunc(t.o%60)))),h&&(f+="["+t.zone.ianaName+"]"),f}const uD={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},que={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Uue={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hD=["year","month","day","hour","minute","second","millisecond"],Bue=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Hue=["year","ordinal","hour","minute","second","millisecond"];function ME(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new pj(t);return e}function $E(t,e){const i=Tu(e.zone,Gi.defaultZone),r=pi.fromObject(e),s=Gi.now();let h,f;if(kt(t.year))h=s;else{for(const S of hD)kt(t[S])&&(t[S]=uD[S]);const m=oD(t)||aD(t);if(m)return ht.invalid(m);const b=i.offset(s);[h,f]=e2(t,b,i)}return new ht({ts:h,zone:i,loc:r,o:f})}function TE(t,e,i){const r=kt(i.round)?!0:i.round,s=(f,m)=>(f=pM(f,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(f,m)),h=f=>i.calendary?e.hasSame(t,f)?0:e.startOf(f).diff(t.startOf(f),f).get(f):e.diff(t,f).get(f);if(i.unit)return s(h(i.unit),i.unit);for(const f of i.units){const m=h(f);if(Math.abs(m)>=1)return s(m,f)}return s(t>e?-0:0,i.units[i.units.length-1])}function IE(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class ht{constructor(e){const i=e.zone||Gi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ho("invalid input"):null)||(i.isValid?null:xg(i));this.ts=kt(e.ts)?Gi.now():e.ts;let s=null,h=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,h]=[e.old.c,e.old.o];else{const m=i.offset(this.ts);s=_E(this.ts,m),r=Number.isNaN(s.year)?new ho("invalid input"):null,s=r?null:s,h=r?null:m}this._zone=i,this.loc=e.loc||pi.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=h,this.isLuxonDateTime=!0}static now(){return new ht({})}static local(){const[e,i]=IE(arguments),[r,s,h,f,m,b,S]=i;return $E({year:r,month:s,day:h,hour:f,minute:m,second:b,millisecond:S},e)}static utc(){const[e,i]=IE(arguments),[r,s,h,f,m,b,S]=i;return e.zone=Br.utcInstance,$E({year:r,month:s,day:h,hour:f,minute:m,second:b,millisecond:S},e)}static fromJSDate(e,i={}){const r=gle(e)?e.valueOf():NaN;if(Number.isNaN(r))return ht.invalid("invalid input");const s=Tu(i.zone,Gi.defaultZone);return s.isValid?new ht({ts:r,zone:s,loc:pi.fromObject(i)}):ht.invalid(xg(s))}static fromMillis(e,i={}){if(qc(e))return e<-bE||e>bE?ht.invalid("Timestamp out of range"):new ht({ts:e,zone:Tu(i.zone,Gi.defaultZone),loc:pi.fromObject(i)});throw new ys(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(qc(e))return new ht({ts:e*1e3,zone:Tu(i.zone,Gi.defaultZone),loc:pi.fromObject(i)});throw new ys("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Tu(i.zone,Gi.defaultZone);if(!r.isValid)return ht.invalid(xg(r));const s=Gi.now(),h=kt(i.specificOffset)?r.offset(s):i.specificOffset,f=ww(e,ME),m=!kt(f.ordinal),b=!kt(f.year),S=!kt(f.month)||!kt(f.day),I=b||S,A=f.weekYear||f.weekNumber,O=pi.fromObject(i);if((I||m)&&A)throw new m1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&m)throw new m1("Can't mix ordinal dates with month/day");const R=A||f.weekday&&!I;let L,z,j=_E(s,h);R?(L=Bue,z=que,j=p6(j)):m?(L=Hue,z=Uue,j=I_(j)):(L=hD,z=uD);let H=!1;for(const xe of L){const Fe=f[xe];kt(Fe)?H?f[xe]=z[xe]:f[xe]=j[xe]:H=!0}const Y=R?Vue(f):m?Gue(f):oD(f),X=Y||aD(f);if(X)return ht.invalid(X);const te=R?vE(f):m?wE(f):f,[oe,le]=e2(te,h,r),ve=new ht({ts:oe,zone:r,o:le,loc:O});return f.weekday&&I&&e.weekday!==ve.weekday?ht.invalid("mismatched weekday",`you can't specify both a weekday of ${f.weekday} and a date of ${ve.toISO()}`):ve}static fromISO(e,i={}){const[r,s]=oue(e);return gf(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=aue(e);return gf(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=lue(e);return gf(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(kt(e)||kt(i))throw new ys("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:h=null}=r,f=pi.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),[m,b,S,I]=zue(f,e,i);return I?ht.invalid(I):gf(m,b,r,`format ${i}`,e,S)}static fromString(e,i,r={}){return ht.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=yue(e);return gf(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ys("need to specify a reason the DateTime is invalid");const r=e instanceof ho?e:new ho(e,i);if(Gi.throwOnInvalid)throw new Jae(r);return new ht({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=eD(e,pi.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return Xj(qr.parseFormat(e),pi.fromObject(i)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?A_(this).weekYear:NaN}get weekNumber(){return this.isValid?A_(this).weekNumber:NaN}get weekday(){return this.isValid?A_(this).weekday:NaN}get ordinal(){return this.isValid?I_(this.c).ordinal:NaN}get monthShort(){return this.isValid?bg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?bg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?bg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?bg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return xm(this.year)}get daysInMonth(){return gw(this.year,this.month)}get daysInYear(){return this.isValid?ey(this.year):NaN}get weeksInWeekYear(){return this.isValid?vw(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=qr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(Br.instance(e),i)}toLocal(){return this.setZone(Gi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Tu(e,Gi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const h=e.offset(this.ts),f=this.toObject();[s]=e2(f,h,e)}return mf(this,{ts:s,zone:e})}else return ht.invalid(xg(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return mf(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=ww(e,ME),r=!kt(i.weekYear)||!kt(i.weekNumber)||!kt(i.weekday),s=!kt(i.ordinal),h=!kt(i.year),f=!kt(i.month)||!kt(i.day),m=h||f,b=i.weekYear||i.weekNumber;if((m||s)&&b)throw new m1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&s)throw new m1("Can't mix ordinal dates with month/day");let S;r?S=vE({...p6(this.c),...i}):kt(i.ordinal)?(S={...this.toObject(),...i},kt(i.day)&&(S.day=Math.min(gw(S.year,S.month),S.day))):S=wE({...I_(this.c),...i});const[I,A]=e2(S,this.o,this.zone);return mf(this,{ts:I,o:A})}plus(e){if(!this.isValid)return this;const i=Nt.fromDurationLike(e);return mf(this,xE(this,i))}minus(e){if(!this.isValid)return this;const i=Nt.fromDurationLike(e).negate();return mf(this,xE(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=Nt.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?qr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):E_}toLocaleString(e=mw,i={}){return this.isValid?qr.create(this.loc.clone(i),e).formatDateTime(this):E_}toLocaleParts(e={}){return this.isValid?qr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:h=!1}={}){if(!this.isValid)return null;const f=e==="extended";let m=C_(this,f);return m+="T",m+=SE(this,f,i,r,s,h),m}toISODate({format:e="extended"}={}){return this.isValid?C_(this,e==="extended"):null}toISOWeekDate(){return Sg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:h=!1,format:f="extended"}={}){return this.isValid?(s?"T":"")+SE(this,f==="extended",i,e,r,h):null}toRFC2822(){return Sg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Sg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?C_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),Sg(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():E_}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Nt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},h=vle(i).map(Nt.normalizeUnit),f=e.valueOf()>this.valueOf(),m=f?this:e,b=f?e:this,S=$ue(m,b,h,s);return f?S.negate():S}diffNow(e="milliseconds",i={}){return this.diff(ht.now(),e,i)}until(e){return this.isValid?Ci.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ht.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],h=e.unit;return Array.isArray(e.unit)&&(s=e.unit,h=void 0),TE(i,this.plus(r),{...e,numeric:"always",units:s,unit:h})}toRelativeCalendar(e={}){return this.isValid?TE(e.base||ht.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ht.isDateTime))throw new ys("min requires all arguments be DateTimes");return cE(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ht.isDateTime))throw new ys("max requires all arguments be DateTimes");return cE(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:h=null}=r,f=pi.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return Qj(f,e,i)}static fromStringExplain(e,i,r={}){return ht.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return mw}static get DATE_MED(){return dj}static get DATE_MED_WITH_WEEKDAY(){return Yae}static get DATE_FULL(){return fj}static get DATE_HUGE(){return yj}static get TIME_SIMPLE(){return mj}static get TIME_WITH_SECONDS(){return gj}static get TIME_WITH_SHORT_OFFSET(){return vj}static get TIME_WITH_LONG_OFFSET(){return wj}static get TIME_24_SIMPLE(){return bj}static get TIME_24_WITH_SECONDS(){return _j}static get TIME_24_WITH_SHORT_OFFSET(){return xj}static get TIME_24_WITH_LONG_OFFSET(){return Sj}static get DATETIME_SHORT(){return Mj}static get DATETIME_SHORT_WITH_SECONDS(){return $j}static get DATETIME_MED(){return Tj}static get DATETIME_MED_WITH_SECONDS(){return Ij}static get DATETIME_MED_WITH_WEEKDAY(){return Xae}static get DATETIME_FULL(){return Ej}static get DATETIME_FULL_WITH_SECONDS(){return Aj}static get DATETIME_HUGE(){return Cj}static get DATETIME_HUGE_WITH_SECONDS(){return kj}}function vf(t){if(ht.isDateTime(t))return t;if(t&&t.valueOf&&qc(t.valueOf()))return ht.fromJSDate(t);if(t&&typeof t=="object")return ht.fromObject(t);throw new ys(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function Wue(t,e="system"){if(!t||!iE.has(t.timeZone))return e;const i=iE.get(t.timeZone);return Kue(t.timeZone)||t.respectsDaylightSaving?i:Jue(i)}function Jue(t){const e=ht.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Br.instance(-i).formatOffset(0,"narrow")}`}function Kue(t){return t.startsWith("UTC")}let ou=class extends ti(ye){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:s}=i;return{timeZone:r,respectsDaylightSaving:s}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:Wue(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};v([x()],ou.prototype,"legacy",void 0),v([Me("legacy",["timeZone"])],ou.prototype,"readLegacy",null),v([x({type:String,nonNullable:!0})],ou.prototype,"timeZone",void 0),v([Me("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],ou.prototype,"readTimeZone",null),v([Ee("timeZone")],ou.prototype,"writeTimeZone",null),ou=v([B("esri.time.TimeReference")],ou);const g0=ou;let Da=class extends ti(ye){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};v([x()],Da.prototype,"creatorField",void 0),v([x()],Da.prototype,"creationDateField",void 0),v([x()],Da.prototype,"editorField",void 0),v([x()],Da.prototype,"editDateField",void 0),v([x()],Da.prototype,"realm",void 0),v([x({type:g0})],Da.prototype,"dateFieldsTimeReference",void 0),Da=v([B("esri.layers.support.EditFieldsInfo")],Da);const Zue=Da;let Jo=class extends ti(ye){constructor(e){super(e)}};v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"name",void 0),v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"fields",void 0),v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"isAscending",void 0),v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"indexType",void 0),v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"isUnique",void 0),v([x({constructOnly:!0,json:{write:!0}})],Jo.prototype,"description",void 0),Jo=v([B("esri.layers.support.FeatureIndex")],Jo);const d6=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Yue(t,e,i,r){const s=await uh(t);if(await vM(t,e,r),!s.addAttachment)throw new ne(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function vM(t,e,i){const{attributes:r}=e,{objectIdField:s}=t;return t.get("capabilities.data.supportsAttachment")?e?r?s&&r[s]?Promise.resolve():Promise.reject(new ne(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new ne(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ne(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ne(i,"this layer doesn't support attachments"))}async function Xue(t,e,i,r,s){const h=await uh(t);if(await vM(t,e,s),!h.updateAttachment)throw new ne(s,"Layer source does not support updateAttachment capability");return h.updateAttachment(e,i,r)}async function Que(t,e,i){const r=await he(()=>import("./editingSupport-5f5ce2c2.js"),["assets/editingSupport-5f5ce2c2.js","assets/infoFor3D-1eaade9a.js"]),s=await t.load();return r.applyEdits(s,s.source,e,i)}async function ehe(t,e,i){const r=await he(()=>import("./editingSupport-5f5ce2c2.js"),["assets/editingSupport-5f5ce2c2.js","assets/infoFor3D-1eaade9a.js"]),s=await t.load();return r.uploadAssets(s,s.source,e,i)}async function the(t,e,i,r){const s=await uh(t);if(await vM(t,e,r),!s.deleteAttachments)throw new ne(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function ihe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ne(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function rhe(t,e,i,r){var R,L;e=D4.from(e),await t.load();const s=t.source,h=t.capabilities;if(!((R=h==null?void 0:h.data)!=null&&R.supportsAttachment))throw new ne(r,"this layer doesn't support attachments");const{attachmentTypes:f,objectIds:m,globalIds:b,num:S,size:I,start:A,where:O}=e;if(!((L=h==null?void 0:h.operations)!=null&&L.supportsQueryAttachments)&&((f==null?void 0:f.length)>0||(b==null?void 0:b.length)>0||(I==null?void 0:I.length)>0||S||A||O))throw new ne(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(m!=null&&m.length||b!=null&&b.length||O))throw new ne(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new ne(r,"Layer source does not support queryAttachments capability",e);return s.queryAttachments(e)}async function nhe(t,e,i,r){const s=await uh(t);if(!s.queryObjectIds)throw new ne(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(ia.from(e)??t.createQuery(),i)}async function she(t,e,i,r){const s=await uh(t);if(!s.queryFeatureCount)throw new ne(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(ia.from(e)??t.createQuery(),i)}async function ohe(t,e,i,r){const s=await uh(t);if(!s.queryExtent)throw new ne(r,"Layer source does not support queryExtent capability");return s.queryExtent(ia.from(e)??t.createQuery(),i)}async function ahe(t,e,i,r){const s=await uh(t);if(!s.queryRelatedFeatures)throw new ne(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(d0.from(e),i)}async function lhe(t,e,i,r){const s=await uh(t);if(!s.queryRelatedFeaturesCount)throw new ne(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(d0.from(e),i)}async function uhe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await eae(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function hhe(t){const e=new ia,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:s,timeExtent:h}=t;return e.timeExtent=s!=null&&h!=null?h.offset(-s.value,s.unit):h||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function cD(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function pD(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function che(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function uh(t){return(await t.load()).source}async function phe(t,e){if(!$t||$t.findCredential(t))return;let i;try{const r=await TO(t,e);r&&(i=await $t.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await $t.getCredential(t,{signal:r})}catch{}}async function dhe(t,e){var s;const i=(s=t.parsedUrl)==null?void 0:s.path;if(!i)return;const r=t.editFieldsInfo;(t.userHasUpdateItemPrivileges||t.userHasFullEditingPrivileges&&t.capabilities.operations.supportsEditing||r!=null&&r.creatorField||r!=null&&r.editorField)&&await phe(i,e)}function fhe(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}let yd=class extends ti(ye){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};v([x({type:String,json:{read:{source:"shapeAreaFieldName"}}})],yd.prototype,"shapeAreaField",void 0),v([x({type:String,json:{read:{source:"shapeLengthFieldName"}}})],yd.prototype,"shapeLengthField",void 0),v([x({type:String,json:{read:t=>cH.read(t)||pH.read(t)}})],yd.prototype,"units",void 0),yd=v([B("esri.layers.support.GeometryFieldsInfo")],yd);const yhe=yd;var f6;let md=f6=class extends ye{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new qe}clone(){return new f6({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};v([x({type:String,json:{write:!0}})],md.prototype,"floorField",void 0),v([x({json:{read:!1,write:!1}})],md.prototype,"viewAllMode",void 0),v([x({json:{read:!1,write:!1}})],md.prototype,"viewAllLevelIds",void 0),md=f6=v([B("esri.layers.support.LayerFloorInfo")],md);const mhe=md,EE=new tt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),AE=new tt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let hs=class extends ti(ye){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};v([x({json:{read:EE.read,write:EE.write}})],hs.prototype,"cardinality",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"composite",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"id",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"keyField",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"keyFieldInRelationshipTable",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"name",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"relatedTableId",void 0),v([x({json:{read:!0,write:!0}})],hs.prototype,"relationshipTableId",void 0),v([x({json:{read:AE.read,write:AE.write}})],hs.prototype,"role",void 0),hs=v([B("esri.layers.support.Relationship")],hs);const ghe=hs,vhe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Ke(t,e,i){return!!dD(t,e,i)}function Mg(t,e,i){return dD(t,e,i)}function dD(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function whe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function $m(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function fD(t,e){return{analytics:bhe(t),attachment:_he(t),data:xhe(t),metadata:She(t),operations:Mhe(t.capabilities,t,e),query:$he(t,e),queryRelated:The(t),queryTopFeatures:Ihe(t),editing:Ehe(t)}}function bhe(t){return{supportsCacheHint:$m(t.advancedQueryCapabilities,"queryAnalytics")}}function _he(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:$m(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Ke(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const s=vhe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function xhe(t){return{isVersioned:Ke(t,"isDataVersioned",!1),supportsAttachment:Ke(t,"hasAttachments",!1),supportsM:Ke(t,"hasM",!1),supportsZ:Ke(t,"hasZ",!1)}}function She(t){return{supportsAdvancedFieldProperties:Ke(t,"supportsFieldDescriptionProperty",!1)}}function Mhe(t,e,i){const r=t?t.toLowerCase().split(",").map(O=>O.trim()):[],s=i?q0(i):null,h=r.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),f=r.includes("editing")&&!e.datesInUnknownTimezone;let m=f&&r.includes("create"),b=f&&r.includes("delete"),S=f&&r.includes("update");const I=r.includes("changetracking"),A=e.advancedQueryCapabilities;return f&&!(m||b||S)&&(m=b=S=!0),{supportsCalculate:Ke(e,"supportsCalculate",!1),supportsTruncate:Ke(e,"supportsTruncate",!1),supportsValidateSql:Ke(e,"supportsValidateSql",!1),supportsAdd:m,supportsDelete:b,supportsEditing:f,supportsChangeTracking:I,supportsQuery:h,supportsQueryAnalytics:Ke(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ke(A,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Ke(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ke(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:S,supportsExceedsLimitStatistics:Ke(e,"supportsExceedsLimitStatistics",!1)}}function $he(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,h=t.currentVersion,f=e==null?void 0:e.includes("MapServer"),m=!f||h>=ue("mapserver-pbf-version-support"),b=oj(e),S=new Set((t.supportedQueryFormats??"").split(",").map(I=>I.toLowerCase().trim()));return{supportsStatistics:Ke(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Ke(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Ke(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:whe(i),supportsCentroid:Ke(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Ke(i,"supportsQueryWithDistance",!1),supportsDistinct:Ke(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Ke(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Ke(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ke(i,"supportsHavingClause",!1),supportsOrderBy:Ke(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Ke(i,"supportsPagination",!1),supportsQuantization:Ke(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ke(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Ke(t,"supportsReturningQueryGeometry",!1),supportsResultType:Ke(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Ke(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Ke(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ke(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Ke(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Ke(r,"allowOthersToQuery",!0),supportsHistoricMoment:Ke(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:m&&S.has("pbf"),supportsDisjointSpatialRelationship:Ke(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Ke(i,"supportsQueryWithCacheHint",!1)||$m(i,"query"),supportsDefaultSpatialReference:Ke(i,"supportsDefaultSR",!1),supportsCompactGeometry:b,supportsFullTextSearch:Ke(i,"supportsFullTextSearch",!1),maxRecordCountFactor:Mg(t,"maxRecordCountFactor",void 0),maxRecordCount:Mg(t,"maxRecordCount",void 0),standardMaxRecordCount:Mg(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:Mg(t,"tileMaxRecordCount",void 0)}}function The(t){const e=t.advancedQueryCapabilities,i=Ke(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ke(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:$m(e,"queryRelated")}}function Ihe(t){return{supportsCacheHint:$m(t.advancedQueryCapabilities,"queryTopFilter")}}function Ehe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Ke(t,"allowGeometryUpdates",!0),supportsGlobalId:Ke(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ke(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ke(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ke(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ke(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ke(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ke(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ke(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ke(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Ke(i,"supportsAsyncApplyEdits",!1)}}const Ahe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Ye.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(qe.ofType(Jo)),this.version=void 0}readCapabilitiesFromService(i,r){return fD(r,this.url)}get effectiveCapabilities(){var f;const i=this.capabilities;if(!i)return null;const r=se(i),{operations:s,editing:h}=r;return(f=this.sourceJSON)!=null&&f.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=h.supportsDeleteByOthers=h.supportsGeometryUpdate=h.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=h.supportsGeometryUpdate=!0),r)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return cD(r)}readObjectIdFieldFromService(i,r){return pD(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=Mae({layer:this,url:i,nonStandardUrlAllowed:!0,logger:fe.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,h){$ae(this,i,null,r,h)}readVersion(i,r){return che(r)}};return v([x({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),v([Me("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),v([x({readOnly:!0})],e.prototype,"effectiveCapabilities",null),v([x({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),v([x({type:g0})],e.prototype,"dateFieldsTimeReference",void 0),v([x({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),v([x({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),v([x({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),v([x({readOnly:!0,type:Zue})],e.prototype,"editFieldsInfo",void 0),v([x({readOnly:!0})],e.prototype,"editingInfo",void 0),v([Me("editingInfo")],e.prototype,"readEditingInfo",null),v([x((()=>{const i=se(qae),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),v([x({type:mhe,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),v([x({type:At,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),v([x()],e.prototype,"gdbVersion",void 0),v([x({readOnly:!0,type:yhe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),v([x({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:d6.read}}}})],e.prototype,"geometryType",void 0),v([x({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),v([x({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),v([x({readOnly:!0,type:Pb})],e.prototype,"heightModelInfo",void 0),v([x({type:Date})],e.prototype,"historicMoment",void 0),v([x({readOnly:!0})],e.prototype,"isTable",void 0),v([Me("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),v([x({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),v([x(Hae)],e.prototype,"minScale",void 0),v([Me("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),v([x(Wae)],e.prototype,"maxScale",void 0),v([Me("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),v([x({type:String})],e.prototype,"globalIdField",void 0),v([Me("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),v([x({type:String})],e.prototype,"objectIdField",void 0),v([Me("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),v([x({type:g0})],e.prototype,"preferredTimeReference",void 0),v([x({type:[ghe],readOnly:!0})],e.prototype,"relationships",void 0),v([x()],e.prototype,"sourceJSON",void 0),v([x({type:Boolean})],e.prototype,"returnM",void 0),v([x({type:Boolean})],e.prototype,"returnZ",void 0),v([x({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),v([Me("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),v([x({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),v([x({type:Ye,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),v([x({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),v([x({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),v([x({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),v([x({type:qe.ofType(Jo),readOnly:!0})],e.prototype,"indexes",void 0),v([x(Vae)],e.prototype,"url",null),v([Ee("url")],e.prototype,"writeUrl",null),v([x({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),v([Me("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=v([B("esri.layers.mixins.FeatureLayerBase")],e),e};let gd=class extends ti(ye){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};v([x({type:String,json:{write:!0}})],gd.prototype,"expression",void 0),v([x({type:String,json:{write:!0}})],gd.prototype,"title",void 0),v([x({type:String,json:{write:!0}})],gd.prototype,"returnType",void 0),gd=v([B("esri.layers.support.ExpressionInfo")],gd);const wM=gd;var y6;let za=y6=class extends ye{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new y6({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:se(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};v([x({type:Boolean,json:{write:!0}})],za.prototype,"isAutoGenerated",void 0),v([x({type:String,json:{write:!0}})],za.prototype,"name",void 0),v([x({type:String,json:{write:!0}})],za.prototype,"alias",void 0),v([x({type:String,json:{write:!0}})],za.prototype,"onStatisticField",void 0),v([x({type:wM,json:{write:!0}})],za.prototype,"onStatisticExpression",void 0),v([x({type:String,json:{write:!0}})],za.prototype,"statisticType",void 0),za=y6=v([B("esri.layers.support.AggregateField")],za);const up=za;let qu=class extends ye{constructor(){super(...arguments),this.type=null}};v([x({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],qu.prototype,"type",void 0),qu=v([B("esri.layers.support.FeatureReduction")],qu);const bM="__begin__",_M="__end__",Che=new RegExp(bM,"ig"),khe=new RegExp(_M,"ig"),CE=new RegExp("^"+bM,"i"),kE=new RegExp(_M+"$","i"),bw='"',Ohe=bw+" + ",Phe=" + "+bw;function Rhe(t){return t.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function Fhe(t){return t.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function xM(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Rhe(t.labelExpression),e.type="conventional"),e}function Nhe(t){const e=xM(t);if(!e)return null;switch(e.type){case"conventional":return m6(e.expression);case"arcade":return e.expression}return null}function Lhe(t){const e=xM(t);if(!e)return null;switch(e.type){case"conventional":return Dhe(e.expression);case"arcade":return yD(e.expression)}return null}function m6(t){let e;return t?(e=na(t,i=>bM+'$feature["'+i+'"]'+_M),e=CE.test(e)?e.replace(CE,""):bw+e,e=kE.test(e)?e.replace(kE,""):e+bw,e=e.replace(Che,Ohe).replace(khe,Phe)):e='""',e}const jhe=/^\s*\{([^}]+)\}\s*$/i;function Dhe(t){const e=t==null?void 0:t.match(jhe);return e&&e[1].trim()||null}const zhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Vhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Ghe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function yD(t){if(!t)return null;let e=zhe.exec(t)||Vhe.exec(t);return e?e[1]||e[3]:(e=Ghe.exec(t),e?e[2]:null)}var g6;let au=g6=class extends ye{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?m6(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=m6(this.value)),t!=null&&(e[i]=t)}clone(){return new g6({expression:this.expression,title:this.title,value:this.value})}};v([x({type:String,json:{write:{writerEnsuresNonNull:!0}}})],au.prototype,"expression",void 0),v([Me("expression",["expression","value"])],au.prototype,"readExpression",null),v([Ee("expression")],au.prototype,"writeExpression",null),v([x({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],au.prototype,"title",void 0),v([x({json:{read:!1,write:!1}})],au.prototype,"value",void 0),au=g6=v([B("esri.layers.support.LabelExpressionInfo")],au);const mD=au,gD=[252,146,31,255],qhe={type:"esriSMS",style:"esriSMSCircle",size:6,color:gD,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Uhe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:gD},Bhe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Hhe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Whe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Jhe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Khe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},b4e=sh.fromJSON(qhe),_4e=Is.fromJSON(Uhe),x4e=nh.fromJSON(Bhe),Zhe=N0.fromJSON(Hhe),S4e=sh.fromJSON(Whe),M4e=Is.fromJSON(Jhe),$4e=nh.fromJSON(Khe);var v6;const $g=new tt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Tg(t,e,i){return{enabled:!$O(i==null?void 0:i.layer)}}function vD(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Yhe(t){return(t==null?void 0:t.type)==="map-image"}function wD(t){var e,i;return!!Yhe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Xhe(t){return vD(t)||wD(t==null?void 0:t.layer)}let Ei=v6=class extends ye{static evaluateWhere(t,e){const i=(r,s,h)=>{switch(s){case"=":return r==h;case"<>":return r!=h;case">":return r>h;case">=":return r>=h;case"<":return r<h;case"<=":return r<=h}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const s=i(e[r[0]],r[1],r[2]),h=r[3],f=i(e[r[4]],r[5],r[6]);switch(h){case"AND":return s&&f;case"OR":return s||f}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Zhe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Fhe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=yD(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&vD(r))t=new mD({expression:this.getLabelExpressionArcade()});else if(!t)return;const s=t.toJSON(r);s.expression&&(e[i]=s)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return xM(this)}getLabelExpressionArcade(){return Nhe(this)}getLabelExpressionSingleField(){return Lhe(this)}hash(){return JSON.stringify(this)}clone(){return new v6({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:se(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:se(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};v([x({type:String,json:{write:!0}})],Ei.prototype,"name",void 0),v([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Tg}}}}})],Ei.prototype,"allowOverrun",void 0),v([x({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Tg}}}}})],Ei.prototype,"deconflictionStrategy",void 0),v([x({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&wD(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ei.prototype,"labelExpression",void 0),v([Me("labelExpression")],Ei.prototype,"readLabelExpression",null),v([Ee("labelExpression")],Ei.prototype,"writeLabelExpression",null),v([x({type:mD,json:{write:{overridePolicy:(t,e,i)=>Xhe(i)?{allowNull:!0}:{enabled:!1}}}})],Ei.prototype,"labelExpressionInfo",void 0),v([Ee("labelExpressionInfo")],Ei.prototype,"writeLabelExpressionInfo",null),v([x({type:$g.apiValues,json:{type:$g.jsonValues,read:$g.read,write:$g.write}})],Ei.prototype,"labelPlacement",void 0),v([x({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ei.prototype,"labelPosition",void 0),v([x({type:Number})],Ei.prototype,"maxScale",void 0),v([Ee("maxScale")],Ei.prototype,"writeMaxScale",null),v([x({type:Number})],Ei.prototype,"minScale",void 0),v([Ee("minScale")],Ei.prototype,"writeMinScale",null),v([x({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Tg}}}}})],Ei.prototype,"repeatLabel",void 0),v([x({type:Number,cast:It,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Tg}}}}})],Ei.prototype,"repeatLabelDistance",void 0),v([x({types:oY,json:{origins:{"web-scene":{types:aY,write:$I,default:null}},write:$I,default:null}})],Ei.prototype,"symbol",void 0),v([x({type:Boolean,json:{write:!0}})],Ei.prototype,"useCodedValues",void 0),v([x({type:String,json:{write:!0}})],Ei.prototype,"where",void 0),Ei=v6=v([B("esri.layers.support.LabelClass")],Ei);const jb=Ei;var w6;const k_=th({types:gb}),Qhe="esri.layers.support.FeatureReductionBinning";let en=w6=class extends qu{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Wr(i,r,e)}readRenderer(t,e,i){var s;const r=(s=e.drawingInfo)==null?void 0:s.renderer;return r?Dy(r,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new bm({defaultSymbol:k_(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(h=>({id:h.id,symbol:k_(h.symbol,h,i)}))}):new f0({symbol:k_(e.defaultSymbol,e,i)}):null}clone(){return new w6({fields:se(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate),renderer:se(this.renderer)})}};v([Le({binning:"binning"})],en.prototype,"type",void 0),v([Le({geohash:"geohash"})],en.prototype,"binType",void 0),v([x({type:Number,range:{min:1,max:9},json:{write:!0}})],en.prototype,"fixedBinLevel",void 0),v([x({type:[jb],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],en.prototype,"labelingInfo",void 0),v([x(hM)],en.prototype,"labelsVisible",void 0),v([x({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],en.prototype,"maxScale",void 0),v([x(uM)],en.prototype,"popupEnabled",void 0),v([x({type:om,json:{name:"popupInfo",write:!0}})],en.prototype,"popupTemplate",void 0),v([x({type:[up],json:{write:!0}})],en.prototype,"fields",void 0),v([Ee("fields")],en.prototype,"writeFields",null),v([x({types:Ob,json:{write:{target:"drawingInfo.renderer"}}})],en.prototype,"renderer",void 0),v([Me("renderer",["drawingInfo.renderer"])],en.prototype,"readRenderer",null),en=w6=v([B(Qhe)],en);const bD=en;var b6;const O_=th({types:gb}),ece="esri.layers.support.FeatureReductionCluster";function OE(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Vi=b6=class extends ye{constructor(t){super(t),this.type="cluster",this.clusterRadius=It("80px"),this.clusterMinSize=It("12px"),this.clusterMaxSize=It("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var s,h;const r=(s=e.drawingInfo)==null?void 0:s.renderer;return(h=r==null?void 0:r.authoringInfo)!=null&&h.isAutoGenerated?null:r?OE(r)?null:Dy(r,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new bm({defaultSymbol:O_(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(f=>({id:f.id,symbol:O_(f.symbol,f,i)}))}):new f0({symbol:O_(e.defaultSymbol,e,i)}):null}readSymbol(t,e,i){var s,h;const r=(s=e.drawingInfo)==null?void 0:s.renderer;if((h=r==null?void 0:r.authoringInfo)!=null&&h.isAutoGenerated)return null;if(r&&OE(r)){const f=Dy(r,e,i);return f==null?void 0:f.symbol}return null}writeSymbol(t,e,i,r){var h,f;const s=(f=(h=this.renderer)==null?void 0:h.authoringInfo)==null?void 0:f.isAutoGenerated;if(!this.renderer||s){const m=new f0({symbol:t});e.drawingInfo={renderer:m.write({},r)}}}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Wr(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>up.fromJSON(r))}clone(){return new b6({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,fields:se(this.fields),maxScale:this.maxScale,renderer:se(this.renderer),symbol:se(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate)})}};v([x({type:["cluster"],readOnly:!0,json:{write:!0}})],Vi.prototype,"type",void 0),v([x({type:Number,cast:t=>t==="auto"?t:It(t),json:{write:!0}})],Vi.prototype,"clusterRadius",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Vi.prototype,"clusterMinSize",void 0),v([x({type:Number,cast:It,json:{write:!0}})],Vi.prototype,"clusterMaxSize",void 0),v([x({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Vi.prototype,"maxScale",void 0),v([x(uM)],Vi.prototype,"popupEnabled",void 0),v([x({type:om,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Vi.prototype,"popupTemplate",void 0),v([x({types:Ob,json:{write:{target:"drawingInfo.renderer"}}})],Vi.prototype,"renderer",void 0),v([Me("renderer",["drawingInfo.renderer"])],Vi.prototype,"readRenderer",null),v([x({types:nY})],Vi.prototype,"symbol",void 0),v([Me("symbol",["drawingInfo.renderer"])],Vi.prototype,"readSymbol",null),v([Ee("symbol")],Vi.prototype,"writeSymbol",null),v([x({type:[jb],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Vi.prototype,"labelingInfo",void 0),v([x(hM)],Vi.prototype,"labelsVisible",void 0),v([x({type:[up],json:{write:!0}})],Vi.prototype,"fields",void 0),v([Ee("fields")],Vi.prototype,"writeFields",null),v([Me("fields")],Vi.prototype,"readFields",null),Vi=b6=v([B(ece)],Vi);const _D=Vi;var _6;let t2=_6=class extends qu{constructor(t){super(t),this.type="selection"}clone(){return new _6}};v([x({type:["selection"]})],t2.prototype,"type",void 0),t2=_6=v([B("esri.layers.support.FeatureReductionSelection")],t2);const PE=t2,RE={key:"type",base:qu,typeMap:{cluster:_D,binning:bD}},tce={types:{key:"type",base:qu,typeMap:{selection:PE,cluster:_D,binning:bD}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:RE},"portal-item":{types:RE},"web-scene":{types:{key:"type",base:qu,typeMap:{selection:PE}}}}}},Ep={Base64:0,Hex:1,String:2,Raw:3},Yd=8,xD=(1<<Yd)-1;function ju(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function ice(t){const e=[];for(let i=0,r=t.length*Yd;i<r;i+=Yd)e[i>>5]|=(t.charCodeAt(i/Yd)&xD)<<i%32;return e}function rce(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Yd)e.push(String.fromCharCode(t[i>>5]>>>i%32&xD));return e.join("")}function nce(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function sce(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,h=4*t.length;s<h;s+=3){const f=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let m=0;m<4;m++)8*s+6*m>32*t.length?r.push(e):r.push(i.charAt(f>>6*(3-m)&63))}return r.join("")}function oce(t,e){return t<<e|t>>>32-e}function Db(t,e,i,r,s,h){return ju(oce(ju(ju(e,t),ju(r,h)),s),i)}function Or(t,e,i,r,s,h,f){return Db(e&i|~e&r,t,e,s,h,f)}function Pr(t,e,i,r,s,h,f){return Db(e&r|i&~r,t,e,s,h,f)}function Rr(t,e,i,r,s,h,f){return Db(e^i^r,t,e,s,h,f)}function Fr(t,e,i,r,s,h,f){return Db(i^(e|~r),t,e,s,h,f)}function ace(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,h=271733878;for(let f=0;f<t.length;f+=16){const m=i,b=r,S=s,I=h;i=Or(i,r,s,h,t[f],7,-680876936),h=Or(h,i,r,s,t[f+1],12,-389564586),s=Or(s,h,i,r,t[f+2],17,606105819),r=Or(r,s,h,i,t[f+3],22,-1044525330),i=Or(i,r,s,h,t[f+4],7,-176418897),h=Or(h,i,r,s,t[f+5],12,1200080426),s=Or(s,h,i,r,t[f+6],17,-1473231341),r=Or(r,s,h,i,t[f+7],22,-45705983),i=Or(i,r,s,h,t[f+8],7,1770035416),h=Or(h,i,r,s,t[f+9],12,-1958414417),s=Or(s,h,i,r,t[f+10],17,-42063),r=Or(r,s,h,i,t[f+11],22,-1990404162),i=Or(i,r,s,h,t[f+12],7,1804603682),h=Or(h,i,r,s,t[f+13],12,-40341101),s=Or(s,h,i,r,t[f+14],17,-1502002290),r=Or(r,s,h,i,t[f+15],22,1236535329),i=Pr(i,r,s,h,t[f+1],5,-165796510),h=Pr(h,i,r,s,t[f+6],9,-1069501632),s=Pr(s,h,i,r,t[f+11],14,643717713),r=Pr(r,s,h,i,t[f],20,-373897302),i=Pr(i,r,s,h,t[f+5],5,-701558691),h=Pr(h,i,r,s,t[f+10],9,38016083),s=Pr(s,h,i,r,t[f+15],14,-660478335),r=Pr(r,s,h,i,t[f+4],20,-405537848),i=Pr(i,r,s,h,t[f+9],5,568446438),h=Pr(h,i,r,s,t[f+14],9,-1019803690),s=Pr(s,h,i,r,t[f+3],14,-187363961),r=Pr(r,s,h,i,t[f+8],20,1163531501),i=Pr(i,r,s,h,t[f+13],5,-1444681467),h=Pr(h,i,r,s,t[f+2],9,-51403784),s=Pr(s,h,i,r,t[f+7],14,1735328473),r=Pr(r,s,h,i,t[f+12],20,-1926607734),i=Rr(i,r,s,h,t[f+5],4,-378558),h=Rr(h,i,r,s,t[f+8],11,-2022574463),s=Rr(s,h,i,r,t[f+11],16,1839030562),r=Rr(r,s,h,i,t[f+14],23,-35309556),i=Rr(i,r,s,h,t[f+1],4,-1530992060),h=Rr(h,i,r,s,t[f+4],11,1272893353),s=Rr(s,h,i,r,t[f+7],16,-155497632),r=Rr(r,s,h,i,t[f+10],23,-1094730640),i=Rr(i,r,s,h,t[f+13],4,681279174),h=Rr(h,i,r,s,t[f],11,-358537222),s=Rr(s,h,i,r,t[f+3],16,-722521979),r=Rr(r,s,h,i,t[f+6],23,76029189),i=Rr(i,r,s,h,t[f+9],4,-640364487),h=Rr(h,i,r,s,t[f+12],11,-421815835),s=Rr(s,h,i,r,t[f+15],16,530742520),r=Rr(r,s,h,i,t[f+2],23,-995338651),i=Fr(i,r,s,h,t[f],6,-198630844),h=Fr(h,i,r,s,t[f+7],10,1126891415),s=Fr(s,h,i,r,t[f+14],15,-1416354905),r=Fr(r,s,h,i,t[f+5],21,-57434055),i=Fr(i,r,s,h,t[f+12],6,1700485571),h=Fr(h,i,r,s,t[f+3],10,-1894986606),s=Fr(s,h,i,r,t[f+10],15,-1051523),r=Fr(r,s,h,i,t[f+1],21,-2054922799),i=Fr(i,r,s,h,t[f+8],6,1873313359),h=Fr(h,i,r,s,t[f+15],10,-30611744),s=Fr(s,h,i,r,t[f+6],15,-1560198380),r=Fr(r,s,h,i,t[f+13],21,1309151649),i=Fr(i,r,s,h,t[f+4],6,-145523070),h=Fr(h,i,r,s,t[f+11],10,-1120210379),s=Fr(s,h,i,r,t[f+2],15,718787259),r=Fr(r,s,h,i,t[f+9],21,-343485551),i=ju(i,m),r=ju(r,b),s=ju(s,S),h=ju(h,I)}return[i,r,s,h]}function SD(t,e=Ep.Hex){const i=e||Ep.Base64,r=ace(ice(t),t.length*Yd);switch(i){case Ep.Raw:return r;case Ep.Hex:return nce(r);case Ep.String:return rce(r);case Ep.Base64:return sce(r)}}var x6;let v1=x6=class extends kb{writeLevels(t,e,i){for(const r in t){const s=this.levels[r];return void(e.stops=s)}}clone(){return new x6({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Lu(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Lu(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:se(this.levels)})}};v([x()],v1.prototype,"levels",void 0),v([Ee("levels")],v1.prototype,"writeLevels",null),v1=x6=v([B("esri.views.2d.engine.LevelDependentSizeVariable")],v1);const lce=fe.getLogger("esri.views.2d.layers.support.clusterUtils");ue.add("esri-cluster-arcade-enabled",!0);const uce=ue("esri-cluster-arcade-enabled"),hce=(t,e,i,r,s)=>{const h=e.clone();if(!pce(h))return h;if(h.authoringInfo||(h.authoringInfo=new tM),h.authoringInfo.isAutoGenerated=!0,"visualVariables"in h){const f=(h.visualVariables||[]).filter(b=>b.valueExpression!=="$view.scale"),m=MD(f);f.forEach(b=>{b.type==="rotation"?b.field?b.field=dh(t,b.field,"avg_angle","number"):b.valueExpression&&(b.field=wf(t,b.valueExpression,"avg_angle","number"),b.valueExpression=null):b.normalizationField?(b.field=dh(t,b.field,"avg_norm","number",b.normalizationField),b.normalizationField=null):b.field?b.field=dh(t,b.field,"avg","number"):b.valueExpression&&(b.field=wf(t,b.valueExpression,"avg","number"),b.valueExpression=null)}),m==null&&!cce(f)&&s&&(f.push($D(i,r)),h.dynamicClusterSize=!0),h.visualVariables=f}switch(h.type){case"simple":break;case"pie-chart":for(const f of h.attributes)f.field?f.field=dh(t,f.field,"sum","number"):f.valueExpression&&(f.field=wf(t,f.valueExpression,"sum","number"),f.valueExpression=null);break;case"unique-value":h.field?h.field=dh(t,h.field,"mode","string"):h.valueExpression&&(h.field=wf(t,h.valueExpression,"mode","string"),h.valueExpression=null);break;case"class-breaks":h.normalizationField?(h.field=dh(t,h.field,"avg_norm","number",h.normalizationField),h.normalizationField=null):h.field?h.field=dh(t,h.field,"avg","number"):h.valueExpression&&(h.field=wf(t,h.valueExpression,"avg","number"),h.valueExpression=null)}return h},MD=t=>{for(const e of t)if(e.type==="size")return e;return null};function T4e(t,e,i){const r=t.clone();let s=!1;if("visualVariables"in r){const h=(r.visualVariables||[]).filter(f=>f.valueExpression!=="$view.scale");MD(h)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push($D(e,i)),r.dynamicClusterSize=!0,s=!0)}return{renderer:r,didInject:s}}const cce=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},$D=(t,e)=>{const i=[new ud({value:0,size:0}),new ud({value:1})];if(e==null)return new kb({field:"cluster_count",stops:[...i,new ud({value:2,size:0})]});const r=Object.keys(e).reduce((s,h)=>({...s,[h]:[...i,new ud({value:Math.max(2,e[h].minValue),size:t.clusterMinSize}),new ud({value:Math.max(3,e[h].maxValue),size:t.clusterMaxSize})]}),{});return new v1({field:"cluster_count",levels:r})},pce=t=>{const e=i=>lce.error(new ne("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!uce){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function dce(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",h=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+SD(h)}}}function wf(t,e,i,r){const s=SD(e),h=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(f=>f.name===h)||t.push(new up({name:h,isAutoGenerated:!0,onStatisticExpression:new wM({expression:e,returnType:r}),statisticType:i})),h}function dh(t,e,i,r,s){if(e==="cluster_count"||t.some(f=>f.name===e))return e;const h=dce(i,e,s);return t.some(f=>f.name===h)||(i==="avg_norm"?t.push(new up({name:h,isAutoGenerated:!0,onStatisticExpression:new wM({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new up({name:h,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),h}const fce=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var m;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new up({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],h=(r.fields??[]).filter(b=>!b.isAutoGenerated);if(i.renderer&&!((m=i.renderer.authoringInfo)!=null&&m.isAutoGenerated))return r.fields=[...s,...h],r;if(i.symbol)return r.fields=[...s,...h],r.renderer=null,r;if(!this.renderer)return i;const f=hce(s,this.renderer,i,null,!1);return r.fields=[...s,...h],r.renderer=f,r}};return v([x(tce)],e.prototype,"featureReduction",null),e=v([B("esri.layers.mixins.FeatureReductionLayer")],e),e},yce={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},mce=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,h){(h&&h.layerContainerType==="ground"||i&&XU(this,s,{},h))&&(r[s]=i)}writeOperationalLayerType(i,r,s,h){!i||h&&h.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),KU(this,i,s=>super.read(i,s),r)}write(i,r){var f,m;if(r!=null&&r.origin){const b=`${r.origin}/${r.layerContainerType||"operational-layers"}`,S=yce[b];let I=!!(S!=null&&S[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&b==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&b==="web-map/operational-layers"&&(I=!1),!I)return(f=r.messages)==null||f.push(new ne("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${b}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),h=!!r&&!!r.messages&&!!r.messages.filter(b=>b instanceof ne&&b.name==="web-document-write:property-required").length;return tb(s==null?void 0:s.url)?((m=r==null?void 0:r.messages)==null||m.push(new ne("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&h?null:s}beforeSave(){}};return v([x({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),v([x(cj)],e.prototype,"listMode",void 0),v([Ee("listMode")],e.prototype,"writeListMode",null),v([x({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),v([Ee("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),v([x(o6)],e.prototype,"opacity",void 0),v([x({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),v([Ee("title"),Ee(["web-scene"],"title")],e.prototype,"writeTitle",null),v([x({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=v([B("esri.layers.mixins.OperationalLayer")],e),e};var S6;const P_=new tt({asc:"ascending",desc:"descending"});let vd=S6=class extends ye{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new S6({field:this.field,valueExpression:this.valueExpression,order:this.order})}};v([x({type:String,json:{write:!0}})],vd.prototype,"field",void 0),v([x({type:String,json:{write:!0}})],vd.prototype,"valueExpression",void 0),v([x({type:P_.apiValues,json:{read:P_.read,write:P_.write}})],vd.prototype,"order",void 0),vd=S6=v([B("esri.layers.support.OrderByInfo")],vd);const TD=vd;function gce(t,e,i){if(!t)return null;const r=t.find(h=>!!h.field);if(!r)return null;const s=new TD;return s.read(r,i),[s]}function vce(t,e,i,r){const s=t.find(h=>!!h.field);s&&Wr(i,[s.toJSON()],e)}const wce=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return v([x({type:[TD],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:gce},write:{target:"layerDefinition.orderBy",writer:vce}}})],e.prototype,"orderBy",void 0),e=v([B("esri.layers.mixins.OrderedLayer")],e),e};async function bce(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Id(t);const i=Ye.WGS84;return await AX(e,i),ah(t,i)}function I4e(t,e){if(!_ce(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function _ce(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function E4e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function A4e(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return bce(i)}const C4e={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function FE(t){var b;const{portal:e,isOrgItem:i,itemControl:r}=t,s=(b=e.user)==null?void 0:b.privileges;let h=!s||s.includes("features:user:edit"),f=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const m=r==="update"||r==="admin";return m?f=h=!0:f&&(h=!0),{features:{edit:h,fullEdit:f},content:{updateItem:m}}}const xce=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ut(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new z1({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await he(()=>import("./layersLoader-2c9b54c3.js"),["assets/layersLoader-2c9b54c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"]);return Oi(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw Ts(s)||fe.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Zo(r),!0)))}async _setUserPrivileges(i,r){if(!Tt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:h},content:{updateItem:f}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",h),this._set("userHasUpdateItemPrivileges",f)}catch(s){Zo(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const h=i===s.id;if(h&&s.portal.user)return FE(s);let f,m;if(h)f=s.portal.url;else try{f=await TO(this.url,r)}catch(A){Zo(A)}if(!f||!$B(f,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const A=r!=null?r.signal:null;m=await($t==null?void 0:$t.getCredential(`${f}/sharing`,{prompt:!1,signal:A}))}catch(A){Zo(A)}const b=!0,S=!1,I=!1;if(!m)return{features:{edit:b,fullEdit:S},content:{updateItem:I}};try{if(h?await s.reload():(s=new z1({id:i,portal:{url:f}}),await s.load(r)),s.portal.user)return FE(s)}catch(A){Zo(A)}return{features:{edit:b,fullEdit:S},content:{updateItem:I}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){Zo(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?$t==null?void 0:$t.findCredential(this.url):null;if(!r)return!0;const s=Ig.credential===r?Ig.user:await this._fetchEditingUser(i);return Ig.credential=r,Ig.user=s,s==null||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var I,A;const r=(A=(I=this.portalItem)==null?void 0:I.portal)==null?void 0:A.user;if(r)return r;const s=$t.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const h=`${s.owningSystemUrl}/sharing/rest`,f=on.getDefault();if(f&&f.loaded&&co(f.restUrl)===co(h))return f.user;const m=`${h}/community/self`,b=i!=null?i.signal:null,S=await Qd(wi(m,{authMode:"no-prompt",query:{f:"json"},signal:b}));return S.ok?RS.fromJSON(S.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,h=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||on.getDefault());return s&&h&&!Kk(h.restUrl,s.restUrl)?(r.messages&&r.messages.push(new ne("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return v([x({type:z1})],e.prototype,"portalItem",null),v([Me("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),v([Ee("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),v([x({clonable:!1})],e.prototype,"resourceReferences",void 0),v([x({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),v([x({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),v([x({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=v([B("esri.layers.mixins.PortalLayer")],e),e},Ig={credential:null,user:null};let w1=class extends Oe{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};v([x()],w1.prototype,"updating",void 0),v([x()],w1.prototype,"status",void 0),w1=v([B("esri.layers.support.PublishingInfo")],w1);const Sce=w1,ID="esri.layers.mixins.PublishableLayer",Mce=Symbol(ID),$ce=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new Sce;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let f=0;const m=async S=>{let I;r.updating=!0;try{I=await this.fetchPublishingStatus()}catch{I="unavailable"}I!=="published"&&I!=="unavailable"||(r.status==="publishing"&&this.refresh(),b.remove()),r.status=I,r.updating=!1,b.removed||(f=setTimeout(m,S,S+125))},b={removed:!1,remove(){this.removed=!0,clearTimeout(f)}};this.when().catch(()=>b.remove()),m(250),this.own(b)}};return e=Mce,v([x({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=v([B(ID)],i),i},zy=new qe,iy=new WeakMap;function Tce(t){ED(t)&&zy.push(t)}function Ice(t){ED(t)&&zy.includes(t)&&zy.remove(t)}function ED(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function AD(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:AD(e,t%e):0}let R_=0,Eg=0;function Ece(){const t=Date.now();for(const e of zy)e.refreshInterval&&t-(iy.get(e)??0)+5>=6e4*e.refreshInterval&&(iy.set(e,t),e.refresh(t))}ck(()=>{const t=Date.now();let e=0;for(const i of zy)e=AD(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?iy.get(i)||iy.set(i,t):iy.delete(i);if(e!==Eg){if(Eg=e,clearInterval(R_),Eg===0)return void(R_=0);R_=setInterval(Ece,Eg)}});const Ace=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=rk(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Tce(this)},()=>{})}destroy(){Ice(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Ld(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{fe.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return v([x({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),v([x({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),v([x()],e.prototype,"refreshParameters",null),e=v([B("esri.layers.mixins.RefreshableLayer")],e),e},Cce=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&kce(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return v([x({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),v([x({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),v([x({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=v([B("esri.layers.mixins.ScaleRangeLayer")],e),e};function kce(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const CD=Ir()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let b1=class extends ti(ye){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Kne(this.value,this.unit,"milliseconds")}};v([Le(CD,{nonNullable:!0})],b1.prototype,"unit",void 0),v([x({type:Number,json:{write:!0},nonNullable:!0})],b1.prototype,"value",void 0),b1=v([B("esri.TimeInterval")],b1);const _w=b1;function NE(t,e){return _w.fromJSON({value:t,unit:e})}let zr=class extends ti(ye){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),s=new Date(i.timeExtent[1]);return new fa({start:r,end:s})}writeFullTimeExtent(e,i){e&&e.start!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?NE(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?NE(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};v([x({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],zr.prototype,"cumulative",void 0),v([x({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],zr.prototype,"endField",void 0),v([x({type:fa,json:{write:{enabled:!0,allowNull:!0}}})],zr.prototype,"fullTimeExtent",void 0),v([Me("fullTimeExtent",["timeExtent"])],zr.prototype,"readFullTimeExtent",null),v([Ee("fullTimeExtent")],zr.prototype,"writeFullTimeExtent",null),v([x({type:Boolean,json:{write:!0}})],zr.prototype,"hasLiveData",void 0),v([x({type:_w,json:{write:{enabled:!0,allowNull:!0}}})],zr.prototype,"interval",void 0),v([Me("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],zr.prototype,"readInterval",null),v([Ee("interval")],zr.prototype,"writeInterval",null),v([x({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],zr.prototype,"startField",void 0),v([x({type:g0,json:{write:{enabled:!0,allowNull:!0}}})],zr.prototype,"timeReference",void 0),v([x({type:String,json:{write:{enabled:!0,allowNull:!0}}})],zr.prototype,"trackIdField",void 0),v([x({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],zr.prototype,"useTime",void 0),zr=v([B("esri.layers.support.TimeInfo")],zr);const kD=zr,Oce=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const h=s.timeOffset,f=CD.fromJSON(s.timeOffsetUnits);return h&&f?new _w({value:h,unit:f}):null}set timeInfo(i){$P(i,this.fieldsIndex),this._set("timeInfo",i)}};return v([x({type:fa,json:{write:!1}})],e.prototype,"timeExtent",void 0),v([x({type:_w})],e.prototype,"timeOffset",void 0),v([Me("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),v([x({value:null,type:kD,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),v([x({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=v([B("esri.layers.mixins.TemporalLayer")],e),e},LE=new tt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let lu=class extends ti(ye){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};v([x({json:{write:!0}})],lu.prototype,"name",void 0),v([x({json:{write:!0}})],lu.prototype,"description",void 0),v([x({json:{read:LE.read,write:LE.write}})],lu.prototype,"drawingTool",void 0),v([x({json:{write:!0}})],lu.prototype,"prototype",void 0),v([x({json:{write:!0}})],lu.prototype,"thumbnail",void 0),lu=v([B("esri.layers.support.FeatureTemplate")],lu);const SM=lu;let Va=class extends ti(ye){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=q7(e[r]);return i}writeDomains(e,i){var s;const r={};for(const h of Object.keys(e))e[h]&&(r[h]=(s=e[h])==null?void 0:s.toJSON());i.domains=r}};v([x({json:{write:!0}})],Va.prototype,"id",void 0),v([x({json:{write:!0}})],Va.prototype,"name",void 0),v([x({json:{write:!0}})],Va.prototype,"domains",void 0),v([Me("domains")],Va.prototype,"readDomains",null),v([Ee("domains")],Va.prototype,"writeDomains",null),v([x({type:[SM],json:{write:!0}})],Va.prototype,"templates",void 0),Va=v([B("esri.layers.support.FeatureType")],Va);const OD=Va;function Pce(){return{fields:{type:[U7],value:null},fieldsIndex:{readOnly:!0,get(){return new PL(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||fe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return TP(this.fieldsIndex,t)}}}}const F_=fe.getLogger("esri.layers.support.labelingInfo"),Rce=/\[([^\[\]]+)\]/gi;function jE(t,e,i){return t?t.map(r=>{const s=new jb;if(s.read(r,i),s.labelExpression){const h=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(Rce,(f,m)=>`[${Fce(m,h)}]`)}return s}):null}function Fce(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const Nce={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function N4e(t,e){const i=se(t);return i.some(r=>Lce(r,e))?[]:i}function Lce(t,e){const i=t.labelPlacement,r=Nce[e];if(!t.symbol)return F_.warn("No ILabelClass symbol specified."),!0;if(!r)return F_.error(new ne("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const s=r[0];i&&F_.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${s}`),t.labelPlacement=s}return!1}const Qs=[];function jce(t,e){if(oj(t.url??""))return!0;const{wkid:i}=e;for(const r of Qs){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Qs.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),Qs.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Qs.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Qs.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Qs.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),Qs.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),Qs.push([10.61,()=>new Set([102497])]),Qs.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),Qs.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),Qs.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function Dce(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await Qd(r.populateFromStyle());if(Oi(i),s.ok===!1){const h=s.error;e&&e.messages&&e.messages.push(new Ss("renderer:style-reference",`Failed to create unique value renderer from style reference: ${h.message}`,{error:h,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}const zce=["oid","global-id"],Vce=["oid","global-id","guid"];function Gce({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},h){if(!i)return null;const f=Jce({editFieldsInfo:e,fields:i,objectIdField:r},h);if(!f.length)return null;const m=Yce({titleBase:s,fields:i,displayField:t}),b=Zce();return new om({title:m,content:b,fieldInfos:f})}const qce=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Uce=(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r})=>r?r.has(t.name):!PD(t.name,e)&&(!i||t.name!==i)&&!zce.includes(t.type)&&!qce.some(s=>s.test(t.name));function Bce(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(Hce),t}function Hce(t,e){return t.type==="oid"?-1:e.type==="oid"?1:DE(t)?-1:DE(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function PD(t,e){if(!t||!e)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:h}=e;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),h&&h.toLowerCase()].includes(t.toLowerCase())}function Wce(t,e){return t.editable&&!Vce.includes(t.type)&&!PD(t.name,e)}function Jce({editFieldsInfo:t,fields:e,objectIdField:i},r){return Bce(e??[],(r==null?void 0:r.ignoreFieldTypes)||Xce).map(s=>new sm({fieldName:s.name,isEditable:Wce(s,t),label:s.alias,format:Kce(s),visible:Uce(s,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function Kce(t){switch(t.type){case"small-integer":case"integer":case"single":return new Ad({digitSeparator:!0,places:0});case"double":return new Ad({digitSeparator:!0,places:2});case"date":return new Ad({dateFormat:"long-month-day-year"});default:return t.type==="string"&&OP(t.name)?new Ad({digitSeparator:!0,places:0}):null}}function Zce(){return[new o0,new Sy]}function Yce(t){const e=IK(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function DE(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const Xce=["geometry","blob","raster","guid","xml"],Zr="FeatureLayer",RD="esri.layers.FeatureLayer",Qce=fe.getLogger(RD);function Ag(t,e){return new ne("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function zE(t){return t&&t instanceof qe}const N_=Pce();function L_(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Re=class extends Ahe(fce(Pae($ce(Cae(Iae(wce(Oce(Cce(Ace(Tae(mce(xce(ZL(Eae(vae(ti(G2))))))))))))))))){constructor(...e){super(...e),this._handles=new Mn,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ye.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Ut(this._handles)}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var s;const i=e!=null?e.signal:null;if((s=this.portalItem)!=null&&s.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(h=>this.initLayerProperties(h))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Zo).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const h=await this._fetchFirstLayerId(i);h!=null&&(this.layerId=h)}if(!this.url&&!this._hasMemorySource())throw new ne("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>dhe(this,e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,i){return i=i.layerDefinition||i,fD(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,s){this._writeEditingEnabled(e,i,!0,s)}get effectiveEditingEnabled(){return fhe(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,s){s!=null&&s.writeLayerSchema&&Wr(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return cD(i.layerDefinition||i)}readObjectIdField(e,i){return pD(i.layerDefinition||i)}get parsedUrl(){const e=Jr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Kc(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Kc(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){T8(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var h;i=i.layerDefinition||i;const s=(h=i.drawingInfo)==null?void 0:h.renderer;if(s){const f=Dy(s,i,r)??void 0;return f||Qce.error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),f}if(i.defaultSymbol)return i.types&&i.types.length?new bm({defaultSymbol:j_(i.defaultSymbol,i,r),field:i.typeIdField,uniqueValueInfos:i.types.map(f=>({id:f.id,symbol:j_(f.symbol,f,r)}))}):new f0({symbol:j_(i.defaultSymbol,i,r)})}set source(e){const i=this._get("source");i!==e&&(zE(i)&&this._resetMemorySource(i),zE(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof qe?new Ba({layer:this,items:e}):e:null}readSource(e,i){const r=H7.fromJSON(i.featureSet);return new Ba({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,s=r&&r.creatorField,h=r&&r.editorField;return e=e&&e.map(f=>SM.fromJSON(f)),this._fixTemplates(e,s),this._fixTemplates(e,h),e}readTitle(e,i){var h;const r=((h=i.layerDefinition)==null?void 0:h.name)??i.name,s=i.title||i.layerDefinition&&i.layerDefinition.title;if(r){const f=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?xae(this.url,r):r;let m=r;if(!m&&this.url){const b=q0(this.url);b!=null&&(m=b.title)}return m?(this.sublayerTitleMode==="item-title-and-service-name"&&f&&f!==m&&(m=f+" - "+m),lM(m)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,i){return i.title||i.layerDefinition&&i.layerDefinition.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const s=i.fields.find(h=>h.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,s=r&&r.creatorField,h=r&&r.editorField;return e&&e.map(f=>(f=OD.fromJSON(f),this._fixTemplates(f.templates,s),this._fixTemplates(f.templates,h),f))}readVisible(e,i){return i.layerDefinition&&i.layerDefinition.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){return Yue(this,e,i,Zr)}async updateAttachment(e,i,r){return Xue(this,e,i,r,Zr)}async applyEdits(e,i){return Que(this,e,i)}async uploadAssets(e,i){return ehe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return Gce(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await ik(he(()=>import("./FeatureLayerSource-0314e39f.js"),["assets/FeatureLayerSource-0314e39f.js","assets/External-ca569a47.js","assets/infoFor3D-1eaade9a.js","assets/clientSideDefaults-b7d95c01.js","assets/QueryEngineCapabilities-42e44ded.js","assets/QueryTask-dbe91c64.js","assets/executeForIds-b1c40f76.js"]),e);return new i({layer:this}).load({signal:e})}createQuery(){const e=hhe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=tae(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){return the(this,e,i,Zr)}async fetchRecomputedExtents(e){return ihe(this,e,Zr)}getFeatureType(e){const{typeIdField:i,types:r}=this;if(!i||!e)return null;const s=e.attributes?e.attributes[i]:void 0;if(s==null)return null;let h=null;return r==null||r.some(f=>{const{id:m}=f;return m!=null&&(m.toString()===s.toString()&&(h=f),!!h)}),h}getFieldDomain(e,i){const r=i==null?void 0:i.feature,s=this.getFeatureType(r);if(s){const h=s.domains&&s.domains[e];if(h&&h.type!=="inherited")return h}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return rhe(this,e,i,Zr)}async queryFeatures(e,i){const r=await this.load(),s=await r.source.queryFeatures(ia.from(e)??r.createQuery(),i);if(s!=null&&s.features)for(const h of s.features)h.layer=h.sourceLayer=r;return s}async queryObjectIds(e,i){return nhe(this,e,i,Zr)}async queryFeatureCount(e,i){return she(this,e,i,Zr)}async queryExtent(e,i){return ohe(this,e,i,Zr)}async queryRelatedFeatures(e,i){return ahe(this,e,i,Zr)}async queryRelatedFeaturesCount(e,i){return lhe(this,e,i,Zr)}async queryTopFeatures(e,i){var f;const{source:r,capabilities:s}=await this.load();if(!r.queryTopFeatures||!((f=s==null?void 0:s.query)!=null&&f.supportsTopFeaturesQuery))throw new ne(Zr,"Layer source does not support queryTopFeatures capability");const h=await r.queryTopFeatures(hg.from(e),i);if(h!=null&&h.features)for(const m of h.features)m.layer=m.sourceLayer=this;return h}async queryTopObjectIds(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopObjectIds||!(s!=null&&s.query.supportsTopFeaturesQuery))throw new ne(Zr,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(hg.from(e),i)}async queryTopFeaturesExtent(e,i){var h;const{source:r,capabilities:s}=await this.load();if(!r.queryTopExtents||!((h=s==null?void 0:s.query)!=null&&h.supportsTopFeaturesQuery))throw new ne(Zr,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(hg.from(e),i)}async queryTopFeatureCount(e,i){var h;const{source:r,capabilities:s}=await this.load();if(!r.queryTopCount||!((h=s==null?void 0:s.query)!=null&&h.supportsTopFeaturesQuery))throw new ne(Zr,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(hg.from(e),i)}read(e,i){const r=e.featureCollection;if(r){const s=r.layers;s&&s.length===1&&(super.read(s[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:s,messages:h}=i;if(this.dynamicDataSource)return h==null||h.push(Ag(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(r==="web-scene"||r==="web-map"&&s!=="tables")return h==null||h.push(Ag(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return h==null||h.push(Ag(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&r==="web-map"&&s==="tables")return h==null||h.push(Ag(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new ne(Zr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||jce(this,e))}async save(e){return(await he(()=>import("./featureLayerUtils-f2591506.js"),["assets/featureLayerUtils-f2591506.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"])).save(this,e)}async saveAs(e,i){return(await he(()=>import("./featureLayerUtils-f2591506.js"),["assets/featureLayerUtils-f2591506.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-2b0c289c.js","assets/jsonContext-e0b6f998.js"])).saveAs(this,e,i)}_readEditingEnabled(e,i,r){var h;let s=(h=e.layerDefinition)==null?void 0:h.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,s){var h,f;if(!e){const m=(f=(h=this.capabilities)==null?void 0:h.operations)!=null&&f.supportsSync?"Query,Sync":"Query";Wr("layerDefinition.capabilities",m,i),r&&!(s!=null&&s.writeLayerSchema)&&(i.capabilities=m)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstLayerId(e){return wi(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),T8(this.renderer,this.fieldsIndex),$P(this.timeInfo,this.fieldsIndex),Dce(this,{origin:"service"})}async hasDataChanged(){return uhe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(s=>s.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{const s=r.prototype&&r.prototype.attributes;s&&i&&delete s[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ne("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ne("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this._handles.add([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};v([Me("service","capabilities")],Re.prototype,"readCapabilities",null),v([x({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Re.prototype,"charts",void 0),v([x({readOnly:!0})],Re.prototype,"createQueryVersion",null),v([x({json:{read:{source:"layerDefinition.copyrightText"}}})],Re.prototype,"copyright",void 0),v([x({json:{read:{source:"layerDefinition.displayField"}}})],Re.prototype,"displayField",void 0),v([x({types:Vc,readOnly:!0})],Re.prototype,"defaultSymbol",void 0),v([x({type:oo})],Re.prototype,"dynamicDataSource",void 0),v([x({type:Boolean})],Re.prototype,"editingEnabled",null),v([Me(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Re.prototype,"readEditingEnabled",null),v([Me("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Re.prototype,"readEditingEnabledFromWebMap",null),v([Ee(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabled",null),v([Ee("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabledToWebMap",null),v([x({readOnly:!0})],Re.prototype,"effectiveEditingEnabled",null),v([x({...N_.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:L_}}}}})],Re.prototype,"fields",void 0),v([x(N_.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),v([x({type:dae,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Re.prototype,"formTemplate",void 0),v([x({json:{read:{source:"layerDefinition.extent"}}})],Re.prototype,"fullExtent",void 0),v([x({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:L_,writer(t,e,i){const r=t?d6.toJSON(t):null;r&&Wr(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:d6.read}}})],Re.prototype,"geometryType",void 0),v([x({json:{read:{source:"layerDefinition.hasM"}}})],Re.prototype,"hasM",void 0),v([x({json:{read:{source:"layerDefinition.hasZ"}}})],Re.prototype,"hasZ",void 0),v([x(Bae)],Re.prototype,"id",void 0),v([x({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Re.prototype,"infoFor3D",void 0),v([x({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Re.prototype,"isTable",void 0),v([Me("service","isTable",["type","geometryType"]),Me("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Re.prototype,"readIsTable",null),v([Ee("web-map","isTable")],Re.prototype,"writeIsTable",null),v([x(hM)],Re.prototype,"labelsVisible",void 0),v([x({type:[jb],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:jE},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:jE},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Re.prototype,"labelingInfo",void 0),v([x((()=>{const t=se(Uae);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Wr(r,rb(e),i)}}},t})())],Re.prototype,"opacity",void 0),v([x(Gae)],Re.prototype,"legendEnabled",void 0),v([x({type:["show","hide"],json:(()=>{const t=se(cj.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Re.prototype,"listMode",void 0),v([Me("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Re.prototype,"readGlobalIdField",null),v([x({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:L_}}}}})],Re.prototype,"objectIdField",void 0),v([Me("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Re.prototype,"readObjectIdField",null),v([x({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Re.prototype,"operationalLayerType",void 0),v([x(N_.outFields)],Re.prototype,"outFields",void 0),v([x({readOnly:!0})],Re.prototype,"parsedUrl",null),v([x({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Re.prototype,"path",void 0),v([x(uM)],Re.prototype,"popupEnabled",void 0),v([x({type:om,json:{name:"popupInfo",write:!0}})],Re.prototype,"popupTemplate",void 0),v([x({readOnly:!0})],Re.prototype,"defaultPopupTemplate",null),v([x({types:Ob,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Zoe,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Re.prototype,"renderer",null),v([Me("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Me("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Re.prototype,"readRenderer",null),v([x((()=>{const t=se(zae);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Re.prototype,"screenSizePerspectiveEnabled",void 0),v([x({clonable:!1})],Re.prototype,"source",null),v([vt("source")],Re.prototype,"castSource",null),v([Me("portal-item","source",["featureSet"]),Me("web-map","source",["featureSet"])],Re.prototype,"readSource",null),v([x({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Re.prototype,"spatialReference",void 0),v([x({type:Number})],Re.prototype,"subtypeCode",void 0),v([x({type:[SM]})],Re.prototype,"templates",void 0),v([Me("templates",["editFieldsInfo","creatorField","editorField","templates"])],Re.prototype,"readTemplates",null),v([x({type:kD})],Re.prototype,"timeInfo",void 0),v([x()],Re.prototype,"title",void 0),v([Me("service","title",["name"]),Me("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Re.prototype,"readTitle",null),v([Me("web-map","title",["layerDefinition.name","title"])],Re.prototype,"readTitleFromWebMap",null),v([x({type:String})],Re.prototype,"sublayerTitleMode",void 0),v([x({json:{read:!1}})],Re.prototype,"type",void 0),v([x({type:String})],Re.prototype,"typeIdField",void 0),v([Me("service","typeIdField"),Me("typeIdField",["layerDefinition.typeIdField"])],Re.prototype,"readTypeIdField",null),v([x({type:[OD]})],Re.prototype,"types",void 0),v([Me("service","types",["types"]),Me("types",["layerDefinition.types"])],Re.prototype,"readTypes",null),v([x({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Re.prototype,"visible",void 0),v([Me("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Re.prototype,"readVisible",null),Re=v([B(RD)],Re);const j_=th({types:gb}),FD=Re,j4e=Object.freeze(Object.defineProperty({__proto__:null,default:FD},Symbol.toStringTag,{value:"Module"})),epe=["$datastore","$map","$layer","$aggregatedfeatures"],tpe="esri.widgets.Feature.support.arcadeFeatureUtils",ipe=fe.getLogger(tpe);function rpe(t){return typeof t=="string"?mm(R7(t)):Array.isArray(t)?npe(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?spe(t):t}function npe(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?mm(R7(e)):e}</li>`).join("")}</ul>`}function spe(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?mm(R7(i)):i}</td></tr>`}).join("")}</table>`}function ope({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:r,viewInfo:s,map:h,graphic:f,interceptor:m}){i.forEach(b=>{const S=b.toLowerCase(),I=s.sr,A={map:h,spatialReference:I,interceptor:m};if(S==="$map"&&(r.vars[S]=e.convertMapToFeatureSetCollection(A)),S==="$layer"&&(r.vars[S]=e.convertFeatureLayerToFeatureSet({layer:f.sourceLayer,spatialReference:I,interceptor:m})),S==="$datastore"&&(r.vars[S]=e.convertServiceUrlToWorkspace({url:f.sourceLayer.url,spatialReference:I,interceptor:m})),S==="$aggregatedfeatures"){const O=f.layer,{fields:R,objectIdField:L,geometryType:z,spatialReference:j,displayField:H}=O,Y=new FD({fields:R,objectIdField:L,geometryType:z,spatialReference:j,displayField:H,...O.type==="feature"?{templates:O.templates,typeIdField:O.typeIdField,types:O.types}:null,source:t});r.vars[S]=e.convertFeatureLayerToFeatureSet({layer:Y,spatialReference:j,interceptor:m})}})}function ND(){return he(()=>import("./arcadeUtils-9301309c.js").then(t=>t.ax),["assets/arcadeUtils-9301309c.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/number-ae984153.js"])}function ape(t){return"createQuery"in t&&"queryFeatures"in t}async function lpe({graphic:t,view:e}){const{isAggregate:i,layer:r}=t;if(!i||!r||(e==null?void 0:e.type)!=="2d")return[];const s=await e.whenLayerView(r);if(!ape(s))return[];const h=s.createQuery(),f=t.getObjectId();h.aggregateIds=f!=null?[f]:[];const{features:m}=await s.queryFeatures(h);return m}async function LD({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:r,map:s,graphic:h,view:f}){if(!t||!t.expression)return null;const m=e.createSyntaxTree(t.expression),b=epe.filter(R=>e.hasVariable(m,R)),[S]=await Promise.all([lpe({graphic:h,view:f}),e.loadScriptDependencies(m,!0,b)]),I=e.getViewInfo({spatialReference:r}),A=e.createExecContext(h,I);A.interceptor=i,A.useAsync=!0,ope({aggregatedFeatures:S,arcadeUtils:e,featureSetVars:b,context:A,viewInfo:I,map:s,graphic:h,interceptor:i});const O=e.createFunction(m,A);return e.executeAsyncFunction(O,A).catch(R=>ipe.error("arcade-execution-error",{error:R,graphic:h,expressionInfo:t}))}async function upe({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:s,view:h}){if(!t||!t.length)return{};const f=await ND(),m={};for(const I of t)m[`expression/${I.name}`]=LD({expressionInfo:I,arcadeUtils:f,interceptor:r,spatialReference:e,map:s,graphic:i,view:h});const b=await sn(m),S={};for(const I in b)S[I]=rpe(b[I].value);return S}const hpe=1;let Nn=class extends gp(Oe){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var s,h;const i=(s=this.contentElement)==null?void 0:s.type;(h=this.contentElementViewModel)==null||h.destroy();const r=i==="fields"?new $b:i==="media"?new Fc:i==="text"?new cw:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=Ud(this._compile,hpe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:s,spatialReference:h,map:f,view:m,_abortController:b}=this;if(!(i&&r&&h&&f))return void this._set("contentElement",null);const S=await ND();if(b!==this._abortController)return;const I=await LD({arcadeUtils:S,expressionInfo:i,graphic:r,interceptor:s,map:f,spatialReference:h,view:m});if(!I||I.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const A=await I.castAsJsonAsync(b==null?void 0:b.signal),O=A==null?void 0:A.type,R=O==="media"?Ty.fromJSON(A):O==="text"?a0.fromJSON(A):O==="fields"?o0.fromJSON(A):null;this._set("contentElement",R)},this.handles.add([me(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),_t),me(()=>[this.contentElement],()=>this._createVM(),_t)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};v([x()],Nn.prototype,"_abortController",void 0),v([x({type:PP})],Nn.prototype,"expressionInfo",void 0),v([x({type:Mr})],Nn.prototype,"graphic",void 0),v([x({readOnly:!0})],Nn.prototype,"contentElement",void 0),v([x({readOnly:!0})],Nn.prototype,"contentElementViewModel",void 0),v([x()],Nn.prototype,"interceptor",void 0),v([x()],Nn.prototype,"spatialReference",null),v([x({readOnly:!0})],Nn.prototype,"state",null),v([x()],Nn.prototype,"map",null),v([x()],Nn.prototype,"view",void 0),Nn=v([B("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Nn);const MM=Nn,Cg={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let i2=class extends Er{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new MM}initialize(){this.addHandles(me(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),_t))}destroy(){this._destroyContentWidget()}renderLoading(){return ie("div",{key:"loading-container",class:Cg.loadingSpinnerContainer},ie("span",{class:this.classes(Cg.iconLoading,Cg.spinner)}))}render(){var i;const{state:e}=this.viewModel;return ie("div",{class:Cg.base},e==="loading"?this.renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const s=e?r==="fields"?new MN({viewModel:e}):r==="media"?new mL({viewModel:e}):r==="text"?new Pv({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};v([x({type:MM})],i2.prototype,"viewModel",void 0),i2=v([B("esri.widgets.Feature.FeatureExpression")],i2);const cpe=i2,D_=100;let Jt=class extends ti(nm(gp(Oe))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await Ld(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Ld(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await Ld(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryThrottled=Ud(this._queryController,D_,this),this._queryFeatureCountThrottled=Ud(this._queryFeatureCountController,D_,this),this._queryPageThrottled=Ud(this._queryPageController,D_,this),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal})))},this.handles.add([me(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),_t),me(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),me(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,s=1,h=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,s),h))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const s=r.clone();return s.field=Ny(r.field,i),s}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new qe}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;return e!=null&&e.loaded&&i&&r?kie(i,e,r)??null:null}get relationship(){var r;const{relationshipId:e,layer:i}=this;return typeof e=="number"?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:s})=>s===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new qe}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:s}=this;return i?"loading":e||r?"querying":s?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(i=>!i.destroyed&&i.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:r,objectId:s,_queryFeatureCountAbortController:h,canQuery:f,supportsCacheHint:m}=this;if(await(e==null?void 0:e.load()),await(i==null?void 0:i.load()),!f||!e||!i)return void this._set("featureCount",0);const b=i.createQuery(),S=new d0({cacheHint:m,relationshipId:r,returnGeometry:!1,objectIds:[s],where:b.where??void 0}),I=await e.queryRelatedFeaturesCount(S,{signal:h==null?void 0:h.signal});this._set("featureCount",I[s]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:s}=this;!r||i<2||e.addMany(await this._queryRelatedFeatures({signal:s==null?void 0:s.signal}))}async _queryRelatedFeatures(e){var ve;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:s,displayCount:h,layer:f,relationshipId:m,featurePage:b,featureCount:S,relatedLayer:I,supportsCacheHint:A}=this,{canQuery:O,objectId:R}=this;if(!O||!f||!I)return[];const L=r?((b-1)*s+S)%S:0,z=r?s:h,j=I.objectIdField,H=[...i.map(xe=>xe.field),j].filter(Zn),Y=i.map(xe=>`${xe.field} ${xe.order}`),X=I.createQuery(),te=new d0({orderByFields:Y,start:L,num:z,outFields:H,cacheHint:A,relationshipId:m,returnGeometry:!1,objectIds:[R],where:X.where??void 0}),oe=await f.queryRelatedFeatures(te,{signal:e==null?void 0:e.signal}),le=((ve=oe[R])==null?void 0:ve.features)||[];return le.forEach(xe=>{xe.sourceLayer=I,xe.layer=I}),le}};v([x()],Jt.prototype,"_queryAbortController",void 0),v([x()],Jt.prototype,"_queryPageAbortController",void 0),v([x()],Jt.prototype,"_queryFeatureCountAbortController",void 0),v([x({value:1})],Jt.prototype,"featurePage",null),v([x()],Jt.prototype,"featuresPerPage",void 0),v([x({readOnly:!0})],Jt.prototype,"orderByFieldsFixedCasing",null),v([x({readOnly:!0})],Jt.prototype,"supportsCacheHint",null),v([x({readOnly:!0})],Jt.prototype,"canQuery",null),v([x()],Jt.prototype,"description",void 0),v([x({readOnly:!0})],Jt.prototype,"itemDescriptionFieldName",null),v([x({value:3})],Jt.prototype,"displayCount",null),v([x({type:Mr})],Jt.prototype,"graphic",void 0),v([x()],Jt.prototype,"layer",void 0),v([x()],Jt.prototype,"map",void 0),v([x({readOnly:!0})],Jt.prototype,"objectId",null),v([x({readOnly:!0})],Jt.prototype,"objectIdField",null),v([x()],Jt.prototype,"orderByFields",void 0),v([x({readOnly:!0})],Jt.prototype,"relatedFeatures",null),v([x({readOnly:!0})],Jt.prototype,"relatedLayer",null),v([x({readOnly:!0})],Jt.prototype,"relationship",null),v([x()],Jt.prototype,"featureCount",void 0),v([x({readOnly:!0})],Jt.prototype,"relatedFeatureViewModels",null),v([x()],Jt.prototype,"relationshipId",void 0),v([x()],Jt.prototype,"showAllEnabled",void 0),v([x()],Jt.prototype,"state",null),v([x()],Jt.prototype,"title",void 0),Jt=v([B("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Jt);const $M=Jt,_1="esri-feature",z_=`${_1}-relationship`,wa={base:z_,esriWidget:"esri-widget",listContainer:`${z_}__list`,listContainerQuerying:`${z_}__list--querying`,featureObserver:`${_1}__feature-observer`,stickySpinnerContainer:`${_1}__sticky-loading-container`,loadingSpinnerContainer:`${_1}__loading-container`,spinner:`${_1}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},VE={title:!0,description:!0};let tn=class extends Er{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new $M,this.messages=null,this.messagesCommon=null,this.visibleElements={...VE},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:s,relatedFeatures:h,featuresPerPage:f,featurePage:m}=this.viewModel;r==="ready"&&s&&h.length>=f*m&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Mb,this.addHandles([me(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),_t),me(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),un(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Sb({icon:()=>he(()=>import("./calcite-icon-fff7f4a5.js"),["assets/calcite-icon-fff7f4a5.js","assets/icon-dff2d65d.js","assets/observers-4f67f1fb.js"]),list:()=>he(()=>import("./calcite-list-d7c26252.js"),["assets/calcite-list-d7c26252.js","assets/interactive-573cbe88.js","assets/observers-4f67f1fb.js","assets/utils3-1ce076c1.js","assets/loadable-25ad9e4e.js","assets/debounce-31e0cfcc.js","assets/t9n-066e2692.js","assets/icon-dff2d65d.js","assets/loader-f0da1cdf.js","assets/guid-9426053f.js","assets/scrim-dbfff141.js"]),"list-item":()=>he(()=>import("./calcite-list-item-bc492032.js"),["assets/calcite-list-item-bc492032.js","assets/interactive-573cbe88.js","assets/utils3-1ce076c1.js","assets/loadable-25ad9e4e.js","assets/icon-dff2d65d.js","assets/observers-4f67f1fb.js"]),notice:()=>he(()=>import("./calcite-notice-493a1962.js"),["assets/calcite-notice-493a1962.js","assets/observers-4f67f1fb.js","assets/loadable-25ad9e4e.js","assets/t9n-066e2692.js","assets/icon-dff2d65d.js"])})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Ut(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r}=this.viewModel;return!e&&!!i&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return Ho(i===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...VE,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?ie("div",{key:"sticky-loader",class:wa.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return ie("span",{class:this.classes(wa.iconLoading,wa.spinner)})}renderLoading(){return ie("div",{key:"loading-container",class:wa.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return ie("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Qo(this.container)?"chevron-left":"chevron-right";return ie("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var h,f;const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&((h=e.formattedAttributes)==null?void 0:h.global[i]);const s=e.state==="loading";return ie("calcite-list-item",{key:e.uid,label:s?`${(f=this.messagesCommon)==null?void 0:f.loading}…`:r,description:s?"…":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?ie("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return ie("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},ie("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return ie("div",{key:"feature-observer",class:wa.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return ie("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return ie("div",{key:"list-container",class:this.classes(wa.listContainer,{[wa.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return ie("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},ie("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var i;const{state:e}=this.viewModel;return ie("div",{class:this.classes(wa.base,wa.esriWidget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(r=>{this.addHandles(me(()=>[r.title,r.state],()=>this.scheduleRender(),_t),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var h;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,s=i.title&&this.title;(h=this._featureElementInfo)==null||h.set({description:r,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await Jw(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};v([x()],tn.prototype,"_relatedFeatureIntersectionObserverNode",void 0),v([x({readOnly:!0})],tn.prototype,"displayShowAllButton",null),v([x({readOnly:!0})],tn.prototype,"displayListItems",null),v([x()],tn.prototype,"description",null),v([x({readOnly:!0})],tn.prototype,"featureCountDescription",null),v([x()],tn.prototype,"headingLevel",void 0),v([x()],tn.prototype,"title",null),v([x({type:$M})],tn.prototype,"viewModel",void 0),v([x(),xr("esri/widgets/Feature/t9n/Feature")],tn.prototype,"messages",void 0),v([x(),xr("esri/t9n/common")],tn.prototype,"messagesCommon",void 0),v([x()],tn.prototype,"visibleElements",void 0),v([vt("visibleElements")],tn.prototype,"castVisibleElements",null),tn=v([B("esri.widgets.Feature.FeatureRelationship")],tn);const GE=tn;let ppe=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var x1;const dpe=1,qE="content-view-models",UE="relationship-view-models",BE={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let si=x1=class extends nm(Oe){constructor(t){super(t),this._handles=new Mn,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=Ud(this._graphicChanged,dpe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...BE},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(me(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),_t))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Mie(OT(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return cN(this.graphic)}castAbilities(t){return{...BE,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof Fc&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof Fc&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof Fc&&e.previous()}async updateGeometry(){var f;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!t||!i)return;const s=(f=t==null?void 0:t.attributes)==null?void 0:f[r];if(s==null)return;const h=[s];if(!t.geometry){const m=await gN({layer:i,graphic:t,outFields:[],objectIds:h,returnGeometry:!0,spatialReference:e}),b=m==null?void 0:m.geometry;b&&(t.geometry=b)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){Ts(i)||(this._error=i,fe.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(Zn):typeof t=="string"?this._compileText(new a0({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(UE),(e=this._handles)==null||e.remove(qE),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var s;const i=(s=t==null?void 0:t.graphic)==null?void 0:s.getObjectId(),r=e==null?void 0:e.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:s}=this;e==null||e.filter(Boolean).forEach(h=>{t.find(f=>this._matchesFeature(f,h))||t.add(new x1({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:s,graphic:h}))}),t.forEach(h=>{(e==null?void 0:e.find(m=>this._matchesFeature(h,m)))||t.remove(h)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:s}=t,h=r==null?void 0:r.type;s&&h&&(h==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,e))),h==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createMediaVMParams(r,e))),h==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:s,title:h,description:f}=t,{_sourceLayer:m,graphic:b,map:S}=this,I=new $M({displayCount:i,graphic:b,orderByFields:r,relationshipId:s,layer:m,map:S,...this._compileTitleAndDesc({title:h,description:f})});return this.contentViewModels[e]=I,this._handles.add(un(()=>I.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(I)),UE),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:s,spatialReference:h,view:f}=this,m=new MM({expressionInfo:i,graphic:r,interceptor:x1.interceptor,map:s,spatialReference:h,view:f});return this.contentViewModels[e]=m,this._handles.add(me(()=>m.contentElementViewModel,()=>this._setExpressionContentVM(m,e),_t),qE),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:s}=t;return this.contentViewModels[e]=new N7({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:s}=t;return this.contentViewModels[e]=new cw({graphic:i,creator:r,destroyer:s}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:h}=this,f=s==null?void 0:s.attributes,m=this._expressionAttributes,b=h.global;return{title:Pc({attributes:f,fieldInfoMap:i,globalAttributes:b,expressionAttributes:m,layer:r,text:t}),description:Pc({attributes:f,fieldInfoMap:i,globalAttributes:b,expressionAttributes:m,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,s={...r==null?void 0:r.global,...r==null?void 0:r.content[e]},h=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos),f=h==null?void 0:h.filter(({fieldName:I})=>O7(I)||Ya(I)||s.hasOwnProperty(I)),m=i==null?void 0:i.expressionInfos,{description:b,title:S}=t;return{attributes:s,expressionInfos:m,fieldInfos:f,...this._compileTitleAndDesc({title:S,description:b})}}_compileFields(t,e){const i=t.clone(),r=new $b(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:s,_effectivePopupTemplate:h,relatedInfos:f,_sourceLayer:m,_expressionAttributes:b}=this,S=this.formattedAttributes,I=(r==null?void 0:r.attributes)??{},{description:A,mediaInfos:O,title:R}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:I,isAggregate:r==null?void 0:r.isAggregate,layer:m,fieldInfoMap:s,formattedAttributes:{...S==null?void 0:S.global,...S==null?void 0:S.content[e]},expressionAttributes:b,mediaInfos:O,popupTemplate:h,relatedInfos:f,...this._compileTitleAndDesc({title:R,description:A})}}_compileMedia(t,e){const i=t.clone(),r=new Fc(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){var h;const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(t&&t.text){const f=(e==null?void 0:e.attributes)??{},m=((h=this.formattedAttributes)==null?void 0:h.global)??{};t.text=Pc({attributes:f,fieldInfoMap:i,globalAttributes:m,expressionAttributes:s,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new cw(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:r}=t,s=e==null?void 0:e.editFieldsInfo;return r&&s?Sie(s,i==null?void 0:i.attributes):void 0}_compileTitle(t){var m;const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,h=(r==null?void 0:r.attributes)??{},f=((m=this.formattedAttributes)==null?void 0:m.global)??{};return Pc({attributes:h,fieldInfoMap:e,globalAttributes:f,expressionAttributes:s,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.title;return uw(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.content;return uw(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s}=this,h=this.map,f=this.view,m=this.spatialReference;if(e!==this._featureAbortController||!r)return;await Tie({graphic:r,popupTemplate:s,layer:i,spatialReference:m},t);const{content:{value:b},title:{value:S}}=await sn({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:I}}=await sn({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:upe({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:m,graphic:r,map:h,interceptor:x1.interceptor,view:f})});e===this._featureAbortController&&r&&(this._expressionAttributes=I,this._graphicExpressionAttributes={...r.attributes,...I},this._set("formattedAttributes",this._createFormattedAttributes(b)),this._set("title",this._compileTitle(S)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(b)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:h,_sourceLayer:f,_fieldInfoMap:m,_graphicExpressionAttributes:b}=this;i.content[e]=Y3({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...b,...t.attributes},layer:f,fieldInfoMap:m,relatedInfos:h})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:h,_fieldInfoMap:f,_graphicExpressionAttributes:m}=this;i.content[e]=Y3({fieldInfos:t.fieldInfos,graphic:r,attributes:{...m,...t.attributes},layer:h,fieldInfoMap:f,relatedInfos:s})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:h,_graphicExpressionAttributes:f}=this,m=e==null?void 0:e.fieldInfos,b={global:Y3({fieldInfos:m,graphic:i,attributes:f,layer:s,fieldInfoMap:h,relatedInfos:r}),content:[]};return Array.isArray(t)&&t.forEach((S,I)=>{S.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:S,contentElementIndex:I,formattedAttributes:b}),S.type==="media"&&this._createMediaFormattedAttributes({contentElement:S,contentElementIndex:I,formattedAttributes:b})}),b}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,OT(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const h=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(i)):s;if(!h||!t)return;const f=e.filter(S=>S&&Ya(S.fieldName));if(!f||!f.length)return;e.forEach(S=>this._configureRelatedInfo(S,h));const m=await Ese({relatedInfos:r,layer:h},i);Object.keys(m).forEach(S=>{var O;const I=r.get(S.toString()),A=(O=m[S])==null?void 0:O.value;I&&A&&(I.layerInfo=A.data)});const b=await Ase({graphic:t,relatedInfos:r,layer:h},i);Object.keys(b).forEach(S=>{var I;Sse((I=b[S])==null?void 0:I.value,r.get(S.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=Lv(t.fieldName);if(!r)return;const{layerId:s,fieldName:h}=r;if(!s)return;const f=i.get(s.toString())||xse(s,e);f&&(Cse({relatedInfo:f,fieldName:h,fieldInfo:t}),this.relatedInfos.set(s,f))}};si.interceptor=new ppe(Aie,Cie),v([x()],si.prototype,"_error",void 0),v([x()],si.prototype,"_featureAbortController",void 0),v([x({readOnly:!0})],si.prototype,"_effectivePopupTemplate",null),v([x({readOnly:!0})],si.prototype,"_fieldInfoMap",null),v([x({readOnly:!0})],si.prototype,"_sourceLayer",null),v([x()],si.prototype,"abilities",void 0),v([vt("abilities")],si.prototype,"castAbilities",null),v([x({readOnly:!0})],si.prototype,"content",void 0),v([x({readOnly:!0})],si.prototype,"contentViewModels",void 0),v([x()],si.prototype,"description",void 0),v([x({type:Boolean})],si.prototype,"defaultPopupTemplateEnabled",void 0),v([x({readOnly:!0})],si.prototype,"isTable",null),v([x({readOnly:!0})],si.prototype,"state",null),v([x({readOnly:!0})],si.prototype,"formattedAttributes",void 0),v([x({type:Mr,value:null})],si.prototype,"graphic",null),v([x({readOnly:!0})],si.prototype,"lastEditInfo",void 0),v([x({readOnly:!0})],si.prototype,"relatedInfos",void 0),v([x()],si.prototype,"spatialReference",null),v([x({readOnly:!0})],si.prototype,"title",void 0),v([x()],si.prototype,"map",null),v([x({readOnly:!0})],si.prototype,"waitingForContent",null),v([x()],si.prototype,"view",void 0),si=x1=v([B("esri.widgets.FeatureViewModel")],si);const TM=si,mr="esri-feature",mi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:mr,container:`${mr}__size-container`,title:`${mr}__title`,main:`${mr}__main-container`,btn:`${mr}__button`,icon:`${mr}__icon`,content:`${mr}__content`,contentNode:`${mr}__content-node`,contentElement:`${mr}__content-element`,text:`${mr}__text`,lastEditedInfo:`${mr}__last-edited-info`,fields:`${mr}__fields`,fieldHeader:`${mr}__field-header`,fieldData:`${mr}__field-data`,fieldDataDate:`${mr}__field-data--date`,loadingSpinnerContainer:`${mr}__loading-container`,spinner:`${mr}__loading-spinner`},jD=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>SN(i)&&!i.destroyed?ie("div",{class:mi.contentNode,key:i},i.render()):i instanceof HTMLElement?ie("div",{class:mi.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):Wie(i)?ie("div",{class:mi.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=v([B("esri.widgets.Feature.ContentMixin")],e),e};var M6;const HE={title:!0,content:!0,lastEditedInfo:!0},WE="relationship-handles";let Qi=M6=class extends jD(Er){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...HE},this.viewModel=new TM}initialize(){this.addHandles(me(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),_t))}loadDependencies(){return Sb({notice:()=>he(()=>import("./calcite-notice-493a1962.js"),["assets/calcite-notice-493a1962.js","assets/observers-4f67f1fb.js","assets/loadable-25ad9e4e.js","assets/t9n-066e2692.js","assets/icon-dff2d65d.js"])})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...HE,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=ie("div",{class:mi.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return ie("div",{class:this.classes(mi.base,mi.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return ie("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?ie("div",{key:"error-title",slot:"title"},t.errorMessage):null,ie("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return ie("div",{key:"loading-container",class:mi.loadingSpinnerContainer},ie("span",{class:this.classes(mi.iconLoading,mi.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?ie("div",{class:mi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?ie(L7,{level:this.headingLevel,class:mi.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?ie("div",{class:mi.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:ie("div",{class:mi.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[t.type]))return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?ie("div",{key:this._buildKey("attachments-element",t),class:this.classes(mi.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?ie("div",{key:this._buildKey("relationship-element",t),class:mi.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:ie("div",{key:this._buildKey("expression-element",t),class:mi.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?ie("div",{key:this._buildKey("custom-element",e),class:mi.contentElement},r.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:ie("div",{key:this._buildKey("fields-element",t),class:mi.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:ie("div",{key:this._buildKey("media-element",t),class:mi.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:s}=i,h=i.type==="edit"?s?e.lastEditedByUser:e.lastEdited:s?e.lastCreatedByUser:e.lastCreated,f=Ho(h,{date:r,user:s});return ie("div",{key:"edit-info-element",class:this.classes(mi.lastEditedInfo,mi.contentElement)},f)}renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?ie("div",{key:this._buildKey("text-element",e),class:this.classes(mi.contentElement,mi.text)},r.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(WE),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([un(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new M6({flowItems:e,viewModel:r,visibleElements:i})))}),un(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const s=new GE({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),e.push(s)})],WE)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,h)=>{if(s.type==="attachments"&&(this._contentWidgets[h]=new Die({displayType:s.displayType,headingLevel:e.title?t+1:t,viewModel:r[h]})),s.type==="fields"&&(this._contentWidgets[h]=new MN({viewModel:r[h]})),s.type==="media"&&(this._contentWidgets[h]=new mL({viewModel:r[h]})),s.type==="text"&&(this._contentWidgets[h]=new Pv({viewModel:r[h]})),s.type==="custom"&&(this._contentWidgets[h]=new Pv({viewModel:r[h]})),s.type==="expression"&&(this._contentWidgets[h]=new cpe({viewModel:r[h]})),s.type==="relationship"){const f=new GE({viewModel:r[h]});this._addFeatureRelationshipHandles(f),this._contentWidgets[h]=f}},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new Pv({viewModel:s}))}this.scheduleRender()}};v([x()],Qi.prototype,"graphic",null),v([x()],Qi.prototype,"defaultPopupTemplateEnabled",null),v([x()],Qi.prototype,"flowItems",void 0),v([x()],Qi.prototype,"headingLevel",void 0),v([x({readOnly:!0})],Qi.prototype,"isTable",null),v([x()],Qi.prototype,"label",null),v([x(),xr("esri/widgets/Feature/t9n/Feature")],Qi.prototype,"messages",void 0),v([x(),xr("esri/t9n/common")],Qi.prototype,"messagesCommon",void 0),v([x(),xr("esri/widgets/support/t9n/uriUtils")],Qi.prototype,"messagesURIUtils",void 0),v([x()],Qi.prototype,"spatialReference",null),v([x({readOnly:!0})],Qi.prototype,"title",null),v([x()],Qi.prototype,"visibleElements",void 0),v([vt("visibleElements")],Qi.prototype,"castVisibleElements",null),v([x()],Qi.prototype,"map",null),v([x()],Qi.prototype,"view",null),v([x({type:TM})],Qi.prototype,"viewModel",void 0),Qi=M6=v([B("esri.widgets.Feature")],Qi);const fpe=Qi;var DD;const r2=Symbol("anchorHandles");let rc=class extends pa.EventedAccessor{constructor(e){super(e),this[DD]=new Mn,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[r2].add([Sn(()=>Au(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),me(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null,this[r2]=Ut(this[r2])}get screenLocation(){var s;const{location:e,view:i,screenLocationEnabled:r}=this;return r&&e!=null&&i!=null&&i.ready?(s=i.toScreen)==null?void 0:s.call(i,e):null}};DD=r2,v([x()],rc.prototype,"location",void 0),v([x()],rc.prototype,"screenLocation",null),v([x()],rc.prototype,"screenLocationEnabled",void 0),v([x()],rc.prototype,"view",void 0),rc=v([B("esri.widgets.support.AnchorElementViewModel")],rc);const zD=rc,ype="esri.widgets.CompassViewModel";let n2=class extends zD{constructor(e){super(e),this.visible=!1}};v([x()],n2.prototype,"visible",void 0),n2=v([B(ype)],n2);const VD=n2,V_="esri-spinner",G_={base:V_,spinnerStart:`${V_}--start`,spinnerFinish:`${V_}--finish`};let nc=class extends Er{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new VD}initialize(){this.addHandles(me(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const s=()=>this.hide();r&&r.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,s=e&&r,h=!e&&r,f={[G_.spinnerStart]:s,[G_.spinnerFinish]:h},m=this._getPositionStyles();return ie("div",{class:this.classes(G_.base,f),styles:m})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=Jw(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};v([x()],nc.prototype,"location",null),v([x()],nc.prototype,"view",null),v([x({type:VD})],nc.prototype,"viewModel",void 0),v([x()],nc.prototype,"visible",null),nc=v([B("esri.widgets.Spinner")],nc);const mpe=nc,zb={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Nc=new k0({id:"zoom-to-feature",title:"{messages.zoom}",className:zb.iconZoom}),JE=new k0({id:"remove-selected-feature",title:"{messages.remove}",className:zb.iconTrash}),Pd=new k0({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:zb.iconZoom}),Rd=new k0({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:zb.iconBrowseClusteredFeatures}),gpe="esri.widgets.Popup.PopupViewModel",xw=fe.getLogger(gpe),vpe=t=>{const{event:e,view:i,viewModel:r}=t,{action:s}=e;if(!s)return Promise.reject(new ne("trigger-action:missing-arguments","Event has no action"));const{disabled:h,id:f}=s;if(!f)return Promise.reject(new ne("trigger-action:invalid-action","action.id is missing"));if(h)return Promise.reject(new ne("trigger-action:invalid-action","Action is disabled"));if(f===Nc.id)return bpe(r).catch(I9);if(f===Pd.id)return _pe(r);if(f===Rd.id)return r.featureMenuOpen=!r.featureMenuOpen,r.browseClusterEnabled=!r.browseClusterEnabled,Promise.resolve();if(r.browseClusterEnabled=!1,f===JE.id){r.visible=!1;const{selectedFeature:m}=r;if(!m)return Promise.reject(new ne(`trigger-action:${JE.id}`,"selectedFeature is required",{selectedFeature:m}));const{sourceLayer:b}=m;return b?b.remove(m):i==null||i.graphics.remove(m),Promise.resolve()}return Promise.resolve()};function GD(t){const{selectedFeature:e,location:i,view:r}=t;return r?r.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function wc(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function wpe(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function bpe(t){var I;const{location:e,selectedFeature:i,view:r,zoomFactor:s}=t,h=GD(t);if(!r||!h){const A=new ne("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:h,view:r});throw xw.error(A),A}const f=r.scale/s,m=(I=t.selectedFeature)==null?void 0:I.geometry,b=m??e,S=b!=null&&b.type==="point"&&await wpe(i,r);Nc.active=!0,Nc.disabled=!0;try{await t.zoomTo({target:{target:h,scale:S?f:void 0}})}catch{const O=new ne("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});xw.error(O)}finally{Nc.active=!1,Nc.disabled=!1,t.zoomToLocation=null,S&&(t.location=b)}}async function _pe(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const f=new ne("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw xw.error(f),f}if(!e||!wc(e)){const f=new ne("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw xw.error(f),f}const[r,s]=await IM(i,e);Pd.active=!0,Pd.disabled=!0;const{extent:h}=await r.queryExtent(s);await t.zoomTo({target:h}),Pd.active=!1,Pd.disabled=!1}async function xpe(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,s]=await IM(e,i),{extent:h}=await r.queryExtent(s);t.selectedClusterBoundaryFeature.geometry=h,e.graphics.add(t.selectedClusterBoundaryFeature)}async function Spe(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,s]=await IM(i,e);Rd.active=!0,Rd.disabled=!0;const{features:h}=await r.queryFeatures(s);Rd.active=!1,Rd.disabled=!1,t==null||t.open({features:[e].concat(h),featureMenuOpen:!0})}async function IM(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),s=e.getObjectId();return r.aggregateIds=s!=null?[s]:[],[i,r]}function Mpe(t){const e=t.features.filter(i=>wc(i));e.length&&(t.features=e)}function qD(t){var e;if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const De="esri-popup",bf=`${De}__header`,fh=`${De}--is-docked`,ge={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:De,widget:"esri-widget",main:`${De}__main-container`,loadingContainer:`${De}__loading-container`,isCollapsible:`${De}--is-collapsible`,isCollapsed:`${De}--is-collapsed`,shadow:`${De}--shadow`,isDocked:fh,isDockedTopLeft:`${fh}-top-left`,isDockedTopCenter:`${fh}-top-center`,isDockedTopRight:`${fh}-top-right`,isDockedBottomLeft:`${fh}-bottom-left`,isDockedBottomCenter:`${fh}-bottom-center`,isDockedBottomRight:`${fh}-bottom-right`,alignTopCenter:`${De}--aligned-top-center`,alignBottomCenter:`${De}--aligned-bottom-center`,alignTopLeft:`${De}--aligned-top-left`,alignBottomLeft:`${De}--aligned-bottom-left`,alignTopRight:`${De}--aligned-top-right`,alignBottomRight:`${De}--aligned-bottom-right`,isFeatureMenuOpen:`${De}--feature-menu-open`,isActionsMenuOpen:`${De}--actions-menu-open`,hasFeatureUpdated:`${De}--feature-updated`,header:bf,headerButtons:`${bf}-buttons`,headerContainer:`${bf}-container`,headerContainerButton:`${bf}-container--button`,headerTitle:`${bf}-title`,content:`${De}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${De}__footer`,footerHasPagination:`${De}__footer--has-pagination`,footerHasActions:`${De}__footer--has-actions`,footerHasActionsMenu:`${De}__footer--has-actions-menu`,button:`${De}__button`,buttonDisabled:`${De}__button--disabled`,buttonDock:`${De}__button--dock`,icon:`${De}__icon`,iconDock:`${De}__icon--dock-icon`,inlineActionsContainer:`${De}__inline-actions-container`,actionsMenuButton:`${De}__actions-menu-button`,actions:`${De}__actions`,action:`${De}__action`,actionImage:`${De}__action-image`,actionText:`${De}__action-text`,actionToggle:`${De}__action-toggle`,actionToggleOn:`${De}__action-toggle--on`,actionExit:`${De}__action--exit`,actionSelectFeature:`${De}__action--select-feature`,pointer:`${De}__pointer`,pointerDirection:`${De}__pointer-direction`,navigation:`${De}__navigation`,paginationPrevious:`${De}__pagination-previous`,paginationNext:`${De}__pagination-next`,paginationPreviousIconLTR:`${De}__pagination-previous-icon`,paginationPreviousIconRTL:`${De}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${De}__pagination-next-icon`,paginationNextIconRTL:`${De}__pagination-next-icon--rtl`,featureMenu:`${De}__feature-menu`,featureMenuList:`${De}__feature-menu-list`,featureMenuItem:`${De}__feature-menu-item`,featureMenuViewport:`${De}__feature-menu-viewport`,featureMenuHeader:`${De}__feature-menu-header`,featureMenuNote:`${De}__feature-menu-note`,featureMenuSelected:`${De}__feature-menu-item--selected`,featureMenuButton:`${De}__feature-menu-button`,featureMenuTitle:`${De}__feature-menu-title`,featureMenuObserver:`${De}__feature-menu-observer`,featureMenuLoader:`${De}__feature-menu-loader`,collapseButton:`${De}__collapse-button`,collapseIcon:`${De}__collapse-icon`},$pe="OBJECTID";var hp;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(hp||(hp={}));function UD(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Tpe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ipe(t,e,i,r,s,h){const f=new Float32Array(6);return f[0]=t,f[1]=e,f[2]=i,f[3]=r,f[4]=s,f[5]=h,f}function Epe(t,e){return new Float32Array(t,e,6)}function BD(t,e,i,r){const s=e[r],h=e[r+1];t[r]=i[0]*s+i[2]*h+i[4],t[r+1]=i[1]*s+i[3]*h+i[5]}function Ape(t,e,i,r=0,s=0,h=2){const f=s||e.length/h;for(let m=r;m<f;m++)BD(t,e,i,m*h)}Object.freeze(Object.defineProperty({__proto__:null,clone:Tpe,create:UD,createView:Epe,fromValues:Ipe,transform:BD,transformMany:Ape},Symbol.toStringTag,{value:"Module"}));function Cpe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function kpe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Ope(t,e,i,r,s,h,f){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=h,t[5]=f,t}function EM(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5];let b=i*h-r*s;return b?(b=1/b,t[0]=h*b,t[1]=-r*b,t[2]=-s*b,t[3]=i*b,t[4]=(s*m-h*f)*b,t[5]=(r*f-i*m)*b,t):null}function Ppe(t){return t[0]*t[3]-t[1]*t[2]}function HD(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=i[0],I=i[1],A=i[2],O=i[3],R=i[4],L=i[5];return t[0]=r*S+h*I,t[1]=s*S+f*I,t[2]=r*A+h*O,t[3]=s*A+f*O,t[4]=r*R+h*L+m,t[5]=s*R+f*L+b,t}function Vb(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=Math.sin(i),I=Math.cos(i);return t[0]=r*I+h*S,t[1]=s*I+f*S,t[2]=r*-S+h*I,t[3]=s*-S+f*I,t[4]=m,t[5]=b,t}function AM(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=i[0],I=i[1];return t[0]=r*S,t[1]=s*S,t[2]=h*I,t[3]=f*I,t[4]=m,t[5]=b,t}function Vy(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=i[0],I=i[1];return t[0]=r,t[1]=s,t[2]=h,t[3]=f,t[4]=r*S+h*I+m,t[5]=s*S+f*I+b,t}function WD(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function JD(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function CM(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Rpe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Fpe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function Npe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function KD(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function Lpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function jpe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function Dpe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function zpe(t,e){const i=t[0],r=t[1],s=t[2],h=t[3],f=t[4],m=t[5],b=e[0],S=e[1],I=e[2],A=e[3],O=e[4],R=e[5],L=$n();return Math.abs(i-b)<=L*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(r-S)<=L*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(s-I)<=L*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(h-A)<=L*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-O)<=L*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-R)<=L*Math.max(1,Math.abs(m),Math.abs(R))}const Vpe=HD,Gpe=KD;Object.freeze(Object.defineProperty({__proto__:null,add:Npe,copy:Cpe,determinant:Ppe,equals:zpe,exactEquals:Dpe,frob:Fpe,fromRotation:WD,fromScaling:JD,fromTranslation:CM,identity:kpe,invert:EM,mul:Vpe,multiply:HD,multiplyScalar:Lpe,multiplyScalarAndAdd:jpe,rotate:Vb,scale:AM,set:Ope,str:Rpe,sub:Gpe,subtract:KD,translate:Vy},Symbol.toStringTag,{value:"Module"}));const KE=ue("android");ue("chrome")||KE&&KE>=4;O4();hp.size;hp.maxSize;hp.maxOutlineSize;hp.lineWidth;hp.tallSymbolWidth;function ZD(t){return t&&"opacity"in t?t.opacity*ZD(t.parent):1}async function qpe(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,s=ZD(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const j=t.symbol.type==="web-style"?await Yre(t.symbol,{...e,cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return n_(j,null,s),j}const h=(e!=null?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let f=h&&"getSymbolAsync"in h?await h.getSymbolAsync(t,e):null;if(!f)return;if(f=f.type==="web-style"?await f.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):f.clone(),!(h&&"visualVariables"in h&&h.visualVariables&&h.visualVariables.length))return n_(f,null,s),f;if("arcadeRequiredForVisualVariables"in h&&h.arcadeRequiredForVisualVariables&&(e==null||e.arcade==null)){const j={...e};j.arcade=await al(),e=j}const m=await he(()=>Promise.resolve().then(()=>nM),void 0),b=[],S=[],I=[],A=[];for(const j of h.visualVariables)switch(j.type){case"color":b.push(j);break;case"opacity":S.push(j);break;case"rotation":A.push(j);break;case"size":j.target||I.push(j)}const O=!!b.length&&b[b.length-1],R=O?m.getColor(O,t,e):null,L=!!S.length&&S[S.length-1];let z=L?m.getOpacity(L,t,e):null;if(s!=null&&(z=z!=null?z*s:s),n_(f,R,z),I.length){const j=m.getAllSizes(I,t,e);await Kre(f,j)}for(const j of A)Zre(f,m.getRotationAngle(j,t,e),j.axis);return f}let YD=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],h=new ek(s,void 0,void 0,2,2);this._properties[r]={pool:h,acquired:[]}}this._afterDispatchHandle=tU(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)L$(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)L$(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}};const Upe=ue("mac")?"Meta":"Ctrl",Gb={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)Gb[t]=String.fromCharCode(t);for(let t=1;t<25;t++)Gb[111+t]=`F${t}`;for(let t=65;t<91;t++)Gb[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function Bpe(t){if(t.key!==void 0)return dc(t);const e=Gb[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function Hpe(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let Wpe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const ZE=fe.getLogger("esri.views.input.InputHandler");let rr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?ZE.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const h=typeof e=="string"?new Wpe(e,s):e,f=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=I=>{const A=this._incoming[I.match.eventType];if(A){const O=A.indexOf(I);A.splice(O,1),f(),this._manager&&this._manager.updateDependencies()}},b=new Jpe(h,r,{onPause:m,onRemove:m,onResume:I=>{const A=this._incoming[I.match.eventType];A&&!A.includes(I)&&(A.push(I),f(),this._manager&&this._manager.updateDependencies())}});let S=this._incoming[h.eventType];return S||(S=[],this._incoming[h.eventType]=S),S.push(b),f(),this._manager&&this._manager.updateDependencies(),b}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Kpe(e,{onEmit:(r,s,h,f)=>{var m;(m=this._manager)==null||m.emit(r.eventType,s,h,f)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):ZE.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&((r=s.callback)==null||r.call(s,e),e.shouldStopPropagation()))break}}},Jpe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Kpe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},Zpe=class extends rr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=e;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},Ype=class{constructor(e,i){this._observable=new fS,this._value=e,this._equalityFunction=i}get value(){return rt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Sw(t,e=NC){return new Ype(t,e)}let Xpe=class extends rr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Sw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Vo=class extends Oe{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Upe,this._latestPointerType="mouse",this._propertiesPool=new YD({latestPointerLocation:tde},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,i,r=Uu.INTERNAL){if(this._nameToGroup[e])return void fe.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void fe.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const s={name:e,handlers:i.map(h=>({handler:h,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let h=s.handlers.length-1;h>=0;h--){const f=s.handlers[h];this._handlers.push(f),f.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,b,S,I,A)=>{this._emitInputEvent(f.priorityIndex+1,m,b,S,A,I)},setPointerCapture:(m,b)=>{this._setPointerCapture(s,f,m,b)},setEventCallback:m=>{f.eventCallback=m},setUninstallCallback:m=>{f.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var s;r.removed=!0,(s=r.uninstallCallback)==null||s.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):fe.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let h=s.handler.hasSideEffects;if(!h){for(const f of s.handler.outgoingEventTypes)if(e.has(f)){h=!0;break}}if(h)for(const f of s.handler.incomingEventMatches){e.add(f.eventType);for(const m of f.keyModifiers)Hpe(m)||i.add(m)}s.active=h}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const h=this._propertiesPool.get("latestPointerLocation");h.x=i,h.y=r,this._set("latestPointerLocation",h)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const h=i;this._pointerCaptures.delete(h.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{if(!r){const m=new Set;this._activeKeyModifiers.forEach(b=>{m.add(b)}),this._activeKeyModifiers=m,r=!0}},h=(m,b)=>{b&&!this._activeKeyModifiers.has(m)?(s(),this._activeKeyModifiers.add(m)):!b&&this._activeKeyModifiers.has(m)&&(s(),this._activeKeyModifiers.delete(m))};if(e==="key-down"||e==="key-up"){const m=i.key;this._keyModifiers.has(m)&&h(m,e==="key-down")}const f=i.native;h("Alt",!(!f||!f.altKey)),h("Ctrl",!(!f||!f.ctrlKey)),h("Shift",!(!f||!f.shiftKey)),h("Meta",!(!f||!f.metaKey)),h("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Zpe((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new Xpe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Uu.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Uu.INTERNAL)}_setPointerCapture(e,i,r,s){const h=e.name+"-"+i.priorityIndex,f=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,f),s?(f.add(h),f.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):f.has(h)&&(f.delete(h),f.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,h,f){const m=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),b=h!==void 0&&h,S={event:new Qpe(i,r,m,f||this._activeKeyModifiers,b),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(S):this._doNewPropagation(S)}_doNewPropagation(e){this._currentPropagation={events:new H2,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r;const e=Gn(this._currentPropagation);for(;e.events.length>0;){const{event:s,priorityIndex:h}=e.events.pop(),f=s.data&&s.data.eventId;if(!(f!=null&&this._stoppedPropagationEventIds.has(f)))for(e.currentHandler=this._handlersPriority[h];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((r=(i=e.currentHandler).eventCallback)==null||r.call(i,s)),s.shouldStopPropagation()){f!=null&&this._stoppedPropagationEventIds.add(f);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const i=new H2;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const h=r.keyModifiers.filter(f=>s.keyModifiers.includes(f));if(h.length===r.keyModifiers.length!=(h.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};v([x({readOnly:!0})],Vo.prototype,"hasPendingInputs",null),v([x({constructOnly:!0})],Vo.prototype,"eventSource",void 0),v([x({constructOnly:!0})],Vo.prototype,"recognizers",void 0),v([x()],Vo.prototype,"_latestPointerType",void 0),v([x()],Vo.prototype,"latestPointerType",null),v([x()],Vo.prototype,"multiTouchActive",null),v([x({readOnly:!0})],Vo.prototype,"latestPointerLocation",void 0),Vo=v([B("esri.views.input.InputManager")],Vo);let Qpe=class{constructor(e,i,r,s,h){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=h,this._propagationState=_u.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=_u.STOPPED}shouldStopPropagation(){return(this._propagationState&_u.STOPPED)!=0}async(e){this._propagationState|=_u.PAUSED;const i=(r,s)=>{this._propagationState&=~_u.PAUSED;const h=this._resumeCallback;if(this._resumeCallback=null,h&&h(),s)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&_u.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var _u;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(_u||(_u={}));const Uu={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let ede=class{};const tde=ede;function YE(t){return t&&typeof t.highlight=="function"}const kM=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return jw(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return v([x()],e.prototype,"goToOverride",void 0),v([x()],e.prototype,"view",void 0),e=v([B("esri.widgets.support.GoTo")],e),e},ry=qe.ofType({key:"type",defaultKeyValue:"button",base:ob,typeMap:{button:k0,toggle:BP}}),ide=()=>[Nc.clone()],rde=()=>[Pd.clone(),Rd.clone()];let dt=class extends kM(zD){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Mn,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ry,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Mr({symbol:new nh({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([me(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),me(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),me(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),me(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),me(()=>this.location,e=>this._locationChange(e)),me(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),me(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),me(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),me(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>vpe({event:e,viewModel:this,view:this.view})),Sn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),qn),me(()=>{var e,i;return[this.features,(e=this.view)==null?void 0:e.map,(i=this.view)==null?void 0:i.spatialReference]},()=>this._updateFeatureVMs()),me(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Sn(()=>!this.visible,()=>this.browseClusterEnabled=!1),me(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new ry;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:s,includeDefaultActions:h,selectedFeature:f}=this,m=h?r.concat(i):i,b=f&&(typeof f.getEffectivePopupTemplate=="function"&&f.getEffectivePopupTemplate(s)||f.popupTemplate),S=b&&b.actions,I=b&&b.overwriteActions?S:S?S.concat(m):m;return I&&I.filter(Boolean).forEach(A=>e.add(A)),e}get defaultActions(){const e=this._get("defaultActions")||new ry;return e.removeAll(),e.addMany(wc(this.selectedFeature)?rde():ide()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:s,selectedFeatureIndex:h}=this,f=s&&i.length;f&&r&&h===-1?this.selectedFeatureIndex=0:f&&h!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){var s,h,f;let i=e;const r=(h=(s=this.view)==null?void 0:s.spatialReference)==null?void 0:h.isWebMercator;e&&((f=e==null?void 0:e.spatialReference)!=null&&f.isWGS84)&&r&&(i=ea(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=h=>{this._pendingPromises.has(i)&&this._updateFeatures(h),this._updatePendingPromises(i)},s=()=>this._updatePendingPromises(i);i.then(r,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=GD(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new ne("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:r}=this;if(!r||!e)throw new ne("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const s=["actionsMenuOpen","collapsed"];for(const h of s)delete i[h];this.set(i)}triggerAction(e){const i=this.allActions.getItemAt(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Mpe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?wc(i)?(await xpe(this),await Spe(this)):fe.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):fe.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}_animationStateChange(e){this.zoomToLocation||(Nc.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i;const e=(i=this.view)==null?void 0:i.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(wc(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:s,featureViewModels:h}=this;if(r===null)return;const f=((r-1)*s+i)%i,m=f+s;h.slice(f,m).forEach((b,S)=>{b&&!b.graphic&&(b.graphic=e[f+S])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:r,view:s}=this;if(e&&s){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),wc(e)?void 0:(e.symbol=await qpe(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!r&&i||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{var f;const h=(f=s.center)==null?void 0:f.clone();h&&(this.location=h)}):this.location=qD(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:s}=i,h=Promise.resolve(r),f=s.map(m=>m.promise);this.promises=[h,...f]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r}=this;if(wc(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const s=r.slice(0),h=[];i.forEach((f,m)=>{var S,I;if(!f)return;let b=null;if(s.some((A,O)=>(A&&A.graphic===f&&(b=A,s.splice(O,1)),!!b)),b)h[m]=b;else{const A=new TM({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(S=this.view)==null?void 0:S.spatialReference,graphic:f===e?f:null,map:(I=this.view)==null?void 0:I.map,view:this.view});h[m]=A}}),s.forEach(f=>f&&!f.destroyed&&f.destroy()),this._set("featureViewModels",h)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:i,autoOpenEnabled:r}=this;if(i.remove(e),r&&this.view){const s=this.view.on("click",h=>{h.pointerType==="mouse"&&h.button!==0||this._fetchFeaturesAndOpen(h)},Uu.WIDGET);i.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:s}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const h=this.fetchFeatures(e,{signal:s,event:i});return h.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),h}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:r}=e,{view:s}=this;this._fetchFeaturesWithController(i,e).then(h=>{var I;const{clientOnlyGraphics:f,promisesPerLayerView:m,location:b}=h,S=[Promise.resolve(f),...m.map(A=>A.promise)];return(I=s==null?void 0:s.popup)==null||I.open({location:b||r,promises:S}),h})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(e,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||$pe:null,s=e.attributes;return s&&r&&s[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:r,activeFeature:s,visible:h}=this;if(!(s&&r&&i&&h))return;const f=this._getHighlightLayer(s);if(!(f&&f instanceof G2))return;const m=this._getLayerView(r,f);this._highlightActiveFeaturePromise=m;const b=await m;if(!(b&&YE(b)&&this._highlightActiveFeaturePromise===m&&this.activeFeature&&this.highlightEnabled))return;const S=b.highlight(this._getHighlightTarget(s,f));this._handles.add(S,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:r,view:s,visible:h}=this;if(!(i&&s&&r&&h))return;const f=this._getHighlightLayer(i);if(!(f&&f instanceof G2))return;const m=this._getLayerView(s,f);this._highlightSelectedFeaturePromise=m;const b=await m;if(!(b&&YE(b)&&this._highlightSelectedFeaturePromise===m&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const S=b.highlight(this._getHighlightTarget(i,f));this._handles.add(S,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const r=e.filter(s=>!i.includes(s));this.features=i.concat(r)}};v([x()],dt.prototype,"featurePage",void 0),v([x()],dt.prototype,"isLoadingFeature",null),v([x({type:ry})],dt.prototype,"actions",void 0),v([x({readOnly:!0})],dt.prototype,"active",null),v([x()],dt.prototype,"activeFeature",void 0),v([x({readOnly:!0})],dt.prototype,"allActions",null),v([x({type:Boolean})],dt.prototype,"defaultPopupTemplateEnabled",void 0),v([x()],dt.prototype,"autoCloseEnabled",void 0),v([x()],dt.prototype,"autoOpenEnabled",void 0),v([x()],dt.prototype,"browseClusterEnabled",void 0),v([x()],dt.prototype,"content",void 0),v([x({type:ry,readOnly:!0})],dt.prototype,"defaultActions",null),v([x({readOnly:!0})],dt.prototype,"featureCount",null),v([x()],dt.prototype,"features",null),v([x()],dt.prototype,"featuresPerPage",void 0),v([x()],dt.prototype,"featureMenuOpen",void 0),v([x()],dt.prototype,"featureViewModelAbilities",void 0),v([x({readOnly:!0})],dt.prototype,"featureViewModels",void 0),v([x()],dt.prototype,"highlightEnabled",void 0),v([x()],dt.prototype,"includeDefaultActions",void 0),v([x({type:ke})],dt.prototype,"location",null),v([x({readOnly:!0})],dt.prototype,"pendingPromisesCount",null),v([x({readOnly:!0})],dt.prototype,"selectedClusterBoundaryFeature",void 0),v([x({readOnly:!0})],dt.prototype,"waitingForResult",null),v([x({readOnly:!0})],dt.prototype,"promiseCount",null),v([x()],dt.prototype,"promises",null),v([x({value:null,readOnly:!0})],dt.prototype,"selectedFeature",null),v([x({value:-1})],dt.prototype,"selectedFeatureIndex",null),v([x({readOnly:!0})],dt.prototype,"selectedFeatureViewModel",null),v([x({readOnly:!0})],dt.prototype,"state",null),v([x()],dt.prototype,"title",void 0),v([x()],dt.prototype,"updateLocationEnabled",void 0),v([x()],dt.prototype,"view",void 0),v([x()],dt.prototype,"visible",void 0),v([x()],dt.prototype,"zoomFactor",void 0),v([x()],dt.prototype,"zoomToLocation",void 0),v([x()],dt.prototype,"centerAtLocation",null),dt=v([B("esri.widgets.Popup.PopupViewModel")],dt);const XD=dt,XE="selected-index",nde=0,QE="popup-spinner",eA={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},tA="esri-popup";function ba(t,e){return e===void 0?`${tA}__${t}`:`${tA}__${t}-${e}`}const iA={closeButton:!0,featureNavigation:!0};let je=class extends jD(Er){constructor(e,i){super(e,i),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Mn,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Ud(()=>this._displaySpinner(),nde),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new qe,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new XD,this.visibleElements={...iA},this._handleOpenRelatedFeature=r=>{this._openRelatedFeature(r)},this._addSelectedFeatureIndexHandle(),this.addHandles([me(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._positionContainer()),me(()=>{var r;return[(r=this.viewModel)==null?void 0:r.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},(r,s)=>{!!r!=!!s&&this.reposition()}),me(()=>{var r,s,h,f,m,b;return[(s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.padding,(f=(h=this.viewModel)==null?void 0:h.view)==null?void 0:f.size,(m=this.viewModel)==null?void 0:m.active,(b=this.viewModel)==null?void 0:b.location,this.alignment]},()=>this.reposition()),me(()=>this.spinnerEnabled,r=>this._spinnerEnabledChange(r)),me(()=>{var r,s;return(s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.size},(r,s)=>this._updateDockEnabledForViewSize(r,s)),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,s)=>this._viewChange(r,s)),me(()=>{var r,s;return(s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.ready},(r,s)=>this._viewReadyChange(r??!1,s??!1)),me(()=>{var r,s;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(s=this.viewModel)==null?void 0:s.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),me(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),me(()=>{var r,s,h,f;return[(s=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:s.title,(f=(h=this.selectedFeatureWidget)==null?void 0:h.viewModel)==null?void 0:f.state]},()=>this._setTitleFromFeatureWidget()),me(()=>{var r,s,h,f;return[(s=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:s.content,(f=(h=this.selectedFeatureWidget)==null?void 0:h.viewModel)==null?void 0:f.state]},()=>this._setContentFromFeatureWidget()),Sn(()=>!this.collapsed,()=>{var r,s;((s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),un(()=>{var r;return(r=this.viewModel)==null?void 0:r.allActions},"change",()=>this._watchActions()),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.allActions},()=>this._watchActions(),_t),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),un(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),me(()=>{var r,s,h,f;return[(s=(r=this._activeFlowItemWidget)==null?void 0:r.viewModel)==null?void 0:s.state,(f=(h=this._activeFlowItemWidget)==null?void 0:h.viewModel)==null?void 0:f.title]},()=>this.scheduleRender())])}loadDependencies(){return Sb({action:()=>he(()=>import("./calcite-action-6dafd0ff.js"),["assets/calcite-action-6dafd0ff.js","assets/action-ee12d117.js","assets/guid-9426053f.js","assets/interactive-573cbe88.js","assets/loadable-25ad9e4e.js","assets/t9n-066e2692.js","assets/observers-4f67f1fb.js","assets/icon-dff2d65d.js","assets/loader-f0da1cdf.js"]),flow:()=>he(()=>import("./calcite-flow-fdcca67d.js"),["assets/calcite-flow-fdcca67d.js","assets/observers-4f67f1fb.js"]),"flow-item":()=>he(()=>import("./calcite-flow-item-514f5856.js"),["assets/calcite-flow-item-514f5856.js","assets/interactive-573cbe88.js","assets/loadable-25ad9e4e.js","assets/t9n-066e2692.js","assets/observers-4f67f1fb.js","assets/guid-9426053f.js","assets/action-ee12d117.js","assets/icon-dff2d65d.js","assets/loader-f0da1cdf.js","assets/tooltip-54213af3.js","assets/debounce-31e0cfcc.js","assets/scrim-dbfff141.js"]),icon:()=>he(()=>import("./calcite-icon-fff7f4a5.js"),["assets/calcite-icon-fff7f4a5.js","assets/icon-dff2d65d.js","assets/observers-4f67f1fb.js"]),tooltip:()=>he(()=>import("./calcite-tooltip-4aba31a6.js"),["assets/calcite-tooltip-4aba31a6.js","assets/tooltip-54213af3.js","assets/debounce-31e0cfcc.js","assets/guid-9426053f.js"])})}destroy(){var e,i;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(i=this._featureMenuIntersectionObserver)==null||i.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:i}=this;if(!e)return!!(i!=null&&i.content);const r=e.viewModel;if(r!=null&&r.waitingForContent||(r==null?void 0:r.state)==="error")return!0;const s=r==null?void 0:r.content;return Array.isArray(s)?!!s.length:!!s}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||eA}set dockOptions(e){var b,S;const i={...eA},r=(S=(b=this.viewModel)==null?void 0:b.view)==null?void 0:S.breakpoints,s={};r&&(s.width=r.xsmall,s.height=r.xsmall);const h={...i,...e},f={...i.breakpoint,...s},{breakpoint:m}=h;typeof m=="object"?h.breakpoint={...f,...m}:m&&(h.breakpoint=f),this._set("dockOptions",h),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:i,headingLevel:r,_flowItems:s}=this,{selectedFeatureViewModel:h}=this.viewModel,f={...i,title:!1};return h?(e?(e.viewModel=h,e.visibleElements=f):this._feature=new fpe({flowItems:s,headingLevel:r+1,viewModel:h,visibleElements:f}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...iA,...e}}blur(){const{active:e}=this.viewModel;e||fe.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e||fe.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var h,f;this._handles.remove(XE);const i=!!e&&!!e.featureMenuOpen,r=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:r,featureMenuOpen:i};((f=(h=this.viewModel)==null?void 0:h.view)==null?void 0:f.widthBreakpoint)==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var z,j,H,Y;const{actionsMenuOpen:e,dockEnabled:i,featureMenuVisible:r,dividedActions:s,currentAlignment:h,currentDockPosition:f}=this,{active:m}=this.viewModel,{menuActions:b}=s,S=m&&b.length>1&&e,I=m&&i,A=m&&!i,O=(j=(z=this.selectedFeature)==null?void 0:z.layer)==null?void 0:j.title,R=(Y=(H=this.selectedFeature)==null?void 0:H.layer)==null?void 0:Y.id,L={[ge.alignTopCenter]:h==="top-center",[ge.alignBottomCenter]:h==="bottom-center",[ge.alignTopLeft]:h==="top-left",[ge.alignBottomLeft]:h==="bottom-left",[ge.alignTopRight]:h==="top-right",[ge.alignBottomRight]:h==="bottom-right",[ge.isDocked]:I,[ge.shadow]:A,[ge.isDockedTopLeft]:f==="top-left",[ge.isDockedTopCenter]:f==="top-center",[ge.isDockedTopRight]:f==="top-right",[ge.isDockedBottomLeft]:f==="bottom-left",[ge.isDockedBottomCenter]:f==="bottom-center",[ge.isDockedBottomRight]:f==="bottom-right",[ge.isFeatureMenuOpen]:r,[ge.isActionsMenuOpen]:S};return ie("div",{class:this.classes(ge.base,L),role:"presentation","data-layer-title":O,"data-layer-id":R,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},m?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return ie("span",{"aria-hidden":"true",class:this.classes(ge.icon,ge.iconLoading,ge.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?ie("div",{key:ba("loading-container"),role:"presentation",class:ge.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Qo(this.container),i={[ge.iconRightTriangleArrow]:e,[ge.paginationPreviousIconRTL]:e,[ge.iconLeftTriangleArrow]:!e,[ge.paginationPreviousIconLTR]:!e};return ie("span",{"aria-hidden":"true",class:this.classes(ge.icon,i)})}renderPreviousButton(){const{messages:e}=this;return ie("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ge.button,ge.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Qo(this.container),i={[ge.iconLeftTriangleArrow]:e,[ge.paginationNextIconRTL]:e,[ge.iconRightTriangleArrow]:!e,[ge.paginationNextIconLTR]:!e};return ie("span",{"aria-hidden":"true",class:this.classes(ge.icon,i)})}renderNextButton(){const{messages:e}=this;return ie("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ge.button,ge.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:i,messagesCommon:r}=this,{featureCount:s,selectedFeatureIndex:h}=this.viewModel;return ie("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ge.button,ge.featureMenuButton),"aria-haspopup":"true","aria-controls":i,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(s,h))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,i=this._wouldDockTo(),r={[ge.iconUndock]:e,[ge.iconDock]:!e,[ge.iconDockToRight]:!e&&(i==="top-right"||i==="bottom-right"),[ge.iconDockToLeft]:!e&&(i==="top-left"||i==="bottom-left"),[ge.iconDockToTop]:!e&&i==="top-center",[ge.iconDockToBottom]:!e&&i==="bottom-center"};return ie("span",{"aria-hidden":"true",class:this.classes(r,ge.icon)})}renderDockButton(){var h,f,m;const{dockEnabled:e,messages:i}=this,r=(f=(h=this.viewModel)==null?void 0:h.view)==null?void 0:f.widthBreakpoint,s=e?i.undock:i.dock;return r!=="xsmall"&&((m=this.dockOptions)!=null&&m.buttonEnabled)?ie("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ge.button,ge.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:i,collapsible:r,contentCollapsed:s,messagesCommon:h}=this,f={[ge.headerContainerButton]:r},m=ie(L7,{level:this.headingLevel,class:ge.headerTitle,innerHTML:e??""}),b=r?ie("button",{key:`${e}--collapsible`,id:i,title:s?h.expand:h.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ge.headerContainer,f),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},m,ie("calcite-icon",{class:ge.collapseIcon,key:"collapse-icon",icon:s?"chevron-down":"chevron-up",scale:"m"})):ie("div",{key:e??"title",id:i,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ge.headerContainer,f)},m);return e?b:null}renderCloseIcon(){return ie("span",{"aria-hidden":"true",class:this.classes(ge.icon,ge.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:i}=this;return e.closeButton?ie("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ge.button,"aria-label":i.close,title:i.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return ie("header",{class:ge.header},this.renderTitle(),ie("div",{class:ge.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:i,contentCollapsed:r,_flowItems:s}=this,{content:h}=this.viewModel,f=s.toArray(),m={[ge.contentHasFlows]:!!f.length};return i&&!r?ie("div",{key:h??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(ge.content,m)},ie("calcite-flow",{bind:this},ie("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Q2,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),f.map(b=>this.renderFlowItem(b))),f.map(b=>this.renderFlowItemTooltips(b))):null}renderFlowItem(e){const{messages:i}=this,r=pw(),s="graphic"in e&&!e.isTable;return ie("calcite-flow-item",{bind:this,class:this.classes({[ge.calciteThemeDark]:!r,[ge.calciteThemeLight]:r}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},ie("calcite-action",{class:ge.actionExit,icon:"move-up",label:i==null?void 0:i.exitRelatedRecords,text:i==null?void 0:i.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:h=>this._storeExitRelatedRecordsAction(e,h),onclick:this._destroyFlowItemWidgets}),s?ie("calcite-action",{class:ge.actionSelectFeature,icon:"zoom-to-object",label:i==null?void 0:i.selectFeature,text:i==null?void 0:i.selectFeature,slot:"header-actions-end",bind:this,afterCreate:h=>this._storeFeatureSelectionAction(e,h),onclick:()=>this._handleOpenRelatedFeature(e)}):null,ie("div",{class:this.classes(ge.contentFlowItem,{[ge.calciteThemeDark]:r,[ge.calciteThemeLight]:!r})},e.render()))}renderFlowItemTooltips(e){const{messages:i,_exitRelatedRecordsActions:r,_featureSelectionActions:s}=this,h=pw(),f=s.get(e);return[ie("calcite-tooltip",{class:this.classes({[ge.calciteThemeDark]:!h,[ge.calciteThemeLight]:h}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:i==null?void 0:i.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:r.get(e),placement:"top"},i==null?void 0:i.exitRelatedRecords),f?ie("calcite-tooltip",{class:this.classes({[ge.calciteThemeDark]:!h,[ge.calciteThemeLight]:h}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:i==null?void 0:i.selectFeature,overlayPositioning:"fixed",referenceElement:f,placement:"top"},i==null?void 0:i.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:s,messagesCommon:h}=this,f=r?h.close:h.open,{menuActions:m}=s;return m.length?ie("div",{key:ba("actions-menu-button"),class:this.classes(ge.button,ge.actionsMenuButton),role:"button",id:i,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":f,title:f},ie("span",{"aria-hidden":"true",class:ge.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:s}=this,{menuActions:h}=s;return h.length&&r?ie("ul",{id:e,role:"menu","aria-labelledby":i,key:ba("actions"),class:ge.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},h.toArray().map(f=>this.renderAction({action:f,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(i=>this.renderAction({action:i,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:i}=this.dividedActions,r=!!e.length,s=!!i.length;return r||s?ie("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":s.toString(),class:ge.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?ie("section",{key:ba("navigation"),class:this.classes(ge.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:i}=this,{inlineActions:r,menuActions:s}=i,h=!!r.length,f=!!s.length,m={[ge.footerHasPagination]:e,[ge.footerHasActions]:h,[ge.footerHasActionsMenu]:f};return e||h?ie("div",{key:ba("feature-buttons"),class:this.classes(ge.footer,m)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:i,isLoadingFeature:r}=this.viewModel,s=Ho(e.selectedFeatures,{total:i.length});return ie("section",{key:ba("menu"),class:ge.featureMenu},ie("strong",{class:ge.featureMenuHeader},s),ie("nav",{bind:this,class:ge.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Q2},this.renderFeatureMenu(),ie("div",{class:ge.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?ie("div",{class:ge.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:ie("div",{key:ba("pointer"),class:ge.pointer,role:"presentation"},ie("div",{class:this.classes(ge.pointerDirection,ge.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:i,currentDockPosition:r,titleId:s,contentId:h,collapsible:f,hasContent:m,contentCollapsed:b,visibleElements:S}=this,{title:I}=this.viewModel,A=i==="bottom-left"||i==="bottom-center"||i==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",O=i==="top-left"||i==="top-center"||i==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",R={[ge.shadow]:e,[ge.isCollapsible]:f,[ge.isCollapsed]:b};return ie("div",{class:this.classes(ge.main,ge.widget,R),tabIndex:S.closeButton?void 0:-1,role:"dialog","aria-labelledby":I?s:"","aria-describedby":m&&!b?h:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},A?this.renderFooter():null,A?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),O?this.renderFooter():null,O?this.renderFeatureMenuContainer():null)}renderContent(){var i;const e=(i=this.viewModel)==null?void 0:i.content;return e?typeof e=="string"?ie("div",{class:mi.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return ie("span",{key:"text",class:ge.actionText},e)}renderActionIcon(e){const i=this._getActionClass(e),r=this._getActionImage(e),s={[ge.iconLoading]:e.active,[ge.rotating]:e.active,[ge.icon]:!!i,[ge.actionImage]:!e.active&&!!r};return i&&(s[i]=!e.active),ie("span",{key:"icon","aria-hidden":"true",class:this.classes(ge.icon,s),styles:this._getIconStyles(r)})}renderAction(e){const{action:i,type:r}=e,s=this._getActionTitle(i),h={[ge.action]:i.type!=="toggle",[ge.actionToggle]:i.type==="toggle",[ge.actionToggleOn]:i.type==="toggle"&&i.value,[ge.buttonDisabled]:i.disabled},f=[this.renderActionIcon(i),this.renderActionText(s)],m=r==="menu-item"?ie("li",{key:i.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(ge.button,h),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},f):ie("div",{key:i.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(ge.button,h),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},f);return i.visible?m:null}renderFeatureMenuItem(e,i){const{messages:r,messagesCommon:s}=this,{selectedFeatureIndex:h,selectedFeatureViewModel:f}=this.viewModel,m=e===f,b={[ge.featureMenuSelected]:m},S=m?ie("span",{key:ba(`feature-menu-selected-feature-${h}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:ge.iconCheckMark}):null,I=ie("span",{innerHTML:e.title||s.untitled});return ie("li",{role:"menuitem",tabIndex:-1,key:ba(`feature-menu-feature-${h}`),class:this.classes(b,ge.featureMenuItem),bind:this,"data-feature-index":i,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},ie("span",{class:ge.featureMenuTitle},I,S))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:i}=this.viewModel;return i.length>1?ie("ol",{class:ge.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},i.filter(r=>!!r.graphic).map((r,s)=>this.renderFeatureMenuItem(r,s))):null}_storeFeatureSelectionAction(e,i){this._featureSelectionActions.set(e,i),this.scheduleRender()}_storeExitRelatedRecordsAction(e,i){this._exitRelatedRecordsActions.set(e,i),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const i=e.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const s=qD(r);this.open({features:[i],location:s??void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:i,selectedFeature:r,messagesCommon:s}=this,{id:h}=e,f=r==null?void 0:r.attributes,m=e.title??"",b=h==="zoom-to-feature"?Ho(m,{messages:i}):h==="remove-selected-feature"?Ho(m,{messages:s}):h==="zoom-to-clustered-features"||h==="browse-clustered-features"?Ho(m,{messages:i}):e.title;return b&&f?Ho(b,f):b??""}_getActionClass(e){const{selectedFeature:i}=this,r=i==null?void 0:i.attributes,{className:s,image:h}=e,f=h||s?s:ge.iconDefaultAction;return f&&r?Ho(f,r):f??""}_getActionImage(e){const{selectedFeature:i}=this,r=i==null?void 0:i.attributes,{image:s}=e;return s&&r?Ho(s,r):s??""}_createFeatureUpdatedAnimation(){return iee("enter",ge.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:i}=this;if(typeof e!="number")return null;const r=Math.round(e);return Math.max(i?r-1:r,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const i="actions";this._handles.remove(i),e&&e.forEach(r=>{this._handles.add(me(()=>[r.uid,r.active,r.className,r.disabled,r.id,r.title,r.image,r.visible],()=>this.scheduleRender()),i)})}_divideActions(){const{allActions:e}=this.viewModel,i=e.filter(f=>f.visible),r=this._getInlineActionCount(),s=r===null,h=r===0;return{inlineActions:s?i.slice(0):h?new qe:i.slice(0,r),menuActions:s?new qe:h?i.slice(0):i.slice(r)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var r,s;const{selectedFeatureWidget:e,messagesCommon:i}=this;e&&(this.viewModel.title=((r=e.viewModel)==null?void 0:r.state)==="error"?i.errorMessage:((s=e.viewModel)==null?void 0:s.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){dc(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){dc(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:i}=this,r=q_(e.currentTarget);i.activeFeature=i.features[r]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const i=dc(e),{_featureMenuNode:r}=this,s=q_(e.currentTarget);if(!r)return;const h=r.querySelectorAll("li"),f=h.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),h[h.length-1].focus()):(e.stopPropagation(),h[0].focus()):(e.stopPropagation(),h[(s+1+f)%f].focus()):(e.stopPropagation(),h[(s-1+f)%f].focus())}_handleActionMenuItemKeyup(e){const i=dc(e),{_actionsMenuNode:r}=this,s=e.currentTarget.dataset.actionUid,{menuActions:h}=this.dividedActions,f=h.findIndex(S=>S.uid===s);if(!r)return;const m=r.querySelectorAll("li"),b=m.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),m[m.length-1].focus()):(e.stopPropagation(),m[0].focus()):(e.stopPropagation(),m[(f+1+b)%b].focus()):(e.stopPropagation(),m[(f-1+b)%b].focus())}_handleMainKeyup(e){const i=dc(e);i==="ArrowLeft"&&(e.stopPropagation(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const i=this.get("viewModel.view");this._createSpinner(i)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?e.show({location:i}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await vb(()=>{var i;return((i=this.viewModel)==null?void 0:i.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=me(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,r)=>this._selectedFeatureIndexUpdated(i,r));this._handles.add(e,XE)}_selectedFeatureIndexUpdated(e,i){const{featureCount:r}=this;r&&e!==i&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,i){return e.x>-1&&e.y>-1&&e.x<=i.width&&e.y<=i.height}_isOutsideView(e){const{popupHeight:i,popupWidth:r,screenLocation:s,side:h,view:f}=e;if(isNaN(r)||isNaN(i)||!f||!s)return!1;const m=f.padding;return h==="right"&&s.x+r/2>f.width-m.right||h==="left"&&s.x-r/2<m.left||h==="top"&&s.y-i<m.top||h==="bottom"&&s.y+i>f.height-m.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:s,viewModel:h}=this,{screenLocation:f,view:m}=h;if(f==null||!m||!r)return"top-center";if(!this._isScreenLocationWithinView(f,m))return this._get("currentAlignment")||"top-center";function b(te){return parseInt(te.replace(/[^-\d\.]/g,""),10)}const S=s?window.getComputedStyle(s,null):null,I=S?b(S.getPropertyValue("max-height")):0,A=S?b(S.getPropertyValue("height")):0,{height:O,width:R}=r.getBoundingClientRect(),L=R+i,z=Math.max(O,I,A)+i,j=this._isOutsideView({popupHeight:z,popupWidth:L,screenLocation:f,side:"right",view:m}),H=this._isOutsideView({popupHeight:z,popupWidth:L,screenLocation:f,side:"left",view:m}),Y=this._isOutsideView({popupHeight:z,popupWidth:L,screenLocation:f,side:"top",view:m}),X=this._isOutsideView({popupHeight:z,popupWidth:L,screenLocation:f,side:"bottom",view:m});return H?Y?"bottom-right":"top-right":j?Y?"bottom-left":"top-left":Y?X?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const i=["left","right"];return Qo(this.container)&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var m;if(e!=="auto")return e;const i=(m=this.viewModel)==null?void 0:m.view,r=Qo(this.container)?"top-left":"top-right";if(!i)return r;const s=i.padding||{left:0,right:0,top:0,bottom:0},h=i.width-s.left-s.right,{breakpoints:f}=i;return f&&h<=f.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),s=this._calculatePositionStyle(i,r);s&&Object.assign(this._containerNode.style,s)}_calculateFullWidth(e){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,i,r,s){const{currentAlignment:h,_pointerOffsetInPx:f}=this;if(!r)return;const{padding:m}=r,b=s/2,S=r.height-i,I=r.width-e;return h==="bottom-center"?{top:i+f-m.top,left:e-b-m.left}:h==="top-left"?{bottom:S+f-m.bottom,right:I+f-m.right}:h==="bottom-left"?{top:i+f-m.top,right:I+f-m.right}:h==="top-right"?{bottom:S+f-m.bottom,left:e+f-m.left}:h==="bottom-right"?{top:i+f-m.top,left:e+f-m.left}:h==="top-center"?{bottom:S+f-m.bottom,left:e-b-m.left}:void 0}_calculatePositionStyle(e,i){const{dockEnabled:r,view:s}=this;if(!s)return;if(r)return{left:"",top:"",right:"",bottom:""};if(e==null||!i)return;const h=this._calculateFullWidth(i),f=this._calculateAlignmentPosition(e.x,e.y,s,h);return f?{top:f.top!==void 0?`${f.top}px`:"auto",left:f.left!==void 0?`${f.left}px`:"auto",bottom:f.bottom!==void 0?`${f.bottom}px`:"auto",right:f.right!==void 0?`${f.right}px`:"auto"}:void 0}_viewChange(e,i){e&&i&&(this.close(),this.clear())}_viewReadyChange(e,i){if(e){const r=this.get("viewModel.view");this._wireUpView(r)}else i&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:i}=this;i&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,i,r){const[s,h]=e,[f,m]=i,{width:b=0,height:S=0}=r??{};return s<=b&&f>b||s>b&&f<=b||h<=S&&m>S||h>S&&m<=S}_updateDockEnabledForViewSize(e,i){if(!e||!i)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=r.left+r.right,h=r.top+r.bottom,f=[],m=[];f[0]=e[0]-s,f[1]=e[1]-h,m[0]=i[0]-s,m[1]=i[1]-h;const{dockOptions:b}=this,S=b.breakpoint;this._dockingThresholdCrossed(f,m,S)&&this._setDockEnabledForViewSize(b),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:i}=this;if(!i)return;const r=i.active&&!e;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var b,S;const i=e.breakpoint,r=(S=(b=this.viewModel)==null?void 0:b.view)==null?void 0:S.ui;if(!r)return!1;const{width:s,height:h}=r;if(isNaN(s)||isNaN(h)||!i)return!1;const f=i.hasOwnProperty("width")&&s<=(i.width??0),m=i.hasOwnProperty("height")&&h<=(i.height??0);return f||m}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,i){return this.featureNavigationVisible?Ho(this.messages.pageText,{index:i+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:i}=this;e&&(i&&i.ui&&i.ui.remove(e,QE),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new mpe({view:e}),e.ui.add(this._spinner,{key:QE,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const i=e.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,s=r.findIndex(f=>f.uid===i),h=r.getItemAt(s);h&&h.type==="toggle"&&(h.value=!h.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const i=q_(e.currentTarget);i==null||isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};function q_(t){return t==null?void 0:t["data-feature-index"]}v([x({readOnly:!0})],je.prototype,"actionsMenuId",null),v([x({readOnly:!0})],je.prototype,"actionsMenuButtonId",null),v([x({readOnly:!0})],je.prototype,"featureMenuId",null),v([x({readOnly:!0})],je.prototype,"titleId",null),v([x({readOnly:!0})],je.prototype,"contentId",null),v([x({readOnly:!0})],je.prototype,"hasContent",null),v([x({readOnly:!0})],je.prototype,"featureNavigationVisible",null),v([x({readOnly:!0})],je.prototype,"collapsible",null),v([x({readOnly:!0})],je.prototype,"featureMenuVisible",null),v([x({readOnly:!0})],je.prototype,"contentCollapsed",null),v([x({readOnly:!0})],je.prototype,"dividedActions",null),v([x({readOnly:!0,dependsOn:["_flowItems.length"]})],je.prototype,"_activeFlowItemWidget",null),v([x()],je.prototype,"actions",null),v([x()],je.prototype,"actionsMenuOpen",null),v([x()],je.prototype,"alignment",void 0),v([x()],je.prototype,"autoCloseEnabled",null),v([x()],je.prototype,"autoOpenEnabled",null),v([x()],je.prototype,"defaultPopupTemplateEnabled",null),v([x()],je.prototype,"content",null),v([x()],je.prototype,"collapsed",void 0),v([x()],je.prototype,"collapseEnabled",void 0),v([x({readOnly:!0})],je.prototype,"currentAlignment",null),v([x({readOnly:!0})],je.prototype,"currentDockPosition",null),v([x()],je.prototype,"dockOptions",null),v([x()],je.prototype,"dockEnabled",void 0),v([x({readOnly:!0})],je.prototype,"featureCount",null),v([x()],je.prototype,"featureMenuOpen",null),v([x()],je.prototype,"features",null),v([x()],je.prototype,"goToOverride",null),v([x()],je.prototype,"headingLevel",void 0),v([x()],je.prototype,"highlightEnabled",null),v([x()],je.prototype,"location",null),v([x()],je.prototype,"label",null),v([x()],je.prototype,"maxInlineActions",void 0),v([x(),xr("esri/widgets/Popup/t9n/Popup")],je.prototype,"messages",void 0),v([x(),xr("esri/t9n/common")],je.prototype,"messagesCommon",void 0),v([x()],je.prototype,"promises",null),v([x({readOnly:!0})],je.prototype,"selectedFeature",null),v([x()],je.prototype,"selectedFeatureIndex",null),v([x({readOnly:!0})],je.prototype,"selectedFeatureWidget",null),v([x()],je.prototype,"spinnerEnabled",void 0),v([x()],je.prototype,"title",null),v([x()],je.prototype,"updateLocationEnabled",null),v([x()],je.prototype,"view",null),v([x({type:XD}),_N(["triggerAction","trigger-action"])],je.prototype,"viewModel",void 0),v([x()],je.prototype,"visible",null),v([x()],je.prototype,"visibleElements",void 0),v([vt("visibleElements")],je.prototype,"castVisibleElements",null),v([zn()],je.prototype,"_close",null),v([zn()],je.prototype,"_toggleDockEnabled",null),v([zn()],je.prototype,"_toggleFeatureMenu",null),v([zn()],je.prototype,"_toggleActionsMenu",null),v([zn()],je.prototype,"_triggerAction",null),v([zn()],je.prototype,"_selectFeature",null),v([zn()],je.prototype,"_next",null),v([zn()],je.prototype,"_previous",null),je=v([B("esri.widgets.Popup")],je);const rA=je,U_=[0,0];function sde(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return U_[0]=i.left+((e==null?void 0:e.pageXOffset)??0),U_[1]=i.top+((e==null?void 0:e.pageYOffset)??0),U_}function nA(t){t&&(tF(t),t.parentNode&&t.parentNode.removeChild(t))}function ode(t){const e=document.createElement("div");return t.appendChild(e),e}const _f=16,kg=750,ade=512,lde=2,ude=t=>{let e=class extends t{constructor(...i){var r;super(...i),this._freqInfo={freq:_f,time:kg},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&((r=i[0])==null?void 0:r.popup)!==void 0||(this.popup=new rA({view:this})),this.addHandles([me(()=>this.cursor,s=>{const{surface:h}=this;h&&h.setAttribute("data-cursor",s)}),me(()=>this.navigating,s=>{const{surface:h}=this;h&&h.setAttribute("data-navigating",s.toString())})])}initialize(){this.addHandles(me(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.addHandles([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Ut(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=S7(i);if(s||typeof i!="string"||fe.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===s)return;const h="dom-size";if(this.removeHandles(h),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(nA(this.root),this._set("root",null)),this.userContent&&(iT(this.userContent,r),nA(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const f=document.createElement("div");f.className="esri-view-user-storage",iT(s,f),s.appendChild(f),this._set("userContent",f);const m=document.createElement("div");m.className="esri-view-root",s.insertBefore(m,s.firstChild),this._set("root",m);const b=document.createElement("div");b.className="esri-view-surface",b.setAttribute("role","application"),b.tabIndex=0,m.appendChild(b),this._set("surface",b);const S=new pT;m.appendChild(S.surface),this._set("overlay",S),this.addHandles(me(()=>S.needsRender,I=>{I&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Wc({render:()=>{var A;return(A=this.overlay)==null?void 0:A.render()}}):this._overlayRenderTaskHandle=$i(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this.addHandles(me(()=>this.size,I=>{const[A,O]=I,R="esri-view-surface--inset-outline";A>=document.body.clientWidth||O>=document.body.clientHeight?b.classList.add(R):b.classList.remove(R)},_t),h),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const h=this.position;return i-=h?h[0]:0,r-=h?h[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const h=this.position;return i+=h?h[0]:0,r+=h?h[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.removeHandles("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.removeHandles("ui"),i&&(i.view=this,this.addHandles([me(()=>this.root,r=>{i.container=r?ode(r):null},_t),me(()=>this.popup,(r,s)=>{const h="popup",f="manual";s&&i.remove(s,h),r&&(r.view=i.view,i.add(r,{key:h,position:f}))},_t)],"ui"))}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=_f,i.time=kg,this.addHandles([(()=>{const r=()=>{i.freq=_f,i.time=kg};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Wc({prepare:r=>{const s=this._measure(),h=this._freqInfo;if(h.time+=r.deltaTime,s&&(h.freq=_f,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const f=this._position();h.freq=f||s?_f:Math.min(kg,h.freq*lde),!s&&h.freq>=ade&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const h=this.width,f=this.height;return r===h&&s===f?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:h,oldHeight:f,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&sde(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return v([x()],e.prototype,"container",null),v([x({readOnly:!0})],e.prototype,"focused",null),v([x({readOnly:!0})],e.prototype,"height",void 0),v([x({type:rA})],e.prototype,"popup",null),v([x({type:pT})],e.prototype,"overlay",void 0),v([x({readOnly:!0})],e.prototype,"position",void 0),v([x({readOnly:!0})],e.prototype,"resizing",void 0),v([x({readOnly:!0})],e.prototype,"root",void 0),v([x({value:null,readOnly:!0})],e.prototype,"size",null),v([x({readOnly:!0})],e.prototype,"surface",void 0),v([x({readOnly:!0})],e.prototype,"suspended",void 0),v([x()],e.prototype,"ui",void 0),v([x({readOnly:!0})],e.prototype,"userContent",void 0),v([x({readOnly:!0})],e.prototype,"width",void 0),v([x()],e.prototype,"widthBreakpoint",void 0),e=v([B("esri.views.DOMContainer")],e),e},hde=t=>{let e=class extends t{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:h,layerViewsAndGraphics:f,clientOnlyGraphics:m}=await this._prepareFetchPopupFeatures(i,r),b=Promise.resolve(m),S=this._queryLayerPopupFeatures(h,f,r),I=S.map(A=>A.promise);return{location:s,clientOnlyGraphics:m,allGraphicsPromise:Dq([b,...I]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:S}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:h,graphics:f})=>{const m={clientGraphics:f,event:s!=null?s.event:void 0,signal:s!=null?s.signal:void 0,defaultPopupTemplateEnabled:s!=null&&!!s.defaultPopupTemplateEnabled},b=h.fetchPopupFeatures(i,m);return{layerView:h,promise:b}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:h,location:f}=await this._popupHitTestGraphics(i,r),m=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:b,clientOnlyGraphics:S}=this._graphicsPerFetchPopupLayerView(s,m);return{clientOnlyGraphics:S,layerViewsAndGraphics:b,queryArea:h,location:f}}async _popupHitTestGraphics(i,r){const s=await this.popupHitTest(i),h=s.results,f=s.mapPoint,m=h.filter(S=>S.type==="graphic"&&this._isValidPopupGraphic(S.graphic,r)),b=m.length?m[0].mapPoint:null;return{clientGraphics:m.map(S=>S.graphic),queryArea:f,location:f||b}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],h=new Map,f=r.map(m=>{const b=[];return"layer"in m?h.set(m.layer,b):h.set(m.graphics,b),{layerView:m,graphics:b}});for(const m of i){const b=h.get(m.layer)||h.get(m.sourceLayer)||null;b?b.push(m):s.push(m)}return{layerViewsAndGraphics:f,clientOnlyGraphics:s}}};return e=v([B("esri.views.PopupView")],e),e};let ny=class extends gp(qe){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(qe.ofType(this.itemType.Type))(e):new qe(e)}};function sA(t,e){return{type:t,cast:Rk,set(i){const r=Jc(i,this._get(e),t);r.owner=this,this._set(e,r)}}}v([x()],ny.prototype,"owner",null),ny=v([B("esri.core.support.OwningCollection")],ny);let Mw=class extends ny{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(fe.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Mw=v([B("esri.support.AnalysesCollection")],Mw);let sy=class extends ny{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};v([dS({Type:Mr,ensureType:ei(Mr)})],sy.prototype,"itemType",void 0),sy=v([B("esri.support.GraphicsCollection")],sy);let uu=class extends Oe{constructor(e){super(e),this.view=null,this.baseLayerViews=new qe,this.referenceLayerViews=new qe,this._loadingHandle=me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},_t)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};v([x({constructOnly:!0})],uu.prototype,"view",void 0),v([x({readOnly:!0})],uu.prototype,"baseLayerViews",void 0),v([x({readOnly:!0})],uu.prototype,"referenceLayerViews",void 0),v([x({readOnly:!0})],uu.prototype,"suspended",null),v([x({type:Boolean,readOnly:!0})],uu.prototype,"updating",null),uu=v([B("esri.views.BasemapView")],uu);function cde(t){return"tryRecycleWith"in t}let pde=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=sl(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Un(this._controller.signal,()=>{const s=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!cde(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<e.length;s++){const h=e[s];if(h.type!==i)continue;const f=this.layerView.tryRecycleWith(h,{signal:r});if(f){e.splice(s,1),this.layer=h;const m=this.layerView,b=m.view;return this.promise=Promise.race([f.then(()=>(Oi(this._controller.signal),h.emit("layerview-destroy",{view:b,layerView:m}),b.emit("layerview-destroy",{view:b,layerView:m}),h.emit("layerview-create",{view:b,layerView:m}),b.emit("layerview-create",{view:b,layerView:m}),m)),new Promise((S,I)=>Un(this._controller.signal,()=>I(Xt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,h,f;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let m,b;if(await i.load({signal:e}),"prefetchResources"in i&&await((s=i.prefetchResources)==null?void 0:s.call(i,{signal:e})),fde(i))m=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ne("layer:view-not-supported","No layerview implementation was found");const A=await this.layerViewImporter.importLayerView(i);Oi(e),m="default"in A?new A.default({layer:i,view:r}):new A({layer:i,view:r})}const S=()=>{b=$i(b),m.destroyed||m.destroy(),m.layer=null,m.parent=null,m.view=null,this.done=!0};b=Un(e,S),Oi(e);try{await m.when()}catch(A){throw S(),A}if(!((f=(h=this._map)==null?void 0:h.allLayers)==null?void 0:f.includes(i)))return S(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=m,i.emit("layerview-create",{view:r,layerView:m}),r.emit("layerview-create",{layer:i,layerView:m}),this.done=!0,this._deferred.resolve(m)}catch(m){i.emit("layerview-create-error",{view:r,error:m}),r.emit("layerview-create-error",{layer:i,error:m}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:i,error:m}))}}},cs=class extends Oe{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new qd,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=sl(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(T0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var b,S,I;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],h=this.view.ready,f=A=>{if(A!=null){for(const O of A)if(O){r.add(O);const R=this._layerLayerViewInfoMap.get(O);R&&h?R.start():R||this._recyclingInfoMap.has(O)||s.push(O),"layers"in O&&O.layers&&f(O.layers)}}};for(const A of this._rootCollectionNames)f(this.get(A));for(const[A,O]of this._layerLayerViewInfoMap)if(!r.has(A)){this._layerLayerViewInfoMap.delete(O.layer);const R=O.tryRecycle(s);R?(this._recyclingInfoMap.set(O.layer,O),R.then(()=>{this._recyclingInfoMap.delete(O.layer),this._layerLayerViewInfoMap.set(O.layer,O),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(O.layer),O.destroy(),this._reschedule()})):O.destroy()}for(const[A,O]of this._recyclingInfoMap)r.has(A)||(this._recyclingInfoMap.delete(O.layer),O.destroy());for(const A of s)this._createLayerView(A);this._refreshCollections();const m=[(b=i==null?void 0:i.ground)==null?void 0:b.layers,(S=i==null?void 0:i.basemap)==null?void 0:S.baseLayers,(I=i==null?void 0:i.basemap)==null?void 0:I.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);r.forEach(A=>"layers"in A&&m.push(A.layers)),this.addHandles(m.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([un(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),me(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Gh)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),R3(this._recyclingInfoMap),R3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Xt()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Zw(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(R3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let s=0;for(const h of e){const f=this._layerLayerViewInfoMap.get(h);if(!f||!f.layerView)continue;const m=f.layerView;m.layer=h,m.parent=r,i.getItemAt(s)!==m&&i.splice(s,0,m),h.layers&&this._populateLayerViewsOwners(h.layers,m.layerViews,m),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new pde(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Ts(r)||r.name==="cancelled:layerview-create")||fe.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([x()],cs.prototype,"_workPromise",void 0),v([x({readOnly:!0})],cs.prototype,"_watchUpdatingTracking",void 0),v([x({readOnly:!0})],cs.prototype,"_layersToLayerViews",null),v([x({readOnly:!0})],cs.prototype,"_rootCollectionNames",null),v([x()],cs.prototype,"layerViewImporter",void 0),v([x()],cs.prototype,"supportsGround",void 0),v([x({readOnly:!0})],cs.prototype,"updating",null),v([x({readOnly:!0})],cs.prototype,"updatingRemaining",null),v([x({constructOnly:!0})],cs.prototype,"view",void 0),cs=v([B("esri.views.LayerViewManager")],cs);const dde=cs;function fde(t){return"createLayerView"in t&&t.createLayerView!=null}let Ln=class extends Oe{constructor(e){super(e),this.factor=1.5,this.offset=Ur(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([x({type:Number})],Ln.prototype,"factor",void 0),v([x({nonNullable:!0})],Ln.prototype,"offset",void 0),v([x()],Ln.prototype,"position",void 0),v([x({type:Number,range:{min:0}})],Ln.prototype,"size",void 0),v([x()],Ln.prototype,"maskUrl",void 0),v([x()],Ln.prototype,"maskEnabled",void 0),v([x()],Ln.prototype,"overlayUrl",void 0),v([x()],Ln.prototype,"overlayEnabled",void 0),v([x({readOnly:!0})],Ln.prototype,"version",null),v([x({type:Boolean})],Ln.prototype,"visible",void 0),Ln=v([B("esri.views.Magnifier")],Ln);const QD=Ln;var tr;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(tr||(tr={}));let wp=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Xd(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*oA);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,oA));e++)this._items.push(this._allocator())}};const oA=1024;function J0(){return[1,0,0,0,1,0,0,0,1]}function yde(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function mde(t,e,i,r,s,h,f,m,b){return[t,e,i,r,s,h,f,m,b]}function ez(t,e){return new Float64Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:yde,create:J0,createView:ez,fromValues:mde},Symbol.toStringTag,{value:"Module"}));function Bi(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function gde(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function vde(t,e,i,r,s,h,f,m,b,S,I,A,O,R,L,z){return[t,e,i,r,s,h,f,m,b,S,I,A,O,R,L,z]}function tz(t,e){return new Float64Array(t,e,16)}const OM=Bi();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:OM,clone:gde,create:Bi,createView:tz,fromValues:vde},Symbol.toStringTag,{value:"Module"}));function Tm(){return[0,0,0,1]}function wde(t){return[t[0],t[1],t[2],t[3]]}function bde(t,e,i,r){return[t,e,i,r]}function iz(t,e){return new Float64Array(t,e,4)}const _de=Tm();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:_de,clone:wde,create:Tm,createView:iz,fromValues:bde},Symbol.toStringTag,{value:"Module"}));function Pi(){return[0,0]}function xde(t){return[t[0],t[1]]}function K0(t,e){return[t,e]}function Sde(t){const e=Pi(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function rz(t,e){return new Float64Array(t,e,2)}function nz(){return Pi()}function sz(){return K0(1,1)}function oz(){return K0(1,0)}function az(){return K0(0,1)}const Mde=nz(),$de=sz(),Tde=oz(),Ide=az();Object.freeze(Object.defineProperty({__proto__:null,ONES:$de,UNIT_X:Tde,UNIT_Y:Ide,ZEROS:Mde,clone:xde,create:Pi,createView:rz,fromArray:Sde,fromValues:K0,ones:sz,unitX:oz,unitY:az,zeros:nz},Symbol.toStringTag,{value:"Module"}));let Z0=class sc{constructor(e,i,r){this._itemByteSize=e,this._itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this._itemByteSize)}get(){this._itemsPtr===0&&Xd(()=>this._reset());const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const i=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(i,r*this._itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=Ap){return new sc(16,rz,e)}static createVec3f64(e=Ap){return new sc(24,OO,e)}static createVec4f64(e=Ap){return new sc(32,NL,e)}static createMat3f64(e=Ap){return new sc(72,ez,e)}static createMat4f64(e=Ap){return new sc(128,tz,e)}static createQuatf64(e=Ap){return new sc(32,iz,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}};const Ap=4*Fy.KILOBYTES;Z0.createVec2f64();const Et=Z0.createVec3f64(),lz=Z0.createVec4f64();Z0.createMat3f64();const uz=Z0.createMat4f64();Z0.createQuatf64();function bn(t){return t?aA(xs(t.origin),xs(t.direction)):aA(we(),we())}function aA(t,e){return{origin:t,direction:e}}function hz(t,e){const i=kde.get();return i.origin=t,i.direction=e,i}function $w(t,e=bn()){return cz(t.origin,t.direction,e)}function Ede(t,e,i=bn()){return We(i.origin,t),mt(i.direction,e,t),i}function cz(t,e,i=bn()){return We(i.origin,t),We(i.direction,e),i}function Ade(t,e){const i=ki(Et.get(),vi(Et.get(),t.direction),mt(Et.get(),e,t.origin));return at(i,i)}function Cde(t,e,i){const r=at(t.direction,mt(i,e,t.origin));return Gt(i,t.origin,Qe(i,t.direction,r)),i}const kde=new wp(()=>bn());var Kn;(function(t){t[t.NONE=0]="NONE",t[t.TILT=1]="TILT",t[t.ALTITUDE=2]="ALTITUDE",t[t.DISTANCE=4]="DISTANCE",t[t.COLLISION=8]="COLLISION",t[t.ALL=15]="ALL",t[t.ALL_EXCEPT_COLLISION=7]="ALL_EXCEPT_COLLISION"})(Kn||(Kn={}));var Sr;(function(t){t[t.NONE=0]="NONE",t[t.ZOOM=1]="ZOOM",t[t.TUMBLE=2]="TUMBLE",t[t.LOOK_AROUND=3]="LOOK_AROUND",t[t.PAN=4]="PAN",t[t.ASCEND=5]="ASCEND"})(Sr||(Sr={}));var cl;(function(t){t[t.TUMBLE=0]="TUMBLE",t[t.LOOK_AROUND=1]="LOOK_AROUND"})(cl||(cl={}));function Gy(t,e){return(t&e)!=0}function Tw(t,e,i,r,s,h){t!==0&&(i?(h.min=Math.min(h.min,e),h.max=Math.max(h.max,e)):r!=null?(h.min-=Math.max(0,(e-h.min)*(1-r)),h.max+=Math.max(0,(e-h.max)*(1-r))):s&&(h.min-=Math.max(0,e-h.min-s),h.max+=Math.max(0,e-h.max-s)))}const Qu={selection:Kn.NONE,interactionType:Sr.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE};function pz(t,e,i,r){return e=e||t.viewForward,We(r,e),Qe(r,r,Math.sign(at(e,i))),r}var rl;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(rl||(rl={}));function oy(t,e){return at(t,e)/gt(t)}function Ode(t,e){const i=at(t,e)/(gt(t)*gt(e));return-aa(i)}const Pde=Y0();function Y0(){return ca()}function dz(t,e=Y0()){return xc(e,t)}function fz(t,e){return hr(t[0],t[1],t[2],e)}function Rde(t){return t}function Fde(t){t[0]=t[1]=t[2]=t[3]=0}function yz(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function qb(t){return t[3]}function Nde(t){return t}function Lde(t,e,i,r){return hr(t,e,i,r)}function jde(t,e,i){return t!==i&&We(i,t),i[3]=t[3]+e,i}function Dde(t,e,i){return fe.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===i?i:dz(t,i)}function Im(t,e,i){if(e==null)return!1;const{origin:r,direction:s}=e,h=zde;h[0]=r[0]-t[0],h[1]=r[1]-t[1],h[2]=r[2]-t[2];const f=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(f===0)return!1;const m=2*(s[0]*h[0]+s[1]*h[1]+s[2]*h[2]),b=m*m-4*f*(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]-t[3]*t[3]);if(b<0)return!1;const S=Math.sqrt(b);let I=(-m-S)/(2*f);const A=(-m+S)/(2*f);return(I<0||A<I&&A>0)&&(I=A),!(I<0)&&(i&&(i[0]=r[0]+s[0]*I,i[1]=r[1]+s[1]*I,i[2]=r[2]+s[2]*I),!0)}const zde=we();function Vde(t,e){return Im(t,e,null)}function Gde(t,e,i){if(Im(t,e,i))return i;const r=PM(t,e,Et.get());return Gt(i,e.origin,Qe(Et.get(),e.direction,mo(e.origin,r)/gt(e.direction))),i}function PM(t,e,i){const r=Et.get(),s=uz.get();ki(r,e.origin,e.direction);const h=qb(t);ki(i,r,e.origin),Qe(i,i,1/gt(i)*h);const f=gz(t,e.origin),m=Ode(e.origin,i);return pm(s,m+f,r),br(i,i,s),i}function qde(t,e,i){return Im(t,e,i)?i:(Cde(e,t,i),mz(t,i,i))}function mz(t,e,i){const r=mt(Et.get(),e,t),s=Qe(Et.get(),r,t[3]/gt(r));return Gt(i,s,t)}function Ude(t,e){const i=mt(Et.get(),e,t),r=tp(i),s=t[3]*t[3];return Math.sqrt(Math.abs(r-s))}function gz(t,e){const i=mt(Et.get(),e,t),r=gt(i),s=qb(t),h=s+Math.abs(s-r);return aa(s/h)}const B_=we();function vz(t,e,i,r){const s=mt(B_,e,t);switch(i){case rl.X:{const h=y8(s,B_)[2];return Yt(r,-Math.sin(h),Math.cos(h),0)}case rl.Y:{const h=y8(s,B_),f=h[1],m=h[2],b=Math.sin(f);return Yt(r,-b*Math.cos(m),-b*Math.sin(m),Math.cos(f))}case rl.Z:return vi(r,s);default:return}}function wz(t,e){const i=mt($6,e,t);return gt(i)-t[3]}function Bde(t,e,i,r){const s=wz(t,e),h=vz(t,e,rl.Z,$6),f=Qe($6,h,i-s);return Gt(r,e,f)}function Hde(t,e){const i=A0(t,e),r=qb(t);return i<=r*r}const $6=we(),bz=Y0();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:Pde,altitudeAt:wz,angleToSilhouette:gz,axisAt:vz,clear:Fde,closestPoint:qde,closestPointOnSilhouette:PM,containsPoint:Hde,copy:dz,create:Y0,distanceToSilhouette:Ude,elevate:jde,fromCenterAndRadius:fz,fromRadius:yz,fromValues:Lde,getCenter:Nde,getRadius:qb,intersectRay:Im,intersectRayClosestSilhouette:Gde,intersectsRay:Vde,projectPoint:mz,setAltitudeAt:Bde,setExtent:Dde,tmpSphere:bz,wrap:Rde},Symbol.toStringTag,{value:"Module"}));function Wde(t,e,i,r=we()){const s=gt(t),h=gt(e),f=at(t,e)/(s*h);if(f<.9999999999999999){const m=Math.acos(f),b=((1-i)*s+i*h)/Math.sin(m),S=b/s*Math.sin((1-i)*m),I=b/h*Math.sin(i*m);return Qe(T6,t,S),Qe(I6,e,I),Gt(r,T6,I6)}return DS(r,t,e,i)}function H_(t,e,i){t=vi(T6,t),e=vi(I6,e);const r=aa(at(t,e));if(i){const s=ki(Jde,t,e);if(at(s,i)<0)return-r}return r}const Jde=we(),T6=we(),I6=we();function lr(t=S1){return[t[0],t[1],t[2],t[3]]}function Kde(t=S1[0],e=S1[1],i=S1[2],r=S1[3]){return FM(t,e,i,r,lz.get())}function RM(t,e){return FM(e[0],e[1],e[2],e[3],t)}function FM(t,e,i,r,s=lr()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function Zde(t,e,i){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=e[0]*s,i[1]=e[1]*s,i[2]=e[2]*s,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Cp(t,e,i,r=lr()){const s=i[0]-e[0],h=i[1]-e[1],f=i[2]-e[2],m=t[0]-e[0],b=t[1]-e[1],S=t[2]-e[2],I=h*S-f*b,A=f*m-s*S,O=s*b-h*m,R=I*I+A*A+O*O,L=Math.abs(R-1)>1e-5&&R>1e-12?1/Math.sqrt(R):1;return r[0]=I*L,r[1]=A*L,r[2]=O*L,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}const lA=we();function Yde(t,e,i){return e!==t&&RM(t,e),t[3]=-at(t,i),t}function E6(t,e,i,r){return ki(lA,e,t),Zde(i,lA,r)}function Xde(t,e,i){return e!=null&&LM(t,e.origin,e.direction,n0e,i)}function Qde(t,e,i){return LM(t,e.origin,e.vector,ra.NONE,i)}function e0e(t,e,i){return LM(t,e.origin,e.vector,ra.CLAMP,i)}function _z(t,e){return NM(t,e)>=0}function t0e(t,e){const i=at(t,e.ray.direction),r=-NM(t,e.ray.origin);if(r<0&&i>=0)return!1;if(i>-1e-6&&i<1e-6)return r>0;if((r<0||i<0)&&!(r<0&&i<0))return!0;const s=r/i;return i>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function i0e(t,e,i){const r=Qe(Et.get(),t,-t[3]),s=r0e(t,mt(Et.get(),e,r),Et.get());return Gt(i,s,r),i}function r0e(t,e,i){const r=Qe(Et.get(),t,at(t,e));return mt(i,e,r),i}function NM(t,e){return at(t,e)+t[3]}function LM(t,e,i,r,s){const h=at(t,i);if(h===0)return!1;let f=-(at(t,e)+t[3])/h;return r&ra.CLAMP&&(f=fi(f,0,1)),!(!(r&ra.INFINITE_MIN)&&f<0||!(r&ra.INFINITE_MAX)&&f>1)&&(Gt(s,e,Qe(s,i,f)),!0)}const S1=[0,0,1,0];var ra;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(ra||(ra={}));ra.INFINITE_MIN|ra.INFINITE_MAX;const n0e=ra.INFINITE_MAX;function s0e(t,e,i,r){const s=at(i,mt(t,r,e));return Gt(t,e,Qe(t,i,s))}function o0e(t,e,i=Qu){const r=jM(t,e,i);if(r===0)return!1;const s=t.renderCoordsHelper,h=s.getAltitude(e.eye)+r,f=pz(e,i.interactionDirection,u0e(t,e,Math.sign(r),d0e),p0e),m=We(f0e,e.viewForward),b=s.intersectInfiniteManifold(hz(e.eye,f),h,W_);return e.eye=b??s.setAltitude(W_,h,e.eye),e.center=s0e(W_,e.eye,m,e.center),!0}function jM(t,e,i=Qu){if(!a0e(t,i)||!t.state.constraints.altitude)return 0;const r=h0e(t.state.constraints.altitude,c0e);l0e(t,i,r);const s=t.renderCoordsHelper.getAltitude(e.eye),h=fi(s,r.min,r.max)-s;return Math.abs(h)<=1e-6?0:h}function a0e(t,e){const i=t.state.constraints.altitude;return!(!t.state.isGlobal||!i)&&(e.interactionType!==Sr.TUMBLE||!Gy(e.selection,Kn.TILT))}function l0e(t,e,i){const r=e.interactionType;if(r===Sr.NONE)return;const{min:s,max:h}=i,{interactionStartCamera:f,interactionFactor:m}=e;if(!f)return;const b=r===Sr.TUMBLE||r===Sr.ZOOM,S=jM(t,f),I=S===0?0:t.renderCoordsHelper.getAltitude(f.eye);i.min=s,i.max=h,Tw(S,I,b,m,.05*I,i)}function u0e(t,e,i,r){return t.renderCoordsHelper.worldUpAtPosition(e.eye,r),Qe(r,r,i),r}function h0e(t,e){return e.min=t.min,e.max=t.max,e}const c0e={min:0,max:0},p0e=we(),d0e=we(),f0e=we(),W_=we();function DM(t,e,i=Qu){if(!t.state.isLocal)return 0;const r=t.state.constraints.distance;if(!t.pointsOfInterest.surfaceOrigin.renderLocation||r===1/0)return 0;Og.min=0,Og.max=r,m0e(t,i,Og);const s=zM(t,e),h=Og.max-s;return h>=-1e-6?0:h}function y0e(t,e,i=Qu){const r=DM(t,e,i);if(r===0)return!1;const s=t.pointsOfInterest.surfaceOrigin;if(!s.renderLocation)return!1;const h=zM(t,e)+r,f=We(v0e,e.eye),m=pz(e,i.interactionDirection,g0e(e,s.renderLocation,_0e),b0e);if(!Im(fz(s.renderLocation,h),hz(e.eye,m),Pg))return!1;e.eye=Pg;const b=mt(w0e,e.eye,f);e.center=Gt(Pg,e.center,b);const S=t.renderCoordsHelper.getAltitude(e.center),I=t.renderCoordsHelper.intersectInfiniteManifold(e.ray,S,Pg);return I!=null&&(e.center=I),!0}function m0e(t,e,i){const r=e.interactionType;if(r===Sr.NONE)return;const{min:s,max:h}=i,{interactionStartCamera:f,interactionFactor:m}=e;if(!f)return;const b=r===Sr.ZOOM||r===Sr.PAN,S=DM(t,f),I=S===0?0:zM(t,f);i.min=s,i.max=h,Tw(S,I,b,m,.05*I,i)}function zM(t,e){const i=t.pointsOfInterest.surfaceOrigin;return i.renderLocation?mo(e.eye,i.renderLocation):0}function g0e(t,e,i){return im(i,t.eye,e)}const Og={min:0,max:0},v0e=we(),w0e=we(),b0e=we(),_0e=we(),Pg=we();var cp,qy;(function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL"})(cp||(cp={}));let x0e=class{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=qy.ALL}};(function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"})(qy||(qy={}));let S0e=class{constructor(e,i,r){this.object=e,this.geometryId=i,this.triangleNr=r}},M0e=class extends S0e{constructor(e,i,r,s){super(e,i,r),this.center=s!=null?xs(s):null}};function VM(t){return t?{origin:xs(t.origin),vector:xs(t.vector)}:{origin:we(),vector:we()}}function gxe(t,e,i=VM()){return We(i.origin,t),mt(i.vector,e,t),i}function $0e(t,e){const i=mt(Et.get(),e,t.origin),r=at(t.vector,i),s=at(t.vector,t.vector),h=fi(r/s,0,1),f=mt(Et.get(),Qe(Et.get(),t.vector,h),i);return at(f,f)}function vxe(t,e,i){return A6(t,e,0,1,i)}function A6(t,e,i,r,s){const{vector:h,origin:f}=t,m=mt(Et.get(),e,f),b=at(h,m)/tp(h);return Qe(s,h,fi(b,i,r)),Gt(s,s,t.origin)}new wp(()=>VM());const J_=fe.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");let T0e=class{constructor(){this.plane=lr(),this.origin=we(),this.basis1=we(),this.basis2=we()}};const I0e=T0e;function Em(t=kz){return{plane:lr(t.plane),origin:xs(t.origin),basis1:xs(t.basis1),basis2:xs(t.basis2)}}function E0e(t,e,i){const r=q0e.get();return r.origin=t,r.basis1=e,r.basis2=i,r.plane=Kde(0,0,0,0),Bb(r),r}function Ub(t,e=Em()){return xz(t.origin,t.basis1,t.basis2,e)}function A0e(t,e){We(e.origin,t.origin),We(e.basis1,t.basis1),We(e.basis2,t.basis2),RM(e.plane,t.plane)}function xz(t,e,i,r=Em()){return We(r.origin,t),We(r.basis1,e),We(r.basis2,i),Bb(r),V0e(r,"fromValues()"),r}function Bb(t){E6(t.basis2,t.basis1,t.origin,t.plane)}function Sz(t,e,i){t!==i&&Ub(t,i);const r=Qe(Et.get(),pl(t),e);return Gt(i.origin,i.origin,r),i.plane[3]-=e,i}function C0e(t,e,i){return Mz(e,i),Sz(i,UM(t,t.origin),i),i}function Mz(t,e=Em()){const i=(t[2]-t[0])/2,r=(t[3]-t[1])/2;return Yt(e.origin,t[0]+i,t[1]+r,0),Yt(e.basis1,i,0,0),Yt(e.basis2,0,r,0),FM(0,0,1,0,e.plane),e}function GM(t,e,i){return!!Xde(t.plane,e,i)&&Az(t,i)}function k0e(t,e,i){if(GM(t,e,i))return i;const r=$z(t,e,Et.get());return Gt(i,e.origin,Qe(Et.get(),e.direction,mo(e.origin,r)/gt(e.direction))),i}function $z(t,e,i){const r=Iw.get();Cz(t,e,r,Iw.get());let s=Number.POSITIVE_INFINITY;for(const h of HM){const f=BM(t,h,Hb.get()),m=Et.get();if(Qde(r,f,m)){const b=im(Et.get(),e.origin,m),S=Math.abs(aa(at(e.direction,b)));S<s&&(s=S,We(i,m))}}return s===Number.POSITIVE_INFINITY?Tz(t,e,i):i}function Tz(t,e,i){if(GM(t,e,i))return i;const r=Iw.get(),s=Iw.get();Cz(t,e,r,s);let h=Number.POSITIVE_INFINITY;for(const f of HM){const m=BM(t,f,Hb.get()),b=Et.get();if(e0e(r,m,b)){const S=Ade(e,b);if(!_z(s,b))continue;S<h&&(h=S,We(i,b))}}return qM(t,e.origin)<h&&Iz(t,e.origin,i),i}function Iz(t,e,i){const r=i0e(t.plane,e,Et.get()),s=A6(uA(t,t.basis1),r,-1,1,Et.get()),h=A6(uA(t,t.basis2),r,-1,1,Et.get());return mt(i,Gt(Et.get(),s,h),t.origin),i}function Ez(t,e,i){const{origin:r,basis1:s,basis2:h}=t,f=mt(Et.get(),e,r),m=oy(s,f),b=oy(h,f),S=oy(pl(t),f);return Yt(i,m,b,S)}function qM(t,e){const i=Ez(t,e,Et.get()),{basis1:r,basis2:s}=t,h=gt(r),f=gt(s),m=Math.max(Math.abs(i[0])-h,0),b=Math.max(Math.abs(i[1])-f,0),S=i[2];return m*m+b*b+S*S}function O0e(t,e){return Math.sqrt(qM(t,e))}function P0e(t,e){let i=Number.NEGATIVE_INFINITY;for(const r of HM){const s=BM(t,r,Hb.get()),h=$0e(s,e);h>i&&(i=h)}return Math.sqrt(i)}function R0e(t,e){return _z(t.plane,e)&&Az(t,e)}function F0e(t,e,i,r){return z0e(t,i,r)}function UM(t,e){const i=-t.plane[3];return oy(pl(t),e)-i}function N0e(t,e,i,r){const s=UM(t,e),h=Qe(G0e,pl(t),i-s);return Gt(r,e,h),r}function L0e(t,e){return Ou(t.basis1,e.basis1)&&Ou(t.basis2,e.basis2)&&Ou(t.origin,e.origin)}function j0e(t,e,i){return t!==i&&Ub(t,i),Vu(kp,e),Yn(kp,kp),br(i.basis1,t.basis1,kp),br(i.basis2,t.basis2,kp),br(i.plane,t.plane,kp),br(i.origin,t.origin,e),Yde(i.plane,i.plane,i.origin),i}function D0e(t,e,i,r){return t!==r&&Ub(t,r),pm(K_,e,i),br(r.basis1,t.basis1,K_),br(r.basis2,t.basis2,K_),Bb(r),r}function pl(t){return t.plane}function z0e(t,e,i){switch(e){case rl.X:We(i,t.basis1),vi(i,i);break;case rl.Y:We(i,t.basis2),vi(i,i);break;case rl.Z:We(i,pl(t))}return i}function Az(t,e){const i=mt(Et.get(),e,t.origin),r=tp(t.basis1),s=tp(t.basis2),h=at(t.basis1,i),f=at(t.basis2,i);return-h-r<0&&h-r<0&&-f-s<0&&f-s<0}function uA(t,e){const i=Hb.get();return We(i.origin,t.origin),We(i.vector,e),i}function BM(t,e,i){const{basis1:r,basis2:s,origin:h}=t,f=Qe(Et.get(),r,e.origin[0]),m=Qe(Et.get(),s,e.origin[1]);Gt(i.origin,f,m),Gt(i.origin,i.origin,h);const b=Qe(Et.get(),r,e.direction[0]),S=Qe(Et.get(),s,e.direction[1]);return Qe(i.vector,Gt(b,b,S),2),i}function V0e(t,e){Math.abs(at(t.basis1,t.basis2)/(gt(t.basis1)*gt(t.basis2)))>1e-6&&J_.warn(e,"Provided basis vectors are not perpendicular"),Math.abs(at(t.basis1,pl(t)))>1e-6&&J_.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-at(pl(t),t.origin)-t.plane[3])>1e-6&&J_.warn(e,"Plane offset is not consistent with plane origin")}function Cz(t,e,i,r){const s=pl(t);E6(s,e.direction,e.origin,i),E6(i,s,e.origin,r)}const kz={plane:lr(),origin:fr(0,0,0),basis1:fr(1,0,0),basis2:fr(0,1,0)},Iw=new wp(lr),Hb=new wp(VM),G0e=we(),q0e=new wp(()=>Em()),HM=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],kp=Bi(),K_=Bi();Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:I0e,UP:kz,altitudeAt:UM,axisAt:F0e,closestPoint:Tz,closestPointOnSilhouette:$z,copy:Ub,copyWithoutVerify:A0e,create:Em,distance:O0e,distance2:qM,distanceToSilhouette:P0e,elevate:Sz,equals:L0e,extrusionContainsPoint:R0e,fromAABoundingRect:Mz,fromValues:xz,intersectRay:GM,intersectRayClosestSilhouette:k0e,normal:pl,projectPoint:Iz,projectPointLocal:Ez,rotate:D0e,setAltitudeAt:N0e,setExtent:C0e,transform:j0e,updateUnboundedPlane:Bb,wrap:E0e},Symbol.toStringTag,{value:"Module"}));function U0e(t){return t!=null&&t.dist!=null}function Oz(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function B0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pz(t,e,i,r,s,h,f,m,b,S){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=h,t[5]=f,t[6]=m,t[7]=b,t[8]=S,t}function Rz(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function WM(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function H0e(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5],b=e[6],S=e[7],I=e[8],A=I*f-m*S,O=-I*h+m*b,R=S*h-f*b;let L=i*A+r*O+s*R;return L?(L=1/L,t[0]=A*L,t[1]=(-I*r+s*S)*L,t[2]=(m*r-s*f)*L,t[3]=O*L,t[4]=(I*i-s*b)*L,t[5]=(-m*i+s*h)*L,t[6]=R*L,t[7]=(-S*i+r*b)*L,t[8]=(f*i-r*h)*L,t):null}function W0e(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5],b=e[6],S=e[7],I=e[8];return t[0]=f*I-m*S,t[1]=s*S-r*I,t[2]=r*m-s*f,t[3]=m*b-h*I,t[4]=i*I-s*b,t[5]=s*h-i*m,t[6]=h*S-f*b,t[7]=r*b-i*S,t[8]=i*f-r*h,t}function J0e(t){const e=t[0],i=t[1],r=t[2],s=t[3],h=t[4],f=t[5],m=t[6],b=t[7],S=t[8];return e*(S*h-f*b)+i*(-S*s+f*m)+r*(b*s-h*m)}function JM(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=e[6],I=e[7],A=e[8],O=i[0],R=i[1],L=i[2],z=i[3],j=i[4],H=i[5],Y=i[6],X=i[7],te=i[8];return t[0]=O*r+R*f+L*S,t[1]=O*s+R*m+L*I,t[2]=O*h+R*b+L*A,t[3]=z*r+j*f+H*S,t[4]=z*s+j*m+H*I,t[5]=z*h+j*b+H*A,t[6]=Y*r+X*f+te*S,t[7]=Y*s+X*m+te*I,t[8]=Y*h+X*b+te*A,t}function C6(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=e[6],I=e[7],A=e[8],O=i[0],R=i[1];return t[0]=r,t[1]=s,t[2]=h,t[3]=f,t[4]=m,t[5]=b,t[6]=O*r+R*f+S,t[7]=O*s+R*m+I,t[8]=O*h+R*b+A,t}function Fz(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=e[4],b=e[5],S=e[6],I=e[7],A=e[8],O=Math.sin(i),R=Math.cos(i);return t[0]=R*r+O*f,t[1]=R*s+O*m,t[2]=R*h+O*b,t[3]=R*f-O*r,t[4]=R*m-O*s,t[5]=R*b-O*h,t[6]=S,t[7]=I,t[8]=A,t}function K0e(t,e,i){const r=i[0],s=i[1],h=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=h*e[6],t[7]=h*e[7],t[8]=h*e[8],t}function Z0e(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function Y0e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function X0e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Q0e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function efe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function tfe(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=i+i,m=r+r,b=s+s,S=i*f,I=r*f,A=r*m,O=s*f,R=s*m,L=s*b,z=h*f,j=h*m,H=h*b;return t[0]=1-A-L,t[3]=I-H,t[6]=O+j,t[1]=I+H,t[4]=1-S-L,t[7]=R-z,t[2]=O-j,t[5]=R+z,t[8]=1-S-A,t}function Nz(t,e){const i=e[0],r=e[1],s=e[2],h=e[4],f=e[5],m=e[6],b=e[8],S=e[9],I=e[10],A=I*f-m*S,O=-I*h+m*b,R=S*h-f*b,L=i*A+r*O+s*R;if(!L)return null;const z=1/L;return t[0]=A*z,t[1]=(-I*r+s*S)*z,t[2]=(m*r-s*f)*z,t[3]=O*z,t[4]=(I*i-s*b)*z,t[5]=(-m*i+s*h)*z,t[6]=R*z,t[7]=(-S*i+r*b)*z,t[8]=(f*i-r*h)*z,t}function ife(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=e[4],m=e[5],b=e[6],S=e[7],I=e[8],A=e[9],O=e[10],R=e[11],L=e[12],z=e[13],j=e[14],H=e[15],Y=i*m-r*f,X=i*b-s*f,te=i*S-h*f,oe=r*b-s*m,le=r*S-h*m,ve=s*S-h*b,xe=I*z-A*L,Fe=I*j-O*L,Pe=I*H-R*L,He=A*j-O*z,ze=A*H-R*z,st=O*H-R*j;let Ne=Y*st-X*ze+te*He+oe*Pe-le*Fe+ve*xe;return Ne?(Ne=1/Ne,t[0]=(m*st-b*ze+S*He)*Ne,t[1]=(b*Pe-f*st-S*Fe)*Ne,t[2]=(f*ze-m*Pe+S*xe)*Ne,t[3]=(s*ze-r*st-h*He)*Ne,t[4]=(i*st-s*Pe+h*Fe)*Ne,t[5]=(r*Pe-i*ze-h*xe)*Ne,t[6]=(z*ve-j*le+H*oe)*Ne,t[7]=(j*te-L*ve-H*X)*Ne,t[8]=(L*le-z*te+H*Y)*Ne,t):null}function rfe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function nfe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function sfe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function ofe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Lz(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function afe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function lfe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function ufe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function hfe(t,e){const i=t[0],r=t[1],s=t[2],h=t[3],f=t[4],m=t[5],b=t[6],S=t[7],I=t[8],A=e[0],O=e[1],R=e[2],L=e[3],z=e[4],j=e[5],H=e[6],Y=e[7],X=e[8],te=$n();return Math.abs(i-A)<=te*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-O)<=te*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(s-R)<=te*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(h-L)<=te*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-z)<=te*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(m-j)<=te*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(b-H)<=te*Math.max(1,Math.abs(b),Math.abs(H))&&Math.abs(S-Y)<=te*Math.max(1,Math.abs(S),Math.abs(Y))&&Math.abs(I-X)<=te*Math.max(1,Math.abs(I),Math.abs(X))}function cfe(t){const e=$n(),i=t[0],r=t[1],s=t[2],h=t[3],f=t[4],m=t[5],b=t[6],S=t[7],I=t[8];return Math.abs(1-(i*i+h*h+b*b))<=e&&Math.abs(1-(r*r+f*f+S*S))<=e&&Math.abs(1-(s*s+m*m+I*I))<=e}const pfe=JM,dfe=Lz;Object.freeze(Object.defineProperty({__proto__:null,add:ofe,adjoint:W0e,copy:B0e,determinant:J0e,equals:hfe,exactEquals:ufe,frob:sfe,fromMat2d:efe,fromMat4:Oz,fromQuat:tfe,fromRotation:X0e,fromScaling:Q0e,fromTranslation:Y0e,identity:Rz,invert:H0e,isOrthoNormal:cfe,mul:pfe,multiply:JM,multiplyScalar:afe,multiplyScalarAndAdd:lfe,normalFromMat4:ife,normalFromMat4Legacy:Nz,projection:rfe,rotate:Fz,scale:K0e,scaleByVec2:Z0e,set:Pz,str:nfe,sub:dfe,subtract:Lz,translate:C6,transpose:WM},Symbol.toStringTag,{value:"Module"}));function ffe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function jz(t,e,i){i*=.5;const r=Math.sin(i);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(i),t}function yfe(t,e){const i=2*Math.acos(e[3]),r=Math.sin(i/2);return r>$n()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),i}function Dz(t,e,i){const r=e[0],s=e[1],h=e[2],f=e[3],m=i[0],b=i[1],S=i[2],I=i[3];return t[0]=r*I+f*m+s*S-h*b,t[1]=s*I+f*b+h*m-r*S,t[2]=h*I+f*S+r*b-s*m,t[3]=f*I-r*m-s*b-h*S,t}function mfe(t,e,i){i*=.5;const r=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),b=Math.cos(i);return t[0]=r*b+f*m,t[1]=s*b+h*m,t[2]=h*b-s*m,t[3]=f*b-r*m,t}function gfe(t,e,i){i*=.5;const r=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),b=Math.cos(i);return t[0]=r*b-h*m,t[1]=s*b+f*m,t[2]=h*b+r*m,t[3]=f*b-s*m,t}function vfe(t,e,i){i*=.5;const r=e[0],s=e[1],h=e[2],f=e[3],m=Math.sin(i),b=Math.cos(i);return t[0]=r*b+s*m,t[1]=s*b-r*m,t[2]=h*b+f*m,t[3]=f*b-h*m,t}function wfe(t,e){const i=e[0],r=e[1],s=e[2];return t[0]=i,t[1]=r,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-r*r-s*s)),t}function s2(t,e,i,r){const s=e[0],h=e[1],f=e[2],m=e[3];let b,S,I,A,O,R=i[0],L=i[1],z=i[2],j=i[3];return S=s*R+h*L+f*z+m*j,S<0&&(S=-S,R=-R,L=-L,z=-z,j=-j),1-S>$n()?(b=Math.acos(S),I=Math.sin(b),A=Math.sin((1-r)*b)/I,O=Math.sin(r*b)/I):(A=1-r,O=r),t[0]=A*s+O*R,t[1]=A*h+O*L,t[2]=A*f+O*z,t[3]=A*m+O*j,t}function bfe(t){const e=tm,i=e(),r=e(),s=e(),h=Math.sqrt(1-i),f=Math.sqrt(i);return t[0]=h*Math.sin(2*Math.PI*r),t[1]=h*Math.cos(2*Math.PI*r),t[2]=f*Math.sin(2*Math.PI*s),t[3]=f*Math.cos(2*Math.PI*s),t}function _fe(t,e){const i=e[0],r=e[1],s=e[2],h=e[3],f=i*i+r*r+s*s+h*h,m=f?1/f:0;return t[0]=-i*m,t[1]=-r*m,t[2]=-s*m,t[3]=h*m,t}function zz(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Vz(t,e){const i=e[0]+e[4]+e[8];let r;if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);const h=(s+1)%3,f=(s+2)%3;r=Math.sqrt(e[3*s+s]-e[3*h+h]-e[3*f+f]+1),t[s]=.5*r,r=.5/r,t[3]=(e[3*h+f]-e[3*f+h])*r,t[h]=(e[3*h+s]+e[3*s+h])*r,t[f]=(e[3*f+s]+e[3*s+f])*r}return t}function xfe(t,e,i,r){const s=.5*Math.PI/180;e*=s,i*=s,r*=s;const h=Math.sin(e),f=Math.cos(e),m=Math.sin(i),b=Math.cos(i),S=Math.sin(r),I=Math.cos(r);return t[0]=h*b*I-f*m*S,t[1]=f*m*I+h*b*S,t[2]=f*b*S-h*m*I,t[3]=f*b*I+h*m*S,t}function Sfe(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Mfe=xc,$fe=j2,Tfe=HO,Ife=Dz,Efe=zS,Afe=XO,Cfe=qS,Gz=VS,kfe=Gz,qz=GS,Ofe=qz,KM=YO,Pfe=V1,Rfe=US;function Ffe(t,e,i){const r=at(e,i);return r<-.999999?(ki(To,Nfe,e),BO(To)<1e-6&&ki(To,Lfe,e),vi(To,To),jz(t,To,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(ki(To,e,i),t[0]=To[0],t[1]=To[1],t[2]=To[2],t[3]=1+r,KM(t,t))}const To=we(),Nfe=fr(1,0,0),Lfe=fr(0,1,0);function jfe(t,e,i,r,s,h){return s2(hA,e,s,h),s2(cA,i,r,h),s2(t,hA,cA,2*h*(1-h)),t}const hA=Tm(),cA=Tm();function Dfe(t,e,i,r){const s=zfe;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=r[0],s[4]=r[1],s[7]=r[2],s[2]=-e[0],s[5]=-e[1],s[8]=-e[2],KM(t,Vz(t,s))}const zfe=J0();Object.freeze(Object.defineProperty({__proto__:null,add:Tfe,calculateW:wfe,conjugate:zz,copy:Mfe,dot:Afe,equals:Rfe,exactEquals:Pfe,fromEuler:xfe,fromMat3:Vz,getAxisAngle:yfe,identity:ffe,invert:_fe,len:kfe,length:Gz,lerp:Cfe,mul:Ife,multiply:Dz,normalize:KM,random:bfe,rotateX:mfe,rotateY:gfe,rotateZ:vfe,rotationTo:Ffe,scale:Efe,set:$fe,setAxes:Dfe,setAxisAngle:jz,slerp:s2,sqlerp:jfe,sqrLen:Ofe,squaredLength:qz,str:Sfe},Symbol.toStringTag,{value:"Module"}));function ZM(){return new Float32Array(3)}function Vfe(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Am(t,e,i){const r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=i,r}function Gfe(t,e){return new Float32Array(t,e,3)}function Uz(){return ZM()}function Bz(){return Am(1,1,1)}function Hz(){return Am(1,0,0)}function Wz(){return Am(0,1,0)}function Jz(){return Am(0,0,1)}const qfe=Uz(),Ufe=Bz(),Bfe=Hz(),Hfe=Wz(),Wfe=Jz();Object.freeze(Object.defineProperty({__proto__:null,ONES:Ufe,UNIT_X:Bfe,UNIT_Y:Hfe,UNIT_Z:Wfe,ZEROS:qfe,clone:Vfe,create:ZM,createView:Gfe,fromValues:Am,ones:Bz,unitX:Hz,unitY:Wz,unitZ:Jz,zeros:Uz},Symbol.toStringTag,{value:"Module"}));let Jfe=class{constructor(){this._transform=Bi(),this._transformInverse=new Rg({value:this._transform},Vu,Bi),this._transformInverseTranspose=new Rg(this._transformInverse,Yn,Bi),this._transformTranspose=new Rg({value:this._transform},Yn,Bi),this._transformInverseRotation=new Rg({value:this._transform},Nz,J0)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(e){zu(this._transform,e)}multiplyTransform(e){u0(this._transform,this._transform,e)}set(e){zu(this._transform,e),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(e,i){this.setTransformMatrix(e),this.multiplyTransform(i),this._invalidateLazyTransforms()}},Rg=class{constructor(e,i,r){this._original=e,this._update=i,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}},Kfe=class{constructor(e=0){this.componentLocalOriginLength=0,this._tmpVertex=we(),this._mbs=Y0(),this._obb={center:we(),halfSize:ZM(),quaternion:null},this._totalOffset=0,this._offset=0,this._resetOffset(e)}_resetOffset(e){this._offset=e,this._totalOffset=e}set offset(e){this._resetOffset(e)}get offset(){return this._offset}set componentOffset(e){this._totalOffset=this._offset+e}set localOrigin(e){this.componentLocalOriginLength=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}applyToVertex(e,i,r){const s=e,h=i,f=r+this.componentLocalOriginLength,m=this._totalOffset/Math.sqrt(s*s+h*h+f*f);return this._tmpVertex[0]=e+s*m,this._tmpVertex[1]=i+h*m,this._tmpVertex[2]=r+f*m,this._tmpVertex}applyToAabb(e){const i=e[0],r=e[1],s=e[2]+this.componentLocalOriginLength,h=e[3],f=e[4],m=e[5]+this.componentLocalOriginLength,b=i*h<0?0:Math.min(Math.abs(i),Math.abs(h)),S=r*f<0?0:Math.min(Math.abs(r),Math.abs(f)),I=s*m<0?0:Math.min(Math.abs(s),Math.abs(m)),A=Math.sqrt(b*b+S*S+I*I);if(A<this._totalOffset)return e[0]-=i<0?this._totalOffset:0,e[1]-=r<0?this._totalOffset:0,e[2]-=s<0?this._totalOffset:0,e[3]+=h>0?this._totalOffset:0,e[4]+=f>0?this._totalOffset:0,e[5]+=m>0?this._totalOffset:0,e;const O=Math.max(Math.abs(i),Math.abs(h)),R=Math.max(Math.abs(r),Math.abs(f)),L=Math.max(Math.abs(s),Math.abs(m)),z=Math.sqrt(O*O+R*R+L*L),j=this._totalOffset/z,H=this._totalOffset/A;return e[0]+=i*(i>0?j:H),e[1]+=r*(r>0?j:H),e[2]+=s*(s>0?j:H),e[3]+=h*(h<0?j:H),e[4]+=f*(f<0?j:H),e[5]+=m*(m<0?j:H),e}applyToMbs(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),r=this._totalOffset/i;return this._mbs[0]=e[0]+e[0]*r,this._mbs[1]=e[1]+e[1]*r,this._mbs[2]=e[2]+e[2]*r,this._mbs[3]=e[3]+e[3]*this._totalOffset/i,this._mbs}applyToObb(e){const i=e.center,r=this._totalOffset/Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this._obb.center[0]=i[0]+i[0]*r,this._obb.center[1]=i[1]+i[1]*r,this._obb.center[2]=i[2]+i[2]*r,Q9(this._obb.halfSize,e.halfSize,e.quaternion),Gt(this._obb.halfSize,this._obb.halfSize,e.center);const s=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);return this._obb.halfSize[0]+=this._obb.halfSize[0]*s,this._obb.halfSize[1]+=this._obb.halfSize[1]*s,this._obb.halfSize[2]+=this._obb.halfSize[2]*s,mt(this._obb.halfSize,this._obb.halfSize,e.center),zz(fA,e.quaternion),Q9(this._obb.halfSize,this._obb.halfSize,fA),this._obb.halfSize[0]*=this._obb.halfSize[0]<0?-1:1,this._obb.halfSize[1]*=this._obb.halfSize[1]<0?-1:1,this._obb.halfSize[2]*=this._obb.halfSize[2]<0?-1:1,this._obb.quaternion=e.quaternion,this._obb}},Zfe=class{constructor(e=0){this.offset=e,this.sphere=Y0(),this.tmpVertex=we()}applyToVertex(e,i,r){const s=this.objectTransform.transform;let h=s[0]*e+s[4]*i+s[8]*r+s[12],f=s[1]*e+s[5]*i+s[9]*r+s[13],m=s[2]*e+s[6]*i+s[10]*r+s[14];const b=this.offset/Math.sqrt(h*h+f*f+m*m);h+=h*b,f+=f*b,m+=m*b;const S=this.objectTransform.inverse;return this.tmpVertex[0]=S[0]*h+S[4]*f+S[8]*m+S[12],this.tmpVertex[1]=S[1]*h+S[5]*f+S[9]*m+S[13],this.tmpVertex[2]=S[2]*h+S[6]*f+S[10]*m+S[14],this.tmpVertex}applyToMinMax(e,i){const r=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*r,e[1]+=e[1]*r,e[2]+=e[2]*r;const s=this.offset/Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]+=i[0]*s,i[1]+=i[1]*s,i[2]+=i[2]*s}applyToAabb(e){const i=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*i,e[1]+=e[1]*i,e[2]+=e[2]*i;const r=this.offset/Math.sqrt(e[3]*e[3]+e[4]*e[4]+e[5]*e[5]);return e[3]+=e[3]*r,e[4]+=e[4]*r,e[5]+=e[5]*r,e}applyToBoundingSphere(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),r=this.offset/i;return this.sphere[0]=e[0]+e[0]*r,this.sphere[1]=e[1]+e[1]*r,this.sphere[2]=e[2]+e[2]*r,this.sphere[3]=e[3]+e[3]*this.offset/i,this.sphere}};const pA=new Zfe;function dA(t){return t!=null?(pA.offset=t,pA):null}new Kfe;const fA=Tm(),yA=1e-5;let Yfe=class{constructor(e){this.options=new x0e,this._results=new Xfe,this.transform=new Jfe,this.tolerance=yA,this.verticalOffset=null,this._ray=bn(),this._rayEnd=we(),this._rayBeginTransformed=we(),this._rayEndTransformed=we(),this.viewingMode=e??tr.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(e,i,r){this.resetWithRay(Ede(e,i,this._ray),r)}resetWithRay(e,i){this.camera=i,e!==this._ray&&$w(e,this._ray),this.options.verticalOffset!==0?this.viewingMode===tr.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,Gt(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(e=null,i,r,s,h){this.point=i,this.filterPredicate=s,this.tolerance=r??yA;const f=dA(this.verticalOffset);if(e&&e.length>0){const m=h?b=>{h(b)&&this.intersectObject(b)}:b=>{this.intersectObject(b)};for(const b of e){const S=b.getSpatialQueryAccelerator&&b.getSpatialQueryAccelerator();S!=null?(f!=null?S.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,m,f):S.forEachAlongRay(this._ray.origin,this._ray.direction,m),this.options.selectionMode&&this.options.hud&&S.forEachDegenerateObject(m)):b.objects.forAll(I=>m(I))}}this.sortResults()}intersectObject(e){const i=e.geometries;if(!i)return;const r=e.transformation,s=dA(this.verticalOffset);for(const h of i){if(!h.visible)continue;const{material:f,id:m}=h;this.transform.setAndInvalidateLazyTransforms(r,h.shaderTransformation),br(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),br(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const b=this.transform.transform;s!=null&&(s.objectTransform=this.transform),f.intersect(h,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(S,I,A,O,R,L)=>{if(S>=0){if(this.filterPredicate!=null&&!this.filterPredicate(this._ray.origin,this._rayEnd,S))return;const z=O?this._results.hud:this._results,j=O?H=>{const Y=new M0e(e,m,A,L);H.set(cp.HUD,Y,S,I,OM,R)}:H=>H.set(cp.OBJECT,{object:e,geometryId:m,triangleNr:A},S,I,b,R);if((z.min.drapedLayerOrder==null||R>=z.min.drapedLayerOrder)&&(z.min.dist==null||S<z.min.dist)&&j(z.min),this.options.store!==qy.MIN&&(z.max.drapedLayerOrder==null||R<z.max.drapedLayerOrder)&&(z.max.dist==null||S>z.max.dist)&&j(z.max),this.options.store===qy.ALL)if(O){const H=new k6(this._ray);j(H),this._results.hud.all.push(H)}else{const H=new ay(this._ray);j(H),this._results.all.push(H)}}})}}sortResults(e=this._results.all){e.sort((i,r)=>i.dist!==r.dist?(i.dist??0)-(r.dist??0):i.drapedLayerOrder!==r.drapedLayerOrder?(i.drapedLayerOrder??Number.MAX_VALUE)-(r.drapedLayerOrder??Number.MAX_VALUE):(r.drapedLayerGraphicOrder??Number.MIN_VALUE)-(i.drapedLayerGraphicOrder??Number.MIN_VALUE))}};function Kz(t){return new Yfe(t)}let Xfe=class{constructor(){this.min=new ay(bn()),this.max=new ay(bn()),this.hud={min:new k6(bn()),max:new k6(bn()),all:new Array},this.ground=new ay(bn()),this.all=[]}init(e){this.min.init(e),this.max.init(e),this.ground.init(e),this.all.length=0,this.hud.min.init(e),this.hud.max.init(e),this.hud.all.length=0}},ay=class{get ray(){return this._ray}get distanceInRenderSpace(){return this.dist!=null?(Qe(Fg,this.ray.direction,this.dist),gt(Fg)):null}getIntersectionPoint(e){return!!U0e(this)&&(Qe(Fg,this.ray.direction,this.dist),Gt(e,this.ray.origin,Fg),!0)}getTransformedNormal(e){return We(xf,this.normal),xf[3]=0,Sc(xf,xf,this.transformation),We(e,xf),vi(e,e)}constructor(e){this.intersector=cp.OBJECT,this.normal=we(),this.transformation=Bi(),this._ray=bn(),this.init(e)}init(e){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=cp.OBJECT,$w(e,this._ray)}set(e,i,r,s,h,f,m){this.intersector=e,this.dist=r,We(this.normal,s??DO),zu(this.transformation,h??OM),this.target=i,this.drapedLayerOrder=f,this.drapedLayerGraphicOrder=m}copy(e){$w(e.ray,this._ray),this.intersector=e.intersector,this.dist=e.dist,this.target=e.target,this.drapedLayerOrder=e.drapedLayerOrder,this.drapedLayerGraphicOrder=e.drapedLayerGraphicOrder,We(this.normal,e.normal),zu(this.transformation,e.transformation)}},k6=class extends ay{constructor(){super(...arguments),this.intersector=cp.HUD}};const Fg=we(),xf=ca();function Zz(t,e,i,r){return t.renderCoordsHelper.fromRenderCoords(e.eye,Ew,r)!=null&&KJ(i,Ew)}function Wb(t,e){return t.elevationProvider?t.elevationProvider.getElevation(e[0],e[1],e[2],t.renderCoordsHelper.spatialReference,"ground")??0:0}function bp(t,e,i,r){const s=t.state.camera.clone();e&&i&&r&&(s.eye=e,s.center=i,s.up=r),Qfe(t,s.ray,kl)||We(kl,s.center);const h=t.state.constraints,f=h.minimumPoiDistance;if(A0(s.eye,kl)<f){const m=h.collision.enabled;We(yh,s.viewForward),Qe(yh,yh,f),m?s.eye=mt(Ew,kl,yh):Gt(kl,s.eye,yh);const b=t.renderCoordsHelper,S=b.getAltitude(s.eye),I=h.collision.elevationMargin;m&&S<I&&(mt(yh,kl,s.eye),s.eye=b.setAltitude(Ew,I,s.eye),Gt(kl,s.eye,yh))}return s.center=kl,s}function mA(t,e,i){if(!t.state.isGlobal||!t.stateManager.constraintsManager)return!1;const r=Wb(t,e),s=t.stateManager.constraintsManager.nearFarHeuristic,{far:h}=s.compute(e,i,t.renderDataExtent,r,t1e),f=h*h;return A0(e,i)>f}function Qfe(t,e,i){let r=gA[t.viewingMode];r||(r=Kz(t.state.viewingMode),r.options.backfacesTerrain=!t.state.isGlobal,r.options.invisibleTerrain=!0,gA[t.viewingMode]=r);const{isGlobal:s}=t.state;return!(!t.sceneIntersectionHelper.intersectRay(e,r,i)||mA(t,e.origin,i))||!(!t.renderCoordsHelper.intersectManifold(e,0,i)||mA(t,e.origin,i))||!!s&&e1e(e,i,fl(t.spatialReference).radius)}function e1e(t,e,i){const r=at(t.origin,t.origin)-i*i,s=r>0?Math.sqrt(r)/3:1;return Qe(e,t.direction,s/gt(t.direction)),Gt(e,e,t.origin),!0}const gA={},Ew=we(),kl=we(),yh=we(),t1e={near:0,far:0};function Jb(t,e,i=ws.EYE){const r=t.state.constraints;if(!r.collision.enabled)return!1;const s=Wb(t,e.eye),h=t.renderCoordsHelper.getAltitude(e.eye),f=s+r.collision.elevationMargin;if(h>=f)return!1;const m=gt(e.eye);if(mt(Ng,e.center,e.eye),e.eye=t.renderCoordsHelper.setAltitude(i1e,f,e.eye),i===ws.EYE_AND_CENTER)e.center=Gt(Ng,e.eye,Ng);else if(i===ws.EYE_AND_CENTER_SCALE){const b=(m-h+f)/m;e.center=Qe(Ng,e.center,b)}return!0}var ws;(function(t){t[t.EYE=0]="EYE",t[t.EYE_AND_CENTER=1]="EYE_AND_CENTER",t[t.EYE_AND_CENTER_SCALE=2]="EYE_AND_CENTER_SCALE"})(ws||(ws={}));const Ng=we(),i1e=we();function Uy(t,e,i){t.worldUpAtPosition(e,vA),mt(Z_,i,e);const r=gt(Z_);return r===0?0:aa(at(Z_,vA)/r)}const vA=we(),Z_=we();function Yz(t,e,i=Qu,r=!0){Sf.eyeCenterDistance=0,Sf.requiresTwoSteps=!1;const s=YM(t,e,i,void 0,Sf);if(s===0)return!1;switch(pm(Lg,-s,e.viewRight),i.tiltMode){case cl.LOOK_AROUND:br(Ol,e.viewForward,Lg),Qe(Ol,Ol,Sf.eyeCenterDistance),e.center=Gt(Iu,e.eye,Ol);break;case cl.TUMBLE:mt(Ol,e.center,e.eye),br(Ol,Ol,Lg),e.eye=mt(Iu,e.center,Ol);break;default:i.tiltMode}return e.up=br(Iu,e.up,Lg),!Sf.requiresTwoSteps||!r||Yz(t,e,i,!1)}function YM(t,e,i=Qu,r=Qu,s){if(!t.state.constraints.tilt)return 0;const h=e.distance,f=t.state.constraints.tilt(h,p1e);return c1e(t,i,f),r.interactionType===Sr.TUMBLE&&Gy(r.selection,Kn.ALTITUDE)&&Xz(t,r.interactionStartCamera,f),i.tiltMode===cl.LOOK_AROUND||r.tiltMode===cl.LOOK_AROUND?n1e(t,e,f,s):r1e(t,e,f)}function r1e(t,e,i){const r=Uy(t.renderCoordsHelper,e.center,e.eye),s=r-fi(r,i.min,i.max);return By(s)?s:0}function n1e(t,e,i,r){switch(r&&(r.requiresTwoSteps=!1),t.viewingMode){case"global":return o1e(t,e,i,r);case"local":return s1e(t,e,i,r)}}function s1e(t,e,i,r){const s=Uy(t.renderCoordsHelper,e.center,e.eye),h=fi(s,i.min,i.max),f=s-h;if(!By(f))return 0;if(r){const m=t.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,b=t.renderCoordsHelper.getAltitude(e.eye)-m,S=Math.cos(h);Math.abs(S)>1e-4?r.eyeCenterDistance=b/S:r.eyeCenterDistance=e.distance}return f}function o1e(t,e,i,r){const s=a1e(t,e,d1e),h=fi(s.tiltAtCenter,i.min,i.max);if(!By(s.tiltAtCenter-h))return 0;let f,m;return s.centerIsOnSurface?(f=l1e(s),m=u1e(s,f)):(f=s.constraints.clampTilt(s.eyeCenterDistance,s.tiltAtCenter),r&&f<Math.PI/2&&(r.requiresTwoSteps=!0,f=Math.PI/2-1e-5),m=h1e(s,f)),r&&(r.eyeCenterDistance=O6(s,f)),m}function a1e(t,e,i){const r=t.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,s=r+fl(t.spatialReference).radius,h=t.renderCoordsHelper.intersectManifold(e.ray,r,Iu);return i.eyeCenterDistance=e.distance,i.centerIsOnSurface=!1,h!=null?(i.eyeCenterDistance=mo(e.eye,h),i.tiltAtCenter=Uy(t.renderCoordsHelper,h,e.eye),i.centerIsOnSurface=!0):t.state.isLocal?i.tiltAtCenter=Uy(t.renderCoordsHelper,e.center,e.eye):(PM(yz(bz,s),e.ray,Iu),i.eyeCenterDistance=mo(e.eye,Iu),i.tiltAtCenter=aa(-at(e.viewForward,vi(Iu,Iu)))),i.radius=s,i.eyeRadius=gt(e.eye),i.constraints=t.state.constraints,i}function By(t){return Math.abs(t)>1e-9}function l1e(t){const{constraints:e,eyeCenterDistance:i,tiltAtCenter:r}=t;let s=r,h=e.clampTilt(i,r);const f=O6(t,h);if(e.clampTilt(f,r)===h)return h;let m=0;for(;m<10&&By(h-s);){const b=(s+h)/2,S=O6(t,b);By(e.clampTilt(S,b)-b)?s=b:h=b,m++}return h}function O6(t,e){if(!t.centerIsOnSurface)return t.eyeCenterDistance;const i=Math.PI-fi(e,0,Math.PI),r=la(t.radius/t.eyeRadius*Math.sin(i)),s=Math.PI-i-r,h=Math.sin(s)/Math.sin(i);if(t.eyeRadius<t.radius&&h>1){const f=Math.PI-r,m=Math.PI-i-f;return Math.sin(m)/Math.sin(i)*t.eyeRadius}return h*t.eyeRadius}function u1e(t,e){const i=la(t.radius/t.eyeRadius*Math.sin(t.tiltAtCenter)),r=la(t.radius/t.eyeRadius*Math.sin(e));return t.eyeRadius>t.radius?i-r:r-i}function h1e(t,e){return t.tiltAtCenter-Math.PI/2-(e-Math.PI/2)}function c1e(t,e,i){if(e.interactionType===Sr.NONE)return;const{interactionStartCamera:r,interactionFactor:s}=e;if(!r)return;const{min:h,max:f}=i,m=YM(t,r,Qu,e),b=m===0?0:Uy(t.renderCoordsHelper,r.center,r.eye);i.min=h,i.max=f,e.interactionType===Sr.TUMBLE?(Gy(e.selection,Kn.ALTITUDE)&&Xz(t,r,i),Tw(m,b,!0,s,wA,i)):Tw(m,b,!1,s,wA,i)}function Xz(t,e,i){const r=t.state.constraints;if(t.state.isLocal||!r.altitude||!e)return;const s=tp(e.center),h=Math.sqrt(s),f=e.distance,m=fl(t.spatialReference).radius,b=r.altitude.min+m,S=r.altitude.max+m,I=(b*b-f*f-s)/(-2*h*f),A=(S*S-f*f-s)/(-2*h*f);i.min=Math.max(i.min,Math.min(Math.PI-aa(A),i.max)),i.max=Math.min(i.max,Math.PI-aa(I))}const Ol=we(),Lg=Bi(),Iu=we(),wA=Hi(5),p1e={min:0,max:0},d1e={constraints:null,radius:0,eyeRadius:0,centerIsOnSurface:!0,eyeCenterDistance:0,tiltAtCenter:0},Sf={eyeCenterDistance:0,requiresTwoSteps:!1};function f1e(t){return t}const Kb=t=>t*t,XM=t=>1-Kb(1-t),y1e=t=>t<.5?Kb(2*t)/2:(XM(2*(t-.5))+1)/2,QM=t=>t*t*t,Qz=t=>1-QM(1-t),m1e=t=>t<.5?QM(2*t)/2:(Qz(2*(t-.5))+1)/2,e$=t=>t*t*t*t,eV=t=>1-e$(1-t),g1e=t=>t<.5?e$(2*t)/2:(eV(2*(t-.5))+1)/2,t$=t=>t*t*t*t*t,tV=t=>1-t$(1-t),v1e=t=>t<.5?t$(2*t)/2:(tV(2*(t-.5))+1)/2,i$=t=>1-Math.cos(t*Math.PI/2),iV=t=>1-i$(1-t),w1e=t=>t<.5?i$(2*t)/2:(iV(2*(t-.5))+1)/2,r$=t=>2**(10*(t-1)),n$=t=>1-r$(1-t),b1e=t=>t<.5?r$(2*t)/2:(n$(2*(t-.5))+1)/2,s$=t=>-(Math.sqrt(1-t*t)-1),rV=t=>1-s$(1-t),_1e=t=>t<.5?s$(2*t)/2:(rV(2*(t-.5))+1)/2;function Es(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function As(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const x1e=As(Es(1),1),S1e=As(Es(1),0),nV=As(Es(1),.5),M1e=As(Es(2),1),$1e=As(Es(2),0),T1e=As(Es(2),.5),I1e=As(Es(3),1),E1e=As(Es(3),0),A1e=As(Es(3),.5),C1e=As(Es(4),1),k1e=As(Es(4),0),O1e=As(Es(4),.5),P1e={linear:f1e,"in-quad":Kb,"out-quad":XM,"in-out-quad":y1e,"in-coast-quad":x1e,"out-coast-quad":S1e,"in-out-coast-quad":nV,"in-cubic":QM,"out-cubic":Qz,"in-out-cubic":m1e,"in-coast-cubic":M1e,"out-coast-cubic":$1e,"in-out-coast-cubic":T1e,"in-quart":e$,"out-quart":eV,"in-out-quart":g1e,"in-coast-quart":I1e,"out-coast-quart":E1e,"in-out-coast-quart":A1e,"in-quint":t$,"out-quint":tV,"in-out-quint":v1e,"in-coast-quint":C1e,"out-coast-quint":k1e,"in-out-coast-quint":O1e,"in-sine":i$,"out-sine":iV,"in-out-sine":w1e,"in-expo":r$,"out-expo":n$,"in-out-expo":b1e,"in-circ":s$,"out-circ":rV,"in-out-circ":_1e};function o$(t,e,i=L1e,r=e){r!==e&&r.copyFrom(e),r.computeUp(t.state.viewingMode);let s=!1;for(let m=0;m<j1e;m++){let b=0;for(const S of N1e)if(Gy(i.selection,S.type)){const I=Math.abs(S.error(t,r,i));S.apply(t,r,i)&&(s=!0,b+=I)}if(b===0)break}const h=Gy(i.selection,Kn.COLLISION),f=R1e(i.interactionType,t);return h&&Jb(t,r,f)&&(s=!0),s&&r.computeUp(t.state.viewingMode),s}function R1e(t,e){switch(t){case Sr.PAN:return ws.EYE_AND_CENTER;case Sr.ASCEND:return e.state.isGlobal?ws.EYE_AND_CENTER_SCALE:ws.EYE_AND_CENTER;default:return ws.EYE}}function F1e(t,e,i){return YM(t,e,i)*e.distance}const N1e=[{type:Kn.TILT,error:F1e,apply:Yz},{type:Kn.ALTITUDE,error:jM,apply:o0e},{type:Kn.DISTANCE,error:DM,apply:y0e}],L1e={selection:Kn.ALL,interactionType:Sr.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE},j1e=5;function D1e(t){return fi((t-1e5)/(1e6-1e5),0,1)}function z1e(t,e,i){return t===tr.Global?new G1e(i):new V1e(e,i)}let V1e=class{constructor(e,i){this._elevationProvider=e,this._referenceEllipsoid=fl(i),this._unitInMeters=yl(i,this._referenceEllipsoid.metersPerDegree)}compute(e,i,r,s,h){var X;h||(h={near:0,far:0});let f=e[2]*this._unitInMeters;const m=f,b=f-s,S=(X=this._elevationProvider)==null?void 0:X.visibleElevationBounds;S&&(f=b>=0?m-this._unitInMeters*S.min:this._unitInMeters*S.max-m);const I={x:(r=r??new At({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0})).xmax-r.xmin,y:r.ymax-r.ymin,z:4*Math.max(r.xmax-r.xmin,r.ymax-r.ymin)},A=Math.max(I.x,I.y,I.z);mt(mh,i,e),Op[0]=mh[0]>0?r.xmax:r.xmin,Op[1]=mh[1]>0?r.ymax:r.ymin,Op[2]=mh[2]>0?A/2:-A/2,mt(Op,Op,e),vi(mh,mh);const O=1.1*at(Op,mh)*this._unitInMeters,R=Math.sqrt(f*(f+2*this._referenceEllipsoid.radius)),L=Math.max(r.xmax-r.xmin,r.ymax-r.ymin),z=L*B1e*this._unitInMeters,j=L*H1e*this._unitInMeters,H=fi((f-j)/(z-j),0,1)**3,Y=Math.min(ao(R,O,H),R)*Math.max(Math.log(Math.abs(b)),1);return sV(Math.min(Y,Math.max(34064e4,A))/this._unitInMeters,q1e,this._unitInMeters,h)}},G1e=class{constructor(e){this._referenceEllipsoid=fl(e)}compute(e,i,r,s,h){h||(h={near:0,far:0});const f=gt(e),m=f-this._referenceEllipsoid.radius,b=this._referenceEllipsoid.radius+Math.min(0,s),S=Math.abs(m-s),I=Math.max(S,Math.abs(m)),A=Math.sqrt(I*(I+2*b)),O=f+this._referenceEllipsoid.radius;return sV(1.2*ao(A,O,D1e(I)),fi(2e4-(Math.log(I)-7.983)/9.011*19e3,1e3,2e4),1,h)}};function sV(t,e,i,r){const s=U1e/i;return t/e>s?(r.far=t,r.near=r.far/e):(r.near=s,r.far=r.near*e),r}const q1e=2e4,U1e=2,B1e=.001,H1e=1e-4,Op=we(),mh=we();let o2=class extends Oe{constructor(e){super(e)}initialize(){this.addHandles(this.view.basemapTerrain.on("elevation-change",e=>this._handleElevationChangeEvent(e)))}_handleElevationChangeEvent(e){if(this.view.state.cameraController)return;const i=this.view.state.camera;e.spatialReference!=null&&Zz(this.view,i,e.extent,e.spatialReference)&&this._applyToCurrentCamera()}_applyToCurrentCamera(){this.view.state.updateCamera(e=>Jb(this.view,e,ws.EYE_AND_CENTER))}};v([x({constructOnly:!0})],o2.prototype,"view",void 0),o2=v([B("esri.views.3d.state.ElevationCollisionConstraint")],o2);let M1=class extends Oe{constructor(e){super(e),this.nearFarHeuristic=z1e(e.view.state.viewingMode,e.view.basemapTerrain,e.view.renderCoordsHelper.spatialReference)}initialize(){this.addHandles([me(()=>{var e,i,r,s;return[(i=(e=this.view.constraints)==null?void 0:e.clipDistance)==null?void 0:i.near,(s=(r=this.view.constraints)==null?void 0:r.clipDistance)==null?void 0:s.far]},()=>this._clipDistanceNearFarChanged()),me(()=>{var e,i;return(i=(e=this.view.constraints)==null?void 0:e.clipDistance)==null?void 0:i.mode},()=>this._updateNearFar()),this.view.state.events.on("before-camera-change",e=>this._updateCameraNearFar(e)),me(()=>this.view.renderDataExtent,()=>this._updateNearFar(),qn),me(()=>{var e,i,r,s;return[(i=(e=this.view.constraints)==null?void 0:e.altitude)==null?void 0:i.min,(s=(r=this.view.constraints)==null?void 0:r.altitude)==null?void 0:s.max]},()=>this._updateAltitude(),qn),me(()=>{var e,i;return(i=(e=this.view.constraints)==null?void 0:e.tilt)==null?void 0:i.max},()=>this._updateTiltMax(),qn),me(()=>{var e,i;return(i=(e=this.view.constraints)==null?void 0:e.tilt)==null?void 0:i.mode},()=>this._updateTilt(),qn),me(()=>{var e;return(e=this.view.state)==null?void 0:e.camera},()=>this._updateTiltAutoMax(),qn),me(()=>{var e,i,r,s,h,f;return[(r=(i=(e=this.view.map)==null?void 0:e.ground)==null?void 0:i.navigationConstraint)==null?void 0:r.type,(f=(h=(s=this.view.state)==null?void 0:s.constraints)==null?void 0:h.collision)==null?void 0:f.enabled]},()=>this._updateCollision(),qn)]),this.view.state.isLocal&&this.addHandles(me(()=>this.view.renderDataExtent,e=>this._updateLocalSurfaceDistance(e),_t)),this._updateNearFar(),this.view.state.viewingMode!==tr.Local&&this._updateAltitude(),this._updateTilt(),this._updateCollision(),this._set("surfaceCollisionConstraint",new o2({view:this.view}))}destroy(){this.surfaceCollisionConstraint&&(this.surfaceCollisionConstraint.destroy(),this._set("surfaceCollisionConstraint",null))}_clipDistanceNearFarChanged(){var i;const e=(i=this.view.constraints)==null?void 0:i.clipDistance;e&&e.mode!=="auto"&&this.view.state.updateCamera(r=>this._updateCameraNearFarManual(r,e))}_updateNearFar(){this.view.state.updateCamera(e=>this._updateCameraNearFar(e))}_updateCameraNearFar(e){const i=this.view.constraints&&this.view.constraints.clipDistance;(i?i.mode:"auto")==="manual"?this._updateCameraNearFarManual(e,i):this._updateCameraNearFarAuto(e,i)}_updateCameraNearFarAuto(e,i){this.nearFarHeuristic.compute(e.eye,e.center,this.view.renderDataExtent,Wb(this.view,e.eye),e),i&&i.autoUpdate(e.near,e.far)}_updateCameraNearFarManual(e,i){i&&(e.near=i.near,e.far=i.far)}_updateCollision(){var s,h,f;const e=(f=(h=(s=this.view.map)==null?void 0:s.ground)==null?void 0:h.navigationConstraint)==null?void 0:f.type,i=!e||e==="stay-above",r=this.view.state.constraints.collision;if(i!==r.enabled){r.enabled=i,i&&this._reapplyConstraints(Kn.COLLISION);const m=this.view.constraints&&this.view.constraints.tilt;m&&m.mode!=="auto"||this._updateTiltAuto()}}_updateAltitude(){const e=this.view.constraints&&this.view.constraints.altitude;e&&this.view.state.viewingMode!==tr.Local?this.view.state.constraints.altitude={min:e.min,max:e.max}:this.view.state.constraints.altitude=null,this._reapplyConstraints()}_updateTiltMax(){const e=this.view.constraints&&this.view.constraints.tilt;e&&e.mode!=="auto"&&(this._updateTiltManual(e),this._reapplyConstraints())}_updateTilt(){const e=this.view.constraints&&this.view.constraints.tilt;(e?e.mode:"auto")==="manual"?this._updateTiltManual(e):this._updateTiltAuto(),this._reapplyConstraints()}_updateTiltManual(e){const i=this.view.state.constraints;i.tilt=i.createConstantMaxTilt(Hi(e.max))}_updateTiltAuto(){const e=this.view.state.constraints;e.tilt=e.createDefaultTilt(),this._updateTiltAutoMax()}_updateTiltAutoMax(){const e=this.view.constraints&&this.view.constraints.tilt;if(!e||e.mode!=="auto")return;const i=this.view.state.constraints;if(i.tilt){const r=i.tilt(this.view.state.camera.distance).max;e.autoUpdate(Ms(r))}}_updateLocalSurfaceDistance(e){if(e==null)return;let i=Math.max(e.width,e.height);if(i<=0)return;e.zmax!=null&&e.zmin!=null&&(i=Math.max(i,e.zmax-e.zmin));const r=this.view.state,s=3*i/Math.atan(r.camera.fov/2);s!==r.constraints.distance&&(r.constraints.distance=s)}_reapplyConstraints(e=Kn.ALL){this.view.state.updateCamera(i=>o$(this.view,i,{selection:e,interactionType:Sr.NONE,interactionFactor:null,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE}))}};v([x({constructOnly:!0})],M1.prototype,"view",void 0),v([x({readOnly:!0})],M1.prototype,"surfaceCollisionConstraint",void 0),M1=v([B("esri.views.3d.state.ConstraintsManager")],M1);function Zb(t){return t?{ray:bn(t.ray),c0:t.c0,c1:t.c1}:{ray:bn(),c0:0,c1:Number.MAX_VALUE}}function W1e(t,e=Zb()){return $w(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function J1e(t,e,i=Zb()){const r=gt(t.vector);return cz(t.origin,e,i.ray),i.c0=0,i.c1=r,i}new wp(()=>Zb());function oV(t){return t?[lr(t[0]),lr(t[1]),lr(t[2]),lr(t[3]),lr(t[4]),lr(t[5])]:[lr(),lr(),lr(),lr(),lr(),lr()]}function aV(){return[we(),we(),we(),we(),we(),we(),we(),we()]}function K1e(t,e){for(let i=0;i<Yb;i++)RM(t[i],e[i])}function lV(t,e,i,r=iye){const s=u0(uz.get(),e,t);Vu(s,s);for(let h=0;h<eye;++h){const f=Sc(lz.get(),tye[h],s);Yt(r[h],f[0]/f[3],f[1]/f[3],f[2]/f[3])}uV(i,r)}function uV(t,e){Cp(e[Ze.FAR_BOTTOM_LEFT],e[Ze.NEAR_BOTTOM_LEFT],e[Ze.NEAR_TOP_LEFT],t[xu.LEFT]),Cp(e[Ze.NEAR_BOTTOM_RIGHT],e[Ze.FAR_BOTTOM_RIGHT],e[Ze.FAR_TOP_RIGHT],t[xu.RIGHT]),Cp(e[Ze.FAR_BOTTOM_LEFT],e[Ze.FAR_BOTTOM_RIGHT],e[Ze.NEAR_BOTTOM_RIGHT],t[xu.BOTTOM]),Cp(e[Ze.NEAR_TOP_LEFT],e[Ze.NEAR_TOP_RIGHT],e[Ze.FAR_TOP_RIGHT],t[xu.TOP]),Cp(e[Ze.NEAR_BOTTOM_LEFT],e[Ze.NEAR_BOTTOM_RIGHT],e[Ze.NEAR_TOP_RIGHT],t[xu.NEAR]),Cp(e[Ze.FAR_BOTTOM_RIGHT],e[Ze.FAR_BOTTOM_LEFT],e[Ze.FAR_TOP_LEFT],t[xu.FAR])}function Z1e(t,e){for(let i=0;i<Yb;i++){const r=t[i];if(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=e[3])return!1}return!0}function Y1e(t,e){return cV(t,W1e(e,pV.get()))}function X1e(t,e,i){return cV(t,J1e(e,i,pV.get()))}function hV(t,e){for(let i=0;i<Yb;i++)if(NM(t[i],e)>0)return!1;return!0}function cV(t,e){for(let i=0;i<Yb;i++)if(!t0e(t[i],e))return!1;return!0}var xu,Ze;(function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.TOP=3]="TOP",t[t.NEAR=4]="NEAR",t[t.FAR=5]="FAR"})(xu||(xu={})),function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(Ze||(Ze={}));const Q1e={bottom:[Ze.FAR_BOTTOM_RIGHT,Ze.NEAR_BOTTOM_RIGHT,Ze.NEAR_BOTTOM_LEFT,Ze.FAR_BOTTOM_LEFT],near:[Ze.NEAR_BOTTOM_LEFT,Ze.NEAR_BOTTOM_RIGHT,Ze.NEAR_TOP_RIGHT,Ze.NEAR_TOP_LEFT],far:[Ze.FAR_BOTTOM_RIGHT,Ze.FAR_BOTTOM_LEFT,Ze.FAR_TOP_LEFT,Ze.FAR_TOP_RIGHT],right:[Ze.NEAR_BOTTOM_RIGHT,Ze.FAR_BOTTOM_RIGHT,Ze.FAR_TOP_RIGHT,Ze.NEAR_TOP_RIGHT],left:[Ze.FAR_BOTTOM_LEFT,Ze.NEAR_BOTTOM_LEFT,Ze.NEAR_TOP_LEFT,Ze.FAR_TOP_LEFT],top:[Ze.FAR_TOP_LEFT,Ze.NEAR_TOP_LEFT,Ze.NEAR_TOP_RIGHT,Ze.FAR_TOP_RIGHT]},Yb=6,eye=8,tye=[hr(-1,-1,-1,1),hr(1,-1,-1,1),hr(1,1,-1,1),hr(-1,1,-1,1),hr(-1,-1,1,1),hr(1,-1,1,1),hr(1,1,1,1),hr(-1,1,1,1)],pV=new wp(Zb),iye=aV();let P6=class{get planes(){return this.frustum}get points(){return this._points}get mutablePoints(){return this._points}get direction(){return this._direction}constructor(e){this.renderCoordsHelper=e,this.frustum=oV(),this._points=aV(),this.lines=new Array(12),this._origin=we(),this._direction=we(),this._altitude=null;for(let i=0;i<12;i++)this.lines[i]={origin:null,direction:we(),endpoint:null}}update(e){lV(e.viewMatrix,e.projectionMatrix,this.frustum,this._points),We(this._origin,e.eye),We(this._direction,e.viewForward),this._altitude=this.renderCoordsHelper.getAltitude(this._origin),this._updateLines()}updatePoints(e){for(let i=0;i<this._points.length;i++)We(this._points[i],e[i]);uV(this.frustum,this._points),this._updateLines()}get altitude(){return this._altitude}intersectsSphere(e){return Z1e(this.frustum,e)}intersectsRay(e){return Y1e(this.frustum,e)}intersectsLineSegment(e,i){return X1e(this.frustum,e,i)}intersectsPoint(e){return hV(this.frustum,e)}_updateLines(){const e=this._points;for(let i=0;i<4;i++){const r=i+4;Y_(this.lines[i],e[i],e[r]),Y_(this.lines[i+4],e[i],i===3?e[0]:e[i+1]),Y_(this.lines[i+8],e[r],i===3?e[4]:e[r+1])}}};function Y_(t,e,i){t.origin=e,t.endpoint=i,im(t.direction,e,i)}P6.planePointIndices=Q1e,P6.nearFarLineIndices=[[Ze.NEAR_BOTTOM_LEFT,Ze.FAR_BOTTOM_LEFT],[Ze.NEAR_BOTTOM_RIGHT,Ze.FAR_BOTTOM_RIGHT],[Ze.NEAR_TOP_RIGHT,Ze.FAR_TOP_RIGHT],[Ze.NEAR_TOP_LEFT,Ze.FAR_TOP_LEFT]];var Mi;(function(t){t.Ready="ready",t.Rejected="rejected",t.Running="running",t.Stopped="stopped",t.Finished="finished"})(Mi||(Mi={}));let Su=class extends Oe{constructor(e){super(e),this.state=Mi.Ready}get active(){return this.state===Mi.Running}get isInteractive(){return!1}get canStop(){return!1}stopController(){return!!this.canStop&&(this.state=Mi.Stopped,!0)}finishController(){this.state=Mi.Finished}get steppingFinished(){return!1}};v([x({constructOnly:!0})],Su.prototype,"view",void 0),v([x({readOnly:!0})],Su.prototype,"active",null),v([x()],Su.prototype,"state",void 0),v([x({readOnly:!0})],Su.prototype,"isInteractive",null),Su=v([B("esri.views.3d.state.controllers.CameraController")],Su);let hu=class extends C2{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,i)=>this._dfd={resolve:e,reject:i}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new ne("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,i){i||(i=dl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};v([x({readOnly:!0})],hu.prototype,"done",null),v([x({readOnly:!0,type:String})],hu.prototype,"state",void 0),v([x()],hu.prototype,"target",void 0),hu=v([B("esri.views.ViewAnimation")],hu),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(hu||(hu={}));const v0=hu,Cn=we(),hn=we(),Pl=we(),gr=we(),gh=we(),rye=we(),kn={upward:fr(0,0,1),forward:fr(0,1,0),sideway:fr(1,0,0)},bA=J0();let _A=class{constructor(e=tr.Global){this.viewingMode=e,this.center=we(),this.pitch=0,this.yaw=0,this.distance=0,this.lookAtDirection=xs(kn.forward)}pixelsPerPanAtZoom(e){return this.size/2/(this._zoomToPanScale*e)}zoomAtPixelsPerPan(e){return this.size/2/(this._zoomToPanScale*e)}pixelsPerRotateAtZoom(){const e=Math.max(Math.cos(Math.abs(this.pitch)),.5);return this.size/2/e}compareTo(e,i){if(i||(i={pan:0,rotate:0,sourceZoom:0,targetZoom:0}),this.viewingMode===tr.Global){const h=(gt(this.center)+gt(e.center))/2;i.pan=H_(this.center,e.center)*h}else i.pan=mo(this.center,e.center);let r=Math.abs(e.yaw-this.yaw);r>=Math.PI&&(r=2*Math.PI-r);const s=Math.abs(e.pitch-this.pitch);return i.rotate=Math.max(r,s),i.sourceZoom=this.distance,i.targetZoom=e.distance,i}interpolate(e,i,r){this.viewingMode===tr.Global?Wde(e.center,i.center,r.pan,this.center):DS(this.center,e.center,i.center,r.pan),this.distance=isFinite(i.distance)?ao(e.distance,i.distance,r.zoom):e.distance,this.pitch=ao(e.pitch,i.pitch,r.rotate);let s=e.yaw;const h=i.yaw;Math.abs(h-s)>=Math.PI&&(s+=2*(s<h?1:-1)*Math.PI),this.yaw=ao(s,h,r.rotate)}copyFrom(e){We(this.center,e.center),this.pitch=e.pitch,this.yaw=e.yaw,this.distance=e.distance,We(this.lookAtDirection,e.lookAtDirection),this.size=e.size,this.copyFromCommon(e),this.viewingMode=e.viewingMode}copyFromRenderCamera(e){const i=this._lookAtOrientation(e.center,bA);We(this.center,e.center),mt(gr,e.center,e.eye),Ed(gr,gr,i),Ed(gh,e.up,i),this.distance=gt(gr),this.distance!==0&&(gr[0]/=this.distance,gr[1]/=this.distance,gr[2]/=this.distance),this.pitch=this._eyeUpToPitch(gr),this.yaw=this._eyeUpToYaw(gr,gh),this.size=Math.sqrt(e.width*e.width+e.height*e.height),this.copyFromCommon(e)}copyFromCommon(e){this.fov=e.fov,this._zoomToPanScale=Math.atan(.5*this.fov)}copyToRenderCamera(e){const i=this._lookAtOrientation(this.center,bA);WM(i,i),this._axisAngleVec3(kn.sideway,this.pitch-Math.PI/2,kn.forward,gr),this._axisAngleVec3(kn.upward,this.yaw,gr),this._axisAngleVec3(kn.sideway,this.pitch-Math.PI/2,kn.upward,gh),this._axisAngleVec3(kn.upward,this.yaw,gh),Qe(gr,gr,this.distance),Ed(gr,gr,i),Ed(gh,gh,i),e.center=this.center,e.eye=mt(gr,this.center,gr),e.up=gh}_axisAngleVec3(e,i,r,s=r){const h=Math.cos(i),f=Math.sin(i);return Qe(Cn,r,h),ki(hn,e,r),Qe(hn,hn,f),Qe(Pl,e,(1-h)*at(e,r)),Gt(s,Gt(s,Cn,hn),Pl)}_lookAtOrientation(e,i=J0()){return this._upAtLookAt(e,Pl),ki(Cn,this.lookAtDirection,Pl),vi(Cn,Cn),Cn[0]===0&&Cn[1]===0&&Cn[2]===0&&We(Cn,kn.sideway),ki(hn,Pl,Cn),vi(hn,hn),i[0]=Cn[0],i[1]=hn[0],i[2]=Pl[0],i[3]=Cn[1],i[4]=hn[1],i[5]=Pl[1],i[6]=Cn[2],i[7]=hn[2],i[8]=Pl[2],i}_upAtLookAt(e,i){return this.viewingMode===tr.Local?We(i,kn.upward):vi(i,e)}_eyeUpToPitch(e){return Math.PI-H_(kn.upward,e)}_eyeUpToYaw(e,i){const r=rye;return Math.abs(i[2])<.5?(We(r,i),e[2]>0&&Qe(r,r,-1)):We(r,e),ki(hn,r,kn.upward),vi(hn,hn),H_(kn.sideway,hn,kn.upward)}};function w0(t,e){return t[0]=e[0],t[1]=e[1],t}function ur(t,e,i){return t[0]=e,t[1]=i,t}function dV(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Hy(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function fV(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function yV(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function nye(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function sye(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function oye(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function aye(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function lye(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Cm(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function uye(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function km(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function Aw(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function Cw(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function mV(t){const e=t[0],i=t[1];return e*e+i*i}function gV(t,e){return t[0]=-e[0],t[1]=-e[1],t}function hye(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function R6(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function vV(t,e){return t[0]*e[0]+t[1]*e[1]}function wV(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function cye(t,e,i,r){const s=e[0],h=e[1];return t[0]=s+r*(i[0]-s),t[1]=h+r*(i[1]-h),t}function pye(t,e){e=e||1;const i=2*tm()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function dye(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function Yo(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function fye(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function yye(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function mye(t,e,i,r){const s=e[0]-i[0],h=e[1]-i[1],f=Math.sin(r),m=Math.cos(r);return t[0]=s*m-h*f+i[0],t[1]=s*f+h*m+i[1],t}function gye(t,e){const i=t[0],r=t[1],s=e[0],h=e[1];let f=i*i+r*r;f>0&&(f=1/Math.sqrt(f));let m=s*s+h*h;m>0&&(m=1/Math.sqrt(m));const b=(i*s+r*h)*f*m;return b>1?0:b<-1?Math.PI:Math.acos(b)}function vye(t){return"vec2("+t[0]+", "+t[1]+")"}function bV(t,e){return t[0]===e[0]&&t[1]===e[1]}function wye(t,e){const i=t[0],r=t[1],s=e[0],h=e[1],f=$n();return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))}function bye(t,e,i,r,s){let h=e[0]-i[0],f=e[1]-i[1];const m=(r[0]*h+r[1]*f)*(s-1);return h=r[0]*m,f=r[1]*m,t[0]=e[0]+h,t[1]=e[1]+f,t}const _ye=Cw,a$=Hy,xye=fV,Sye=yV,Mye=km,$ye=Aw,Tye=mV;Object.freeze(Object.defineProperty({__proto__:null,add:dV,angle:gye,ceil:nye,copy:w0,cross:wV,dist:Mye,distance:km,div:Sye,divide:yV,dot:vV,equals:wye,exactEquals:bV,floor:sye,inverse:hye,len:_ye,length:Cw,lerp:cye,max:aye,min:oye,mul:xye,multiply:fV,negate:gV,normalize:R6,projectAndScale:bye,random:pye,rotate:mye,round:lye,scale:Cm,scaleAndAdd:uye,set:ur,sqrDist:$ye,sqrLen:Tye,squaredDistance:Aw,squaredLength:mV,str:vye,sub:a$,subtract:Hy,transformMat2:dye,transformMat2d:Yo,transformMat3:fye,transformMat4:yye},Symbol.toStringTag,{value:"Module"}));function Iye(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/e)}function Eye(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/i)}function Aye(t,e,i){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function Cye(t,e,i){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}var F6;let Ct=F6=class extends Oe{constructor(t={}){super(t),this._center=we(),this._up=we(),this._viewUp=we(),this._viewForward=we(),this._viewRight=we(),this._ray=bn(),this._viewport=hr(0,0,1,1),this._padding=hr(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=K0(1,1e3),this._viewDirty=!0,this._viewMatrix=Bi(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=Bi(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=Bi(),this._frustumDirty=!0,this._frustum=oV(),this._fullViewport=ca(),this._pixelRatio=1,this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return mt(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){zu(this._viewMatrix,t),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(this.pixelRatio===1)return this._viewport;const t=zS(ca(),this._viewport,1/this.pixelRatio),e=this._get("screenViewport");return e&&US(t,e)?e:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[yt.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[yt.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[yt.RIGHT]+this._padding[yt.LEFT]}set fullWidth(t){this.width=t-(this._padding[yt.RIGHT]+this._padding[yt.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[yt.TOP]+this._padding[yt.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[yt.TOP]+this._padding[yt.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[yt.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[yt.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){V1(this._padding,t)||(this._viewport[0]+=t[yt.LEFT]-this._padding[yt.LEFT],this._viewport[1]+=t[yt.BOTTOM]-this._padding[yt.BOTTOM],this._viewport[2]-=t[yt.RIGHT]+t[yt.LEFT]-(this._padding[yt.RIGHT]+this._padding[yt.LEFT]),this._viewport[3]-=t[yt.TOP]+t[yt.BOTTOM]-(this._padding[yt.TOP]+this._padding[yt.BOTTOM]),xc(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&(u0(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){const t=this.width,e=this.height,i=this.near*Math.tan(this.fovY/2),r=i*this._aspect,s=zR(Bi(),-r*(1+2*this._padding[yt.LEFT]/t),r*(1+2*this._padding[yt.RIGHT]/t),-i*(1+2*this._padding[yt.BOTTOM]/e),i*(1+2*this._padding[yt.TOP]/e),this.near,this.far),h=this._get("projectionMatrix");return h&&qR(h,s)?h:s}get inverseProjectionMatrix(){return Vu(Bi(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||Bi()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return Aye(this._fov,this.width,this.height)}set fovX(t){this._fov=Iye(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return Cye(this._fov,this.width,this.height)}set fovY(t){this._fov=Eye(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return mo(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&(Vu(this._viewInverseTransposeMatrix,this.viewMatrix),Yn(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const e=2*t-1;return 2*this.near*this.far/(this.far+this.near-e*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return this.relativeElevation!=null&&this.relativeElevation>=0}copyFrom(t){We(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,xc(this._viewport,t.viewport),this.notifyChange("_viewport"),xc(this._padding,t.padding),this.notifyChange("_padding"),w0(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.relativeElevation=t.relativeElevation;const e=t;return this._viewDirty=e._viewDirty,this._viewDirty||(zu(this._viewMatrix,t.viewMatrix),We(this._viewRight,t.viewRight),We(this._viewUp,t.viewUp),We(this._viewForward,t.viewForward)),this._viewProjectionDirty=!0,this._frustumDirty=e._frustumDirty,this._frustumDirty||(K1e(this._frustum,t.frustum),this._frustumDirty=!1),e._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(zu(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),xc(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up}clone(){return new F6().copyFrom(this)}equals(t){return Ou(this.eye,t.eye)&&Ou(this.center,t.center)&&Ou(this.up,t.up)&&V1(this._viewport,t.viewport)&&V1(this._padding,t.padding)&&bV(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation}almostEquals(t){if(Math.abs(t.fov-this._fov)>=.001||D2(t.padding,this._padding)>=.5||D2(this.screenViewport,t.screenViewport)>=.5)return!1;e5(vr,t.eye,t.center),e5(X_,this.eye,this.center);const e=at(vr,X_),i=t5(vr),r=t5(X_),s=5e-4;return e*e>=(1-1e-10)*i*r&&UO(t.eye,this.eye)<Math.max(i,r)*s*s}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs(oy(this.viewForward,mt(vr,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,e){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(e||1)))}getScreenCenter(t=pZ()){return t[0]=(this.padding[yt.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[yt.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,e=.5,i=.5){return t[0]=this.padding[yt.LEFT]+this.width*e,t[1]=this.padding[yt.BOTTOM]+this.height*i,t[2]=.5,t}setGLViewport(t){const e=this.viewport,i=this.padding;t.setViewport(e[0]-i[3],e[1]-i[2],e[2]+i[1]+i[3],e[3]+i[0]+i[2])}applyProjection(t,e){t!==et&&We(et,t),et[3]=1,Sc(et,et,this.projectionMatrix);const i=Math.abs(et[3]);Qe(et,et,1/i);const r=this.fullViewport;e[0]=ao(0,r[0]+r[2],.5+.5*et[0]),e[1]=ao(0,r[1]+r[3],.5+.5*et[1]),e[2]=.5*(et[2]+1),e[3]=i}unapplyProjection(t,e){const i=this.fullViewport;et[0]=(t[0]/(i[0]+i[2])*2-1)*t[3],et[1]=(t[1]/(i[1]+i[3])*2-1)*t[3],et[2]=(2*t[2]-1)*t[3],et[3]=t[3],this.inverseProjectionMatrix!=null&&(Sc(et,et,this.inverseProjectionMatrix),e[0]=et[0],e[1]=et[1],e[2]=et[2])}projectToScreen(t,e){return this.projectToRenderScreen(t,Q_),this.renderToScreen(Q_,e),e}projectToRenderScreen(t,e){if(et[0]=t[0],et[1]=t[1],et[2]=t[2],et[3]=1,Sc(et,et,this.viewProjectionMatrix),et[3]===0)return null;Qe(et,et,1/Math.abs(et[3]));const i=this.fullViewport;return"x"in e?(e.x=ao(0,i[0]+i[2],.5+.5*et[0]),e.y=ao(0,i[1]+i[3],.5+.5*et[1])):(e[0]=ao(0,i[0]+i[2],.5+.5*et[0]),e[1]=ao(0,i[1]+i[3],.5+.5*et[1]),e.length>2&&(e[2]=.5*(et[2]+1))),e}unprojectFromScreen(t,e){return this.unprojectFromRenderScreen(this.screenToRender(t,Q_),e)}unprojectFromRenderScreen(t,e){if(u0(jg,this.projectionMatrix,this.viewMatrix),!Vu(jg,jg))return null;const i=this.fullViewport;return et[0]=2*(t[0]-i[0])/i[2]-1,et[1]=2*(t[1]-i[1])/i[3]-1,et[2]=2*t[2]-1,et[3]=1,Sc(et,et,jg),et[3]===0?null:(e[0]=et[0]/et[3],e[1]=et[1]/et[3],e[2]=et[2]/et[3],e)}constrainWindowSize(t,e,i,r){const s=t*this.pixelRatio,h=e*this.pixelRatio,f=Math.max(s-i/2,0),m=Math.max(this.fullHeight-h-r/2,0),b=-Math.min(s-i/2,0),S=-Math.min(this.fullHeight-h-r/2,0);return[f,m,i-b- -Math.min(this.fullWidth-s-i/2,0),r-S- -Math.min(h-r/2,0)]}computeUp(t){t===tr.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,e){const i=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return e[0]=i,e[1]=r,e}renderToScreen(t,e){const i=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;e[0]=i,e[1]=r}_computeUpGlobal(){mt(vr,this.center,this.eye);const t=gt(this.center);t<1?(Yt(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs(at(vr,this.center))>.9999*gt(vr)*t||(ki(this._up,vr,this.center),ki(this._up,this._up,vr),vi(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){im(vr,this.eye,this.center),Math.abs(vr[2])<=.9999&&(Qe(vr,vr,vr[2]),Yt(this._up,-vr[0],-vr[1],1-vr[2]),vi(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,e,i=""){typeof t[0]=="number"&&isFinite(t[0])&&typeof t[1]=="number"&&isFinite(t[1])&&typeof t[2]=="number"&&isFinite(t[2])?Ou(t,e)||(We(e,t),this._markViewDirty(),i.length&&this.notifyChange(i)):fe.getLogger("esri.views.3d.webgl-engine.lib.Camera").warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&(lV(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(VR(this._viewMatrix,this.eye,this.center,this.up),Yt(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),Yt(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),Yt(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};v([x()],Ct.prototype,"_center",void 0),v([x()],Ct.prototype,"_up",void 0),v([x()],Ct.prototype,"_viewport",void 0),v([x()],Ct.prototype,"_padding",void 0),v([x()],Ct.prototype,"_fov",void 0),v([x()],Ct.prototype,"_nearFar",void 0),v([x()],Ct.prototype,"_pixelRatio",void 0),v([x()],Ct.prototype,"pixelRatio",null),v([x()],Ct.prototype,"eye",null),v([x()],Ct.prototype,"center",null),v([x()],Ct.prototype,"up",null),v([x({readOnly:!0})],Ct.prototype,"nearFar",null),v([x()],Ct.prototype,"near",null),v([x()],Ct.prototype,"far",null),v([x()],Ct.prototype,"viewport",null),v([x({readOnly:!0})],Ct.prototype,"screenViewport",null),v([x()],Ct.prototype,"x",null),v([x()],Ct.prototype,"y",null),v([x()],Ct.prototype,"width",null),v([x()],Ct.prototype,"height",null),v([x()],Ct.prototype,"fullWidth",null),v([x()],Ct.prototype,"fullHeight",null),v([x({readOnly:!0})],Ct.prototype,"_aspect",null),v([x()],Ct.prototype,"padding",null),v([x({readOnly:!0})],Ct.prototype,"projectionMatrix",null),v([x({readOnly:!0})],Ct.prototype,"inverseProjectionMatrix",null),v([x()],Ct.prototype,"fov",null),v([x()],Ct.prototype,"fovX",null),v([x()],Ct.prototype,"fovY",null),Ct=F6=v([B("esri.views.3d.webgl-engine.lib.Camera")],Ct);const et=ca(),jg=Bi(),vr=we(),X_=we(),Q_=dZ();var yt;(function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"})(yt||(yt={}));const kw={desiredScreenFlow:2,minDuration:500,maxDuration:8e3};let kye=class _V{constructor(e){this._createCamera=e,this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0},this.settings={desiredScreenFlow:kw.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new _V(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.compared=this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow!=null?r.desiredScreenFlow:kw.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>1e-9}get hasRotate(){return this.compared.rotate>1e-9}},Oye=class{constructor(){this.segments=[]}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,s=0;const h=this.definition;for(let f=0;f<this.segments.length;f++){const m=this.segments[f],b=m.definition;if(e<=m.time||f===this.segments.length-1){if(i=this.segmentInterpolateComponentsAt(m,m.time===0?0:e/m.time,i),h.hasPan&&!isNaN(i.pan)&&isFinite(h.compared.pan)?i.pan=(r+b.compared.pan*i.pan)/h.compared.pan:i.pan=1,h.hasRotate&&!isNaN(i.rotate)&&isFinite(h.compared.rotate)?i.rotate=(s+b.compared.rotate*i.rotate)/h.compared.rotate:i.rotate=1,h.hasZoom&&!isNaN(i.zoom)&&isFinite(b.compared.targetZoom)){const S=i.zoom*(b.compared.targetZoom-b.compared.sourceZoom)+b.compared.sourceZoom,I=this.segments[0].definition.compared.sourceZoom,A=this.segments[this.segments.length-1].definition.compared.targetZoom;i.zoom=(S-I)/(A-I)}else i.zoom=1;return i}e-=m.time,r+=b.compared.pan,s+=b.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){return e.interpolateComponentsAt(i,r)}},e9=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const h=(e.source.pixelsPerRotateAtZoom(r)+e.target.pixelsPerRotateAtZoom(s))/2;this._rotatePixels=i.rotate*h}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:h}=this.definition;let f=0,m=0;r&&(s&&(f=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),h&&(m=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const b=this.definition.desiredPixelFlow;if(r&&s&&h){const S=f+m+f*m;this._zoomPixelFlow=f*m/S*b,this._panPixelFlow=m/S*b,this._rotatePixelFlow=f/S*b}else if(r&&s){const S=1+f;this._zoomPixelFlow=f/S*b,this._panPixelFlow=1/S*b}else if(r&&h){const S=1+m;this._zoomPixelFlow=m/S*b,this._rotatePixelFlow=1/S*b}else if(s&&h){const S=this._panPixelsAtSource/this._rotatePixels,I=1+S;this._panPixelFlow=S/I*b,this._rotatePixelFlow=1/I*b}else s?this._panPixelFlow=b:r?this._zoomPixelFlow=b:h&&(this._rotatePixelFlow=b);this._time=h?this.rotateTime:r?this.zoomTime:s?this.panTime:0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}return 0}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1);const r=this._interpolateComponentsZoom(e),s=this._interpolateComponentsPan(e),h=this._interpolateComponentsRotate(e);return i?(i.zoom=r,i.pan=s,i.rotate=h):i={zoom:r,pan:s,rotate:h},i}};function Pye(t,e,i){const r=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function Rye(t,e,i){const r=1/e,s=Math.log(t.compared.sourceZoom*r),h=1/t.desiredPixelFlow,f=1/Math.LN2,m=e-t.compared.sourceZoom,b=1/m,S=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(m))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*h*f*b*S-t.halfWindowSize*s*h*f*b+t.halfWindowSize*s*h*f*S/(m*m)}function Fye(t,e,i){const r=e-t.compared.sourceZoom,s=1/r,h=1/e,f=Math.log(t.compared.sourceZoom*h),m=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m+2*s*f+2*h-2*f*m/(r*r)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Nye(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function Lye(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function jye(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Dye(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function zye(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function Vye(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function Gye(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function qye(t,e,i){const r=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,h=1/Math.LN2,f=-e+t.compared.targetZoom,m=1/f,b=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*s*h*m+t.halfWindowSize*r*s*h*b/(f*f)+t.halfWindowSize*s*h*m*b/e}function Uye(t,e,i){const r=e-t.compared.targetZoom,s=1/r,h=1/e,f=Math.log(e/t.compared.targetZoom),m=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*h*m-2*s*f+2*h+2*f*m/(r*r)-m/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Bye(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function Hye(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function Wye(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Jye(t){const e=Math.LN2*t.compared.pan,i=t.compared.sourceZoom-t.compared.targetZoom,r=t.halfWindowPanAtZoom(i),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*r);return t.compared.sourceZoom<=t.compared.targetZoom?s*(e-r):s*(e+r)}function Kye(t,e){let i=Zye(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=r.ascensionFactor===0,h=r.descensionFactor===0,f=s?Nye:Pye,m=s?Lye:Rye,b=s?jye:Fye,S=h?Bye:Gye,I=h?Hye:qye,A=h?Wye:Uye,O=te=>f(t,te,r)+Dye(t,te,r)+S(t,te,r),R=te=>m(t,te,r)+zye(t,te,r)+I(t,te,r),L=te=>b(t,te,r)+Vye(t,te,r)+A(t,te,r);let z=O(i);const j=Jye(t);let H;const Y=e.maximumIterations||20,X=e.maximumDistance!=null?e.maximumDistance:1/0;for(H=0;H<Y;H++){const oe=(R(i)+1e-6)/L(i);if(isNaN(oe)||i>=X&&oe<0){if(!isFinite(X))return null;i=X,z=O(i);break}if(i-=oe,i<t.compared.sourceZoom||i<t.compared.targetZoom)return null;const le=O(i);if(Math.abs(le-z)/z<=.005)break;z=le}return z>j*(1-.3)||i<t.compared.sourceZoom||i<t.compared.targetZoom?null:i}function Zye(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let Yye=class extends Oye{constructor(e,i){super(),this._preallocSegments=[new e9,new e9,new e9],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();let r=null;i&&i.apex&&(r=Kye(e,i.apex)),this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r==null?this._updateWithoutApex():this._updateWithApex(r,i==null?void 0:i.apex)}segmentInterpolateComponentsAt(e,i,r){return r=e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=XM(r.zoom):e===this._descensionSegment&&(r.zoom=Kb(r.zoom)),r}_updateWithApex(e,i){const[r,s,h]=this._preallocSegments,f=(i==null?void 0:i.ascensionFactor)??.5,m=Math.min(1-f,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),b=1-f-m;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*f,r.definition.compared.rotate=this.definition.compared.rotate*f,r.update(),this._ascensionSegment=r,this.segments.push(r),b>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*b,s.definition.compared.rotate=this.definition.compared.rotate*b,s.update(),this.segments.push(s)),h.definition?h.definition.copyFrom(this.definition):h.definition=this.definition.clone(),h.definition.compared.sourceZoom=e,h.definition.compared.pan=this.definition.compared.pan*m,h.definition.compared.rotate=this.definition.compared.rotate*m,h.update(),this._descensionSegment=h,this.segments.push(h)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const Xye={zoom:0,pan:0,rotate:0};let Qye=class{get time(){return this._time}constructor(e){this._createCamera=e,this._time=0,this.definition=new kye(e),this.path=new Yye}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(sk(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?nV:n$)}cameraAt(e,i){i=i||this._createCamera(),e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,Xye);return i.interpolate(this.definition.source,this.definition.target,r),i}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1;i.duration!=null?e=i.duration:i.speedFactor!=null&&(e=e/r);const s=i.minDuration!=null?i.minDuration:kw.minDuration/r,h=i.maxDuration!=null?i.maxDuration:kw.maxDuration/r;return Math.min(Math.max(s,e),h)}};const eme=we();let tme=class{get finished(){return this.currentTime>=this._animation.time}get time(){return this._animation.time}constructor(e){this.currentTime=0,this._animation=new Qye(()=>new _A(e)),this._current=new _A(e)}update(e,i,r){const s=this._animation.definition.source,h=this._animation.definition.target,f=mt(eme,i.center,e.center),m=gt(f);m>=1e-5?(f[0]/=m,f[1]/=m,f[2]/=m):(f[0]=0,f[1]=1,f[0]=0),We(s.lookAtDirection,f),We(h.lookAtDirection,f),s.copyFromRenderCamera(e),h.copyFromRenderCamera(i),this._current.copyFrom(s),this._animation.update(s,h,r),this.currentTime=0,e.almostEquals(i)&&(this.currentTime=this._animation.time)}cameraAt(e,i){return this._animation.cameraAt(e,this._current),i=i||new Ct,this._current.copyToRenderCamera(i),i}step(e,i){return this.finished||(this.currentTime=this.currentTime+sk(e),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,i)}},N6=class extends Su{constructor(){super(...arguments),this._asyncResult=null}get canStop(){return!0}set asyncResult(e){this._asyncResult&&(this._asyncResult.reject(Xt()),this._asyncResult=null),this.state===Mi.Finished||this.state===Mi.Stopped?(jw(e),this.state===Mi.Finished?e.resolve():e.reject(Xt())):this._asyncResult=e}get asyncResult(){return this._asyncResult}onControllerStart(){this.state=Mi.Running,this.viewAnimation!=null&&this.viewAnimation.when(()=>this.updateStateFromViewAnimation(),()=>this.updateStateFromViewAnimation())}updateStateFromViewAnimation(){this.viewAnimation==null||this.state!==Mi.Ready&&this.state!==Mi.Running||(this.viewAnimation.state===v0.State.FINISHED?this.finish():this.viewAnimation.state===v0.State.STOPPED&&(this.state=Mi.Stopped))}onControllerEnd(){this.viewAnimation==null||this.viewAnimation.done||(this.state===Mi.Finished?this.viewAnimation.finish():this.state===Mi.Stopped&&this.viewAnimation.stop()),this._asyncResult&&(this.state===Mi.Finished?this._asyncResult.resolve():this._asyncResult.reject(Xt()))}finish(){this.finishController()}};N6=v([B("esri.views.3d.state.controllers.AnimationController")],N6);let Lc=class extends N6{get intersectionHelper(){return this.view.sceneIntersectionHelper}constructor(e){super(e),this.mode="interaction",this._hasTarget=!1}initialize(){this.animation=new tme(this.view.state.viewingMode),this.viewAnimation=this.mode==="interaction"?null:new v0}get isInteractive(){return this.mode==="interaction"}begin(e,i){this._hasTarget=!0;const r=this.animationSettings(i);Dg.copyFrom(this.view.state.camera);const s=Kz(this.view.state.viewingMode);this.intersectionHelper.intersectRay(Dg.ray,s,xA)&&(Dg.center=xA),this.animation.update(Dg,e,r),this.animation.finished&&this.finish()}finish(){this.animation.currentTime=this.animation.time,super.finish()}get steppingFinished(){return this._hasTarget&&this.animation.finished}stepController(e,i){this._hasTarget&&this.animation.step(e,i)}onControllerEnd(e){this._hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,e),this.animation.currentTime=this.animation.time),super.onControllerEnd(e)}animationSettings(e={}){return{apex:{maximumDistance:this.view.state.constraints.clampAltitude(1/0)/6,ascensionFactor:void 0,descensionFactor:void 0},...e,easing:typeof e.easing=="string"?P1e[e.easing]:e.easing}}};v([x({constructOnly:!0})],Lc.prototype,"mode",void 0),v([x({readOnly:!0})],Lc.prototype,"isInteractive",null),Lc=v([B("esri.views.3d.state.controllers.PointToPointAnimationController")],Lc);const Dg=new Ct,xA=we();let ly=class extends Su{set desiredCamera(e){this._set("desiredCamera",e.clone())}constructor(e){super(e)}get canStop(){return!0}get constraintEnabled(){return this.view.state.constraints.collision.enabled}onControllerStart(){this.state=Mi.Running,this.addHandles(this.view.basemapTerrain.on("elevation-change",e=>this._handleElevationChangeEvent(e))),this._applyCorrection()}onControllerEnd(){this.removeAllHandles()}stepController(){}_handleElevationChangeEvent(e){(e.spatialReference==null||Zz(this.view,this.desiredCamera,e.extent,e.spatialReference))&&this._applyCorrection()}_applyCorrection(){this.view.state.updateCamera(e=>{e.copyViewFrom(this.desiredCamera),Jb(this.view,e,ws.EYE_AND_CENTER)||this.constraintEnabled||(this.state=Mi.Stopped)})}};v([x({constructOnly:!0})],ly.prototype,"desiredCamera",null),ly=v([B("esri.views.3d.state.controllers.SurfaceCollisionCorrectionController")],ly);const ime=we(),zg=we();function xV(){return{direction:we(),up:we()}}function SV(t,e,i,r,s){let h=vi(ime,t),f=at(h,r);const m=f>0;f=Math.abs(f),f>.99&&(f=Math.abs(at(e,r)),f<.99?(We(h,e),m&&Qe(h,h,-1)):h=null);let b=0;if(h){Qe(zg,r,at(r,h)),mt(h,h,zg);const I=at(h,s)/(gt(h)*gt(s));ki(zg,h,s),b=(at(zg,r)>0?1:-1)*Ms(aa(I))}const S=Ms(aa(-at(r,t)/gt(t)));return i?(i.heading=b,i.tilt=S,i):{heading:b,tilt:S}}const MV=fr(0,1,0),$V=fr(0,0,1),Mf=Bi(),_a=we(),xa=we();function TV(t,e,i,r=xV()){const{direction:s,up:h}=r;return jR(Mf,-Hi(e)),NR(Mf,Mf,Hi(i)),br(s,$V,Mf),Qe(s,s,-1),br(h,MV,Mf),r}function rme(t,e,i,r){return SV(e,i,r,$V,MV)}function nme(t,e,i,r){const s=TV(t,i,r),h=we();return Qe(h,s.direction,-e),Gt(h,h,t),{up:s.up,eye:h,heading:i,tilt:r}}function sme(t){return Ms(t)}function ome(t){return Hi(t)}function IV(t,e,i,r,s){const h=t.renderSpatialReference,f=t.map&&t.spatialReference||e.spatialReference;return Zu(e,_a,h),Zu(e,xa,h),_a[0]-=i/2,xa[0]+=i/2,_a[1]-=r/2,xa[1]+=r/2,h0(_a,h,_a,f),h0(xa,h,xa,f),s?(s.xmin=_a[0],s.ymin=_a[1],s.xmax=xa[0],s.ymax=xa[1],s.spatialReference=f):s=new At(_a[0],_a[1],xa[0],xa[1],f),s}const ame=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:rme,eyeForCenterWithHeadingTilt:nme,eyeTiltToLookAtTilt:ome,headingTiltToDirectionUp:TV,lookAtTiltToEyeTilt:sme,toExtent:IV},Symbol.toStringTag,{value:"Module"}));function SA(t,e,i){if(e.longitude==null||e.latitude==null||i.longitude==null||i.latitude==null)throw new Error("Invalid points: no lon/lat");return lme(t,e.longitude,e.latitude,i.longitude,i.latitude)}function lme(t,e,i,r,s){const h=Hi(i),f=Hi(s),m=h-f,b=Hi(e)-Hi(r),S=Math.sin(m/2),I=Math.sin(b/2),A=2*la(Math.sqrt(S*S+Math.cos(h)*Math.cos(f)*I*I))*t;return Math.round(1e4*A)/1e4}function ume(t,e,i){const r=e.spatialReference,s=fl(r),h=new ke(e.x,t.y,r),f=new ke(i.x,t.y,r),m=new ke(t.x,e.y,r),b=new ke(t.x,i.y,r);return{lon:SA(s.radius,h,f),lat:SA(s.radius,m,b)}}function hme(t,e,i){const r=e/i,s=Hi(t),h=Math.sin(r/2),f=Math.cos(s),m=2*la(Math.sqrt(h*h/(f*f)));return Ms(m)}const EV=fr(0,0,1),AV=vi(we(),fr(1,1,1)),cme=new L0(-180,180),$f=Bi(),Mu=we(),Pp=we();function CV(t,e,i,r=xV()){ki(Mu,t,EV),at(Mu,Mu)===0&&ki(Mu,t,AV),pm($f,-Hi(e),t),FR($f,$f,-Hi(i),Mu);const{up:s,direction:h}=r;return ki(s,Mu,t),vi(s,s),br(s,s,$f),vi(h,t),GO(h,h),br(h,h,$f),r}function pme(t,e,i,r){const s=Mu,h=Pp;return vi(s,t),ki(Pp,s,EV),at(Pp,Pp)===0&&ki(Pp,s,AV),ki(h,Pp,s),SV(e,i,r,s,h)}function dme(t,e,i,r){const s={eye:we(),up:null,tilt:r,heading:i},h=Mu;h[0]=t[0],h[1]=t[2],h[2]=-t[1];const f=e,m=Hi(i),b=Hi(r),S=Math.sin(m),I=Math.cos(m),A=Math.sin(b),O=Math.cos(b),R=gt(h);let L;if(Math.abs(b)<1e-8)L=f+R;else{const Ar=R/A,ai=la(f/Ar),xt=Math.PI-b-ai;L=Ar*Math.sin(xt)}const z=O*f,j=f*f*(A*A),H=I*I*j,Y=L-z,X=Y*Y,te=H*(H+X-h[1]*h[1]);if(te<0)return Qe(s.eye,h,L/R),s.tilt=0,Vg(s,t);const oe=Math.sqrt(te),le=h[1]*Y,ve=H+X;let xe;if(xe=I>0?-oe+le:oe+le,Math.abs(ve)<1e-8)return R<1e-8?(s.eye[0]=0,s.eye[1]=0,s.eye[2]=f):Qe(s.eye,h,L/R),s.tilt=0,t9(s.eye),Vg(s,t);s.eye[1]=xe/ve;const Fe=S*S*j,Pe=A*f,He=I*Pe*s.eye[1],ze=s.eye[1]*s.eye[1],st=1-ze,Ne=Math.sqrt(st),ii=H*ze+Fe-2*He*Ne*Y+st*X;return Math.abs(ii)<1e-8?(Qe(s.eye,h,L/R),s.tilt=0,t9(s.eye),Vg(s,t)):(s.eye[0]=(st*(L*h[0]-z*h[0])-Pe*Ne*(h[0]*s.eye[1]*I+h[2]*S))/ii,s.eye[2]=(st*(L*h[2]-z*h[2])-Pe*Ne*(h[2]*s.eye[1]*I-h[0]*S))/ii,Qe(s.eye,s.eye,L),t9(s.eye),Vg(s,t))}function t9(t){const e=t[1];t[1]=-t[2],t[2]=e}function Vg(t,e){const i=CV(e,t.heading,t.tilt);return t.up=i.up,t}function fme(t,e,i){const r=gt(e),s=Math.sqrt(i*i+r*r-2*i*r*Math.cos(Math.PI-t)),h=la(i/(s/Math.sin(t)));return Ms(t-h)}function yme(t,e,i){const r=Hi(t),s=gt(e);return la(i/(s/Math.sin(r)))+r}function kV(t,e,i,r,s){let h,f,m,b;const S=e.latitude,I=fl(t.spatialReference).radius,A=e.longitude,O=hme(S,i,I)/2;h=A-O,f=A+O;const R=Hi(S),L=(1+Math.sin(R))/(1-Math.sin(R)),z=(L+1)*Math.tan(r/I/2),j=z*z;function H(X){const te=Math.PI/2;return(X=hY.normalize(X,-te))>te&&(X=Math.PI-X),X}if(m=1.5*Math.PI-2*Math.atan(.5*(z+Math.sqrt(4*L+j))),b=m+r/I,m=H(m),b=H(b),b<m){const X=b;b=m,m=X}if(m=Math.max(Ms(m),-90),b=Math.min(Ms(b),90),f=cme.monotonic(h,f),f-h>180){const X=(f-h-180)/2;h+=X,f-=X}const Y=t.spatialReference&&t.spatialReference.isGeographic?t.spatialReference:Ye.WGS84;return s?(s.xmin=h,s.ymin=m,s.xmax=f,s.ymax=b,s.spatialReference=Y):s=new At(h,m,f,b,Y),t.spatialReference&&t.spatialReference.isWebMercator&&ea(s,!1,s),s}const mme=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:pme,eyeForCenterWithHeadingTilt:dme,eyeTiltToLookAtTilt:yme,headingTiltToDirectionUp:CV,lookAtTiltToEyeTilt:fme,toExtent:kV},Symbol.toStringTag,{value:"Module"}));function gme(t){return t.type==="point"}function vme(t){return"array"in t}function Xb(t,e,i="ground"){if(gme(e))return t.getElevation(e.x,e.y,e.z||0,e.spatialReference,i);if(vme(e)){let r=e.offset;return t.getElevation(e.array[r++],e.array[r++],e.array[r]||0,e.spatialReference??t.spatialReference,i)}return t.getElevation(e[0],e[1],e[2]||0,t.spatialReference,i)}function wme(t,e){return t!=null&&(e==null||(e===tr.Local?!t.isGeographic||t.isWGS84||t.wkid===gs.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===gs.CGCS2000||t.wkid===gs.GCSMARS2000||t.wkid===gs.GCSMARS2000_SPHERE||t.wkid===gs.GCSMOON2000))}const OV=fe.getLogger("esri.views.3d.support.cameraUtils"),PV=39.37,RV=96,L6=1,bme=8,_me=5,FV=1,MA=we(),xme={heading:0,tilt:0},Eu=new ke,Sme=new L0(-20037508342788905e-9,20037508342788905e-9),Mme=new L0(-180,180);var dr;function Om(t){return t.spatialReference||Ye.WGS84}function Pm(t){return t.viewingMode==="global"?mme:ame}function Ha(t,e){if(e==null)return null;const i=t.renderSpatialReference,r=Pm(t).headingTiltToDirectionUp,s=we();if(!Zu(e.position,s,i))return null;const h=r(s,e.heading,e.tilt);Qe(h.direction,h.direction,t.state.camera.distance),Gt(h.direction,h.direction,s);const f=bp(t,s,h.direction,h.up);return f.fov=Hi(e.fov),f}(function(t){t[t.LOCKED=0]="LOCKED",t[t.ADJUST=1]="ADJUST"})(dr||(dr={}));const Rp=we();function b0(t,e,i){const r=t.renderSpatialReference,s=u$(t,e.eye,e.viewForward,e.up,xme);let h=Om(t);return h0(e.eye,r,Rp,h)||(h=Ye.WGS84,h0(e.eye,r,Rp,h)),i==null?new go(new ke(Rp,h),s.heading,s.tilt,Ms(e.fov)):(i.position.x=Rp[0],i.position.y=Rp[1],i.position.z=Rp[2],i.position.spatialReference=h,i.heading=s.heading,i.tilt=s.tilt,i.fov=Ms(e.fov),i)}function l$(t,e,i){const r=t.state.camera,s=r.width/2/r.pixelRatio;return t.renderCoordsHelper.viewingMode===tr.Global&&i!=null&&(e*=Math.cos(Hi(i))),e/=t.renderCoordsHelper.unitInMeters,s/(RV*PV/e)/Math.tan(r.fovX/2)}function _0(t,e,i){const r=t.state.camera,s=e*Math.tan(r.fovX/2),h=r.width/2/r.pixelRatio;let f=RV*PV/(h/s);return t.renderCoordsHelper.viewingMode===tr.Global&&i!=null&&(f/=Math.cos(Hi(i))),f*t.renderCoordsHelper.unitInMeters}function NV(t,e,i,r,s,h){return LV(t,e,l$(t,i,e.latitude),r,s,h)}function LV(t,e,i,r,s,h){if(Uc(h)){const m=new X0(h.signal);return Wy(t,r.heading,r.tilt,e,i,s,m),void m.resolver.promise.then(b=>{const S=Pw(t,b,r.fov);if(S!=null)return h.resolver.resolve(S);h.resolver.reject()},b=>h.resolver.reject(b))}const f=Wy(t,r.heading,r.tilt,e,i,s);return Pw(t,f,r.fov,h)}function u$(t,e,i,r,s){return Pm(t).directionToHeadingTilt(e,i,r,s)}function $me(t,e){return!!(t.basemapTerrain&&t.renderCoordsHelper.fromRenderCoords(e,Eu,t.spatialReference)&&t.elevationProvider&&(Xb(t.elevationProvider,Eu)??0)>(Eu.z??0)-FV)}async function Tme(t,e,i){if(!t.renderCoordsHelper.fromRenderCoords(e,Eu,t.spatialReference)||!t.elevationProvider)return!1;const r=Eu.z??0;return(await t.elevationProvider.queryElevation(Eu.x,Eu.y,r,Eu.spatialReference,"ground",i)??0)>r-FV}async function Ime(t,e,i){const r=we();if(e)if(e instanceof ke){if(Zu(e,r,t.renderSpatialReference),e.z==null&&t.basemapTerrain!=null&&t.elevationProvider!=null){const s=await t.elevationProvider.queryElevation(e.x,e.y,e.z??0,e.spatialReference,"ground",i);return s!=null&&t.renderCoordsHelper.setAltitude(r,s),r}}else We(r,e);else We(r,t.state.camera.center);return r}function Eme(t,e){const i=we();if(e&&e instanceof ke){if(Zu(e,i,t.renderSpatialReference),e.z==null&&t.basemapTerrain!=null&&t.elevationProvider!=null){const r=Xb(t.elevationProvider,e);r!=null&&t.renderCoordsHelper.setAltitude(i,r)}}else We(i,e||t.state.camera.center);return i}function Wy(t,e,i,r,s,h,f){const m=r&&r instanceof ke?r:null;if(Uc(f))return Ime(t,r,f.signal).then(S=>{j6(t,e,i,m,S,s,h,f)},S=>f.resolver.reject(S)),null;const b=Eme(t,r);return j6(t,e,i,m,b,s,h,f)}function j6(t,e,i,r,s,h,f,m){if(r==null){const A=t.renderSpatialReference;if((r=sp(s,A,Om(t)))==null)return null}h=Math.max(h,t.state.constraints.minimumPoiDistance);const b=kme(t,e,i,s,h,f),S=(0,Pm(t).eyeForCenterWithHeadingTilt)(s,h,b.heading,b.tilt);if(f===dr.ADJUST&&t.viewingMode==="global"&&i>0){const A=()=>{const R=jV(t,s,h,Pme(t,h,i,s));return f=i-R<1?dr.LOCKED:dr.ADJUST,j6(t,e,R,r,s,h,f,m)},O=t.map.ground.navigationConstraint;if(!O||O.type==="stay-above"){if($me(t,S.eye))return A();if(Uc(m))return Tme(t,S.eye,m.signal).then(R=>R?A():(m.resolver.resolve({eye:S.eye,up:S.up,center:xs(s),heading:S.heading,tilt:S.tilt}),null)),null}}const I=!m||Uc(m)?{center:we(),eye:we(),up:we(),tilt:0,heading:0}:m;return I.eye=S.eye,I.up=S.up,I.center=xs(s),I.heading=S.heading,I.tilt=S.tilt,Uc(m)&&m.resolver.resolve(I),I}function uy(t,e,i,r,s,h=null){let f,m,b;if(t.state.isGlobal){if(!wme(e.spatialReference,tr.Global))return Uc(h)&&h.resolver.reject(),null;const j=new ke(e.xmin,e.ymin,e.spatialReference),H=new ke(e.xmax,e.ymax,e.spatialReference),Y=e.spatialReference.isGeographic?Mme:Sme;f=new ke({x:Y.center(j.x,H.x),y:(H.y+j.y)/2,z:e.zmax!=null&&e.zmin!=null?(e.zmax+e.zmin)/2:void 0,spatialReference:e.spatialReference});const X=fl(e.spatialReference),te=ume(f,j,H);m=te.lon,b=te.lat,Y.diff(j.x,H.x)>Y.range/2&&(m+=X.halfCircumference),m=Math.min(m,X.halfCircumference),b=Math.min(b,X.halfCircumference)}else{const j=t.renderSpatialReference??e.spatialReference;j.equals(e.spatialReference)||(e=ah(e,j)),m=e.xmax-e.xmin,b=e.ymax-e.ymin;const H=e.zmax!=null&&e.zmin!=null?(e.zmax+e.zmin)/2:void 0;f=new ke({x:e.xmin+.5*m,y:e.ymin+.5*b,z:H,spatialReference:j})}const S=e.zmax!=null&&e.zmin!=null?e.zmax-e.zmin:0,I=t.state.camera,A=1/Math.tan(I.fovX/2),O=1/Math.tan(I.fovY/2),R=1/Math.tan(I.fov/2),L=Math.max(.5*m*A,.5*b*O,.5*S*R)/L6;if(Uc(h)){const j=new X0(h.signal);return Wy(t,i,r,f,L,s,j),void j.resolver.promise.then(H=>{const Y=Pw(t,H,t.camera.fov);if(Y!=null)return h.resolver.resolve(Y);h.resolver.reject()},H=>h.resolver.reject(H))}const z=Wy(t,i,r,f,L,s);return Pw(t,z,t.camera.fov,h)}function Ame(t,e,i){const r=t.renderSpatialReference,s=sp(i,r,Om(t));if(s==null)return null;const h=Math.tan(e.fovX/2),f=Math.tan(e.fovY/2),m=qO(e.eye,i),b=2*m*h*L6,S=2*m*f*L6;return t.viewingMode==="global"?kV(t,s,b,S):IV(t,s,b,S)}function Cme(t,e,i){const r=t.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(i/r)/Math.LN2>bme)return!0;const s=t.renderSpatialReference,h=Om(t),f=sp(e,s,h),m=sp(t.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,s,h);if(f==null||m==null)return!1;const b=Math.tan(.5*t.state.camera.fov)*r;return m.distance(f)/b>_me}function kme(t,e,i,r,s,h){let f=0;return h===dr.ADJUST&&Cme(t,r,s)?(e=0,f=Ome(t,s,i,r)):f=h$(t,r,s,i),f=t.state.constraints.clampTilt(s,f),{heading:e,tilt:i=jV(t,r,s,f)}}const Ow=.7;function Ome(t,e,i,r){const s=h$(t,r,e,i);if(!t.state.constraints.tilt)return s;const h=t.state.constraints.tilt(e);h.max=Math.min(h.max,.5*Math.PI);const f=h.min*(1-Ow)+h.max*Ow;return Math.min(s,f)}function Pme(t,e,i,r){let s=h$(t,r,e,i);if(!t.state.constraints.tilt)return s;const h=t.state.constraints.tilt(e);return s=Math.min(s,.5*Math.PI),h.min*(1-Ow)+s*Ow}function jV(t,e,i,r){return Pm(t).lookAtTiltToEyeTilt(r,e,i)}function h$(t,e,i,r){return Pm(t).eyeTiltToLookAtTilt(r,e,i)}function Pw(t,e,i,r){if(e==null)return null;const s=t.renderSpatialReference,h=sp(e.eye,s,Om(t));return h==null?null:r!=null?(r.position=h,r.heading=e.heading,r.tilt=e.tilt,r.fov=i,r):new go(h,e.heading,e.tilt,i)}function Rme(t,e){var r;const i=(r=t.basemapTerrain)==null?void 0:r.tilingScheme;if(i)return i.levelAtScale(e);OV.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function DV(t,e){var r;const i=(r=t.basemapTerrain)==null?void 0:r.tilingScheme;if(i)return i.scaleAtLevel(e);OV.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function zV(t,e){return h0(e.center,t.renderSpatialReference,MA,Ye.WGS84),_0(t,e.distance,MA[1])}let X0=class{constructor(e){this.signal=e,this.resolver=nk()}};function Uc(t){return t&&"resolver"in t}const c$=96;function Bxe(t,e){const i=e||t.extent,r=t.width,s=yl(i&&i.spatialReference);return i&&r?i.width/r*s*CS*c$:0}function Hxe(t,e){return t/(yl(e)*CS*c$)}function Fme(t){return t/(CS*c$)}const Nme=.66;function VV(t){return 360-y7.normalize(t)}function Qb(t){return y7.normalize(360-t)}function Tf(t){return t!=null&&t.resolver&&t.resolver.reject(),null}function Lme(t,e){return t!=null&&t.resolver&&t.resolver.resolve(e),e}function GV(t,e,i,r=null){if(!e)return Tf(r);const s=t.spatialReference||Ye.WGS84;if(e.camera!=null){const S=E0(e.camera.position,s);if(S==null)return Tf(r);const I=e.camera.clone();return I.position=S,Lme(r,I)}if(e.targetGeometry==null)return Tf(r);const h=e.get("targetGeometry.spatialReference");if(h&&!Du(h,s))return Tf(r);const f=b0(t,t.state.camera);let m=dr.ADJUST;if(e.rotation!=null&&(f.heading=VV(e.rotation),m=dr.LOCKED),i!=null&&(f.tilt=i),e.targetGeometry.type==="point"){const S=e.targetGeometry;let I;const A=e.targetGeometry.clone();return I=e.scale!=null?l$(t,e.scale,S.latitude):t.state.camera.distance,LV(t,A,I,f,m,r)}const b=e.targetGeometry.extent;return b?uy(t,b,f.heading,f.tilt,m,r):Tf(r)}function jme(t,e,i=null){return i==null&&(i=new _r),f$(t,null,e.clone(),i)}async function Dme(t,e,i){const r=Kme(t,e);if(!r)throw new ne("viewpointutils-create:no-target","Missing target for creating viewpoint");const s=new go({fov:t.camera.fov}),h=new _r({camera:s});if(r.target instanceof _r)return vh(await Gme(t,r.target,r,i,h));if(r.target instanceof go)return vh(UV(t,r.target,h));const f=r.scale!=null||r.zoom!=null;if(r.target instanceof At){const S=r.target.xmin===r.target.xmax||r.target.ymin===r.target.ymax;return vh(f||S?await D6(t,r,r.target.center,s,i,h):await Hme(t,r,r.target,s,i,h))}const m={boundingBox:rR(),hasZ:!1,screenSpaceObjects:[]},b=f?zme(t,r):void 0;if(await qV(t,r.target,b,m),isFinite(m.boundingBox[0])){let S;if(EZ(m.boundingBox,di),Vn.x=di[0],Vn.y=di[1],Vn.z=di[2],Vn.spatialReference=t.spatialReference,isFinite(Vn.z)&&m.hasZ?S=OZ(m.boundingBox):(Vn.z=void 0,S=XJ(CZ(m.boundingBox,Yme))),f||S)return vh(await D6(t,r,Vn,s,i,h));const I=Zme(t,m.screenSpaceObjects);return vh(await Jme(t,r,Vn,m.boundingBox,I,s,i,h))}return r.position?vh(Ume(t,r,s,h)):vh(await Bme(t,r,s,i,h))}function p$(t,e){return e.scale==null&&e.zoom!=null?DV(t,e.zoom):e.scale}function zme(t,e){const i=p$(t,e);return i?Fme(i):void 0}function d$(t,e){let i=!1;return e.heading!=null?(t.heading=e.heading,i=!0):e.rotation!=null&&(t.heading=VV(e.rotation),i=!0),e.tilt!=null&&(t.tilt=e.tilt,i=!0),e.fov!=null&&(t.fov=e.fov),i}function f$(t,e,i,r){const s=t.spatialReference||Ye.WGS84;return(e=e??Ha(t,i))==null||(r.targetGeometry=sp(e.center,t.renderSpatialReference,s),r.scale=zV(t,e),r.rotation=Qb(i.heading),r.camera=i),r}function Rw(t,e,i){var m,b;const r=()=>new ne("viewpointutils:invalid-geometry","The target is missing a valid geometry");if(!e)throw r();if(!Du(e.spatialReference,t.spatialReference))throw new ne("viewpointutils:incompatible-spatialreference",`Spatial reference (${e.spatialReference?e.spatialReference.wkid:"unknown"}) is incompatible with the view (${(m=t.spatialReference)==null?void 0:m.wkid})`,{geometry:e});const s=[];if(!e.hasZ&&t.basemapTerrain){let S;switch(e.type){case"point":S=e;break;case"multipoint":case"polyline":S=(b=e.extent)==null?void 0:b.center;break;case"mesh":S=e.origin;break;case"extent":S=e.center;break;case"polygon":S=e.centroid}S&&t.basemapTerrain.spatialReference!=null&&Du(S,t.basemapTerrain.spatialReference)&&t.elevationProvider?di[2]=Xb(t.elevationProvider,S)??0:di[2]=0}(0,Xme[e.type])(e,S=>{s.push(S[0],S[1],S[2])},di);const h=s.length/3;if(h===0)throw r();const f=new Array(s.length);if(lh(s,e.spatialReference,0,f,t.spatialReference,0,h)){e.hasZ&&(i.hasZ=!0);for(let S=0;S<f.length;S+=3)e.hasZ?(di[0]=f[S],di[1]=f[S+1],di[2]=f[S+2]):(di[0]=f[S],di[1]=f[S+1]),iR(i.boundingBox,di)}}async function Vme(t,e,i,r){const s=await Qd(t.whenViewForGraphic(e));if(s.ok===!1||s.value==null||!("whenGraphicBounds"in s.value))return void Rw(t,e.geometry,r);const h=s.value,f=await Qd(h.whenGraphicBounds(e,{minDemResolution:i}));if(f.ok===!1)return void Rw(t,e.geometry,r);const{screenSpaceObjects:m,boundingBox:b}=f.value;IZ(r.boundingBox,b),m&&m.forEach(S=>{r.screenSpaceObjects.push(S)}),isFinite(b[2])&&(r.hasZ=!0)}async function qV(t,e,i,r){var s;if(Array.isArray(e)&&e.length===2){const h=e[0],f=e[1];if(typeof h=="number"&&typeof f=="number")return Vn.x=h,Vn.y=f,Vn.z=void 0,Vn.spatialReference=(s=t.spatialReference)!=null&&s.isGeographic?t.spatialReference:Ye.WGS84,void Rw(t,Vn,r)}e&&"map"in e&&typeof e.map=="function"?await sn(e.map(h=>qV(t,h,i,r))):e instanceof ml?Rw(t,e,r):e instanceof Mr&&await Vme(t,e,i,r)}async function Gme(t,e,i,r,s){if(e.camera!=null)return UV(t,e.camera,s);s.scale=e.scale,s.rotation=e.rotation,s.targetGeometry=e.targetGeometry!=null?e.targetGeometry.clone():null,s.camera=null,i.heading!=null?s.rotation=Qb(i.heading):i.rotation!=null&&(s.rotation=i.rotation);const h=p$(t,i);h!=null&&(s.scale=h);const f=new X0(r);return GV(t,s,i.tilt,f),s.camera=await f.resolver.promise,s}function UV(t,e,i){const r=t.spatialReference,s=E0(e.position,r);return s==null?null:((e=e.clone()).fov=t.camera.fov,e.position=s,f$(t,null,e,i))}function qme(t,e,i,r,s,h){const f=t.renderSpatialReference;return Zu(i,qg,f),Zu(e,i9,f),h.targetGeometry=new ke(e),s.position=new ke(i),mt(Fw,i9,qg),u$(t,qg,Fw,r.up,s),h.scale=_0(t,mo(qg,i9),h.targetGeometry.latitude),h.rotation=Qb(s.heading),h.camera=s,h}async function D6(t,e,i,r,s,h){if(i==null)throw new ne("createfromcenter","invalid point");h.targetGeometry=i.clone();const f=bp(t);if(e.position)return qme(t,h.targetGeometry,e.position,f,r,h);if(e.zoomFactor){const b=f.distance/e.zoomFactor,S=Qe(di,f.viewForward,-b);f.eye=Gt(di,f.center,S),h.scale=_0(t,b,i.latitude)}b0(t,f,r);const m=d$(r,e)?dr.LOCKED:dr.ADJUST;if(!e.zoomFactor){const b=p$(t,e);b==null?(Zu(i,di,t.renderSpatialReference),hV(f.frustum,di)?h.scale=_0(t,mo(f.eye,di),i.latitude):h.scale=zV(t,f)):h.scale=b;const S=new X0(s);NV(t,h.targetGeometry,h.scale,r,m,S),h.camera=await S.resolver.promise}return h}function Ume(t,e,i,r){const s=bp(t);return We(Fw,s.viewForward),u$(t,s.eye,Fw,s.up,r9),i.position=new ke(e.position),i.heading=e.heading!=null?e.heading:r9.heading,i.tilt=e.tilt!=null?e.tilt:r9.tilt,f$(t,null,i,r)}async function Bme(t,e,i,r,s){const h=bp(t);return D6(t,e,sp(h.center,t.renderSpatialReference,t.spatialReference),i,r,s)}async function Hme(t,e,i,r,s,h){h.targetGeometry=i.clone();const f=bp(t);b0(t,f,r);const m=d$(r,e)?dr.LOCKED:dr.ADJUST,b=new X0(s);return uy(t,i,r.heading,r.tilt,m,b),h.camera=await b.resolver.promise,h}function Wme(t,e,i,r,s){let h=0;i.z!=null?h=i.z:t.basemapTerrain&&t.elevationProvider&&(h=Xb(t.elevationProvider,i)),Yt(di,i.x,i.y,h),FX(t.spatialReference,di,$A,t.renderSpatialReference),Oz(Gg,$A),WM(Gg,Gg),rR(If);const f=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let L=0;L<f.length;L++){const z=f[L];let j=r[z[2]];isFinite(j)||(j=h),Yt(di,r[z[0]],r[z[1]],j),h0(di,t.spatialReference,di,t.renderSpatialReference),iR(If,Ed(di,di,Gg))}const m=lb(If),b=hb(If),S=ub(If),I=1/Math.tan(e.fovX/2),A=1/Math.tan(e.fovY/2),O=.5*Math.sqrt(m*m+S*S)*Math.max(A,I)+.5*b,R=.5*b*A+.5*Math.max(m,S);return Math.max(O,R)/s}async function Jme(t,e,i,r,s,h,f,m){m.targetGeometry=i.clone();const b=bp(t),S=Wme(t,b,i,r,s);b0(t,b,h);const I=d$(h,e)?dr.LOCKED:dr.ADJUST;m.scale=_0(t,S,m.targetGeometry.latitude);const A=new X0(f);return NV(t,m.targetGeometry,m.scale,h,I,A),m.camera=await A.resolver.promise,m}function Kme(t,e){if(!e||!t.spatialReference)return null;const i={target:void 0};return"declaredClass"in e||Array.isArray(e)?i.target=e:(Object.assign(i,e),e.center&&!i.target&&(i.target=e.center)),i}function vh(t){return t&&t.camera!=null&&(t.rotation=Qb(t.camera.heading)),t}function Zme(t,e){const i=Nme;if(!e.length)return i;let r=Number.NEGATIVE_INFINITY;for(let s=0;s<e.length;s++){const h=e[s].screenSpaceBoundingRect;r=Math.max(r,Math.abs(h[0]),Math.abs(h[1]),Math.abs(h[2]),Math.abs(h[3]))}return i-r/Math.min(t.width,t.height)*2}const di=we(),$A=Bi(),Gg=J0(),If=ab(),Yme=$s(),Fw=we(),qg=we(),i9=we(),r9={heading:0,tilt:0},Vn=new ke,Xme={point(t,e,i){i[0]=t.x,i[1]=t.y,t.z!=null&&(i[2]=t.z),e(i)},polygon(t,e,i){const r=t.hasZ;for(let s=0;s<t.rings.length;s++){const h=t.rings[s];for(let f=0;f<h.length;f++)i[0]=h[f][0],i[1]=h[f][1],r&&(i[2]=h[f][2]),e(i)}},polyline(t,e,i){const r=t.hasZ;for(let s=0;s<t.paths.length;s++){const h=t.paths[s];for(let f=0;f<h.length;f++)i[0]=h[f][0],i[1]=h[f][1],r&&(i[2]=h[f][2]),e(i)}},multipoint(t,e,i){const r=t.points,s=t.hasZ;for(let h=0;h<r.length;h++)i[0]=r[h][0],i[1]=r[h][1],s&&(i[2]=r[h][2]),e(i)},extent(t,e,i){t.zmin!=null&&t.zmax!=null?(e(Yt(i,t.xmin,t.ymin,t.zmin)),e(Yt(i,t.xmax,t.ymin,t.zmin)),e(Yt(i,t.xmin,t.ymax,t.zmin)),e(Yt(i,t.xmax,t.ymax,t.zmin)),e(Yt(i,t.xmin,t.ymin,t.zmax)),e(Yt(i,t.xmax,t.ymin,t.zmax)),e(Yt(i,t.xmin,t.ymax,t.zmax)),e(Yt(i,t.xmax,t.ymax,t.zmax))):(e(Yt(i,t.xmin,t.ymin,i[2])),e(Yt(i,t.xmax,t.ymin,i[2])),e(Yt(i,t.xmin,t.ymax,i[2])),e(Yt(i,t.xmax,t.ymax,i[2])))},mesh(t,e,i){const r=t.vertexAttributes&&t.vertexAttributes.position;if(r)for(let s=0;s<r.length;s+=3)e(Yt(i,r[s],r[s+1],r[s+2]))}};let Qme=class{constructor(e,i,r){this.target=e,this.options=i,this.view=r,this.state="pending",this._animationController=null,this._promise=new Promise((s,h)=>{this._resolveCallback=s,this._rejectCallback=h;const f=new AbortController;this.options.signal!=null&&Un(this.options.signal,()=>{this.abort()}),this._abortController=f,this.waitForReady()})}then(e,i){return this._promise.then(e,i)}catch(e){return this._promise.catch(e)}resolve(e){if(this.state!=="finished")return this.state="finished",this._resolveCallback(e)}reject(e){if(this.state!=="finished")return this.state="finished",this._rejectCallback(e)}abort(e=!1){this._abortController.abort(),this.state==="wait-for-animation-finish"&&!e&&this._animationController!=null&&this.view.state.cameraController===this._animationController&&this._animationController.active&&this._animationController.stopController(),this.reject(Xt())}async waitForReady(){if(this.state="wait-for-ready",!this.view.ready)try{await vb(()=>this.view.ready,this._abortController.signal)}catch(e){return this.reject(e)}this.createViewPoint()}createViewPoint(){this.state!=="finished"&&(this.state="wait-for-viewpoint",this._animationController=this.options.animate?this._getAnimationController():null,Dme(this.view,this.target,this._abortController.signal).then(e=>{if(this.state==="finished")return;const i=e?this._getCameraFromViewpoint(e):null;if(i!=null)if(this.options.animate){if(this._animationController==null)return;this.startAnimation(i,this._animationController)}else this.view.stateManager.setStateCamera(i.camera,{applyConstraints:!i.isFullySpecified,positionAndOrientationOnly:!0,doNotCancelGoToOperation:!0}),this.resolve()},e=>{this.reject(e)}))}_getCameraFromViewpoint(e){var h;const i=!!(this.target instanceof _r&&this.target.camera||this.target instanceof go),r=e.camera;if(r==null)return null;if(!this.view.stateManager.isCompatible(r)){const f=r.position,m=f&&f.spatialReference,b=m?m.wkid:"none",S=(h=this.view.spatialReference)==null?void 0:h.wkid;return this.reject(new ne("GotoAnimation:incompatible-spatialreference",`Resulting camera has an incompatible spatial reference (camera: ${b}, view: ${S})`,{camera:r})),null}const s=Ha(this.view,r);return s==null?(this.reject(new ne("GotoAnimation:invalid-camera","Resulting camera is invalid")),null):{viewpoint:e,camera:s,isFullySpecified:i}}startAnimation(e,i){this.state="wait-for-animation-finish";const r=i.viewAnimation;if(r==null)return void this.reject(new ne("GotoAnimation:missing-animation","Unreachable code in view.stateManager"));if(r.update(e.viewpoint,"running"),!i.active||i.viewAnimation==null||i.viewAnimation.target!==e.viewpoint||this.view.state.cameraController!==i)return this.abort();let s;e.isFullySpecified?(s=new ly({view:this.view,desiredCamera:e.camera}),Jb(this.view,e.camera,ws.EYE_AND_CENTER)):o$(this.view,e.camera),i.begin(e.camera,this.options);const h=()=>{const m=this.view.state.cameraController;s&&(m&&m.active?m instanceof Lc&&m.viewAnimation!=null&&m.viewAnimation.target===e.viewpoint&&(this.view.state.cameraController=s):i.viewAnimation!=null&&i.viewAnimation.target===e.viewpoint&&i.state==="finished"&&(this.view.state.cameraController=s))},f=m=>{if(this.view.state!=null)switch(i.state){case Mi.Finished:switch(this.state){case"pending":case"wait-for-ready":case"wait-for-viewpoint":case"wait-for-animation-finish":this.resolve()}break;case Mi.Ready:case Mi.Rejected:case Mi.Running:case Mi.Stopped:switch(this.state){case"pending":case"wait-for-ready":case"wait-for-viewpoint":case"wait-for-animation-finish":this.reject(m)}}};r.when(h,m=>f(m)),i.asyncResult={resolve:()=>f(),reject:m=>f(m)}}_getAnimationController(){let e=null,i=null;const r=this.view.state.cameraController;return r instanceof Lc&&(r.updateStateFromViewAnimation(),r.active&&(e=r,i=e.viewAnimation)),e!=null||(e=new Lc({view:this.view,mode:"animation"}),i=e.viewAnimation,this.view.state.switchCameraController(e))?e:(i!=null&&i.stop(),this.reject(new ne("GotoAnimation:goto-cannot-interrupt","Cannot start an animation while interacting")),null)}};var Fi;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Fi||(Fi={}));var Fd;(function(t){t[t.Antialiasing=0]="Antialiasing",t[t.HighQualityTransparency=1]="HighQualityTransparency",t[t.HighQualityVoxel=2]="HighQualityVoxel",t[t.RealisticAtmosphere=3]="RealisticAtmosphere",t[t.SSAO=4]="SSAO",t[t.WaterReflection=5]="WaterReflection",t[t.ShadowMapUpdate=6]="ShadowMapUpdate",t[t.PhysicalPixelRendering=7]="PhysicalPixelRendering"})(Fd||(Fd={})),ue.add("enable-feature:high-quality-idle",!0);let Ri=class extends Oe{get camera(){const e=this._get("camera");if(!this.ready)return e;const i=b0(this.view,this.view.state.camera,n9);return i&&e&&i.equals(e)?e:i.clone()}set camera(e){var i,r;this._updatePropertyBeforeReady("camera",e)||((i=this.view.elevationProvider)==null||i.enableElevationCache(!0),this.setStateCamera(Ha(this.view,e),{applyConstraints:!1})||fe.getLogger(this.declaredClass).error("#camera=","Invalid camera",e),(r=this.view.elevationProvider)==null||r.enableElevationCache(!1))}get contentCamera(){const e=this._get("contentCamera");if(!this.ready)return e;const i=b0(this.view,this.view.state.contentCamera,n9);return i&&e&&i.equals(e)?e:i.clone()}set contentCamera(e){if(this._updatePropertyBeforeReady("contentCamera",e))return;const i=Ha(this.view,e);i!=null?(this._updateElevation(i),this.view.state.contentCamera=i):this.view.state.contentCamera=null}installContentCameraReset(e){if(this.removeHandles(s9),this.test.contentCameraResetState.clear(),!this.view.state.fixedContentCamera)return!1;const i=this.zoom,r=this.view.state.camera.distance**2,s=kO(this.view.state.camera.center),h=e.sticky?this.contentCamera.clone():null;return this.addHandles([me(()=>this.contentCamera,()=>{e.sticky||(this.removeHandles(s9),this.test.contentCameraResetState.clear())}),me(()=>this.zoom,f=>{f!==void 0&&i!==void 0&&(this.test.contentCameraResetState.set("view.zoom",Math.abs(f-i)/2),Math.abs(f-i)>2?this.contentCamera=null:this.view.state.fixedContentCamera||(this.contentCamera=h))}),me(()=>this.view.state.camera,f=>{const m=A0(s,f.center);this.test.contentCameraResetState.set("camera.center",m/r),m>r?this.contentCamera=null:this.view.state.fixedContentCamera||(this.contentCamera=h)})],s9),!0}get center(){return this.ready?this.view.pointsOfInterest.centerOnContent.location:this._get("center")}set center(e){var i;this._updatePropertyBeforeReady("center",e)||(e?this.isCompatible(e)?this.setStateCamera(this._centerToCamera(e),{applyConstraints:!0})?this.view.pointsOfInterest.centerOnContent.runTask():fe.getLogger(this.declaredClass).error("#center=","Invalid center",e):fe.getLogger(this.declaredClass).error("#center=","Center has an incompatible spatial reference (center: "+(e.spatialReference?e.spatialReference.wkid:"none")+", view: "+((i=this.view.spatialReference)==null?void 0:i.wkid)+")",e):fe.getLogger(this.declaredClass).error("#center=","Center may not be null or undefined"))}get extent(){if(!this.ready)return this._get("extent");const e=this.view,i=Ame(e,e.state.camera,e.pointsOfInterest.centerOnContent.renderLocation);return i??this._get("extent")}set extent(e){var i;this._updatePropertyBeforeReady("extent",e)||(e?this.isCompatible(e)?this.setStateCamera(this._extentToCamera(e),{applyConstraints:!0})||fe.getLogger(this.declaredClass).error("#extent=","Invalid extent",e):fe.getLogger(this.declaredClass).error("#extent=","Extent has an incompatible spatial reference (extent: "+(e.spatialReference?e.spatialReference.wkid:"none")+", view: "+((i=this.view.spatialReference)==null?void 0:i.wkid)+")",e):fe.getLogger(this.declaredClass).error("#extent=","Extent may not be null or undefined"))}get frustum(){const e=this._propertiesPool.get("frustum");return e.renderCoordsHelper=this.view.renderCoordsHelper,e.update(this.view.state.camera),e}get hasInitialView(){return!!this.view.get("map.initialViewProperties.viewpoint")}get scale(){if(this.ready){const e=this.view.pointsOfInterest.centerOnContent;return _0(this.view,e.distance,e.location.latitude)}return this._get("scale")}set scale(e){this._updatePropertyBeforeReady("scale",e)||this.setStateCamera(this._scaleToCamera(e),{applyConstraints:!0})||fe.getLogger(this.declaredClass).error("#scale=","Invalid scale",e)}get padding(){if(!this.ready)return this._get("padding");const e=this.view.state.camera,i=e.padding,r=e.pixelRatio,s=this._get("padding"),h=Math.round(i[yt.TOP]/r),f=Math.round(i[yt.RIGHT]/r),m=Math.round(i[yt.BOTTOM]/r),b=Math.round(i[yt.LEFT]/r);return s!=null&&s.top===h&&s.right===f&&s.bottom===m&&s.left===b?s:{top:h,right:f,bottom:m,left:b}}set padding(e){this._updatePropertyBeforeReady("padding",e)||(this._paddingToArray(e,this.view.state.camera.pixelRatio,Ug),this.view.state.updateCamera(i=>i.padding=Ug))}_paddingToArray(e,i,r){e?j2(r,e.top||0,e.right||0,e.bottom||0,e.left||0):j2(r,0,0,0,0);for(let s=0;s<4;s++)r[s]=Math.round(r[s]*i)}get screenCenter(){const e=this.padding;return Ur((this.view.width-(e.left+e.right))/2+e.left,(this.view.height-(e.top+e.bottom))/2+e.top)}get viewpoint(){return this.ready?jme(this.view,this.camera):this._get("viewpoint")}set viewpoint(e){var i;if(!this._updatePropertyBeforeReady("viewpoint",e))if(e)if(this.isCompatible(e))this.setStateCamera(this._viewpointToCamera(e),{applyConstraints:!e.camera})||fe.getLogger(this.declaredClass).error("#viewpoint=","Invalid viewpoint",e);else{const r=e.camera!=null?e.camera.position:e.targetGeometry,s=r!=null&&r.spatialReference;fe.getLogger(this.declaredClass).error("#viewpoint=","Viewpoint has an incompatible spatial reference (viewpoint: "+(s?s.wkid:"none")+", view: "+((i=this.view.spatialReference)==null?void 0:i.wkid)+")",e)}else fe.getLogger(this.declaredClass).error("#viewpoint=","Viewpoint may not be null or undefined")}get zoom(){return this.ready?Rme(this.view,this.scale):this._get("zoom")}set zoom(e){this._updatePropertyBeforeReady("zoom",e)||e===void 0||this.setStateCamera(this._zoomToCamera(e),{applyConstraints:!0})||fe.getLogger(this.declaredClass).error("#zoom=","Invalid zoom",e)}get _pixelRatio(){var e;return this._devicePixelRatioOverride!=null?this._devicePixelRatioOverride:this._usePhysicalPixelRendering?this._windowDevicePixelRatio:Math.min(this._windowDevicePixelRatio,(e=this.view)==null?void 0:e.qualitySettings.maximumPixelRatio)}get _rasterPixelRatio(){return this._devicePixelRatioOverride!=null?this._devicePixelRatioOverride:this._usePhysicalPixelRenderingAny?this._windowDevicePixelRatio:Math.min(this._windowDevicePixelRatio,this.view.qualitySettings.maximumPixelRatio)}get _usePhysicalPixelRendering(){var e,i;return((i=(e=this.view)==null?void 0:e._stage)==null?void 0:i.renderer.isFeatureEnabled(Fd.PhysicalPixelRendering))??!1}get _usePhysicalPixelRenderingAny(){var i,r;const e=(r=(i=this.view)==null?void 0:i._stage)==null?void 0:r.renderer;return e&&(e.isFeatureEnabled(Fd.PhysicalPixelRendering,Fi.IDLE)||e.isFeatureEnabled(Fd.PhysicalPixelRendering,Fi.INTERACTING)||e.isFeatureEnabled(Fd.PhysicalPixelRendering,Fi.ANIMATING))}constructor(e){super(e),this._propertiesPool=new YD({frustum:P6},this),this._cameraSetByUser=!1,this._gotoOperation=null,this.constraintsManager=null,this.ready=!1,this._windowDevicePixelRatio=1,this._devicePixelRatioOverride=null,this._cameraChangeTime=0,this._updatingIgnoreRenderState=!1,this.test={viewStateManager:this,contentCameraResetState:new Map,setDevicePixelRatio:i=>this._devicePixelRatioOverride=i,renderState:null,get maximumPixelRatio(){return this.viewStateManager.view.qualitySettings.maximumPixelRatio},set updatingIgnoreRenderState(i){this.viewStateManager._updatingIgnoreRenderState=i},get updatingIgnoreRenderState(){return this.viewStateManager._updatingIgnoreRenderState||this.renderState!=null}}}initialize(){this._cameraChangeTime=performance.now(),this.addHandles([un(()=>this.view.state.events,"before-camera-change",e=>e&&this._updateElevation(e)),me(()=>{var e;return(e=this.view.state)==null?void 0:e.camera},(e,i)=>this._cameraChangedHandler(e,i),qn)]),Sn(()=>{var e;return(e=this.view.state)==null?void 0:e.camera},e=>this._updateElevation(e),{once:!0,sync:!0}),this.addHandles([Wc({prepare:()=>this._prepareFrame()}),me(()=>this.view.state.cameraController,()=>{this._cameraSetByUser=!0,this.removeHandles(Bg)}),un(()=>this.view.state.events,"camera-projection-changed",()=>this.notifyChange("scale"))])}destroy(){this.exit(),this._propertiesPool=Ut(this._propertiesPool)}init(){this.constraintsManager=new M1({view:this.view}),this._prepareFrame();const e=this._getInitialProperties();this._cameraSetByUser=!1,this._set("ready",!0);for(const i of e)this.set(i.name,i.value);if(!this._cameraSetByUser){const i=this.view.get("map.initialViewProperties.viewpoint")||this.view.initialExtent;i&&this.isCompatible(i)?this._setInitialView(i):this.view.state.viewingMode===tr.Local&&this.addHandles(Sn(()=>this.view.basemapTerrain.ready,()=>{this.removeHandles(Bg),this._setInitialView(this.view.dataExtent)},{once:!0,initial:!0}),Bg)}}exit(){this._cancelGoToOperation(),this.ready&&(this._override("padding",this.padding),this._set("ready",!1),this._clearOverride("hasInitialView"),this._cameraSetByUser=!1,this.removeHandles(Bg),this.constraintsManager=Ut(this.constraintsManager))}async goTo(e,i){const r={animate:!0,...i};return this._gotoOperation!=null&&this._gotoOperation.abort(r.animate),this._gotoOperation=new Qme(e,r,this.view),this.view.resourceController.scheduler.stopFrame(),this._gotoOperation}debugSetCameraOnContent(){this.setStateCamera(bp(this.view),{applyConstraints:!1})}step(e){const i=this.view.state,r=i==null?void 0:i.cameraController;r&&(i.updateCamera(s=>r.stepController(e,s)),r.steppingFinished&&r.finishController())}_cancelGoToOperation(){this._gotoOperation!=null&&(this._gotoOperation.abort(),this._gotoOperation=null)}_getInitialProperties(){const e=new Set,i=[];for(const{propertyName:r,overrides:s}of tge){const h=e.has(r),f=this._isOverridden(r);!h&&f&&i.push({name:r,value:this._get(r)}),this._clearOverride(r),(h||f)&&s.forEach(m=>e.add(m))}return i}_setInitialView(e){if(e==null||this._cameraSetByUser)return;if(e instanceof go)return void this.setStateCamera(Ha(this.view,e),{applyConstraints:!1});if(e instanceof _r){if(e.targetGeometry instanceof At){const h=uy(this.view,e.targetGeometry,0,.5,dr.LOCKED);return void(h!=null&&this.setStateCamera(Ha(this.view,h),{applyConstraints:!0}))}const r={applyConstraints:!e.camera},s=this._viewpointToCamera(e);return void this.setStateCamera(s,r)}const i=uy(this.view,e,0,.5,dr.LOCKED);i!=null&&this.setStateCamera(Ha(this.view,i),{applyConstraints:!0})}_updatePropertyBeforeReady(e,i){return!this.ready&&(this._override(e,i),i&&ege.includes(e)&&this._override("hasInitialView",!0),!0)}isCompatible(e){return e!=null&&(e instanceof _r?e.camera?this.isCompatible(e.camera):this.isCompatible(e.targetGeometry):e instanceof go?this.isCompatible(e.position):e.spatialReference&&Du(e.spatialReference,this.view.spatialReference))}_getPreservingHeadingTilt(e=ige){return this._cameraSetByUser?(e.heading=this.camera.heading,e.tilt=this.camera.tilt):(e.heading=0,e.tilt=.5),e}_centerPointAtDistanceToCamera(e,i,r=Rl){const{heading:s,tilt:h}=this._getPreservingHeadingTilt(),f=Wy(this.view,s,h,e,i,dr.ADJUST);return f==null?null:(r.copyFrom(this.view.state.camera),r.eye=f.eye,r.center=f.center,r.up=f.up,r)}_centerToCamera(e){const i=this.view.pointsOfInterest.centerOnContent;i.runTask();const r=i.distance;return this._centerPointAtDistanceToCamera(e,r)}_extentToCamera(e){const{heading:i,tilt:r}=this._getPreservingHeadingTilt(),s=uy(this.view,e,i,r,dr.ADJUST,n9);return s?Ha(this.view,s):null}_scaleToCamera(e){if(e==null)return null;const i=this.view.pointsOfInterest.centerOnContent;i.runTask();const r=i.renderLocation,s=i.location.latitude;if(s==null)return null;const h=l$(this.view,e,s);return this._centerPointAtDistanceToCamera(r,h)}_zoomToCamera(e){return this._scaleToCamera(DV(this.view,e))}_viewpointToCamera(e){return Ha(this.view,GV(this.view,e))}setStateCamera(e,i){return!(e==null||!this.view.state.stopActiveCameraController())&&(this._cameraSetByUser=!0,i.doNotCancelGoToOperation||this._cancelGoToOperation(),this.view.state.updateCamera(r=>{i.positionAndOrientationOnly?(r.eye=e.eye,r.center=e.center,r.up=e.up):r.copyFrom(e),i.applyConstraints&&o$(this.view,r)}),i.applyConstraints||(this.view.state.cameraController=new ly({view:this.view,desiredCamera:e})),!0)}_prepareFrame(){const{surface:e,canvas:i}=this.view;if(!e||!i)return;this._windowDevicePixelRatio=window.devicePixelRatio;const r=this._pixelRatio,s=Math.round(e.clientWidth*r),h=Math.round(e.clientHeight*r);if(s!==0&&h!==0&&(i.width===s&&i.height===h||(i.width=s,i.height=h),this.view.state)){const f=this.view.state.camera;f.fullWidth===s&&f.fullHeight===h&&f.pixelRatio===r||(Rl.copyFrom(f),Rl.pixelRatio!==r&&(this._paddingToArray(this.padding,r,Ug),Rl.padding=Ug),Rl.fullWidth=s,Rl.fullHeight=h,Rl.pixelRatio=r,this.view.state.camera=Rl),this._updateViewState()}}_updateElevation(e){var h;const i=this.view.basemapTerrain&&this.view.basemapTerrain.spatialReference,r=((h=this.view.renderCoordsHelper)==null?void 0:h.getAltitude(e.eye))??0,s=i?Wb(this.view,e.eye):0;e.relativeElevation=r-s}_updateViewState(){this.test.renderState!=null?this.view.state.mode=this.test.renderState:this.view.animation?this.view.state.mode=Fi.ANIMATING:this.view.interacting?this.view.state.mode=Fi.INTERACTING:(this.view.state.mode===Fi.ANIMATING&&(this._cameraChangeTime=0),performance.now()-this._cameraChangeTime<=rge?this.view.state.mode=Fi.INTERACTING:this.view.state.mode=Fi.IDLE),this.view.state.rasterPixelRatio=this._rasterPixelRatio,this.view.state.contentPixelRatio=Math.min(this._pixelRatio,this.view.qualitySettings.maximumPixelRatio)}_cameraChangedHandler(e,i){e&&i&&e.almostEquals(i)||(this._cameraChangeTime=performance.now(),this._updateViewState())}};v([x({type:go,dependsOn:["view.state.camera","ready"]})],Ri.prototype,"camera",null),v([x({type:go,dependsOn:["view.state.contentCamera","ready"]})],Ri.prototype,"contentCamera",null),v([x({type:ke})],Ri.prototype,"center",null),v([x({type:At})],Ri.prototype,"extent",null),v([x({readOnly:!0})],Ri.prototype,"frustum",null),v([x({readOnly:!0})],Ri.prototype,"hasInitialView",null),v([x({readOnly:!0,type:Boolean})],Ri.prototype,"ready",void 0),v([x({type:Number})],Ri.prototype,"scale",null),v([x()],Ri.prototype,"padding",null),v([x({readOnly:!0})],Ri.prototype,"screenCenter",null),v([x({constructOnly:!0})],Ri.prototype,"view",void 0),v([x({type:_r})],Ri.prototype,"viewpoint",null),v([x({type:Number})],Ri.prototype,"zoom",null),v([x({readOnly:!0})],Ri.prototype,"_pixelRatio",null),v([x({readOnly:!0})],Ri.prototype,"_rasterPixelRatio",null),v([x({readOnly:!0})],Ri.prototype,"_usePhysicalPixelRendering",null),v([x({readOnly:!0})],Ri.prototype,"_usePhysicalPixelRenderingAny",null),v([x()],Ri.prototype,"_windowDevicePixelRatio",void 0),v([x()],Ri.prototype,"_devicePixelRatioOverride",void 0),Ri=v([B("esri.views.3d.state.ViewStateManager")],Ri);const ege=["camera","viewpoint","extent","scale","center","zoom"],tge=[{propertyName:"camera",overrides:["viewpoint"]},{propertyName:"viewpoint",overrides:["extent"]},{propertyName:"extent",overrides:["center","scale"]},{propertyName:"center",overrides:[]},{propertyName:"scale",overrides:["zoom"]},{propertyName:"zoom",overrides:[]},{propertyName:"padding",overrides:[]}],ige={heading:0,tilt:0},n9=new go,Rl=new Ct,Ug=ca(),Bg="pending-initial-view",s9="content-camera-reset",rge=300,nge=100;let sge=class{constructor(){this._tasks=new Array,this._running=Sw(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((s,h)=>this._tasks.push(new TA(s,h,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((s,h)=>this._tasks.unshift(new TA(s,h,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=yo(i.signal);if(s&&!i.abortCallback)i.reject(Xt());else{const h=s?(r=i.abortCallback)==null?void 0:r.call(i,Xt()):i.callback(e);dl(h)?h.then(i.resolve,i.reject):i.resolve(h)}}catch(s){i.reject(s)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=Xt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},TA=class{constructor(e,i,r,s=void 0,h=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=h}},$1=class extends Oe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};v([x()],$1.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),v([x()],$1.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),$1=v([B("esri.views.support.DebugFlags")],$1);const oge=new $1;var z6,ut;(function(t){t[t.YIELD=1]="YIELD"})(z6||(z6={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(ut||(ut={}));const Ko=0,IA=new Map([[ut.RESOURCE_CONTROLLER_IMMEDIATE,Ko],[ut.RESOURCE_CONTROLLER,4],[ut.SLIDE,Ko],[ut.STREAM_DATA_LOADER,Ko],[ut.ELEVATION_QUERY,Ko],[ut.TERRAIN_SURFACE,1],[ut.SURFACE_GEOMETRY_UPDATES,1],[ut.LOD_RENDERER,2],[ut.GRAPHICS_CORE,2],[ut.I3S_CONTROLLER,2],[ut.POINT_CLOUD_LAYER,2],[ut.FEATURE_TILE_FETCHER,2],[ut.OVERLAY,4],[ut.STAGE,4],[ut.GRAPHICS_DECONFLICTOR,4],[ut.FILTER_VISIBILITY,4],[ut.SCALE_VISIBILITY,4],[ut.FRUSTUM_VISIBILITY,4],[ut.CLOUDS_GENERATOR,4],[ut.POINT_OF_INTEREST_FREQUENT,6],[ut.POINT_OF_INTEREST_INFREQUENT,30],[ut.LABELER,8],[ut.FEATURE_QUERY_ENGINE,8],[ut.FEATURE_TILE_TREE,16],[ut.FEATURE_TILE_TREE_ACTIVE,Ko],[ut.ELEVATION_ALIGNMENT,12],[ut.TEXT_TEXTURE_ATLAS,12],[ut.TEXTURE_UNLOAD,12],[ut.LINE_OF_SIGHT_TOOL,16],[ut.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ko],[ut.SNAPPING,Ko],[ut.SHADOW_ACCUMULATOR,30]]);function EA(t){return IA.has(t)?IA.get(t):typeof t=="number"?t:1}const AA=6.5,CA=1,age=30,kA=1e3/30,OA=100,PA=.9;var V6,wh;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(h=>h.needsUpdate)}constructor(){this._updating=Sw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new R1("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Fi.INTERACTING,this._tasks=new jc,this._runQueue=new jc,this._load=0,this._idleStateCallbacks=new jc,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=me(()=>oge.SCHEDULER_LOG_SLOW_TASKS,f=>this._debug=f,_t);for(const f of Object.keys(ut))this.performanceInfo.tasks.set(ut[f],new R1(ut[f]));const h=this;this._test={FRAME_SAFETY_BUDGET:AA,INTERACTING_BUDGET:kA,IDLE_BUDGET:OA,get availableBudget(){return h._budget.budget},usedBudget:0,getBudget:()=>h._budget,setBudget:f=>h._budget=f,updateTask:f=>this._updateTask(f),getState:f=>this._getState(f),getRuntime:f=>this._getRuntime(f),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(h=>h.remove()),this._tasks.clear(),$i(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(h){this._updatingChanged(),h&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(h,f){const m=EA(h),b=new i(this,h,f,m);return this._tasks.push(b),this._updatingChanged(),this.performanceInfo.tasks.has(h)||this.performanceInfo.tasks.set(h,new R1(h)),b}registerIdleStateCallbacks(h,f){const m={idleBegin:h,idleEnd:f};this._idleStateCallbacks.push(m),this.state===Fi.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const b=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin(S){b._idleUpdatesStartFired&&(m.idleEnd(),b._state===Fi.IDLE&&S()),m.idleBegin=S},set idleEnd(S){m.idleEnd=S}}}get load(){return this._load}set state(h){this._state!==h&&(this._state=h,this.state!==Fi.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(f=>f.idleEnd())))}get state(){return this._state}updateBudget(h){this._test.usedBudget=0,++this._frameNumber;let f=AA,m=h.frameDuration,b=CA;switch(this.state){case Fi.IDLE:f=0,m=Math.max(OA,h.frameDuration),b=age;break;case Fi.INTERACTING:m=Math.max(kA,h.frameDuration);case Fi.ANIMATING:}return m=m-h.elapsedFrameTime-f,this.state!==Fi.IDLE&&m<CA&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,b),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Fi.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(h=>h.idleBegin())),this._runIdle();break;case Fi.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(h){this._idleUpdatesStartFired&&h.idleEnd(),this._idleStateCallbacks.removeUnordered(h)}removeTask(h){this._tasks.removeUnordered(h),this._runQueue.removeUnordered(h),this._updatingChanged()}_updateTask(h){this._tasks.forAll(f=>{f.name===h&&f.setPriority(h)})}_getState(h){if(this._runQueue.some(m=>m.name===h))return wh.SCHEDULED;let f=wh.IDLE;return this._tasks.forAll(m=>{m.name===h&&m.needsUpdate&&(m.schedulePriority<=1?f=wh.READY:f!==wh.READY&&(f=wh.WAITING))}),f}_getRuntime(h){let f=0;return this._tasks.forAll(m=>{m.name===h&&(f+=m.runtime)}),f}_resetRuntimes(){this._tasks.forAll(h=>h.runtime=0)}_getRunning(){const h=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&h.set(m.name,(h.get(m.name)||0)+1)}),h.size===0)return null;let f="";return h.forEach((m,b)=>{f+=m>1?` ${m}x ${b}`:` ${b}`}),f}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const h=this._tasks.reduce((f,m)=>m.needsUpdate?++f:f,0);this._load=this._load*PA+h*(1-PA)}_schedule(){for(this._runQueue.filterInPlace(h=>!!h.needsUpdate||(h.schedulePriority=h.basePriority,!1)),this._tasks.forAll(h=>{h.basePriority===Ko&&h.needsUpdate&&!this._runQueue.includes(h)&&h.blockFrame!==this._frameNumber&&this._runQueue.unshift(h)});this._runQueue.length===0;){let h=!1,f=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==Ko&&m.blockFrame!==this._frameNumber&&(h=!0,f=Math.max(f,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!h)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const h=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const f=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===z6.YIELD&&(m.blockFrame=this._frameNumber)}catch(S){fe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,S)}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,ut.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const b=this._budget.now()-f;if(m.runtime+=b,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+b),this._debug&&b>2*this._budget.budget&&console.log("Task",m.name,"used",b,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-h)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-h)}_startFrameTaskTimes(){for(const h of Object.keys(ut))this._frameTaskTimes.set(ut[h],0)}_recordFrameTaskTimes(h){this._frameTaskTimes.forEach((f,m)=>this.performanceInfo.tasks.get(m).record(f)),this.performanceInfo.total.record(h)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(h,f,m,b){this._scheduler=h,this.name=f,this._basePriority=b,this.blockFrame=0,this.runtime=0,this._queue=new sge,this._handles=new Mn,this.schedulePriority=this._basePriority,this._task=Sw(m??this._queue),this._handles.add(Sn(()=>this.task.running,S=>h.taskRunningChanged(S)))}remove(){this.processQueue(BV),this._scheduler.removeTask(this),this.schedule=G6.schedule,this.reschedule=G6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(h){this.name=h;const f=EA(h);this._basePriority!==Ko&&this.schedulePriority===0||(this.schedulePriority=f),this._basePriority=f}get priority(){return this.name}set priority(h){this.setPriority(h)}get needsUpdate(){return this.updating||this.task.running}schedule(h,f,m){return this._queue.push(h,f,m)}reschedule(h,f,m){return this._queue.unshift(h,f,m)}processQueue(h){this._queue.runTask(h)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Fi.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(h){return!this.done&&(h()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(h){this._enabled=h}reset(h,f){this._begin=this.now(),this._budget=h,this._state=f,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(V6||(V6={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(wh||(wh={}));const BV=(()=>{const t=new V6.Budget;return t.enabled=!1,t})();let lge=class{remove(){}processQueue(){}schedule(e,i,r){try{if(yo(i)){const s=Xt();return r?Promise.resolve(r(s)):Promise.reject(s)}return E9(e(BV))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const G6=new lge;let T1=class extends Oe{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ut.TEXTURE_UNLOAD))??G6}normalizeCtorArgs(){return{}}destroy(){var e,i,r;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(s=>this._releaseTextureRequest(s)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){const s=this.makeUid(e);let h=this._textureRequests.get(s);if(!h){const f=i();h={referenceCount:0,texture:f,textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(f),this._stage.loadImmediate(f)),this._textureRequests.set(s,h)}return h.referenceCount++,{uid:s,texture:h.texture,release:()=>this._release(s)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};v([x()],T1.prototype,"_frameTask",void 0),v([x()],T1.prototype,"updating",null),T1=v([B("esri.views.3d.support.TextureCollection")],T1);var RA;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(RA||(RA={}));const HV=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],WV={};function JV(t){return!!WV[t]}function uge(t){for(const e of t)if(!JV(e))return!1;return!0}HV.forEach(t=>{WV[t]=!0});let hge=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},s)=>{var h;return(h=this.inputManager)==null?void 0:h.installHandlers(s,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const h=Array.isArray(e)?e:e.split(",");if(!uge(h))return h.some(JV)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let f,m;Array.isArray(i)?m=i:(f=i,m=[]),typeof r=="function"?f=r:s=r,s=s??Uu.DEFAULT;const b=this._createUniqueGroupName(),S=new cge(this.view,h,m,f);this._handlers.set(b,{handler:S,priority:s});for(const I of h){const A=this._handlerCounts.get(I)||0;this._handlerCounts.set(I,A+1)}return this.inputManager&&this.inputManager.installHandlers(b,[S],s),{remove:()=>this._removeHandler(b,h)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},cge=class extends rr{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const h of i)switch(h){case"click":this.registerIncoming("click",r,f=>s(this._wrapClick(f)));break;case"double-click":this.registerIncoming("double-click",r,f=>s(this._wrapDoubleClick(f)));break;case"immediate-click":this.registerIncoming("immediate-click",r,f=>s(this._wrapImmediateClick(f)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,f=>s(this._wrapImmediateDoubleClick(f)));break;case"hold":this.registerIncoming("hold",r,f=>s(this._wrapHold(f)));break;case"drag":this.registerIncoming("drag",r,f=>{const m=this._wrapDrag(f);m&&s(m)});break;case"key-down":this.registerIncoming("key-down",r,f=>s(this._wrapKeyDown(f)));break;case"key-up":this.registerIncoming("key-up",r,f=>s(this._wrapKeyUp(f)));break;case"pointer-down":this.registerIncoming("pointer-down",r,f=>s(this._wrapPointer(f,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,f=>s(this._wrapPointer(f,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,f=>s(this._wrapPointer(f,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,f=>s(this._wrapPointerDrag(f)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,f=>s(this._wrapMouseWheel(f)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,f=>s(this._wrapPointer(f,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,f=>s(this._wrapPointer(f,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,f=>{s(this._wrapGamepad(f))});break;case"focus":this.registerIncoming("focus",r,f=>{s(this._wrapFocus(f))});break;case"blur":this.registerIncoming("blur",r,f=>{s(this._wrapBlur(f))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:s,x:h,y:f,native:m,eventId:b}=e.data,{cancelable:S,timestamp:I}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:h,y:f,native:m,timestamp:I,screenPoint:Ur(h,f),mapPoint:this._getMapPoint(h,f),eventId:b,cancelable:S,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:s,x:h,y:f,native:m,eventId:b}=e.data,{cancelable:S,timestamp:I}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:h,y:f,native:m,timestamp:I,mapPoint:this._getMapPoint(h,f),eventId:b,cancelable:S,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:s,x:h,y:f,native:m,eventId:b}=e.data,S=m.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-click",pointerId:S,pointerType:i,button:r,buttons:s,x:h,y:f,native:m,timestamp:A,mapPoint:this._getMapPoint(h,f),eventId:b,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:O=>e.async(O),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:s,x:h,y:f,native:m,eventId:b}=e.data,S=m.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-double-click",pointerId:S,pointerType:i,button:r,buttons:s,x:h,y:f,native:m,timestamp:A,mapPoint:this._getMapPoint(h,f),eventId:b,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:O=>e.async(O),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:s,x:h,y:f,native:m}=e.data,{cancelable:b,timestamp:S}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:h,y:f,native:m,timestamp:S,mapPoint:this._getMapPoint(h,f),cancelable:b,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Ur(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:h,pointerType:f,button:m}=i;if(h==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const b=i.pointer.native,S=i.buttons,{cancelable:I,timestamp:A}=e,O={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return h==="end"&&(this._latestDragStart=void 0),{type:"drag",action:h,x:r,y:s,origin:O,pointerType:f,button:m,buttons:S,radius:i.radius,angle:Ms(i.angle),native:b,timestamp:A,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:R=>e.async(R),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:s}=e.data,{cancelable:h,timestamp:f}=e;return{type:"key-down",key:i,repeat:r,native:s,timestamp:f,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:s,timestamp:h}=e;return{type:"key-up",key:i,native:r,timestamp:h,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:s,button:h,buttons:f,native:m,eventId:b}=e.data,S=m.pointerId,I=m.pointerType,{cancelable:A,timestamp:O}=e;return{type:i,x:r,y:s,pointerId:S,pointerType:I,button:h,buttons:f,native:m,timestamp:O,eventId:b,cancelable:A,stopPropagation:()=>e.stopPropagation(),async:R=>e.async(R),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:s,native:h,eventId:f}=e.data.currentEvent,{button:m}=e.data.startEvent,b=e.data.startEvent.native.pointerId,S=e.data.startEvent.native.pointerType,I=e.data.action,A={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:O,timestamp:R}=e;return{type:"pointer-drag",x:i,y:r,pointerId:b,pointerType:S,button:m,buttons:s,action:I,origin:A,native:h,timestamp:R,eventId:f,cancelable:O,stopPropagation:()=>e.stopPropagation(),async:L=>e.async(L),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:s}=e,{x:h,y:f,deltaY:m,native:b}=r;return{type:"mouse-wheel",x:h,y:f,deltaY:m,native:b,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:S=>e.async(S),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:s}=e.data,{cancelable:h,timestamp:f}=e,{buttons:m,axes:b}=r;return{type:"gamepad",device:s,timestamp:f,action:i,buttons:m,axes:b,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:S=>e.async(S),preventDefault:()=>e.preventDefault()}}};var Jy,FA,NA;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Jy||(Jy={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(FA||(FA={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(NA||(NA={}));function pge(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return fe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function q6(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(Jy.USER)&&t.getEditableFlag(Jy.MANAGER)}function Go(t){return Ur(t.x,t.y)}function KV(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Ur(e.clientX-i.left,e.clientY-i.top):Ur(0,0)}function LA(t,e){return e instanceof Event?KV(t,e):Go(e)}function jA(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let dge=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}isInteracting(){return this._hoveredManipulators.size>0||this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":DA(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!zA(e))break;const s=Go(e),h=this._intersect(s,e.pointerType,i.forEachTool);if(h==null)break;const f=h.manipulator,m=h.tool;f==null||m==null||!f.interactive||f.grabbable&&f.grabbableForEvent(e)||!f.grabbing||f.dragging||this._ungrabManipulatorBeforeDragging(f,e,i),f!=null&&m!=null&&f.interactive&&f.grabbable&&f.grabbableForEvent(e)&&!f.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:f,tool:m,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(h.tool)),f.grabbing=!0,f.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!zA(e))break;const s=this._grabbedManipulators.get(e.pointerId),h=Au(s,({manipulator:I})=>I),f=Au(s,({tool:I})=>I);if(h==null||f==null)break;const m=Go(e);m.x=fi(m.x,0,i.view.width),m.y=fi(m.y,0,i.view.height);const b=s.start,S=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(h.dragging=!0,S?h.events.emit("drag",{action:"update",start:b,screenPoint:m}):h.events.emit("drag",{action:"start",start:b,screenPoint:m,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:f,manipulator:h,start:b}));break;case"end":h.dragging=!1,S&&h.events.emit("drag",{action:"end",start:b,screenPoint:m}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=Go(e),h=this._intersect(s,e.pointerType,i.forEachTool);if(fge(e)||i.forEachTool(S=>{if((h==null||h.tool!==S||S.automaticManipulatorSelection)&&S.manipulators){let I=!1;S.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,I=!0)}),I&&S.onManipulatorSelectionChanged&&S.onManipulatorSelectionChanged()}}),h==null)break;const{manipulator:f,tool:m}=h;if(!f.interactive)break;f.selectable&&m.automaticManipulatorSelection&&(f.selected=!f.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const b=e.native.shiftKey;f.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:b,stopPropagation:r});break}case"click":{const s=Go(e),h=this._intersect(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m}),r();break}case"double-click":{const s=Go(e),h=this._intersect(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:r});break}case"immediate-double-click":{const s=Go(e),h=this._intersect(s,e.pointerType,i.forEachTool),f=h!=null?h.manipulator:null;if(f==null||!f.interactive)break;const m=e.native.shiftKey;f.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Go(i)}),this._grabbedManipulators.forEach(({manipulator:s},h)=>{s===e&&this._grabbedManipulators.delete(h)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=Au(this._grabbedManipulators.get(e.pointerId),({manipulator:s})=>s);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Go(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return Zw(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),e(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const h=this._grabbedManipulators.values(),f=nq(h,({tool:m})=>m===s);s.firstGrabbedManipulator=f!=null?f.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},s=!0,h){const f=(m,b)=>m===e&&(h==null||h===b);this._grabbedManipulators.forEach(({tool:m,manipulator:b,pointerType:S},I)=>{f(m,b)&&(this._grabbedManipulators.delete(I),b.grabbing=!1,b.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:S}))}),this._draggedManipulators.forEach(({tool:m,manipulator:b},S)=>{f(m,b)&&(this._draggedManipulators.delete(S),b.dragging=!1,b.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:m,manipulator:b},S)=>{f(m,b)&&(this._hoveredManipulators.delete(S),b.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let s=null;return r(h=>{if(h.manipulators==null||!q6(h))return!1;const f=h.manipulators.intersect(e,i);return f!=null&&(s={tool:h,manipulator:f},!0)}),s}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ur(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!DA(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Go(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){let h=this._intersect(e,r,s);const f=Au(this._hoveredManipulators.get(i),({manipulator:m})=>m);h==null||h.manipulator.interactive||(h=null),h!=null&&f===h.manipulator||(f!=null&&(f.hovering=!1),h!=null?(h.manipulator.hovering=!0,this._hoveredManipulators.set(i,h)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function DA(t){return t==="mouse"}function zA(t){return t.pointerType!=="mouse"||t.button===0}function fge(t){return!!t.native.shiftKey}const VA="attached",o9="tools";let eo=class extends hw{constructor(e){super(e),this._manipulatorState=new dge,this.tools=new qe,this.cursor=null,this._interacting=!1,this._interactingTimeoutId=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(HV,e=>{this._handleInputEvent(e)},Uu.TOOL),...pge(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void fe.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=q6(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutId!=null&&(clearTimeout(this._interactingTimeoutId),this._interactingTimeoutId=null)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutId=setTimeout(()=>this._interacting=!1,nge)}attach(){var e;this.view.type==="3d"?(this._set("textures",new T1(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([me(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),$0(()=>this._set("textures",Ut(this.textures)))],VA)):this.handles.add(me(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool!=null&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(VA),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),(this._manipulatorState.isInteracting()||i||this.activeTool!=null&&this.activeTool.interacting)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(o9),this._forEachTool(e=>{if(e instanceof Oe){const i=me(()=>[e.cursor,e.visible,e.editable],()=>{q6(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,o9)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],o9)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,Jy.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}};v([x({constructOnly:!0,nonNullable:!0})],eo.prototype,"view",void 0),v([x({readOnly:!0,nonNullable:!0})],eo.prototype,"textures",void 0),v([x({value:null})],eo.prototype,"activeTool",null),v([x({readOnly:!0,type:qe})],eo.prototype,"tools",void 0),v([x({readOnly:!0})],eo.prototype,"cursor",void 0),v([x({readOnly:!0})],eo.prototype,"updating",null),v([x()],eo.prototype,"_interacting",void 0),v([x({readOnly:!0})],eo.prototype,"interacting",null),eo=v([B("esri.views.ToolViewManager")],eo);const yge=eo;let wd=class extends Oe{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":mge.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return gge[this.deviceType]}};v([x({nonNullable:!0,readOnly:!0})],wd.prototype,"nativeIndex",void 0),v([x({type:String,readOnly:!0})],wd.prototype,"deviceType",null),v([x({type:Number,readOnly:!0})],wd.prototype,"axisThreshold",null),wd=v([B("esri.views.input.gamepad.GamepadInputDevice")],wd);const mge=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),gge={standard:.15,spacemouse:.025,unknown:0},y$=wd;let I1=class extends Oe{constructor(...e){super(...e),this.devices=new qe,this.enabledFocusMode="document"}};v([x({type:qe.ofType(y$),readOnly:!0})],I1.prototype,"devices",void 0),v([x({type:["document","view","none"]})],I1.prototype,"enabledFocusMode",void 0),I1=v([B("esri.views.input.gamepad.GamepadSettings")],I1);const vge=I1;let a2=class extends Oe{constructor(){super(...arguments),this.gamepad=new vge}};v([x({readOnly:!0})],a2.prototype,"gamepad",void 0),a2=v([B("esri.views.input.Input")],a2);const wge=a2;let cu=class extends Oe{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([x({type:Boolean,nonNullable:!0})],cu.prototype,"enabled",void 0),v([x({type:y$})],cu.prototype,"device",void 0),v([x({type:["pan","zoom"],nonNullable:!0})],cu.prototype,"mode",void 0),v([x({type:["forward-down","forward-up"],nonNullable:!0})],cu.prototype,"tiltDirection",void 0),v([x({type:Number,nonNullable:!0})],cu.prototype,"velocityFactor",void 0),cu=v([B("esri.views.navigation.gamepad.GamepadSettings")],cu);const ZV=cu;let oc=class extends Oe{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new ZV,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};v([x({type:Boolean})],oc.prototype,"browserTouchPanEnabled",void 0),v([x({type:ZV,nonNullable:!0})],oc.prototype,"gamepad",void 0),v([x({type:Boolean})],oc.prototype,"momentumEnabled",void 0),v([x({type:Boolean})],oc.prototype,"mouseWheelZoomEnabled",void 0),oc=v([B("esri.views.navigation.Navigation")],oc);const YV=oc;var GA;function bge(t){var r;const e=t.url?q0(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&XV(t)&&t.heightModelInfo?t.heightModelInfo:_ge(t)?Pb.deriveUnitFromSR(Sge,t.spatialReference):null}function XV(t){return"heightModelInfo"in t}function QV(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function _ge(t){return QV(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):eG(t)}function xge(t){return t.layers!=null||eG(t)||QV(t)||XV(t)}function eG(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(GA||(GA={}));const Sge=new Pb({heightModel:"gravity-related-height"});let U6,a9=null;async function Mge(t){a9||(a9=he(()=>import("./geometryServiceUtils-ae711b7b.js"),[]).then(e=>U6=e)),await a9,Oi(t)}async function tG(t,e,i,r){if(!t)return null;const s=t.spatialReference;return rp()||Ku(s,e)?ah(t,e):U6?U6.projectGeometry(t,e,i,r):(await Promise.race([Mge(r),np(r)]),tG(t,e,i,r))}let Kt=class extends Oe{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=cy(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,s,h,f;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(h=e==null?void 0:e.ground)==null?void 0:h.layers},{parent:e==null?void 0:e.basemap,layers:(f=e==null?void 0:e.basemap)==null?void 0:f.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const h of e){const f=this._getSupportedSpatialReferences(h);if(f.length>0){const m=this._narrowDownSpatialReferenceCandidates(r,f);m!=null&&(r=m)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(r);return{spatialReference:s!=null?s.spatialReference:null,viewingMode:s!=null?s.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,s,h,f,m,b,S;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(m=(f=(h=this.map)==null?void 0:h.call(this))==null?void 0:f.basemap)==null?void 0:m.baseLayers},{layers:(S=(b=this.map)==null?void 0:b.call(this))==null?void 0:S.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const I=e[0].tileInfo;return{tileInfo:I&&I.spatialReference.equals(this.spatialReference)?I:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,s,h;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const f of e)if(xge(f)){const m=bge(f);if(m)return{heightModelInfo:m,vcsWkid:(s=f.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(h=f.spatialReference)==null?void 0:h.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const s of e.layers){const h="fullExtents"in s&&s.fullExtents||(s.fullExtent!=null?[s.fullExtent]:[]),f=this.requiresExtentInSpatialReference?null:h[0],m=h.find(b=>b.spatialReference.equals(this.spatialReference))??f;if(m)return{candidates:[{extent:m,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const b of h)r.push({extent:b,layer:s})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=cy(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:qk(async h=>{try{const f=await tG(r.extent,s,r.layer.portalItem,h);this._projectExtentTask={...this._projectExtentTask,task:null,output:f}}catch{if(yo(h))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],s=(h,f)=>h!=null?f!=null?h===f&&h:h:f;for(const h of e)for(const f of i){if(!h.spatialReference.equals(f.spatialReference))continue;const m=s(h.viewingMode,f.viewingMode);if(m!==!1){r.push({spatialReference:h.spatialReference,viewingMode:m});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==tr.Local)&&(e=e.filter(({viewingMode:r})=>r!==tr.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const h=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(h!=null){const f=h.constraints!=null?h.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:m,viewingMode:b}of f)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||r.push({spatialReference:m,viewingMode:b})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new $ge;for(const s of e)if(this._collectCollection(s,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>console.log(i)),"loading"):e.loadStatus:"loaded"}};v([x()],Kt.prototype,"required",void 0),v([x({constructOnly:!0})],Kt.prototype,"map",void 0),v([x({constructOnly:!0})],Kt.prototype,"getSpatialReferenceSupport",void 0),v([x()],Kt.prototype,"defaultSpatialReference",void 0),v([x()],Kt.prototype,"userSpatialReference",void 0),v([x()],Kt.prototype,"sourcePreloadCount",void 0),v([x()],Kt.prototype,"priorityCollection",void 0),v([x()],Kt.prototype,"requiresExtentInSpatialReference",void 0),v([x()],Kt.prototype,"suspended",void 0),v([x({readOnly:!0})],Kt.prototype,"ready",null),v([x({readOnly:!0})],Kt.prototype,"heightModelInfoReady",null),v([x({readOnly:!0})],Kt.prototype,"spatialReference",null),v([x({readOnly:!0})],Kt.prototype,"extent",null),v([x({readOnly:!0})],Kt.prototype,"heightModelInfo",null),v([x({readOnly:!0})],Kt.prototype,"vcsWkid",null),v([x({readOnly:!0})],Kt.prototype,"latestVcsWkid",null),v([x({readOnly:!0})],Kt.prototype,"viewingMode",null),v([x({readOnly:!0})],Kt.prototype,"tileInfo",null),v([x({readOnly:!0})],Kt.prototype,"mapCollections",null),v([x({readOnly:!0})],Kt.prototype,"_allLayers",null),v([x({readOnly:!0})],Kt.prototype,"_spatialReferenceTask",null),v([x({readOnly:!0})],Kt.prototype,"_tileInfoTask",null),v([x({readOnly:!0})],Kt.prototype,"_heightModelInfoTask",null),v([x({readOnly:!0})],Kt.prototype,"_extentCandidatesTask",null),v([x()],Kt.prototype,"_extentTask",null),v([x()],Kt.prototype,"_projectExtentTask",void 0),Kt=v([B("esri.views.support.DefaultsFromMap")],Kt);let $ge=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var E1;let Ge=E1=class extends gp(pa.EventedMixin(Qw(Oe))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new _y({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:Ige}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new sy,this.analyses=new Mw,this.typeSpecificPreconditionsReady=!0,this.layerViews=new qe,this.magnifier=new QD,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new g0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new wge,this.navigation=new YV,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new hge(this),this.persistableViewModels=new qe,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(me(()=>this.preconditionsReady,e=>{var i,r;e?(this._currentSpatialReference=this.spatialReference,E1.views.add(this)):(this._currentSpatialReference=null,E1.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},qn))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,vb(()=>this.ready)))),this.basemapView=new uu({view:this}),this.layerViewManager=new dde({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new yge({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([me(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),me(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),me(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([me(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const s=$0(()=>t=cy(t));t=qk(async h=>{try{await Jw(this.spatialReferenceWarningDelay,null,h)}catch{return}finally{t=null}fe.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(E1.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ut(this.graphics),this.analyses=Ut(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ut(this.analysisViewManager),this.toolViewManager=Ut(this.toolViewManager),this.layerViewManager=Ut(this.layerViewManager),this.basemapView=Ut(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Ut(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return fe.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Kt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ol.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(fe.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:t}),t=null),ol.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!ir(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new ne("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&fe.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Sn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Ge.views=new qe,v([x()],Ge.prototype,"_userSpatialReference",void 0),v([x()],Ge.prototype,"activeTool",null),v([x({readOnly:!0})],Ge.prototype,"allLayerViews",void 0),v([x()],Ge.prototype,"groundView",void 0),v([x()],Ge.prototype,"animation",null),v([x()],Ge.prototype,"basemapView",void 0),v([x()],Ge.prototype,"center",null),v([x({readOnly:!0})],Ge.prototype,"_defaultsFromMapSettings",null),v([x()],Ge.prototype,"defaultsFromMap",null),v([x()],Ge.prototype,"fatalError",void 0),v([x({type:At})],Ge.prototype,"extent",null),v([x(sA(sy,"graphics"))],Ge.prototype,"graphics",void 0),v([x(sA(Mw,"analyses"))],Ge.prototype,"analyses",void 0),v([x({readOnly:!0,type:Pb})],Ge.prototype,"heightModelInfo",null),v([x({readOnly:!0})],Ge.prototype,"interacting",null),v([x({readOnly:!0})],Ge.prototype,"navigating",null),v([x({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ge.prototype,"preconditionsReady",null),v([x({readOnly:!0})],Ge.prototype,"typeSpecificPreconditionsReady",void 0),v([x({type:qe,readOnly:!0})],Ge.prototype,"layerViews",void 0),v([x()],Ge.prototype,"resolution",null),v([x({type:QD})],Ge.prototype,"magnifier",void 0),v([x({value:null,type:SP})],Ge.prototype,"map",null),v([x()],Ge.prototype,"padding",void 0),v([x({readOnly:!0})],Ge.prototype,"ready",void 0),v([x({type:Ye})],Ge.prototype,"spatialReference",null),v([x()],Ge.prototype,"spatialReferenceWarningDelay",void 0),v([x()],Ge.prototype,"stationary",null),v([x({readOnly:!0})],Ge.prototype,"supportsGround",void 0),v([x({type:fa})],Ge.prototype,"timeExtent",void 0),v([x({type:g0,nonNullable:!0})],Ge.prototype,"timeReference",void 0),v([x()],Ge.prototype,"tools",null),v([x()],Ge.prototype,"toolViewManager",void 0),v([x({readOnly:!0})],Ge.prototype,"type",void 0),v([x({type:Number})],Ge.prototype,"scale",void 0),v([x({readOnly:!0})],Ge.prototype,"updating",void 0),v([x({readOnly:!0})],Ge.prototype,"initialExtentRequired",void 0),v([x({readOnly:!0})],Ge.prototype,"initialExtent",null),v([x()],Ge.prototype,"cursor",null),v([x({readOnly:!0})],Ge.prototype,"input",void 0),v([x({type:YV,nonNullable:!0})],Ge.prototype,"navigation",void 0),v([x()],Ge.prototype,"layerViewManager",void 0),v([x()],Ge.prototype,"analysisViewManager",void 0),v([x()],Ge.prototype,"width",void 0),v([x()],Ge.prototype,"height",void 0),v([x({readOnly:!0})],Ge.prototype,"resizing",void 0),v([x({value:null,readOnly:!0})],Ge.prototype,"size",null),v([x({readOnly:!0})],Ge.prototype,"suspended",void 0),v([x({readOnly:!0})],Ge.prototype,"viewEvents",void 0),v([x({readOnly:!0})],Ge.prototype,"persistableViewModels",void 0),v([x()],Ge.prototype,"_isValid",void 0),v([x()],Ge.prototype,"_readyCycleForced",void 0),v([x()],Ge.prototype,"_currentSpatialReference",void 0),Ge=E1=v([B("esri.views.View")],Ge);const Tge=Ge;function Ige(t){return t.layerViews}function bc(t,e,i,r){const s=3*t,h=3*(i-t)-s,f=1-s-h,m=3*e,b=3*(r-e)-m,S=1-m-b;function I(L){return((f*L+h)*L+s)*L}function A(L){return((S*L+b)*L+m)*L}function O(L){return(3*f*L+2*h)*L+s}function R(L,z){let j,H,Y,X,te,oe;for(Y=L,oe=0;oe<8;oe++){if(X=I(Y)-L,Math.abs(X)<z)return Y;if(te=O(Y),Math.abs(te)<1e-6)break;Y-=X/te}if(j=0,H=1,Y=L,Y<j)return j;if(Y>H)return H;for(;j<H;){if(X=I(Y),Math.abs(X-L)<z)return Y;L>X?j=Y:H=Y,Y=.5*(H-j)+j}return Y}return function(L,z=1e-6){return A(R(L,z))}}const Ege=/^cubic-bezier\((.*)\)/,ds={};function Age(t){let e=ds[t]||null;if(!e){const i=Ege.exec(t);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(e=bc.apply(bc,r))}}return e}ds.ease=bc(.25,.1,.25,1),ds.linear=bc(0,0,1,1),ds.easeIn=ds["ease-in"]=bc(.42,0,1,1),ds.easeOut=ds["ease-out"]=bc(0,0,.58,1),ds.easeInOut=ds["ease-in-out"]=bc(.42,0,.58,1);function Bu(){return[1,0,0,1,0,0]}function Cge(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function kge(t,e,i,r,s,h){return[t,e,i,r,s,h]}function Oge(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Cge,create:Bu,createView:Oge,fromValues:kge},Symbol.toStringTag,{value:"Module"}));const iG=96,rG=39.37,Pge=180/Math.PI;function nG(t){return t.wkid?t:t.spatialReference||Ye.WGS84}function m$(t,e){return e.type?ur(t,e.x,e.y):w0(t,e)}function sG(t){return yl(t)}function hy(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*Gge(t.spatialReference)}async function A1(t,e,i,r){var m,b;let s,h;if(!t||Array.isArray(t)&&!t.length)return null;if(qe.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const S=t.every(O=>"attributes"in O),I=t.some(O=>!O.geometry);let A=t;if(S&&I&&e&&e.allLayerViews){const O=new Map;for(const j of t){const H=j.layer,Y=O.get(H)||[],X=j.attributes[H.objectIdField];X!=null&&Y.push(X),O.set(H,Y)}const R=[];O.forEach((j,H)=>{const Y=e.allLayerViews.find(X=>X.layer.id===H.id);if(Y&&"queryFeatures"in Y){const X=H.createQuery();X.objectIds=j,X.returnGeometry=!0,R.push(Y.queryFeatures(X))}});const L=await Promise.all(R),z=[];for(const j of L)if(j&&j.features&&j.features.length)for(const H of j.features)H.geometry!=null&&z.push(H.geometry);A=z}for(const O of A)r=await A1(O,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new ke(t);else if(t instanceof ml)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const S=t.layer,I=e.allLayerViews.find(A=>A.layer.id===S.id);if(I&&"queryFeatures"in I){const A=S.createQuery();A.objectIds=[t.attributes[S.objectIdField]],A.returnGeometry=!0;const O=await I.queryFeatures(A);s=(b=(m=O==null?void 0:O.features)==null?void 0:m[0])==null?void 0:b.geometry}}}if(s==null||(h=s.type==="point"?new At({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!h))return null;rp()||Ku(h.spatialReference,i)||await np();const f=ah(h,i);return f?r=r?r.union(f):f:null}function Rge(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const s=r.layer;s&&s.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,i=s.maxScale>i?s.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function l9(t,e){return ir(nG(t),e)?t:ah(t,e)}async function Fge(t,e){if(!t||!e)return new _r({targetGeometry:new ke,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:h,size:f}=e,m=[s?f[0]-s.left-s.right:f[0],s?f[1]-s.top-s.bottom:f[1]];let b=null;t instanceof _r?b=t:t.viewpoint?b=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(b=t.target);let S=null;b&&b.targetGeometry?S=b.targetGeometry:t instanceof At?S=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(S=await A1(t.center,e,i)||await A1(t.extent,e,i)||await A1(t.target,e,i)||await A1(t,e,i)),!S&&h&&h.targetGeometry?S=h.targetGeometry:!S&&e.extent&&(S=e.extent),i||(i=nG(e.spatialReference||e.extent||S)),rp()||ir(S.spatialReference,i)||Ku(S,i)||await np();const I=l9(S.center??S,i);let A=0;if(b&&b.targetGeometry!=null&&b.targetGeometry.type==="point")A=b.scale;else if("scale"in t&&t.scale)A=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)A=r.zoomToScale(t.zoom);else if(Array.isArray(S)||S.type==="point"||S.type==="extent"&&S.width===0&&S.height===0){const z=l9(e.extent,i);A=z!=null?hy(z,m):e.extent?hy(e.extent,m):h.scale}else A=hy(l9(S.extent,i),m);const O=Rge(t);O&&(O.min&&O.min>A?A=O.min:O.max&&O.max<A&&(A=O.max));let R=0;b?R=b.rotation:t.hasOwnProperty("rotation")?R=t.rotation:h&&(R=h.rotation);let L=new _r({targetGeometry:I,scale:A,rotation:R});return r&&(L=r.fit(L),r.constrainByGeometry(L),r.rotationEnabled||(L.rotation=R)),L}function _o(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Nge(t,e,i){return i?ur(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Cm(t,e,.5)}const Lge=function(){const t=Pi();return function(e,i,r){const s=i.targetGeometry;m$(t,s);const h=.5*Q0(i);return e.xmin=t[0]-h*r[0],e.ymin=t[1]-h*r[1],e.xmax=t[0]+h*r[0],e.ymax=t[1]+h*r[1],e.spatialReference=s.spatialReference,e}}();function jge(t,e,i,r,s){return B6(t,e,i.center),t.scale=hy(i,r),s&&s.constraints&&s.constraints.constrain(t),t}function Dge(t,e,i,r){return w$(t,e,i,r),EM(t,t)}const oG=function(){const t=Pi();return function(e,i,r){return a$(e,qge(e,i),Nge(t,i,r))}}(),zge=function(){const t=Bu(),e=Pi();return function(i,r,s,h){const f=Q0(r),m=g$(r);return ur(e,f,f),JD(t,e),Vb(t,t,m),Vy(t,t,oG(e,s,h)),Vy(t,t,[0,h.top-h.bottom]),ur(i,t[4],t[5])}}();function Q0(t){return t.scale*Vge(t.targetGeometry)}function Vge(t){return t!=null&&pr(t.spatialReference)?1/(sG(t.spatialReference)*rG*iG):1}function g$(t){return jS(t.rotation)||0}function Gge(t){return pr(t)?sG(t)*rG*iG:1}function qge(t,e){return Cm(t,e,.5)}const v$=function(){const t=Pi(),e=Pi(),i=Pi();return function(r,s,h,f,m,b){return gV(t,s),Cm(e,h,.5*b),ur(i,1/f*b,-1/f*b),CM(r,e),m&&Vb(r,r,m),AM(r,r,i),Vy(r,r,t),r}}(),w$=function(){const t=Pi();return function(e,i,r,s){const h=Q0(i),f=g$(i);return m$(t,i.targetGeometry),v$(e,t,r,h,f,s)}}(),Uge=function(){const t=Pi();return function(e,i,r,s){const h=Q0(i);return m$(t,i.targetGeometry),v$(e,t,r,h,0,s)}}();function Bge(t){const e=fo(t);return e?e.valid[1]-e.valid[0]:0}function Hge(t,e){return Math.round(Bge(t)/e)}const Wge=function(){const t=Pi(),e=Pi(),i=[0,0,0];return function(r,s,h){Hy(t,r,s),R6(t,t),Hy(e,r,h),R6(e,e),wV(i,t,e);let f=Math.acos(vV(t,e)/(Cw(t)*Cw(e)))*Pge;return i[2]<0&&(f=-f),isNaN(f)&&(f=0),f}}(),Jge=function(){const t=Pi();return function(e,i,r,s){const h=e.targetGeometry;return _o(e,i),zge(t,i,r,s),h.x+=t[0],h.y+=t[1],e}}(),B6=function(t,e,i){_o(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},Kge=function(){const t=Pi();return function(e,i,r,s,h){h||(h="center"),a$(t,r,s),Cm(t,t,.5);const f=t[0],m=t[1];switch(h){case"center":ur(t,0,0);break;case"left":ur(t,-f,0);break;case"top":ur(t,0,m);break;case"right":ur(t,f,0);break;case"bottom":ur(t,0,-m);break;case"top-left":ur(t,-f,m);break;case"bottom-left":ur(t,-f,-m);break;case"top-right":ur(t,f,m);break;case"bottom-right":ur(t,f,-m)}return e3(e,i,t),e}}();function c6e(t,e,i){return _o(t,e),t.rotation+=i,t}function Zge(t,e,i){return _o(t,e),t.rotation=i,t}const Yge=function(){const t=Pi();return function(e,i,r,s,h){return _o(e,i),isNaN(r)||r===0||(lG(t,s,i,h),e.scale=i.scale*r,uG(t,t,e,h),e3(e,e,ur(t,t[0]-s[0],s[1]-t[1]))),e}}();function qA(t,e,i){return _o(t,e),t.scale=i,t}const aG=function(){const t=Pi();return function(e,i,r,s,h,f){return _o(e,i),isNaN(r)||r===0||(lG(t,h,i,f),e.scale=i.scale*r,e.rotation+=s,uG(t,t,e,f),e3(e,e,ur(t,t[0]-h[0],h[1]-t[1]))),e}}(),p6e=function(){const t=Pi(),e=Pi();return function(i,r,s,h,f,m,b){return oG(e,m,b),dV(t,f,e),h?aG(i,r,s,h,t,m):Yge(i,r,s,t,m)}}(),lG=function(){const t=Bu();return function(e,i,r,s){return Yo(e,i,Dge(t,r,s,1))}}(),uG=function(){const t=Bu();return function(e,i,r,s){return Yo(e,i,w$(t,r,s,1))}}(),e3=function(){const t=Pi(),e=Bu();return function(i,r,s){_o(i,r);const h=Q0(r),f=i.targetGeometry;return WD(e,g$(r)),AM(e,e,K0(h,h)),Yo(t,s,e),f.x+=t[0],f.y+=t[1],i}}();let Xge=class{constructor(e,i,r,s){const h=e.targetGeometry,f=i.targetGeometry;s?typeof s=="string"&&(s=Age(s)||ds.ease):s=ds.ease,this.easing=s,this.duration=r,this.sCenterX=h.x,this.sCenterY=h.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=f.x,this.tCenterY=f.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let s,h,f,m;i>=1?(s=this.tCenterX,h=this.tCenterY,f=this.tRotation,m=this.tScale):(s=this.sCenterX+r*this.dCenterX,h=this.sCenterY+r*this.dCenterY,f=this.sRotation+r*this.dRotation,m=this.sScale+r*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=h,e.scale=m,e.rotation=f}},Ga=class extends Oe{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=ds.ease,this.view=null,this.viewpoint=new _r({targetGeometry:new ke,scale:0,rotation:0}),this._updateTask=Wc({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=$i(this._updateTask)}animate(e,i,r){this.stop();const s=this.viewpoint;_o(s,i),this.transition=new Xge(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const h=()=>{var f,m;this.animation===e&&this._updateTask&&(e.state==="finished"&&((f=this.transition)==null||f.applyRatio(this.viewpoint,1),(m=this.view)!=null&&m.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(h,h),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new v0({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,s;const i=this.animation;if(i&&i.state!==v0.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const h=this.transition,f=(performance.now()-this._startTime)/h.duration,m=f>=1;h.applyRatio(this.viewpoint,f),m&&((r=this.animation)==null||r.finish())}(s=this.view)!=null&&s.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};v([x()],Ga.prototype,"animation",void 0),v([x()],Ga.prototype,"duration",void 0),v([x()],Ga.prototype,"transition",void 0),v([x()],Ga.prototype,"easing",void 0),v([x()],Ga.prototype,"view",void 0),v([x()],Ga.prototype,"viewpoint",void 0),Ga=v([B("esri.views.2d.AnimationManager")],Ga);const Qge=Ga;let eve=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var m,b;if(this._updateRequested=!1,(m=this.view)==null?void 0:m.destroyed)return;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:h,state:{id:f}}=this.view;i==null||i.baseLayerViews.forEach(this._updateLayerView,this),h.forEach(this._updateLayerView,this),i==null||i.referenceLayerViews.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==f&&(s.viewChange(),s.lastUpdateId=f),s.updateRequested&&s.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==f&&(r.viewChange(),r.lastUpdateId=f),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((b=this._frameTaskHandle)==null||b.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=me(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Wc(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function Si(){return Promise.all([he(()=>import("./webglDeps-f4b4e0ef.js"),["assets/webglDeps-f4b4e0ef.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/ProgramTemplate-8c949420.js","assets/programUtils-7ee36e52.js","assets/NestedMap-1b5db22e.js"]),he(()=>import("./mapViewDeps-8253194a.js"),["assets/mapViewDeps-8253194a.js","assets/MagnifierPrograms-b25e2fb7.js","assets/_commonjsHelpers-2f3e7994.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/rasterizingUtils-5a45b7fc.js","assets/imageutils-ef43dce9.js","assets/Matcher-249049b5.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-ef508845.js","assets/DisjointTimerQuery-b21930a9.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/BufferPool-c2393100.js","assets/enums-fb086c25.js","assets/programUtils-7ee36e52.js","assets/NestedMap-1b5db22e.js","assets/RenderingContext-8ec1d092.js","assets/OrderIndependentTransparency-5206b14a.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-a0b95b08.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/GraphicContainer-2839983b.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/TileContainer-b9b34a1c.js","assets/requestImageUtils-4b82835b.js"])])}const Ef=()=>Si().then(()=>he(()=>import("./TileLayerView2D-29e4356a.js"),["assets/TileLayerView2D-29e4356a.js","assets/MagnifierPrograms-b25e2fb7.js","assets/_commonjsHelpers-2f3e7994.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/rasterizingUtils-5a45b7fc.js","assets/imageutils-ef43dce9.js","assets/Matcher-249049b5.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-ef508845.js","assets/DisjointTimerQuery-b21930a9.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/BufferPool-c2393100.js","assets/enums-fb086c25.js","assets/OrderIndependentTransparency-5206b14a.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-a0b95b08.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/imageUtils-7d17d86d.js","assets/BitmapTileContainer-d50b6f30.js","assets/Bitmap-5664d6d8.js","assets/TileContainer-b9b34a1c.js","assets/LayerView-09aca90e.js","assets/HighlightGraphicContainer-63f94b84.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/RefreshableLayerView-6acb3488.js","assets/drapedUtils-508d4bed.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-d3728a7a.js","assets/popupUtils-ebcf7fd5.js"])),Fp=()=>Si().then(()=>he(()=>import("./FeatureLayerView2D-2cc1d5c1.js"),["assets/FeatureLayerView2D-2cc1d5c1.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/LayerView-09aca90e.js","assets/schemaUtils-17781e9a.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/utils-8297914d.js","assets/MaterialKey-558bebf6.js","assets/visualVariablesUtils-15c65c16.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/util-802c5b03.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),UA={"base-dynamic":()=>Si().then(()=>he(()=>import("./BaseDynamicLayerView2D-31c8ab08.js"),["assets/BaseDynamicLayerView2D-31c8ab08.js","assets/BitmapContainer-b91ea79c.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/ExportStrategy-81adfb55.js","assets/Bitmap-5664d6d8.js","assets/RefreshableLayerView-6acb3488.js"])),"base-tile":Ef,"bing-maps":Ef,csv:Fp,"geo-rss":()=>Si().then(()=>he(()=>import("./GeoRSSLayerView2D-509e27f2.js"),["assets/GeoRSSLayerView2D-509e27f2.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/GraphicContainer-2839983b.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/VertexArrayObject-01ae6462.js","assets/TileContainer-b9b34a1c.js","assets/WGLContainer-e3cf0f79.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js"])),feature:Fp,geojson:Fp,graphics:()=>Si().then(()=>he(()=>import("./GraphicsLayerView2D-6357b1f9.js"),["assets/GraphicsLayerView2D-6357b1f9.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/GraphicContainer-2839983b.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/VertexArrayObject-01ae6462.js","assets/TileContainer-b9b34a1c.js","assets/WGLContainer-e3cf0f79.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js"])),group:()=>Si().then(()=>he(()=>import("./GroupLayerView2D-51c39e5c.js"),["assets/GroupLayerView2D-51c39e5c.js","assets/GroupContainer-970fc9eb.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js"])),imagery:()=>Si().then(()=>he(()=>import("./ImageryLayerView2D-01d1e89f.js"),["assets/ImageryLayerView2D-01d1e89f.js","assets/RasterVFDisplayObject-62eebb0b.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1e2e12a8.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/HighlightGraphicContainer-63f94b84.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/TileContainer-b9b34a1c.js","assets/BitmapContainer-b91ea79c.js","assets/Bitmap-5664d6d8.js","assets/ExportStrategy-81adfb55.js","assets/rasterProjectionHelper-2eb0d45f.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),"imagery-tile":()=>Si().then(()=>he(()=>import("./ImageryTileLayerView2D-6a2454be.js"),["assets/ImageryTileLayerView2D-6a2454be.js","assets/multidimensionalUtils-56e8dd07.js","assets/RasterVFDisplayObject-62eebb0b.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1e2e12a8.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/rasterUtils-b34c7df7.js","assets/TiledDisplayObject-aa0c2485.js","assets/TileContainer-b9b34a1c.js","assets/RawBlockCache-2aca10c0.js","assets/rasterProjectionHelper-2eb0d45f.js","assets/util-802c5b03.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),kml:()=>Si().then(()=>he(()=>import("./KMLLayerView2D-bbf727c4.js"),["assets/KMLLayerView2D-bbf727c4.js","assets/kmlUtils-8b5827a1.js","assets/Bitmap-5664d6d8.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/BitmapContainer-b91ea79c.js","assets/WGLContainer-e3cf0f79.js","assets/VertexArrayObject-01ae6462.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/GraphicContainer-2839983b.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/TileContainer-b9b34a1c.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/rasterProjectionHelper-2eb0d45f.js","assets/RenderingContext-8ec1d092.js","assets/programUtils-7ee36e52.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-5206b14a.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/DisjointTimerQuery-b21930a9.js","assets/rasterUtils-b34c7df7.js"])),"knowledge-graph":()=>Si().then(()=>he(()=>import("./KnowledgeGraphLayerView2D-23d70bbe.js"),["assets/KnowledgeGraphLayerView2D-23d70bbe.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js"])),"link-chart":()=>Si().then(()=>he(()=>import("./KnowledgeGraphLayerView2D-23d70bbe.js"),["assets/KnowledgeGraphLayerView2D-23d70bbe.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js"])),"knowledge-graph-sublayer":Fp,"map-image":()=>Si().then(()=>he(()=>import("./MapImageLayerView2D-d3a2b431.js"),["assets/MapImageLayerView2D-d3a2b431.js","assets/BitmapContainer-b91ea79c.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/HighlightGraphicContainer-63f94b84.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/TileContainer-b9b34a1c.js","assets/ExportStrategy-81adfb55.js","assets/Bitmap-5664d6d8.js","assets/ExportImageParameters-10be069e.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-d3728a7a.js","assets/RefreshableLayerView-6acb3488.js","assets/drapedUtils-508d4bed.js","assets/popupUtils-ebcf7fd5.js"])),"map-notes":()=>Si().then(()=>he(()=>import("./MapNotesLayerView2D-e0241959.js"),["assets/MapNotesLayerView2D-e0241959.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/GroupContainer-970fc9eb.js","assets/WGLContainer-e3cf0f79.js","assets/VertexArrayObject-01ae6462.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/GraphicContainer-2839983b.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/TileContainer-b9b34a1c.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js"])),media:()=>Si().then(()=>he(()=>import("./MediaLayerView2D-a39bcdad.js"),["assets/MediaLayerView2D-a39bcdad.js","assets/perspectiveUtils-d10023ab.js","assets/normalizeUtilsSync-6acdc431.js","assets/MagnifierPrograms-b25e2fb7.js","assets/_commonjsHelpers-2f3e7994.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/rasterizingUtils-5a45b7fc.js","assets/imageutils-ef43dce9.js","assets/Matcher-249049b5.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-ef508845.js","assets/DisjointTimerQuery-b21930a9.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/BufferPool-c2393100.js","assets/enums-fb086c25.js","assets/OrderIndependentTransparency-5206b14a.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-a0b95b08.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/LayerView-09aca90e.js"])),"ogc-feature":()=>Si().then(()=>he(()=>import("./OGCFeatureLayerView2D-eb957a73.js"),["assets/OGCFeatureLayerView2D-eb957a73.js","assets/FeatureLayerView2D-2cc1d5c1.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/LayerView-09aca90e.js","assets/schemaUtils-17781e9a.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/utils-8297914d.js","assets/MaterialKey-558bebf6.js","assets/visualVariablesUtils-15c65c16.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/util-802c5b03.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),"open-street-map":Ef,"oriented-imagery":Fp,route:()=>Si().then(()=>he(()=>import("./RouteLayerView2D-64a47daf.js"),["assets/RouteLayerView2D-64a47daf.js","assets/Stop-11e9ad96.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/GraphicContainer-2839983b.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/VertexArrayObject-01ae6462.js","assets/TileContainer-b9b34a1c.js","assets/WGLContainer-e3cf0f79.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/GraphicsView2D-a0b95b08.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/Matcher-249049b5.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js"])),stream:()=>Si().then(()=>he(()=>import("./StreamLayerView2D-42ac7518.js"),["assets/StreamLayerView2D-42ac7518.js","assets/FeatureLayerView2D-2cc1d5c1.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/LayerView-09aca90e.js","assets/schemaUtils-17781e9a.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/utils-8297914d.js","assets/MaterialKey-558bebf6.js","assets/visualVariablesUtils-15c65c16.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/util-802c5b03.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),"subtype-group":()=>Si().then(()=>he(()=>import("./SubtypeGroupLayerView2D-3b324aa4.js"),["assets/SubtypeGroupLayerView2D-3b324aa4.js","assets/FeatureLayerView2D-2cc1d5c1.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/LayerView-09aca90e.js","assets/schemaUtils-17781e9a.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/utils-8297914d.js","assets/MaterialKey-558bebf6.js","assets/visualVariablesUtils-15c65c16.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/util-802c5b03.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),tile:Ef,"vector-tile":()=>Si().then(()=>he(()=>import("./VectorTileLayerView2D-af457af6.js"),["assets/VectorTileLayerView2D-af457af6.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/rasterizingUtils-5a45b7fc.js","assets/floatRGBA-c52f04c6.js","assets/VertexArrayObject-01ae6462.js","assets/config-1337d16e.js","assets/TiledDisplayObject-aa0c2485.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-498e21e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/TileContainer-b9b34a1c.js","assets/WGLContainer-e3cf0f79.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/StyleRepository-3e483beb.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/LayerView-09aca90e.js"])),video:()=>Si().then(()=>he(()=>import("./VideoLayerView2D-70007c27.js"),["assets/VideoLayerView2D-70007c27.js","assets/LayerView-09aca90e.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js"])),wcs:()=>Si().then(()=>he(()=>import("./ImageryTileLayerView2D-6a2454be.js"),["assets/ImageryTileLayerView2D-6a2454be.js","assets/multidimensionalUtils-56e8dd07.js","assets/RasterVFDisplayObject-62eebb0b.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1e2e12a8.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/rasterUtils-b34c7df7.js","assets/TiledDisplayObject-aa0c2485.js","assets/TileContainer-b9b34a1c.js","assets/RawBlockCache-2aca10c0.js","assets/rasterProjectionHelper-2eb0d45f.js","assets/util-802c5b03.js","assets/popupUtils-ebcf7fd5.js","assets/RefreshableLayerView-6acb3488.js"])),"web-tile":Ef,wfs:Fp,wms:()=>Si().then(()=>he(()=>import("./WMSLayerView2D-660b3ff5.js"),["assets/WMSLayerView2D-660b3ff5.js","assets/BitmapContainer-b91ea79c.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/LayerView-09aca90e.js","assets/ExportStrategy-81adfb55.js","assets/Bitmap-5664d6d8.js","assets/RefreshableLayerView-6acb3488.js","assets/ExportWMSImageParameters-9326e835.js"])),wmts:()=>Si().then(()=>he(()=>import("./WMTSLayerView2D-36e0e5f4.js"),["assets/WMTSLayerView2D-36e0e5f4.js","assets/imageUtils-7d17d86d.js","assets/BitmapTileContainer-d50b6f30.js","assets/Bitmap-5664d6d8.js","assets/Container-97be294d.js","assets/definitions-43101aab.js","assets/enums-10aa9b05.js","assets/Texture-05984be5.js","assets/TiledDisplayObject-aa0c2485.js","assets/WGLContainer-e3cf0f79.js","assets/VertexArrayObject-01ae6462.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/TileContainer-b9b34a1c.js","assets/LayerView-09aca90e.js","assets/RefreshableLayerView-6acb3488.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function tve(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const BA={hasLayerViewModule:t=>UA[t.type]!=null,importLayerView:t=>{const e=UA[t.type];if(e==null)throw tve(t);return e(t)}};function ive(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s=Number.POSITIVE_INFINITY,h=0,f=0;const m=[0,0],b=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const S of b)for(let I=0;I<S.length-1;I++){NJ(m,r,S,I);const A=km(r,m);A<s&&(s=A,h=m[0],f=m[1])}return{coordinate:new ke({x:h,y:f,spatialReference:i}),distance:s}}var H6;let _c=H6=class extends YS(Oe){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return ah(this.geometry,this.spatialReference)}catch(t){return fe.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?ib(this.normalizedGeometry,i):mO(this.normalizedGeometry,i))return t;const{coordinate:r}=ive(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new H6({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};v([x({constructOnly:!0})],_c.prototype,"geometry",void 0),v([x({readOnly:!0})],_c.prototype,"normalizedGeometry",null),v([x({constructOnly:!0})],_c.prototype,"spatialReference",void 0),_c=H6=v([B("esri.views.2d.constraints.GeometryConstraint")],_c);var W6;let C1=W6=class extends YS(Oe){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new W6({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([x()],C1.prototype,"enabled",void 0),v([x()],C1.prototype,"rotationEnabled",void 0),C1=W6=v([B("esri.views.2d.constraints.RotationConstraint")],C1);const hG=C1;var J6;let vn=J6=class extends YS(Oe){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:h}=this,f=-1,m=-1,b=!1,S=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(I=>I.clone()),e.sort((I,A)=>A.scale-I.scale),e.forEach((I,A)=>I.level=A);for(const I of e)!b&&i>0&&i>=I.scale&&(f=I.level,b=!0),!S&&r>0&&r>=I.scale&&(m=t?t.level:-1,S=!0),t=I;s===-1&&(s=i===0?0:f),h===-1&&(h=r===0?e.length-1:m),s=Math.max(s,0),s=Math.min(s,e.length-1),h=Math.max(h,0),h=Math.min(h,e.length-1),s>h&&([s,h]=[h,s]),i=e[s].scale,r=e[h].scale,e.splice(0,s),e.splice(h-s+1,e.length),e.forEach((I,A)=>{this._lodByScale[I.scale]=I,this._scales[A]=I.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",h),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,h=e&&e.targetGeometry,f=r!==0&&t.scale<r,m=i!==0&&t.scale>i;if(f||m){const b=m?i:r;if(e&&h){const S=(b-e.scale)/(t.scale-e.scale);s.x=h.x+(s.x-h.x)*S,s.y=h.y+(s.y-h.y)*S}t.scale=b}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new J6({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};v([x({readOnly:!0})],vn.prototype,"effectiveLODs",void 0),v([x({readOnly:!0})],vn.prototype,"effectiveMinZoom",void 0),v([x({readOnly:!0})],vn.prototype,"effectiveMaxZoom",void 0),v([x({readOnly:!0})],vn.prototype,"effectiveMinScale",void 0),v([x({readOnly:!0})],vn.prototype,"effectiveMaxScale",void 0),v([x()],vn.prototype,"lods",void 0),v([x()],vn.prototype,"minZoom",void 0),v([x()],vn.prototype,"maxZoom",void 0),v([x()],vn.prototype,"minScale",void 0),v([x()],vn.prototype,"maxScale",void 0),v([x()],vn.prototype,"snapToZoom",void 0),vn=J6=v([B("esri.views.2d.constraints.ZoomConstraint")],vn);const cG=vn,rve={base:null,key:"type",typeMap:{extent:At,polygon:ua}};let Ai=class extends Oe{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _defaultLODs(){var r,s,h;const e=(s=(r=this.view)==null?void 0:r.defaultsFromMap)==null?void 0:s.tileInfo,i=(h=this.view)==null?void 0:h.spatialReference;return e&&i&&e.spatialReference.equals(i)?e.lods:null}get _geometry(){var e;return new _c({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new hG({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this._defaultLODs,r=this.minZoom,s=this.maxZoom,h=this.minScale,f=this.maxScale,m=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===h&&e.maxScale===f&&e.snapToZoom===m?e:new cG({lods:i,minZoom:r,maxZoom:s,minScale:h,maxScale:f,snapToZoom:m})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};v([x({readOnly:!0})],Ai.prototype,"effectiveLODs",null),v([x({readOnly:!0})],Ai.prototype,"effectiveMinScale",null),v([x({readOnly:!0})],Ai.prototype,"effectiveMaxScale",null),v([x({readOnly:!0})],Ai.prototype,"effectiveMinZoom",null),v([x({readOnly:!0})],Ai.prototype,"effectiveMaxZoom",null),v([x({types:rve,value:null})],Ai.prototype,"geometry",null),v([x({type:[yu]})],Ai.prototype,"lods",void 0),v([x()],Ai.prototype,"minScale",void 0),v([x()],Ai.prototype,"maxScale",void 0),v([x()],Ai.prototype,"minZoom",void 0),v([x()],Ai.prototype,"maxZoom",void 0),v([x()],Ai.prototype,"rotationEnabled",void 0),v([x()],Ai.prototype,"snapToZoom",void 0),v([x()],Ai.prototype,"view",void 0),v([x({readOnly:!0})],Ai.prototype,"version",null),v([x()],Ai.prototype,"_defaultLODs",null),v([x({type:_c})],Ai.prototype,"_geometry",null),v([x({type:hG})],Ai.prototype,"_rotation",null),v([x({readOnly:!0,type:cG})],Ai.prototype,"_zoom",null),Ai=v([B("esri.views.2d.MapViewConstraints")],Ai);const pG=Ai;function l2(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function nve(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function sve(t,e,i,r,s,h,f,m,b){const S=new Float32Array(9);return S[0]=t,S[1]=e,S[2]=i,S[3]=r,S[4]=s,S[5]=h,S[6]=f,S[7]=m,S[8]=b,S}function ove(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:nve,create:l2,createView:ove,fromValues:sve},Symbol.toStringTag,{value:"Module"}));function dG(){return new Float32Array(2)}function ave(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function x0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function lve(t,e){return new Float32Array(t,e,2)}function fG(){return dG()}function yG(){return x0(1,1)}function mG(){return x0(1,0)}function gG(){return x0(0,1)}const uve=fG(),hve=yG(),cve=mG(),pve=gG();Object.freeze(Object.defineProperty({__proto__:null,ONES:hve,UNIT_X:cve,UNIT_Y:pve,ZEROS:uve,clone:ave,create:dG,createView:lve,fromValues:x0,ones:yG,unitX:mG,unitY:gG,zeros:fG},Symbol.toStringTag,{value:"Module"}));function dve(t){return t instanceof Float32Array&&t.length>=2}function fve(t){return Array.isArray(t)&&t.length>=2}function u9(t){return dve(t)||fve(t)}var K6;const Sa=[0,0];let pu=K6=class extends ye{constructor(t){super(t),this._viewpoint2D={center:Pi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new At,this.id=0,this.inverseTransform=Bu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Bu(),this.transformNoRotation=Bu(),this.displayMat3=l2(),this.displayViewMat3=l2(),this.viewMat3=l2(),this.viewMat2d=UD(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=_o(i,t.viewpoint),this._set("size",w0(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new K6({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return u9(e)?Yo(t,e,this.inverseTransform):(Sa[0]=e,Sa[1]=i,Yo(t,Sa,this.inverseTransform))}toScreen(t,e,i){return u9(e)?Yo(t,e,this.transform):(Sa[0]=e,Sa[1]=i,Yo(t,Sa,this.transform))}toScreenNoRotation(t,e,i){return u9(e)?Yo(t,e,this.transformNoRotation):(Sa[0]=e,Sa[1]=i,Yo(t,Sa,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return v$(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,h=this._get("size"),f=new _r({targetGeometry:new ke(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",f),!h||!e||!i)return;this.resolution=Q0(f),this.rotation=r,this.scale=i,this.spatialReference=e,w0(this.center,t);const m=h[0]!==0?2/h[0]:0,b=h[1]!==0?-2/h[1]:0;Pz(this.displayMat3,m,0,0,0,b,0,-1,1,1);const S=Rz(this.viewMat3),I=x0(h[0]/2,h[1]/2),A=x0(-h[0]/2,-h[1]/2),O=jS(r);C6(S,S,I),Fz(S,S,O),C6(S,S,A),JM(this.displayViewMat3,this.displayMat3,S);const R=CM(this.viewMat2d,I);return Vb(R,R,O),Vy(R,R,A),Lge(this.extent,f,h),w$(this.transform,f,h,s),EM(this.inverseTransform,this.transform),Uge(this.transformNoRotation,f,h,s),this.worldScreenWidth=Hge(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};v([x({readOnly:!0})],pu.prototype,"id",void 0),v([x({value:1,json:{write:!0}})],pu.prototype,"pixelRatio",null),v([x({json:{write:!0}})],pu.prototype,"size",null),v([x()],pu.prototype,"spatialReference",void 0),v([x({type:_r,json:{write:!0}})],pu.prototype,"viewpoint",null),pu=K6=v([B("esri.views.2d.ViewState")],pu);const HA=pu;var Z6,Y6;let Ja=Z6=class extends Oe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Z6({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([x()],Ja.prototype,"left",void 0),v([x()],Ja.prototype,"top",void 0),v([x()],Ja.prototype,"right",void 0),v([x()],Ja.prototype,"bottom",void 0),Ja=Z6=v([B("esri.views.2d.PaddedViewState.Padding")],Ja);let bd=Y6=class extends HA{constructor(...t){super(...t),this.paddedViewState=new HA,this._updateContent=(()=>{const e=Pi();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;ur(e,r.left+r.right,r.top+r.bottom),Hy(e,i,e),w0(s.size,e);const h=s.viewpoint;h&&(this.viewpoint=h)}})(),this.addHandles(me(()=>[this.size,this.padding],()=>this._updateContent(),qn)),this.padding=new Ja,this.size=[0,0]}set padding(t){this._set("padding",t||new Ja)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,Jge(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new Y6({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([x()],bd.prototype,"paddedViewState",void 0),v([x({type:Ja})],bd.prototype,"padding",null),v([x()],bd.prototype,"viewpoint",null),bd=Y6=v([B("esri.views.2d.PaddedViewState")],bd);const yve=bd;let mve=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},vG=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new H2(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=$i(this._schedule),this._task=$i(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let h=null;i&&(h=Un(i,()=>s.abort()));const f=()=>{const I=this._processingItems.get(e);I&&I.controller.abort(),m(),S.reject(Xt())},m=()=>{b.remove(),h!=null&&h.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},b=lS(s.signal,f),S=sl();return this._deferreds.set(e,S),this._controllers.set(e,s),S.promise.then(m,m),this._queue.push(e),this._scheduleNext(),S.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=T0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,s=new mve(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(h){this._processError(s,h)}dl(i)?(s.promise=i,i.then(h=>this._processResult(s,h),h=>this._processError(s,h))):this._processResult(s,i)}get test(){return{update:e=>this.runTask(e)}}};function gve(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const h9=new Set,Hg=[],Np=new Map,WA=[0,0];let Fl=class extends Oe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new vG({concurrency:e,process:(r,s)=>{const h=this._keyToItem.get(r);return i(h,{signal:s})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=Ut(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const s=this._queue.push(r),h=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),s.then(h,h),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),O=this.tileInfoView.getTileScale(A.key);Np.has(O)||(Np.set(O,[]),r=Math.max(O,r),s=Math.min(O,s)),Np.get(O).push(A.key),h9.add(O)});let h=this.state.scale;Np.has(h)||(gve(Hg,h9),Hg.sort((I,A)=>I-A),h=Hg.reduce((I,A)=>Math.abs(A-h)<Math.abs(I-h)?A:I,Hg[0])),h=Math.min(h,r),h=Math.max(h,s);const f=Np.get(h),m=i.getClosestInfoForScale(h),b=m.getColumnForX(this.state.center[0]),S=m.getRowForY(this.state.center[1]);return f.sort((I,A)=>{const O=m.denormalizeCol(I.col,I.world),R=m.denormalizeCol(A.col,A.world);return Math.sqrt((b-O)*(b-O)+(S-I.row)*(S-I.row))-Math.sqrt((b-R)*(b-R)+(S-A.row)*(S-A.row))}),h9.clear(),Np.clear(),f[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let s,h=Number.POSITIVE_INFINITY;return e.forEach(f=>{const m=this._keyToItem.get(f);i.getTileCoords(WA,m.key);const b=km(WA,r);b<h&&(h=b,s=m.key)}),s.id}};v([x({constructOnly:!0})],Fl.prototype,"concurrency",void 0),v([x({constructOnly:!0})],Fl.prototype,"process",void 0),v([x()],Fl.prototype,"state",void 0),v([x({constructOnly:!0})],Fl.prototype,"strategy",void 0),v([x({constructOnly:!0})],Fl.prototype,"tileInfoView",void 0),v([x({readOnly:!0})],Fl.prototype,"updating",null),Fl=v([B("esri.views.2d.tiling.PagedTileQueue")],Fl);let pp=class ac{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ac(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[h,f,m,b]=e.split("/");this.level=parseFloat(h),this.row=parseFloat(f),this.col=parseFloat(m),this.world=parseFloat(b)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ac(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new ac(e,i,r,s),new ac(e,i,r+1,s),new ac(e,i+1,r,s),new ac(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};pp.pool=new eh(pp,null,null,25,50);function Nl(t,e){return[t,e]}function bh(t,e,i){return t[0]=e,t[1]=i,t}function vve(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const js=new pp("0/0/0/0");let wve=class wG{static create(e,i,r=null){const s=fo(e.spatialReference),h=i.origin||Nl(e.origin.x,e.origin.y),f=Nl(e.size[0]*i.resolution,e.size[1]*i.resolution),m=Nl(-1/0,-1/0),b=Nl(1/0,1/0),S=Nl(1/0,1/0);r!=null&&(bh(m,Math.max(0,Math.floor((r.xmin-h[0])/f[0])),Math.max(0,Math.floor((h[1]-r.ymax)/f[1]))),bh(b,Math.max(0,Math.floor((r.xmax-h[0])/f[0])),Math.max(0,Math.floor((h[1]-r.ymin)/f[1]))),bh(S,b[0]-m[0]+1,b[1]-m[1]+1));const{cols:I,rows:A}=i;let O,R,L,z;return!r&&I&&A&&(bh(m,I[0],A[0]),bh(b,I[1],A[1]),bh(S,I[1]-I[0]+1,A[1]-A[0]+1)),e.isWrappable?(O=Nl(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),S[1]),R=Nl(Math.floor((s.origin[0]-h[0])/f[0]),m[1]),L=Nl(O[0]+R[0]-1,b[1]),z=!0):(R=m,L=b,O=S,z=!1),new wG(i.level,i.resolution,i.scale,h,m,b,S,f,R,L,O,z)}constructor(e,i,r,s,h,f,m,b,S,I,A,O){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=h,this.last=f,this.size=m,this.norm=b,this.worldStart=S,this.worldEnd=I,this.worldSize=A,this.wrap=O}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){js.set(i);const s=r?js.col:this.denormalizeCol(js.col,js.world),h=js.row;return vve(e,this.getXForColumn(s),this.getYForRow(h+1),this.getXForColumn(s+1),this.getYForRow(h)),e}getTileCoords(e,i,r=!1){js.set(i);const s=r?js.col:this.denormalizeCol(js.col,js.world);return Array.isArray(e)?bh(e,this.getXForColumn(s),this.getYForRow(js.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(js.row)),e}},S0=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:h}=s;if(r.length!==0)for(const{row:f,colFrom:m,colTo:b}of r)for(let S=m;S<=b;S++)e.call(i,h,f,s.normalizeCol(S),s.getWorldForColumn(S))}};S0.pool=new eh(S0);let c9=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const li=new pp("0/0/0/0");let bve=class bG{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[h,f]=i,m=h-r,b=f-s,S=b!==0?m/b:0,I=(Math.ceil(s)-s)*S,A=(Math.floor(s)-s)*S;return new bG(r,Math.floor(s),Math.ceil(f),S,m<0?I:A,m<0?A:I,m<0?h:r,m<0?r:h)}constructor(e,i,r,s,h,f,m,b){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=h,this.rightAdjust=f,this.leftBound=m,this.rightBound=b}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const On=[[0,0],[0,0],[0,0],[0,0]],_ve=1e-6;let xve=class{constructor(e,i=null){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=e.lods.slice();r.sort((h,f)=>f.scale-h.scale);const s=this._lodInfos=r.map(h=>wve.create(e,h,i));r.forEach((h,f)=>{this._infoByLevel[h.level]=s[f],this._infoByScale[h.scale]=s[f],this.scales[f]=h.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){li.set(i);const s=this._infoByLevel[li.level];return s?s.getTileBounds(e,li,r):e}getTileCoords(e,i,r=!1){li.set(i);const s=this._infoByLevel[li.level];return s?s.getTileCoords(e,li,r):e}getTileCoverage(e,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),h=S0.pool.acquire(s),f=this._wrap;let m,b,S,I=1/0,A=-1/0;const O=h.spans;On[0][0]=On[0][1]=On[1][1]=On[3][0]=-i,On[1][0]=On[2][0]=e.size[0]+i,On[2][1]=On[3][1]=e.size[1]+i;for(const j of On)e.toMap(j,j),j[0]=s.getColumnForX(j[0]),j[1]=s.getRowForY(j[1]);const R=[];let L=3;for(let j=0;j<4;j++){if(On[j][1]===On[L][1]){L=j;continue}const H=bve.create(On[j],On[L]);I=Math.min(H.ymin,I),A=Math.max(H.ymax,A),R[H.ymin]===void 0&&(R[H.ymin]=[]),R[H.ymin].push(H),L=j}if(I==null||A==null||A-I>100)return null;let z=[];for(m=I;m<A;){R[m]!=null&&(z=z.concat(R[m])),b=1/0,S=-1/0;for(let j=z.length-1;j>=0;j--){const H=z[j];b=Math.min(b,H.getLeftCol()),S=Math.max(S,H.getRightCol())}if(b=Math.floor(b),S=Math.floor(S),m>=s.first[1]&&m<=s.last[1])if(f)if(s.size[0]<s.worldSize[0]){const j=Math.floor(S/s.worldSize[0]);for(let H=Math.floor(b/s.worldSize[0]);H<=j;H++)O.push(new c9(m,Math.max(s.getFirstColumnForWorld(H),b),Math.min(s.getLastColumnForWorld(H),S)))}else O.push(new c9(m,b,S));else b>s.last[0]||S<s.first[0]||(b=Math.max(b,s.first[0]),S=Math.min(S,s.last[0]),O.push(new c9(m,b,S)));m+=1;for(let j=z.length-1;j>=0;j--){const H=z[j];H.ymax>=m?H.incrRow():z.splice(j,1)}}return h}getTileParentId(e){li.set(e);const i=this._infoByLevel[li.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(li,this._lodInfos[r],li),li.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){li.set(i);const r=this._infoByLevel[li.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(li,s,li);const f=s.denormalizeCol(li.col,li.world);for(const m of e.spans)if(m.row===li.row&&m.colFrom<=f&&m.colTo>=f)return!0}if(s.resolution<r.resolution){const[f,m,b,S]=e.spans.reduce((z,j)=>(z[0]=Math.min(z[0],j.row),z[1]=Math.max(z[1],j.row),z[2]=Math.min(z[2],j.colFrom),z[3]=Math.max(z[3],j.colTo),z),[1/0,-1/0,1/0,-1/0]),I=r.denormalizeCol(li.col,li.world),A=s.getColumnForX(r.getXForColumn(I)),O=s.getRowForY(r.getYForRow(li.row)),R=s.getColumnForX(r.getXForColumn(I+1))-1,L=s.getRowForY(r.getYForRow(li.row+1))-1;return!(A>S||R<b||O>m||L<f)}const h=s.denormalizeCol(li.col,li.world);return e.spans.some(f=>f.row===li.row&&f.colFrom<=h&&f.colTo>=h)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=fo(this.tileInfo.spatialReference),h=-r*(s.valid[1]-s.valid[0]);e[0]+=h,e[2]+=h}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+_ve)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}};function Sve(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const p9=new Set,Wg=[],Lp=new Map,JA=[0,0];let qa=class extends Oe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new vG({concurrency:e,process:(s,h)=>{const f=this._keyToItem.get(s);return i(f,{signal:h})},peeker:r==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue=Ut(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),O=this.tileInfoView.getTileScale(A.key);Lp.has(O)||(Lp.set(O,[]),r=Math.max(O,r),s=Math.min(O,s)),Lp.get(O).push(A.key),p9.add(O)});let h=this.state.scale;Lp.has(h)||(Sve(Wg,p9),Wg.sort((I,A)=>I-A),h=Wg.reduce((I,A)=>Math.abs(A-h)<Math.abs(I-h)?A:I,Wg[0])),h=Math.min(h,r),h=Math.max(h,s);const f=Lp.get(h),m=i.getClosestInfoForScale(h),b=m.getColumnForX(this.state.center[0]),S=m.getRowForY(this.state.center[1]);return f.sort((I,A)=>{const O=m.denormalizeCol(I.col,I.world),R=m.denormalizeCol(A.col,A.world);return Math.sqrt((b-O)*(b-O)+(S-I.row)*(S-I.row))-Math.sqrt((b-R)*(b-R)+(S-A.row)*(S-A.row))}),p9.clear(),Lp.clear(),f[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let s,h=Number.POSITIVE_INFINITY;return e.forEach(f=>{const m=this._keyToItem.get(f);i.getTileCoords(JA,m.key);const b=km(JA,r);b<h&&(h=b,s=m.key)}),s.id}};v([x({constructOnly:!0})],qa.prototype,"concurrency",void 0),v([x({constructOnly:!0})],qa.prototype,"process",void 0),v([x()],qa.prototype,"state",void 0),v([x({constructOnly:!0})],qa.prototype,"strategy",void 0),v([x({constructOnly:!0})],qa.prototype,"tileInfoView",void 0),v([x({readOnly:!0})],qa.prototype,"updating",null),qa=v([B("esri.views.2d.tiling.TileQueue")],qa);const M6e=qa;let Mve=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];KA(this._tilePerId,e);for(let h=0;h<s.length;h++)if(s[h].id===e){s.splice(h,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let h=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&h>=0;)h!==e&&(s=this._pruneAroundCenterTile(s,i,r,h)),h--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const h=this._tileKeysPerLevel[s];if(!h||h.length===0)return e;const{size:f,origin:m}=this._tileInfoView.tileInfo,b=r*f[0],S=r*f[1],I=[0,0],A=[0,0];for(h.sort((O,R)=>(I[0]=m.x+b*(O.col+.5),I[1]=m.y-S*(O.row+.5),A[0]=m.x+b*(R.col+.5),A[1]=m.y-S*(R.row+.5),Aw(I,i)-Aw(A,i)));h.length>0;){const O=h.pop();if(this._removeTile(O.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),KA(this._tilePerId,e)}};function KA(t,e){t.delete(e)}const _h=new pp(0,0,0,0),ts=new Map,jp=[],Jg=[];let T6e=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=e.resampling==null||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Mve(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(Jg.length=0,jp.length=0,ts.clear(),!s)return;const{minScale:h,maxScale:f}=this.tileInfoView.tileInfo,{spans:m,lodInfo:b}=s,{level:S}=b,{scale:I,center:A,resolution:O}=e.state,R=!e.stationary&&I>this._previousScale;if(this._previousScale=I,this.tiles.length=0,!i&&(I>h||I<f))return this.tiles.length=0,ts.clear(),r.forEach(H=>{this.releaseTile(H)}),r.clear(),Jg.length=0,jp.length=0,ts.clear(),S0.pool.release(s),!0;r.forEach(H=>H.visible=!0);let L=0,z=0;if(m.length>0)for(const{row:H,colFrom:Y,colTo:X}of m)for(let te=Y;te<=X;te++){L++;const oe=_h.set(S,H,b.normalizeCol(te),b.getWorldForColumn(te)).id;if(r.has(oe)){const le=r.get(oe);le.isReady?(ts.set(oe,le),z++):R||this._addParentTile(oe,ts)}else{let le;if(this._tileCache&&this._tileCache.has(oe)){if(le=this._tileCache.pop(oe),this.tileIndex.set(oe,le),le.isReady){ts.set(oe,le),z++;continue}}else le=this.acquireTile(_h),this.tileIndex.set(oe,le);R||this._addParentTile(oe,ts)}}const j=z===L;r.forEach((H,Y)=>{if(_h.set(Y),ts.has(Y))return;const X=this.tileInfoView.intersects(s,_h),te=this.cachePolicy==="purge"?_h.level!==S:_h.level>S;!X||!R&&j?!te&&X||jp.push(Y):H.isReady?te&&this.cachePolicy==="purge"&&this._hasReadyAncestor(_h,S)?jp.push(Y):Jg.push(Y):te&&jp.push(Y)});for(const H of Jg){const Y=r.get(H);Y&&Y.isReady&&ts.set(H,Y)}for(const H of jp){const Y=r.get(H);this._tileCache?this._tileCache.add(Y):this.releaseTile(Y),r.delete(H)}return ts.forEach(H=>this.tiles.push(H)),r.forEach(H=>{ts.has(H.key.id)||(H.visible=!1)}),this._tileCache&&this._tileCache.prune(S,A,O),S0.pool.release(s),ts.clear(),j}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=$s();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const h=$s();if(this.tileInfoView.getTileBounds(h,s.key,!0),YJ(h,r))return!0}return!1}};function b$(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let ZA=class extends rr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){b$(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},$ve=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:h}=i,{view:f}=this,{mapViewNavigation:m}=f;switch(s){case"begin":{const{scale:b}=f;this._startScale=b,this._currentScale=b,this._previousDelta=h,m.begin();break}case"update":{if(this._previousDelta.y===h.y)return;this._previousDelta=h;const b=1.015**h.y,S=this._startScale*b,I=S/this._currentScale;m.setViewpointImmediate(I),this._currentScale=S;break}case"end":{const{constraints:b}=f,{effectiveLODs:S,snapToZoom:I}=b;if(!I||!S)return void m.end();const A=b.snapScale(this._currentScale),O=(h.y>0?Math.max(A,b.snapToPreviousScale(this._startScale)):Math.min(A,b.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(O);break}}}},t3=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Tve=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new t3({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&b$(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Ive=class extends rr{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new t3({start:(h,f)=>{s.rotate.begin(this._view,f.data),f.stopPropagation()},update:(h,f)=>{s.rotate.update(this._view,f.data),f.stopPropagation()},end:(h,f)=>{s.rotate.end(),f.stopPropagation()},condition:(h,f)=>h===1&&b$(f.data,this.pointerAction)}),this.registerIncoming("drag",r,h=>this._dragEventSeparator.handle(h))}};function Ds(t){let e=t*t;return t<0&&(e*=-1),e}function Eve(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Ave(t,e,i){const r=i,s=t.state,h=t.device,f=e.tiltDirection==="forward-down"?1:-1,m=1;return h.deviceType==="standard"?(r.translation[0]=Ds(s.axes[0]),r.translation[1]=Ds(s.axes[1]),r.translation[2]=Ds(s.buttons[7])-Ds(s.buttons[6]),r.heading=Ds(s.axes[2]),r.tilt=Ds(s.axes[3])):h.deviceType==="spacemouse"&&(r.translation[0]=1.2*Ds(s.axes[0]),r.translation[1]=1.2*Ds(s.axes[1]),r.translation[2]=2*-Ds(s.axes[2]),r.heading=1.2*Ds(s.axes[5]),r.tilt=1.2*Ds(s.axes[3])),r.tilt*=f,Qe(r.translation,r.translation,m),r}function Cve(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let kve=class extends rr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Mn,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([me(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Wc({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},_t)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Eve(this._transformation)):(this._currentDevice=e.data.device,Ave(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Cve(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,h=Pve*s*e;e3(r,r,[i.translation[0]*h,-i.translation[1]*h]);const f=1+i.translation[2]*Rve*e,m=this._view.constraints.rotationEnabled?-i.heading*Ove*e:0,b=this._view.size,S=[b[0]/2,b[1]];aG(r,r,f,m,S,b);const I=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=I}};const Ove=.06,Pve=.7,Rve=6e-4;let Fve=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},Nve=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Nd;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Nd||(Nd={}));let Lve=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=Nd.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=Nd.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:h}=this.view;let f=null;switch(s){case Nd.IN:f=h.zoomIn();break;case Nd.OUT:f=h.zoomOut();break;default:return}h.begin(),f.then(()=>h.end()),e.stopPropagation()}};const jve=.6;let Dve=class extends rr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:h}=e.data,f=1/jve**(1/60*h),m=i.zoom(f,[r,s]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},zve=class extends rr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new t3({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function YA(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>qve(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Vve(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Gve(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function qve(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Uve=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=h=>{this._connectGamepad(h.gamepad)},this._onDisconnectGamepad=h=>{const f=h.gamepad,m=f.index,b=this._inputDevices[m];b&&(this._emitGamepadEvent(f,YA(b),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(b),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(h=>this._connectGamepad(h)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new y$(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Wc({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const h=this._inputDevices[s.index];if(!h)return;const f=this._latestUpdate[s.index],m=YA(h),b=r||Gve(m);f&&(f.timestamp===s.timestamp||!f.active&&b||Vve(f.state,m))||this._emitGamepadEvent(s,m,!b)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&e(s)}}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],h=s&&s.active;if(!h&&!r)return;const f=!h&&r?"start":h&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:f})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const XA=ue("edge"),Bve=ue("chrome"),Hve=ue("ff"),Wve=ue("safari"),QA="esri-view-surface",Dp={touchNone:`${QA}--touch-none`,touchPan:`${QA}--touch-pan`};let _G=class xG{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Uve(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Ut(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(d9[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&d9[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(d9[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Dp.touchNone:Dp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Dp.touchPan:Dp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Dp.touchNone),this._element.classList.remove(Dp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=KV(this._element,e);return xG.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=Bpe(i);r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:XA&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}XA?r*=.7:Bve||Wve?r*=.6:Hve&&(r*=1.375);const s=100,h=Math.abs(r);h>s&&(r=r/h*200/(1+Math.exp(-.02*(h-s))));const f=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,f)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};_G.test={disableSubpixelCoordinates:!1};const d9={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Jve=class extends rr{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function _$(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Kve(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function Zve(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ur()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[X,te]=t,[oe,le]=[te.x-X.x,te.y-X.y];return e.radius=Math.sqrt(oe*oe+le*le)/2,e.center.x=(X.x+te.x)/2,e.center.y=(X.y+te.y)/2,e}let i=0,r=0;for(let X=0;X<t.length;X++)i+=t[X].x,r+=t[X].y;i/=t.length,r/=t.length;const s=t.map(X=>X.x-i),h=t.map(X=>X.y-r);let f=0,m=0,b=0,S=0,I=0,A=0,O=0;for(let X=0;X<s.length;X++){const te=s[X],oe=h[X],le=te*te,ve=oe*oe;f+=le,m+=ve,b+=te*oe,S+=le*te,I+=ve*oe,A+=te*ve,O+=oe*le}const R=.5*(S+A),L=.5*(I+O),z=f*m-b*b,j=(R*m-L*b)/z,H=(f*L-b*R)/z,Y=Ur(j+i,H+r);return{radius:Math.sqrt(j*j+H*H+(f+m)/t.length),center:Y}}function Bc(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}const bs={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let Yve=class extends rr{constructor(e=bs.maximumDoubleClickDelay,i=bs.maximumDoubleClickDistance,r=bs.maximumDoubleTouchDelay,s=bs.maximumDoubleTouchDistance,h=Xy){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=$i(e.doubleClickTimer))}get hasPendingInputs(){return Zw(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=$i(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:s}=e.native;return r==="mouse"?`${i}:${s}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=this._getPointerId(i);if(!this._pointerState.has(s))return void this._startClick(e);const h=this._pointerState.get(s),{data:f,modifiers:m}=h.event,b=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;_$(f,i)>b?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),h.pointerDownCount===2&&this._doubleClick.emit(f,void 0,m))}_handlePointerDown(e){const i=Bc(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=Bc(i),h=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),h),m=1;this._pointerState.set(s,{event:e,doubleClickTimer:f,pointerDownCount:m}),this.refreshHasPendingInputs()}},Xve=class extends rr{constructor(e=bs.maximumDoubleClickDelay,i=bs.maximumDoubleClickDistance,r=bs.maximumDoubleTouchDelay,s=bs.maximumDoubleTouchDistance,h=Xy){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=h,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ur(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new t3({start:(f,m)=>this._dragStart(f,m),update:(f,m)=>this._dragUpdate(m),end:(f,m)=>this._dragEnd(m)}),this.registerIncoming("drag",f=>this._dragEventSeparator.handle(f)),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=$i(e.doubleTapTimeout)})}get hasPendingInputs(){return Zw(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=$i(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:s,buttons:h,pointer:f,pointers:m,pointerType:b,timestamp:S}=r;return{action:e,delta:i,button:s,buttons:h,pointer:f,pointers:m,pointerType:b,timestamp:S}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:h}=r;this._dragStartCenter=h;const f=this._createDoubleTapDragData("begin",Ur(0,0),r);this._doubleTapDrag.emit(f,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,h=Ur(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),f=this._createDoubleTapDragData("update",h,i);this._doubleTapDrag.emit(f,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,h=Ur(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),f=this._createDoubleTapDragData("end",h,i);this._doubleTapDrag.emit(f,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Bc(i),s=this._pointerState.get(r),{pointerType:h}=i.native;if(s){const f=h==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),_$(s.event.data,i)>f?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=Bc(i),h=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._clearPointerDown(s),h);this._pointerState.set(s,{event:e,doubleTapTimeout:f}),this.refreshHasPendingInputs()}},Qve=class extends rr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:e2e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=Kg(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const h=u2(s,SG(this._activePointerMap));s.initialAngle=h,s.lastAngle=h,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=Kg(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=Kg(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=u2(r,i)-e,r.lastAngle=u2(r,i)-e})}_emitEvent(e,i,r){const s=Kg(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function SG(t){const e=[];return t.forEach(i=>{e.push(Ur(i.event.x,i.event.y))}),Zve(e)}function Kg(t){const e=SG(t);let i=0;return t.forEach(r=>{let s=u2(r,e),h=s-r.lastAngle;for(;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;s=r.lastAngle+h,r.lastAngle=s;const f=s-r.initialAngle;i+=f}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function e2e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function u2(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}var eC;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(eC||(eC={}));let t2e=class extends rr{constructor(e=bs.maximumDoubleClickDelay,i=bs.maximumDoubleClickDistance,r=bs.maximumDoubleTouchDelay,s=bs.maximumDoubleTouchDistance,h=Xy){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Bc(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Bc(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const h=s.immediateDoubleClick;if(h){h.timeoutHandle.remove();const f=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;_$(h,e.data)>f?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,h.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=Bc(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Af={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let i2e=class extends rr{constructor(e=Af.maximumClickDelay,i=Af.movementUntilMouseDrag,r=Af.movementUntilPenDrag,s=Af.movementUntilTouchDrag,h=Af.holdDelay,f=Xy){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=h,this._clock=f,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",m=>{this._handlePointerLoss(m,"pointer-up")}),this.registerIncoming("pointer-capture-lost",m=>{this._handlePointerLoss(m,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",m=>{this._handlePointerLoss(m,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=$i(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const f=this._pointerState.get(r);if(f){if(!f.isDragging){const m=f.previousEvent;this._pointerHold.emit(m,void 0,e.modifiers),f.holdEmitted=!0}f.holdTimeout=null}},this._holdDelay));const h={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,h),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):Kve(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,h=this._pointerState.get(s);h&&(h.holdTimeout!=null&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",h,i==="pointer-up"?r:h.previousEvent),void 0,h.modifiers):i==="pointer-up"&&h.downButton===r.native.button&&e.timestamp-h.startTimestamp<=this._maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Zg={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let lc=class extends Oe{constructor(){super(...arguments),this._handles=new Mn}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Sn(()=>!e(),()=>this._disconnect()),Sn(e,()=>this._connect())])}destroy(){this._handles=Ut(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ut(this._inputManager)}_connect(){const e=this.view.surface,i=new _G(e,this.view.input),r=[new t2e,new i2e,new Yve,new Qve(this.view.navigation),new Xve],s=new Vo({eventSource:i,recognizers:r});s.installHandlers("prevent-context-menu",[new Jve],Uu.INTERNAL),s.installHandlers("navigation",[new zve(this.view),new kve(this.view),new Dve(this.view),new ZA(this.view),new ZA(this.view,[Zg.counter]),new Tve(this.view,"primary"),new Fve(this.view,Zg.pan),new Lve(this.view,Zg.zoom),new Nve(this.view,Zg.rotate),new Ive(this.view,"secondary"),new $ve(this.view,"touch")],Uu.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,me(()=>{var h,f;return(f=(h=this.view)==null?void 0:h.navigation)==null?void 0:f.browserTouchPanEnabled},h=>{this._source&&(this._source.browserTouchPanningEnabled=!h)},_t)}get test(){return{inputManager:this._inputManager}}};v([x()],lc.prototype,"view",void 0),v([x()],lc.prototype,"latestPointerType",null),v([x()],lc.prototype,"latestPointerLocation",null),v([x()],lc.prototype,"multiTouchActive",null),lc=v([B("esri.views.2d.input.MapViewInputManager")],lc);const r2e=lc;var tC,iC,rC,X6={},n2e={get exports(){return X6},set exports(t){X6=t}};tC=n2e,iC=function(){function t(s,h,f,m,b){e(s,h,f||0,m||s.length-1,b||r)}function e(s,h,f,m,b){for(;m>f;){if(m-f>600){var S=m-f+1,I=h-f+1,A=Math.log(S),O=.5*Math.exp(2*A/3),R=.5*Math.sqrt(A*O*(S-O)/S)*(I-S/2<0?-1:1);e(s,h,Math.max(f,Math.floor(h-I*O/S+R)),Math.min(m,Math.floor(h+(S-I)*O/S+R)),b)}var L=s[h],z=f,j=m;for(i(s,f,h),b(s[m],L)>0&&i(s,f,m);z<j;){for(i(s,z,j),z++,j--;b(s[z],L)<0;)z++;for(;b(s[j],L)>0;)j--}b(s[f],L)===0?i(s,f,j):i(s,++j,m),j<=h&&(f=j+1),h<=j&&(m=j-1)}}function i(s,h,f){var m=s[h];s[h]=s[f],s[f]=m}function r(s,h){return s<h?-1:s>h?1:0}return t},(rC=iC())!==void 0&&(tC.exports=rC);const s2e=X6;function Nw(t,e){if(!(this instanceof Nw))return new Nw(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function o2e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function zp(t,e){k1(t,0,t.children.length,e,t)}function k1(t,e,i,r,s){s||(s=_d(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var h,f=e;f<i;f++)h=t.children[f],O1(s,t.leaf?r(h):h);return s}function O1(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function nC(t,e){return t.minX-e.minX}function sC(t,e){return t.minY-e.minY}function f9(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Yg(t){return t.maxX-t.minX+(t.maxY-t.minY)}function a2e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function l2e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),h=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,h-r)}function y9(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Xg(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oC(t,e,i,r,s){for(var h,f=[e,i];f.length;)(i=f.pop())-(e=f.pop())<=r||(h=e+Math.ceil((i-e)/r/2)*r,s2e(t,h,e,i,s),f.push(e,h,h,i))}Nw.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!Xg(t,e))return i;for(var s,h,f,m,b=[];e;){for(s=0,h=e.children.length;s<h;s++)f=e.children[s],Xg(t,m=e.leaf?r(f):f)&&(e.leaf?i.push(f):y9(t,m)?this._all(f,i):b.push(f));e=b.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Xg(t,e))return!1;for(var r,s,h,f,m=[];e;){for(r=0,s=e.children.length;r<s;r++)if(h=e.children[r],Xg(t,f=e.leaf?i(h):h)){if(e.leaf||y9(t,f))return!0;m.push(h)}e=m.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_d([]),this},remove:function(t,e){if(!t)return this;for(var i,r,s,h,f=this.data,m=this.toBBox(t),b=[],S=[];f||b.length;){if(f||(f=b.pop(),r=b[b.length-1],i=S.pop(),h=!0),f.leaf&&(s=o2e(t,f.children,e))!==-1)return f.children.splice(s,1),b.push(f),this._condense(b),this;h||f.leaf||!y9(f,m)?r?(i++,f=r.children[i],h=!1):f=null:(b.push(f),S.push(i),i=0,r=f,f=f.children[0])}return this},toBBox:function(t){return t},compareMinX:nC,compareMinY:sC,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,h=i-e+1,f=this._maxEntries;if(h<=f)return zp(s=_d(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,r-1))),(s=_d([])).leaf=!1,s.height=r;var m,b,S,I,A=Math.ceil(h/f),O=A*Math.ceil(Math.sqrt(f));for(oC(t,e,i,O,this.compareMinX),m=e;m<=i;m+=O)for(oC(t,m,S=Math.min(m+O-1,i),A,this.compareMinY),b=m;b<=S;b+=A)I=Math.min(b+A-1,S),s.children.push(this._build(t,b,I,r-1));return zp(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,h,f,m,b,S,I,A;r.push(e),!e.leaf&&r.length-1!==i;){for(I=A=1/0,s=0,h=e.children.length;s<h;s++)b=f9(f=e.children[s]),(S=a2e(t,f)-b)<A?(A=S,I=b<I?b:I,m=f):S===A&&b<I&&(I=b,m=f);e=m||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),h=[],f=this._chooseSubtree(s,this.data,e,h);for(f.children.push(t),O1(f,s);e>=0&&h[e].children.length>this._maxEntries;)this._split(h,e),e--;this._adjustParentBBoxes(s,h,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var h=this._chooseSplitIndex(i,s,r),f=_d(i.children.splice(h,i.children.length-h));f.height=i.height,f.leaf=i.leaf,zp(i,this.toBBox),zp(f,this.toBBox),e?t[e-1].children.push(f):this._splitRoot(i,f)},_splitRoot:function(t,e){this.data=_d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,zp(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,h,f,m,b,S,I;for(b=S=1/0,r=e;r<=i-e;r++)f=l2e(s=k1(t,0,r,this.toBBox),h=k1(t,r,i,this.toBBox)),m=f9(s)+f9(h),f<b?(b=f,I=r,S=m<S?m:S):f===b&&m<S&&(S=m,I=r);return I},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:nC,s=t.leaf?this.compareMinY:sC;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,h,f=this.toBBox,m=k1(t,0,e,f),b=k1(t,i-e,i,f),S=Yg(m)+Yg(b);for(s=e;s<i-e;s++)h=t.children[s],O1(m,t.leaf?f(h):h),S+=Yg(m);for(s=i-e-1;s>=e;s--)h=t.children[s],O1(b,t.leaf?f(h):h),S+=Yg(b);return S},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)O1(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():zp(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let aC=class MG{constructor(e,i){this.key=new pp(0,0,0,0),this.bounds=$s(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return At.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=nn.acquire();for(let r=0;r<e.length;r++)i[r]=new MG(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return eL.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const xh={added:[],removed:[]},m9=new Set,u2e=new pp(0,0,0,0);let h2e=class extends pa{constructor(e){super(),this._tiles=new Map,this._index=Nw(9,ue("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new aC(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:h}=s;if(r.length>0)for(const{row:f,colFrom:m,colTo:b}of r)for(let S=m;S<=b;S++){const I=u2e.set(h,f,s.normalizeCol(S),s.getWorldForColumn(S)).id;if(m9.add(I),!this.has(I)){const A=new aC(this.tileScheme,I);this._tiles.set(I,A),this._index.insert(A),this.tiles.push(A),xh.added.push(A)}}for(let f=this.tiles.length-1;f>=0;f--){const m=this.tiles[f];m9.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(f,1),this._index.remove(m),xh.removed.push(m))}(xh.added.length||xh.removed.length)&&this.emit("update",xh),S0.pool.release(i),m9.clear(),xh.added.length=0,xh.removed.length=0}},uc=class extends Oe{constructor(){super(...arguments),this.color=new Be([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};v([x({type:Be})],uc.prototype,"color",void 0),v([x({type:Be})],uc.prototype,"haloColor",void 0),v([x()],uc.prototype,"haloOpacity",void 0),v([x()],uc.prototype,"fillOpacity",void 0),uc=v([B("esri.views.2d.support.HighlightOptions")],uc);const $G=uc,c2e=t=>t.includes("Brush");let TG=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),c2e(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function p2e(t,e,i,r,s,h,f,m){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let b=null;t.width!=null&&t.height!=null?b=[t.width,t.height]:t.width==null&&t.height!=null?b=[t.height,t.height]:t.width!=null&&t.height==null?b=[t.width,t.width]:t.width==null&&t.height==null&&(b=null);const S=i[0]-(r.left+r.right),I=i[1]-(r.top+r.bottom);let A,O,R=t.area||{x:0,y:0,width:S,height:I};if(b){const L=S/I,z=b[0]/b[1];if(z>L){const j=R.width/z;R={x:R.x,y:Math.round(R.y+(R.height-j)/2),width:R.width,height:Math.round(j)}}else{const j=R.height*z;R={x:Math.round(R.x+(R.width-j)/2),y:R.y,width:Math.round(j),height:R.height}}}else b=[R.width,R.height];return b[0]>R.width?(A=Math.min(b[0]/R.width,e),O=b[0]/R.width/A):(A=1,O=b[0]/R.width),{resolutionScale:A,cropArea:{x:Math.round((R.x+r.left)*A),y:Math.round((R.y+r.top)*A),width:Math.round(R.width*A),height:Math.round(R.height*A)},outputScale:O,format:s,quality:h,children:f,rotation:m}}function d2e(t,e,i){const{ctx:r,canvas:s}=IG(t,i),h=r.getImageData(0,0,t.width,t.height),f=m2e(s,e);return EG(s),{dataUrl:f,data:h}}function f2e(t,e){const{ctx:i,canvas:r}=IG(t,e),s=i.getImageData(0,0,t.width,t.height);return EG(r),s}function IG(t,e){const i=y2e();e.premultipliedAlpha&&_2e(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&b2e(r),{ctx:r,canvas:i}}function EG(t){t.width=0,t.height=0}function y2e(){return g9==null&&(g9=document.createElement("canvas")),g9}let g9=null;function m2e(t,e){const i=x2e[e.format],r=e.quality/100;return t.toDataURL(i,r)}function g2e(t,e){const i=w2e(t),r=M2e[i];return{format:i,quality:fi(e??r,0,100)}}function v2e(t,e){return e/Math.max(t[0],t[1])}function Z6e(t,e,i,r=0,s=0,h=t.width-r,f=t.height-s,m=!1){const{data:b}=t,{width:S,height:I,data:A}=e,O=h/S,R=f/I,L=Math.ceil(O/2),z=Math.ceil(R/2),j=t.width;for(let H=0;H<I;H++)for(let Y=0;Y<S;Y++){const X=4*(Y+(m?I-H-1:H)*S);let te=0,oe=0,le=0,ve=0,xe=0,Fe=0;const Pe=(H+.5)*R;for(let He=Math.floor(H*R);He<(H+1)*R;He++){const ze=Math.abs(Pe-(He+.5))/z,st=(Y+.5)*O,Ne=ze*ze;for(let ii=Math.floor(Y*O);ii<(Y+1)*O;ii++){const Ar=Math.abs(st-(ii+.5))/L,ai=Math.sqrt(Ne+Ar*Ar);if(ai>=1)continue;let xt=2*ai*ai*ai-3*ai*ai+1;const In=4*(r+ii+(s+He)*j);Fe+=xt*b[In+3],oe+=xt,!i&&b[In+3]<255&&(xt=xt*b[In+3]/255),le+=xt*b[In],ve+=xt*b[In+1],xe+=xt*b[In+2],te+=xt}}A[X]=le/te,A[X+1]=ve/te,A[X+2]=xe/te,A[X+3]=Fe/oe}return e}function w2e(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return S2e}}function b2e(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function _2e(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const h=255/s;e[r]=e[r]*h,e[r+1]=e[r+1]*h,e[r+2]=e[r+2]*h}}}const x2e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},lC=98,S2e="png",M2e={png:100,jpg:lC,jpeg:lC};var Ui;function Q6(t,e,i={}){const r=e===Ui.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const s of r){const h=t.getContext(s,i);if(h)return h}return null}function Y6e(t,e,i={}){const r=AG(t);for(const s of r){const h=Q6(e,s,i);if(h)return h}return null}function AG(t){if(t==="3d")return[Ui.WEBGL2];const e=ue("esri-force-webgl");return e===Ui.WEBGL1||e===Ui.WEBGL2?[e]:ue("mac")&&ue("chrome")?[Ui.WEBGL1,Ui.WEBGL2]:[Ui.WEBGL2,Ui.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Ui||(Ui={}));let v9,w9;function $2e(t){const e=AG(t);for(;e.length>1;){const i=uC(e.shift());if(i.available)return i}return uC(e.shift())}function uC(t){switch(t){case Ui.WEBGL1:return T2e();case Ui.WEBGL2:return I2e()}}function T2e(){return v9||(v9=C2e()),v9}function I2e(){return w9||(w9=k2e()),w9}let CG=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},E2e=class extends CG{constructor(){super(...arguments),this.type=Ui.WEBGL1}},A2e=class extends CG{constructor(){super(...arguments),this.type=Ui.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function kG(t,e){if(t===Ui.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Ui.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=Q6(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=Q6(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===Ui.WEBGL1){const h=r.getParameter(r.VERSION),f=h==null?void 0:h.match(/^WebGL\s+([\d.]*)/);if(f){const m=parseFloat(f[1]);e.available=m>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(e.supportsHighPrecisionFragment=s.precision>0),r}function C2e(){const t=new E2e,e=kG(Ui.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function k2e(){const t=new A2e,e=kG(Ui.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function O2e(t){const e=$2e(t);if(!e.available)return new ne("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ui.WEBGL1){if(!e.supportsElementIndexUint)return new ne("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new ne("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new ne("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function P2e(t){return t&&"nodeType"in t}function R2e(t){return t&&typeof t.render=="function"}const hC={component:"esri-component"};let hc=class extends Oe{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(hC.component),i&&i.classList.remove(hC.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||P2e(e)?(this._set("widget",null),S7(e)):(R2e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};v([x({dependsOn:[]})],hc.prototype,"id",null),v([x()],hc.prototype,"node",null),v([vt("node")],hc.prototype,"castNode",null),v([x({readOnly:!0})],hc.prototype,"widget",void 0),hc=v([B("esri.views.ui.Component")],hc);const h2=hc,F2e={left:0,top:0,bottom:0,right:0},OG={bottom:30,top:15,right:15,left:15},Ma="esri-ui",Yr={ui:Ma,corner:`${Ma}-corner`,innerContainer:`${Ma}-inner-container`,manualContainer:`${Ma}-manual-container`,cornerContainer:`${Ma}-corner-container`,topLeft:`${Ma}-top-left`,topRight:`${Ma}-top-right`,bottomLeft:`${Ma}-bottom-left`,bottomRight:`${Ma}-bottom-right`};function N2e(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Qg(t){return t===0?"0":`${t}px`}function b9(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function _9(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let qo=class extends pa.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=_s(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&_9(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&_9(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([me(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,_t),me(()=>this.padding,this._applyUIPadding,_t),me(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},_t),_O(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Yr.ui),Bie(e),this._attachContainers(e)),i&&(i.classList.remove(Yr.ui),_9(i,{top:"",bottom:"",left:"",right:""}),tF(i)),this._set("container",e))}get height(){var h;const e=((h=this.view)==null?void 0:h.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(e-r-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...OG,...e}}get width(){var h;const e=((h=this.view)==null?void 0:h.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(e-r-s,0)}get test(){return{components:this._components}}add(e,i){let r,s;if(Array.isArray(e))return void e.forEach(f=>this.add(f,i));const h=b9(e);h&&({index:r,position:i,component:e,key:s}=h),i&&typeof i=="object"&&({index:r,key:s,position:i}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,s)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){if(this._componentToKey.has(e)&&this._componentToKey.get(e)!==i)return;const s=this._components.indexOf(r),h=r.node.parentNode;return h==null||h.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(i=>this.empty(i)).reduce((i,r)=>i.concat(r)):(e??(e="manual"),e==="manual"?Array.prototype.slice.call(this._manualContainer.children).filter(i=>!i.classList.contains(Yr.corner)).map(i=>this.remove(i)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null)}move(e,i){if(Array.isArray(e)&&e.forEach(f=>this.move(f,i)),!e)return;let r;const s=b9(e)||b9(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const h=this.remove(e);h&&this.add(h,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e){return e?Array.isArray(e)?e.map(i=>this._getComponentsAtPosition(i)).flat():this._getComponentsAtPosition(e):this._components.map(({widget:i,node:r})=>i??r)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s){e instanceof h2||(e=new h2({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof h2?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??F2e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Yr.innerContainer,Yr.cornerContainer);const i=document.createElement("div");i.classList.add(Yr.innerContainer,Yr.manualContainer);const r=document.createElement("div");r.classList.add(Yr.topLeft,Yr.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(Yr.topRight,Yr.corner),e.appendChild(s);const h=document.createElement("div");h.classList.add(Yr.bottomLeft,Yr.corner),e.appendChild(h);const f=document.createElement("div");f.classList.add(Yr.bottomRight,Yr.corner),e.appendChild(f),this._innerContainer=e,this._manualContainer=i;const m=Qo();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":h,"bottom-right":f,"top-leading":m?s:r,"top-trailing":m?r:s,"bottom-leading":m?f:h,"bottom-trailing":m?h:f},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:s}=e,h=this._positionNameToContainerLookup[i],f=s!=null&&s>-1;if(N2e(r.widget)&&r.widget.startup(),!f)return void h.appendChild(r.node);const m=Array.prototype.slice.call(h.children);if(s===0)return void(h.firstChild?tT(r.node,h.firstChild):h.appendChild(r.node));s>=m.length?h.appendChild(r.node):tT(r.node,m[s])}_toPixelPosition(e){return{top:Qg(e.top),left:Qg(e.left),right:Qg(e.right),bottom:Qg(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map(r=>this._findByNode(r)).filter(Zn).map(({widget:r,node:s})=>r??s)}};v([x()],qo.prototype,"_locale",void 0),v([x()],qo.prototype,"container",null),v([x()],qo.prototype,"height",null),v([x({value:OG})],qo.prototype,"padding",null),v([vt("padding")],qo.prototype,"castPadding",null),v([x()],qo.prototype,"view",void 0),v([x()],qo.prototype,"width",null),qo=v([B("esri.views.ui.UI")],qo);const L2e=qo;function cC(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function j2e(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function ev(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function D2e(t){return t.type==="bing-maps"}const Ll=[];let xd=class extends hw{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new qe,this.view=null,this._allLayerViewsChange=e=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>me(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),e&&e.removed&&e.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([un(()=>{var e;return(e=this.view)==null?void 0:e.allLayerViews},"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Sn(()=>{var e;return((e=this.view)==null?void 0:e.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t==null?void 0:t.allLayerViews;Ll.length=0,t&&e?(e.forEach(i=>{var h;if(i.suspended||!((h=i.layer)!=null&&h.attributionVisible))return;const r=i.layer;if(cC(r,"user"))return void ev(Ll,i,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(i)){const f=this._fetchedAttributionData.get(i);return void(f?ev(Ll,i,this._getDynamicAttribution(f,t,r)):cC(r)&&ev(Ll,i,r.copyright))}return void this._fetchAttributionData(i)}const s=r.get("portalItem.accessInformation");ev(Ll,i,s||r.copyright)}),j2e(this.items,Ll)&&(this.items.removeAll(),this.items.addMany(Ll)),Ll.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await Qd(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,D2e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let h=0;h<i.length;h++){const f=i[h],m=f.coverageAreas;if(!m)return;for(const b of m){const S=b.bbox,I=b.zoomMin-(e&&b.zoomMin?1:0),A=b.zoomMax-(e&&b.zoomMax?1:0),O=new At({xmin:S[1],ymin:S[0],xmax:S[3],ymax:S[2],spatialReference:Ye.WGS84}),R={extent:ea(O),attribution:f.attribution||"",score:b.score!=null?b.score:100,id:h};for(let L=I;L<=A;L++){var s;r[s=L]??(r[s]=[]),r[L].push(R)}}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){var S;const{extent:r,scale:s}=e;let h=((S=i.tileInfo)==null?void 0:S.scaleToZoom(s))??0;if(h=Math.min(t.maxKey??0,Math.round(h)),!r||h==null||h<=-1)return"";const f=t[h],m=E0(r.center.clone().normalize(),e.spatialReference),b=new Set;return f?f.filter(I=>{const A=I.id,O=!b.has(A)&&m&&I.extent&&ib(I.extent,m);return O&&b.add(A),O}).sort((I,A)=>A.score-I.score||I.objectId-A.objectId).map(I=>I.attribution).join(", "):""}};v([x({readOnly:!0,type:qe})],xd.prototype,"items",void 0),v([x({readOnly:!0})],xd.prototype,"state",null),v([x()],xd.prototype,"view",void 0),xd=v([B("esri.widgets.Attribution.AttributionViewModel")],xd);const PG=xd,Vp="esri-attribution",jl={base:`${Vp} esri-widget`,poweredBy:`${Vp}__powered-by`,sources:`${Vp}__sources`,open:`${Vp}--open`,sourcesOpen:`${Vp}__sources--open`,link:`${Vp}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Vr=class extends Er{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.iconClass=jl.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new PG}initialize(){this.addHandles(un(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[jl.open]:this._isOpen};return ie("div",{bind:this,class:this.classes(jl.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return ie("div",{class:jl.poweredBy},"Powered by"," ",ie("a",{class:jl.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:s}=this,h={[jl.sourcesOpen]:e,[jl.interactive]:i};return ie("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(jl.sources,h),innerHTML:s,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:h}=e,f=h>s,m=this._attributionTextOverflowed!==f;if(this._attributionTextOverflowed=f,m&&(i=!0),this._isOpen){const b=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,b&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([x()],Vr.prototype,"_isOpen",void 0),v([x()],Vr.prototype,"_isInteractive",null),v([x()],Vr.prototype,"_attributionTextOverflowed",void 0),v([x()],Vr.prototype,"_prevSourceNodeHeight",void 0),v([x({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Vr.prototype,"attributionText",null),v([x()],Vr.prototype,"iconClass",void 0),v([x()],Vr.prototype,"icon",void 0),v([x()],Vr.prototype,"itemDelimiter",void 0),v([x()],Vr.prototype,"label",null),v([x(),xr("esri/widgets/Attribution/t9n/Attribution")],Vr.prototype,"messages",void 0),v([x()],Vr.prototype,"view",null),v([x({type:PG})],Vr.prototype,"viewModel",void 0),v([zn()],Vr.prototype,"_toggleState",null),Vr=v([B("esri.widgets.Attribution")],Vr);const z2e=Vr,V2e="esri.widgets.CompassViewModel";let cc=class extends kM(Oe){constructor(e){super(e),this._handles=new Mn,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(me(()=>this.view,this._updateRotationWatcher,_t))}destroy(){$i(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?me(()=>e==null?void 0:e.rotation,this._updateForRotation,_t):me(()=>e==null?void 0:e.camera,this._updateForCamera,_t))}};v([x({readOnly:!0})],cc.prototype,"canShowNorth",null),v([x()],cc.prototype,"orientation",void 0),v([x({readOnly:!0})],cc.prototype,"state",null),v([x()],cc.prototype,"view",void 0),cc=v([B(V2e)],cc);const RG=cc,Dl={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let to=class extends Er{constructor(e,i){super(e,i),this.iconClass=Dl.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new RG}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",s=(i==="rotation"?"rotation":"compass")=="compass",h=r?-1:0,f={[Dl.disabled]:r,[Dl.interactive]:!r},m={[Dl.northIcon]:s,[Dl.rotationIcon]:!s},{messages:b}=this;return ie("div",{bind:this,class:this.classes(Dl.base,f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:h,"aria-label":b.reset,title:b.reset},ie("span",{"aria-hidden":"true",class:this.classes(Dl.icon,m),styles:this._toRotationTransform(e)}),ie("span",{class:Dl.text},b.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};v([x()],to.prototype,"goToOverride",null),v([x()],to.prototype,"iconClass",void 0),v([x()],to.prototype,"icon",void 0),v([x()],to.prototype,"label",null),v([x(),xr("esri/widgets/Compass/t9n/Compass")],to.prototype,"messages",void 0),v([x()],to.prototype,"view",null),v([x({type:RG})],to.prototype,"viewModel",void 0),v([zn()],to.prototype,"_reset",null),to=v([B("esri.widgets.Compass")],to);const G2e=to,Gp="esri-navigation-toggle",is={base:`${Gp} esri-widget`,button:`${Gp}__button esri-widget--button`,activeButton:`${Gp}__button--active`,panButton:`${Gp}__button--pan`,rotateButton:`${Gp}__button--rotate`,isLayoutHorizontal:`${Gp}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Sd=class extends Oe{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Sn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};v([x({readOnly:!0})],Sd.prototype,"state",null),v([x()],Sd.prototype,"navigationMode",void 0),v([x()],Sd.prototype,"view",void 0),Sd=v([B("esri.widgets.NavigationToggleViewModel")],Sd);const FG=Sd;let io=class extends Er{constructor(e,i){super(e,i),this.iconClass=is.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new FG}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[is.disabled]:e,[is.isLayoutHorizontal]:this.layout==="horizontal"},s={[is.activeButton]:i},h={[is.activeButton]:!i},f=e?-1:0,m=this.messages.toggle;return ie("div",{bind:this,class:this.classes(is.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:f,"aria-label":m,title:m},ie("div",{class:this.classes(is.button,is.panButton,s)},ie("span",{class:is.panIcon})),ie("div",{class:this.classes(is.button,is.rotateButton,h)},ie("span",{class:is.rotationIcon})))}_toggle(){this.toggle()}};v([x()],io.prototype,"iconClass",void 0),v([x()],io.prototype,"icon",void 0),v([x()],io.prototype,"label",null),v([x({value:"vertical"})],io.prototype,"layout",null),v([x(),xr("esri/widgets/NavigationToggle/t9n/NavigationToggle")],io.prototype,"messages",void 0),v([x()],io.prototype,"view",null),v([x({type:FG})],io.prototype,"viewModel",void 0),v([zn()],io.prototype,"_toggle",null),io=v([B("esri.widgets.NavigationToggle")],io);const q2e=io,Cf={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Ua=class extends Er{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[Cf.disabled]:!this.enabled,[Cf.interactive]:this.enabled};return ie("div",{bind:this,class:this.classes(Cf.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},ie("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Cf.icon,this.iconClass??"")}),ie("span",{class:Cf.iconText},this.title))}_triggerAction(){this.action.call(this)}};v([x()],Ua.prototype,"action",void 0),v([x()],Ua.prototype,"enabled",void 0),v([x()],Ua.prototype,"iconClass",void 0),v([x()],Ua.prototype,"icon",void 0),v([x()],Ua.prototype,"title",void 0),v([zn()],Ua.prototype,"_triggerAction",null),Ua=v([B("esri.widgets.IconButton")],Ua);const pC=Ua;let Md=class extends Oe{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};v([x({readOnly:!0})],Md.prototype,"canZoomIn",null),v([x({readOnly:!0})],Md.prototype,"canZoomOut",null),v([x()],Md.prototype,"view",void 0),Md=v([B("esri.widgets.Zoom.ZoomConditions2D")],Md);const U2e=Md;let $d=class extends Oe{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};v([x({readOnly:!0})],$d.prototype,"canZoomIn",null),v([x({readOnly:!0})],$d.prototype,"canZoomOut",null),v([x()],$d.prototype,"view",void 0),$d=v([B("esri.widgets.Zoom.ZoomConditions3D")],$d);const B2e=$d;let du=class extends Oe{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new U2e({view:e}):e.type==="3d"&&(this._zoomConditions=new B2e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Ld(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Ld(e.goTo({zoomFactor:.5}))}};v([x()],du.prototype,"_zoomConditions",void 0),v([x()],du.prototype,"canZoomIn",null),v([x()],du.prototype,"canZoomOut",null),v([x({readOnly:!0})],du.prototype,"state",null),v([x()],du.prototype,"view",null),du=v([B("esri.widgets.Zoom.ZoomViewModel")],du);const NG=du,kf={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Uo=class extends Er{constructor(e,i){super(e,i),this.iconClass=kf.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new NG}initialize(){this._zoomInButton=new pC({action:this.zoomIn.bind(this),iconClass:kf.zoomInIcon}),this._zoomOutButton=new pC({action:this.zoomOut.bind(this),iconClass:kf.zoomOutIcon})}destroy(){this._zoomInButton=Ut(this._zoomInButton),this._zoomOutButton=Ut(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[kf.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:s}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=s;const{zoomIn:h,zoomOut:f}=this.messages;return this._zoomInButton.title=h,this._zoomOutButton.title=f,ie("div",{class:this.classes(kf.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};v([x()],Uo.prototype,"iconClass",void 0),v([x()],Uo.prototype,"icon",void 0),v([x()],Uo.prototype,"label",null),v([x({value:"vertical"})],Uo.prototype,"layout",null),v([x(),xr("esri/widgets/Zoom/t9n/Zoom")],Uo.prototype,"messages",void 0),v([x()],Uo.prototype,"view",null),v([x({type:NG})],Uo.prototype,"viewModel",void 0),Uo=v([B("esri.widgets.Zoom")],Uo);const H2e=Uo;function W2e(t){return(t==null?void 0:t.view)!==void 0}let c2=class extends L2e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([me(()=>this.components,this._componentsWatcher.bind(this),_t),me(()=>this.view,this._updateViewAwareWidgets.bind(this),_t)])}_add(e,i,r,s){let h=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;h=this._createComponent(e)}super._add(h,i,r,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(i=>{const r=this._find(i),s=r&&r.widget;W2e(s)&&(s.view=e)})}_componentsWatcher(e,i){this._removeComponents(i),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);if(i)return new h2({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new z2e({view:i});case"compass":return new G2e({view:i});case"navigation-toggle":return new q2e({view:i});case"zoom":return new H2e({view:i})}}};v([x()],c2.prototype,"components",void 0),c2=v([B("esri.views.ui.DefaultUI")],c2);const LG=c2;let p2=class extends LG{constructor(e){super(e),this.components=["attribution","zoom"]}};v([x()],p2.prototype,"components",void 0),p2=v([B("esri.views.ui.2d.DefaultUI2D")],p2);const jG=p2;var eS;let d2=eS=class extends ye{constructor(t){super(t),this.color=new Be([0,0,0,1])}clone(){return new eS(se({color:this.color}))}};v([x({type:Be,json:{write:!0}})],d2.prototype,"color",void 0),d2=eS=v([B("esri.webmap.background.ColorBackground")],d2);const J2e=d2;let DG,zG,VG,GG,qG,UG;async function K2e(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:h}]=await Promise.all([he(()=>import("./webglDeps-f4b4e0ef.js"),["assets/webglDeps-f4b4e0ef.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/ProgramTemplate-8c949420.js","assets/programUtils-7ee36e52.js","assets/NestedMap-1b5db22e.js"]),he(()=>import("./mapViewDeps-8253194a.js"),["assets/mapViewDeps-8253194a.js","assets/MagnifierPrograms-b25e2fb7.js","assets/_commonjsHelpers-2f3e7994.js","assets/WGLContainer-e3cf0f79.js","assets/definitions-43101aab.js","assets/VertexArrayObject-01ae6462.js","assets/Texture-05984be5.js","assets/enums-10aa9b05.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-498e21e5.js","assets/enums-55085e26.js","assets/ProgramTemplate-8c949420.js","assets/MaterialKey-558bebf6.js","assets/utils-8297914d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-97be294d.js","assets/earcut-61f7b102.js","assets/ExpandedCIM-000a2206.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7b7f0e9b.js","assets/floatRGBA-c52f04c6.js","assets/rasterizingUtils-5a45b7fc.js","assets/imageutils-ef43dce9.js","assets/Matcher-249049b5.js","assets/visualVariablesUtils-79ded321.js","assets/visualVariablesUtils-15c65c16.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-2880c0e5.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-ef508845.js","assets/DisjointTimerQuery-b21930a9.js","assets/ComputedAttributeStorage-61661e7a.js","assets/arcadeTimeUtils-d7394813.js","assets/executionError-fb3f283a.js","assets/centroid-8e8cfa47.js","assets/BufferPool-c2393100.js","assets/enums-fb086c25.js","assets/programUtils-7ee36e52.js","assets/NestedMap-1b5db22e.js","assets/RenderingContext-8ec1d092.js","assets/OrderIndependentTransparency-5206b14a.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-a0b95b08.js","assets/normalizeUtilsSync-6acdc431.js","assets/projectionSupport-a7984413.js","assets/json-48e3ea08.js","assets/AttributeStoreView-5ca66b04.js","assets/TiledDisplayObject-aa0c2485.js","assets/schemaUtils-17781e9a.js","assets/util-802c5b03.js","assets/GraphicContainer-2839983b.js","assets/BaseGraphicContainer-860d2492.js","assets/FeatureContainer-497d8b5c.js","assets/TileContainer-b9b34a1c.js","assets/requestImageUtils-4b82835b.js"])]);zG=t,VG=e,GG=i,qG=r,UG=s,DG=h}const dC=160;function Z2e(t){return t&&t.declaredClass==="esri.Viewpoint"}let Xe=class extends rQ(ude(hde(Tge))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new _y({getCollections:()=>{var e,i;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new eve(this),this._pePromise=null,this.floors=new qe,this.highlightOptions=new $G,this.inputManager=new r2e({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new TG,this.type="2d",this.ui=new jG,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new pG,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([me(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(dC)},qn),this.on("resize",e=>this._resizeHandler(e)),me(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),jY()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Ut(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new h2e(this.featuresTilingScheme)}get initialExtentRequired(){var f;const{scale:t,constraints:e,center:i,viewpoint:r,extent:s}=this;let h=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((f=this.map.initialViewProperties)!=null&&f.viewpoint))&&!s&&(e!=null&&e.effectiveLODs||(h=-1),(!i||t===0&&h===-1)&&(!r||r.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!rp()||(this._pePromise||(this._pePromise=np().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!Ku(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var r;t===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};t.when(i,i)}get background(){return X2e(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new ke({x:t[0],y:t[1],spatialReference:e})}set center(t){if(t==null)return;if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(t,this.spatialReference)}catch(r){return void fe.getLogger(this.declaredClass).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:r}))}const i=this.viewpoint;B6(i,i,e),this.viewpoint=i}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(me(()=>t.version,()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint))},qn),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void fe.getLogger(this.declaredClass).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(t,this.spatialReference)}catch(r){return void fe.getLogger(this.declaredClass).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;jge(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;Zge(e,e,t),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;qA(e,e,t),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,i,r;const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(ue("esri-2d-log-updating")){const s=this.allLayerViews.reduce((h,f)=>({...h,[f.layer.id]:!f.destroyed&&!("layerViews"in f)&&f.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return t}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let e,i;try{e=this._project(t,this.spatialReference),!t.scale||isNaN(t.scale)?i=new ne("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void fe.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new _r({targetGeometry:new ke,scale:0,rotation:0});_o(r,e),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(t==null)return;if(!this.ready){this._set("zoom",t),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const e=this.viewpoint;qA(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),vb(()=>this.ready,e).then(()=>{var s;const i={animate:!0,...e},r=Fge(t,this);return(s=this.animation)==null||s.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});fe.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=jA(t)?LA(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,h=null,f=null;e!=null&&e.include?yC(e.include,fC(this,I=>r.add(I),I=>{h||(h=new Set),h.add(I)},I=>r.add(I),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),e!=null&&e.exclude&&yC(e.exclude,fC(this,I=>r.delete(I),I=>{f||(f=new Set),f.add(I)}));const m=this.allLayerViews.filter(I=>!I.suspended&&r.has(I)).reverse(),b=this.toMap(i);let S=[...s?this.graphicsView.hitTest(b).map(I=>({type:"graphic",graphic:I,layer:null,mapPoint:b})):[],...await Promise.all(m.map(I=>I.hitTest(b,i)).toArray())].filter(Zn).flat().filter(Zn);return h&&(S=S.filter(I=>!("graphic"in I)||!I.graphic||(h==null?void 0:h.has(tS(I.graphic))))),f&&(S=S.filter(I=>!("graphic"in I)||!I.graphic||(f==null?void 0:f.has(tS(I.graphic))))),{screenPoint:i,results:S}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return d2e(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return f2e(i,this._pixelFormat)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,v2e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach(h=>{const f=this.allLayerViews.find(m=>m.layer.id===h.id);f&&"container"in f&&f.container&&i.push(f.container)})):i=this._stage.children;const{format:r,quality:s}=g2e(t.format,t.quality);return p2e(t,e,this.size,this.padding,r,s,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=jA(t)?LA(this,t):t,i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),h=this.spatialReference;return new ke({x:r,y:s,spatialReference:h})}toScreen(t){if(!this.ready)return null;const e=this._project(t,this.spatialReference),i=[e.x,e.y];return this.state.toScreen(i,i),Ur(i[0],i[1])}on(t,e,i,r){return this.inputManager&&this.viewEvents.on(t,e,i,r)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,e,i;return this.map&&"initialViewProperties"in this.map&&((e=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:e.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(t){return BA.hasLayerViewModule(t)}importLayerView(t){return BA.importLayerView(t)}pixelSizeAt(){return this.ready?this.state.resolution:(fe.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=O2e(this.type);return ue("safari")&&ue("safari")<9&&(t=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ue("safari")})),t!=null?(fe.getLogger(this.declaredClass).warn("#validate()",t.message),Promise.reject(t)):K2e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new v0),this.animation}_cancellableGoTo(t,e,i){const r=()=>t===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(f=>{throw r()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),f}),h=new Promise(f=>f(s));return e.when().catch(()=>{r()&&h.cancel&&h.cancel()}),h}_gotoImmediate(t,e){const i=this._gotoTask,r=this.animation,s=t.then(h=>{if(Oi(e),i!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=h,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<dC&&(this._stationaryTimer=this._flipStationary(e))},t)),this._stationaryTimer}_getDefaultViewpoint(){var j,H,Y,X;const{constraints:t,initialExtent:e,map:i,padding:r,size:s}=this;if(!t)return null;const h=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,f={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};t.effectiveLODs?f.zoom!==-1&&(f.scale=t.zoomToScale(f.zoom)):f.zoom=-1;let m=null,b=null,S=0;const I=f.viewpoint&&f.viewpoint.rotation,A=f.viewpoint&&f.viewpoint.targetGeometry;A!=null&&(A.type==="extent"?m=A:A.type==="point"&&(b=A,S=f.viewpoint.scale));const O=f.extent||m||((H=(j=h==null?void 0:h.viewpoint)==null?void 0:j.targetGeometry)==null?void 0:H.extent)||e,R=f.center||b||(O==null?void 0:O.center),L=f.scale||S||((Y=h==null?void 0:h.viewpoint)==null?void 0:Y.scale)||O&&hy(O,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),z=f.rotation||I||((X=h==null?void 0:h.viewpoint)==null?void 0:X.rotation)||0;return R&&L?new _r({targetGeometry:R,scale:L,rotation:z}):null}_gotoAnimated(t,e){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const s=t.then(h=>{if(Oi(e),i!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return r.update(h),this.animationManager.animate(r,this.viewpoint,e),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(t,e){var s;const i=t&&t.targetGeometry||t;if(!e)return t;if(!i)return null;if(e.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||ir(e,i.spatialReference))return t;const r=ah(i,e);if(!r)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:e});return Z2e(t)?(t.targetGeometry=r,t):r}_resizeHandler(t){if(!this.ready)return;const e=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],Kge(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){var m,b;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint(),e=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(S){fe.getLogger(this.declaredClass).warn(new Ss("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:e.toJSON(),spatialReference:this.spatialReference,error:S})),t.targetGeometry=((m=this.defaultsFromMap.extent)==null?void 0:m.center)||new ke({x:0,y:0,spatialReference:this.spatialReference})}(b=this.constraints)==null||b.fit(t),this._set("state",new yve({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;const i=new DG(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new UG,this._magnifierView.magnifier=this.magnifier;const r=new GG({view:this});this._set("labelManager",r);const s=new Qge({view:this});this._set("animationManager",s);const h=new qG({view:this,animationManager:s});this._set("mapViewNavigation",h),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",S=>this.fatalError=S.error),me(()=>this.stationary,S=>i.stationary=S,Gh),me(()=>this.background,S=>{i.background=S,this._magnifierView.background=S},Gh),me(()=>this.magnifier,S=>this._magnifierView.magnifier=S,Gh),me(()=>this.renderingOptions,S=>i.renderingOptions=S,Gh),me(()=>this.highlightOptions,S=>i.highlightOptions=S,Gh),me(()=>this.state.id,()=>i.state=this.state,Gh)],"map-view"),this._updateStageChildren();const f=this._resolveWhenReady;this._resolveWhenReady=[],f.forEach(S=>S(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[t,e],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,h=new ke({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",h),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new xve(tQ.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new zG({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new VG(t)});this.frameTask.graphicsView=e,this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(!this.ready)return;this.frameTask.stop();for(const m of this.allLayerViews)m.processDetach();this._destroySpatialReferenceDependentProperties();const e=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=e.scale;else{const m=e.viewpoint.clone();m.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=m}const i=e.clone(),[r,s]=e.center;let h=null;try{h=this._project(new ke({x:r,y:s,spatialReference:e.spatialReference}),t)}catch(m){rp()||fe.getLogger(this.declaredClass).warn(new Ss("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:h==null?void 0:h.toJSON(),spatialReference:t,error:m}))}h||(h=new ke({x:0,y:0,spatialReference:t}));const f=B6(new _r({targetGeometry:new ke,scale:0,rotation:0}),e.viewpoint,h);i.viewpoint=f;try{const b=[e.size[0]/2,e.size[1]/2],S=[b[0]+20,b[1]],I=e.toMap([0,0],S),{x:A,y:O}=this._project(new ke({x:I[0],y:I[1],spatialReference:e.spatialReference}),t);I[0]=A,I[1]=O,i.toScreen(I,I);const R=Wge(b,I,S),L=Math.hypot(I[0]-b[0],I[1]-b[1])/20;!Number.isFinite(L)||Math.abs(L)>4?(f.rotation=0,f.targetGeometry=new ke({x:0,y:0,spatialReference:t})):(f.scale*=L,f.scale>ue("mapview-srswitch-adjust-rotation-scale-threshold")?f.rotation=0:f.rotation+=Number.isFinite(R)?R:0)}catch{}this._get("constraints").constrain(f,void 0),this._get("state").viewpoint=f,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const m of this.allLayerViews)m.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Xe.type="2d",v([x({readOnly:!0})],Xe.prototype,"animationManager",void 0),v([x({constructOnly:!0})],Xe.prototype,"deactivatedWebGLExtensions",void 0),v([x({constructOnly:!0})],Xe.prototype,"debugWebGLExtensions",void 0),v([x({readOnly:!0})],Xe.prototype,"featuresTilingScheme",void 0),v([x({readOnly:!0})],Xe.prototype,"fullOpacity",void 0),v([x({readOnly:!0})],Xe.prototype,"graphicsTileStore",null),v([x()],Xe.prototype,"graphicsView",void 0),v([x({readOnly:!0})],Xe.prototype,"state",void 0),v([x()],Xe.prototype,"initialExtentRequired",null),v([x()],Xe.prototype,"labelManager",void 0),v([x({readOnly:!0})],Xe.prototype,"resourceManager",null),v([x({readOnly:!0})],Xe.prototype,"textureManager",null),v([x({readOnly:!0})],Xe.prototype,"mapViewNavigation",void 0),v([x({constructOnly:!0})],Xe.prototype,"renderCanvas",void 0),v([x()],Xe.prototype,"renderingOptions",void 0),v([x({readOnly:!0})],Xe.prototype,"rendering",void 0),v([x({constructOnly:!0})],Xe.prototype,"supersampleScreenshotsEnabled",void 0),v([x({readOnly:!0})],Xe.prototype,"supportsGround",void 0),v([x()],Xe.prototype,"_stationaryTimer",void 0),v([x()],Xe.prototype,"_defaultsFromMapSettings",null),v([x()],Xe.prototype,"_pePromise",void 0),v([x({readOnly:!0})],Xe.prototype,"typeSpecificPreconditionsReady",null),v([x()],Xe.prototype,"animation",null),v([x({type:J2e})],Xe.prototype,"background",null),v([x({value:null,type:ke,dependsOn:["state.id","ready"]})],Xe.prototype,"center",null),v([x({type:pG})],Xe.prototype,"constraints",null),v([x({value:null,type:At,dependsOn:["state.id","ready"]})],Xe.prototype,"extent",null),v([x()],Xe.prototype,"floors",void 0),v([x({type:$G})],Xe.prototype,"highlightOptions",void 0),v([x({readOnly:!0})],Xe.prototype,"inputManager",void 0),v([x()],Xe.prototype,"map",void 0),v([x({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Xe.prototype,"padding",null),v([x()],Xe.prototype,"resizeAlign",void 0),v([x({readOnly:!0,dependsOn:["state.id"]})],Xe.prototype,"resolution",null),v([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Xe.prototype,"rotation",null),v([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Xe.prototype,"scale",null),v([x({constructOnly:!0})],Xe.prototype,"spatialReferenceLocked",void 0),v([x()],Xe.prototype,"stationary",null),v([x({type:TG,readOnly:!0})],Xe.prototype,"timeline",void 0),v([x({readOnly:!0})],Xe.prototype,"type",void 0),v([x({readOnly:!0})],Xe.prototype,"updating",null),v([x({value:null,type:_r,dependsOn:["state.id","ready"]})],Xe.prototype,"viewpoint",null),v([x({value:-1,dependsOn:["state.id","ready"]})],Xe.prototype,"zoom",null),v([x({readOnly:!0})],Xe.prototype,"navigating",null),v([x(),vt(t=>t instanceof LG?t:Yw(jG,t))],Xe.prototype,"ui",void 0),Xe=v([B("esri.views.MapView")],Xe);const Y2e=Xe;function tS(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function fC(t,e,i,r,s){return h=>{if(h instanceof Mr){if(h.layer===t)s==null||s();else{const f=t.allLayerViews.find(m=>m.layer===h.layer);f&&(r==null||r(f))}i(tS(h))}else{const f=t.allLayerViews.find(m=>m.layer===h);f&&e(f)}}}function yC(t,e){if(t)if(f2(t))for(const i of t)if(f2(i))for(const r of i)e(r);else e(i);else e(t)}function X2e(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}new tt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new tt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Sh=class extends ye{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};v([x({type:String,json:{write:!0}})],Sh.prototype,"deviationUnit",void 0),v([x({json:{read:{reader:t=>t?t.map(e=>an(e)).filter(Zn):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Sh.prototype,"geometries",void 0),v([x({type:Number,json:{write:!0}})],Sh.prototype,"maxDeviation",void 0),Sh=v([B("esri.rest.support.GeneralizeParameters")],Sh),Sh.from=ei(Sh);new tt({preserveShape:"preserve-shape"});let zl=class extends ye{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};v([x({type:String,json:{write:!0}})],zl.prototype,"calculationType",void 0),v([x({type:Boolean,json:{write:!0}})],zl.prototype,"geodesic",void 0),v([x({json:{write:!0}})],zl.prototype,"lengthUnit",void 0),v([x({type:[_n],json:{read:{reader:t=>t?t.map(e=>an(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],zl.prototype,"polylines",void 0),zl=v([B("esri.rest.support.LengthsParameters")],zl),zl.from=ei(zl);new tt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new tt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let $a=class extends ye{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};v([x({type:Number,json:{write:!0}})],$a.prototype,"bevelRatio",void 0),v([x({json:{read:{reader:t=>t?t.map(e=>an(e)).filter(Zn):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],$a.prototype,"geometries",void 0),v([x({type:Number,json:{write:!0}})],$a.prototype,"offsetDistance",void 0),v([x({type:String,json:{write:!0}})],$a.prototype,"offsetHow",void 0),v([x({type:String,json:{write:!0}})],$a.prototype,"offsetUnit",void 0),$a=v([B("esri.rest.support.OffsetParameters")],$a),$a.from=ei($a);let pc=class extends ye{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:C0(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};v([x()],pc.prototype,"geometries",void 0),v([x({json:{read:{source:"outSR"}}})],pc.prototype,"outSpatialReference",void 0),v([x()],pc.prototype,"transformation",void 0),v([x()],pc.prototype,"transformForward",void 0),pc=v([B("esri.rest.support.ProjectParameters")],pc);const BG=pc,Q2e=ei(BG);async function ewe(t,e,i){e=Q2e(e);const r=B7(t),s={...r.query,f:"json",...e.toJSON()},h=e.outSpatialReference,f=C0(e.geometries[0]),m=dne(s,i);return wi(r.path+"/project",m).then(({data:{geometries:b}})=>HN(b,f,h))}new tt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Vl=class extends ye{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};v([x({json:{read:{reader:t=>t?t.map(e=>an(e)).filter(Zn):null},write:{writer:(t,e)=>{e.geometries1=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Vl.prototype,"geometries1",void 0),v([x({json:{read:{reader:t=>t?t.map(e=>an(e)).filter(Zn):null},write:{writer:(t,e)=>{e.geometries2=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Vl.prototype,"geometries2",void 0),v([x({type:String,json:{write:!0}})],Vl.prototype,"relation",void 0),v([x({type:String,json:{write:!0}})],Vl.prototype,"relationParameter",void 0),Vl=v([B("esri.rest.support.RelationParameters")],Vl),Vl.from=ei(Vl);new tt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Mh=class extends ye{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};v([x({type:String,json:{write:!0}})],Mh.prototype,"extendHow",void 0),v([x({type:[_n],json:{read:{reader:t=>t?t.map(e=>an(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],Mh.prototype,"polylines",void 0),v([x({json:{read:{reader:t=>t?an(t):null},write:{writer:(t,e)=>{e.trimExtendTo=t.toJSON()}}}})],Mh.prototype,"trimExtendTo",void 0),Mh=v([B("esri.rest.support.TrimExtendParameters")],Mh),Mh.from=ei(Mh);const HG=fe.getLogger("esri.widgets.support.geolocationUtils");function twe(){const t=ue("esri-geolocation");return t||HG.warn("geolocation-unsupported","Geolocation unsupported."),t}function iwe(){const t=window.isSecureContext;return t||HG.warn("insecure-context","Geolocation requires a secure origin."),t}function rwe(){return twe()&&iwe()}function nwe(t,e){const{position:i,view:r}=t,s=swe(i),h=s==null?void 0:s.coords;if(!h)throw new ne("geometry-service:no-coords","Geolocation has no coordinates");return awe(owe(h),r,e)}function swe(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function owe({longitude:t,latitude:e,altitude:i}){return new ke({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function awe(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(ea(t)):lwe(i).then(s=>{if(!s)throw new ne("geometry-service:missing-url","Geometry service URL is missing");const h=new BG({geometries:[t],outSpatialReference:r});return ewe(s,h,i).then(f=>f[0])})}function lwe(t){if(Tt.geometryServiceUrl)return Promise.resolve(Tt.geometryServiceUrl);const e=on.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}const uwe=2500,hwe=new O0({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},{type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",tintColor:[255,255,255,255],url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="}],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}}]}});let Bo=class extends kM(pa.EventedMixin(Oe)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new Mr({symbol:hwe}),this.scale=null,this.rotationDisabled=!1,this.view=null}initialize(){rwe()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){const{view:e,graphic:i}=this;e&&i&&e.graphics.remove(i)}_getScaleWithinConstraints(e,i){if(!i)return e;if(i.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:s}=i.constraints;return Math.min(s,Math.max(r,e))}return e}_getScale(e){const{scale:i}=this,r=typeof i=="number"?i:uwe;return this._getScaleWithinConstraints(r,e)}_getHeading(e,i){var f;const r=i==null?void 0:i.spatialReference,s=(r==null?void 0:r.isWebMercator)||(r==null?void 0:r.isGeographic),h=(f=e.coords)==null?void 0:f.heading;if(!(!s||typeof h!="number"||isNaN(h)||h<0||h>360))return h}_addHeading(e){const{heading:i,target:r,view:s}=e;s&&typeof i=="number"&&!isNaN(i)&&(s.type!=="3d"?s.type==="2d"&&(r.rotation=360-i):r.heading=i)}_animatePoint(e,i,r,s){const{view:h}=this;if(!this.goToLocationEnabled||!h)return Promise.resolve();const f={target:e,scale:r};return!this.rotationDisabled&&h&&this._addHeading({heading:this._getHeading(i,h),target:f,view:h}),this.callGoTo({target:f,options:s})}async _setPosition(e,i){try{const r=this.view,s=await nwe({position:e,view:r},i),{graphic:h}=this,{timestamp:f,coords:m}=e,{accuracy:b,altitude:S,altitudeAccuracy:I,heading:A,latitude:O,longitude:R,speed:L}=m,z={timestamp:f,accuracy:b,altitude:S,altitudeAccuracy:I,heading:typeof A=="number"?A:void 0,latitude:O,longitude:R,speed:L};h&&(h.geometry=s,h.attributes=z);const j=this._getScale(r);await this._animatePoint(s,e,j,i)}catch(r){throw new ne("positioning:invalid-point","Cannot position invalid point",{error:r})}return e}};v([x()],Bo.prototype,"_geolocationUsable",void 0),v([x()],Bo.prototype,"geolocationOptions",void 0),v([x()],Bo.prototype,"goToLocationEnabled",void 0),v([x({type:Mr,nonNullable:!0})],Bo.prototype,"graphic",void 0),v([x()],Bo.prototype,"scale",void 0),v([x()],Bo.prototype,"rotationDisabled",void 0),v([x()],Bo.prototype,"view",void 0),Bo=v([B("esri.widgets.support.GeolocationPositioning")],Bo);const cwe=Bo;function pwe(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const h=Object.getOwnPropertyDescriptor(r,s);h&&Object.defineProperty(t,s,h.get?h:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Lw={};(function(t,e){function i(){function s(c){if(typeof c=="number")return U.Uc.ah(c);if(c==null)return null;if(Os[c]!=null)return U.Uc.ah(Os[c]);throw Error("Unrecognised Unit Type")}function h(c){if(typeof c=="number")return U.Uc.ah(c);if(c==null)return null;if(Dm[c]!=null)return U.Uc.ah(Dm[c]);throw Error("Unrecognised Unit Type")}function f(c){if(c)switch(c){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function m(c,C,w,u){if(w==null||w.B())return null;switch(w.K()){case U.sn.Point:return c.exportPoint(C,w,u);case U.sn.Polygon:return c.exportPolygon(C,w,u);case U.sn.Polyline:return c.exportPolyline(C,w,u);case U.sn.MultiPoint:return c.exportMultipoint(C,w,u);case U.sn.Envelope:return c.exportExtent(C,w,u)}return null}function b(c,C,w,u){if(w.K()!==U.sn.Point)throw Error("Geometry not Point");return c.exportPoint(C,w,u)}function S(c,C,w){return c.convertToGEGeometry(C,w)}function I(c){var C=c.wkid;c=c.wkt;var w=ya.get(C||c);return w==null&&(C!==-1&&C!=null?(w=U.Gg.create(C),ya.set(C,w)):c&&(w=U.Gg.lP(c),ya.set(c,w)),vl.has(C||c)&&w.QW(vl.get(C||c))),w}function A(c){var C;if(c==null)return null;var w=I(c);return c=w.Id(),w=w.Mn(),(C={}).tolerance=w,C.unitType=c==null?-1:c.pd,C.unitID=c==null?-1:c.Fc(),C.unitBaseFactor=c==null?0:c.ci,C.unitSquareDerivative=c==null?0:U.Uc.WF(c).Fc(),C}function O(c,C,w,u){return w==null?null:(w=U.ac.clip(S(c,Se,w),S(c,Se,u),I(C)),m(c,Se,w,C))}function R(c,C,w,u){w=U.ac.fl(S(c,Se,w),S(c,Se,u),I(C)),u=[];for(var a=0;a<w.length;a++)u.push(m(c,Se,w[a],C));return u}function L(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.contains(S(c,Se,w),S(c,Se,u),I(C))}function z(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.wP(S(c,Se,w),S(c,Se,u),I(C))}function j(c,C,w,u,a){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.ub(S(c,Se,w),S(c,Se,u),I(C),s(a))}function H(c,C,w,u){return!(w==null&&u!=null||u==null&&w!=null)&&U.ac.Nb(S(c,Se,w),S(c,Se,u),I(C))}function Y(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OS(S(c,Se,w),S(c,Se,u),I(C))}function X(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.touches(S(c,Se,w),S(c,Se,u),I(C))}function te(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.mY(S(c,Se,w),S(c,Se,u),I(C))}function oe(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OP(S(c,Se,w),S(c,Se,u),I(C))}function le(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.yU(S(c,Se,w),S(c,Se,u),I(C))}function ve(c,C,w,u,a){if(w==null||u==null)throw Error("Illegal Argument Exception");return U.ac.tB(S(c,Se,w),S(c,Se,u),I(C),a)}function xe(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return U.ac.ZS(S(c,Se,w),I(C))}function Fe(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return w=U.ac.$B(S(c,Se,w),I(C)),m(c,Se,w,C)}function Pe(c,C,w,u){if(u===void 0&&(u=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var a=u,n=[];for(u=0;u<w.length;u++)n.push(S(c,Se,w[u]));for(w=U.ac.eP(n,a),a=Array(w.length),u=0;u<w.length;u++)a[u]=m(c,Se,w[u],C);return a}return u=U.ac.dP(S(c,Se,w),I(C)),m(c,Se,u,C)}function He(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(S(c,Se,w[n]));for(w=U.ac.LP(a,S(c,Se,u),I(C)),u=Array(w.length),n=0;n<w.length;n++)u[n]=m(c,Se,w[n],C);return u}return n=U.ac.km(S(c,Se,w),S(c,Se,u),I(C)),m(c,Se,n,C)}function ze(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(S(c,Se,w[n]));for(w=U.ac.RX(a,S(c,Se,u),I(C)),u=Array(w.length),n=0;n<w.length;n++)u[n]=m(c,Se,w[n],C);return u}return n=U.ac.gp(S(c,Se,w),S(c,Se,u),I(C)),m(c,Se,n,C)}function st(c,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(S(c,Se,w[n]));for(w=U.ac.MS(a,S(c,Se,u),I(C)),u=Array(w.length),n=0;n<w.length;n++)u[n]=m(c,Se,w[n],C);return u}return n=U.ac.Fa(S(c,Se,w),S(c,Se,u),I(C)),m(c,Se,n,C)}function Ne(c,C,w,u){if(w==null)return null;var a=[];if(Array.isArray(w)){if(w.length===0)return null;for(u=0;u<w.length;u++)a.push(S(c,Se,w[u]))}else a.push(S(c,Se,w)),u!=null&&a.push(S(c,Se,u));return m(c,Se,U.ac.fY(a,I(C)),C)}function ii(c,C,w,u,a,n,o,l){var p=0;if(n!=null)switch(n){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(w)){if(w==null)c=null;else if(w.length===0)c=[];else{var d=[];for(n=0;n<w.length;n++)d.push(S(c,Se,w[n]));for(w=U.ac.wU(d,I(C),u,p,o,l,s(a)),u=Array(w.length),n=0;n<w.length;n++)u[n]=m(c,Se,w[n],C);c=u}return c}return w=U.ac.offset(S(c,Se,w),I(C),u,p,o,l,s(a)),m(c,Se,w,C)}function Ar(c,C,w,u,a,n){if(n===void 0&&(n=!1),Array.isArray(w)){if(!Array.isArray(u)){for(var o=[],l=0;l<w.length;l++)o.push(u);u=o}if(u.length!=w.length){if(u.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(l=0;l<w.length;l++)u[l]===void 0?o.push(p):(o.push(u[l]),p=u[l]);u=o}return xt(c,C,w,u,a,!1,n,"geodesic",NaN)}return w=U.ac.buffer(S(c,Se,w),I(C),u,s(a),!1,0,NaN),m(c,Se,w,C)}function ai(c,C,w,u,a,n,o,l){if(Array.isArray(w)){if(!Array.isArray(u)){for(var p=[],d=0;d<w.length;d++)p.push(u);u=p}if(u.length!==w.length){if(u.length===0)throw Error("Illegal Argument Exception");p=[];var y=0;for(d=0;d<w.length;d++)u[d]===void 0?p.push(y):(p.push(u[d]),y=u[d]);u=p}return xt(c,C,w,u,a,!0,n,o,l)}return o===void 0&&(o=NaN),w=U.ac.buffer(S(c,Se,w),I(C),u,s(a),!0,f(n),o),m(c,Se,w,C)}function xt(c,C,w,u,a,n,o,l,p){if(p===void 0&&(p=NaN),w==null)return null;if(w.length===0)return[];for(var d=[],y=0;y<w.length;y++)d.push(S(c,Se,w[y]));for(w=U.ac.HN(d,I(C),u,s(a),n,o,f(l),p),u=Array(w.length),y=0;y<w.length;y++)u[y]=m(c,Se,w[y],C);return u}function In(c,C,w,u,a){var n;return a===void 0&&(a=!0),w=U.ac.iz(S(c,Se,w),S(c,Se,u),a),(n={}).coordinate=b(c,Se,w.az(),C),n.distance=w.cz(),n.isRightSide=w.Nz(),n.vertexIndex=w.Va(),n.isEmpty=w.B(),n}function n3(c,C,w,u){var a;return w=U.ac.jz(S(c,Se,w),S(c,Se,u)),(a={}).coordinate=b(c,Se,w.az(),C),a.distance=w.cz(),a.isRightSide=w.Nz(),a.vertexIndex=w.Va(),a.isEmpty=w.B(),a}function Rm(c,C,w,u,a,n){var o;for(w=U.ac.kz(S(c,Se,w),S(c,Se,u),a,n),u=[],a=0;a<w.length;a++)w[a].B()===!1&&u.push(((o={}).coordinate=b(c,Se,w[a].az(),C),o.distance=w[a].cz(),o.isRightSide=w[a].Nz(),o.vertexIndex=w[a].Va(),o.isEmpty=w[a].B(),o));return u}function s3(c,C,w,u,a,n){return w=U.ac.LQ(S(c,Se,w),I(C),u,a,s(n)),m(c,Se,w,C)}function Fm(c,C,w,u,a){return w=U.ac.Sr(S(c,Se,w),I(C),u,s(a)),m(c,Se,w,C)}function o3(c,C,w,u,a,n){return n===void 0&&(n=0),w=U.ac.Ry(S(c,Se,w),I(C),u,s(a),n),m(c,Se,w,C)}function a3(c,C,w,u){if(w==null)throw Error("Illegal Argument Exception");return U.ac.EU(S(c,Se,w),I(C),h(u))}function l3(c,C,w,u){if(w==null)throw Error("Illegal Argument Exception");return U.ac.FU(S(c,Se,w),I(C),s(u))}function Nm(c,C,w,u,a){if(w==null)throw Error("Illegal Argument Exception");return U.ac.RQ(S(c,Se,w),I(C),h(u),f(a))}function u3(c,C,w,u,a){if(w==null)throw Error("Illegal Argument Exception");return U.ac.UQ(S(c,Se,w),I(C),s(u),f(a))}function h3(c){U.IL.bind(c)}function c3(c,C,w,u,a){var n=null,o=null;if(u){if(!a)throw U.i.O("AOI missing Spatial Reference");n=S(c,Se,u),o=I(a).hh()}return(c=U.iu.SR(I(C).hh(),I(w).hh(),n,o))!==null?c:null}function p3(c,C,w,u,a){var n=null,o=null;if(u){if(!a)throw U.i.O("AOI missing Spatial Reference");n=S(c,Se,u),o=I(a).hh()}return U.iu.TR(I(C).hh(),I(w).hh(),n,o)}function d3(c,C,w,u,a,n){if(a===void 0&&(a=null),n===void 0&&(n=null),n){var o=new U.tC;o.Xu=n.densificationStep,o.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&o.KW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&o.LW(n.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(C.length===0)return[];if(a){if(!(n=a.getCachedGeTransformation(w,u)))e:{if(n=a,a=null,n){var l=n.getGTListEntry();if(l!==null){a=new U.rC(null);for(var p=0,d=l.steps;p<d.length;p++){l=d[p];var y=new U.Cx(l.geogtran);l.isInverse&&y.Lz(),a.add(y)}o=U.xr.Pr(I(w).hh(),I(u).hh(),a,o),n.assignCachedGe(w,u,o),n=o;break e}}if(a===null&&n&&n.steps&&0<n.steps.length){for(a=new U.rC(null),p=0,d=n.steps;p<d.length;p++)(l=d[p]).wkid!=-1&&l.wkid!=null?a.add(U.Cx.create(l.wkid,l.isInverse)):a.add(U.Cx.pP(l.wkt,l.isInverse));o=U.xr.Pr(I(w).hh(),I(u).hh(),a,o),n.assignCachedGe(w,u,o),n=o}else n=U.xr.Pr(I(w).hh(),I(u).hh(),a,o)}for(w=[],a=0;a<C.length;a++)o=C[a],w.push(Lm(c,o,u,n))}else for(n=U.xr.Pr(I(w).hh(),I(u).hh(),null),w=[],a=0;a<C.length;a++)o=C[a],w.push(Lm(c,o,u,n));return w}function Lm(c,C,w,u){return C=U.ac.Bh(S(c,Se,C),u),m(c,Se,C,w)}function f3(c,C){c!=null&&(c=c.wkid||c.wkt,vl.has(c),vl.set(c,C),ya.has(c)&&ya.delete(c))}function y3(c){c!=null&&(c=c.wkid||c.wkt,vl.has(c)&&(vl.delete(c),ya.has(c)&&ya.delete(c)))}function m3(c,C,w,u){if(w==null||u==null)return[];var a=[],n=0;for(w=U.ac.LS(S(c,Se,w),S(c,Se,u),I(C))||[];n<w.length;n++)a.push(m(c,Se,w[n],C));return a}var Ni,U,Cr,jm,St=this&&this.__extends||function(){function c(C,w){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var n in a)a.hasOwnProperty(n)&&(u[n]=a[n])})(C,w)}return function(C,w){function u(){this.constructor=C}c(C,w),C.prototype=w===null?Object.create(w):(u.prototype=w.prototype,new u)}}();(function(c){var C;(C=c.sn||(c.sn={}))[C.Unknown=0]="Unknown",C[C.Point=33]="Point",C[C.Line=322]="Line",C[C.Envelope=197]="Envelope",C[C.MultiPoint=550]="MultiPoint",C[C.Polyline=1607]="Polyline",C[C.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(c.TK||(c.TK={}));var w=function(){function u(){this.description=null,this.QA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.Pf=function(a){this.wc(),a!=this.description&&this.un(a)},u.prototype.un=function(){},u.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=c.fe.xR(this.description,a))!=this.description&&this.un(a)},u.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},u.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=c.fe.wR(this.description,a),this.un(a))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.So=function(){},u.prototype.yc=function(a){this.A(a)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.dG=function(){return this.hasAttribute(1)},u.uf=function(a){return 1+((192&a)>>6)>>1},u.Tn=function(a){return(32&a)!=0},u.PS=function(a){return(128&a)!=0},u.zd=function(a){return(256&a)!=0},u.zj=function(a){return(512&a)!=0},u.Ic=function(a){return(1024&a)!=0},u.prototype.Qf=function(){var a=this.Ja();return this.copyTo(a),a},u.prototype.ng=function(){return null},u.kg=function(a){var n=a.Ja();return a.copyTo(n),n},u.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},u.zx=function(a){var n=a.K();if(u.zj(n))return a.I();if(a.B())return 0;if(n==197)return 4;if(n==33)return 1;if(u.zd(n))return 2;throw c.i.ga("missing type")},u}();c.ba=w})(U||(U={})),Cr=U||(U={}),jm=function(){function c(){this.y=this.x=0}return c.construct=function(C,w){var u=new c;return u.x=C,u.y=w,u},c.cl=function(C){var w=new c;return w.x=C.x,w.y=C.y,w},c.prototype.na=function(C,w){this.x=C,this.y=w},c.prototype.N=function(C){this.x=C.x,this.y=C.y},c.prototype.hq=function(C,w){return this.x===C&&this.y===w},c.prototype.Mz=function(C){return 2220446049250313e-31>=Math.abs(this.x-C.x)&&2220446049250313e-31>=Math.abs(this.y-C.y)},c.prototype.rb=function(C){return this.x===C.x&&this.y===C.y},c.prototype.Nb=function(C){return C==this||C instanceof c&&this.x==C.x&&this.y==C.y},c.prototype.sub=function(C){this.x-=C.x,this.y-=C.y},c.prototype.vc=function(C,w){this.x=C.x-w.x,this.y=C.y-w.y},c.prototype.add=function(C,w){w!==void 0?(this.x=C.x+w.x,this.y=C.y+w.y):(this.x+=C.x,this.y+=C.y)},c.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},c.prototype.nt=function(C){this.x=-C.x,this.y=-C.y},c.prototype.IS=function(C,w,u){this.x=C.x*(1-u)+w.x*u,this.y=C.y*(1-u)+w.y*u},c.prototype.Dt=function(C,w){this.x=this.x*C+w.x,this.y=this.y*C+w.y},c.prototype.BW=function(C,w,u){this.x=w.x*C+u.x,this.y=w.y*C+u.y},c.prototype.scale=function(C){this.x*=C,this.y*=C},c.prototype.compare=function(C){return this.y<C.y?-1:this.y>C.y?1:this.x<C.x?-1:this.x>C.x?1:0},c.prototype.normalize=function(){var C=this.length();C==0&&(this.x=1,this.y=0),this.x/=C,this.y/=C},c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.Uk=function(){return this.x*this.x+this.y*this.y},c.ub=function(C,w){return Math.sqrt(this.zc(C,w))},c.Jy=function(C,w,u,a){return C-=u,w-=a,Math.sqrt(C*C+w*w)},c.prototype.Sh=function(C){return this.x*C.x+this.y*C.y},c.prototype.aD=function(C){return Math.abs(this.x*C.x)+Math.abs(this.y*C.y)},c.prototype.yi=function(C){return this.x*C.y-this.y*C.x},c.prototype.Ct=function(C,w){var u=-this.x*w+this.y*C;this.x=this.x*C+this.y*w,this.y=u},c.prototype.Jv=function(){var C=this.x;this.x=-this.y,this.y=C},c.prototype.HG=function(C){this.x=-C.y,this.y=C.x},c.prototype.cr=function(){var C=this.x;this.x=this.y,this.y=-C},c.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},c.pu=function(C,w){var u=C.su(),a=w.su();return a==u?0>(C=C.yi(w))?1:0<C?-1:0:u<a?-1:1},c.zc=function(C,w){var u=C.x-w.x;return u*u+(C=C.y-w.y)*C},c.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},c.prototype.Sc=function(){this.y=this.x=NaN},c.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},c.prototype.offset=function(C,w){var u=c.ub(C,w),a=c.construct(this.x,this.y);if(u==0)return c.ub(a,C);var n=new c;return n.N(w),n.sub(C),a.sub(C),a.yi(n)/u},c.Wq=function(C,w,u){var a=new Cr.Xb;a.set(w.x),a.sub(C.x);var n=new Cr.Xb;n.set(u.y),n.sub(C.y);var o=new Cr.Xb;o.set(w.y),o.sub(C.y);var l=new Cr.Xb;return l.set(u.x),l.sub(C.x),a.Bg(n),o.Bg(l),a.sub(o),a.rs()?(a=new Cr.jp(w.x),n=new Cr.jp(C.x),o=new Cr.jp(C.y),a=a.kt(n),C=(C=new Cr.jp(u.y)).kt(o),w=(w=new Cr.jp(w.y)).kt(o),u=(u=new Cr.jp(u.x)).kt(n),a=a.nr(C),w=w.nr(u),(a=a.nr(w)).iT()?-1:a.aS()?1:0):0>(u=a.value())?-1:0<u?1:0},c.prototype.dc=function(){return Cr.P.wj(Cr.P.wj())},c}(),Cr.h=jm,function(c){var C=function(){function w(u){this.Ay=this.Ot=0,this.KX=u}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(u){u-=this.Ay;var a=this.Ot+u;this.Ay=a-this.Ot-u,this.Ot=a},w.prototype.sub=function(u){this.add(-u)},w.prototype.tm=function(){return this.KX+this.Ot},w}();c.Ex=C,c.mc=function(){function w(){}return w.En=function(u,a){return 0<=a?Math.abs(u):-Math.abs(u)},w.sign=function(u){return 0>u?-1:0<u?1:0},w.MK=function(u){return u-360*Math.floor(u/360)},w.round=function(u){return Math.floor(u+.5)},w.ox=function(u){return u*u},w.jq=function(u,a,n){return .5>=n?u+(a-u)*n:a-(a-u)*(1-n)},w.JG=function(u,a,n,o){.5>=n?(o.x=u.x+(a.x-u.x)*n,o.y=u.y+(a.y-u.y)*n):(o.x=a.x-(a.x-u.x)*(1-n),o.y=a.y-(a.y-u.y)*(1-n))},w.gT=function(u,a,n,o,l,p){.5>=l?(p.x=u+(n-u)*l,p.y=a+(o-a)*l):(p.x=n-(n-u)*(1-l),p.y=o-(o-a)*(1-l))},w}()}(U||(U={})),function(c){var C=function(w){function u(){var a=w.call(this)||this;return a.ta=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return St(u,w),u.prototype.bc=function(){return c.h.construct(this.ta,this.oa)},u.prototype.$p=function(a){a.x=this.ta,a.y=this.oa},u.prototype.Ec=function(a){this.gm(0,a)},u.prototype.UB=function(a,n){this.gm(0,c.h.construct(a,n))},u.prototype.Vo=function(a){this.cD(0,a)},u.prototype.setStart=function(a){this.pD(0,a)},u.prototype.yv=function(a,n){return this.Pd(0,a,n)},u.prototype.TB=function(a,n,o){this.vn(0,a,n,o)},u.prototype.xc=function(){return c.h.construct(this.qa,this.ma)},u.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},u.prototype.Rc=function(a){this.gm(1,a)},u.prototype.Sl=function(a,n){this.gm(1,c.h.construct(a,n))},u.prototype.Ro=function(a){this.cD(1,a)},u.prototype.setEnd=function(a){this.pD(1,a)},u.prototype.jv=function(a,n){return this.Pd(1,a,n)},u.prototype.JB=function(a,n,o){this.vn(1,a,n,o)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(a,n,o,l,p){return this.FM(a,n,o,l,p)},u.prototype.isIntersecting=function(a,n){return this.Br(a,n,!1)!=0},u.prototype.ss=function(a,n){return this.tu(a,n,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=c.P.mg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var n=this.la.slice(0),o=this.la.length;o<2*a;o++)n[o]=0;this.la=n}},u.bM=function(a,n,o){if(0<o)var l=0;for(var p=0;p<o;p++)n[0+l]=a[0],l++},u.prototype.gm=function(a,n){a!=0?(this.qa=n.x,this.ma=n.y):(this.ta=n.x,this.oa=n.y)},u.prototype.un=function(a){if(this.la!=null){for(var n=c.fe.Kw(a,this.description),o=[],l=u.Ig(this.description,0),p=u.Ig(this.description,1),d=u.Ig(a,0),y=u.Ig(a,1),g=0,_=1,M=a.Ba;_<M;_++){var $=a.ld(_),E=c.sa.Wa($);if(n[_]==-1){var k=c.sa.te($);for($=0;$<E;$++)o[d+g]=k,o[y+g]=k,g++}else for(k=this.description.bk(n[_])-2,$=0;$<E;$++)o[d+g]=this.la[l+k],o[y+g]=this.la[p+k],g++,k++}this.la=o}this.description=a},u.prototype.cD=function(a,n){if(this.Bc())throw c.i.ga("empty geometry");n.Pf(this.description),n.Bc()&&n.wn();for(var o=0;o<this.description.Ba;o++)for(var l=this.description.Fd(o),p=0,d=c.sa.Wa(l);p<d;p++){var y=this.Pd(a,l,p);n.setAttribute(l,p,y)}},u.prototype.pD=function(a,n){if(this.wc(),n.Bc())throw c.i.ga("empty geometry");for(var o=n.description,l=0,p=o.Ba;l<p;l++)for(var d=o.Fd(l),y=c.sa.Wa(d),g=0;g<y;g++){var _=n.Vc(d,g);this.vn(a,d,g,_)}},u.prototype.Pd=function(a,n,o){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.ta;if(o>=c.sa.Wa(n))throw c.i.de();var l=this.description.Rf(n);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,a)+this.description.bk(l)-2+o]):c.sa.te(n)},u.prototype.vn=function(a,n,o,l){if(this.wc(),o>=c.sa.Wa(n))throw c.i.de();var p=this.description.Rf(n);0>p&&(this.se(n),p=this.description.Rf(n)),n==0?a!=0?o!=0?this.ma=l:this.qa=l:o!=0?this.oa=l:this.ta=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,a)+this.description.bk(p)-2+o]=l)},u.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();a.description=this.description,a.$x(this.description.Be.length-2),u.bM(this.la,a.la,2*(this.description.Be.length-2)),a.ta=this.ta,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.qp(a)},u.prototype.Vg=function(a,n){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,n),o.wa=o.pa,o.Nk(this.Pd(1,a,n)),o)},u.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))},u.prototype.Vw=function(a,n){n.Pf(this.description),n.Db(this.ic(a));for(var o=1,l=this.description.Ba;o<l;o++)for(var p=this.description.Fd(o),d=c.sa.Wa(p),y=0;y<d;y++){var g=this.Vc(a,p,y);n.setAttribute(p,y,g)}},u.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var n=this.description.Ba;a<n;a++)for(var o=this.description.ld(a),l=0,p=c.sa.Wa(o);l<p;l++){var d=this.Pd(0,o,l),y=this.Pd(1,o,l);this.vn(0,o,l,y),this.vn(1,o,l,d)}},u.prototype.Br=function(a,n,o){var l=a.K();if(this.K()===322){if(l==322)return c.zb.JM(this,a,n,o);throw c.i.Ra()}throw c.i.Ra()},u.prototype.FM=function(a,n,o,l,p){var d=a.K();if(this.K()===322){if(d==322)return c.zb.Yx(this,a,n,o,l,p);throw c.i.Ra()}throw c.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(a,n){return n*(a.Be.length-2)},u.prototype.ic=function(a,n){if(n===void 0)return n=new c.h,this.ic(a,n),n;c.mc.gT(this.ta,this.oa,this.qa,this.ma,a,n)},u.prototype.ge=function(){return null},u.prototype.$F=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Rn=function(){return null},u.prototype.lg=function(){return null},u.prototype.Tx=function(a,n){return n!==void 0?this.ux(n)-this.ux(a):this.ux(a)},u.prototype.qp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.IG=function(){return null},u.prototype.ub=function(a,n){if(!n&&this.Br(a,0,!1)!=0)return 0;n=17976931348623157e292;var o=this.bc(),l=a.ge(o,!1);return o.sub(a.ic(l)),(o=o.length())<n&&(n=o),o=this.xc(),l=a.ge(o,!1),o.sub(a.ic(l)),(o=o.length())<n&&(n=o),o=a.bc(),l=this.ge(o,!1),o.sub(this.ic(l)),(o=o.length())<n&&(n=o),o=a.xc(),l=this.ge(o,!1),o.sub(this.ic(l)),(o=o.length())<n&&(n=o),n},u.prototype.ng=function(){return c.si.im(this,null)},u}(c.ba);c.NC=C}(U||(U={})),new U.h,function(c){var C;(C=c.VK||(c.VK={}))[C.Unknown=-1]="Unknown",C[C.Not=0]="Not",C[C.Weak=1]="Weak",C[C.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(c.HK||(c.HK={}));var w=function(u){function a(){var n=u.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return St(a,u),a.prototype.qp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.ck=function(n){return(this.Jm&n)!=0},a.prototype.Nf=function(n,o){this.Jm=o?this.Jm|n:this.Jm&~n},a.prototype.oc=function(){this.ck(32)&&this.XM()},a.prototype.vx=function(){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(n,o){if(0>n||n>=this.xa)throw c.i.ga("index out of bounds");this.oc(),o.Pf(this.description),o.B()&&o.wn();for(var l=0;l<this.description.Ba;l++)for(var p=this.description.Fd(l),d=0,y=c.sa.Wa(p);d<y;d++){var g=this.Aa[l].gg(y*n+d);o.setAttribute(p,d,g)}},a.prototype.It=function(n,o){this.oc();for(var l=o.description,p=0;p<l.Ba;p++)for(var d=l.Fd(p),y=c.sa.Wa(d),g=0;g<y;g++){var _=o.Vc(d,g);this.setAttribute(d,n,g,_)}},a.prototype.D=function(n,o){if(0>n||n>=this.I())throw c.i.de();this.oc(),this.Aa[0].uc(2*n,o)},a.prototype.Oa=function(n){var o=new c.h;return this.D(n,o),o},a.prototype.Hc=function(n,o){this.Aa[0].uc(2*n,o)},a.prototype.Db=function(n,o,l){if(0>n||n>=this.xa)throw c.i.de();this.oc();var p=this.Aa[0];l!==void 0?(p.write(2*n,o),p.write(2*n+1,l)):p.Vt(2*n,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw c.i.de();this.oc();var n=this.Aa[0],o=new c.Od;return o.x=n.read(NaN),o.y=n.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):c.sa.te(1),o},a.prototype.ZB=function(n){if(0>n||n>=this.I())throw c.i.de();this.se(1),this.oc(),this.Qc(1993);var o=this.Aa[0];o.write(2*n,(void 0).x),o.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},a.prototype.Vc=function(n,o,l){if(0>o||o>=this.xa)throw c.i.de();var p=c.sa.Wa(n);if(l>=p)throw c.i.de();this.oc();var d=this.description.Rf(n);return 0<=d?this.Aa[d].gg(o*p+l):c.sa.te(n)},a.prototype.tF=function(n,o){return this.Vc(n,o,void 0)},a.prototype.setAttribute=function(n,o,l,p){if(0>o||o>=this.xa)throw c.i.de();var d=c.sa.Wa(n);if(l>=d)throw c.i.de();this.se(n),this.oc(),n=this.description.Rf(n),this.Qc(1993),this.Aa[n].rr(o*d+l,p)},a.prototype.vb=function(n){return this.vx(),this.se(n),this.oc(),this.Aa[this.description.Rf(n)]},a.prototype.kn=function(n,o){if(o!=null&&c.sa.Vp(n)!=o.Vp())throw c.i.O();this.se(n),n=this.description.Rf(n),this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Aa[n]=o,this.Qc(16777215)},a.prototype.un=function(n){var o=null;if(this.Aa!=null){var l=c.fe.Kw(n,this.description);o=[];for(var p=0,d=n.Ba;p<d;p++)l[p]!=-1&&(o[p]=this.Aa[l[p]])}this.description=n,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.vD=function(n){this.yu(!0),n instanceof c.l?this.aa.A(n):this.aa.So(n)},a.prototype.WM=function(n){this.yu(!1),n instanceof c.l?this.aa.A(n):this.aa.So(n)},a.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},a.prototype.A=function(n){this.vD(n)},a.prototype.So=function(n){this.vD(n)},a.prototype.yc=function(n){this.WM(n)},a.prototype.Vg=function(n,o){var l=new c.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(n,o))},a.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var o=this.I(),l=0,p=this.description.Ba;l<p;l++)n=this.Aa[l].Cn(n,0,o*c.sa.Wa(this.description.Fd(l)));return n},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=n.I())return!1;for(var l=0;l<this.description.Ba;l++){var p=this.description.ld(l),d=this.vb(p),y=n.vb(p);if(!d.Nb(y,0,o*c.sa.Wa(p)))return!1}return!0},a.prototype.copyTo=function(n){if(n.K()!=this.K())throw c.i.O();this.ZC(n)},a.prototype.ZC=function(n){this.oc(),n.description=this.description,n.Aa=null;var o=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(l[p]=this.Aa[p].BB(this.I()*c.sa.Wa(this.description.Fd(p))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=l;try{this.qp(n)}catch{throw n.Pa(),c.i.hu()}},a.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.gM(),this.wc()},a.prototype.yu=function(n){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new c.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var o=1;o<this.description.Ba;o++)for(var l=this.description.Fd(o),p=c.sa.Wa(l),d=this.Aa[o],y=0;y<p;y++){var g=new c.Oc;g.Pa();for(var _=0;_<this.xa;_++){var M=d.gg(_*p+y);g.$b(M)}this.aa.setInterval(l,y,g)}n&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],o=new c.h,l=0;l<this.xa;l++)n.uc(2*l,o),this.aa.$b(o)},a.prototype.Ap=function(n){n.Pa();for(var o=this.Aa[0],l=new c.h,p=0;p<this.xa;p++)o.uc(2*p,l),n.$b(l)},a.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var o=this.description.Fd(n);if(this.Aa[n]!=null){var l=c.sa.Wa(o),p=c.P.truncate(this.Aa[n].size/l);p<this.xa&&(p=c.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(p*l,c.sa.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[n]=c.Zc.TE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(n){if(0>n)throw c.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},a.prototype.qm=function(n){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=n)return this.ck(8)?1:2}return-1},a.prototype.Eh=function(n,o){if(this.LT=o,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw c.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.fD=function(n,o,l,p){if(0>n||n>=this.xa||0>o||o>=this.xa)throw c.i.ga("index out of bounds");this.oc(),p.Pf(this.description),p.B()&&p.wn();for(var d=0;d<this.description.Ba;d++)for(var y=this.description.Fd(d),g=0,_=c.sa.Wa(y);g<_;g++){var M=this.Aa[d].gg(_*n+g),$=this.Aa[d].gg(_*o+g);p.setAttribute(y,g,c.mc.jq(M,$,l))}},a.prototype.Ar=function(n,o){var l=this.Aa[0].o,p=l[2*n]-l[2*o];return n=l[2*n+1]-l[2*o+1],Math.sqrt(p*p+n*n)},a.prototype.FR=function(n){if(0>n||n>=this.xa)throw c.i.de();this.oc();var o=new c.Ta;o.Pf(this.description),o.B()&&o.wn();for(var l=0;l<this.description.Ba;l++)for(var p=this.description.ld(l),d=0,y=c.sa.Wa(p);d<y;d++){var g=this.Aa[l].gg(y*n+d);o.setAttribute(p,d,g)}return o},a.prototype.Fh=function(n,o){if(0>n||n>=this.xa)throw c.i.de();if(o.B())throw c.i.O();this.oc();for(var l=o.description,p=0;p<l.Ba;p++)for(var d=l.ld(p),y=c.sa.Wa(d),g=0;g<y;g++){var _=o.Vc(d,g);this.setAttribute(d,n,g,_)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(c.ba);c.Fx=w}(U||(U={})),function(c){var C=function(){function w(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new c.ad(7),this.ao=null}return w.prototype.Xo=function(u){this.ao=u},w.prototype.MP=function(){this.Tv=!1},w.prototype.Ee=function(u){this.ob.Ee(u)},w.prototype.Rr=function(u){var a=this.ob.De();return this.nX(a),this.qX(u,a),a},w.prototype.HP=function(u){this.ob.kd(u)},w.prototype.addElement=function(u,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.AD(u,0,a)},w.prototype.ED=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(u,1,this.Ne)},w.prototype.zn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,n=this.ob.o;if(a==-1||n[7*a]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*a]=u,this.xp(-1,u,a,n),u;var o=a==-1?-1:n[7*a+2];return u=this.ob.Nl([-1,-1,o,u,this.il(),-1,-1]),(n=this.ob.o)[7*o+1]=u,this.ky(u,n),n[7*u+2]===-1&&(n[7*a]=u),this.xp(-1,u,a,n),u},w.prototype.Bu=function(u,a,n,o){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var p=this.ob.o;if(l==-1||p[7*l]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(p=this.ob.o)[7*l]=n,this.xp(-1,n,l,p),n;if(o){o=a!=-1?this.ao.compare(this,n,a):-1;var d=u!=-1?this.ao.compare(this,n,u):1}else o=-1,d=1;if(o==0||d==0)return p[7*l+3]=o==0?a:u,-1;for((a!=-1&&u!=-1?this.Vm>c.P.XA(this.Vm)>>1:a!=-1)?u=a:o=d,a=!0;;){if(0>o){if((d=p[7*u])==-1){o=u,n=this.ob.Nl([-1,-1,u,n,this.il(),-1,-1]),(p=this.ob.o)[7*u]=n;break}u=d}else{if((d=p[7*u+1])==-1){o=p[7*u+6],n=this.ob.Nl([-1,-1,u,n,this.il(),-1,-1]),(p=this.ob.o)[7*u+1]=n;break}u=d}a&&(o*=-1,a=!1)}return this.ky(n,p),p[7*n+2]===-1&&(p[7*l]=n),this.xp(o,n,l,p),n},w.prototype.AF=function(){return this.dR(this.Ne)},w.prototype.wd=function(u,a){a=a==-1?this.Ne:a,this.Tv?this.GP(u,a):this.eY(u,a)},w.prototype.search=function(u,a){for(a=this.uv(a);a!=-1;){var n=this.ao.compare(this,u,a);if(n==0)return a;a=0>n?this.nl(a):this.Zp(a)}return-1},w.prototype.DW=function(u){for(var a=this.uv(-1),n=-1;a!=-1;){var o=u.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(n=a,a=this.Zp(a))}return n},w.prototype.pJ=function(u){for(var a=this.uv(-1),n=-1;a!=-1;){var o=u.compare(this,a);if(o==0)return a;0>o?(n=a,a=this.nl(a)):a=this.Zp(a)}return n},w.prototype.ka=function(u){return this.ob.U(u,3)},w.prototype.nl=function(u){return this.ob.U(u,0)},w.prototype.Zp=function(u){return this.ob.U(u,1)},w.prototype.getParent=function(u){return this.ob.U(u,2)},w.prototype.lb=function(u){return this.ob.U(u,6)},w.prototype.xe=function(u){return this.ob.U(u,5)},w.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},w.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},w.prototype.UR=function(u){return u==-1?this.XF(this.Ne):this.XF(u)},w.prototype.Uj=function(u,a){this.IB(u,a)},w.prototype.uv=function(u){return u==-1?this.TF(this.Ne):this.TF(u)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(u){return u==-1?this.VF(this.Ne):this.VF(u)},w.prototype.FN=function(u,a){for(var n=a[7*u],o=a[7*u+1],l=a[7*u+4];n!=-1||o!=-1;){var p=n!=-1?a[7*n+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,l<=Math.min(p,o))break;p<=o?this.nJ(n,a):this.mJ(u,a),n=a[7*u],o=a[7*u+1]}},w.prototype.ky=function(u,a){if(this.Tv)for(var n=a[7*u+4],o=a[7*u+2];o!=-1&&a[7*o+4]>n;)a[7*o]==u?this.nJ(u,a):this.mJ(o,a),o=a[7*u+2]},w.prototype.mJ=function(u,a){var n=a[7*u+1];a[7*n+2]=a[7*u+2],a[7*u+2]=n;var o=a[7*n];a[7*u+1]=o,o!=-1&&(a[7*o+2]=u),a[7*n]=u,(o=a[7*n+2])!=-1&&(a[7*o]==u?a[7*o]=n:a[7*o+1]=n)},w.prototype.nJ=function(u,a){var n=a[7*u+2];a[7*u+2]=a[7*n+2],a[7*n+2]=u;var o=a[7*u+1];a[7*n]=o,o!=-1&&(a[7*o+2]=n),a[7*u+1]=n,(o=a[7*u+2])!=-1&&(a[7*o]===n?a[7*o]=u:a[7*o+1]=u)},w.prototype.Rk=function(u,a){this.ob.T(u,2,a)},w.prototype.OB=function(u,a){this.ob.T(u,0,a)},w.prototype.SB=function(u,a){this.ob.T(u,1,a)},w.prototype.RB=function(u,a){this.ob.T(u,5,a)},w.prototype.fx=function(u,a){this.ob.T(u,6,a)},w.prototype.SJ=function(u,a){this.ob.T(a,0,u)},w.prototype.nX=function(u){this.ob.T(u,4,0)},w.prototype.qX=function(u,a){this.ob.T(a,5,u)},w.prototype.TF=function(u){return u==-1?-1:this.ob.U(u,0)},w.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},w.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},w.prototype.dR=function(u){return u==-1?-1:this.ob.U(u,3)},w.prototype.VF=function(u){return u==-1?0:this.ob.U(u,4)},w.prototype.XF=function(u){return this.ob.U(u,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},w.prototype.il=function(){return this.Vm=c.P.XA(this.Vm),1073741823&this.Vm},w.prototype.AD=function(u,a,n){var o=this.ob.o;if(n==-1||o[7*n]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(o=this.ob.o)[7*n]=u,this.xp(-1,u,n,o),u;for(var l=n==-1?-1:o[7*n];;){var p=a==-1?1:this.ao.compare(this,u,l);if(0>p){if((p=this.nl(l))==-1){a=l,u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(o=this.ob.o)[7*l]=u;break}l=p}else{if(a==1&&p==0)return o[7*n+3]=l,-1;if((p=o[7*l+1])==-1){a=o[7*l+6],u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(o=this.ob.o)[7*l+1]=u;break}l=p}}return this.ky(u,o),o[7*u+2]===-1&&(o[7*n]=u),this.xp(a,u,n,o),u},w.prototype.xp=function(u,a,n,o){if(u!=-1){var l=o[7*u+5];o[7*u+5]=a}else l=n==-1?-1:o[7*n+2];o[7*a+5]=l,l!=-1&&(o[7*l+6]=a),o[7*a+6]=u,u==(n==-1?-1:o[7*n+1])&&(o[7*n+1]=a),u==-1&&(o[7*n+2]=a),o[7*n+4]=(n==-1?0:o[7*n+4])+1},w.prototype.vB=function(u,a){var n=this.ob.o,o=n[7*u+5];u=n[7*u+6],o!=-1?n[7*o+6]=u:n[7*a+1]=u,u!=-1?n[7*u+5]=o:n[7*a+2]=o,n[7*a+4]=a===-1?-1:n[7*a+4]-1},w.prototype.eY=function(u,a){this.vB(u,a);var n=this.nl(u),o=this.Zp(u),l=this.getParent(u),p=u;if(n!=-1&&o!=-1){this.Vm=c.P.XA(this.Vm);var d=1073741823<this.Vm?this.lb(u):this.xe(u),y=this.getParent(d)==u;this.ob.bC(u,d,0),this.ob.bC(u,d,1),this.ob.bC(u,d,2),l!=-1?this.nl(l)==u?this.OB(l,d):this.SB(l,d):this.SJ(d,a),y?(n==d?(this.OB(d,u),this.Rk(o,d)):o==d&&(this.SB(d,u),this.Rk(n,d)),this.Rk(u,d),l=d):(this.Rk(n,d),this.Rk(o,d),l=this.getParent(u),p=d),n=this.nl(u),o=this.Zp(u),n!=-1&&this.Rk(n,u),o!=-1&&this.Rk(o,u)}n=n!=-1?n:o,l==-1?this.SJ(n,a):this.nl(l)==p?this.OB(l,n):this.SB(l,n),n!=-1&&this.Rk(n,l),this.hl(u)},w.prototype.GP=function(u,a){var n=this.ob.o;n[7*u+4]=2147483647;var o=-1,l=-1,p=a===-1?-1:n[7*a],d=p==u;if(d&&(o=n[7*p],l=n[7*p+1],o==-1&&l==-1))return this.vB(p,a),this.hl(p),void(n[7*a]=-1);this.FN(u,n),(p=n[7*u+2])!=-1&&(n[7*p]==u?n[7*p]=-1:n[7*p+1]=-1),this.vB(u,a),this.hl(u),d&&(n[7*a]=o==-1||n[7*o+2]!=-1?l:o)},w.prototype.IB=function(u,a){this.ob.T(u,3,a)},w}();c.$j=C}(U||(U={})),function(c){var C=function(){function w(u,a){u!==void 0&&this.L(u,a)}return w.prototype.L=function(u,a){this.pa=u,this.wa=a,this.normalize()},w.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},w.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Nk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Nk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},w.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},w.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.FB=function(u,a){u>a?(this.pa=a,this.wa=u):(this.pa=u,this.wa=a)},w.prototype.Kt=function(u){return c.P.Tk(u,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},w.prototype.dc=function(){return c.P.wj(c.P.wj())},w}();c.Oc=C}(U||(U={})),function(c){var C=new c.Oc,w=new c.Oc,u=function(){this.oe=null,this.pb=-1,this.tb=new c.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new c.Oc,this.Wf.FB(0,0)};c.EY=u;var a=function(){function n(o,l,p){this.g=o,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=l,this.Pq=10*l,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=p,this.OA=new u,this.TH=new u,c.P.truncate(3*o.gd/2)}return n.prototype.hG=function(o,l,p,d){o.oe=d===null?null:d[p[5*l]],o.Vv=o.oe!=null,o.Vv||((d=p[5*l+2])!==-1&&this.g.hW(p[5*l],p[5*d],o.tb),o.oe=o.tb,o.Wf.FB(o.tb.ta,o.tb.qa),o.Wf.wa+=this.ra,o.tb.mI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.lA=(o.tb.qa-o.tb.ta)/(o.tb.ma-o.tb.oa)))},n.prototype.JO=function(o,l){var p=o.Br(l,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(Cs),o.Vr(xo),l.$p(ks),l.Vr(So),bi.na(this.Mq,this.Jk),Cs.rb(ks)&&this.Jk==Cs.y?0>xo.compare(So)?bi.N(xo):bi.N(So):Cs.rb(So)&&this.Jk==Cs.y?0>xo.compare(ks)?bi.N(xo):bi.N(ks):ks.rb(xo)&&this.Jk==ks.y?0>Cs.compare(So)?bi.N(Cs):bi.N(So):xo.rb(So)&&this.Jk==xo.y&&(0>Cs.compare(ks)?bi.N(Cs):bi.N(ks)),o.Me(bi.y,bi.x)<l.Me(bi.y,bi.x)?-1:1)},n.prototype.HO=function(o,l){if(o.tb.oa==l.tb.oa&&o.tb.ta==l.tb.ta)return o.tb.ma==l.tb.ma&&o.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.KE(o,l);if(o.tb.ma==l.tb.ma&&o.tb.qa==l.tb.qa)return this.JE(o,l);var p=this.JE(o,l);return o=this.KE(o,l),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},n.prototype.DO=function(o,l){if(o.qa>l.qa){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&o.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(o.qa-o.ta)<this.Pq&&l.xi(o.qa,o.ma,this.ra))return this.zi();return 1},n.prototype.EO=function(o,l){if(o.ta<l.ta){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&o.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(o.ta-o.qa)<this.Pq&&l.xi(o.ta,o.oa,this.ra))return this.zi();return-1},n.prototype.FO=function(o,l){var p=new c.h;p.vc(l.xc(),l.bc()),p.cr(),p.normalize();var d=new c.h;d.vc(o.bc(),l.bc());var y=new c.h;y.vc(o.xc(),l.bc()),d=d.Sh(p),p=y.Sh(p),y=Math.abs(d);var g=Math.abs(p);if(y<g){if(y<this.Pq&&l.xi(o.ta,o.oa,this.ra))return this.zi()}else if(g<this.Pq&&l.xi(o.qa,o.ma,this.ra))return this.zi();return 0>d&&0>p?-1:0<d&&0<p?1:this.zi()},n.prototype.IE=function(o,l){return o.oa==l.oa&&o.ta==l.ta?this.DO(o,l):o.ma==l.ma&&o.qa==l.qa?this.EO(o,l):this.FO(o,l)},n.prototype.GO=function(o,l){return o.ma==l.ma&&o.qa==l.qa&&o.oa==l.oa&&o.ta==l.ta?this.bA?this.Ly():0:this.zi()},n.prototype.JE=function(o,l){var p=1;if(o.tb.oa<l.tb.oa){p=-1;var d=o;o=l,l=d}o=o.tb,d=l.tb;var y=o.ta-d.ta;l=l.lA*(o.oa-d.oa);var g=this.Pq;return y<l-g?-p:y>l+g?p:d.xi(o.ta,o.oa,this.ra)?this.zi():y<l?-p:p},n.prototype.KE=function(o,l){var p=1;if(l.tb.ma<o.tb.ma){p=-1;var d=o;o=l,l=d}o=o.tb,d=l.tb;var y=o.qa-d.ta;l=l.lA*(o.ma-d.oa);var g=this.Pq;return y<l-g?-p:y>l+g?p:d.xi(o.qa,o.ma,this.ra)?this.zi():y<l?-p:p},n.prototype.Ly=function(){return this.sg=!0,this.Pi=new c.Nd(5,this.No,this.ht),-1},n.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new c.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},n.prototype.IO=function(o,l,p,d){if(this.sg)return-1;var y=this.JH==this.Jk&&this.IH==this.Mq;if(y&&o==this.Ys)var g=this.KH;else g=NaN,this.Ys=-1;return y&&l==this.Zs?y=this.LH:(y=NaN,this.Zs=-1),p.oe.UI(C),d.oe.UI(w),C.wa<w.pa?-1:w.wa<C.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(g)&&(this.Ys=o,this.KH=g=o=p.oe.Me(this.Jk,this.Mq)),isNaN(y)&&(this.Zs=l,this.LH=y=o=d.oe.Me(this.Jk,this.Mq)),Math.abs(g-y)<=this.ra?this.JO(p.oe,d.oe):g<y?-1:g>y?1:0)},n.prototype.Mr=function(){this.sg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.VJ=function(o,l){this.Jk=o,this.Mq=l,this.ht=this.No=this.Zs=this.Ys=-1},n.prototype.compare=function(o,l,p){return this.sg?-1:(o=o.ka(p),this.Fm=p,this.ME(l,l,o,o))},n.prototype.ME=function(o,l,p,d){if(this.No==l)var y=this.OA;else this.No=l,y=this.OA,this.OA.pb=o,this.hG(y,l,this.g.ud.o,this.g.Te);if(g==null){this.ht=d;var g=this.TH;this.TH.pb=p,this.hG(g,d,this.g.ud.o,this.g.Te)}return y.Vv||g.Vv?this.IO(l,d,y,g):y.Wf.wa<g.Wf.pa?-1:g.Wf.wa<y.Wf.pa?1:(o=y.Xv?1:0,(o|=g.Xv?2:0)==0?this.HO(y,g):o==1?this.IE(y.tb,g.tb):o==2?-1*this.IE(g.tb,y.tb):this.GO(y.tb,g.tb))},n}();c.PC=a}(U||(U={})),function(c){var C=function(){function w(u,a){this.g=u,this.ra=a,this.sg=!1,this.No=-1,this.Wf=new c.Oc,this.Iq=new c.h,this.Iq.Sc(),this.je=new c.zb,this.Fm=-1,this.wA=17976931348623157e292}return w.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},w.prototype.Fh=function(u){this.Iq.N(u)},w.prototype.compare=function(u,a){return this.NE(a,u.ka(a))},w.prototype.NE=function(u,a){var n=this.g.cc(a)!=null;if(n||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa)),n)throw c.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=u,this.sg=!0,0;this.je.mI(),n=this.je.bc(),(a=new c.h).vc(this.je.xc(),n),a.cr();var o=new c.h;return o.vc(this.Iq,n),n=a.Sh(o),(n/=a.length())<10*-this.ra?-1:n>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((a=Math.abs(n))<this.wA&&(this.Fm=u,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>n?-1:1},w}();c.WL=C}(U||(U={})),function(c){function C(u,a,n,o){n=new Float64Array(u.subarray(n,o)),u.set(n,a)}var w=function(){function u(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Float64Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Dn=function(a){var n=new u(0);return n.o=new Float64Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Float64Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.BB=function(a){return u.Nr(this,a)},u.prototype.gg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Cn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.wj(this.read(n));return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var y=0;y<o;y+=p){l-=p;for(var g=0;g<p;g++)this.o[d+y+g]=a.o[n+l+g]}}},u.prototype.On=function(a,n,o,l,p,d,y){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();var g=this.size-y;if(g<l&&this.resize(this.size+l-g),C(this.o,a+l,a,a+(y-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,y=0;y<l;y+=d)for(p-=d,g=0;g<d;g++)this.o[a+y+g]=n.o[o+p+g]},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var y=l-1;p<l;++p)d=n[o+y],this.o[a++]=d.x,this.o[a++]=d.y,y--}},u.prototype.Nn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var y=0;y<d;y++)this.o[a+y]=o.o[l+y];a+=d,l-=d}},u.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var y=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=y}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var y=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=y}o+=p,a-=p}},u.prototype.qC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.pC=function(a,n,o){if(0>a||0>n)throw c.i.O();if(n!=0){this.size<(n<<1)+a&&this.resize((n<<1)+a),n+=0;for(var l=0;l<n;l++)this.o[a]=o[l][0],this.o[a+1]=o[l][1],a+=2}},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.pB=function(a,n,o){if(0>a||0>n||this.size<(n>>1)+a)throw c.i.O();if(n!=0){n=0+n;for(var l=0;l<n;l++)o[l][0]=this.o[a],o[l][1]=this.o[a+1],a+=2}},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(a,n,o){Array.prototype.sort.call(this.o.subarray(a,n),o)},u.prototype.Vp=function(){return 1},u}();c.ce=w}(U||(U={})),function(c){function C(u,a,n,o){n=new Int32Array(u.subarray(n,o)),u.set(n,a)}c.nY=function(){this.random=1973};var w=function(){function u(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Int32Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Dn=function(a){var n=new u(0);return n.o=new Int32Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int32Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.BB=function(a){return u.Nr(this,a)},u.prototype.gg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Cn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.Vh(this.read(n),a);return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var y=0;y<o;y+=p){l-=p;for(var g=0;g<p;g++)this.o[d+y+g]=a.o[n+l+g]}}},u.prototype.On=function(a,n,o,l,p,d,y){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();if(C(this.o,a+l,a,a+(y-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,y=0;y<l;y+=d){p-=d;for(var g=0;g<d;g++)this.o[a+y+g]=n.o[o+p+g]}},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var y=l-1;p<l;++p)d=n[o+y],this.o[a++]=d.x,this.o[a++]=d.y,y--}},u.prototype.Nn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var y=0;y<d;y++)this.o[a+y]=o.o[l+y];a+=d,l-=d}},u.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var y=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=y}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var y=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=y}o+=p,a-=p}},u.prototype.qC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(a,n,o){10>n-a?u.mG(this.o,a,n,o):u.lB(this.o,a,n-1,o)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.XW=function(a){this.o[this.size-1]=a},u.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.gF=function(a){for(var n=0,o=this.size;n<o;n++)if(this.o[n]==a)return n;return-1},u.prototype.cG=function(a){return 0<=this.gF(a)},u.mG=function(a,n,o,l){for(var p=n;p<o;p++){for(var d=a[p],y=p-1;y>=n&&0<l(a[y],d);)a[y+1]=a[y],y--;a[y+1]=d}},u.sx=function(a,n,o){var l=a[o];a[o]=a[n],a[n]=l},u.lB=function(a,n,o,l){if(!(n>=o))for(;;){if(9>o-n){u.mG(a,n,o+1,l);break}var p=a[n];u.sx(a,n,o);for(var d=n,y=n;y<o;y++)0>=l(a[y],p)&&(u.sx(a,d,y),d+=1);u.sx(a,d,o),d-n<o-d?(u.lB(a,n,d-1,l),n=d+1):(u.lB(a,d+1,o,l),o=d-1)}},u}();c.ja=w}(U||(U={})),function(c){function C(u,a,n,o){n=new Int8Array(u.subarray(n,o)),u.set(n,a)}var w=function(){function u(a){this.o=null;var n=a;2>n&&(n=2),this.o=new Int8Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Dn=function(a){var n=new u(0);return n.o=new Int8Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int8Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.BB=function(a){return u.Nr(this,a)},u.prototype.gg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Cn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.Vh(this.read(n),a);return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var y=0;y<o;y+=p){l-=p;for(var g=0;g<p;g++)this.o[d+y+g]=a.o[n+l+g]}}},u.prototype.On=function(a,n,o,l,p,d,y){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();if(C(this.o,a+l,a,a+(y-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,y=0;y<l;y+=d){p-=d;for(var g=0;g<d;g++)this.o[a+y+g]=n.o[o+p+g]}},u.prototype.Nn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var y=l-1;p<l;++p)d=n[o+y],this.o[a++]=d.x,this.o[a++]=d.y,y--}},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var y=0;y<d;y++)this.o[a+y]=o.o[l+y];a+=d,l-=d}},u.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var y=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=y}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var y=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=y}o+=p,a-=p}},u.prototype.qC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(a,n,o){n=this.o.subarray(a,n),Array.prototype.sort.call(n,o),this.o.set(n,a)},u.prototype.uJ=function(a,n){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=n},u.prototype.FE=function(a,n){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~n},u.prototype.Vp=function(){return 1},u}();c.rn=w}(U||(U={})),function(c){c.Zc=function(){function C(){}return C.Or=function(w,u){return c.rn.rf(w,u)},C.Fn=function(w,u){return c.ce.rf(w,u)},C.kP=function(w,u,a){switch(w){case 1:w=c.ce.rf(u,a);break;case 2:w=c.ja.rf(u,a);break;case 4:w=c.rn.rf(u,a);break;default:throw c.i.Ra()}return w},C.TE=function(w,u){return C.kP(c.sa.Vp(w),u*c.sa.Wa(w),c.sa.te(w))},C.Qh=function(w,u){return c.ja.rf(w,u)},C.lI=function(w){var u,a=[];for(u=0;u<w;u++)a.push(null);return a},C}()}(U||(U={})),function(c){c.ha=function(C){C===void 0&&(C=0),this.u=C}}(U||(U={})),function(c){c.IL=function(){function C(){}return C.bind=function(w){c.Tc=w.PeDefs,c.qf=w.PeFactory,c.IC=w.PeVertcs,c.gj=w.PeCSTransformations,c.HC=w.PeGTTransformations,c.GL=w.PeGeogtran,c.FL=w.PeFactoryCodechange,c.GC=w.PeGCSExtent,c.Eg=w.PePCSInfo,c.HL=w.PeHorizon,c.EL=w.PeCoordsys,c.np=w.PeGTlistExtended,c.np.PE_GTLIST_OPTS_USE_DEFAULT=128,c.qf.initialize(null),c.Lx=w.PeGTlistExtendedEntry,c.qf.fromString(c.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},C}(),c.qf=null,c.IC=null,c.EL=null,c.HL=null,c.Eg=null,c.np=null,c.Lx=null,c.GC=null,c.FL=null,c.GL=null,c.Tc=null,c.HC=null,c.gj=null}(U||(U={})),function(c){var C=function(){function w(){}return w.Mb=function(u,a){return 0<=a?w.R(u):-w.R(u)},w.R=function(u){return 0>u?-u:u},w.vi=function(u){return 3552713678800501e-30>u},w.FC=function(u,a,n){return w.R(u-a)<=n*(1+(w.R(u)+w.R(a))/2)},w.$=function(u,a){return w.FC(u,a,3552713678800501e-30)},w.AL=function(u){return 3552713678800501e-30>=w.R(u)},w.Dd=function(u){return w.AL(u)},w}();c.s=C,c.F=function(){function w(){}return w.ip=function(u,a){var n=0;return(u=C.R(u))+(a=C.R(a))!=0&&(u>a?(n=a/u,n=u*Math.sqrt(1+n*n)):(n=u/a,n=a*Math.sqrt(1+n*n))),n},w.Yq=function(u,a,n,o,l){for(var p=[0,0,0],d=[0,0,0],y=0;2>=y;y++)a[y]-=u[y],n[y]-=a[y];n=p[1]*d[2]-p[2]*d[1],a=p[2]*d[0]-p[0]*d[2],p=p[0]*d[1]-p[1]*d[0],u=-1*(n*u[0]+a*u[1]+p*u[2]),o[0]=n,o[1]=a,o[2]=p,o[3]=u,d=w.qn(o),o[0]/=d,o[1]/=d,o[2]/=d,o[3]/=d,l!=0&&(d=C.Dd(p)?C.Dd(u)?C.Mb(1,a):-C.Mb(1,u):C.Mb(1,p),d*=C.Mb(1,l),o[0]*=d,o[1]*=d,o[2]*=d,o[3]*=d)},w.yx=function(u,a,n){n[0]=u[1]*a[2]-a[1]*u[2],n[1]=u[2]*a[0]-a[2]*u[0],n[2]=u[0]*a[1]-a[0]*u[1]},w.Ut=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]},w.qn=function(u){return w.ip(w.ip(u[0],u[1]),u[2])},w.el=function(u,a,n,o,l,p,d,y){u=w.n(u,a,n);var g=Math.cos(n);p.u=(u+l)*g*Math.cos(o),d.u=(u+l)*g*Math.sin(o),y.u=(u*(1-a)+l)*Math.sin(n)},w.eO=function(u,a,n,o,l,p,d){var y=w.ip(a,n),g=1*Math.sqrt(1-u),_=g/1;if(C.$(y,0))p.u=0,l.u=C.Mb(1.570796326794897,o),d.u=C.R(o)-g;else{p.u=Math.atan2(n,a),n=Math.atan2(1*o,g*y),p=Math.cos(n);var M=Math.sin(n);a=g*u/(1-u),u*=1,n=Math.atan2(o+a*M*M*M,y-u*p*p*p),3.141592653589793<C.R(n)&&(n=C.Mb(3.141592653589793,n)-n),n=Math.atan(_*Math.tan(n)),M=Math.sin(n),p=Math.cos(n),l.u=Math.atan2(o+a*M*M*M,y-u*p*p*p),1.570796326794897<C.R(l.u)&&(l.u=C.Mb(3.141592653589793,l.u)-l.u),n=Math.atan(_*Math.tan(l.u)),M=Math.sin(n),p=Math.cos(n),d.u=(o-g*M)*Math.sin(l.u)+(y-1*p)*Math.cos(l.u)}},w.n=function(u,a,n){return n=Math.sin(n),u/Math.sqrt(1-a*n*n)},w.pt=function(u,a){return Math.atan2(Math.sin(a)*(1-u),Math.cos(a))},w.Sj=function(u,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-u))},w.Tq=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=Math.sqrt(1-u),o=(1-n)/(1+n),l=o*o,p=o*l,d=o*p,y=o*d,g=o*y,_=o*g,M=1.572916666666667*p-3.2578125*y+4.295068359375*_;u=2.142578125*d-6.071484375*g,n=3.129296875*y-11.249837239583334*_;var $=4.775276692708333*g,E=7.958636765252976*_,k=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*y-.2688395182291667*_-M+n-E+k*(2*(1.3125*l-1.71875*d+1.650146484375*g)-4*u+6*$+k*(4*M-12*n+24*E+k*(8*u-32*$+k*(16*n-80*E+k*(32*$+64*k*E))))))}for(n=1-u,o=u/2,p=(l=C.R(a))*w.av(u)/(1.570796326794897*n),d=9999,g=l,l=0;1e-16<d&&50>l;l++)_=w.w(u,g),y=g-(M=(y=(w.fG(g,u)-o*Math.sin(2*g)/_)/n-p)/(_=1/(_*_*_))),d=C.R(M),g=y;return 0<=a?g:-g},w.lW=function(u,a){return C.vi(a)?u:u*w.av(a)/1.570796326794897},w.ca=function(u){return 0>(u=w.kF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>C.R(u)||C.$(C.R(u),3.141592653589793)?u:u-6.283185307179586},w.kF=function(u,a){return u-Math.floor(u/a)*a},w.Ch=function(u,a){if(.006884661117170036>a){var n=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=n*n;return u/(1+a)*(1+.25*n+.015625*o+.00390625*n*o)*1.570796326794897}return u*w.av(a)},w.Xq=function(u,a){var n=C.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=C.R(w.kF(a,3.141592653589793)))?a:3.141592653589793-a,(C.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-u)*Math.tan(a)))*n},w.q=function(u,a,n){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,l=a*o,p=a*l,d=a*p,y=a*d,g=a*y,_=-.7291666666666666*l+.2278645833333333*d+.03987630208333334*g,M=.615234375*p-.21533203125*y,$=-.54140625*d+.20302734375*g,E=.48876953125*y,k=-.4488699776785715*g,P=Math.cos(2*n);return u/(1+a)*((1+.25*o+.015625*p+.00390625*y)*n+Math.sin(2*n)*(-1.5*a+.1875*l+.0234375*d+.00732421875*g-_+$-k+P*(2*(.9375*o-.234375*p-.03662109375*y)-4*M+6*E+P*(4*_-12*$+24*k+P*(8*M-32*E+P*(16*$-80*k+P*(32*E+64*P*k)))))))}return u*(w.fG(n,a)-.5*a*Math.sin(2*n)/w.w(a,n))},w.w=function(u,a){return a=Math.sin(a),Math.sqrt(1-u*a*a)},w.av=function(u){return C.FC(u,1,2220446049250313e-31)?1:1>u?w.Zw(0,1-u)-u/3*w.Ww(0,1-u):NaN},w.fG=function(u,a){var n=C.Mb(1,u);u=C.R(u);var o=Math.floor(u/1.570796326794897);if(1<a)a=u==0?0:NaN;else if(C.Dd(o))a=(u=w.sin(u))*w.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*w.Ww(1-u*u,1-a*u*u);else{var l=c.P.truncate(o%2),p=w.av(a);0<l?a=p*(o+1)-(a=(u=Math.sin(1.570796326794897*(o+1)-u))*w.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*w.Ww(1-u*u,1-a*u*u)):a=p*o+(a=(u=Math.sin(u-1.570796326794897*o))*w.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*w.Ww(1-u*u,1-a*u*u))}return a*n},w.sin=function(u){u=w.ca(u);var a=C.Mb(1,u);return u=C.R(u),C.$(u,3.141592653589793)?0:C.$(u,1.570796326794897)?1*a:Math.sin(u)*a},w.Ww=function(u,a){var n,o,l,p,d=u,y=a,g=1;for(a=0,u=1;o=((n=.2*(d+y+3*g))-d)/n,l=(n-y)/n,p=(n-g)/n,!(1e-4>C.R(o)&&1e-4>C.R(l)&&1e-4>C.R(p));)p=Math.sqrt(y),a+=u/((n=Math.sqrt(g))*(g+(p=Math.sqrt(d)*(p+n)+p*n))),u*=.25,d=.25*(d+p),y=.25*(y+p),g=.25*(g+p);return y=(d=o*l)-(g=p*p),3*a+u*(1+(g=d-6*g)*(.10227272727272728*g-.2142857142857143-.1730769230769231*p*(o=g+y+y))+p*(.1666666666666667*o+p*(-.4090909090909091*y+.1153846153846154*p*d)))/(n*Math.sqrt(n))},w.Zw=function(u,a){for(var n,o,l,p,d=1;o=2-((n=(u+a+d)/3)+u)/n,l=2-(n+a)/n,p=2-(n+d)/n,!(1e-4>C.R(o)&&1e-4>C.R(l)&&1e-4>C.R(p));d=.25*(d+n))n=Math.sqrt(a),o=Math.sqrt(d),u=.25*(u+(n=Math.sqrt(u)*(n+o)+n*o)),a=.25*(a+n);return(1+(.04166666666666666*(u=o*l-p*p)-.1-.06818181818181818*(a=o*l*p))*u+.07142857142857142*a)/Math.sqrt(n)},w.Sw=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=u*u,o=u*n,l=u*o,p=u*l,d=u*p,y=u*d,g=-(.02708333333333333*o+.03430059523809524*l+.03149181547619048*p+.02634359154541446*d+.02156896735835538*y),_=.007669890873015873*l+.01299603174603175*p+.0148051353064374*d+.01454454953803912*y,M=-(.002275545634920635*p+.004830845032667949*d+.006558395368616723*y),$=.0006957236677288761*d+.001775193002406544*y,E=-.000217324089394402*y,k=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*u+.2083333333333333*n+.09375*o+.04878472222222222*l+.02916666666666667*p+.01938905423280423*d+.01388255931712963*y)-g+M-E+k*(2*(.1041666666666667*n+.0875*o+.06050347222222222*l+.04151785714285714*p+.02958958540013228*d+.02203667534722222*y)-4*_+6*$+k*(4*g-12*M+24*E+k*(8*_-32*$+k*(16*M-80*E+k*(32*$+64*k*E))))))}return a==0||C.$(C.R(a),1.570796326794897)?n=a:(l=(o=Math.sqrt(u))*Math.sin(a),n=Math.tan(.7853981633974483+a/2)*Math.pow((1-l)/(1+l),o/2),n=2*Math.atan(n)-1.570796326794897),n},w.tO=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=u*($=u*(M=u*(k=u*u))),o=u*(E=u*n),l=.05833333333333333*M+.07232142857142858*$+.05634300595238095*n+.0355325796406526*E+.020235546186067*o,p=.02653149801587302*$+.04379960317460317*n+.0429211791776896*E+.03255384637546096*o,d=.01294022817460318*n+.02668104344536636*E+.03155651254609588*o,y=.00659454790965208*E+.0163075268674227*o,g=.003463473736911237*o,_=Math.cos(2*a);return a+Math.sin(2*a)*(.5*u+.2083333333333333*k+.08333333333333333*M+.03611111111111111*$+.01875*n+.01195601851851852*E+.008863673941798942*o-l+d-g+_*(2*(.1458333333333333*k+.1208333333333333*M+.07039930555555556*$+.03616071428571429*n+.01839451058201058*E+.01017113095238095*o)-4*p+6*y+_*(4*l-12*d+24*g+_*(8*p-32*y+_*(16*d-80*g+_*(32*y+64*_*g))))))}var M=Math.sqrt(u),$=M/2,E=Math.tan(.7853981633974483+a/2);u=0,l=1;for(var k=a;l!=0;k=o)n=M*Math.sin(k),o=E*Math.pow((1+n)/(1-n),$),o=2*Math.atan(o)-1.570796326794897,u++,(C.$(o,k)||3e4<u)&&(l=0);return k},w}()}(U||(U={})),function(c){var C=function(){function w(u){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new c.h,this.SH=new c.h,this.FA=!1,this.xq=new c.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=u,this.Cs=c.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var a=u.getCode();0<a?(this.Mk=a,c.qf.getCode(u)):this.Mk=c.qf.getCode(u),0>this.Mk&&(this.Mk=0);var n=this.Re.getType();if(this.eH=n==c.Tc.PE_TYPE_PROJCS?2:1,n==c.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw c.i.O("PeProjcs.loadConstants failed");a=n==c.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=c.Tc.PE_TYPE_GEOGCS&&c.qf.getCode(a),this.Go=u.getUnit(),this.MH=a.getPrimem().getLongitude(),this.rH=u=a.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.BA=u,n&c.Tc.PE_TYPE_PROJCS?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=c.Eg.generate(a,c.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=c.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,n=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return w.prototype.cs=function(){return this.Mk},w.prototype.mk=function(){return this.vw},w.Ky=function(u,a){return u==a||u!=null&&a!=null&&u.Mk==0&&a.Mk==0&&u.Cs===a.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(u){u.L(this.uo)},w.prototype.rv=function(){return this.uo.v},w.prototype.qv=function(){return this.uo.C},w.prototype.BR=function(u){u.L(this.ww)},w.prototype.hY=function(){var u=this.Re.getType();if(u==c.Tc.PE_TYPE_PROJCS){u=this.Re;var a=this.mk().getCentralMeridian(),n=u.getGeogcs();if(n==null)throw c.i.ga("internal error");a=[[a+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],c.gj.geogToProj(u,1,a),a=a[0][0],n=u.getParameters()[c.Tc.PE_PARM_X0].getValue();var o=this.ol();u=new c.l,o.A(u),a=(o=Math.abs(a-n))+n,n=-1*o+n,o=u.H,u=u.G;var l=new c.l;l.L(n,u,a,o),this.uo==null&&(this.uo=l)}else{if(u!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new c.l).L(-n,-n/2,n,n/2),this.uo==null&&(this.uo=u)}},w.prototype.iY=function(){var u=this.Re.getType();if(u==c.Tc.PE_TYPE_PROJCS){var a=this.Re;if(u=this.mk().getCentralMeridian(),(a=a.getGeogcs())==null)throw c.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),o=new c.l;n.A(o),(n=new c.l).L(u-a,o.G,u+a,o.H),this.ww==null&&(this.ww=n)}else{if(u!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new c.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=u)}},w.prototype.bf=function(){return this.BA},w.prototype.rm=function(){return this.CA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u??(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},w.prototype.wx=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var u=this.Re,a=u.getGeogcs(),n=u.horizonGcsGenerate();if(n!=null){var o=n[0].getNump(),l=n[0].getKind();u=0<n[0].getInclusive();var p=this.bf(),d=90*p,y=360*p,g=370*p,_=180*p*c.Tc.PE_HORIZON_DELTA/Math.PI,M=new c.l,$=null;if(1<o){for(var E=1;E<o;E++)if(n[E].getKind()==c.Tc.PE_HORIZON_LINE){$==null&&($=new c.Ua);var k=n[E].getCoord();$.rx(k[0][0],k[0][1]),$.Aj(k[1][0],k[1][1])}}if(l==c.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),M.L(n[0][0],n[0][1]),M.$b(n[1][0],n[1][1]),Math.abs(M.H-d)<1e-7*_&&(M.H=d),Math.abs(M.G+d)<1e-7*_&&(M.G=-d),M.S()>g&&(n=-400*p,M.L(n,M.G,n+5*y,M.H)),n=new c.Hh(M),this.wl==null&&(this.wl=n,this.Kv=u);else{if(g=new c.Ea,y=this.mk().isGcsHorizonMultiOverlap(),M=c.iu.XE(a,c.ju.Integer64),y){for(g=new c.bL,_=c.Ih.local().W(g,M,null),E=0;E<o;E++)if(n[E].getKind()==c.Tc.PE_HORIZON_POLY){for(a=n[E].getSize(),p=n[E].getCoord(),l=[],d=0;d<a;d++)l[d]=c.h.construct(p[d][0],p[d][1]);n[E].getInclusive(),y&&((p=new c.Ea).$k(l,a-1),g.VX(p),_.re())}g=_.next()}else for(E=0;E<o;E++)if(n[E].getKind()==c.Tc.PE_HORIZON_POLY){for(a=n[E].getSize(),p=n[E].getCoord(),y=[],d=0;d<a;d++)y[d]=c.h.construct(p[d][0],p[d][1]);n[E].getInclusive(),g.$k(y,a-1)}u?c.Zj.local().yn(g,M,1):c.mp.local().yn(g,M,1),c.fj.local().yn(g,M,1),this.wl==null&&(this.wl=g,this.Kv=u,this.TG=$)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.yK=function(){if(this.eH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var a=u[0].getKind();u[0].getInclusive();var n=u[0].getNump(),o=!1;if(a==c.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(n=new c.l).L(u[0][0],u[0][1]),n.$b(u[1][0],u[1][1]),u=new c.Hh(n);else{for(a=-1,o=0;o<n;o++)u[o].getKind()==c.Tc.PE_HORIZON_POLY&&(a=o);for(o=u[a].getSize()-1,u=u[a].getCoord(),n=[],a=0;a<o;a++)n[a]=c.h.construct(u[a][0],u[a][1]);u=a=new c.Ea,a.$k(n,o),o=!0}this.mk().isDensificationNeeded()&&(n=1e5*this.rm(),u=c.Zl.local().W(u,n,null)),o&&(o=new c.Hh,u.dn(o),u.He(),u.Rb(),u.kR(),c.Zj.local().yn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u??(this.yK(),this.Ws)},w.prototype.jY=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],c.gj.geogToProj(this.Re,2,u);var a=this.mk(),n=a.getNorthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(n&&this.CH.na(u[0][0],u[0][1]),a&&this.SH.na(u[1][0],u[1][1]))}this.FA=!0},w.prototype.xK=function(){if(this.eH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=c.Eg.generate(this.Re,c.Eg.PE_PCSINFO_OPTION_DOMAIN),u=c.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},w.prototype.cR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.xK(),u.L(this.xq)},w.prototype.Wp=function(){return this.MH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Go},w.prototype.Zr=function(){return this.rH},w}();c.JC=C}(U||(U={})),function(c){var C=function(){function w(u){this.FT=u,this.Cs=c.Ab.zv(u,0,!0);var a=u.getCode();this.us=0<a?a:c.qf.getCode(u),0>this.us&&(this.us=0),this.Go=a=this.FT.getUnit(),this.DH=1/a.getUnitFactor(),c.qf.getCode(u)}return w.Ky=function(u,a){return u==a||u!=null&&a!=null&&u.us==0&&a.us==0&&u.Cs===a.Cs},w.prototype.cs=function(){return this.us},w}();c.KL=C}(U||(U={})),function(c){c.$g=function(){function C(){}return C.ub=function(w,u,a,n,o,l,p,d){if(l!=null||p!=null||d!=null){n=c.F.ca(n),u=c.F.ca(u),a=c.F.ca(a),o=c.F.ca(o),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,u=c.F.ca(u+3.141592653589793)),1.570796326794897<c.s.R(o)&&(o=c.s.Mb(3.141592653589793,o)-o,n=c.F.ca(n+3.141592653589793));var y=c.F.ca(n-u);if(c.s.$(a,o)&&(c.s.$(u,n)||c.s.$(c.s.R(a),1.570796326794897)))l!=null&&(l.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(c.s.$(a,-o)){if(c.s.$(c.s.R(a),1.570796326794897))return l!=null&&(l.u=3.141592653589793*w),p!=null&&(p.u=0<a?c.F.ca(3.141592653589793-c.F.ca(n)):c.F.ca(n)),void(d!=null&&(d.u=0<a?c.F.ca(n):c.F.ca(3.141592653589793-c.F.ca(n))));if(c.s.$(c.s.R(y),3.141592653589793))return l!=null&&(l.u=3.141592653589793*w),p!=null&&(p.u=0),void(d!=null&&(d.u=0))}var g=c.s.R(a)==1.570796326794897?0:Math.cos(a),_=Math.sin(a),M=c.s.R(o)==1.570796326794897?0:Math.cos(o),$=Math.sin(o),E=c.s.R(y)==1.570796326794897?0:Math.cos(y),k=c.s.R(y)==3.141592653589793?0:Math.sin(y);if(l!=null){var P=Math.sin((o-a)/2);y=Math.sin(y/2),l.u=2*Math.asin(Math.sqrt(P*P+g*M*y*y))*w}p!=null&&(p.u=c.s.$(c.s.R(a),1.570796326794897)?0>a?n:c.F.ca(3.141592653589793-n):Math.atan2(M*k,g*$-_*M*E)),d!=null&&(c.s.$(c.s.R(o),1.570796326794897)?d.u=0>o?u:c.F.ca(3.141592653589793-u):(d.u=Math.atan2(g*k,$*g*E-M*_),d.u=c.F.ca(d.u+3.141592653589793)))}}},C.sf=function(w,u,a,n,o,l,p){if(l!=null||p!=null){u=c.F.ca(u),a=c.F.ca(a),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,u=c.F.ca(u+3.141592653589793)),c.s.$(c.s.R(a),1.570796326794897)&&(u=0),o=c.F.ca(o);var d=c.s.$(c.s.R(o),1.570796326794897)?0:Math.cos(o),y=c.s.$(c.s.R(o),3.141592653589793)?0:Math.sin(o),g=c.s.$(c.s.R(a),1.570796326794897)?0:Math.cos(a),_=Math.sin(a);w=n/w,n=c.s.$(c.s.R(w),1.570796326794897)?0:Math.cos(w);var M=c.s.$(c.s.R(w),3.141592653589793)?0:Math.sin(w),$=Math.asin(_*n+g*M*d);p!=null&&(p.u=$),l!=null&&(l.u=c.s.$(c.s.R($),1.570796326794897)?c.s.$(a,-$)?0>$?o:c.F.ca(3.141592653589793-o):u:c.s.$(c.s.R(a),1.570796326794897)&&c.s.$(w,3.141592653589793)?0>a?o:c.F.ca(3.141592653589793-o):c.F.ca(u+Math.atan2(M*y,g*n-_*M*d)))}},C}()}(U||(U={})),function(c){c.Yk=function(){function C(){}return C.ub=function(w,u,a,n,o,l,p,d,y){var g=new c.ha(0),_=new c.ha(0),M=[0,0,0],$=[0,0,0],E=[0,0,0],k=new c.ha(0),P=new c.ha(0),F=new c.ha(0),D=new c.ha(0),V=new c.ha(0);if(p!=null||d!=null||y!=null)if(c.s.vi(u))c.$g.ub(w,a,n,o,l,p,d,y);else{o=c.F.ca(o),a=c.F.ca(a);var N=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.$(a,o)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),y!=null&&(y.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(y!=null&&(y.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(N),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0),y!=null&&(y.u=0))}else(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897))&&(c.s.$(c.s.R(n),1.570796326794897)?a=o:o=a);var G=0;if(0>N){G=1;var J=a;a=o,o=J,J=n,n=l,l=J}N=c.F.pt(u,n);var W=c.F.pt(u,l);d==null&&y==null||(c.$g.ub(w,a,N,o,W,null,g,_),g=Math.atan2(Math.sin(g.u)*Math.cos(n-N),Math.cos(g.u)),_=Math.atan2(Math.sin(_.u)*Math.cos(l-W),Math.cos(_.u)),G!=0&&(J=g,g=_,_=J),d!=null&&(d.u=g),y!=null&&(y.u=_)),p!=null&&(c.F.el(1,u,n,a,0,F,D,V),M[0]=F.u,M[1]=D.u,M[2]=V.u,c.F.el(1,u,l,o,0,F,D,V),$[0]=F.u,$[1]=D.u,$[2]=V.u,E[0]=M[1]*$[2]-$[1]*M[2],E[1]=-(M[0]*$[2]-$[0]*M[2]),E[2]=M[0]*$[1]-$[0]*M[1],u=1-c.F.w(u,c.F.Xq(u,c.F.Sj(u,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),u*=2-u,d=Math.atan2(-E[1],-E[0]),E=c.F.ca(d-1.570796326794897),d=c.F.ca(d+1.570796326794897),E=c.s.R(c.F.ca(a-E))<=c.s.R(c.F.ca(a-d))?E:d,c.$g.ub(1,E,0,a,N,k,null,null),c.$g.ub(1,E,0,o,W,P,null,null),3.141592653589793<k.u+P.u&&(E=c.F.ca(E+3.141592653589793),c.$g.ub(1,E,0,a,N,k,null,null),c.$g.ub(1,E,0,o,W,P,null,null)),k.u*=c.s.Mb(1,n),P.u*=c.s.Mb(1,l),k.u=c.F.Sj(u,k.u),P.u=c.F.Sj(u,P.u),a=c.F.q(w,u,k.u),w=c.F.q(w,u,P.u),p.u=c.s.R(w-a))}}},C.sf=function(w,u,a,n,o,l,p,d){var y=0,g=new c.ha(0),_=new c.ha(0),M=[0,0,0],$=[0,0,0],E=new c.ha(0),k=new c.ha(0),P=new c.ha(0);if(p!=null||d!=null)if(c.s.vi(u))c.$g.sf(w,a,n,o,l,p,d);else if(c.s.Dd(o))p!=null&&(p.u=a),d!=null&&(d.u=n);else if(l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),a=c.F.ca(a),n=c.F.ca(n),1.570796326794897<c.s.R(n)&&(a=c.F.ca(a+3.141592653589793),n=c.s.Mb(3.141592653589793,n)-n),c.s.$(c.s.R(n),1.570796326794897)&&(a=0),c.s.Dd(n)){var F=c.s.R(1.570796326794897-c.s.R(l));F=c.F.Sj(u,F),F=1-c.F.w(u,c.F.Xq(u,F)),F*=2-F,w=o/c.F.Ch(w,F)*1.570796326794897,w=c.F.Tq(F,w),w=c.F.pt(F,w),c.$g.sf(1,a,n,w,l,p,g),d!=null&&(y=g.u),d!=null&&(d.u=c.F.Sj(u,y))}else if(c.s.$(c.s.R(n),1.570796326794897))g=2*(y=c.F.Ch(w,u)),l=0<(w=c.s.Mb(1.570796326794897,n))?c.F.ca(3.141592653589793-l):l,n=y-o,c.s.R(n)<=y?p!=null&&(p.u=l):(n=Math.floor(o/g),c.P.truncate(n%2)==0?(p!=null&&(p.u=l),o-=n*g):(p!=null&&(p.u=c.F.ca(l+3.141592653589793)),o=(n+1)*g-o),n=y-o),d!=null&&(d.u=c.F.Tq(u,n/y*w));else{F=c.F.pt(u,n),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(n-F));var D=c.P.truncate(c.s.Mb(1,F))*(1.570796326794897>=c.s.R(l)?1:-1);l=c.F.ca(a+Math.atan(Math.tan(l)*-Math.sin(F))),c.$g.ub(w,l,0,a,F,null,_,null),F=c.s.R(1.570796326794897-c.s.R(_.u)),F=c.F.Sj(u,F),F=1-c.F.w(u,c.F.Xq(u,F)),F*=2-F,c.F.el(1,u,0,l,0,E,k,P),M[0]=E.u,M[1]=k.u,M[2]=P.u,c.F.el(1,u,n,a,0,E,k,P),$[0]=E.u,$[1]=k.u,$[2]=P.u,n=Math.acos((M[0]*$[0]+M[1]*$[1]+M[2]*$[2])/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2])),n=c.F.Sj(F,n),o=0<(n=c.F.q(w,F,n)+o*D)?_.u:c.F.ca(_.u+3.141592653589793),w=c.s.R(n)/c.F.Ch(w,F)*1.570796326794897,w=c.F.Tq(F,w),w=c.F.pt(F,w),c.$g.sf(1,l,0,w,o,p,g),d!=null&&(y=g.u),d!=null&&(d.u=c.F.Sj(u,y))}},C}()}(U||(U={})),function(c){c.eu=function(){function C(){}return C.ub=function(w,u,a,n,o,l,p,d,y){var g=0,_=0,M=0;if(p!=null||d!=null||y!=null)if(c.s.vi(u))c.$g.ub(w,a,n,o,l,p,d,y);else{var $=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.Dd($)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),y!=null&&(y.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(y!=null&&(y.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R($),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0),y!=null&&(y.u=0))}else if(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897)||c.s.Dd($)||c.s.$(c.s.R($),3.141592653589793))return void c.Yk.ub(w,u,a,n,o,l,p,d,y);var E=1-Math.sqrt(1-u),k=u/(1-u),P=w*(1-E);w=c.F.Xq(u,n);var F=c.F.Xq(u,l);u=c.s.R(w)==1.570796326794897?0:Math.cos(w);var D=Math.sin(w),V=c.s.R(F)==1.570796326794897?0:Math.cos(F),N=Math.sin(F),G=$,J=Math.cos(G),W=Math.sin(G),ee=1,Z=0;do{var ae=G,de=Math.sqrt(Math.pow(V*W,2)+Math.pow(u*N-D*V*J,2)),ce=D*N+u*V*J,Ae=Math.atan2(de,ce);if(de==0){ee=0;break}var be=u*V*W/de;if(g=Math.cos(Math.asin(be)),_=ce-2*D*N/(g*=g),1<c.s.R(_)&&(_=c.s.Mb(1,_)),G=$+(1-(G=E/16*g*(4+E*(4-3*g))))*E*be*(Ae+G*de*(_+G*ce*(2*(M=_*_)-1))),J=Math.cos(G),W=Math.sin(G),Z++,3.141592653589793<c.s.R(G)&&30<Z){ee=0;break}}while(5e3>=Z&&!c.s.$(ae,G));if(ee!=0)E=(k*=g)*(256+k*(k*(74-47*k)-128))/1024,p!=null&&(p.u=P*(1+k*(4096+k*(k*(320-175*k)-768))/16384)*(Ae-E*de*(_+E/4*(ce*(2*M-1)-E/6*_*(4*de*de-3)*(4*M-3))))),d!=null&&(d.u=c.s.$(c.s.R(n),1.570796326794897)?0>n?o:c.F.ca(3.141592653589793-o):Math.atan2(V*W,u*N-D*V*J)),y!=null&&(c.s.$(c.s.R(l),1.570796326794897)?y.u=0>l?a:c.F.ca(3.141592653589793-a):(y.u=Math.atan2(u*W,u*N*J-D*V),y.u=c.F.ca(y.u+3.141592653589793)));else{G=c.s.Mb(3.141592653589793,$),ce=D*N-u*V,Ae=Math.acos(ce),de=Math.sin(Ae),g=1,Z=be=0;do M=be,J=1-.25*(be=E*(g*=g)*(1+E+E*E))+.1875*(_=E*E*(J=g*g)*(1+2.25*E))-.1953125*(ee=E*E*E*J*g),be=.25*be-.25*_+.29296875*ee,W=.03125*_-.05859375*ee,ee*=.00651041666666667,_=ce-2*D*N/g,1<c.s.R(_)&&(_=c.s.Mb(1,_)),g=Math.acos(_),ce=Math.cos(2*g),ae=Math.cos(3*g),W=(be=c.s.$(n,-l)?c.F.ca(3.141592653589793-$)/(3.141592653589793*E*J):c.F.ca(G-$)/(E*(J*Ae+be*de*_+W*Math.sin(2*Ae)*ce+ee*Math.sin(3*Ae)*ae)))*de/(u*V),G=1.570796326794897<c.s.R($)?c.s.Mb(3.141592653589793,W)-Math.asin(W):Math.asin(W),J=Math.cos(G),de=Math.sqrt(Math.pow(V*W,2)+Math.pow(u*N-D*V*J,2)),Ae=3.141592653589793-Math.asin(c.s.R(de)),ce=Math.cos(Ae),g=Math.cos(Math.asin(be)),Z++;while(70>=Z&&!c.s.$(M,be));p!=null&&(J=1+(k*=g*=g)*(4096+k*(k*(320-175*k)-768))/16384,c.s.$(n,-l)?p.u=3.141592653589793*P*J:(_=ce-2*D*N/g,g=Math.acos(_),ce=Math.cos(2*g),ae=Math.cos(3*g),p.u=P*(J*Ae+k*(k*(128+k*(35*k-60))-512)/2048*de*_+k*(5*k-4)/6144*k*k*Math.sin(2*Ae)*ce+ee*Math.sin(3*Ae)*ae+-762939453125e-16*k*k*k*k*Math.sin(4*Ae)*Math.cos(4*g)))),d!=null&&(c.s.Dd(n)&&c.s.Dd(l)?(g=Math.sqrt(1-be*be),d.u=Math.acos(g),0>$&&(d.u*=-1)):c.s.$(c.s.R(n),1.570796326794897)?d.u=0>n?o:c.F.ca(3.141592653589793-o):(p=be/u,P=Math.sqrt(1-p*p),0>u*N-D*V*Math.cos(G)&&(P*=-1),d.u=Math.atan2(p,P),c.s.$(n,-l)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-E*Math.cos(n))&&(0<n&&1.570796326794897>c.s.R(d.u)||0>n&&1.570796326794897<c.s.R(d.u))&&(d.u=c.s.Mb(3.141592653589793,d.u)-d.u))),y!=null&&(c.s.Dd(n)&&c.s.Dd(l)?(g=Math.sqrt(1-be*be),y.u=Math.acos(g),0<=$&&(y.u*=-1)):c.s.$(c.s.R(l),1.570796326794897)?y.u=0>l?a:c.F.ca(3.141592653589793-a):($=be/V,p=Math.sqrt(1-$*$),P=Math.sin(G/2),0>Math.sin(F-w)-2*u*N*P*P&&(p*=-1),y.u=Math.atan2($,p),y.u=c.F.ca(y.u+3.141592653589793),c.s.$(n,-l)&&!c.s.Dd(n)&&!c.s.$(c.s.R(n),1.570796326794897)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-E*Math.cos(n))&&(d!=null?P=d.u:(p=be/u,P=Math.sqrt(1-p*p),0>u*N-D*V*Math.cos(G)&&(P*=-1),P=Math.atan2(p,P),c.s.$(n,-l)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-E*Math.cos(n))&&(0<n&&1.570796326794897>c.s.R(P)||0>n&&1.570796326794897<c.s.R(P))&&(P=c.s.Mb(3.141592653589793,P)-P)),1.570796326794897>=c.s.R(P)&&1.570796326794897<c.s.R(y.u)||1.570796326794897<=c.s.R(P)&&1.570796326794897>c.s.R(y.u))&&(y.u=-1*c.F.ca(y.u+3.141592653589793))))}}}},C.sf=function(w,u,a,n,o,l,p,d){if(p!=null||d!=null)if(c.s.vi(u))c.$g.sf(w,a,n,o,l,p,d);else if(l=c.F.ca(l),c.s.$(c.s.R(n),1.570796326794897)||c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))c.Yk.sf(w,u,a,n,o,l,p,d);else{var y=c.s.R(l)==1.570796326794897?0:Math.cos(l),g=c.s.R(l)==3.141592653589793?0:Math.sin(l);c.s.$(c.s.R(n),1.570796326794897)&&(a=0),l=1-Math.sqrt(1-u);var _=c.F.Xq(u,n);n=c.s.R(_)==1.570796326794897?0:Math.cos(_);var M=Math.sin(_);_=Math.atan2(Math.tan(_),y);var $=n*g,E=$*$,k=1-E,P=u/(1-u)*k,F=(u=P*(256+P*(P*(74-47*P)-128))/1024)/4,D=u/6,V=o/(w*(1-l)*(1+P*(4096+P*(P*(320-175*P)-768))/16384)),N=V;do{var G=N;o=c.s.R(N)==1.570796326794897?0:Math.cos(N);var J=(P=c.s.R(N)==3.141592653589793?0:Math.sin(N))*P;N=u*P*((w=Math.cos(2*_+N))+F*(o*(2*(N=w*w)-1)-D*w*(4*J-3)*(4*N-3)))+V}while(!c.s.$(G,N));o=c.s.R(N)==1.570796326794897?0:Math.cos(N),P=c.s.R(N)==3.141592653589793?0:Math.sin(N),p!=null&&(g=Math.atan2(P*g,n*o-M*P*y),k=l/16*k*(4+l*(4-3*k)),w=Math.cos(2*_+N),p.u=c.F.ca(a+(g-(1-k)*l*$*(N+k*P*(w+k*o*(2*w*w-1)))))),d!=null&&(k=M*P-n*o*y,k=(1-l)*Math.sqrt(E+k*k),d.u=Math.atan2(M*o+n*P*y,k))}},C}()}(U||(U={})),function(c){c.KC=function(){function C(){}return C.ub=function(w,u,a,n,o,l,p,d,y){var g=c.F.ca(o-a),_=c.s.$(c.s.R(n),1.570796326794897),M=c.s.$(c.s.R(l),1.570796326794897);if(c.s.$(n,l)&&(c.s.Dd(g)||_))p!=null&&(p.u=0),d!=null&&(d.u=0),y!=null&&(y.u=0);else{if(c.s.vi(u)){var $=Math.sin(n),E=Math.sin(l);$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(g,$),p!=null&&(p.u=c.s.$(n,l)?c.s.R(w*Math.cos(n)*g):c.s.R((w*l-w*n)/Math.cos($)))}else E=c.F.Sw(u,l),$=Math.sin(c.F.Sw(u,n)),E=Math.sin(E),$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(g,$),p!=null&&(c.s.$(n,l)?p.u=c.s.R(w*g*Math.cos(n)/c.F.w(u,n)):(g=c.F.q(w,u,n),w=c.F.q(w,u,l),p.u=c.s.R((w-g)/Math.cos($))));d==null&&y==null||(p=c.F.ca($+3.141592653589793),_&&M||!_&&!M||(_?$=0>n?o:c.F.ca(3.141592653589793-o):M&&(p=0>l?a:c.F.ca(3.141592653589793-a))),d!=null&&(d.u=$),y!=null&&(y.u=p))}},C.sf=function(w,u,a,n,o,l,p,d){l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),c.s.vi(u)?c.s.$(c.s.R(n),1.570796326794897)?(a=0>n?l:c.F.ca(3.141592653589793-l),3.141592653589793>=(l=o/w%6.283185307179586)?w=n-c.s.Mb(l,n):(a=c.F.ca(a+3.141592653589793),w=-n+c.s.Mb(l-3.141592653589793,n))):c.s.$(c.s.R(l),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,l)/(w*Math.cos(n))),w=n):(w=n+o*Math.cos(l)/w,1.570796326794897<c.s.R(w)&&(w=1.570796326794897),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))||(1.570796316258184<c.s.R(w)&&(w=c.s.Mb(1.570796316258184,w)),u=Math.sin(n),n=Math.sin(w),u=Math.sqrt((1+u)/(1-u)),n=Math.sqrt((1+n)/(1-n)),u=Math.log(n)-Math.log(u),a=c.F.ca(a+Math.tan(l)*u))):c.s.$(c.s.R(n),1.570796326794897)?(a=0>n?l:c.F.ca(3.141592653589793-l),l=o/c.F.lW(w,u),3.141592653589793>=(l%=6.283185307179586)?w=n-c.s.Mb(l,n):(a=c.F.ca(a+3.141592653589793),w=-n+c.s.Mb(l-3.141592653589793,n)),w=c.F.Tq(u,w)):c.s.$(c.s.R(l),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,l)*c.F.w(u,n)/(w*Math.cos(n))),w=n):(w=1.570796326794897*(o*Math.cos(l)+c.F.q(w,u,n))/c.F.Ch(w,u),1.570796326794897<c.s.R(w)&&(w=c.s.Mb(1.570796326794897,w)),w=c.F.Tq(u,w),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))||(o=c.F.Sw(u,n),n=c.F.Sw(u,w),1.570796316258184<c.s.R(n)&&(n=c.s.Mb(1.570796316258184,w),w=c.F.tO(u,n)),u=Math.sin(o),n=Math.sin(n),u=Math.sqrt((1+u)/(1-u)),n=Math.sqrt((1+n)/(1-n)),u=Math.log(n)-Math.log(u),a=c.F.ca(a+Math.tan(l)*u))),p!=null&&(p.u=a),d!=null&&(d.u=w)},C}()}(U||(U={})),function(c){c.kb=function(){function C(){}return C.Sy=function(w,u,a,n,o,l,p){c.eu.ub(w,u,a,n,o,l,null,p,null)},C.Ai=function(w,u,a,n,o,l,p,d){c.eu.sf(w,u,a,n,o,l,p,d)},C.xd=function(w,u,a,n,o,l,p,d,y,g){switch(g){case 2:c.Yk.ub(w,u,a,n,o,l,p,d,y);break;case 3:c.LC.ub(w,u,a,n,o,l,p,d,y);break;case 1:c.KC.ub(w,u,a,n,o,l,p,d,y);break;default:c.eu.ub(w,u,a,n,o,l,p,d,y)}},C.qj=function(w,u,a,n,o,l,p,d,y){switch(y){case 2:c.Yk.sf(w,u,a,n,o,l,p,d);break;case 3:c.LC.sf(w,u,a,n,o,l,p,d);break;case 1:c.KC.sf(w,u,a,n,o,l,p,d);break;default:c.eu.sf(w,u,a,n,o,l,p,d)}},C}()}(U||(U={})),function(c){var C=function(){function u(){this.y=this.x=null}return u.construct=function(a){var n=new u;return n.x=new c.Xb,n.x.set(a.x),n.y=new c.Xb,n.y.set(a.y),n},u.QE=function(a,n){var o=new u;return o.x=new c.Xb,o.x.set(a),o.y=new c.Xb,o.y.set(n),o},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()},u.prototype.value=function(){return c.h.construct(this.x.value(),this.y.value())},u}();c.rY=C;var w=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(a){var n=new u;return n.x=new c.Xb,n.x.set(a.x),n.y=new c.Xb,n.y.set(a.y),n.z=new c.Xb,n.z.set(a.z),n},u.QE=function(a,n,o){var l=new u;return l.x=new c.Xb,l.x.set(a),l.y=new c.Xb,l.y.set(n),l.z=new c.Xb,l.z.set(o),l},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},u.prototype.value=function(){return new c.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(a){var n=new c.Xb,o=new c.Xb,l=new c.Xb;return n.Ml(this.x,a.x),o.Ml(this.y,a.y),l.Ml(this.z,a.z),(a=new c.Xb).ZM(n,o),a.add(l),a},u.prototype.YE=function(a){var n=new u;n.x.Ml(this.y,a.z),n.y.Ml(this.z,a.x),n.z.Ml(this.x,a.y);var o=new c.Xb,l=new c.Xb,p=new c.Xb;return o.Ml(this.z,a.y),l.Ml(this.x,a.z),p.Ml(this.y,a.x),n.x.sub(o),n.y.sub(l),n.z.sub(p),n},u}();c.sY=w,c.Nx=function(){function u(){}return u.zP=function(a,n,o){var l=n.x;n=n.y,u.el(1,a,Math.cos(l),Math.sin(l),Math.cos(n),Math.sin(n),o)},u.yP=function(a,n){var o=new c.Od;return u.zP(a,n,o),o},u.el=function(a,n,o,l,p,d,y){a/=Math.sqrt(1-n*d*d),y.L(a*p*o,a*p*l,a*(1-n)*d)},u.$u=function(a,n){var o=new c.Xb,l=new c.Xb,p=new c.Xb,d=new c.Xb;o.cos(n.x),l.sin(n.x),p.cos(n.y),d.sin(n.y);var y=new c.Xb;return y.set(d),y.Bg(d),y.Po(a),y.Po(-1),y.fN(),y.sqrt(),(n=new c.Xb).set(1),n.lm(y),(y=new c.Xb).set(n),y.Bg(p),y.Bg(o),(o=new c.Xb).set(n),o.Bg(p),o.Bg(l),(l=new c.Xb).set(n),l.Po(1-a),l.Bg(d),w.QE(y,o,l)},u.NS=function(a,n,o,l){if(Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x)return NaN;if(l=u.YA(l,Math.min(n.x,o.x),Math.max(n.x,o.x)),!new c.Oc(n.x,o.x).contains(l))return NaN;var p=C.construct(n);if(o=C.construct(o),p=u.$u(a,p),o=u.$u(a,o),(o=p.YE(o)).z.rg())return n.y;var d=new c.Xb;d.set(o.x),d.lm(o.z),d.Po(-1);var y=new c.Xb;y.set(o.y),y.lm(o.z),y.Po(-1);var g=new c.Xb;return g.set(y),g.Bg(y),(p=new c.Xb).set(d),p.Bg(d),p.add(g),p.sqrt(),p.rg()||d.rg()&&y.rg()?n.y:(n=Math.atan2(y.value(),d.value()),n=Math.atan2(p.value()*Math.cos(n-l),1-a),l=u.yP(a,c.h.construct(l,n)),a=new c.Od(l.x,l.y,-l.z),l=o.value().Sh(l),a=o.value().Sh(a),Math.abs(a)<Math.abs(l)&&(n=-n),n)},u.Jz=function(a,n,o,l,p){if(p[0]=NaN,p[1]=NaN,Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x||Math.abs(l)>=.5*Math.PI||0<n.y&&0<o.y&&n.y>l&&o.y>l||0>n.y&&0>o.y&&n.y<l&&o.y<l)return 0;var d=C.construct(n),y=C.construct(o);d=u.$u(a,d),y=u.$u(a,y);var g=d.YE(y);if(g.z.rg())return new c.Oc(n.y,o.y).contains(l)?(p[0]=n.x,1):0;(y=new c.Xb).set(g.x),y.lm(g.z),y.Po(-1),(d=new c.Xb).set(g.y),d.lm(g.z),d.Po(-1),(g=new c.Xb).set(d),g.Bg(d);var _=new c.Xb;return _.set(y),_.Bg(y),_.add(g),_.sqrt(),_.rg()||y.rg()&&d.rg()?l==0?(p[0]=n.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(l)/_.value(),1<Math.abs(a)?0:(a=Math.acos(a),g=Math.atan2(d.value(),y.value()),y=Math.min(n.x,o.x),d=Math.max(n.x,o.x),o=u.YA(g-a,y,d),a=l!=0?u.YA(g+a,y,d):o,l=0,y<=o&&o<=d&&(p[l]=o,l++),a!=o&&y<=a&&a<=d&&(p[l]=a,++l==2&&Math.abs(p[0]-n.x)>Math.abs(p[1]-n.x)&&(n=p[0],p[0]=p[1],p[1]=n)),l))},u.YA=function(a,n,o){return a>o?a-=2*(n=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<n&&(a+=2*(n=Math.ceil((n-a)/(2*Math.PI)))*Math.PI),a},u}()}(U||(U={})),function(c){c.SK=function(){function C(){}return C.WX=function(w,u){var a=8,n=[0,0,0,0],o=new c.h;o.N(u),o.scale(c.cb.tc(w).Id().Fc()==9102?1:c.cb.tc(w).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var l=-180,p=180,d=(w=5*a)-1,y=(u=(w+31)/32)-1;0<=y;y--)for(var g=d-32*y,_=Math.min(32,w-32*y),M=1;M<_;M+=2){var $=.5*(p+l);o.x>=$?(n[y]|=1<<g,l=$):p=$,g-=2,d-=2}for(l=-90,p=90,d=w-2,y=u-1;0<=y;y--)for(g=d-32*y,_=Math.min(32,w-32*y),M=0;M<_;M+=2)$=.5*(p+l),o.y>=$?(n[y]|=1<<g,l=$):p=$,g-=2,d-=2;return C.VP(n,a,a)},C.VP=function(w,u,a){for(var n=[],o=0;o<u;o++)n[o]="";for(var l=o=0,p=0;p<u;p++){var d=w[o]>>l&31;if(31<(l+=5)){var y=37-l;d&=(1<<y)-1,l-=32,d|=(w[++o]&(1<<l)-1)<<y}n[u-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[d]}if(a>u)for(p=0;p<a-u;p++)n.push("0");else a<u&&(n.length=a);return n.join("")},C}()}(U||(U={})),function(c){var C={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};c.yr=function(){function u(){}return u.Ny=function(a){u.zp===!1&&u.zt();var n=u.AQ(a);if(n==-1){var o=u.Ax(a);o!=a&&(n=u.Ny(o))}return n==-1&&(o=u.AK(a))!=a&&(n=u.Ny(o)),n},u.AQ=function(a){return u.Hw[a]!==void 0?u.Hw[a]:-1},u.xQ=function(a){u.zp===!1&&u.zt();var n=u.iF(a);if(n==1e38){var o=u.Ax(a);if(o!=a&&(n=u.iF(o)),n==1e38)return 1e-10}return n},u.US=function(a){if(u.Ks[a]!==void 0)return!0;var n=u.Ax(a);return n!=a&&u.Ks[n]!==void 0},u.WS=function(a){if(u.zo[a]!==void 0)return!0;var n=u.Ax(a);return n!=a&&u.zo[n]!==void 0},u.iF=function(a){return u.zp===!1&&u.zt(),u.Ks[a]!==void 0?u.Ks[a]:u.zo[a]!==void 0?u.zo[a]:1e38},u.AK=function(a){return u.zp===!1&&u.zt(),u.RA[a]!==void 0?u.RA[a]:a},u.Ax=function(a){return u.zp===!1&&u.zt(),u.SA[a]!==void 0?u.SA[a]:a},u.zt=function(){for(var a,n=C,o=0;o<n.pcsid.length;o+=2)u.zo[n.pcsid[o]]=n.pcstol[2*n.pcsid[o+1]+1];for(o=0;o<n.pcsidc.length;o+=1)for(var l=(a=n.pcsidc[o])[0];l<=a[1];l++)u.zo[l]=n.pcstol[2*a[2]+1];for(o=0;o<n.gcsid.length;o+=2)u.Ks[n.gcsid[o]]=n.gcstol[2*n.gcsid[o+1]+1];for(o=0;o<n.gcsidc.length;o+=1)for(l=(a=n.gcsidc[o])[0];l<=a[1];l++)u.zo[l]=n.gcstol[2*a[2]+1];for(o=0;o<w.c.length;o+=1)for(l=(a=w.c[o])[0];l<=a[1];l++)u.Hw[l]=a[2];for(o=0;o<w.nc.length;o+=2)u.Hw[w.nc[o]]=w.nc[o+1];for(w=null,o=0;o<n.newtoold.length;o+=2)u.RA[n.newtoold[o+1]]=n.newtoold[o],u.SA[n.newtoold[o]]=n.newtoold[o+1];C=null,u.zp=!0},u.zp=!1,u.Ks=[],u.zo=[],u.RA=[],u.SA=[],u.Hw=[],u}()}(U||(U={})),function(c){function C(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var w=[];c.SC=function(){function u(){}return u.zQ=function(a){try{for(var n=0;n<w.length;n++)if(w[n].wkttext===a)return w[n].unit;for(var o,l=n="",p=!1,d=0;d<a.length;d++){var y=a[d];p===!0?y=='"'?a[d+1]=='"'?n+=y:p=p=!1:n+=y:/[\s]/.test(y)||(y==","?(l=n!==""?l+(C(n)+","):l+",",n=""):y==")"||y=="]"?(l=n!==""?l+(C(n)+"]}"):l+"]}",n=""):y=="("||y=="["?(l+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):y=='"'?(p=!0,n=""):n+=y)}o=JSON.parse(l);var g=u.hF(o);if(g===null)return null;for(o=null,y=0;y<g.values.length;y++)if(typeof g.values[y]=="object"&&g.values[y].entity==="UNIT"){o=g.values[y];break}if(o===null)return null;var _=c.Uc.UO(g.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return w.push({wkttext:a,unit:_}),10<w.length&&w.shift(),_}catch{return null}},u.hF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var n=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];n.push(a.values[o])}for(a=0;a<n.length;a++)if((o=u.hF(n[a]))!==null)return o;return null},u.yQ=function(a){var n=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var l=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{l=parseFloat(a.substring(o,p))}catch{l=0}}0<l&&(n=.001/l)}else if(0<=(o=a.indexOf("GEOGCS"))){var d=0;if(l=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{d=parseFloat(a.substring(o,p))}catch{d=0}if(0<d&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{l=parseFloat(a.substring(o,p))}catch{l=0}}0<d&&0<l&&(n=.001/(d*l))}}return n},u}()}(U||(U={})),function(c){var C;(C=c.$K||(c.$K={}))[C.NONE=0]="NONE",C[C.LINEAR=1]="LINEAR",C[C.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(c.LL||(c.LL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(c.Kh||(c.Kh={}));var w=function(){function u(a,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.dg=n.dg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],a=n=0;a<this.Ba;a++)this.Xs[a]=n,n+=u.Wa(this.dg[a]);for(this.Qq=n,this.Be=[],a=0;a<this.Ba;a++){n=u.Wa(this.ld(a));for(var o=u.te(this.ld(a)),l=0;l<n;l++)this.Be[this.Xs[a]+l]=o}}else this.Qq=this.Ba=0}return u.prototype.ld=function(a){if(0>a||a>this.Ba)throw c.i.O();return this.dg[a]},u.prototype.Rf=function(a){return this.wh[a]},u.gz=function(a){return u.EM[a]},u.Vp=function(a){return u.NM[a]},u.Wa=function(a){return u.mM[a]},u.prototype.hasAttribute=function(a){return 0<=this.wh[a]},u.prototype.dG=function(){return this.hasAttribute(1)},u.te=function(a){return u.$C[a]},u.prototype.GR=function(a){return this.Xs[a]},u.yG=function(a,n){return u.$C[a]===n},u.prototype.Nb=function(a){return this===a},u.prototype.Cn=function(){for(var a=c.P.Vh(this.dg[0]),n=1;n<this.Ba;n++)a=c.P.Vh(this.dg[n],a);return a},u.prototype.bk=function(a){return this.Xs[a]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(a){return this.dg[a]},u.$C=[0,0,NaN,0,0,0,0,0,0],u.EM=[1,1,1,0,2,1,1,1,0],u.NM=[1,1,1,2,0,0,0,0,2],u.mM=[2,1,1,1,3,1,2,3,2],u}();c.sa=w}(U||(U={})),function(c){function C(p,d,y){var g=d-(p=new l(p)).e,_=p.c;for(_.length>++d&&w(p,g,l.gu),_[0]?y?g=d:(_=p.c,g=p.e+g+1):++g;_.length<g;_.push(0));return g=p.e,y===1||y&&(d<=g||g<=a)?(0>p.Cd&&_[0]?"-":"")+(1<_.length?_[0]+"."+_.join("").slice(1):_[0])+(0>g?"e":"e+")+g:p.toString()}function w(p,d,y,g){var _=p.c,M=p.e+d+1;if(y===1?g=5<=_[M]:y===2?g=5<_[M]||_[M]==5&&(g||0>M||_[M+1]!==void 0||1&_[M-1]):y===3?g=g||_[M]!==void 0||0>M:(g=!1,y!==0&&u("!Big.RM!")),1>M||!_[0])g?(p.e=-d,p.c=[1]):p.c=[p.e=0];else{if(_.length=M--,g)for(;9<++_[M];)_[M]=0,M--||(++p.e,_.unshift(1));for(M=_.length;!_[--M];_.pop());}return p}function u(p){throw(p=Error(p)).name="BigError",p}var a=-7,n=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function p(d){if(d instanceof p)this.Cd=d.Cd,this.e=d.e,this.c=d.c.slice();else{var y,g,_;for(d===0&&0>1/d?d="-0":o.test(d+="")||u(NaN),this.Cd=d.charAt(0)=="-"?(d=d.slice(1),-1):1,-1<(y=d.indexOf("."))&&(d=d.replace(".","")),0<(g=d.search(/e/i))?(0>y&&(y=g),y+=+d.slice(g+1),d=d.substring(0,g)):0>y&&(y=d.length),g=0;d.charAt(g)=="0";g++);if(g==(_=d.length))this.c=[this.e=0];else{for(;d.charAt(--_)=="0";);for(this.e=y-g-1,this.c=[],y=0;g<=_;this.c[y++]=+d.charAt(g++));}}}return p.prototype.abs=function(){var d=new p(this);return d.Cd=1,d},p.prototype.cmp=function(d){var y=this.c,g=(d=new p(d)).c,_=this.Cd,M=d.Cd,$=this.e,E=d.e;if(!y[0]||!g[0])return y[0]?_:g[0]?-M:0;if(_!=M)return _;if(d=0>_,$!=E)return $>(E^d)?1:-1;for(_=-1,M=($=y.length)<(E=g.length)?$:E;++_<M;)if(y[_]!=g[_])return y[_]>(g[_]^d)?1:-1;return $==E?0:$>(E^d)?1:-1},p.prototype.lm=function(d){var y=this.c,g=(d=new p(d)).c,_=this.Cd==d.Cd?1:-1,M=p.tr;if((M!==~~M||0>M||1e6<M)&&u("!Big.DP!"),!y[0]||!g[0])return y[0]==g[0]&&u(NaN),g[0]||u(_/0),new p(0*_);var $,E,k=g.slice(),P=$=g.length,F=y.length,D=y.slice(0,$),V=D.length,N=d,G=N.c=[],J=0,W=M+(N.e=this.e-d.e)+1;for(N.Cd=_,_=0>W?0:W,k.unshift(0);V++<$;D.push(0));do{for(E=0;10>E;E++){if($!=(V=D.length))var ee=$>V?1:-1;else{var Z=-1;for(ee=0;++Z<$;)if(g[Z]!=D[Z]){ee=g[Z]>D[Z]?1:-1;break}}if(!(0>ee))break;for(d=V==$?g:k;V;){if(D[--V]<d[V]){for(Z=V;Z&&!D[--Z];D[Z]=9);--D[Z],D[V]+=10}D[V]-=d[V]}for(;!D[0];D.shift());}G[J++]=ee?E:++E,D[0]&&ee?D[V]=y[P]||0:D=[y[P]]}while((P++<F||D[0]!==void 0)&&_--);return G[0]||J==1||(G.shift(),N.e--),J>W&&w(N,M,p.gu,D[0]!==void 0),N},p.prototype.aS=function(){return 0<this.cmp(0)},p.prototype.iT=function(){return 0>this.cmp(0)},p.prototype.kt=function(d){var y,g=this.Cd,_=(d=new p(d)).Cd;if(g!=_)return d.Cd=-_,this.oI(d);var M=this.c.slice(),$=this.e,E=d.c,k=d.e;if(!M[0]||!E[0])return E[0]?(d.Cd=-_,d):new p(M[0]?this:0);if(g=$-k){for((y=0>g)?(g=-g,$=M):(k=$,$=E),$.reverse(),_=g;_--;$.push(0));$.reverse()}else for($=((y=M.length<E.length)?M:E).length,g=_=0;_<$;_++)if(M[_]!=E[_]){y=M[_]<E[_];break}if(y&&($=M,M=E,E=$,d.Cd=-d.Cd),0<(_=($=E.length)-(y=M.length)))for(;_--;M[y++]=0);for(_=y;$>g;){if(M[--$]<E[$]){for(y=$;y&&!M[--y];M[y]=9);--M[y],M[$]+=10}M[$]-=E[$]}for(;M[--_]==0;M.pop());for(;M[0]==0;)M.shift(),--k;return M[0]||(d.Cd=1,M=[k=0]),d.c=M,d.e=k,d},p.prototype.oI=function(d){var y=this.Cd,g=(d=new p(d)).Cd;if(y!=g)return d.Cd=-g,this.kt(d);g=this.e;var _=this.c,M=d.e,$=d.c;if(!_[0]||!$[0])return $[0]?d:new p(_[0]?this:0*y);if(_=_.slice(),y=g-M){for(0<y?(M=g,g=$):(y=-y,g=_),g.reverse();y--;g.push(0));g.reverse()}for(0>_.length-$.length&&(g=$,$=_,_=g),y=$.length,g=0;y;)g=(_[--y]=_[y]+$[y]+g)/10|0,_[y]%=10;for(g&&(_.unshift(g),++M),y=_.length;_[--y]==0;_.pop());return d.c=_,d.e=M,d},p.prototype.pow=function(d){var y=this,g=new p(1),_=g,M=0>d;for((d!==~~d||-1e6>d||1e6<d)&&u("!pow!"),d=M?-d:d;1&d&&(_=_.nr(y)),d>>=1;)y=y.nr(y);return M?g.lm(_):_},p.prototype.round=function(d,y){var g=this;return d==null?d=0:(d!==~~d||0>d||1e6<d)&&u("!round!"),w(g=new p(g),d,y??p.gu),g},p.prototype.sqrt=function(){var d=this.c,y=this.Cd,g=this.e,_=new p("0.5");if(!d[0])return new p(this);0>y&&u(NaN),(y=Math.sqrt(this.toString()))==0||y==1/0?((y=d.join("")).length+g&1||(y+="0"),(d=new p(Math.sqrt(y).toString())).e=((g+1)/2|0)-(0>g||1&g)):d=new p(y.toString()),y=d.e+(p.tr+=4);do g=d,d=_.nr(g.oI(this.lm(g)));while(g.c.slice(0,y).join("")!==d.c.slice(0,y).join(""));return w(d,p.tr-=4,p.gu),d},p.prototype.nr=function(d){var y=this.c,g=(d=new p(d)).c,_=y.length,M=g.length,$=this.e,E=d.e;if(d.Cd=this.Cd==d.Cd?1:-1,!y[0]||!g[0])return new p(0*d.Cd);if(d.e=$+E,_<M){var k=y;y=g,g=k,E=_,_=M,M=E}for(k=Array(E=_+M);E--;k[E]=0);for($=M;$--;){for(M=0,E=_+$;E>$;)M=k[E]+g[$]*y[E-$-1]+M,k[E--]=M%10,M=M/10|0;k[E]=(k[E]+M)%10}for(M&&++d.e,k[0]||k.shift(),$=k.length;!k[--$];k.pop());return d.c=k,d},p.prototype.toString=function(){var d=this.e,y=this.c.join(""),g=y.length;if(d<=a||d>=n)y=y.charAt(0)+(1<g?"."+y.slice(1):"")+(0>d?"e":"e+")+d;else if(0>d){for(;++d;y="0"+y);y="0."+y}else if(0<d)if(++d>g)for(d-=g;d--;y+="0");else d<g&&(y=y.slice(0,d)+"."+y.slice(d));else 1<g&&(y=y.charAt(0)+"."+y.slice(1));return 0>this.Cd&&this.c[0]?"-"+y:y},p.prototype.toExponential=function(d){return d==null?d=this.c.length-1:(d!==~~d||0>d||1e6<d)&&u("!toExp!"),C(this,d,1)},p.prototype.toFixed=function(d){var y=a,g=n;if(a=-(n=1/0),d==null)var _=this.toString();else d===~~d&&0<=d&&1e6>=d&&(_=C(this,this.e+d),0>this.Cd&&this.c[0]&&0>_.indexOf("-")&&(_="-"+_));return a=y,n=g,_||u("!toFix!"),_},p.prototype.toPrecision=function(d){return d==null?this.toString():((d!==~~d||1>d||1e6<d)&&u("!toPre!"),C(this,d-1,2))},p.tr=20,p.gu=1,p}();c.jp=l}(U||(U={})),function(c){var C=function(){function w(u){this.lf=u}return w.prototype.qr=function(u,a,n){var o=new c.h,l=new c.h,p=this.lf;n.Wd(u,a,function(d,y){return p.uc(2*d,o),p.uc(2*y,l),o.compare(l)})},w.prototype.bq=function(u){return this.lf.read(2*u+1)},w}();c.si=function(){function w(){}return w.cq=function(u){if(u.B())return!1;var a=u.K();return a==1736?u.He()!=0:a==1607?(a=[!1],w.nE(u,!0,a),a[0]):!(a!=197&&(!c.ba.zd(a)||u.wG()))},w.im=function(u){var a=u.K();if(a==1736)return a=new c.Ua(u.description),u.B()||u.ZC(a),a;if(a==1607)return w.nE(u,!1,null);if(a==197)return a=new c.Ua(u.description),u.B()||a.bd(u,!1),a;if(c.ba.zd(a)){if(a=new c.ee(u.description),!u.B()&&!u.wG()){var n=new c.Ta;u.Vo(n),a.add(n),u.Ro(n),a.add(n)}return a}if(c.ba.Tn(a))return null;throw c.i.O()},w.nE=function(u,a,n){n!=null&&(n[0]=!1);var o=null;if(a||(o=new c.ee(u.description)),!u.B()){var l=new c.ja(0);l.Jb(2*u.ea());for(var p=0,d=u.ea();p<d;p++)if(0<u.Ka(p)&&!u.Pn(p)){var y=u.Ca(p);l.add(y),y=u.Wc(p)-1,l.add(y)}if(0<l.size){d=new c.Zt,p=u.vb(0),d.sort(l,0,l.size,new C(p)),d=new c.h,p.uc(2*l.get(0),d),y=0;for(var g=1,_=new c.Ta,M=new c.h,$=1,E=l.size;$<E;$++)if(p.uc(2*l.get($),M),M.rb(d))l.get(y)>l.get($)?(l.set(y,2147483647),y=$):l.set($,2147483647),g++;else{if(!(1&g))l.set(y,2147483647);else if(a)return n!=null&&(n[0]=!0),null;d.N(M),y=$,g=1}if(!(1&g))l.set(y,2147483647);else if(a)return n!=null&&(n[0]=!0),null;if(!a)for(l.Wd(0,l.size,function(k,P){return k-P}),$=0,E=l.size;$<E&&l.get($)!=2147483647;$++)u.we(l.get($),_),o.add(_)}}return a?null:o},w}()}(U||(U={})),function(c){var C=function(){function w(){this.zf=new c.ja(0),this.As=new c.ja(0),this.zH=1,this.Gs=NaN}return w.prototype.sort=function(u,a,n,o){if(32>n-a)o.qr(a,n,u);else{var l=!0;try{for(var p=1/0,d=-1/0,y=a;y<n;y++){var g=o.bq(u.get(y));g<p&&(p=g),g>d&&(d=g)}if(this.reset(n-a,p,d,n-a)){for(y=a;y<n;y++){var _=u.get(y);g=o.bq(_);var M=this.uF(g);this.zf.set(M,this.zf.get(M)+1),this.As.write(y-a,_)}var $=this.zf.get(0);this.zf.set(0,0),y=1;for(var E=this.zf.size;y<E;y++){var k=this.zf.get(y);this.zf.set(y,$),$+=k}for(y=a;y<n;y++){_=this.As.read(y-a),g=o.bq(_),M=this.uF(g);var P=this.zf.get(M);u.set(P+a,_),this.zf.set(M,P+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)o.qr(a,n,u);else{for(y=n=0,E=this.zf.size;y<E;y++)l=n,(n=this.zf.get(y))>l&&o.qr(a+l,a+n,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(u,a,n,o){return!(2>u||n==a)&&(u=Math.min(w.cL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.zH=a,this.As.resize(o),this.Gs=(n-a)/(u-1),!0)},w.prototype.uF=function(u){return c.P.truncate((u-this.zH)/this.Gs)},w.cL=65536,w}();c.Zt=C}(U||(U={})),function(c){var C,w;(w=C||(C={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var u=function(){function p(){}return p.Su=function(d,y,g,_,M,$){var E=new p;return E.Km=new c.h,E.Xm=new c.h,E.cw=new c.h,E.Km.N(d),E.Xm.N(y),E.cw.N(g),E.Eo=_,E.sh=M,E.uh=$,E},p.construct=function(d,y,g,_){var M=new p;return M.Km=new c.h,M.Xm=new c.h,M.cw=new c.h,M.Km.N(d),M.Xm.N(y),M.cw.Sc(),M.Eo=4,M.sh=g,M.uh=_,M},p}(),a=function(){function p(d,y,g,_,M,$){this.$v=null,this.za=0,this.zA=d,this.XH=this.VH=0,this.La=y,this.Oj=g,this.xk=_,this.Fq=M,this.Vb=$}return p.prototype.next=function(){for(var d=new c.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,d),this.za++,!d.B())break}var y=!1;if(this.$v==null&&(this.VH=d.Ng(),this.XH=d.kh(),this.$v=l.buffer(d,this.La,this.Oj,this.xk,this.Fq,this.Vb),y=!0),this.za<this.zA.I()){var g=new c.Ea;this.$v.copyTo(g)}else g=this.$v;if(!y){y=new c.Ed;var _=d.Ng()-this.VH;d=d.kh()-this.XH,y.ig(_,d),g.Pc(y)}return g},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),n=function(){function p(d,y){this.Xa=d,this.za=0,this.qq=y}return p.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var y=this.za;if(this.za++,!d.Pn(y))for(var g=d.Oa(d.Wc(y)-1);this.za<d.ea();){var _=d.Oa(d.Ca(this.za));if(d.Pn(this.za)||_!=g)break;g=d.Oa(d.Wc(this.za)-1),this.za++}if(this.za-y==1)return this.Xa.fE(this.Xa.Y,y,this.qq);for((g=new c.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,y,!0),y+=1;y<this.za;y++)g.Fr(this.Xa.Y,y,0,d.tv(y),!1);return this.Xa.fE(g,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),o=function(){function p(d){this.Xa=d,this.za=0}return p.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var y=this.za;for(d.Kr(this.za),this.za++;this.za<d.ea()&&!(0<d.Kr(this.za));)this.za++;return y==0&&this.za==d.ea()?this.Xa.ly(d,0,d.ea()):this.Xa.ly(d,y,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),l=function(){function p(d){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=d,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return p.buffer=function(d,y,g,_,M,$){if(d==null||0>_)throw c.i.O();if(d.B())return new c.Ea(d.description);var E=new c.l;return d.yc(E),0<y&&E.X(y,y),($=new p($)).Oj=g,$.Y=d,$.ra=c.ua.Xd(g,E,!0),$.dt=c.ua.Xd(null,E,!0),$.La=y,$.ET=d.K(),0>=M&&(M=96),$.sb=Math.abs($.La),$.Mv=$.sb!=0?1/$.sb:0,isNaN(_)||_==0?_=1e-5*$.sb:_>.5*$.sb&&(_=.5*$.sb),12>M&&(M=12),(d=Math.abs(y)*(1-Math.cos(Math.PI/M)))>_?_=d:(d=Math.PI/Math.acos(1-_/Math.abs(y)))<M-1&&12>(M=c.P.truncate(d))&&(M=12,_=Math.abs(y)*(1-Math.cos(Math.PI/M))),$.xk=_,$.Fq=M,$.oA=Math.min($.dt,.25*_),$.gE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var d=this.lE();d=c.P.truncate((d+3)/4);var y=.5*Math.PI/d;this.jA=y;for(var g=0;g<4*d;g++)this.Jd.push(null);var _=Math.cos(y);y=Math.sin(y);var M=c.h.construct(0,1);for(g=0;g<d;g++)this.Jd[g+0*d]=c.h.construct(M.y,-M.x),this.Jd[g+1*d]=c.h.construct(-M.x,-M.y),this.Jd[g+2*d]=c.h.construct(-M.y,M.x),this.Jd[g+3*d]=M,(M=c.h.construct(M.x,M.y)).Ct(_,y)},p.prototype.gE=function(){var d=this.Y.K();if(c.ba.zd(d))return(d=new c.Ua(this.Y.description)).pc(this.Y,!0),this.Y=d,this.gE();if(this.La<=this.ra){if(!c.ba.PS(d))return new c.Ea(this.Y.description);if(0>=this.La&&(d=new c.l,this.Y.A(d),d.S()<=2*-this.La||d.da()<=2*this.La))return new c.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw c.i.Ra()}},p.prototype.MN=function(){if(this.zG(this.Y)){var d=new c.Ta;this.Y.we(0,d);var y=new c.l;return this.Y.A(y),d.Db(y.tf()),this.Iu(d)}return this.Y=this.RV(this.Y),d=new n(this,this.qq),c.Ih.local().W(d,this.Oj,this.Vb).next()},p.prototype.LN=function(){if(this.La==0)return this.Y;var d=c.$l.local();if(this.ev(),this.Y=d.W(this.Y,null,!1,this.Vb),0>this.La){var y=this.Y;return y=this.ly(y,0,y.ea()),d.W(y,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(d=new c.Ta,this.Y.we(0,d),y=new c.l,this.Y.A(y),d.Db(y.tf()),this.Iu(d)):(d=new o(this),c.Ih.local().W(d,this.Oj,this.Vb).next())},p.prototype.ly=function(d,y,g){for(var _=new c.Ea(d.description);y<g;y++)if(!(1>d.Ka(y))){var M=d.Kr(y),$=new c.l;if(d.Tj(y,$),0<this.La){if(0<M)if(this.AG(d,y))M=new c.Ta,d.we(d.Ca(y),M),M.Db($.tf()),this.Au(_,M);else{var E=M=new c.Ua(d.description);E=c.au.EG(this.Y,y)||this.Bn(this.Y,y,E,!0,1)==2?this.eE(d,y):this.An(M),_.add(E,!1)}else if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(E=M=new c.Ua(d.description),this.Bn(this.Y,y,E,!0,1),M.B()))){var k=new c.l;for(k.L($),k.X(this.sb,this.sb),E.vp(k),$=1,M=(E=this.An(M)).ea();$<M;$++)_.addPath(E,$,!0)}}else if(0<M){if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(E=M=new c.Ua(d.description),this.Bn(this.Y,y,E,!0,-1),M.B())))for(k=new c.l,E.yc(k),k.X(this.sb,this.sb),E.vp(k),$=1,M=(E=this.An(M)).ea();$<M;$++)_.addPath(E,$,!0)}else for(E=M=new c.Ua(d.description),this.Bn(this.Y,y,E,!0,-1),$=0,M=(E=this.An(M)).ea();$<M;$++)_.addPath(E,$,!0)}if(0<this.La)return 1<_.ea()?_=this.An(_):p.kx(_);if(d=new c.l,_.yc(d),_.B())return p.kx(_);for(d.X(this.sb,this.sb),_.vp(d),_=this.An(_),d=new c.Ea(_.description),$=1,M=_.ea();$<M;$++)d.addPath(_,$,!1);return p.kx(d)},p.prototype.KN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(d){var y=new c.Ea(this.Y.description);return this.Au(y,d),this.oX(y)},p.prototype.JN=function(){var d=new a(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return c.Ih.local().W(d,this.Oj,this.Vb).next()},p.prototype.GN=function(){var d=new c.Ea(this.Y.description);if(0>=this.La){if(this.La==0)d.bd(this.Y,!1);else{var y=new c.Hh;this.Y.dn(y),y.X(this.La,this.La),d.bd(y,!1)}return d}return d.bd(this.Y,!1),this.Y=d,this.eE(d,0)},p.prototype.eE=function(d,y){this.ev();var g=new c.Ea(d.description),_=new c.h,M=new c.h,$=new c.h,E=new c.h,k=new c.h,P=new c.h,F=new c.h,D=new c.h,V=d.Ka(y),N=d.Ca(y),G=0;for(y=d.Ka(y);G<y;G++){if(d.D(N+G,M),d.D(N+(G+1)%V,E),d.D(N+(G+2)%V,P),F.vc(E,M),F.length()==0||(F.Jv(),F.normalize(),F.scale(this.sb),_.add(F,M),$.add(F,E),G==0?g.Nt(_):g.Ei(_),g.Ei($),D.vc(P,E),D.length()==0))throw c.i.Ra();D.Jv(),D.normalize(),D.scale(this.sb),k.add(D,E),this.BD(g,E,$,k,!1)}return p.kx(g)},p.prototype.fE=function(d,y,g){if(this.ev(),1>d.Ka(y))return null;if(this.AG(d,y)&&0<this.La){g=new c.Ta,d.we(d.Ca(y),g);var _=new c.l;return d.Tj(y,_),g.Db(_.tf()),this.Iu(g)}if(_=new c.Ua(d.description),d.Pn(y))this.Bn(d,y,_,g,1),this.Bn(d,y,_,g,-1);else{var M=new c.Ua(d.description);M.addPath(d,y,!1),M.Fr(d,y,0,d.tv(y),!1),this.Bn(M,0,_,g,1)}return this.An(_)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw c.i.hu("user_canceled")},p.prototype.An=function(d){return c.Hg.Ok(d,this.dt,!0,!0,this.Vb)},p.prototype.lE=function(){if(this.xk==0)return this.Fq;var d=1-this.xk*Math.abs(this.Mv);return 4>(d=-1>d?4:2*Math.PI/Math.acos(d)+.5)?d=4:d>this.Fq&&(d=this.Fq),c.P.truncate(d)},p.prototype.BD=function(d,y,g,_,M){this.ev();var $=new c.h;$.vc(g,y),$.scale(this.Mv);var E=new c.h;E.vc(_,y),E.scale(this.Mv),0>($=Math.atan2($.y,$.x)/this.jA)&&($=this.Jd.length+$),$=this.Jd.length-$,0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),(E=this.Jd.length-E)<$&&(E+=this.Jd.length);var k=c.P.truncate(E);E=c.P.truncate(Math.ceil($)),($=new c.h).N(this.Jd[E%this.Jd.length]),$.Dt(this.sb,y);var P=10*this.ra;for($.sub(g),$.length()<P&&(E+=1),$.N(this.Jd[k%this.Jd.length]),$.Dt(this.sb,y),$.sub(_),$.length()<P&&--k,g=k-E,g++,k=0,E%=this.Jd.length;k<g;k++,E=(E+1)%this.Jd.length)$.N(this.Jd[E]),$.Dt(this.sb,y),d.Ei($),this.Zq();M&&d.Ei(_)},p.prototype.Bn=function(d,y,g,_,M){var $=new c.hd,E=$.hN(d,y);if($.Ip(this.oA,!1,!1),2>$.I(E))return 0>M||(M=d,$=new c.Ta,M.we(M.Ca(y),$),this.Au(g,$)),1;var k=$.Oa($.Ya($.Ob(E))),P=new c.Ed;if(P.ig(-k.x,-k.y),$.Pc(P),_&&(this.oQ($,E,M),2>$.I(E)))return 0>M||(M=d,$=new c.Ta,M.we(M.Ca(y),$),this.Au(g,$)),1;this.$d.length=0;var F=$.Ob(E);y=$.Ya(F);var D=M==1?$.Na(y):$.V(y);d=M==1?$.V(y):$.Na(y);var V=!0;_=new c.h,E=new c.h;var N=new c.h,G=new c.h,J=new c.h,W=new c.h,ee=new c.h,Z=new c.h,ae=new c.h,de=new c.h,ce=this.sb;F=$.Ka(F);for(var Ae=0;Ae<F;Ae++)$.D(d,E),V&&($.D(y,_),$.D(D,N),Z.vc(_,N),Z.normalize(),de.HG(Z),de.scale(ce),G.add(de,_)),ee.vc(E,_),ee.normalize(),ae.HG(ee),ae.scale(ce),J.add(_,ae),D=Z.yi(ee),V=Z.Sh(ee),0>D||0>V&&D==0?this.$d.push(u.Su(G,J,_,2,this.$d.length+1,this.$d.length-1)):G.rb(J)||(this.$d.push(u.construct(G,_,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(_,J,this.$d.length+1,this.$d.length-1,"dummy"))),W.add(E,ae),this.$d.push(u.Su(J,W,_,1,this.$d.length+1,this.$d.length-1)),G.N(W),de.N(ae),N.N(_),_.N(E),Z.N(ee),D=y,y=d,V=!1,d=M==1?$.V(y):$.Na(y);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(g),P.ig(k.x,k.y),g.TD(P,g.ea()-1),1},p.prototype.TV=function(d){for(var y=this.uO(),g=!0,_=y+1,M=y;_!=y;M=_){var $=this.$d[M];_=$.sh!=-1?$.sh:(M+1)%this.$d.length,$.Eo!=0&&(g&&d.Nt($.Km),$.Eo==2?this.BD(d,$.cw,$.Km,$.Xm,!0):d.Ei($.Xm),g=!1)}},p.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var d=0,y=0,g=this.$d.length;y<g;){var _=this.$d[y];if(3&_.Eo){d=y;break}y=_.sh}for(g=d+1,y=d;g!=d;y=g){g=(_=this.$d[y]).sh;for(var M=1,$=null;g!=y&&!(3&($=this.$d[g]).Eo);)g=$.sh,M++;M!=1&&(_.Eo&$.Eo)==1&&(this.Ns==null&&(this.Ns=new c.zb,this.nw=new c.zb),this.Ns.Ec(_.Km),this.Ns.Rc(_.Xm),this.nw.Ec($.Km),this.nw.Rc($.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(_.Xm.N(this.Ms[0]),$.Km.N(this.Ms[0]),_.sh=g,$.uh=y))}return d},p.prototype.Hv=function(d,y,g){var _=new c.h;if(_.vc(g,d),g=_.length(),0<(g=this.sb*this.sb-g*g*.25)){g=Math.sqrt(g),_.normalize(),_.cr();var M=new c.h;if(M.vc(y,d),M.Sh(_)+g>=this.sb)return!0}return!1},p.prototype.oQ=function(d,y,g){for(var _=0;1>_;_++){var M=!1,$=d.Ob(y),E=d.Ka($);if(E==0)break;var k=E;if(3>E)break;!d.ec($)&&(k=E-1),$=d.Ya($),E=0<g?d.Na($):d.V($);for(var P=0<g?d.V($):d.Na($),F=E,D=!0,V=new c.h,N=new c.h,G=new c.h,J=new c.h,W=new c.h,ee=c.h.construct(0,0),Z=new c.h,ae=new c.h,de=new c.h,ce=new c.h,Ae=this.sb,be=0,Je=0;Je<k&&(d.D(P,N),D&&(d.D($,V),d.D(E,G),F=E),ae.vc(V,G),ae.normalize(),Z.vc(N,V),Z.normalize(),F!=P);){var Ve=ae.yi(Z),Ie=ae.Sh(Z),qt=!0;if(0>Ve||0>Ie&&Ve==0||!this.Hv(G,V,N)||(ee.N(N),qt=!1,++be,M=!0),qt){if(0<be)for(;(Ve=0<g?d.Na(F):d.V(F))!=$;){if(d.D(Ve,J),!this.Hv(J,G,ee)){Ve!=P&&this.Hv(J,G,N)&&this.Hv(J,V,N)&&(G.N(J),F=Ve,qt=!1,++be);break}G.N(J),F=Ve,qt=!1,++be}if(!qt)continue;if(0<be){for(F=0<g?d.Na(E):d.V(E),D=1;D<be;D++)qt=0<g?d.Na(F):d.V(F),d.qd(F,!0),F=qt;de.vc(V,G),be=Ae*Ae-(be=de.length())*be*.25,Ae-(be=Math.sqrt(be))>.5*this.xk?(W.add(G,V),W.scale(.5),de.normalize(),de.cr(),ce.N(de),ce.scale(Ae-be),W.add(ce),d.mf(E,W)):d.qd(E,!0),be=0}G.N(V),F=$}V.N(N),E=$,$=P,P=0<g?d.V($):d.Na($),Je++,D=!1}if(0<be){for(F=0<g?d.Na(E):d.V(E),D=1;D<be;D++)qt=0<g?d.Na(F):d.V(F),d.qd(F,!0),F=qt;W.add(G,V),W.scale(.5),de.vc(V,G),be=Ae*Ae-(be=de.length())*be*.25,be=Math.sqrt(be),de.normalize(),de.cr(),ce.N(de),ce.scale(Ae-be),W.add(ce),d.mf(E,W)}if(d.Ip(this.oA,!1,!1),!M)break}},p.prototype.AG=function(d,y){if(d.Ka(y)==1)return!0;var g=new c.l;return d.Tj(y,g),Math.max(g.S(),g.da())<.5*this.xk},p.prototype.zG=function(d){var y=new c.l;return d.A(y),Math.max(y.S(),y.da())<.5*this.xk},p.prototype.RV=function(d){for(var y=0,g=0,_=(d=c.zC.local().W(d,.25*this.xk,!1,this.Vb)).ea();g<_;g++)y=Math.max(d.Ka(g),y);return 32>y?(this.qq=!1,d):(this.qq=!0,c.Hg.Ok(d,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(d,y){if(y=y.D(),this.Jd!=null&&this.Jd.length!==0){var g=new c.h;g.N(this.Jd[0]),g.Dt(this.sb,y),d.Nt(g);for(var _=1,M=this.Jd.length;_<M;_++)g.N(this.Jd[_]),g.Dt(this.sb,y),d.Ei(g)}else{_=this.lE(),g=c.P.truncate((_+3)/4),_=.5*Math.PI/g,M=Math.cos(_);for(var $=Math.sin(_),E=new c.h,k=3;0<=k;k--){switch(E.na(0,this.sb),k){case 0:for(_=0;_<g;_++)d.Aj(E.x+y.x,E.y+y.y),E.Ct(M,$);break;case 1:for(_=0;_<g;_++)d.Aj(-E.y+y.x,E.x+y.y),E.Ct(M,$);break;case 2:for(_=0;_<g;_++)d.Aj(-E.x+y.x,-E.y+y.y),E.Ct(M,$);break;default:for(d.rx(E.y+y.x,-E.x+y.y),_=1;_<g;_++)E.Ct(M,$),d.Aj(E.y+y.x,-E.x+y.y)}this.Zq()}}},p.kx=function(d){return d.Eh(1,0),d},p.prototype.oX=function(d){return d.Eh(2,this.ra),d.hm(),d},p}();c.CK=l}(U||(U={})),function(c){var C=function(){function w(u){this.Da=u,this.g=new c.hd,this.ed=new c.ja(0)}return w.prototype.Nh=function(u,a,n){switch(a){case 0:if(u.v<n&&u.C<=n)break;return u.v>=n?1:-1;case 1:if(u.G<n&&u.H<=n)break;return u.G>=n?1:-1;case 2:if(u.v>=n&&u.C>n)break;return u.C<=n?1:-1;case 3:if(!(u.G>=n&&u.H>n))return u.H<=n?1:-1}return 0},w.prototype.vy=function(u,a){return u.K()==1736?this.xy(u,a):this.yy(u)},w.prototype.xy=function(u,a){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var n=new c.l;u.yc(n),this.Y=this.g.Ib(u);var o=new c.l,l=new c.l,p=new c.h,d=new c.h,y=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new c.jg;var _=new c.zb,M=new c.ja(0);M.Jb(Math.min(100,u.I()));for(var $=!1,E=0;!$&&4>E;E++){var k=!1,P=(1&E)!=0,F=0;switch(E){case 0:F=this.Da.v,k=n.v<=F&&n.C>=F;break;case 1:F=this.Da.G,k=n.G<=F&&n.H>=F;break;case 2:F=this.Da.C,k=n.v<=F&&n.C>=F;break;case 3:F=this.Da.H,k=n.G<=F&&n.H>=F}if(k)for($=!0,k=this.g.Ob(this.Y);k!=-1;){var D=-1,V=-1,N=this.g.Ya(k),G=N;do{var J=this.g.cc(G);J==null&&(J=_,this.g.D(G,p),J.Ec(p),this.g.D(this.g.V(G),d),J.Rc(d)),J.A(o);var W=this.Nh(o,E,F),ee=0,Z=-1;if(W==-1){ee=0<(J=J.fq(P,F,y,g))?this.g.Wl(G,g,J):0,ee+=1;var ae=G,de=this.g.V(ae);for(J=0;J<ee;J++){if(this.g.D(ae,p),this.g.D(de,d),(Z=this.g.cc(ae))==null&&((Z=_).Ec(p),Z.Rc(d)),Z.A(l),(Z=this.Nh(l,E,F))==-1){if(P)(Z=Math.abs(p.y-F))<(ce=Math.abs(d.y-F))?(p.y=F,this.g.mf(ae,p)):(d.y=F,this.g.mf(de,d));else{Z=Math.abs(p.x-F);var ce=Math.abs(d.x-F);Z<ce?(p.x=F,this.g.mf(ae,p)):(d.x=F,this.g.mf(de,d))}(Z=this.g.cc(ae))==null&&((Z=_).Ec(p),Z.Rc(d)),Z.A(l),Z=this.Nh(l,E,F)}ce=D,D=Z,V==-1&&(V=D),ce==0&&D==1||ce==1&&D==0||ce!=0||D!=0||M.add(ae),D==1&&($=!1),Z=ae=de,de=this.g.V(de)}}ee==0&&(ce=D,D=W,V==-1&&(V=D),ce==0&&D==1||ce==1&&D==0||ce!=0||D!=0||M.add(G),D==1&&($=!1),Z=this.g.V(G)),G=Z}while(G!=N);for(V==0&&D==0&&M.add(N),J=0,D=M.size;J<D;J++)V=M.get(J),this.g.qd(V,!1);M.clear(!1),k=3>this.g.Ka(k)?this.g.ar(k):this.g.Sb(k)}}return $?u.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(u){var a=new c.l,n=new c.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],p=new c.jg,d=u,y=new c.l;u.yc(y);for(var g=0;4>g;g++){var _=!1,M=(1&g)!=0,$=0;switch(g){case 0:$=this.Da.v,_=y.v<=$&&y.C>=$;break;case 1:$=this.Da.G,_=y.G<=$&&y.H>=$;break;case 2:$=this.Da.C,_=y.v<=$&&y.C>=$;break;case 3:$=this.Da.H,_=y.G<=$&&y.H>=$}if(_){_=d,d=u.Ja(),(_=_.Ha()).aj();for(var E,k=new c.h;_.ab();)for(var P,F=!0;_.Ia();){var D=_.ia();D.A(a);var V=this.Nh(a,g,$);if(V==-1){if(0<(V=D.fq(M,$,o,l))){var N=0;E=D.bc();for(var G=0;G<=V;G++)if(N!=(P=G<V?l[G]:1)){D.dh(N,P,p);var J=p.get();J.Ec(E),G<V&&(M?(k.x=o[G],k.y=$):(k.x=$,k.y=o[G]),J.Rc(k)),J.A(n);var W=this.Nh(n,g,$);if(W==-1){if(E=J.bc(),N=J.xc(),M)(W=Math.abs(E.y-$))<(ee=Math.abs(N.y-$))?(E.y=$,J.Ec(E)):(N.y=$,J.Rc(N));else{W=Math.abs(E.x-$);var ee=Math.abs(N.x-$);W<ee?(E.x=$,J.Ec(E)):(N.x=$,J.Rc(N))}J.A(n),W=this.Nh(n,g,$)}E=J.xc(),N=P,(P=W)==1?(d.pc(J,F),F=!1):F=!0}}}else(P=V)==1?(d.pc(D,F),F=!1):F=!0}}}return d},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++,n=this.g.V(n))this.g.D(n,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(u){for(var a=new c.h,n=new c.h,o=c.P.mg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var p=this.g.Ya(l),d=p;do{var y=this.g.V(d);this.g.D(d,a);var g=-1;if(a.x==this.Da.v?(this.g.D(y,n),n.x==this.Da.v&&(g=1)):a.x==this.Da.C&&(this.g.D(y,n),n.x==this.Da.C&&(g=1)),a.y==this.Da.G?(this.g.D(y,n),n.y==this.Da.G&&(g=0)):a.y==this.Da.H&&(this.g.D(y,n),n.y==this.Da.H&&(g=0)),g!=-1&&(g=c.h.ub(a,n),!(1>=(g=c.P.truncate(Math.min(Math.ceil(g/u),2048)))))){for(var _=1;_<g;_++)o[_-1]=1*_/g;this.g.Wl(d,o,g-1)}d=y}while(d!=p)}},w.prototype.Xl=function(u,a){var n=this.g.Hd(),o=new c.h,l=new c.ja(0);l.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var d=this.g.Ya(p),y=0,g=this.g.Ka(p);y<g;y++){var _=this.g.V(d);this.g.D(d,o),(u?o.y==a:o.x==a)&&(this.g.D(_,o),(u?o.y==a:o.x==a)&&(this.g.Qa(d,n)!=1&&(l.add(d),this.g.Sa(d,n,1)),this.g.Qa(_,n)!=1&&(l.add(_),this.g.Sa(_,n,1)))),d=_}if(this.g.Ud(n),!(3>l.size)){var M=this;l.Wd(0,l.size,function(W,ee){return M.Oh(W,ee)}),n=new c.h,p=new c.h,d=new c.h,p.Sc();var $=-1;y=new c.ja(0),g=new c.ja(0),_=this.g.Hd();for(var E=this.g.Hd(),k=0,P=l.size;k<P;k++){var F=l.get(k);if(this.g.D(F,o),!o.rb(p)){if($!=-1){for(var D=$;D<k;D++){$=l.get(D);var V=this.g.V($);F=this.g.Na($);var N=!1;0>this.Oh($,V)&&(this.g.D(V,n),u?n.y==a:n.x==a)&&(y.add($),N=!0,this.g.Sa($,E,1)),0>this.Oh($,F)&&(this.g.D(F,n),u?n.y==a:n.x==a)&&(N||y.add($),this.g.Sa($,_,1))}for(D=0,N=y.size;D<N;D++){if($=y.get(D),F=this.g.Qa($,_),V=this.g.Qa($,E),F==1){F=this.g.Na($),this.g.D(F,d);var G=[0];if(G[0]=0,!d.rb(o)){var J=c.h.ub(p,d);G[0]=c.h.ub(d,o)/J,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(F,G,1),F=this.g.Na($),this.g.mf(F,o),g.add(F),this.g.Sa(F,_,1),this.g.Sa(F,E,-1)}}V==1&&(V=this.g.V($),this.g.D(V,d),(G=[0])[0]=0,d.rb(o)||(J=c.h.ub(p,d),G[0]=c.h.ub(p,o)/J,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl($,G,1),F=this.g.V($),this.g.mf(F,o),g.add(F),this.g.Sa(F,_,-1),this.g.Sa(F,E,1)))}$=y,y=g,(g=$).clear(!1)}$=k,p.N(o)}}this.g.Ud(_),this.g.Ud(E)}},w.prototype.Pl=function(u,a){var n=new c.h,o=new c.ja(0);o.Jb(100);for(var l=this.g.Hd(),p=0,d=this.ed.size;p<d;p++){var y=this.ed.get(p);if(y!=-1){var g=this.g.V(y);this.g.D(y,n),(u?n.y==a:n.x==a)&&(this.g.D(g,n),(u?n.y==a:n.x==a)&&(this.g.Qa(y,l)!=-2&&(o.add(y),this.g.Sa(y,l,-2)),this.g.Qa(g,l)!=-2&&(o.add(g),this.g.Sa(g,l,-2))))}}if(o.size!=0){var _=this;for(o.Wd(0,o.size,function(ee,Z){return _.Oh(ee,Z)}),p=0,d=o.size;p<d;p++){var M=o.get(p);this.g.Sa(M,l,p)}y=new c.h,(g=new c.h).Sc();var $=-1;for(p=0,d=o.size;p<d;p++)if((M=o.get(p))!=-1&&(this.g.D(M,n),!n.rb(g))){if($!=-1)for(;;){M=!1;for(var E=1<p-$?p-1:p,k=$;k<E;k++){var P=o.get(k);if(P!=-1){var F=-1,D=this.g.V(P);0>this.Oh(P,D)&&(this.g.D(D,y),u?y.y==a:y.x==a)&&(F=D),D=-1;var V=this.g.Na(P);if(0>this.Oh(P,V)&&(this.g.D(V,y),u?y.y==a:y.x==a)&&(D=V),F!=-1&&D!=-1)this.Mh(P,o,l),this.g.qd(P,!1),this.Mh(F,o,l),this.g.qd(F,!1),M=!0;else if(F!=-1||D!=-1){for(V=k+1;V<p;V++){var N=o.get(V);if(N!=-1){var G=this.g.V(N),J=-1;0>this.Oh(N,G)&&(this.g.D(G,y),u?y.y==a:y.x==a)&&(J=G),G=this.g.Na(N);var W=-1;if(0>this.Oh(N,G)&&(this.g.D(G,y),u?y.y==a:y.x==a)&&(W=G),J!=-1&&W!=-1){this.Mh(N,o,l),this.g.qd(N,!1),this.Mh(J,o,l),this.g.qd(J,!1),M=!0;break}if(F!=-1&&W!=-1){this.At(o,P,F,N,W,l),M=!0;break}if(D!=-1&&J!=-1){this.At(o,N,J,P,D,l),M=!0;break}}}if(M)break}}}if(!M)break}$=p,g.N(n)}}this.g.Ud(l)},w.prototype.Mh=function(u,a,n){n=this.g.Qa(u,n),a.set(n,-1),n=this.g.Qa(u,this.li),this.ed.set(n,-1),(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(u,a,n,o,l,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,l),this.g.Cc(l,n),this.Mh(o,u,p),this.g.oi(o,!1),this.Mh(l,u,p),this.g.oi(l,!0)},w.prototype.Oy=function(){for(var u=0,a=this.ed.size;u<a;u++){var n=this.ed.get(u);n!=-1&&this.g.cj(n,-1)}for(var o=0,l=0,p=this.g.Ob(this.Y);p!=-1;){var d=this.g.Ya(p);if(d==-1||p!=this.g.cd(d)){var y=p;p=this.g.Sb(p),this.g.Kf(y,-1),this.g.br(y)}else{n=d,y=0;do this.g.cj(n,p),y++,n=this.g.V(n);while(n!=d);2>=y?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.qd(d,!1),y==2&&(n=this.g.Qa(d,this.li),this.ed.set(n,-1),this.g.qd(d,!1)),y=p,p=this.g.Sb(p),this.g.Kf(y,-1),this.g.br(y)):(this.g.fp(p,!1),this.g.Yg(p,this.g.Na(d)),this.g.Xj(p,y),l+=y,o++,p=this.g.Sb(p))}}for(u=0,a=this.ed.size;u<a;u++)if((n=this.ed.get(u))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),y=0,d=n;do this.g.cj(n,p),y++,n=this.g.V(n);while(n!=d);2>=y?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.qd(d,!1),y==2&&(0<=(n=this.g.Qa(d,this.li))&&this.ed.set(n,-1),this.g.qd(d,!1)),y=p,this.g.Kf(y,-1),this.g.br(y)):(this.g.mn(p,!0),this.g.Xj(p,y),this.g.Kf(p,d),this.g.Yg(p,this.g.Na(d)),this.g.fp(p,!1),l+=y,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,l),u=0,a=this.g.md;a!=-1;a=this.g.ve(a))u+=this.g.I(a);this.g.XB(u)},w.wy=function(u,a,n){return new w(a).vy(u,n)},w.clip=function(u,a,n,o){if(u.B())return u;if(a.B())return u.Ja();if((n=u.K())==33)return o=u.D(),a.contains(o)?u:u.Ja();if(n==197)return o=new c.l,u.A(o),o.Fa(a)?(a=new c.Hh,u.copyTo(a),a.Zo(o),a):u.Ja();var l=new c.l;if(u.yc(l),a.contains(l))return u;if(!a.isIntersecting(l))return u.Ja();if((l=u.Cb)!=null&&(l=l.Hk)!=null){if((l=l.To(a))==1){if(n!=1736)throw c.i.Ra();return(u=new c.Ea(u.description)).vp(a),u}if(l==0)return u.Ja()}switch(n){case 550:n=null,l=u.I();for(var p=u.vb(0),d=0,y=0;y<l;y++)o=new c.h,p.uc(2*y,o),a.contains(o)||(d==0&&(n=u.Ja()),d<y&&n.Gd(u,d,y),d=y+1);return 0<d&&n.Gd(u,d,l),d==0?u:n;case 1736:case 1607:return w.wy(u,a,o);default:throw c.i.Ra()}},w.prototype.Oh=function(u,a){var n=new c.h;return this.g.D(u,n),u=new c.h,this.g.D(a,u),n.compare(u)},w}();c.Vd=C}(U||(U={})),function(c){var C=function(){function w(u,a){this.Da=u,this.g=new c.hd,this.ed=new c.ja(0),this.od=a}return w.prototype.Nh=function(u,a,n){switch(a){case 0:if(u.v<n&&u.C<=n)break;return u.v>=n?1:-1;case 1:if(u.G<n&&u.H<=n)break;return u.G>=n?1:-1;case 2:if(u.v>=n&&u.C>n)break;return u.C<=n?1:-1;case 3:if(!(u.G>=n&&u.H>n))return u.H<=n?1:-1}return 0},w.prototype.vy=function(u,a){return u.K()==1736?this.xy(u,a):this.yy(u)},w.prototype.xy=function(u,a){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var n=new c.l;u.yc(n),this.Y=this.g.Ib(u);var o=new c.l,l=new c.l,p=new c.h,d=new c.h,y=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],_=new c.zb,M=new c.ja(0);M.Jb(256);for(var $=!1,E=0;!$&&4>E;E++){var k=!1,P=(1&E)!=0,F=0;switch(E){case 0:F=this.Da.v,k=n.v<=F&&n.C>=F;break;case 1:F=this.Da.G,k=n.G<=F&&n.H>=F;break;case 2:F=this.Da.C,k=n.v<=F&&n.C>=F;break;case 3:F=this.Da.H,k=n.G<=F&&n.H>=F}if(k)for($=!0,k=this.g.Ob(this.Y);k!=-1;){var D=!0,V=-1,N=-1,G=this.g.Ya(k),J=G;do{var W=this.g.cc(J);W==null&&(W=_,this.g.D(J,p),W.Ec(p),this.g.D(this.g.V(J),d),W.Rc(d)),W.A(o);var ee=this.Nh(o,E,F),Z=0,ae=-1;if(ee==-1){Z=0<(W=W.fq(P,F,y,g))?this.g.HX(J,g,W):0,Z+=1;var de=J,ce=this.g.V(de);for(W=0;W<Z;W++){if(this.g.D(de,p),this.g.D(ce,d),(ae=this.g.cc(de))==null&&((ae=_).Ec(p),ae.Rc(d)),ae.A(l),(ae=this.Nh(l,E,F))==-1){if(P)(ae=Math.abs(p.y-F))<(Ae=Math.abs(d.y-F))?(p.y=F,this.g.mf(de,p)):(d.y=F,this.g.mf(ce,d));else{ae=Math.abs(p.x-F);var Ae=Math.abs(d.x-F);ae<Ae?(p.x=F,this.g.mf(de,p)):(d.x=F,this.g.mf(ce,d))}(ae=this.g.cc(de))==null&&((ae=_).Ec(p),ae.Rc(d)),ae.A(l),ae=this.Nh(l,E,F)}Ae=V,V=ae,N==-1&&(N=V),Ae==0&&V==1||Ae==1&&V==0||Ae!=0||V!=0||M.add(de),V==1&&(D=$=!1),ae=de=ce,ce=this.g.V(ce)}}if(Z==0&&(Ae=V,V=ee,N==-1&&(N=V),Ae==0&&V==1||Ae==1&&V==0||Ae!=0||V!=0||M.add(J),V==1&&(D=$=!1),ae=this.g.V(J)),J=ae,256<=M.size){for(W=1,ee=M.size-1;W<ee;W++)Z=M.get(W),this.g.qd(Z,!1);M.set(1,M.Gc()),M.Dh(2)}}while(J!=G);if(!D)for(N==0&&V==0&&M.add(G),W=0,ee=M.size;W<ee;W++)Z=M.get(W),this.g.qd(Z,!1);M.clear(!1),k=D||this.g.Ka(k)==0?this.g.ar(k):this.g.Sb(k)}}return $?u.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(u){var a=new c.l,n=new c.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],p=new c.jg,d=u,y=new c.l;u.yc(y);for(var g=new c.h,_=new c.h,M=null,$=null,E=0;4>E;E++){var k=!1,P=(1&E)!=0,F=0;switch(E){case 0:F=this.Da.v,k=y.v<=F&&y.C>=F;break;case 1:F=this.Da.G,k=y.G<=F&&y.H>=F;break;case 2:F=this.Da.C,k=y.v<=F&&y.C>=F;break;case 3:F=this.Da.H,k=y.G<=F&&y.H>=F}if(k)for(k=d,d=u.Ja(),(k=k.Ha()).aj();k.ab();)for(var D,V=!0;k.Ia();){var N=k.ia();N.A(a);var G=this.Nh(a,E,F);if(G==-1){if(0<(G=N.fq(P,F,o,l))){var J=0;N.$p(g);for(var W=0;W<=G;W++)if(J!=(D=W<G?l[W]:1)){N.dh(J,D,p);var ee=p.get();ee.Ec(g),W<G&&(P?(_.x=o[W],_.y=F):(_.x=F,_.y=o[W]),ee.Rc(_)),ee.A(n);var Z=this.Nh(n,E,F);Z==-1&&(M==null&&(M=new c.h),$==null&&($=new c.h),ee.$p(M),ee.Vr($),P?(J=Math.abs(M.y-F))<(Z=Math.abs($.y-F))?(M.y=F,ee.Ec(M)):($.y=F,ee.Rc($)):(J=Math.abs(M.x-F))<(Z=Math.abs($.x-F))?(M.x=F,ee.Ec(M)):($.x=F,ee.Rc($)),ee.A(n),Z=this.Nh(n,E,F)),ee.Vr(g),J=D,(D=Z)==1?(d.pc(ee,V),V=!1):V=!0}}}else(D=G)==1?(d.pc(N,V),V=!1):V=!0}}return d},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++,n=this.g.V(n))this.g.D(n,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(u){for(var a=new c.h,n=new c.h,o=null,l=null,p=c.P.mg(2048,0),d=this.g.Ob(this.Y);d!=-1;d=this.g.Sb(d)){var y=this.g.Ya(d),g=y;do{var _=this.g.V(g);this.g.D(g,a);var M=-1;if(a.x==this.Da.v?(this.g.D(_,n),n.x==this.Da.v&&(M=1)):a.x==this.Da.C&&(this.g.D(_,n),n.x==this.Da.C&&(M=1)),a.y==this.Da.G?(this.g.D(_,n),n.y==this.Da.G&&(M=0)):a.y==this.Da.H&&(this.g.D(_,n),n.y==this.Da.H&&(M=0)),M!=-1){if(o==null&&(o=new c.h),l==null&&(l=new c.h),o.N(a),l.na(0,0),M==0){var $=a.x-this.Da.v;l.x=c.mc.sign(n.x-a.x),o.x=u*c.mc.En(Math.floor(Math.abs($/u)),$)+this.Da.v,0>o.x&&(o.x+=u)}else $=a.y-this.Da.G,l.y=c.mc.sign(n.y-a.y),o.y=u*c.mc.En(Math.floor(Math.abs($/u)),$)+this.Da.G,0>o.y&&(o.y+=u);$=M!=0?n.y-a.y:n.x-a.x;var E=Math.abs($);if(65536<E/u)throw c.i.ga("internal error");if(0<E){E=c.P.truncate(E/u)+2,p.length<E&&(p=c.P.mg(E));for(var k=E=0;;k++){var P=new c.h;if(P.x=o.x+l.x*k*u,P.y=o.y+l.y*k*u,1<=(P=(M!=0?P.y-a.y:P.x-a.x)/$))break;0>=P||(p[E]=P,E++)}E!=0&&this.g.Wl(g,p,E)}}g=_}while(g!=y)}},w.prototype.Xl=function(u,a){for(var n=-1,o=new c.h,l=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var d=this.g.Ya(p),y=0,g=this.g.Ka(p);y<g;y++){var _=this.g.V(d);this.g.D(d,o),(u?o.y==a:o.x==a)&&(this.g.D(_,o),(u?o.y==a:o.x==a)&&(n==-1&&(n=this.g.Hd()),l==null&&(l=new c.ja(0)).Jb(100),this.g.Qa(d,n)!=1&&(l.add(d),this.g.Sa(d,n,1)),this.g.Qa(_,n)!=1&&(l.add(_),this.g.Sa(_,n,1)))),d=_}if(n!=-1&&this.g.Ud(n),!(l==null||3>l.size)){var M=this;l.Wd(0,l.size,function(W,ee){return M.Oh(W,ee)}),n=new c.h,p=new c.h,d=new c.h,p.Sc();var $=-1;y=new c.ja(0),g=new c.ja(0),_=null;for(var E=this.g.Hd(),k=this.g.Hd(),P=0,F=l.size;P<F;P++){var D=l.get(P);if(this.g.D(D,o),!o.rb(p)){if($!=-1){for(var V=$;V<P;V++){$=l.get(V);var N=this.g.V($);D=this.g.Na($);var G=!1;this.g.D(N,n),0>p.compare(n)&&(u?n.y==a:n.x==a)&&(y.add($),G=!0,this.g.Sa($,k,1)),this.g.D(D,n),0>p.compare(n)&&(u?n.y==a:n.x==a)&&(G||y.add($),this.g.Sa($,E,1))}for(V=0,G=y.size;V<G;V++){if($=y.get(V),D=this.g.Qa($,E),N=this.g.Qa($,k),D==1&&(D=this.g.Na($),this.g.D(D,d),!d.rb(o))){_==null&&(_=[]);var J=c.h.ub(p,d);_[0]=c.h.ub(d,o)/J,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(D,_,1),D=this.g.Na($),this.g.mf(D,o),g.add(D),this.g.Sa(D,E,1),this.g.Sa(D,k,-1)}N==1&&(N=this.g.V($),this.g.D(N,d),d.rb(o)||(_==null&&(_=[]),J=c.h.ub(p,d),_[0]=c.h.ub(p,o)/J,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl($,_,1),D=this.g.V($),this.g.mf(D,o),g.add(D),this.g.Sa(D,E,-1),this.g.Sa(D,k,1)))}$=y,y=g,(g=$).clear(!1)}$=P,p.N(o)}}this.g.Ud(E),this.g.Ud(k)}},w.prototype.Pl=function(u,a){for(var n=new c.h,o=null,l=-1,p=0,d=this.ed.size;p<d;p++){var y=this.ed.get(p);if(y!=-1){var g=this.g.V(y);this.g.D(y,n),(u?n.y==a:n.x==a)&&(this.g.D(g,n),(u?n.y==a:n.x==a)&&(l==-1&&(l=this.g.Hd()),o==null&&(o=new c.ja(0)).Jb(100),this.g.Qa(y,l)!=-2&&(o.add(y),this.g.Sa(y,l,-2)),this.g.Qa(g,l)!=-2&&(o.add(g),this.g.Sa(g,l,-2))))}}if(o==null)l!=-1&&this.g.Ud(l);else{var _=this;for(o.Wd(0,o.size,function(ee,Z){return _.Oh(ee,Z)}),p=0,d=o.size;p<d;p++){var M=o.get(p);this.g.Sa(M,l,p)}y=new c.h,(g=new c.h).Sc();var $=-1;for(p=0,d=o.size;p<d;p++)if((M=o.get(p))!=-1&&(this.g.D(M,n),!n.rb(g))){if($!=-1)for(;;){M=!1;for(var E=1<p-$?p-1:p,k=$;k<E;k++){var P=o.get(k);if(P!=-1){var F=-1,D=this.g.V(P);this.g.D(D,y),0>g.compare(y)&&(u?y.y==a:y.x==a)&&(F=D),D=-1;var V=this.g.Na(P);if(this.g.D(V,y),0>g.compare(y)&&(u?y.y==a:y.x==a)&&(D=V),F!=-1&&D!=-1)this.Mh(P,o,l),this.g.qd(P,!1),this.Mh(F,o,l),this.g.qd(F,!1),M=!0;else if(F!=-1||D!=-1){for(V=k+1;V<p;V++){var N=o.get(V);if(N!=-1){var G=this.g.V(N),J=-1;this.g.D(G,y),0>g.compare(y)&&(u?y.y==a:y.x==a)&&(J=G),G=this.g.Na(N);var W=-1;if(this.g.D(G,y),0>g.compare(y)&&(u?y.y==a:y.x==a)&&(W=G),J!=-1&&W!=-1){this.Mh(N,o,l),this.g.qd(N,!1),this.Mh(J,o,l),this.g.qd(J,!1),M=!0;break}if(F!=-1&&W!=-1){this.At(o,P,F,N,W,l),M=!0;break}if(D!=-1&&J!=-1){this.At(o,N,J,P,D,l),M=!0;break}}}if(M)break}}}if(!M)break}$=p,g.N(n)}this.g.Ud(l)}},w.prototype.Mh=function(u,a,n){n=this.g.Qa(u,n),a.set(n,-1),n=this.g.Qa(u,this.li),this.ed.set(n,-1),(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(u,a,n,o,l,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,l),this.g.Cc(l,n),this.Mh(o,u,p),this.g.oi(o,!1),this.Mh(l,u,p),this.g.oi(l,!0)},w.prototype.Oy=function(){for(var u=0,a=this.ed.size;u<a;u++){var n=this.ed.get(u);n!=-1&&this.g.cj(n,-1)}for(var o=0,l=0,p=this.g.Ob(this.Y);p!=-1;){var d=this.g.Ya(p);if(d==-1||p!=this.g.cd(d)){var y=p;p=this.g.Sb(p),this.g.Kf(y,-1),this.g.br(y)}else{n=d,y=0;do this.g.cj(n,p),y++,n=this.g.V(n);while(n!=d);this.g.fp(p,!1),this.g.Yg(p,this.g.Na(d)),this.g.Xj(p,y),l+=y,o++,p=this.g.Sb(p)}}for(u=0,a=this.ed.size;u<a;u++)if((n=this.ed.get(u))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),y=0,d=n;do this.g.cj(n,p),y++,n=this.g.V(n);while(n!=d);2>=y?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.qd(d,!1),y==2&&(0<=(n=this.g.Qa(d,this.li))&&this.ed.set(n,-1),this.g.qd(d,!1)),y=p,this.g.Kf(y,-1),this.g.br(y)):(this.g.mn(p,!0),this.g.Xj(p,y),this.g.Kf(p,d),this.g.Yg(p,this.g.Na(d)),this.g.fp(p,!1),l+=y,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,l),u=0,a=this.g.md;a!=-1;a=this.g.ve(a))u+=this.g.I(a);this.g.XB(u)},w.wy=function(u,a,n,o){return new w(a,o).vy(u,n)},w.clip=function(u,a,n,o,l){return w.Pu(u,a,null,n,o,l)},w.Pu=function(u,a,n,o,l,p){var d=u.K();if(d==33)return l=u.D(),a.contains(l)?u:u.Ja();if(d==197)return l=new c.l,u.A(l),l.Fa(a)?(a=new c.Hh,u.copyTo(a),a.Zo(l),a):u.Ja();if(u.B())return u;if(a.B())return u.Ja();var y=new c.l;if(u.yc(y),a.contains(y))return u;if(!a.isIntersecting(y))return u.Ja();if((n!=null||isNaN(o))&&c.ua.oy(n,a,!1),!c.ba.zj(d))throw c.i.O();if((n=u.Cb)!=null&&(n=n.Hk)!=null){if((n=n.To(a))==1){if(d!=1736)throw c.i.ga("internal error");return(u=new c.Ea(u.description)).vp(a),u}if(n==0)return u.Ja()}switch(d){case 550:for(p=null,d=u.I(),n=u.vb(0),o=0,l=new c.h,y=0;y<d;y++)n.uc(2*y,l),a.contains(l)||(o==0&&(p=u.Ja()),o<y&&p.Gd(u,o,y),o=y+1);return 0<o&&p.Gd(u,o,d),o==0?u:p;case 1736:case 1607:return w.wy(u,a,l,p);default:throw c.i.ga("internal error")}},w.prototype.Oh=function(u,a){var n=new c.h;return this.g.D(u,n),u=new c.h,this.g.D(a,u),n.compare(u)},w}();c.ti=C}(U||(U={})),function(c){var C=new c.h,w=function(){function a(n,o,l,p,d){this.Rm=new c.h,this.Fk=new c.h,this.Ri=new c.h,this.g=n,this.Cw=l,this.po=p,this.Rm=o,this.Al=d,this.Fk.Sc(),this.Ri.Sc()}return a.prototype.sE=function(n){this.g.D(n,this.Fk),n=c.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var o=c.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return u.eG(n,o)},a.prototype.ez=function(n){return this.g.Qa(n,this.Al)},a.prototype.Ky=function(n,o){return this.g.D(n,this.Fk),this.g.D(o,this.Ri),u.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},a}();c.oY=function(){};var u=function(){function a(){this.Rm=new c.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return a.dQ=function(n,o){var l=new a;return l.g=n,l.ra=o,l.Cw=o*o,l.bw=2*o,l.po=1/l.bw,l.wO()},a.Ev=function(n,o,l,p,d){return(n-=l)*n+(o-=p)*o<=d},a.eG=function(n,o){return c.P.Vh(o,c.P.Vh(n))},a.prototype.yO=function(n,o){this.g.Hc(n,C);for(var l=(C.y-this.Rm.y)*this.po,p=c.P.truncate((C.x-this.Rm.x)*this.po),d=c.P.truncate(l),y=l=0;1>=y;y+=1)for(var g=0;1>=g;g+=1){var _=a.eG(p+y,d+g),M=this.zl.lR(_);M!=-1&&(this.rq[l]=M,this.zs[l]=_,l++)}for(p=l-1;1<=p;p--)for(M=this.rq[p],d=p-1;0<=d;d--)if(M==this.rq[d]){this.zs[d]=-1,p!=--l&&(this.zs[p]=this.zs[l],this.rq[p]=this.rq[l]);break}for(d=0;d<l;d++)this.zO(n,this.zs[d],C,this.rq[d],o)},a.prototype.zO=function(n,o,l,p,d){for(var y=new c.h;p!=-1;p=this.zl.zR(p)){var g=this.zl.ka(p);n==g||o!=-1&&this.g.Qa(g,this.Al)!=o||(this.g.Hc(g,y),a.Ev(l.x,l.y,y.x,y.y,this.Cw)&&d.add(p))}},a.prototype.Zm=function(n,o,l){var p=this.g.Qa(n,this.so),d=this.g.Qa(o,this.so);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,n),this.g.Sa(n,this.so,p)),d==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,d),this.g.Sa(o,this.so,-2),o=this.TT(n,o),l&&(l=this.mw.sE(n),this.g.Sa(n,this.Al,l)),o},a.RT=function(n,o,l){n.Nb(o),l=n;var p=new c.h;a.ST(n.D(),o.D(),p),l.Db(p)},a.ST=function(n,o,l){var p=n.x;n.x!=o.x&&(p=(1*n.x+1*o.x)/2);var d=n.y;n.y!=o.y&&(d=(1*n.y+1*o.y)/2),l.na(p,d)},a.prototype.TT=function(n,o){var l=new c.h;this.g.D(n,l);var p=new c.h;this.g.D(o,p);var d=this.g.YF(n),y=d+(o=this.g.YF(o)),g=0,_=l.x;l.x!=p.x&&(_=(l.x*d+p.x*o)/y,g++);var M=l.y;return l.y!=p.y&&(M=(l.y*d+p.y*o)/y,g++),0<g&&this.g.Db(n,_,M),this.g.rX(n,y),g!=0},a.prototype.wO=function(){var n=this.g.gd,o=this.g.DF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.po=1/this.bw),this.Ad=new c.cu,this.Ad.Bt(c.P.truncate(this.g.gd/3+1)),this.Ad.hn(c.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new c.ZK(c.P.truncate(4*n/3),this.mw),this.zl.vW(this.g.gd),n=!1,o=this.g.md;o!=-1;o=this.g.ve(o))for(var l=this.g.Ob(o);l!=-1;l=this.g.Sb(l))for(var p=this.g.Ya(l),d=0,y=this.g.Ka(l);d<y;d++){var g=this.mw.sE(p);this.g.Sa(p,this.Al,g),this.zl.addElement(p,g),p=this.g.V(p)}var _=new c.ja(0);for(_.Jb(10),o=this.g.md;o!=-1;o=this.g.ve(o))for(l=this.g.Ob(o);l!=-1;l=this.g.Sb(l))for(p=this.g.Ya(l),d=0,y=this.g.Ka(l);d<y;d++){if(this.g.Qa(p,this.so)!=-2)for(g=this.g.Qa(p,this.Al),this.zl.kd(p,g);this.yO(p,_),_.size!=0;){g=!1;for(var M=0,$=_.size;M<$;M++){var E=_.get(M),k=this.zl.ka(E);this.zl.wd(E),g=this.Zm(p,k,M+1==$)||g}if(n=n||g,_.clear(!1),!g)break}p=this.g.V(p)}return n&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),n},a.prototype.qN=function(){for(var n=new c.h,o=this.Ad.ke;o!=-1;o=this.Ad.lz(o)){var l=this.Ad.sc(o);for(this.g.D(this.Ad.ka(l),n),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),n)}},a}();c.$t=u}(U||(U={})),function(c){var C=function(){function w(u){u===void 0&&(u=null),this.zg=null,this.Pb=!1,this.zg=u===null?[]:u}return w.prototype.copyTo=function(u){if(u.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)u.zg.push(this.zg[a].Qf())},w.prototype.count=function(){return this.zg.length},w.prototype.add=function(u){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(u.Qf())},w.prototype.clear=function(){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},w.prototype.remove=function(u){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(u,1)},w.prototype.kg=function(){var u=new w;return this.copyTo(u),u},w.prototype.Qf=function(){return this.kg()},w.prototype.transform=function(u,a,n,o){if(u.length<a)throw c.i.ga("invalid Argument");var l=n;for(n=0;n<this.zg.length;n++){var p=this.zg[n];if(p.sm()!=null){var d=p.Wn,y=d?1:0,g=d?p.sm().getGeogcs2():p.sm().getGeogcs1();if(g=l/(g=g.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(g-1))for(l=0;l<a;l++)u[l][0]*=g,u[l][1]*=g;c.HC.geogToGeog(p.sm(),a,u,null,y),l=(d?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(g=l/o,3552713678800501e-30<Math.abs(g-1))for(l=0;l<a;l++)u[l][0]*=g,u[l][1]*=g;return a},w.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof w)||this.zg.length!=u.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(u.zg[a]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",a=0,n=this.count();a<n;++a)u+=this.zg[a].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},w.create=function(){return new w},w}();c.rC=C}(U||(U={})),function(c){var C,w=Math.PI,u=2*Math.PI,a=Math.PI/2,n=function(){function p(){}return p.OO=function(d,y){var g=new p;return g.x=d,g.y=y,g.type=0,g.Wh=0,g},p.cl=function(d){var y=new p;return y.x=d.x,y.y=d.y,y.type=0,y.Wh=0,y},p.NO=function(d){var y=new p;return y.x=d.x,y.y=d.y,y.type=d.type,y.Wh=d.Wh,y},p.Qd=function(d,y,g){var _=new p;return _.x=d.x+y*Math.cos(g),_.y=d.y+y*Math.sin(g),_.type=d.type,_.Wh=d.Wh,_},p.Ru=function(d,y){var g=new p;return g.x=.5*(d.x+y.x),g.y=.5*(d.y+y.y),g.type=d.type,g.Wh=d.Wh,g},p.OE=function(d,y){var g=new p;return g.x=d.x+.001*(y.x-d.x),g.y=d.y+.001*(y.y-d.y),g.type=d.type,g.Wh=d.Wh,g},p}(),o=function(){};(C=c.aL||(c.aL={}))[C.Round=0]="Round",C[C.Bevel=1]="Bevel",C[C.Miter=2]="Miter",C[C.Square=3]="Square";var l=function(){function p(d){this.IA=this.Zb=this.xg=null,this.od=d}return p.W=function(d,y,g,_,M,$){if(d==null||1>d.Eb())throw c.i.O();return y==0||d.B()?d:(($=new p($)).mo=d,$.La=y,$.ra=M,$.Mi=g,$.xA=_,$.Qx())},p.prototype.$L=function(){var d=this.mo,y=d.bc(),g=d.xc(),_=new c.h;return _.vc(g,y),_.normalize(),_.Jv(),_.scale(this.La),y.add(_),g.add(_),_=d.Ja(),d.Ec(y),d.Rc(g),_},p.prototype.ZL=function(){var d=this.mo;if(0<this.La&&this.Mi!=2){var y=new c.Ea;return y.bd(d,!1),this.mo=y,this.Qx()}return(d=new c.Hh(d.aa)).X(this.La,this.La),d},p.prototype.oJ=function(d,y,g,_){return(y.x-d.x)*(_.x-g.x)+(y.y-d.y)*(_.y-g.y)},p.prototype.hc=function(d,y){if(y===void 0)this.Zb.push(d),this.gf++;else if(this.gf==0)this.hc(d);else{var g=this.Dw,_=this.xg[y==0?g-1:y-1],M=this.xg[y],$=this.oJ(_,M,this.Zb[this.gf-1],d);0<$?this.hc(d):0>$&&(0<this.oJ(_,M,M,this.Zb[this.gf-1])?(M=this.xg[y==0?g-2:y==1?g-1:y-2],g=n.Qd(_,this.La,Math.atan2(_.y-M.y,_.x-M.x)-a),this.Zb[this.gf-1]=g,this.Mi==1||this.Mi==2?(g=n.Ru(g,_),this.hc(g),g=n.Qd(_,this.La,this.Lv+a),(_=n.Ru(g,_)).type|=256,this.hc(_)):(g=n.Qd(_,this.La,this.Lv+a)).type|=256,this.hc(g),this.hc(d,y)):(g=n.Qd(M,this.La,this.Lv+a),this.hc(g),this.Mi==1||this.Mi==2?(g=n.Ru(g,M),this.hc(g),g=n.Qd(M,this.La,this.Wz-a),(_=n.Ru(g,M)).type|=256,this.hc(_)):(g=n.Qd(M,this.La,this.Wz-a)).type|=256,this.hc(g)))}},p.prototype.hE=function(){var d,y=this.Dw;this.gf=0;var g=.5*this.ra,_=0,M=0;for(d=0;d<y;d++){var $=this.xg[d],E=d==0?this.xg[y-1]:this.xg[d-1],k=d==y-1?this.xg[0]:this.xg[d+1],P=E.x-$.x,F=E.y-$.y,D=k.x-$.x,V=k.y-$.y,N=Math.atan2(F,P),G=Math.atan2(V,D);if(this.Lv=N,this.Wz=G,d==0&&(_=N,M=G),P=P*V-D*F,F=G,G<N&&(G+=u),0<P*this.La)this.Mi==1||this.Mi==2?(N=n.Qd($,this.La,N+a),this.hc(N),N=n.OE($,N),this.hc(N),N=n.Qd($,this.La,G-a),($=n.OE($,N)).type|=256,this.hc($),this.hc(N)):(P=.5*(G-N),P=this.La/Math.abs(Math.sin(P)),N=n.Qd($,P,.5*(N+G)),this.hc(N,d));else if(512&$.type){for(P=1-g/Math.abs(this.La),E=1,k=0>this.La?-w:w,-1<P&&1>P&&(.017453292519943295>(F=2*Math.acos(P))&&(F=.017453292519943295),1<(E=c.P.truncate(w/F+1.5))&&(k/=E)),F=N+a,N=n.Qd($,this.La,F),d==0&&(N.type|=1024),this.hc(N,d),P=this.La/Math.cos(k/2),F+=k/2,(N=n.Qd($,P,F)).type|=1024,this.hc(N);0<--E;)F+=k,(N=n.Qd($,P,F)).type|=1024,this.hc(N);(N=n.Qd($,this.La,G-a)).type|=1024,this.hc(N)}else if(this.Mi==1)N=n.Qd($,this.La,N+a),this.hc(N,d),N=n.Qd($,this.La,G-a),this.hc(N);else if(this.Mi==0)for(P=1-g/Math.abs(this.La),E=1,k=G-a-(N+a),-1<P&&1>P&&(.017453292519943295>(F=2*Math.acos(P))&&(F=.017453292519943295),1<(E=c.P.truncate(Math.abs(k)/F+1.5))&&(k/=E)),P=this.La/Math.cos(.5*k),F=N+a+.5*k,N=n.Qd($,P,F),this.hc(N,d);0<--E;)F+=k,N=n.Qd($,P,F),this.hc(N);else this.Mi==2?(P=E.x-$.x,F=E.y-$.y,.99999999<(E=(P*(D=k.x-$.x)+F*(V=k.y-$.y))/Math.sqrt(P*P+F*F)/Math.sqrt(D*D+V*V))?(N=n.Qd($,1.4142135623730951*this.La,G-.25*w),this.hc(N,d),N=n.Qd($,1.4142135623730951*this.La,G+.25*w),this.hc(N)):(E=Math.abs(this.La/Math.sin(.5*Math.acos(E))))>(k=Math.abs(this.xA*this.La))?(P=.5*(G-N),P=this.La/Math.abs(Math.sin(P)),N=n.Qd($,P,.5*(N+G)),G=c.h.construct(N.x,N.y),N=c.h.construct($.x,$.y),($=new c.h).vc(G,N),(G=new c.h).BW(k/$.length(),$,N),N=(E-k)*Math.abs(this.La)/Math.sqrt(E*E-this.La*this.La),0<this.La?$.Jv():$.cr(),$.scale(N/$.length()),(N=new c.h).add(G,$),(E=new c.h).vc(G,$),N=n.cl(N),this.hc(N,d),N=n.cl(E),this.hc(N)):(P=.5*(G-N),P=this.La/Math.abs(Math.sin(P)),N=n.Qd($,P,.5*(N+G)),this.hc(N,d))):(G=F,0<this.La?(G>N&&(G-=u),E=N-G<a):(G<N&&(G+=u),E=G-N<a),E?(F=0>(P=1.4142135623730951*this.La)?N+.25*w:N+.75*w,N=n.Qd($,P,F),this.hc(N,d),F=0>P?G-.25*w:G-.75*w,N=n.Qd($,P,F),this.hc(N)):(P=.5*(G-N),P=this.La/Math.abs(Math.sin(P)),G<N&&(G+=u),N=n.Qd($,P,(N+G)/2),this.hc(N,d)))}return this.Lv=_,this.Wz=M,this.hc(this.Zb[0],0),$=n.NO(this.Zb[this.gf-1]),this.Zb[0]=$,this.rW()},p.prototype.Cu=function(d,y){if(!(2>y))for(var g=0;g<y;g++){var _=this.Zb[d+g];g!=0?this.IA.Ei(c.h.construct(_.x,_.y)):this.IA.Nt(c.h.construct(_.x,_.y))}},p.prototype.aM=function(d,y,g){var _=d.Ca(y),M=d.Wc(y);if(this.Zb=[],this.IA=g,d.ec(y)){for(y=d.Oa(_);d.Oa(M-1).rb(y);)M--;if(2<=M-_){for(this.Dw=M-_,this.xg=[],y=_;y<M;y++)this.xg.push(n.cl(d.Oa(y)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(y=d.Oa(_);_<M&&d.Oa(_+1).rb(y);)_++;for(y=d.Oa(M-1);_<M&&d.Oa(M-2).rb(y);)M--;if(2<=M-_){for(this.Dw=2*(M-_)-2,this.xg=[],(g=n.cl(d.Oa(_))).type|=1536,this.xg.push(g),y=_+1;y<M-1;y++)g=n.cl(d.Oa(y)),this.xg.push(g);for((g=n.cl(d.Oa(M-1))).type|=512,this.xg.push(g),y=M-2;y>=_+1;y--)(g=n.cl(d.Oa(y))).type|=1024,this.xg.push(g);if(this.hE())if(2<=this.Zb.length){for(d=-1,(M=(1024&this.Zb[this.gf-1].type)!=0)||(d=0),y=1;y<this.gf;y++)(_=(1024&this.Zb[y].type)!=0)?M||1<(M=y-1)-d+1&&this.Cu(d,M-d+1):M&&(d=y-1),M=_;M||1<(M=this.gf-1)-d+1&&this.Cu(d,M-d+1)}else d=0,M=this.gf-1,0<=d&&1<=M-d&&this.Cu(d,M-d+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.rW=function(){for(var d=!1,y=0;y<this.gf;y++){var g=this.Zb[y];g.sh=y+1,g.uh=y-1,this.Zb[y]=g}for((g=this.Zb[0]).uh=this.gf-2,this.Zb[0]=g,(g=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=g,y=g=0;y<this.gf;y++)if(256&this.Zb[g].type){var _=this.BP(g);if(_==-1){d=!0;break}g=_}else g=this.Zb[g].sh;return!d&&(this.LO(g),!0)},p.prototype.BP=function(d){for(var y,g,_=this.gf-1,M=d,$=1;$<=_-2;$++){y=M=this.Zb[M].sh,g=d;for(var E=1;E<=$;E++){if(g=this.Zb[g].uh,(256&this.Zb[g].type)==0&&(256&this.Zb[y].type)==0){var k=this.bS(g,y);if(k!=-1)return k}y=this.Zb[y].uh}}return-1},p.prototype.bS=function(d,y){var g=this.Zb[this.Zb[d].uh],_=this.Zb[d],M=this.Zb[this.Zb[y].uh],$=this.Zb[y];if(!this.EW(g,_,M,$))return-1;var E=new o;return this.sQ(g,_,M,$,E)&&!E.XD&&c.P.XJ((_.x-g.x)*($.y-M.y)-(_.y-g.y)*($.x-M.x))!=c.P.XJ(this.La)?(g=this.Zb[d].uh,E.cn.type=_.type,E.cn.sh=y,E.cn.uh=g,this.Zb[d]=E.cn,E.cn=this.Zb[y],E.cn.uh=d,this.Zb[y]=E.cn,y):-1},p.prototype.EW=function(d,y,g,_){return Math.max(d.x,y.x)>=Math.min(g.x,_.x)&&Math.max(g.x,_.x)>=Math.min(d.x,y.x)&&Math.max(d.y,y.y)>=Math.min(g.y,_.y)&&Math.max(g.y,_.y)>=Math.min(d.y,y.y)},p.prototype.sQ=function(d,y,g,_,M){M.XD=!1;var $=(y.y-d.y)*(_.x-g.x)-(y.x-d.x)*(_.y-g.y),E=(g.y-d.y)*(y.x-d.x)-(g.x-d.x)*(y.y-d.y);if(0<=($=$==0?2:E/$)&&1>=$){var k=$;if($=(_.y-g.y)*(y.x-d.x)-(_.x-g.x)*(y.y-d.y),E=(d.y-g.y)*(_.x-g.x)-(d.x-g.x)*(_.y-g.y),0<=($=$==0?2:E/$)&&1>=$)return M.cn=n.OO(d.x+$*(y.x-d.x),d.y+$*(y.y-d.y)),M.cn.Wh=g.Wh+k*(_.Wh-g.Wh),k!=0&&k!=1||$!=0&&$!=1||(M.XD=!0),M.RY=$,M.SY=k,!((k==0||k==1)&&0<$&&1>$||($==0||$==1)&&0<k&&1>k)}return!1},p.prototype.LO=function(d){for(;this.Zb[d].uh<d;)d=this.Zb[d].uh;var y=0,g=d;do g=this.Zb[g],this.Zb[y]=g,g=g.sh,y++;while(g!=d);this.Zb[y]=this.Zb[0],this.gf=y+1},p.prototype.VC=function(d){var y=this.mo,g=y.Ha();if(g!=null){g.aj();for(var _=-1;g.ab();)_++,this.aM(y,_,d)}},p.prototype.Qx=function(){var d=this.mo.K();return d==322?this.$L():d==197?this.ZL():c.ba.zd(d)?((d=new c.Ua).pc(this.mo,!0),this.mo=d,this.Qx()):d==1607?(d=new c.Ua,this.VC(d),d):d==1736?(d=new c.Ea,this.VC(d),d):null},p}();c.DK=l}(U||(U={})),function(c){var C=function(){function n(o){this.sk=o}return n.prototype.D=function(o,l){this.sk.g.D(o,l)},n.prototype.wd=function(o){var l=this.sk.Ga.ka(o);this.sk.Ga.wd(o,-1),this.sk.g.qd(l,!1)},n}(),w=function(){function n(o){this.sk=o}return n.prototype.D=function(o,l){this.sk.DT.D(o,l)},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),u=function(){function n(o){this.sk=o}return n.prototype.D=function(o,l){l.N(this.sk.GT[o])},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),a=function(){function n(o){o===void 0?(this.Ga=new c.$j,this.Ga.Ee(20),this.g=new c.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new C(this)):o instanceof Array?(this.Ga=new c.$j,this.Ga.Ee(20),this.GT=o,this.Zh=new u(this)):(this.Ga=new c.$j,this.Ga.Ee(20),this.DT=o,this.Zh=new w(this))}return n.prototype.Ib=function(o){var l=o.K();if(c.Fx.zj(l))this.eN(o);else if(c.Xk.zd(l))this.jN(o);else if(l==197)this.bN(o);else{if(l!=33)throw c.i.O("invalid shape type");this.iN(o)}},n.prototype.YQ=function(){var o=new c.Ta,l=this.Ga.sc(-1),p=new c.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),o),p.nf(o),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),o),p.lineTo(o);return p},n.MO=function(o){var l=new n(o),p=o.I(),d=1,y=new c.h,g=new c.h,_=new c.h;for(o.D(0,y);o.D(d,g),g.Mz(y)&&d<p-1;)d++;for(l.Ga.addElement(0,-1),l.Ga.zn(d),p=d+1;p<o.I();p++)o.D(p,_),(d=l.kC(_))!=-1&&l.Ga.Uj(d,p);for(_=new c.Ta,d=l.Ga.sc(-1),p=new c.Ea(o.description),o.we(l.Ga.ka(d),_),p.nf(_),d=l.Ga.lb(d);d!=-1;d=l.Ga.lb(d))o.we(l.Ga.ka(d),_),p.lineTo(_);return p},n.construct=function(o,l,p){for(var d=new n(o),y=1,g=o[0];o[y].Mz(g)&&y<l-1;)y++;for(d.Ga.addElement(0,-1),d.Ga.zn(y),y+=1;y<l;y++)(g=d.kC(o[y]))!=-1&&d.Ga.Uj(g,y);for(o=0,l=d.Ga.sc(-1);l!=-1;l=d.Ga.lb(l))p[o++]=d.Ga.ka(l);return o},n.EG=function(o,l){var p=o.Ca(l),d=o.Wc(l);if(l=!o.ec(l)&&o.Pn(l),o=o.vb(0),d*=2,l&&(d-=2),6>d-(p*=2))return!0;l=new c.h;var y=new c.h,g=new c.h;o.uc(p,l),o.uc(p+2,y),o.uc(p+4,g);var _=n.Yu(y,g,l);if(_.rs()||!n.wm(_.value()))return!1;var M=c.h.construct(y.x,y.y),$=new c.h;for(p+=6;p<d;p+=2)if($.N(y),y.N(g),o.uc(p,g),(_=n.Yu(y,g,l)).rs()||!n.wm(_.value())||(_=n.Yu(M,g,l)).rs()||!n.wm(_.value())||(_=n.Yu(y,g,$)).rs()||!n.wm(_.value()))return!1;return!0},n.prototype.eN=function(o){for(var l=new c.Ta,p=new c.h,d=0;d<o.I();d++){o.D(d,p);var y=this.Er(p);if(y!=-1){o.we(d,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(y,g)}}},n.prototype.bN=function(o){for(var l=new c.Ta,p=new c.h,d=0;4>d;d++){o.hB(d,p);var y=this.Er(p);if(y!=-1){o.If(d,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(y,g)}}},n.prototype.jN=function(o){var l=new c.Ta,p=o.bc();if((p=this.Er(p))!=-1){o.Vo(l);var d=this.g.hc(this.Us,l);this.Ga.Uj(p,d)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Ro(l),o=this.g.hc(this.Us,l),this.Ga.Uj(p,o))},n.prototype.iN=function(o){var l=o.D();(l=this.Er(l))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(l,o))},n.prototype.Er=function(o){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(l=this.Ga.zn(-5)),l}return this.kC(o)},n.prototype.kC=function(o){var l=-1;do{var p=this.Ga.sc(-1),d=this.Ga.Gc(-1),y=this.Ga.ka(p),g=this.Ga.ka(d),_=new c.h,M=new c.h;if(this.Zh.D(y,_),this.Zh.D(g,M),y=c.h.Wq(M,o,_),n.wm(y))l=this.Ga.zn(-1),(_=this.iC(o,d,p))!=p&&this.jC(o,p,this.Ga.xe(_));else if(n.xG(y)){M=this.Ga.uv(-1);var $=this.Ga.sc(-1),E=this.Ga.Gc(-1);for(y=new c.h,g=new c.h;$!=this.Ga.xe(E);){var k=this.Ga.ka(M);this.Zh.D(k,y),k=c.h.Wq(y,o,_),n.xG(k)?(E=M,M=this.Ga.nl(M)):($=M,M=this.Ga.Zp(M))}if(M=E,_=$,k=this.Ga.ka(M),$=this.Ga.ka(_),this.Zh.D(k,y),this.Zh.D($,g),_!=p&&(y=c.h.Wq(g,o,y),!n.wm(y)))continue;l=this.Ga.Bu(_,M,-2,!1),this.jC(o,M,d),this.iC(o,_,p)}else this.tb==null&&(this.tb=new c.zb),this.tb.Ec(M),this.tb.Rc(_),0>(_=this.tb.ge(o,!0))?(_=this.Ga.xe(d),this.Ga.wd(d,-1),l=this.Ga.zn(-3),this.iC(o,_,p)):1<_&&(_=this.Ga.lb(p),this.Ga.wd(p,-1),l=this.Ga.Bu(-1,_,-3,!1),this.jC(o,_,d))}while(0);return l},n.prototype.jC=function(o,l,p){if(l!=p){var d=this.Ga.ka(l),y=this.Ga.lb(l),g=new c.h,_=new c.h;for(this.Zh.D(d,g);l!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(y),_),d=c.h.Wq(_,o,g),!n.wm(d));)d=l,l=y,g.N(_),y=this.Ga.lb(l),this.Zh.wd(d)}},n.prototype.iC=function(o,l,p){if(l==p)return p;var d=this.Ga.ka(l),y=this.Ga.xe(l),g=new c.h,_=new c.h;for(this.Zh.D(d,g);l!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(y),_),d=c.h.Wq(g,o,_),!n.wm(d));)d=l,l=y,g.N(_),y=this.Ga.xe(l),this.Zh.wd(d);return l},n.Yu=function(o,l,p){var d=new c.Xb;d.set(l.x),d.sub(o.x);var y=new c.Xb;y.set(p.y),y.sub(o.y);var g=new c.Xb;return g.set(l.y),g.sub(o.y),(l=new c.Xb).set(p.x),l.sub(o.x),d.Bg(y),g.Bg(l),d.sub(g),d},n.wm=function(o){return 0>o},n.xG=function(o){return 0<o},n}();c.au=a}(U||(U={})),function(c){var C=function(){function w(u){this.g=null,this.oH=!0,this.od=u}return w.uU=function(u,a,n){return u=c.ua.Gr(u),c.$t.Ev(a.Ng(),a.kh(),n.Ng(),n.kh(),c.mc.ox(u))},w.xO=function(u,a){var n=new c.Ta;return c.$t.RT(u,a,n),n},w.W=function(u,a,n,o){return(n=new w(n)).g=u,n.ra=a,n.oH=o,n.zM()},w.prototype.iM=function(u){return c.$t.dQ(this.g,u)},w.prototype.nM=function(u){return c.bu.W(this.g,u,this.od)},w.prototype.zM=function(){var u=this.ra,a=c.ua.Gr(u),n=1.00001*(u=c.ua.mN(u));u*=1.000001;for(var o=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,d=this.g.eS();;p++){if(p>l)throw c.i.ga("Internal Error: max number of iterations exceeded");var y=this.iM(a);if(o=o||y,this.oH&&(y=this.g.Ip(a,!0,!1)!=0,o=o||y),y=!1,(p==0||d||c.bu.fI(!0,this.g,u,null,this.od))&&(y=this.nM(n),o=o||y),!y)break;c.op.Bp(this.od)}return o},w}();c.Vk=C}(U||(U={})),function(c){var C=function(){function u(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return u.prototype.wv=function(a,n){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,n))return null;o=n}return o},u.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||!(4095&this.$s))&&(this.$s=0,c.op.Bp(this.Vb))},u.prototype.iP=function(){var a=this.g.$q(!1),n=!1,o=new c.zb,l=new c.zb,p=new c.l;p.Pa();var d=new c.l;d.Pa();for(var y=new c.Ta,g=new c.OC,_=a.next();_!=-1;_=a.next()){c.op.Bp(this.Vb);var M=null,$=!1;if(!c.ba.Tn(this.g.jc(a.ek))){if((M=this.wv(_,o))==null)continue;if(M.A(p),p.X(this.ra,this.ra),M.Di(this.ra)){if(!M.Di(0))continue;$=!0,M=null}}var E=this.g.$q(a),k=E.next();for(k!=-1&&(k=E.next());k!=-1;k=E.next()){var P=null,F=!1;if(!c.ba.Tn(this.g.jc(E.ek))){if((P=this.wv(k,l))==null)continue;if(P.A(d),P.Di(this.ra)){if(!P.Di(0))continue;F=!0,P=null}}var D=0,V=0;if(M!=null&&P!=null)p.CG(d)&&(g.Qo(M),g.Qo(P),g.Fa(this.ra,!1),0<(D=g.ql(0))+(V=g.ql(1))&&(this.g.lr(_,g,0,!0),this.g.lr(k,g,1,!0)),g.clear());else if(M!=null){var N=new c.h;if(this.g.D(k,N),p.contains(N)){if(g.Qo(M),this.g.Xi(k,y),g.Fz(this.ra,y,!1),0<(D=g.ql(0)))if(this.g.lr(_,g,0,!0),F){for(F=-1,N=this.g.V(k);N!=-1&&N!=k&&(F=N,(P=this.wv(N,l))!=null&&P.Di(0));N=this.g.V(N));for(N=k;N!=-1&&(this.g.Fh(N,g.Cf),N!=F);N=this.g.V(N));}else this.g.Fh(k,g.Cf);g.clear()}}else{if(P==null)continue;if(N=new c.h,this.g.D(_,N),d.X(this.ra,this.ra),d.contains(N)){if(g.Qo(P),this.g.Xi(_,y),g.Fz(this.ra,y,!1),0<(V=g.ql(0)))if(this.g.lr(k,g,0,!0),$){for(F=-1,N=this.g.V(_);N!=-1&&N!=_&&(F=N,(P=this.wv(N,l))!=null&&P.Di(0));N=this.g.V(N));for(N=_;N!=-1&&(this.g.Fh(N,g.Cf),N!=F);N=this.g.V(N));}else this.g.Fh(_,g.Cf);g.clear()}}if(D+V!=0){if(D!=0){if((M=this.g.cc(_))==null){if(!this.g.fd(_,o))continue;M=o,o.A(p)}else M.A(p);if(M.Di(this.ra))break}n=!0}}}return n},u.prototype.jP=function(){return this.LU()},u.prototype.LU=function(){return new c.MC().LX(this.g,this.ra)},u.prototype.gI=function(){var a=!1;this.Nc==null&&(this.Nc=new c.$j);var n=new c.ja(0);n.Jb(this.g.gd+1);for(var o=this.g.$q(),l=o.next();l!=-1;l=o.next())n.add(l);this.g.nx(n,n.size),n.add(-1),o=this.g.Hd(),l=this.g.Hd(),this.ae=new c.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var p=new c.ja(0),d=new c.ja(0),y=0;new c.h;var g=this.g.ud;this.g.wb.oc();for(var _,M,$=this.g.wb.Aa[0].o,E=n.get(y++);E!=-1;){var k=_=$[2*(M=g.U(E,0))],P=M=$[2*M+1];do{var F=g.U(E,2),D=g.U(E,1);if(F!=-1){var V=g.U(F,0),N=$[2*V];0>(P<(V=$[2*V+1])?-1:P>V?1:k<N?-1:k>N?1:0)&&(d.add(E),d.add(F))}D!=-1&&(N=$[2*(V=g.U(D,0))],0>(P<(V=$[2*V+1])?-1:P>V?1:k<N?-1:k>N?1:0)&&(d.add(D),d.add(D))),(N=this.g.Qa(E,o))!=-1&&(p.add(N),this.g.Sa(E,o,-1)),(N=this.g.Qa(E,l))!=-1&&(p.add(N),this.g.Sa(E,l,-1)),(E=n.get(y++))!==-1&&(k=$[2*(P=g.U(E,0))],P=$[2*P+1])}while(E!=-1&&k===_&&P===M);for(k=p.size==1&&d.size==2,N=P=-1,F=0,D=p.size;F<D;F++){V=p.get(F);var G=this.Nc.xe(V);if(G==-1||p.cG(G)||(P=G),(V=this.Nc.lb(V))==-1||p.cG(V)||(N=V),P!=-1&&N!=-1)break}for(this.ae.VJ(M,_),F=0,D=p.size;F<D;F++)V=p.get(F),this.Nc.wd(V,-1);if(p.clear(!1),!k&&P!=-1&&N!=-1&&this.lO(P,N)){a=!0,this.Pi=this.ae.tm();break}for(F=0,D=d.size;F<D;F+=2){if(M=d.get(F),_=d.get(F+1),k?(M=this.Nc.Bu(P,N,M,!0),k=!1):M=this.Nc.addElement(M,-1),this.ae.sg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(_,o)==-1?this.g.Sa(_,o,M):this.g.Sa(_,l,M)}if(a)break;d.Dh(0)}return this.g.Ud(o),this.g.Ud(l),a},u.prototype.lO=function(a,n){return this.ae.compare(this.Nc,this.Nc.ka(a),n),a=this.ae.sg,this.ae.Mr(),a},u.tE=function(a){for(var n=a.md;n!=-1;n=a.ve(n))if(c.ba.Ic(a.jc(n)))return!0;return!1},u.aQ=function(a,n,o,l){return!!u.tE(a)&&((n=new u(l)).g=a,n.ra=o,15>a.gd?a=n.iP():n.jP())},u.W=function(a,n,o){return u.aQ(a,a.DF(),n,o)},u.fI=function(a,n,o,l,p){if(!u.tE(n))return!1;var d=new u(p);if(d.g=n,d.ra=o,d.Yz=a,d.gI())return l!=null&&l.Yt(d.Pi),!0;var y=new c.Ed;return y.VB(),n.Pc(y),(d=new u(p)).g=n,d.ra=o,d.Yz=a,a=d.gI(),y.VB(),n.Pc(y),!!a&&(l!=null&&l.Yt(d.Pi),!0)},u.Ol=function(a,n){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*n<1*a*n},u.gP=function(a,n,o,l){if(c.ba.Ic(n.K()))return new u(l).hP(a,n,o);throw c.i.ga("crack_A_with_B")},u.prototype.hP=function(a,n,o){var l=new c.l;a.yc(l);var p=new c.l;if(n.yc(p),p.X(o,o),!p.isIntersecting(l))return a;var d=a.Cb,y=null;d!=null&&(y=d.Gb),u.Ol(a,a.I())&&(y=c.ua.lj(a,p));var g=y!=null?y.getIterator():null,_=n.Ha();n=a.Ha();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];_.ab();)for(;_.Ia();){var $=_.ia();if(y!=null){for(g.Wo($,o),d=g.next();d!=-1;d=g.next())if(this.Zq(),n.Wb(y.ka(d),-1),n.Ia()){var E=(d=n.ia()).Fa($,null,M,null,o);for(d=0;d<E;++d){var k=M[d];if(k!=0&&k!=1){var P=n.xb(),F=new w;F.t=k,F.index=P,p.push(F)}}}}else{var D=new c.l;if($.yc(D),D.X(o,o),l.isIntersecting(D)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),d=n.ia(),k=new c.l,d.yc(k),k.isIntersecting(D))for(E=d.Fa($,null,M,null,o),d=0;d<E;++d)(k=M[d])!=0&&k!=1&&(P=n.xb(),(F=new w).t=k,F.index=P,p.push(F))}}}if(p.length==0)return a;for(p=p.sort(w.zy),a=a.Ja(),n.aj();n.ab()&&!n.Ia(););for(o=n.ia(),l=new c.jg,y=-1,d=0,g=p.length;d<g;){for(M=p[d].index,_=d+1;_<g&&p[_].index==M;)++_;for(;n.xb()<M;){if(this.Zq(),$=n.Ia(),k=n.gb,(D=$||!n.Qn()||n.Rn())&&a.pc(o,y!=k),y=k,!$)for(;n.ab()&&!n.Ia(););o=n.ia()}for(M=0;d<_;d++)(k=p[d].t)!=M&&(o.dh(M,k,l),M=k,k=n.gb,a.pc(l.get(),y!=k),y=k);if((D=($=n.Ia())||!n.Qn()||n.Rn())&&(o.dh(M,1,l),a.pc(l.get(),!1)),$)o=n.ia();else{for(;n.ab()&&!n.Ia(););o=n.Ia()?n.ia():null}d=_}for(o!=null&&(k=n.gb,(D=($=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,y!=k),y=k),$=n.Ia();;){if(!$){for(;n.ab()&&!($=n.Ia()););if(!$)break}o=n.ia(),k=n.gb,(D=($=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,y!=k),y=k}return a},u}();c.bu=C;var w=function(){function u(){}return u.zy=function(a,n){return a.index==n.index?a.t>n.t?1:a.t<n.t?-1:0:a.index>n.index?1:-1},u}()}(U||(U={})),function(c){var C;(C=c.FK||(c.FK={}))[C.Left=0]="Left",C[C.Right=1]="Right",C[C.Coincident=2]="Coincident",C[C.Undefined=3]="Undefined",C[C.Uncut=4]="Uncut";var w=function(n,o,l,p,d,y,g,_,M,$,E){this.Y=n,this.ct=o,this.Ps=l,this.ug=p,this.Nm=$,this.Cl=E};c.qY=w;var u=function(){function n(o,l){this.EH=o,this.Ji=l}return n.prototype.lM=function(o,l){var p=new c.h;this.Ji.D(o,p);var d=new c.h;return this.Ji.D(l,d),(p=p.compare(d))!=0?p:(o=this.Ji.Qa(o,this.EH))<(l=this.Ji.Qa(l,this.EH))?-1:o==l?0:1},n}(),a=function(n,o,l,p,d,y,g,_,M){this.ug=n,this.Ps=o,this.JA=l,this.PH=p,this.Gi=d,this.Cl=y,this.Nm=g,this.QH=_,this.JT=M};c.pY=a,c.GK=function(){function n(){}return n.EK=function(o,l,p,d,y,g){if(l.B())o=new w(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(o);else if(p.B())o=new w(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(o);else{var _=new c.hd;if(_.Ib(l),_.Ib(p),c.Vk.W(_,d,g,!0),_.gd==0)o=new w(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(o);else{for(l=0,p=_.Hd(),d=_.md;d!=-1;d=_.ve(d))for(g=_.Ob(d);g!=-1;g=_.Sb(g))for(var M=_.Ya(g),$=0,E=_.Ka(g);$<E;M=_.V(M),$++)_.Sa(M,p,l++);l=n.CM(p,_),n.YL(o,l,_,y)}}},n.CM=function(o,l){for(var p=l.gd,d=new c.ja(0),y=l.md;y!=-1;y=l.ve(y))for(var g=l.Ob(y);g!=-1;g=l.Sb(g))for(var _=l.Ya(g),M=0,$=l.Ka(g);M<$;_=l.V(_),M++)d.add(_);var E=new u(o,l);d.Wd(0,p,function(de,ce){return E.lM(de,ce)}),o=[];var k=[],P=l.Hd(),F=l.Hd();y=l.md,g=l.ve(y),$=new c.h;var D=new c.h,V=d.get(0),N=l.cd(V),G=l.Sf(N);l.D(V,$);var J=1;for(_=0;J<p-1;){var W=!1;for(M=J;M<p;M++)if(M!=_){var ee=d.get(M),Z=l.cd(ee),ae=l.Sf(Z);if(l.D(ee,D),!$.rb(D))break;G==y&&ae==g&&(W=n.pM(P,F,l,o,k,N,V,Z,ee))}if(W||_==J-1){if(W&&_==J-1&&J--,++_==p)break;V=d.get(_),N=l.cd(V),G=l.Sf(N),l.D(V,$)}W||(J=_+1)}for(p=[],y=l.md;y!=-1;y=l.ve(y))for(g=l.Ob(y);g!=-1;g=l.Sb(g))for(d=l.Ya(g),M=0,$=l.Ka(g);M<$;d=l.V(d),M++){if(0<=(_=l.Qa(d,F)))for(;_<k.length&&k[_].ug==d;)p.push(k[_++]);if(0<=(_=l.Qa(d,P)))for(;_<o.length&&o[_].ug==d;)p.push(o[_++])}return l.Ud(P),l.Ud(F),p},n.pM=function(o,l,p,d,y,g,_,M,$){var E=p.tj(g),k=p.tj(M),P=p.Ya(g),F=p.Ya(M),D=p.Na(_),V=p.Na($),N=!1,G=!1,J=!1,W=!1;return _!=P&&($!=F&&(N=n.qM(o,p,d,g,D,M,V)),$!=k&&(G=n.rM(o,p,d,g,D,M,$))),_!=E&&($!=F&&(J=n.sM(l,p,y,g,_,M,V,P)),$!=k&&(W=n.tM(l,p,y,g,_,M,$,P))),N&&G&&J?(o=d.length-1,y[W?y.length-2:y.length-1].Gi==2&&(d[o-1]=d[o],--d.length)):N&&G&&W&&y[y.length-1].Gi==2&&(y=d[d.length-1],--d.length,p.Qa(y.ug,o)==d.length&&p.Sa(y.ug,o,-1)),N||G||J||W},n.qM=function(o,l,p,d,y,g,_){var M=new c.zb,$=new c.zb,E=[0,0],k=[0,0],P=l.cc(y);return P==null&&(l.fd(y,M),P=M),(M=l.cc(_))==null&&(l.fd(_,$),M=$),2>(P=P.Fa(M,null,E,k,0))&&(d=new a(y,d,E[0],NaN,P,_,g,k[0],NaN),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1)),!0},n.rM=function(o,l,p,d,y,g,_){var M=new c.zb,$=new c.zb,E=[0,0],k=[0,0],P=l.cc(y);return P==null&&(l.fd(y,M),P=M),(M=l.cc(_))==null&&(l.fd(_,$),M=$),2>(P=P.Fa(M,null,E,k,0))&&(d=new a(y,d,E[0],NaN,P,_,g,k[0],NaN),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1),!0)},n.sM=function(o,l,p,d,y,g,_,M){var $=new c.zb,E=new c.zb,k=[0,0],P=[0,0],F=l.cc(y);return F==null&&(l.fd(y,$),F=$),($=l.cc(_))==null&&(l.fd(_,E),$=E),(F=F.Fa($,null,k,P,0))==2?(d=new a(y,d,k[0],k[1],F,_,g,P[0],P[1]),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1),!0):(E=!1,y==M&&(d=new a(y,d,k[0],NaN,F,_,g,P[0],NaN),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1),E=!0),E)},n.tM=function(o,l,p,d,y,g,_,M){var $=new c.zb,E=new c.zb,k=[0,0],P=[0,0],F=l.cc(y);return F==null&&(l.fd(y,$),F=$),($=l.cc(_))==null&&(l.fd(_,E),$=E),(F=F.Fa($,null,k,P,0))==2?(d=new a(y,d,k[0],k[1],F,_,g,P[0],P[1]),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1),!0):(E=!1,y==M&&(d=new a(y,d,k[0],NaN,F,_,g,P[0],NaN),p.push(d),0>(d=l.Qa(y,o))&&l.Sa(y,o,p.length-1),E=!0),E)},n.YL=function(o,l,p,d){var y=[];y[0]=new c.h,y[1]=new c.h,y[2]=new c.h,y[3]=new c.h;var g=new c.h,_=new c.h,M=new c.h,$=new c.h,E=null;d!=null&&(E=new c.jg).Qr();var k=0,P=null,F=new c.zb;new c.zb;for(var D=p.Ob(p.md);D!=-1;D=p.Sb(D)){for(var V=4,N=-1,G=-1,J=-1,W=-1,ee=NaN,Z=!0,ae=!1,de=!0,ce=!0,Ae=!0,be=0,Je=D,Ve=0,Ie=p.Ya(D),qt=p.Ka(D),Ii=0;Ii<qt;Ie=p.V(Ie),Ii++){var Ht=p.cc(Ie);if(Ht==null){if(!p.fd(Ie,F))continue;Ht=F}G==-1&&(G=Ie);for(var wt=0;k<l.length&&Ie==l[k].ug;){N=l[k].Ps;var bt=l[k].ug,ot=l[k].JA,Qt=l[k].Nm,nt=l[k].Cl,En=l[k].QH;if(l[k].Gi==2){if(ae||(Je=N,G=bt,Ve=ot,J=Qt,W=nt,ee=En,V=2,d!=null?P=new c.Ua:be=0,Ae=!1,ce=!0),ot=l[k].PH,En=l[k].JT,d!=null?(Ht.dh(wt,l[k].PH,E),P.pc(E.get(),ce)):be++,wt=ot,ae=!0,ce=Z=!1,k+1==l.length||l[k+1].Gi!=2||l[k+1].ug==bt&&l[k+1].JA!=wt){if(d!=null){var pt=new w(P,2,N,bt,ot,V,Je,G,Ve,Qt,nt);d.push(pt)}else null.add(be);Je=N,G=bt,Ve=ot,J=Qt,W=nt,ee=En,V=2,ae=Z=!1,ce=Ae=!0}}else{var yr=p.V(bt);if(k<l.length-1&&l[k+1].ug==yr&&l[k+1].Cl==nt&&l[k+1].Gi==2)ot!=wt&&(Ae&&(d!=null?P=new c.Ua:be=0),Z=0<k&&l[k-1].Ps==N?V==1?0:V==0?1:3:3,d!=null?(Ht.dh(wt,ot,E),P.pc(E.get(),ce),pt=new w(P,Z,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):(be++,null.add(be)),wt=ot,Je=N,G=bt,Ve=ot,J=Qt,W=nt,ee=En,V=Z,Z=de=!1,ce=Ae=!0);else if(!n.xM(o,p,l,k,g,_)){n.uM(p,l,k,D,Ie,M,$);var Pt=!1;if(yr=!1,pt=!0,!(g.rb(M)||_.rb(M)||g.rb($)||_.rb($))){y[0].N(g),y[1].N(_),y[2].N(M),y[3].N($),y.sort(c.h.pu);var _p=y[0],xp=y[1],Sp=y[2],kr=y[3];_p.rb(g)?xp.rb(_)?o?(yr=Pt=!0,pt=!1):Pt=!1:kr.rb(_)?o?pt=yr=Pt=!0:Pt=!1:(Pt=!0,pt=xp.rb(M)):xp.rb(g)?Sp.rb(_)?o?(yr=Pt=!0,pt=!1):Pt=!1:_p.rb(_)?o?pt=yr=Pt=!0:Pt=!1:(Pt=!0,pt=Sp.rb(M)):Sp.rb(g)?kr.rb(_)?o?(yr=Pt=!0,pt=!1):Pt=!1:xp.rb(_)?o?pt=yr=Pt=!0:Pt=!1:(Pt=!0,pt=kr.rb(M)):_p.rb(_)?o?(yr=Pt=!0,pt=!1):Pt=!1:Sp.rb(_)?o?pt=yr=Pt=!0:Pt=!1:(Pt=!0,pt=_p.rb(M))}Pt&&(Pt=Ie==bt,(ot!=wt||Pt&&wt==0)&&(Ae&&(d!=null?P=new c.Ua:be=0),d!=null?(Ht.dh(wt,ot,E),P.pc(E.get(),ce)):be++),pt?V!=1?((ot!=wt||Pt&&wt==0)&&(d!=null?(pt=new w(P,1,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be)),yr?(k>=l.length-2||l[k+2].Ps!=N)&&(V=0):V=1):((ot!=wt||Pt&&wt==0)&&(d!=null?(pt=new w(P,3,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be)),V=1):V!=0?((ot!=wt||Pt&&wt==0)&&(d!=null?(pt=new w(P,0,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be)),yr?(k>=l.length-2||l[k+2].Ps!=N)&&(V=1):V=0):((ot!=wt||Pt&&wt==0)&&(d!=null?(pt=new w(P,3,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be)),V=0),(ot!=wt||Pt&&wt==0)&&(wt=ot,Je=N,G=bt,Ve=ot,J=Qt,W=nt,ee=En,Z=de=!1,ce=Ae=!0))}}k++}wt!=1&&(Ae&&(d!=null?P=new c.Ua:be=0),d!=null?(Ht.dh(wt,1,E),P.pc(E.get(),ce)):be++,ce=Ae=!1,de=!0)}de&&(ot=1,bt=p.tj(D),bt=p.Na(bt),nt=Qt=-1,En=NaN,Z?d!=null?(pt=new w(P,4,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be):(Z=V==1?0:V==0?1:3,d!=null?(pt=new w(P,Z,N,bt,ot,V,Je,G,Ve,Qt,nt),d.push(pt)):null.add(be)))}},n.xM=function(o,l,p,d,y,g){var _=p[d].QH;if(_==1)return n.vM(o,l,p,d,y,g);if(_==0)return n.wM(o,l,p,d,y,g);throw c.i.Ra()},n.vM=function(o,l,p,d,y,g){var _=new c.zb,M=p[d].ug,$=p[d].Nm,E=p[d].Cl,k=-1,P=-1,F=-1,D=-1;if(!o&&0<d){var V=p[d-1];k=V.ug,P=V.Nm,F=V.Cl,D=V.Gi}var N=-1,G=-1,J=-1,W=-1;d<p.length-1&&(N=(V=p[d+1]).ug,G=V.Nm,J=V.Cl,W=V.Gi);var ee=l.V(M);return V=l.V(E),o?d==p.length-1||N!=M||G!=$||J!=V||W==2?((o=l.cc(E))==null&&(l.fd(E,_),o=_),g.N(o.lg()),y.nt(g),g.normalize(),y.normalize(),!1):((o=l.cc(E))==null&&(l.fd(E,_),o=_),y.N(o.lg()),(o=l.cc(V))==null&&(l.fd(V,_),o=_),g.N(o.lg()),y.Uq(),g.normalize(),y.normalize(),!1):0<d&&k==M&&P==$&&F==V&&D==2||d<p.length-1&&N==ee&&G==$&&J==V&&W==2?((o=l.cc(E))==null&&(l.fd(E,_),o=_),g.N(o.lg()),y.nt(g),g.normalize(),y.normalize(),!1):!(d<p.length-1&&N==M&&G==$&&J==V)||((o=l.cc(E))==null&&(l.fd(E,_),o=_),y.N(o.lg()),(o=l.cc(V))==null&&(l.fd(V,_),o=_),g.N(o.lg()),y.Uq(),g.normalize(),y.normalize(),!1)},n.wM=function(o,l,p,d,y,g){var _=new c.zb,M=p[d].ug,$=p[d].Nm,E=p[d].Cl,k=-1,P=-1,F=-1,D=-1;if(!o&&d<p.length-1){var V=p[d+1];k=V.ug,P=V.Nm,F=V.Cl,D=V.Gi}var N=-1,G=-1,J=-1;V=-1,0<d&&(N=(V=p[d-1]).ug,G=V.Nm,J=V.Cl,V=V.Gi);var W=l.V(M),ee=l.Na(E);return o?d!=0&&N==M&&G==$&&J==ee&&V!=2||((o=l.cc(E))==null&&(l.fd(E,_),o=_),g.N(o.lg()),y.nt(g),g.normalize(),y.normalize(),!1):!(0<d&&N==M&&G==$&&J==ee&&V==2||d<p.length-1&&k==W&&P==$&&F==ee&&D==2)||((o=l.cc(E))==null&&(l.fd(E,_),o=_),g.N(o.lg()),y.nt(g),g.normalize(),y.normalize(),!1)},n.uM=function(o,l,p,d,y,g,_){var M=new c.zb,$=o.cc(y);if($==null&&(o.fd(y,M),$=M),l=(p=l[p]).ug,p=p.JA,y=o.V(l),p==1)g.N($.lg()),y!=-1&&y!=o.tj(d)?(($=o.cc(y))==null&&(o.fd(y,M),$=M),_.N($.lg()),($=o.cc(l))==null&&o.fd(l,M)):_.N(g),g.Uq(),_.normalize(),g.normalize();else{if(p!=0)throw c.i.Ra();_.N($.lg()),g.nt(_),_.normalize(),g.normalize()}},n}()}(U||(U={})),function(c){var C;(C=c.XL||(c.XL={}))[C.Linear=0]="Linear",C[C.Angular=1]="Angular",C[C.Area=2]="Area";var w=function(){function d(y,g,_){this.pd=g,this.ci=_,this.qA=y}return d.prototype.Nb=function(y){return y instanceof d&&this.ci===y.ci},d.WF=function(y){return y.pd!==0?null:y.qA===-1?new d(-1,2,y.ci*y.ci):d.ah(l[y.qA])},d.ah=function(y){return(y=o[y])===void 0?null:y},d.UO=function(y,g,_){var M=null;if(_!=null)try{_.values[0]==="EPSG"&&(M=d.ah(parseInt(_.values[1])))}catch{}return M===null&&(M=new d(-1,y,g)),M},d.prototype.Fc=function(){return this.qA},d.prototype.xF=function(y){if(y.pd!=this.pd)throw c.i.Hb();return this.ci/y.ci},d.Ph=function(y,g,_){return g.xF(_)*y},d.SE=function(y,g,_,M,$){for(_=_.xF(M),M=0;M<g;M++)$[M]=y[M]*_},d}();c.Uc=w;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],l=[],p=0;p<u.length;p+=2)o[u[p]]=new w(u[p],2,u[p+1]);for(u=null,p=0;p<a.length;p+=2)o[a[p]]=new w(a[p],1,a[p+1]);for(a=null,p=0;p<n.length;p+=3)o[n[p]]=new w(n[p],0,n[p+1]),l[n[p]]=n[p+2];n=null}(U||(U={})),function(c){var C=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(u,a){a!==void 0?(this.pb=u,this.yb=a):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(u){var a=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=u},w.prototype.fN=function(){var u=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=a},w.prototype.ZM=function(u,a){this.pb=u.pb+a.pb,this.yb=u.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(u){if(typeof u=="number"){var a=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=u},w.prototype.Bg=function(u){var a=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Po=function(u){var a=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Ml=function(u,a){var n=Math.abs(u.pb)*Math.abs(a.pb);this.yb=u.yb*Math.abs(a.pb)+a.yb*Math.abs(u.pb)+u.yb*a.yb+2220446049250313e-31*Math.abs(n),this.pb=n},w.prototype.lm=function(u){var a=Math.abs(u.pb),n=this.pb/u.pb,o=(this.yb+Math.abs(n)*u.yb)/a;u.yb>.01*a&&(o*=1+(1+(u=u.yb/a))*u),this.pb=n,this.yb=o+2220446049250313e-31*Math.abs(n)},w.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);a+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?a=u=NaN:(u=0,a=Math.sqrt(this.yb));this.pb=u,this.yb=a},w.prototype.sin=function(u){var a=Math.sin(u.pb),n=Math.cos(u.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(n)+.5*a*u.yb)*u.yb+2220446049250313e-31*a},w.prototype.cos=function(u){var a=Math.sin(u.pb),n=Math.cos(u.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(a)+.5*n*u.yb)*u.yb+2220446049250313e-31*n},w.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.rg()&&this.yb!=0},w}();c.Xb=C}(U||(U={}));var bi=new U.h,Cs=new U.h,xo=new U.h,ks=new U.h,So=new U.h;(function(c){var C,w;(w=C||(C={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var u=function(){function a(n,o,l,p,d,y,g){o!==void 0?(this.ib=n,this.ek=o,this.dl=l,this.ki=p,this.za=y,this.cA=g,this.gw=d):(this.ib=n.ib,this.ek=n.ek,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.XG=!0}return a.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},a.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!c.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},a.vP=function(n,o,l,p,d,y,g){return new a(n,o,l,p,d,y,g)},a}();c.vY=u,C=function(){function a(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},a.prototype.Zg=function(n,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var l=0,p=this.wb.I();l<p;l++)this.Te.push(null)}this.Te[n]=o},a.prototype.ep=function(n,o){this.nd.T(n,1,o)},a.prototype.cp=function(n,o){this.nd.T(n,2,o)},a.prototype.QB=function(n,o){this.nd.T(n,6,o)},a.prototype.Up=function(n){return this.nd.U(n,6)},a.prototype.gx=function(n,o){this.nd.T(n,7,o)},a.prototype.sv=function(n){return this.nd.U(n,0)},a.prototype.JJ=function(n,o){this.dd.T(n,1,o)},a.prototype.NJ=function(n,o){this.dd.T(n,0,o)},a.prototype.EF=function(n){return this.dd.U(n,7)},a.prototype.ap=function(n,o){this.dd.T(n,3,o)},a.prototype.bp=function(n,o){this.dd.T(n,4,o)},a.prototype.pU=function(n){this.dd==null&&(this.dd=new c.ad(8));var o=this.dd.De();return this.dd.T(o,2,n),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.JQ=function(n){this.dd.kd(n)},a.prototype.rU=function(n){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.nd.De();return this.nd.T(o,0,o),this.nd.T(o,3,0),this.nd.T(o,6,0),this.gx(o,n),o>=this.Qi.size&&(n=16>o?16:c.P.truncate(3*o/2),this.Qi.resize(n),this.xo.resize(n)),this.Qi.set(o,0),this.xo.set(o,0),o},a.prototype.nF=function(n){this.nd.kd(n)},a.prototype.Qy=function(n){this.ud.kd(n),this.gd--},a.prototype.jI=function(n){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.ud.De(),l=0<=n?n:o;if(this.ud.T(o,0,l),0>n){if(l>=this.wb.I()){if(n=16>l?16:c.P.truncate(3*l/2),this.wb.resize(n),this.Te!=null)for(var p=0;p<n;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(o,4,2*l),this.gd++,o},a.prototype.yj=function(n,o,l){var p=o!=-1?this.Na(o):this.tj(n),d=p!=-1?this.V(p):-1,y=this.jI(l==null?this.gd:-1),g=this.Va(y);return l!=null&&this.wb.It(g,l),this.cj(y,n),this.Cc(y,d),this.Dc(y,p),d!=-1&&this.Dc(d,y),p!=-1&&this.Cc(p,y),l=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,y),o==p&&this.Kf(n,y),l&&d==-1&&(this.Cc(y,y),this.Dc(y,y)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),y},a.prototype.pm=function(){return this.lo==null&&(this.lo=new c.Ta(this.wb.description)),this.lo},a.prototype.$o=function(n,o){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(o==1?134217728:0))},a.prototype.Kn=function(n){return 134217728&this.dd.U(n,2)?1:0},a.prototype.cN=function(n){var o=this.Kg(n.K(),n.description);return n.K()==1736&&this.$o(o,n.Kn()),this.PD(o,n),o},a.prototype.dN=function(n){var o=this.Kg(n.K(),n.description);return this.QD(o,n),o},a.prototype.SV=function(n,o){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0)),this.nd.Ee(this.nd.Jg+n),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+n),this.xo.Jb(this.xo.size+n)},a.prototype.PD=function(n,o){this.SV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&o.Se!=null,p=0,d=o.ea();p<d;p++)if(!(2>o.Ka(p))){var y=this.wf(n,-1);this.mn(y,o.ec(p));for(var g=o.Ca(p),_=o.Wc(p);g<_;g++){var M=this.yj(y,-1,null);if(l)if(M=this.Va(M),(1&o.UF(g))!=0)this.Zg(M,null);else{var $=new c.jg;o.cc(g,$,!0),this.Zg(M,$.get())}}}},a.prototype.QD=function(n,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var l=0;for(o=o.I();l<o;l++)this.yj(n,-1,null)},a.prototype.JX=function(n,o,l){var p=this.V(n);if(p==-1)throw c.i.Ra();for(var d=this.pm(),y=this.cd(n),g=0,_=o.ql(l);g<_;g++){var M=this.Va(n),$=this.V(n),E=o.Xp(l,g);g==0&&(E.Vo(d),this.Fh(n,d)),E.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(E)),E.Ro(d),g<_-1?n=this.yj(y,$,d):this.Fh(p,d)}},a.prototype.IX=function(n,o,l){var p=this.V(n);if(p==-1)throw c.i.Ra();for(var d=this.pm(),y=this.cd(n),g=0,_=o.ql(l);g<_;g++){var M=this.Va(n),$=this.V(n),E=o.Xp(l,_-g-1);g==0&&(E.Ro(d),this.Fh(n,d)),E.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(E)),E.Vo(d),g<_-1?n=this.yj(y,$,d):this.Fh(p,d)}},a.prototype.DF=function(){var n=new c.l;n.Pa();for(var o=this.$q(),l=new c.h,p=!0,d=o.next();d!=-1;d=o.next())this.D(d,l),p?n.$b(l.x,l.y):n.Nk(l.x,l.y),p=!1;return n},a.prototype.Ib=function(n){var o=n.K();if(c.ba.Ic(o))return this.cN(n);if(o==550)return this.dN(n);throw c.i.Ra()},a.prototype.pN=function(n,o){var l=o.K();if(c.ba.Ic(l))this.PD(n,o);else{if(l!=550)throw c.i.Ra();this.QD(n,o)}},a.prototype.hN=function(n,o){var l=this.Kg(1736,n.description);if(2>n.Ka(o))return l;this.Kl.Gd(n,n.Ca(o),n.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(l,-1);this.mn(p,n.ec(o)||!0);var d=this.Te!=null&&n.Se!=null,y=n.Ca(o);for(o=n.Wc(o);y<o;y++){var g=this.yj(p,-1,null);if(d)if(g=this.Va(g),(1&n.UF(y))!=0)this.Zg(g,null);else{var _=new c.jg;n.cc(y,_,!0),this.Zg(g,_.get())}}return l},a.prototype.Ke=function(n){var o=this.jc(n),l=c.UK.Kg(o,this.Kl.description),p=this.I(n);if(p==0)return l;if(c.ba.Ic(o)){o=this.ea(n);for(var d=c.Zc.Qh(o+1),y=c.Zc.Or(o+1,0),g=l.description,_=0,M=g.Ba;_<M;_++){for(var $=g.ld(_),E=c.sa.Wa($),k=c.Zc.TE($,p),P=this.wb.vb($),F=0,D=0,V=0,N=this.Ob(n);N!=-1;N=this.Sb(N)){var G=0;this.ec(N)&&(G|=1),this.TS(N)&&(G|=4),G!=0&&y.uJ(D,G);var J=this.Ka(N);if(d.write(D++,V),V+=J,$==0){J=P;var W=k,ee=new c.h;for(G=this.Ya(N);F<V;G=this.V(G),F++){var Z=this.Va(G);J.uc(2*Z,ee),W.Vt(2*F,ee)}}else for(G=this.Ya(N);F<V;G=this.V(G),F++)for(Z=this.Va(G),W=0;W<E;W++)ee=P.gg(Z*E+W),k.rr(F*E+W,ee)}l.kn($,k),d.write(o,p)}l.KJ(y),l.LJ(d),l.Qc(16777215)}else if(o==550){for(g=l.description,l.resize(p),_=0,M=g.Ba;_<M;_++){for($=g.ld(_),E=c.sa.Wa($),k=l.vb($),P=this.wb.vb($),F=0,N=this.Ob(n),J=this.Ka(N),G=this.Ya(N);F<J;G=this.V(G),F++)for(Z=this.Va(G),W=0;W<E;W++)ee=P.gg(Z*E+W),k.rr(F*E+W,ee);l.kn($,k)}l.Qc(16777215)}return l},a.prototype.wB=function(n){for(var o=this.Ob(n);o!=-1;o=this.ar(o));o=this.KR(n);var l=this.ve(n);o!=-1?this.JJ(o,l):this.md=l,l!=-1?this.NJ(l,o):this.sw=o,this.JQ(n)},a.prototype.Kg=function(n,o){return o===void 0?this.VE(n,c.fe.pg()):this.VE(n,o)},a.prototype.VE=function(n,o){return n=this.pU(n),this.wb==null?this.wb=this.Kl=new c.ee(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=n:(this.NJ(n,this.sw),this.JJ(this.sw,n)),this.sw=n},a.prototype.ve=function(n){return this.dd.U(n,1)},a.prototype.KR=function(n){return this.dd.U(n,0)},a.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},a.prototype.CJ=function(n,o,l){o=this.yk[o],(n=this.EF(n))>=o.size&&o.resize(Math.max(c.P.truncate(1.25*n),16),-1),o.write(n,l)},a.prototype.FF=function(n,o){return(n=this.EF(n))<(o=this.yk[o]).size?o.read(n):-1},a.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var n=0;n<this.yk.length;n++)if(this.yk[n]==null)return this.yk[n]=c.Zc.Qh(0),n;return this.yk.push(c.Zc.Qh(0)),this.yk.length-1},a.prototype.sW=function(n){this.yk[n]=null},a.prototype.Ob=function(n){return this.dd.U(n,3)},a.prototype.mv=function(n){return this.dd.U(n,4)},a.prototype.I=function(n){return this.dd.U(n,5)},a.prototype.ea=function(n){return this.dd.U(n,6)},a.prototype.Ip=function(n,o,l){for(var p=0,d=this.md;d!=-1;d=this.ve(d)){var y=this.jc(d);if(c.ba.Ic(y)&&(!l||y==1736)){y=this.jc(d)==1736;for(var g=this.Ob(d);g!=-1;){for(var _=0,M=this.Ya(g);_<c.P.truncate(this.Ka(g)/2);){var $=this.V(M);if($==-1)break;var E=this.Va(M),k=this.Uh(E);k!=null?E=k.Rb():(k=this.Va($),E=this.wb.Ar(E,k)),E<=n?(E==0?p==0&&(p=-1):p=1,$!=this.tj(g)&&(this.gC($,M),this.qd($,!0))):M=this.V(M),_++}for(_=this.Ya(g),M=this.ec(g)?_:this.tj(g);0<this.Ka(g);){if(($=this.Na(M))==-1){this.qd(M,!0),p==0&&(p=-1);break}var P=this.Va($);if((k=this.Uh(P))!=null?E=k.Rb():(E=this.Va(M),E=this.wb.Ar(E,P)),E<=n)E==0?p==0&&(p=-1):p=1,this.gC($,M),this.qd($,!1),_==$&&(_=this.Ya(g));else if((M=this.Na(M))==_)break}M=this.Ka(g),o&&(y?3>M:2>M)?(g=this.ar(g),p=0<M?1:p==0?-1:p):g=this.Sb(g)}}}return p},a.prototype.gC=function(n,o){var l=this.Va(n),p=this.Va(o);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(p,l)),this.di!=null){for(p=0,l=this.di.length;p<l;p++)if(this.di[p]!=null){var d=this.Qa(n,p);d!=-1&&this.Sa(o,p,d)}}},a.prototype.Wl=function(n,o,l){var p=0,d=this.V(n);if(d==-1)throw c.i.Ra();for(var y=this.Va(n),g=this.Va(d),_=this.Uh(y),M=_==null?this.wb.Ar(y,g):_.Rb(),$=0;$<l;$++){var E=o[$];if(0<E&&1>E){var k=E;_!=null&&(k=0<M?_.Tx(E)/M:0),this.wb.fD(y,g,k,this.pm());var P=this.yj(this.cd(n),d,this.pm());if(p++,_!=null){var F=_.fl(0,E);k=this.Va(this.Na(P)),this.Zg(k,F),this.mf(P,F.xc()),$!=l-1&&o[$+1]!=1||(E=_.fl(E,1),this.Zg(k,E))}}}return p},a.prototype.HX=function(n,o,l){var p=0,d=this.V(n);if(d==-1)throw c.i.ga("internal error");var y=this.Va(n),g=this.Va(d),_=this.Uh(y),M=_==null?this.wb.Ar(y,g):_.Rb(),$=0;n=this.cd(n);for(var E=0;E<l;E++){var k=o[E];if($<k&&1>k){var P=k;if(_!=null&&(P=0<M?_.Tx(k)/M:0),this.wb.fD(y,g,P,this.pm()),P=this.tS(n,d,this.pm()),p++,_!=null){$=_.fl($,k);var F=this.Va(this.Na(P));this.Zg(F,$),this.Db(P,$.qa,$.ma),E!=l-1&&o[E+1]!=1||($=_.fl(k,1),P=this.Va(P),this.Zg(P,$))}}$=k}return p},a.prototype.tS=function(n,o,l){var p=o!=-1?this.Na(o):this.tj(n),d=p!=-1?this.V(p):-1,y=this.jI(l==null?this.gd:-1),g=this.Va(y);return l!=null&&this.wb.It(g,l),this.cj(y,n),this.Cc(y,d),this.Dc(y,p),d!=-1&&this.Dc(d,y),p!=-1&&this.Cc(p,y),l=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,y),o==p&&(l&&p!=-1||this.Kf(n,y)),l&&d==-1&&(this.Cc(y,y),this.Dc(y,y)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),y},a.prototype.pE=function(n,o,l){var p=this.Va(o),d=this.Va(l);if(0>p||d>this.gd-1)throw c.i.O("invalid call");if(p>d&&!this.ec(n))throw c.i.O("cannot iterate across an open path");for(n=0;o!=l;o=this.V(o))p=this.Va(o),(d=this.Uh(p))!=null?n+=d.Rb():(d=this.Va(this.V(o)),n+=this.wb.Ar(p,d));return n},a.prototype.Fh=function(n,o){var l=this.Va(n);this.wb.It(l,o),(l=this.Uh(l))!=null&&l.setStart(o),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&l.setEnd(o))},a.prototype.Xi=function(n,o){n=this.Va(n),this.wb.we(n,o)},a.prototype.mf=function(n,o){this.Db(n,o.x,o.y)},a.prototype.Db=function(n,o,l){var p=this.Va(n);this.wb.Db(p,o,l),(p=this.Uh(p))!=null&&p.UB(o,l),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&p.Sl(o,l))},a.prototype.D=function(n,o){this.wb.D(this.ud.U(n,0),o)},a.prototype.Hc=function(n,o){this.wb.Aa[0].uc(2*this.ud.U(n,0),o)},a.prototype.Oa=function(n){var o=new c.h;return this.wb.D(this.ud.U(n,0),o),o},a.prototype.ZF=function(n,o){this.jt.uc(2*n,o)},a.prototype.Vc=function(n,o,l){return this.wb.Vc(n,this.Va(o),l)},a.prototype.setAttribute=function(n,o,l,p){this.wb.setAttribute(n,this.Va(o),l,p)},a.prototype.Va=function(n){return this.ud.U(n,0)},a.prototype.kh=function(){var n=new c.h;return this.D(void 0,n),n.y},a.prototype.hq=function(n,o){n=this.Va(n),o=this.Va(o);var l=this.wb.Aa[0].o;return l[2*n]===l[2*o]&&l[2*n+1]===l[2*o+1]},a.prototype.Fv=function(n,o){n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*n]===o.x&&l[2*n+1]===o.y},a.prototype.rX=function(n,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=c.Zc.Fn(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,o)},a.prototype.YF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},a.prototype.Sa=function(n,o,l){o=this.di[o],n=this.Va(n),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(n,l)},a.prototype.Qa=function(n,o){return(n=this.Va(n))<(o=this.di[o]).size?o.read(n):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=c.Zc.Qh(0,-1),n;return this.di.push(c.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(n){this.di[n]=null},a.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},a.prototype.fd=function(n,o){var l=this.ud.U(n,2);if(l==-1)return!1;if(this.aA){var p=new c.Ta;this.Xi(n,p),o.setStart(p),this.Xi(l,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(n,0),bi),o.gm(0,bi),this.wb.Hc(this.ud.U(l,0),bi),o.gm(1,bi);return!0},a.prototype.hW=function(n,o,l){if(this.aA){var p=new c.Ta;this.Xi(n,p),l.setStart(p),this.Xi(o,p),l.setEnd(p)}else this.wb.Hc(n,bi),l.gm(0,bi),this.wb.Hc(o,bi),l.gm(1,bi)},a.prototype.wf=function(n,o){if(o!=-1){if(n!=this.Sf(o))throw c.i.Ra();var l=this.es(o)}else l=this.mv(n);var p=this.rU(n);return o!=-1&&this.ep(o,p),this.cp(p,o),this.ep(p,l),l!=-1?this.cp(l,p):this.ap(n,p),o==-1&&this.bp(n,p),this.Tl(n,this.ea(n)+1),p},a.prototype.iG=function(n,o,l,p){n=this.wf(n,-1);for(var d=0,y=o,g=!1;y==l&&(g=!0),this.cj(y,n),d++,(y=this.V(y))!=o;);return this.mn(n,!0),this.Xj(n,d),g&&(o=l),this.Kf(n,o),this.Yg(n,this.Na(o)),this.fp(n,!1),p!=null&&(p[0]=g),n},a.prototype.ar=function(n){var o=this.es(n),l=this.Sb(n),p=this.Sf(n);return o!=-1?this.cp(o,l):this.ap(p,l),l!=-1?this.ep(l,o):this.bp(p,o),this.vO(n),this.Tl(p,this.ea(p)-1),this.nF(n),l},a.prototype.vO=function(n){var o=this.Ya(n);if(o!=-1){for(var l=0,p=this.Ka(n);l<p;l++){var d=o;o=this.V(o),this.Qy(d)}o=this.Sf(n),this.Vj(o,this.I(o)-this.Ka(n))}this.Xj(n,0)},a.prototype.Sb=function(n){return this.nd.U(n,2)},a.prototype.es=function(n){return this.nd.U(n,1)},a.prototype.Ka=function(n){return this.nd.U(n,3)},a.prototype.ec=function(n){return(1&this.Up(n))!=0},a.prototype.mn=function(n,o){if(this.ec(n)!=o){if(0<this.Ka(n)){var l=this.Ya(n),p=this.tj(n);o?(this.Cc(p,l),this.Dc(l,p),l=this.Va(p)):(this.Cc(p,-1),this.Dc(l,-1),l=this.Va(p)),this.Zg(l,null)}this.QB(n,(1|this.Up(n))-1|(o?1:0))}},a.prototype.Sf=function(n){return this.nd.U(n,7)},a.prototype.TS=function(n){return(2&this.Up(n))!=0},a.prototype.KB=function(n,o){this.QB(n,(2|this.Up(n))-2|(o?2:0))},a.prototype.qz=function(n){if(this.YS(n))return this.Qi.get(this.sv(n));var o=new c.zb,l=this.Ya(n);if(l==-1)return 0;var p=new c.h;this.D(l,p);for(var d=0,y=0,g=this.Ka(n);y<g;y++,l=this.V(l)){var _=this.cc(l);if(_==null){if(!this.fd(l,o))continue;_=o}d+=_.Sx(p.x,p.y)}return this.fp(n,!0),this.Qi.set(this.sv(n),d),d},a.prototype.ir=function(n,o,l){o=this.Ek[o],n=this.sv(n),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(n,l)},a.prototype.uj=function(n,o){return(n=this.sv(n))<(o=this.Ek[o]).size?o.read(n):-1},a.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var n=0;n<this.Ek.length;n++)if(this.Ek[n]==null)return this.Ek[n]=c.Zc.Qh(0),n;return this.Ek.push(c.Zc.Qh(0)),this.Ek.length-1},a.prototype.xB=function(n){this.Ek[n]=null},a.prototype.UT=function(n,o,l){if(l==-1)throw c.i.O();if(o!=l){var p=this.Sb(l),d=this.es(l),y=this.Sf(l);d==-1?this.ap(y,p):this.cp(d,p),p==-1?this.bp(y,d):this.ep(p,d),this.Vj(y,this.I(y)-this.Ka(l)),this.Tl(y,this.ea(y)-1),d=o==-1?this.mv(n):this.es(o),this.ep(l,d),this.cp(l,o),o==-1?this.bp(n,l):this.ep(o,l),d==-1?this.ap(n,l):this.cp(d,l),this.Vj(n,this.I(n)+this.Ka(l)),this.Tl(n,this.ea(n)+1),this.gx(l,n)}},a.prototype.kj=function(n,o){this.wb.we(this.Va(o),this.pm()),this.yj(n,-1,this.pm())},a.prototype.qd=function(n,o){var l=this.cd(n),p=this.Na(n),d=this.V(n);p!=-1&&this.Cc(p,d);var y=this.Ka(l);if(n==this.Ya(l)&&this.Kf(l,1<y?d:-1),d!=-1&&this.Dc(d,p),n==this.tj(l)&&this.Yg(l,1<y?p:-1),p!=-1&&d!=-1){p=this.Va(p);var g=this.Va(d);o?(o=this.Uh(p))!=null&&(p=new c.h,this.wb.D(g,p),o.Rc(p)):(g=this.Va(n),o=this.Uh(g),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(l,y-1),l=this.Sf(l),this.Vj(l,this.I(l)-1),this.Qy(n),d},a.prototype.Ya=function(n){return this.nd.U(n,4)},a.prototype.tj=function(n){return this.nd.U(n,5)},a.prototype.V=function(n){return this.ud.U(n,2)},a.prototype.Na=function(n){return this.ud.U(n,1)},a.prototype.cd=function(n){return this.ud.U(n,3)},a.prototype.hc=function(n,o){return this.yj(n,-1,o)},a.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof u)return new u(n);var o,l=-1,p=-1,d=-1,y=0,g=!1;for(o=this.md;o!=-1;o=this.ve(o))if(!n||c.ba.Ic(this.jc(o))){for(l=this.Ob(o);l!=-1;l=this.Sb(l))if(d=p=this.Ya(l),y=0,p!=-1){g=!0;break}if(g)break}return u.vP(this,o,l,p,d,y,n)},a.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var o=0,l=this.Te.length;o<l;o++)this.Te[o]!=null&&this.Te[o].Pc(n)},a.prototype.lr=function(n,o,l,p){p?this.JX(n,o,l):this.IX(n,o,l)},a.prototype.Dc=function(n,o){this.ud.T(n,1,o)},a.prototype.Cc=function(n,o){this.ud.T(n,2,o)},a.prototype.cj=function(n,o){this.ud.T(n,3,o)},a.prototype.Xj=function(n,o){this.nd.T(n,3,o)},a.prototype.Kf=function(n,o){this.nd.T(n,4,o)},a.prototype.Yg=function(n,o){this.nd.T(n,5,o)},a.prototype.Tl=function(n,o){this.dd.T(n,6,o)},a.prototype.Vj=function(n,o){this.dd.T(n,5,o)},a.prototype.kJ=function(n){var o=n;do{var l=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,l),o=l}while(o!=n)},a.prototype.XB=function(n){this.gd=n},a.prototype.br=function(n){var o=this.es(n),l=this.Sb(n),p=this.Sf(n);o!=-1?this.cp(o,l):this.ap(p,l),l!=-1?this.ep(l,o):this.bp(p,o),this.Kf(n,-1),this.Yg(n,-1),this.nF(n)},a.prototype.oi=function(n,o){var l=this.Na(n),p=this.V(n);if(l!=-1&&this.Cc(l,p),p!=-1&&this.Dc(p,l),l!=-1&&p!=-1)if(l=this.Va(l),p=this.Va(p),o){if((o=this.Uh(l))!=null){var d=new c.h;this.wb.D(p,d),o.Rc(d)}}else o=this.Va(n),o=this.Uh(o),this.Zg(l,o),o!=null&&(d=new c.h,this.wb.D(l,d),o.Ec(d));this.Qy(n)},a.prototype.YS=function(n){return(4&this.Up(n))!=0},a.prototype.fp=function(n,o){this.QB(n,(4|this.Up(n))-4|(o?4:0))},a.prototype.nx=function(n,o){var l=this.ud.o;this.wb.oc();var p=this.wb.Aa[0].o;n.Wd(0,o,function(d,y){var g=l[5*d];d=l[5*y],y=p[2*g],g=p[2*g+1];var _=p[2*d];return g<(d=p[2*d+1])?-1:g>d?1:y<_?-1:y>_?1:0})},a.prototype.eS=function(){for(var n=this.md;n!=-1;n=this.ve(n))if(!c.ba.Ic(this.jc(n)))return!0;return!1},a.prototype.cC=function(n,o){for(var l=this.Ob(n),p=this.Ob(o),d=this.mv(n),y=this.mv(o),g=this.Ob(n);g!=-1;g=this.Sb(g))this.gx(g,o);for(g=this.Ob(o);g!=-1;g=this.Sb(g))this.gx(g,n);this.ap(n,p),this.ap(o,l),this.bp(n,y),this.bp(o,d),l=this.I(n),p=this.ea(n),d=this.ea(o),this.Vj(n,this.I(o)),this.Vj(o,l),this.Tl(n,d),this.Tl(o,p),l=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(o,2)),this.dd.T(o,2,l)},a}(),c.hd=C})(U||(U={})),function(c){var C=function(w){function u(a,n,o,l){var p=w.call(this)||this;return p.aa=new c.l,a===void 0?p.PE():typeof a=="number"?p.QO(a,n,o,l):a instanceof c.Ta?n!==void 0?p.Su(a,n,o):p.RO(a):a instanceof c.sa?n!==void 0?p.TO(a,n):p.SO(a):a instanceof c.l?p.PO(a):p.PE(),p}return St(u,w),u.prototype.Su=function(a,n,o){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a,n,o)},u.prototype.PO=function(a){this.description=c.fe.pg(),this.aa.L(a),this.aa.normalize()},u.prototype.SO=function(a){if(a==null)throw c.i.O();this.description=a,this.aa.Pa()},u.prototype.TO=function(a,n){if(a==null)throw c.i.O();this.description=a,this.aa.L(n),this.aa.normalize()},u.prototype.PE=function(){this.description=c.fe.pg(),this.aa.Pa()},u.prototype.RO=function(a){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a)},u.prototype.QO=function(a,n,o,l){this.description=c.fe.pg(),this.L(a,n,o,l)},u.prototype.L=function(a,n,o,l){if(this.wc(),typeof a=="number")this.aa.L(a,n,o,l);else for(this.Pa(),n=0,o=a.length;n<o;n++)this.$b(a[n])},u.prototype.Zo=function(a){if(this.wc(),!a.aT())throw c.i.O();this.aa.L(a)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.ik=function(){return this.aa.ik()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(a){if(a instanceof c.h)this.wc(),this.aa.$b(a);else if(a instanceof c.l)this.wc(),this.aa.$b(a);else if(a instanceof c.Ta){if(this.wc(),!a.Bc()){var n=a.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,l=n.Ba;o<l;o++)for(var p=n.Fd(o),d=c.sa.Wa(p),y=0;y<d;y++){var g=a.Vc(p,y),_=this.Vg(p,y);_.$b(g),this.setInterval(p,y,_)}}}}else if(a instanceof u&&!a.B())for((n=a.description)!=this.description&&this.Ll(n),this.aa.$b(a.aa),o=1,l=n.Ba;o<l;o++)for(p=n.ld(o),d=c.sa.Wa(p),y=0;y<d;y++)g=a.Vg(p,y),(_=this.Vg(p,y)).$b(g),this.setInterval(p,y,_)},u.prototype.vu=function(a,n,o){if(n!==void 0){this.aa.L(a.D(),n,o),o=1;for(var l=(n=a.description).Ba;o<l;o++)for(var p=n.Fd(o),d=c.sa.Wa(p),y=0;y<d;y++){var g=a.Vc(p,y);this.setInterval(p,y,g,g)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,l=(n=a.description).Ba;o<l;o++)for(p=n.Fd(o),d=c.sa.Wa(p),y=0;y<d;y++)g=a.Vc(p,y),this.setInterval(p,y,g,g)},u.prototype.setInterval=function(a,n,o,l){if(o=typeof o=="number"?new c.Oc(o,l):o,this.wc(),a==0)if(n==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(n!=1)throw c.i.de();this.aa.G=o.pa,this.aa.H=o.wa}else this.qD(0,a,n,o.pa),this.qD(1,a,n,o.wa)},u.prototype.X=function(a,n){this.wc(),this.aa.X(a,n)},u.prototype.Pc=function(a){if(a instanceof c.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var n=new c.JK;this.So(n),n.SS()?n.Pa():a.hC(n)}},u.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)a.la[n]=this.la[n]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.rF()},u.prototype.Rb=function(){return this.aa.tR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(a){this.copyTo(a)},u.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},u.prototype.So=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(a,n){var o=new c.Oc;return o.L(this.Pd(0,a,n),this.Pd(1,a,n)),o},u.prototype.If=function(a,n){n.Pf(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var l=this.description.ld(a),p=c.sa.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(0,l,d));n.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(l=this.description.ld(a),p=c.sa.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(1,l,d));n.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(l=this.description.ld(a),p=c.sa.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(0,l,d));n.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(l=this.description.ld(a),p=c.sa.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(1,l,d));n.Db(this.aa.C,this.aa.G);break;default:throw c.i.de()}},u.prototype.hB=function(a,n){a=this.aa.hB(a),n.na(a.x,a.y)},u.prototype.fR=function(a,n){return n*(a.Qq-2)},u.prototype.sF=function(a,n,o){if(this.aa.B())throw c.i.ga("empty geometry");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(n))throw c.i.O();var l=this.description.Rf(n);return this.qu(),0<=l?this.la[this.fR(this.description,a)+this.description.GR(l)-2+o]:c.sa.te(n)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=u.Ig(this.description,0),n=u.Ig(this.description,1),o=0,l=1,p=this.description.Ba;l<p;l++){var d=this.description.ld(l),y=c.sa.Wa(d);d=c.sa.te(d);for(var g=0;g<y;g++)this.la[a+o]=d,this.la[n+o]=d,o++}}},u.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var n=c.fe.Kw(a,this.description),o=[],l=u.Ig(this.description,0),p=u.Ig(this.description,1),d=u.Ig(a,0),y=u.Ig(a,1),g=0,_=1,M=a.Ba;_<M;_++){var $=a.ld(_),E=c.sa.Wa($);if(n[_]==-1){var k=c.sa.te($);for($=0;$<E;$++)o[d+g]=k,o[y+g]=k,g++}else for(k=this.description.bk(n[_])-2,$=0;$<E;$++)o[d+g]=this.la[l+k],o[y+g]=this.la[p+k],g++,k++}this.la=o}else this.la=null;this.description=a},u.prototype.Pd=function(a,n,o){if(this.aa.B())throw c.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(n))throw c.i.de();var l=this.description.Rf(n);return 0<=l?(this.qu(),this.la[u.Ig(this.description,a)+this.description.bk(l)-2+o]):c.sa.te(n)},u.prototype.qD=function(a,n,o,l){if(this.wc(),n==0)a!=0?o!=0?this.aa.H=l:this.aa.C=l:o!=0?this.aa.G=l:this.aa.v=l;else{if(o>=c.sa.Wa(n))throw c.i.de();if(!this.hasAttribute(n)){if(c.sa.yG(n,l))return;this.se(n)}n=this.description.Rf(n),this.qu(),this.la[u.Ig(this.description,a)+this.description.bk(n)-2+o]=l}},u.Ig=function(a,n){return n*(a.Be.length-2)},u.prototype.Fa=function(a){this.wc();var n=new c.l;return a.A(n),this.aa.Fa(n)},u.prototype.isIntersecting=function(a){return a instanceof c.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},u.prototype.Lu=function(a,n){this.wc(),a.B()?this.Pa():n!==void 0?this.vu(a,n,void 0):this.aa.Lu(a.Ng(),a.kh())},u.prototype.offset=function(a,n){this.wc(),this.aa.offset(a,n)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(a){if(a===void 0){if(a=new c.Ta(this.description),this.B())return a;for(n=this.description.Ba,o=1;o<n;o++)for(l=this.description.Fd(o),p=c.sa.Wa(l),d=0;d<p;d++)y=.5*(this.Pd(0,l,d)+this.Pd(1,l,d)),a.setAttribute(l,d,y);return a.Db(this.aa.ik(),this.aa.Lp()),a}if(a.Pf(this.description),this.B())a.Pa();else{for(var n=this.description.Ba,o=1;o<n;o++)for(var l=this.description.ld(o),p=c.sa.Wa(l),d=0;d<p;d++){var y=.5*(this.sF(0,l,d)+this.sF(1,l,d));a.setAttribute(l,d,y)}a.Db(this.aa.tf())}},u.prototype.hz=function(){return new c.Ta(this.aa.hz())},u.prototype.contains=function(a){return a instanceof c.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},u.prototype.ZO=function(a){return this.aa.contains(a)},u.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof u)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.dc=function(){var a=this.description.dc();if(a=c.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)a=c.P.Vh(a,this.la[n]);return a},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.ng=function(){return c.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(c.ba);c.Hh=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o){u===void 0?this.Pa():(this.v=u,this.G=a,this.C=n,this.H=o)}return w.construct=function(u,a,n,o){var l=new w;return l.v=u,l.G=a,l.C=n,l.H=o,l},w.prototype.L=function(u,a,n,o){typeof u=="number"?n!==void 0?(this.v=u,this.G=a,this.C=n,this.H=o,this.normalize()):(this.v=u,this.G=a,this.C=u,this.H=a):u instanceof c.h?a!==void 0?(this.v=u.x-.5*a,this.C=this.v+a,this.G=u.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof w?this.L(u.v,u.G,u.C,u.H):u instanceof c.Oc&&(u.B()||a.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=a.pa,this.H=a.wa))},w.prototype.bx=function(u,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<a;n++){var o=u[n];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(u==null||u.length==0)this.Pa();else for(o=u[0],this.L(o.x,o.y),n=1;n<u.length;n++)a=u[n],this.Nk(a.x,a.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(u,a){typeof u=="number"?this.B()?(this.v=u,this.G=a,this.C=u,this.H=a):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a)):u instanceof c.h||u instanceof c.Od?this.$b(u.x,u.y):u instanceof w&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},w.prototype.Nk=function(u,a){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a)},w.prototype.X=function(u,a){this.B()||(this.v-=u,this.C+=u,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},w.prototype.zoom=function(u,a){this.B()||this.L(this.tf(),u*this.S(),a*this.da())},w.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.CG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},w.prototype.hB=function(u){switch(u){case 0:return c.h.construct(this.v,this.G);case 1:return c.h.construct(this.v,this.H);case 2:return c.h.construct(this.C,this.H);case 3:return c.h.construct(this.C,this.G);default:throw c.i.de()}},w.prototype.iB=function(u){if(u==null||4>u.length)throw c.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=c.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=c.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=c.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=c.h.construct(this.C,this.G)},w.prototype.rF=function(){return this.B()?0:this.S()*this.da()},w.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.ik=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(u,a){this.B()||(this.v+=u,this.G+=a,this.C+=u,this.H+=a)},w.prototype.Lu=function(u,a){if(a!==void 0)this.move(u-this.ik(),a-this.Lp());else if(u instanceof c.h)this.Lu(u.x,u.y);else{if(!(u instanceof c.Ta))throw c.i.O();a=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=u.Ng()-a,this.C=u.Ng()+a,this.G=u.kh()-n,this.H=u.kh()+n}},w.prototype.offset=function(u,a){this.v+=u,this.C+=u,this.G+=a,this.H+=a},w.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=u,this.C=a,u=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=u,this.H=a}},w.prototype.fn=function(u){u.na(this.v,this.G)},w.prototype.VI=function(u){u.na(this.C,this.G)},w.prototype.YI=function(u){u.na(this.v,this.H)},w.prototype.gn=function(u){u.na(this.C,this.H)},w.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return c.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return c.h.construct(this.v,this.G)},w.prototype.contains=function(u,a){if(a!==void 0)return u>=this.v&&u<=this.C&&a>=this.G&&a<=this.H;if(u instanceof c.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof c.h)return this.contains(u.x,u.y);if(u instanceof w)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw c.i.O()},w.prototype.jm=function(u,a){if(a!==void 0)return u>this.v&&u<this.C&&a>this.G&&a<this.H;if(u instanceof c.h)return this.jm(u.x,u.y);if(u instanceof w)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw c.i.O()},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},w.prototype.dc=function(){var u=this.v;u=c.P.truncate(u^u>>>32);var a=c.P.Vh(u);return u=this.C,u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a),u=this.G,u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a),u=this.H,u=c.P.truncate(u^u>>>32),c.P.Vh(u,a)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(u,a){var n=this.ak(u),o=this.ak(a);if(n&o)return 0;if(!(n|o))return 4;var l=(n!=0?1:0)|(o!=0?2:0);do{var p=a.x-u.x,d=a.y-u.y;if(p>d?n&w.TC?(n&w.lu?(u.y+=d*(this.v-u.x)/p,u.x=this.v):(u.y+=d*(this.C-u.x)/p,u.x=this.C),n=this.ak(u)):o&w.TC?(o&w.lu?(a.y+=d*(this.v-a.x)/p,a.x=this.v):(a.y+=d*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)):n!=0?(n&w.mu?(u.x+=p*(this.G-u.y)/d,u.y=this.G):(u.x+=p*(this.H-u.y)/d,u.y=this.H),n=this.ak(u)):(o&w.mu?(a.x+=p*(this.G-a.y)/d,a.y=this.G):(a.x+=p*(this.H-a.y)/d,a.y=this.H),o=this.ak(a)):n&w.UC?(n&w.mu?(u.x+=p*(this.G-u.y)/d,u.y=this.G):(u.x+=p*(this.H-u.y)/d,u.y=this.H),n=this.ak(u)):o&w.UC?(o&w.mu?(a.x+=p*(this.G-a.y)/d,a.y=this.G):(a.x+=p*(this.H-a.y)/d,a.y=this.H),o=this.ak(a)):n!=0?(n&w.lu?(u.y+=d*(this.v-u.x)/p,u.x=this.v):(u.y+=d*(this.C-u.x)/p,u.x=this.C),n=this.ak(u)):(o&w.lu?(a.y+=d*(this.v-a.x)/p,a.x=this.v):(a.y+=d*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)),(n&o)!=0)return 0}while(n|o);return l},w.prototype.ak=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},w.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},w.prototype.ub=function(u){return u instanceof c.h?Math.sqrt(this.dK(u)):Math.sqrt(this.px(u))},w.prototype.px=function(u){var a=0,n=0,o=this.v-u.C;return o>a&&(a=o),(o=this.G-u.H)>n&&(n=o),(o=u.v-this.C)>a&&(a=o),(o=u.G-this.H)>n&&(n=o),a*a+n*n},w.prototype.dK=function(u){var a=0,n=0,o=this.v-u.x;return o>a&&(a=o),(o=this.G-u.y)>n&&(n=o),(o=u.x-this.C)>a&&(a=o),(o=u.y-this.H)>n&&(n=o),a*a+n*n},w.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},w.lu=1,w.mu=4,w.TC=3,w.UC=12,w}();c.l=C}(U||(U={})),function(c){var C,w;(w=C||(C={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var u=function(){function a(n,o){this.ei=n,this.ZG=o}return a.prototype.qr=function(n,o,l){this.ei.FX(l,n,o,this.ZG)},a.prototype.bq=function(n){return this.ei.Tr(n,this.ZG)},a}();C=function(){function a(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new c.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return a.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.bd=function(n,o){if(!this.Rv)throw c.i.Hb();var l=new c.l;l.L(o),this.io.add(n),this.Fb.push(l)},a.prototype.Hp=function(){if(!this.Rv)throw c.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.DD=function(n,o){if(!this.Qv)throw c.i.Hb();var l=new c.l;l.L(o),this.io.add(n),this.Fb.push(l)},a.prototype.dF=function(){if(!this.Qv)throw c.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new c.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.zD=function(n,o){if(!this.Pv)throw c.i.Hb();var l=new c.l;l.L(o),this.ew.add(n),this.rd.push(l)},a.prototype.cF=function(){if(!this.Pv)throw c.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.mS();break;case 2:n=this.jS();break;case 3:n=this.lS();break;case 4:n=this.QX();break;case 5:n=this.MX();break;case 6:n=this.NX();break;case 7:n=this.OX();break;case 8:n=this.tx();break;case 9:n=this.dC();break;case 10:n=this.Pz();break;case 11:n=this.eT();break;case 12:n=this.bT();break;case 13:n=this.cT();break;case 14:n=this.dT();break;case 15:n=this.fJ();break;case 16:n=this.eJ();break;default:throw c.i.Ra()}return!this.Jc},a.prototype.WB=function(n){this.ra=n},a.prototype.oz=function(n){return this.Fb[n]},a.prototype.Wy=function(n){return this.rd[n]},a.prototype.pl=function(n){return this.io.read(n)},a.prototype.jl=function(n){return this.ew.read(n)},a.Oz=function(n){return(1&n)==1},a.gq=function(n){return(1&n)==0},a.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},a.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var o=this.rd[n];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},a.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)o=this.rd[n],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.QX=function(){var n=this.Md.get(--this.qe),o=n>>1;return a.gq(n)?(this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=10,!0)},a.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},a.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.OX=function(){var n=this.Md.get(this.qe-1),o=this.Ff.get(this.Tg-1),l=this.Tr(n,!0),p=this.Tr(o,!1);return l>p?this.tx():l<p?this.dC():a.Oz(n)?this.tx():a.Oz(o)?this.dC():this.tx()},a.prototype.tx=function(){var n=this.Md.get(--this.qe),o=n>>1;if(a.gq(n))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var l=this.Bd.getData(n);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=l}return 0<this.ff.size()?(this.qw.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Kj=new c.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.dC=function(){var n=this.Ff.get(--this.Tg),o=n>>1;if(a.gq(n))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var l=this.Bd.getData(n);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=l}return 0<this.sd.size()?(this.qo.zB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Jj=new c.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=4,!0},a.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},a.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=7,!0},a.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(n,o,l){this.Cm==null&&(this.Cm=new c.Zt),l=new u(this,l),this.Cm.sort(n,0,o,l)},a.prototype.FX=function(n,o,l,p){var d=this;n.Wd(o,l,function(y,g){var _=d.Tr(y,p),M=d.Tr(g,p);return _<M||_==M&&a.gq(y)&&a.Oz(g)?-1:1})},a.prototype.Tr=function(n,o){var l=.5*this.ra;return o?(o=this.Fb[n>>1],a.gq(n)?o.G-l:o.H+l):(o=this.rd[n>>1],a.gq(n)?o.G-l:o.H+l)},a}(),c.sC=C}(U||(U={})),function(c){var C=function(){function w(){}return w.construct=function(u,a,n,o,l,p){var d=new w;return d.v=u,d.G=a,d.Xe=n,d.C=o,d.H=l,d.Dg=p,d},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.SS=function(){return isNaN(this.Xe)},w.prototype.L=function(u,a,n,o,l,p){o!==void 0?typeof u=="number"?(this.v=u,this.G=a,this.Xe=n,this.C=o,this.H=l,this.Dg=p):(this.v=u.x-.5*a,this.C=this.v+a,this.G=u.y-.5*n,this.H=this.G+n,this.Xe=u.z-.5*o,this.Dg=this.Xe+o):(this.v=u,this.G=a,this.Xe=n,this.C=u,this.H=a,this.Dg=n)},w.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},w.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},w.prototype.Nk=function(u,a,n){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},w.prototype.$b=function(u,a,n){if(typeof u=="number")this.B()?(this.v=u,this.G=a,this.Xe=n,this.C=u,this.H=a,this.Dg=n):this.Nk(u,a,n);else if(u instanceof c.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof w))throw c.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},w.prototype.construct=function(u,a,n){u.B()||a.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=a.pa,this.H=a.wa,this.Xe=n.pa,this.Dg=n.wa)},w.prototype.iB=function(u){if(u==null||8>u.length)throw c.i.O();u[0]=new c.Od(this.v,this.G,this.Xe),u[1]=new c.Od(this.v,this.H,this.Xe),u[2]=new c.Od(this.C,this.H,this.Xe),u[3]=new c.Od(this.C,this.G,this.Xe),u[4]=new c.Od(this.v,this.G,this.Dg),u[5]=new c.Od(this.v,this.H,this.Dg),u[6]=new c.Od(this.C,this.H,this.Dg),u[7]=new c.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var a=u[0];for(this.L(a.x,a.y,a.z),a=1;a<u.length;a++){var n=u[a];this.Nk(n.x,n.y,n.z)}}},w}();c.JK=C}(U||(U={})),function(c){(function(C){C.Ra=function(){var w=Error();return w.message="Internal Error",w},C.Fe=function(){var w=Error();return w.message="Not Implemented",w},C.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},C.Hb=function(){var w=Error();return w.message="Invalid Call",w},C.O=function(w){var u=Error();return u.message="Illegal Argument Exception",w!==void 0&&(u.message+=": "+w),u},C.hu=function(w){var u=Error();return u.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",u},C.ga=function(w){var u=Error();return u.message="Geometry Exception: "+w,u},C.BK=function(){var w=Error();return w.message="Assert Failed Exception",w},C.de=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},C.RC=function(){var w=Error();return w.message="UserCancelException",w}})(c.i||(c.i={}))}(U||(U={})),function(c){(c=c.dm||(c.dm={}))[c.forward=0]="forward",c[c.reverse=1]="reverse"}(U||(U={})),function(c){var C=function(){function a(n,o){this.Xa=n,this.AH=o,this.GH=-1,this.ul=!1}return a.prototype.re=function(){},a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var n=this.AH.Oa(this.GH);n.scale(this.Xa.fc);var o=new c.Ea;return this.Xa.ny(n,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),w=function(){function a(n,o,l){this.Xa=n,this.tw=o,this.Zn=!1,this.fo=l,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new c.Ea,this.wk=[]}return a.prototype.re=function(){},a.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var n=c.ba.kg(this.sq);return c.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}n=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var o=this.wk.length=0,l=new c.h,p=new c.h,d=[0];this.td.Ia()&&8>this.AA;){var y=this.td.ia();if(l.N(y.bc()),p.N(y.xc()),l.scale(this.Xa.fc),p.scale(this.Xa.fc),c.ej.Ou(l,p)?l.x=p.x:c.ej.Mu(l,p)&&(p.x=l.x),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,p,this.Xa.LA,this.Xa.at,d,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(y=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,y,y.length-1)),c.ej.Nu(l,p)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(d[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}n==null&&(n=new c.Ea).$k(null,0),this.JD(n),o++}if(this.dw[0]=0,0<o){for(d=this.td.xb();0<o;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.kk())),l.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(c.ej.Ou(l,p)?l.x=p.x:c.ej.Mu(l,p)&&(p.x=l.x)),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,l,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(n),o--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.td.Wb(d),this.td.ia(),o=c.ua.mj(null,n,!0),c.Hg.Ok(n,o,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),n=c.ba.kg(this.sq),c.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.JD=function(n){var o=this.wk[0],l=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var d=this.fi+1.570796326794897;l=d+3.141592653589793-(this.fi-this.Pj[0])}else l=(d=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var y=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),g=!1;if(Math.abs(l-d)<=.5*this.Xa.co)if(y){var _=n.Oa(n.I()-2);_.scale(this.Xa.fc);var M=new c.ha(0);for(c.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,_.x,_.y,M),_=M.u;_<=d;)_+=6.283185307179586;for(;_>d;)_-=6.283185307179586;_<l&&(g=!0)}else g=!0;g?(n.yB(0,n.I()-1),this.ul||((o=new c.h).N(n.Oa(n.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<o.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),y||(l=.5*(l+d))):(y?((d=new c.h).N(o),d.scale(1/this.Xa.fc),n.xf(0,-1,d)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],d,l,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.AA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,l,p,this.ul,this.uk,n),this.fi=this.Is[0]},a.prototype.sy=function(n,o){return this.Xa.sy(this.wk,n,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),u=function(){function a(){}return a.buffer=function(n,o,l,p,d,y){if(n==null)throw c.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new c.Ea(n.description);var g=new a;g.Sg=o,g.Kc=c.cb.tc(o);var _=c.cb.xv(g.Kc);if(g.Vb=y,g.Ub=c.cb.gv(g.Kc),g.lc=_*(2-_),g.fc=g.Kc.Id().ci,g.ra=g.Sg.Mn(),g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.Bq=1.570796326794897/g.fc,g.KY=3.141592653589793/g.fc,g.Ls=6.283185307179586/g.fc,g.LY=g.Ls/6,g.GA=0,g.JY=1.5707963267948966*g.Ub/g.GA,l==4?(g.Ae=2,g.Yv=!0):(g.Ae=l,g.Yv=!1),g.La=p,g.sb=Math.abs(p),isNaN(d)||.001>d?g.tX():g.bo=d,l=n.K(),c.ba.zd(l)?((l=new c.Ua(n.description)).pc(n,!0),n=l,l=1607):l==197&&(l=new c.l,n.A(l),l.S()<=g.ra||l.da()<=g.ra?((l=new c.Ua(n.description)).bd(n,!1),n=l,l=1607):((l=new c.Ea(n.description)).bd(n,!1),n=l,l=1736)),g.uX(),c.ba.Tn(l)||g.vX(),g.sb<=.5*g.bo)return l!=1736?new c.Ea(n.description):g.Yv?n:c.ej.Sr(n,g.Sg,g.Ae,g.LA,-1,y);if(0>g.La&&l!=1736)return new c.Ea(n.description);if(g.Yv&&c.ba.Ic(l)?(o=c.ej.Sr(n,o,4,NaN,g.bo,y),n=c.cb.Bh(o,g.Sg,g.Kc)):n=c.cb.Bh(n,g.Sg,g.Kc),(n=c.Jh.nj(n,g.Kc)).B())return new c.Ea(n.description);switch(!g.Yv&&c.ba.Ic(l)&&(n=c.ej.kI(g.fc,n)),n=a.GX(n,g.Kc),l){case 1736:o=g.PN(n);break;case 1607:o=g.QN(n);break;case 550:o=g.NN(n);break;case 33:o=g.ON(n);break;default:throw c.i.ga("corrupted_geometry")}return(g=c.cb.Bh(o,g.Kc,g.Sg)).Ll(n.description),g},a.prototype.PN=function(n){var o=new c.Ea;n=new w(this,n,o),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),n=c.kp.pj(n,this.Kc,2);var l=new c.Ed;return l.scale(1/this.fc,1/this.fc),o.Pc(l),o=c.kp.pj(o,this.Kc,2),0<=this.La?c.Ih.local().W(o,n,this.Kc,this.Vb):c.mp.local().W(o,n,this.Kc,this.Vb)},a.prototype.QN=function(n){return n=new w(this,n,null),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),c.kp.pj(n,this.Kc,2)},a.prototype.NN=function(n){return n=new C(this,n),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),c.kp.pj(n,this.Kc,2)},a.prototype.ON=function(n){(n=n.D()).scale(this.fc);var o=new c.Ea;return this.ny(n,!1,o),c.kp.pj(o,this.Kc,2)},a.prototype.sy=function(n,o,l,p,d,y){var g=n[0],_=n[n.length-1],M=g.y>_.y?g.y:_.y,$=c.F.q(this.Ub,this.lc,g.y<_.y?g.y:_.y);if(M=c.F.q(this.Ub,this.lc,M),.001<this.GA-($+o+this.sb)&&.001<this.GA+(M-o-this.sb))return!1;$=(o=l-1.570796326794897)-3.141592653589793,M=o+3.141592653589793;var E=(l=p+1.570796326794897)+3.141592653589793,k=[NaN],P=[NaN],F=[NaN],D=[NaN];if(p=!1,a.ZI(this.Ub,this.lc,this.sb,g,o,$,_,l,k,P),a.ZI(this.Ub,this.lc,this.sb,_,E,l,g,$,F,D),(l<k[0]&&k[0]<E||l<P[0]&&P[0]<E)&&(p=!0),p||($<F[0]&&F[0]<o||$<D[0]&&D[0]<o)&&(p=!0),!p&&d)return!1;for(var V=[],N=n.length-1;0<=N;N--)V.push(n[N]);return y.Pa(),y.$k(null,0),N=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,o,l,d,N,y),a.Jr(this.Ub,this.lc,this.fc,this.sb,_,l,E,this.co,d,N,y,k[0],P[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,V,E,M,d,N,y),a.Jr(this.Ub,this.lc,this.fc,this.sb,g,$,o,this.co,d,N,y,F[0],D[0]),n=!1,d||(n=this.DE(this.fc,y)),p||n},a.prototype.ny=function(n,o,l){l.Pa(),l.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.co,6.283185307179586,this.co,o,[0],l,NaN,NaN),o||this.DE(this.fc,l)},a.prototype.DE=function(n,o){var l=this.qO(n,o);return n=this.rO(n,o),l||n},a.prototype.qO=function(n,o){var l=o.I(),p=!1,d=new c.l;if(o.A(d),!c.s.$(d.H*n,1.570796326794897)&&!c.s.$(d.G*n,-1.570796326794897))return!1;var y=new c.h;for(--l;0<=l;l--)o.D(l,y),(y.y==d.H&&c.s.$(y.y*n,1.570796326794897)||y.y==d.G&&c.s.$(y.y*n,-1.570796326794897))&&(p=!0,this.JI(y,l,o));return p},a.prototype.rO=function(n,o){var l=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(l.x-p.x)*n?(this.QV(o),!0):this.pO(o)},a.prototype.pO=function(n){return 0>n.He()&&(this.PV(n),!0)},a.prototype.JI=function(n,o,l){var p=l.I(),d=0<o?o-1:p-1;if(p=l.Oa(o<p-1?o+1:0),d=l.Oa(d),!c.s.$(p.y,n.y)&&!c.s.$(p.x,n.x)){var y=new c.h;y.na(p.x,n.y),l.Db(o,y)}c.s.$(d.y,n.y)||c.s.$(d.x,n.x)||((p=new c.h).na(d.x,n.y),l.xf(0,o,p))},a.prototype.QV=function(n){var o=new c.Ea,l=new c.Ea,p=new c.Ed,d=n.Oa(0),y=n.Oa(n.I()-1),g=new c.h;d.x>y.x?(y=this.Bq,p.ig(-this.Ls,0)):(y=-this.Bq,p.ig(this.Ls,0)),o.add(n,!1),n.Pa(),l.add(o,!1),l.Pc(p),d=new c.l,l.A(d),d.X((this.Ls-d.S())/2,0),d.G=-this.Bq,d.H=this.Bq;for(var _=0;_<l.I();_++)l.D(_,g),o.xf(0,-1,g);for(l.Pc(p),_=0;_<l.I();_++)l.D(_,g),o.xf(0,-1,g);l=o.Oa(0),p=o.Oa(o.I()-1),g.na(p.x,y),o.xf(0,-1,g),g.na(.5*(p.x+l.x),y),o.xf(0,-1,g),g.na(l.x,y),o.xf(0,-1,g),o=c.Jh.ms(o,this.Kc,2,!0,d.v),o=c.Jh.ms(o,this.Kc,2,!0,d.C),o=c.Vd.clip(o,d,this.Cq,NaN),n.add(o,!1)},a.prototype.PV=function(n){var o=new c.l;n.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,n.$k(null,0);var l=new c.h;l.na(o.v,o.G),n.xf(1,-1,l),l.na(o.v,o.H),n.xf(1,-1,l),l.na(.5*(o.v+o.C),o.H),n.xf(1,-1,l),l.na(o.C,o.H),n.xf(1,-1,l),l.na(o.C,o.G),n.xf(1,-1,l),l.na(.5*(o.v+o.C),o.G),n.xf(1,-1,l)},a.my=function(n,o,l,p,d,y,g,_,M,$,E){var k=null;M||((k=new c.h).Sc(),0<E.I()&&(k.N(E.Oa(E.I()-1)),k.scale(l)));var P=new c.ha(0),F=new c.ha(0),D=new c.ha(0),V=new c.h,N=new c.h,G=y[y.length-1];l=1/l;for(var J=0;J<y.length;J++){var W=y[J];if(J==0)var ee=g;else J==y.length-1?ee=_:(c.kb.xd(n,o,G.x,G.y,W.x,W.y,null,null,P,d),ee=P.u-1.570796326794897);c.kb.Ai(n,o,W.x,W.y,p,ee,F,D),M?N.na(F.u,D.u):(V.na(F.u,D.u),a.bJ(W.x,V.x,k.x,$),N.na($[0]+V.x,V.y),k.N(N)),N.scale(l),E.xf(0,-1,N)}},a.Jr=function(n,o,l,p,d,y,g,_,M,$,E,k,P){if(!(g-y<_)){var F=new c.ha(0),D=new c.ha(0),V=new c.h,N=new c.h,G=null;M||((G=new c.h).Sc(),0<E.I()&&(G.N(E.Oa(E.I()-1)),G.scale(l)));var J=c.P.truncate(Math.ceil(y/_)),W=J++*_;for(W==y&&(W=J++*_),l=1/l;W<g+_&&(y<k&&k<W?(W=k,J--):y<P&&P<W&&(W=P,J--),!(W>=g));)c.kb.Ai(n,o,d.x,d.y,p,W,F,D),M?N.na(F.u,D.u):(V.na(F.u,D.u),a.bJ(d.x,V.x,G.x,$),N.na($[0]+V.x,V.y),G.N(N)),N.scale(l),E.xf(0,-1,N),y=W,W=J++*_}},a.ZI=function(n,o,l,p,d,y,g,_,M,$){var E=new c.h,k=new c.h,P=new c.ha(0),F=new c.ha(0);for(c.kb.Ai(n,o,p.x,p.y,l,d,P,F),E.na(P.u,F.u),c.kb.Ai(n,o,p.x,p.y,l,y,P,F),k.na(P.u,F.u),l=new c.ha(0),c.kb.Sy(n,o,g.x,g.y,E.x,E.y,l),M[0]=l.u,c.kb.Sy(n,o,g.x,g.y,k.x,k.y,l),$[0]=l.u;M[0]<=$[0];)M[0]+=6.283185307179586;for(;M[0]>$[0];)M[0]-=6.283185307179586;for(;M[0]>=_;)M[0]-=6.283185307179586,$[0]-=6.283185307179586;for(;M[0]<_;)M[0]+=6.283185307179586,$[0]+=6.283185307179586},a.bJ=function(n,o,l,p){if(isNaN(l)){for(;3.141592653589793<p[0]+o-n;)p[0]-=6.283185307179586;for(;3.141592653589793<n-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-l?p[0]-=6.283185307179586:3.141592653589793<l-(p[0]+o)&&(p[0]+=6.283185307179586)},a.GX=function(n,o){var l=n.K(),p=c.ba.Ic(l)?n.ea():l==550?n.I():1;if(p==1)return n;var d=new c.ja(0);d.resize(p);for(var y=[],g=new c.l,_=0;_<p;_++){if(d.write(_,_),c.ba.Ic(l)){n.Tj(_,g);var M=g.tf()}else M=n.Oa(_);M=c.SK.WX(o,M),y[_]=M}for(d.Wd(0,d.size,function($,E){return y[$]<y[E]?-1:y[$]>y[E]?1:0}),o=n.Ja(),_=0;_<p;_++)g=d.read(_),c.ba.Ic(l)?o.addPath(n,g,!0):o.Gd(n,g,g+1);return o},a.prototype.uX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new c.h;o.na(0,10*this.fc);var l=45*this.fc,p=new c.ha(0),d=new c.ha(0),y=new c.ha(0),g=new c.ha(0),_=new c.ha(0),M=new c.ha(0),$=new c.ha(0),E=new c.ha(0),k=new c.h,P=new c.h,F=new c.h,D=new c.h;c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,0,p,d),k.na(p.u,d.u),c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,l,y,g),P.na(y.u,g.u),p=new c.ha(0),d=new c.ha(0);for(var V=new c.ha(0);c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,.5*(0+l),_,M),F.na(_.u,M.u),c.kb.xd(this.Ub,this.lc,k.x,k.y,P.x,P.y,p,d,null,2),c.kb.qj(this.Ub,this.lc,k.x,k.y,.5*p.u,d.u,$,E,2),D.na($.u,E.u),c.kb.xd(this.Ub,this.lc,F.x,F.y,D.x,D.y,V,null,null,2),!(V.u<=this.bo);)l*=.9,c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,l,y,g),P.na(y.u,g.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},a.prototype.vX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new c.h,l=new c.h;o.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var p=new c.ha(0),d=new c.ha(0),y=new c.ha(0);c.kb.xd(this.Ub,this.lc,o.x,o.y,l.x,l.y,y,p,d,this.Ae);var g=new c.ha(0),_=new c.ha(0),M=new c.ha(0),$=new c.ha(0),E=new c.h,k=new c.ha(0),P=new c.ha(0),F=new c.ha(0),D=new c.ha(0),V=new c.ha(0),N=new c.ha(0),G=new c.ha(0),J=new c.ha(0),W=new c.ha(0),ee=new c.h,Z=new c.h,ae=new c.h,de=new c.h,ce=1;p=p.u,d=d.u+1.570796326794897,y=y.u,c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,p-1.570796326794897,P,F),ee.na(P.u,F.u),c.kb.Ai(this.Ub,this.lc,l.x,l.y,n,d,D,V),Z.na(D.u,V.u),P=new c.ha(0),F=new c.ha(0),d=new c.ha(0);for(var Ae=new c.ha(0);c.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+ce)*y,p,g,_,this.Ae),E.na(g.u,_.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,E.x,E.y,null,null,k,this.Ae),c.kb.Ai(this.Ub,this.lc,E.x,E.y,n,k.u+1.570796326794897,N,G),ae.na(N.u,G.u),c.kb.xd(this.Ub,this.lc,ee.x,ee.y,Z.x,Z.y,P,F,null,2),c.kb.qj(this.Ub,this.lc,ee.x,ee.y,.5*P.u,F.u,J,W,2),de.na(J.u,W.u),c.kb.xd(this.Ub,this.lc,ae.x,ae.y,de.x,de.y,d,null,null,2),!(d.u<=this.bo);)ce*=.9,c.kb.qj(this.Ub,this.lc,o.x,o.y,ce*y,p,M,$,this.Ae),l.na(M.u,$.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,l.x,l.y,null,null,Ae,this.Ae),c.kb.Ai(this.Ub,this.lc,l.x,l.y,n,Ae.u+1.570796326794897,D,V),Z.na(D.u,V.u);1e5<(n=ce*y)&&(n=1e5),this.LA=n},a.prototype.tX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.bo=n},a}();c.QK=u}(U||(U={})),function(c){var C=function(){function w(){}return w.Of=function(u,a){var n=new c.h;n.N(a),u.push(n)},w.wp=function(u,a){u.add(a.x),u.add(a.y)},w.cB=function(u){u.Dh(u.size-2)},w.jB=function(u,a){a.na(u.get(u.size-2),u.get(u.size-1))},w.Sr=function(u,a,n,o,l,p){if(u==null)throw c.i.O();var d=u.K();if(u.B()||c.ba.Tn(d))return u;var y=new w;y.Sg=a,y.Kc=c.cb.tc(a);var g=c.cb.xv(y.Kc);if(y.Vb=p,y.Ub=c.cb.gv(y.Kc),y.lc=g*(2-g),y.fc=y.Kc.Id().ci,y.Cq=y.Kc.Mn(),y.at=y.Cq*y.fc,y.vA=o,y.uA=l,y.Ae=n,d==197?(n=new c.Ea(u.description)).bd(u,!1):c.ba.zd(d)?(n=new c.Ua(u.description)).pc(u,!0):n=u,y.Ae!=4){if((a=y.Sg.Nb(y.Kc)==0?c.cb.Bh(n,y.Sg,y.Kc):c.Jh.nj(n,y.Kc)).B())return a;a=w.kI(y.fc,a),a=y.Uy(a),a=c.kp.pj(a,y.Kc,y.Ae),y=c.cb.Bh(a,y.Kc,y.Sg)}else{if(c.Gg.Tb(a)==2?(u=c.cb.ol(),(a=c.Zj.local().W(n,u,a,p))==u&&(a=new c.Ea,u.copyTo(a))):a=c.Jh.nj(n,y.Kc),a.B())return a;y=y.yX(a)}return y},w.kI=function(u,a){var n=new c.l;if(a.yc(n),3.141592653589793>n.S()*u)return a;var o=!1;n=a.Ha();for(var l=new c.h,p=new c.h;n.ab();)for(;n.Ia();){var d=n.ia();if(l.N(d.bc()),p.N(d.xc()),l.scale(u),p.scale(u),3.141592653589793<Math.abs(l.x-p.x)){var y=w.Nu(l,p);if(!y){o=!0;break}if(6.283185307179586<Math.abs(l.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var g=1<a.description.Ba,_=new c.h,M=new c.h,$=new c.h,E=new c.h,k=new c.Ta;for(n.aj();n.ab();)for(var P=NaN,F=[0];n.Ia();){if(d=n.ia(),l.N(d.bc()),p.N(d.xc()),l.scale(u),p.scale(u),isNaN(P)?(w.Yi(l.x,NaN,F),M.N(l)):M.N($),P=M.x,y=w.Nu(l,p)){if(6.283185307179586<p.x-l.x)for(;6.283185307179586<p.x-l.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-l.x)for(;-6.283185307179586>p.x-l.x;)p.x+=6.283185307179586;w.Yi(p.x,NaN,F),$.N(p)}else _.N(p),w.vU(_),w.Yi(_.x,P,F),$.na(F[0]+_.x,_.y);.5>Math.abs($.x-p.x)&&$.N(p),g?(d.Vw(0,k),E.N(M),E.scale(1/u),k.Db(E),(y=n.xm())?o.nf(k):o.lineTo(k),n.Sn()&&!a.ec(n.gb)&&(d.Vw(1,k),E.N($),E.scale(1/u),k.Db(E),o.lineTo(k))):((y=n.xm())&&o.Cz(null,0),d=o.ea()-1,E.N(M),E.scale(1/u),o.xf(d,-1,E),n.Sn()&&!a.ec(n.gb)&&(E.N($),E.scale(1/u),o.xf(d,-1,E)))}return o},w.oF=function(u,a,n,o,l,p,d,y,g,_,M,$){var E=new c.h,k=new c.h,P=0<o.compare(l);w.aJ(P,o,l,E,k),w.pF(u,a,n,E,k,p,NaN,d,y,g,_,null,M,$),P&&w.aC(g,_,null,M)},w.prototype.Uy=function(u){var a=u.Ja(),n=u.Ha(),o=[],l=null,p=null,d=1<u.description.Ba;d&&(l=new c.ce(0),p=new c.jg);for(var y=[0],g=new c.h,_=new c.h,M=new c.h,$=new c.h;n.ab();)for(y[0]=0;n.Ia();){var E=n.ia();g.N(E.bc()),_.N(E.xc()),g.scale(this.fc),_.scale(this.fc);var k=0<g.compare(_);w.aJ(k,g,_,M,$),o.length=0,l!=null&&l.Dh(0),0<this.vA?w.pF(this.Ub,this.lc,this.Ae,M,$,this.vA,this.uA,this.at,null,null,null,d?l:null,o,y):w.WQ(this.Ub,this.lc,this.Ae,M,$,this.uA,this.at,d?l:null,o,y),k&&w.aC(null,null,d?l:null,o),o[0].N(E.bc()),o[o.length-1].N(E.xc());for(var P=1;P<o.length-1;P++)o[P].scale(1/this.fc);d?(k=w.$I(k,E,p),w.OD(n.xm(),n.Sn()&&!u.ec(n.gb),E,k,l,o,a)):w.ND(n.xm(),n.Sn()&&!u.ec(n.gb),o,a)}return a},w.prototype.yX=function(u){var a=u.Ja(),n=u.Ha(),o=[],l=null,p=new c.jg,d=1<u.description.Ba;for(d&&(l=new c.ce(0));n.ab();)for(;n.Ia();){var y=n.ia(),g=y.bc(),_=y.xc();g=0<g.compare(_),_=w.$I(g,y,p),o.length=0,l!=null&&l.Dh(0),w.xX(this.Ub,this.lc,this.fc,_,this.Sg,this.vA,this.uA,d?l:null,o),g&&w.aC(null,null,d?l:null,o),d?w.OD(n.xm(),n.Sn()&&!u.ec(n.gb),y,_,l,o,a):w.ND(n.xm(),n.Sn()&&!u.ec(n.gb),o,a)}return a},w.ND=function(u,a,n,o){u&&o.Cz(null,0),u=o.ea()-1;var l=n.slice(0);o.lG(u,l,l.length-1),a&&o.xf(u,-1,n[n.length-1])},w.OD=function(u,a,n,o,l,p,d){var y=new c.Ta;if(n.Vo(y),u?d.nf(y):d.lineTo(y),2<p.length){u=o.Rb();for(var g=1;g<p.length-1;g++){var _=o.IG(l.get(g)*u);o.Vw(_,y),y.Db(p[g]),d.lineTo(y)}}a&&(n.Ro(y),d.lineTo(y))},w.pF=function(u,a,n,o,l,p,d,y,g,_,M,$,E,k){var P=new c.ha(0),F=new c.ha(0),D=new c.ha(0);c.kb.xd(u,a,o.x,o.y,l.x,l.y,D,P,F,n),D=D.u;var V=P=P.u;0>V&&(V+=6.283185307179586),0>(F=F.u)&&(F+=6.283185307179586),g!=null&&(g[0]=D),_!=null&&(_[0]=V),M!=null&&(M[0]=F),_=g=NaN,$!=null&&(g=((_=c.F.Ch(u,a))-(M=c.F.q(u,a,o.y)))/D,_=(_+M)/D),M=w.Ou(o,l),F=w.Mu(o,l),V=M||F;var N=w.AE(o,l,y),G=new c.ha(0),J=new c.ha(0),W=new c.h,ee=new c.h,Z=new c.h;w.Yi(o.x,NaN,k);var ae=[k[0]];if(D<=p)w.Of(E,o),w.Yi(l.x,NaN,k),$!=null&&$.add(0),V?(M&&w.fB(o,l,$,E),F&&w.dB(o,l,$,E)):N?w.eB(o,l,P,g,_,$,E):0<d&&(ee.na(o.x-ae[0],o.y),W.na(l.x-k[0],l.y),w.Ty(u,a,n,o,D,P,ee,W,0,1,d,$,E,ae)),w.Of(E,l);else{var de=D/((p=1+c.P.truncate(Math.ceil(D/p)))-1),ce=new c.h,Ae=0;w.Of(E,o),ce.N(o),ee.na(o.x-k[0],o.y),$!=null&&$.add(0);for(var be=1;be<p;be++){if(be<p-1){c.kb.qj(u,a,o.x,o.y,be*de,P,G,J,n),W.na(G.u,J.u),w.Yi(W.x,ce.x,k),Z.na(k[0]+W.x,W.y);var Je=be/(p-1)}else w.Yi(l.x,NaN,k),W.na(l.x-k[0],l.y),Z.N(l),Je=1;V?(be==1&&M&&w.fB(o,Z,$,E),be==p-1&&F&&w.dB(ce,l,$,E)):N?w.zE(ce,Z,y)&&(o.x<l.x?ce.x>Z.x&&(k[0]+=6.283185307179586,Z.na(k[0]+W.x,W.y)):ce.x<Z.x&&(k[0]-=6.283185307179586,Z.na(k[0]+W.x,W.y)),w.eB(ce,Z,P,g,_,$,E)):0<d&&w.Ty(u,a,n,o,D,P,ee,W,Ae,Je,d,$,E,ae),w.Of(E,Z),$!=null&&$.add(Je),ce.N(Z),ee.N(W),ae[0]=k[0],Ae=Je}}},w.WQ=function(u,a,n,o,l,p,d,y,g,_){var M=new c.ha(0),$=new c.ha(0),E=new c.ha(0);c.kb.xd(u,a,o.x,o.y,l.x,l.y,E,M,$,n),$=E.u,M=M.u;var k=E=NaN;if(y!=null){k=c.F.Ch(u,a);var P=c.F.q(u,a,o.y);E=(k-P)/$,k=(k+P)/$}P=w.Ou(o,l);var F=w.Mu(o,l),D=P||F;d=w.AE(o,l,d);var V=w.Nu(o,l);V=D||d||V,w.Yi(o.x,NaN,_);var N=new c.h;w.Of(g,o),N.N(o),y!=null&&y.add(0),V?(D?(P&&w.fB(o,l,y,g),F&&w.dB(o,l,y,g)):d&&w.eB(o,l,M,E,k,y,g),w.Yi(l.x,NaN,_),w.Of(g,l)):$<=p?(w.Yi(l.x,NaN,_),w.Of(g,l)):(E=new c.h,d=new c.h,E.N(o),d.N(l),E.x-=_[0],d.x-=_[0],-3.141592653589793>d.x?d.x+=6.283185307179586:3.141592653589793<d.x&&(d.x-=6.283185307179586),w.Ty(u,a,n,o,$,M,E,d,0,1,p,y,g,_),w.Of(g,l),w.Yi(l.x,NaN,_)),y!=null&&y.add(1)},w.Ty=function(u,a,n,o,l,p,d,y,g,_,M,$,E,k){var P=new c.h,F=new c.h;P.na(d.x+k[0],d.y),new c.ha(0),new c.ha(0),new c.ha(0),new c.ha(0);var D=new c.ha(0),V=new c.ha(0),N=new c.ha(0),G=new c.h,J=new c.h,W=new c.h,ee=new c.h;G.N(d),J.N(y),d=new c.ce(0),y=new c.ce(0),w.wp(d,J),y.add(_);var Z=new c.h,ae=new c.zb,de=[];for(w.TJ(4,de);0<d.size;){for(var ce,Ae=!1,be=NaN,Je=0;3>Je;Je++)if(ce=de[Je]*_+(1-de[Je])*g,c.kb.qj(u,a,o.x,o.y,ce*l,p,D,V,n),W.na(D.u,V.u),Je==0&&(be=ce,ee.N(W)),w.RW(G,W,J,ae),ae.ic(ae.ge(W,!0),Z),c.kb.xd(u,a,W.x,W.y,Z.x,Z.y,N,null,null,2),N.u>M){Ae=!0;break}Ae?(J.N(ee),_=be,w.wp(d,J),y.add(_)):(w.cB(d),y.Gn(y.size-1,1,y.size-1),0<d.size&&(w.Yi(J.x,P.x,k),F.na(k[0]+J.x,J.y),w.Of(E,F),P.N(F),$!=null&&$.add(_),G.N(J),g=_,w.jB(d,J),_=y.get(y.size-1)))}},w.xX=function(u,a,n,o,l,p,d,y,g){var _=new c.h,M=new c.h,$=new c.h,E=new c.h,k=new c.h,P=new c.h,F=new c.h,D=new c.h,V=new c.h,N=new c.h,G=new c.ha(0),J=new c.ha(0),W=new c.h,ee=[[],[]],Z=c.Gg.Tb(l)==1;l=l.Yd(0);var ae=o.bc(),de=o.xc();Z?(P.na(ae.x*n,ae.y*n),F.na(de.x*n,de.y*n)):(ee[0][0]=ae.x,ee[0][1]=ae.y,ee[1][0]=de.x,ee[1][1]=de.y,c.cb.wt(),P.x=ee[0][0]*n,P.y=ee[0][1]*n,F.x=ee[1][0]*n,F.y=ee[1][1]*n);var ce=0,Ae=0,be=1,Je=o.Rn();_.N(ae),M.N(de),de=new c.ce(0);var Ve=new c.ce(0),Ie=new c.ce(0);w.wp(de,M),w.wp(Ve,F),Ie.add(be),w.Of(g,_),y!=null&&y.add(Ae);var qt=[],Ii=0<d?Je?5:3:Je?5:1;w.TJ(Ii,qt);for(var Ht=new c.ha(0),wt=new c.ha(0),bt=new c.ha(0),ot=new c.ha(0),Qt=new c.ha(0),nt=new c.ha(0),En=new c.ha(0);0<Ve.size;){var pt=!1,yr=NaN;for(c.kb.xd(u,a,P.x,P.y,F.x,F.y,Ht,wt,null,2),ae=0;ae<Ii&&!(ae==0&&(!Je&&0>=d&&Ht.u<=p&&3.141592653589793>Math.abs(P.x-F.x)||o.Tx(Ae,be)<=l));ae++){var Pt=qt[ae]*be+(1-qt[ae])*Ae;if(o.ic(Pt,$),Z?D.na($.x*n,$.y*n):(ee[0][0]=$.x,ee[0][1]=$.y,c.cb.wt(),D.x=ee[0][0]*n,D.y=ee[0][1]*n),ae==0&&(yr=Pt,k.N($),N.N(D),0<p&&(Ht.u>p||3.141592653589793<=Math.abs(P.x-F.x)))){pt=!0;break}if(Je&&0<p){if(c.kb.xd(u,a,P.x,P.y,D.x,D.y,bt,null,null,2),bt.u>p||3.141592653589793<=Math.abs(P.x-D.x)){pt=!0;break}}else if(0<d){if(Je?(E.IS(_,M,qt[ae]),Z?V.na(E.x*n,E.y*n):(ee[0][0]=E.x,ee[0][1]=E.y,c.cb.wt(),V.x=ee[0][0]*n,V.y=ee[0][1]*n)):(E.N($),V.N(D)),c.kb.xd(u,a,P.x,P.y,V.x,V.y,ot,null,null,2),!(ot.u<=Ht.u)){pt=!0;break}if(c.kb.qj(u,a,P.x,P.y,ot.u,wt.u,G,J,2),W.na(G.u,J.u),c.kb.xd(u,a,W.x,W.y,D.x,D.y,Qt,null,null,2),Qt.u>d){pt=!0;break}if(Je){if(c.kb.xd(u,a,W.x,W.y,V.x,V.y,nt,null,null,2),nt.u>d){pt=!0;break}if(c.kb.xd(u,a,V.x,V.y,D.x,D.y,En,null,null,2),En.u>d){pt=!0;break}}}}pt?(M.N(k),F.N(N),be=yr,w.wp(de,M),w.wp(Ve,F),Ie.add(be)):(w.cB(de),w.cB(Ve),Ie.Gn(Ie.size-1,1,Ie.size-1),w.Of(g,M),ce+=Ht.u,y!=null&&y.add(ce),0<Ve.size&&(_.N(M),P.N(F),Ae=be,w.jB(de,M),w.jB(Ve,F),be=Ie.get(Ie.size-1)))}if(y!=null)for(u=1/ce,ae=0;ae<y.size;ae++)y.write(ae,y.read(ae)*u)},w.aC=function(u,a,n,o){o.reverse(),n!=null&&n.pi(0,n.size,1),n=u!=null?u[0]:NaN,o=a!=null?a[0]:NaN,u!=null&&(u[0]=o),a!=null&&(a[0]=n)},w.aJ=function(u,a,n,o,l){u?(o.N(n),l.N(a)):(o.N(a),l.N(n))},w.$I=function(u,a,n){return u?(n.create(a.K()),a.copyTo(n.get()),n.get().reverse(),n.get()):a},w.Yi=function(u,a,n){if(isNaN(a)){for(;3.141592653589793<n[0]-u;)n[0]-=6.283185307179586;for(;3.141592653589793<u-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+u-a?n[0]-=6.283185307179586:3.141592653589793<a-(n[0]+u)&&(n[0]+=6.283185307179586)},w.RW=function(u,a,n,o){3.141592653589793>Math.abs(a.x-u.x)?(o.Ec(u),3.141592653589793<=n.x-u.x?o.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=u.x-n.x?o.Sl(n.x+6.283185307179586,n.y):o.Sl(n.x,n.y)):(o.Ec(n),3.141592653589793<=u.x-n.x?o.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=n.x-u.x?o.Sl(u.x+6.283185307179586,u.y):o.Sl(u.x,u.y))},w.TJ=function(u,a){for(var n=0;n<u;n++){var o=Math.ceil(n/2)/(u+1);n%2!=0&&(o=-o),a[n]=.5+o}},w.Ou=function(u,a){return!!(c.s.$(u.y,1.570796326794897)&&!c.s.$(a.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)&&!c.s.$(a.y,-1.570796326794897))},w.Mu=function(u,a){return!!(c.s.$(a.y,1.570796326794897)&&!c.s.$(u.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897)&&!c.s.$(u.y,-1.570796326794897))},w.AE=function(u,a,n){return!(!w.zE(u,a,n)||c.s.$(u.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)||c.s.$(a.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897))},w.zE=function(u,a,n){return Math.abs(Math.abs(u.x-a.x)-3.141592653589793)<=n},w.Nu=function(u,a){return!!(c.s.$(u.y,1.570796326794897)&&c.s.$(a.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)&&c.s.$(a.y,-1.570796326794897))},w.fB=function(u,a,n,o){if(0<u.y){var l=new c.h;l.na(a.x,1.570796326794897)}else(l=new c.h).na(a.x,-1.570796326794897);c.s.$(u.x,l.x)||c.s.$(a.y,l.y)||(w.Of(o,l),n!=null&&n.add(0))},w.dB=function(u,a,n,o){if(0<a.y){var l=new c.h;l.na(u.x,1.570796326794897)}else(l=new c.h).na(u.x,-1.570796326794897);c.s.$(a.x,l.x)||c.s.$(u.y,l.y)||(w.Of(o,l),n!=null&&n.add(1))},w.eB=function(u,a,n,o,l,p,d){c.s.Dd(n)?(0<1.570796326794897-u.y&&((n=new c.h).na(u.x,1.570796326794897),w.Of(d,n),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((n=new c.h).na(a.x,1.570796326794897),w.Of(d,n),p!=null&&p.add(o))):(0<1.570796326794897+u.y&&((n=new c.h).na(u.x,-1.570796326794897),w.Of(d,n),p!=null&&p.add(l)),0<1.570796326794897+a.y&&((n=new c.h).na(a.x,-1.570796326794897),w.Of(d,n),p!=null&&p.add(l)))},w.vU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},w}();c.ej=C}(U||(U={})),function(c){c.kp=function(){function C(){}return C.pj=function(w,u,a){if(w==null||u==null||!c.cb.Xc(u))throw c.i.O();if(w.B())return w;var n=w,o=n.K();if(c.ba.Ic(o)){n=c.Jh.nj(w,u),w=new c.l,n.A(w),o=c.ua.Xd(u,w,!1);for(var l=c.cb.ih(u),p=Math.floor((w.v-l.v)/l.S())*l.S()+l.v;p<w.C;)p>w.v+o&&p<w.C-o&&(n=c.Jh.ms(n,u,a,!0,p)),p+=l.S()}else{if(o==197)return(w=new c.Ea(n.description)).bd(n,!1),C.pj(w,u,a);if(c.ba.zd(o))return(w=new c.Ua(n.description)).pc(n,!0),C.pj(w,u,a)}return C.Py(n,u)},C.Py=function(w,u){if(w==null||u==null||!c.cb.Xc(u))throw c.i.O();if(w.B())return w;var a=w.K();return a==197?(a=new c.Ea(w.description)).bd(w,!1):c.ba.zd(a)?(a=new c.Ua(w.description)).pc(w,!0):a=w,(a=c.Jh.nj(a,u)).B()?a:c.Gg.Tb(u)==1?c.Jh.Hn(a,u,0,a!=w,0):C.IQ(a,u,a!=w)},C.IQ=function(w,u,a){if(!c.cb.Xc(u))throw c.i.O();if(w.B())return w;var n=c.cb.bf(u),o=-180*n;return n*=360,c.Gg.Tb(u)==2&&(n=(o=c.cb.ih(u)).C,n-=o=o.v),c.Jh.Jp(w,o,n,u,a,0,!0)},C}()}(U||(U={})),function(c){c.xY=function(){function C(){}return C.R=function(w){return 0>w?-w:w},C.Mb=function(w,u){return 0<=u?C.R(w):-C.R(w)},C.$=function(w,u){return w==u||C.R(w-u)<=C.EC*(1+(C.R(w)+C.R(u))/2)},C.Dd=function(w){return w==0||C.R(w)<=C.EC},C.Ch=function(w,u){var a=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return w/(1+u)*(1+a*(.25+a*(.015625+1/256*a)))*C.zL},C.zL=1.5707963267948966,C.EC=3552713678800501e-30,C}()}(U||(U={})),function(c){var C=function(u){this.Yf=u,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};c.zY=C;var w=function(){function u(a){a===void 0&&(a=null),this.Ej=null,this.Wn=!1,a!==null&&(this.Ej=new C(a))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},u.prototype.Qf=function(){var a=new u;return this.copyTo(a),a},u.prototype.copyTo=function(a){a.Ej=this.Ej,a.Wn=this.Wn},u.prototype.Lz=function(){this.Wn=!this.Wn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},u.prototype.GJ=function(a){if(0>=a)throw c.i.O();if(a!=this.Fc()){if((a=c.qf.geogtran(a))==null)throw c.i.O("Geogtran not found.");this.Ej=new C(a)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},u.prototype.pX=function(a){if(a==null)throw c.i.O();var n=null;try{n=c.qf.fromString(c.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw c.i.O()}this.Ej=new C(n)},u.prototype.Nb=function(a){return a==this||!(!(a instanceof u)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Wn==a.Wn},u.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},u.create=function(a,n){var o=new u;return o.GJ(a),n&&o.Lz(),o},u.pP=function(a,n){var o=new u;return o.pX(a),n&&o.Lz(),o},u}();c.Cx=w}(U||(U={})),function(c){var C=function(){function u(){}return u.construct=function(a,n,o,l){var p=new u;return p.jw=a,p.kw=n,p.MY=o,p.NY=l,p},u.zy=function(a,n){return a.jw==n.jw?a.kw==n.kw?0:a.kw<n.kw?-1:1:a.jw<n.jw?-1:1},u}(),w=function(){function u(){this.tT=[],this.uT=[],this.sp()}return u.fz=function(){return u.eK==null&&(u.eK=new u),u.eK},u.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},u.prototype.dD=function(a){try{var n=[];n=n.sort(C.zy);for(var o=0;o<n.length;o++)a.push(n[o])}catch{}},u}();c.yY=w}(U||(U={})),function(c){var C=function(){function w(){}return w.prototype.tD=function(u){this.Hk=u},w.prototype.RM=function(u){this.Gb=u},w.prototype.sD=function(u){this.Bo=u},w.xE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},w.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},w.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},w}();c.Wk=C}(U||(U={})),function(c){c.ac=function(){function C(){}return C.OT=function(w){var u=new c.Ea;return u.rx(w.gs(),w.js()),u.Aj(w.gs(),w.hs()),u.Aj(w.fs(),w.hs()),u.Aj(w.fs(),w.js()),u},C.Bh=function(w,u){return w===null?null:c.Gx.local().W(w,u,null)},C.fY=function(w,u){var a=c.Ih.local();return w=new c.$c(w),a.W(w,u,null).next()},C.km=function(w,u,a){return c.mp.local().W(w,u,a,null)},C.gp=function(w,u,a){return c.Jx.local().W(w,u,a,null)},C.RX=function(w,u,a){var n=c.Jx.local();for(w=new c.$c(w),u=new c.$c(u),a=n.W(w,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.Nb=function(w,u,a){return c.fj.local().W(3,w,u,a,null)},C.OP=function(w,u,a){return c.fj.local().W(4,w,u,a,null)},C.MS=function(w,u,a){var n=c.Zj.local();for(w=new c.$c(w),u=new c.$c(u),a=n.W(w,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.LP=function(w,u,a){var n=c.mp.local();for(w=new c.$c(w),u=new c.$c(u),a=n.W(w,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.Fa=function(w,u,a){return c.Zj.local().W(w,u,a,null)},C.LS=function(w,u,a){if((w=c.Zj.local().W(w,u,a,null,1))===null)return[];if(w.K()===550){for(u=[],a=0;a<w.xa;a++)u.push(w.FR(a));return u}return w.K()===33?[w]:[]},C.mY=function(w,u,a){return c.fj.local().W(2,w,u,a,null)},C.contains=function(w,u,a){return c.fj.local().W(1,w,u,a,null)},C.wP=function(w,u,a){return c.fj.local().W(16,w,u,a,null)},C.touches=function(w,u,a){return c.fj.local().W(8,w,u,a,null)},C.yU=function(w,u,a){return c.fj.local().W(32,w,u,a,null)},C.OS=function(w,u,a){return c.fj.local().W(1073741824,w,u,a,null)},C.tB=function(w,u,a,n){return c.uL.local().W(w,u,a,n,null)},C.ub=function(w,u,a,n){var o=null;if(a!=null){if(o=a.Id(),n!=null&&o.Fc()!=n.Fc()&&o.pd!=n.pd)throw c.i.Zk()}else if(n!=null)throw c.i.O();return w=c.lL.local().W(w,u,null),o!==null&&n!==null&&(w=c.Uc.Ph(w,o,n)),w},C.clip=function(w,u,a){return c.fL.local().W(w,c.l.construct(u.gs(),u.js(),u.fs(),u.hs()),a,null)},C.fl=function(w,u,a){if(w==null||u==null)return null;for(w=c.hL.local().W(!0,w,u,a,null),u=[];(a=w.next())!=null;)a.B()||u.push(a);return u.slice(0)},C.HN=function(w,u,a,n,o,l,p,d){if(o===!0)return C.IN(w,u,a,n,l,p,d);if(o=a,u!=null){if(p=u.Id(),n!=null&&p.Fc()!=n.Fc()){if(p.pd!=n.pd)throw c.i.Zk();o=[],c.Uc.SE(a,a.length,n,p,o)}}else if(n!=null)throw c.i.O();if(a=c.vC.local(),l){for(w=new c.$c(w),u=a.W(w,u,o,l,null),w=[];(l=u.next())!=null;)w.push(l);l=w.slice(0)}else for(l=[],n=0;n<w.length;n++)l[n]=a.W(w[n],u,o[n],null);return l},C.IN=function(w,u,a,n,o,l,p){if(u===null||(n==null&&(n=u.Fc()!==4326?u.Id():c.Uc.ah(9001)),n.pd!==0))throw c.i.O();if(c.Uc.SE(a,a.length,n,c.Uc.ah(9001),a),n=c.AC.local(),o){for(w=new c.$c(w),u=n.W(w,u,l,a,p,!1,o,null),a=[];(l=u.next())!=null;)a.push(l);o=a.slice(0)}else{o=[];for(var d=0;d<w.length;d++)o[d]=n.W(w[d],u,l,a[d],p,!1,null)}return o},C.buffer=function(w,u,a,n,o,l,p){var d=a;if(o===!1){if(u!=null){if(o=u.Id(),n!=null&&o.Fc()!=n.Fc()){if(o.pd!=n.pd)throw c.i.Zk();d=c.Uc.Ph(a,n,o)}}else if(n!=null)throw c.i.O();w=c.vC.local().W(w,u,d,null)}else{if(u===null||(n==null&&(n=u.Fc()!==4326?u.Id():c.Uc.ah(9001)),n.pd!==0))throw c.i.O();d=c.Uc.Ph(a,n,c.Uc.ah(9001)),w=c.AC.local().W(w,u,l,d,p,!1,null)}return w},C.wU=function(w,u,a,n,o,l,p){if(u!=null){var d=u.Id();if(p!=null&&d.Fc()!=p.Fc()){if(d.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,d)}}else if(p!=null)throw c.i.O();for(w=new c.$c(w),u=c.DC.local().W(w,u,a,n,o,l,null),a=[];(n=u.next())!=null;)a.push(n);return a.slice(0)},C.offset=function(w,u,a,n,o,l,p){if(u!=null){var d=u.Id();if(p!=null&&d.Fc()!=p.Fc()){if(d.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,d)}}else if(p!=null)throw c.i.O();return c.DC.local().W(w,u,a,n,o,l,null)},C.dP=function(w){return c.xC.local().W(w,null)},C.eP=function(w,u){var a=c.xC.local();for(w=new c.$c(w),u=a.W(w,u,null),a=[];(w=u.next())!=null;)a.push(w);return a},C.iz=function(w,u,a){return c.Hx.local().iz(w,u,a)},C.jz=function(w,u){return c.Hx.local().jz(w,u)},C.kz=function(w,u,a,n){return c.Hx.local().kz(w,u,a,n)},C.$B=function(w,u){return c.$l.local().W(w,u,!1,null)},C.ZS=function(w,u){return c.$l.local().ts(w,u,null)},C.LQ=function(w,u,a,n,o){var l=c.zC.local();if(u!=null){if(u=u.Id(),o!=null&&u.Fc()!=o.Fc()){if(u.pd!=o.pd)throw c.i.Zk();a=c.Uc.Ph(a,o,u)}}else if(o!=null)throw c.i.O();return l.W(w,a,n,null)},C.Sr=function(w,u,a,n){var o=c.Zl.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.pd!=n.pd)throw c.i.Zk();a=c.Uc.Ph(a,n,u)}}else if(n!=null)throw c.i.O();return o.W(w,a,null)},C.Ry=function(w,u,a,n,o){o===void 0&&(o=0);var l=c.nL.local();if(o==4||o!==0)throw c.i.Fe();if(n!==null){if(n.pd!==0)throw c.i.O("Unit must be a linear unit type");a=c.Uc.Ph(a,n,c.Uc.ah(9001))}return l.W(w,a,u,o,null)},C.RQ=function(w,u,a,n){if(w===null)return 0;if(n==4||n!==0)throw c.i.Fe();if(w.K()==197)w=C.OT(w);else if(w.K()!=1736)return 0;if(n=c.cb.tc(u),w=c.cb.Bh(w,u,n),w=c.PK.SQ([w])[0],a!==null){if(a.pd!==2)throw c.i.O("Unit must be a area unit type");w=c.Uc.Ph(w,c.Uc.ah(109404),a)}return w},C.UQ=function(w,u,a,n){if(w=c.qL.local().W(w,u,n,null),a!==null){if(a.pd!==0)throw c.i.O("Unit must be a linear unit type");w=c.Uc.Ph(w,c.Uc.ah(9001),a)}return w},C.EU=function(w,u,a){if(w===null)return 0;var n=null;if(u!=null){if((n=u.Id()).pd==0&&(n=c.Uc.WF(n))==null&&a!==null)throw c.i.O();if(a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();return w.K()==1736||w.K()==197?(w=w.He(),a!==null?c.Uc.Ph(w,n,a):w):0},C.FU=function(w,u,a){if(w===null||w.B()||1>w.Eb())return 0;var n=null;if(u!=null){if(n=u.Id(),a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();w.K()==1736||w.K()==197?u=w.ng():c.ba.zd(w.K())?(u=new c.Ua(w.description)).pc(w,!0):u=w,w=0,u=u.Ha();for(var o=new c.h,l=new c.h;u.ab();)for(;u.Ia();){var p=u.ia();p.$p(o),p.Vr(l),w+=c.h.ub(o,l)}return n!==null&&a!==null&&(w=c.Uc.Ph(w,n,a)),w},C.aP=function(w){return w.points!==void 0?C.hS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?C.gG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?C.gG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?C.iS(w):w.xmin!==void 0?C.gS(w):null},C.iS=function(w){if(w.x==null||w.x=="NaN")return new c.Ta;var u=new c.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&u.sX(w.z),w.m!==void 0&&w.m!==null&&u.cX(w.m),u},C.gS=function(w){if(w.xmin==null||w.xmin=="NaN")return new c.Hh;var u=new c.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&u.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&u.setInterval(2,0,w.mmin,w.mmax),u},C.hS=function(w,u,a){var n=0,o=new c.ee,l=3*w.points.length;l%2!=0&&l++,2>l&&(l=2);var p=c.P.truncate(3*w.points.length/2);4>p?p=4:16>p&&(p=16),l=c.Zc.Fn(l,0);var d=c.Zc.Fn(p);p=c.Zc.Fn(p);for(var y=0;y<w.points.length;y++)l.write(2*y,w.points[y][0]),l.write(2*y+1,w.points[y][1]),d.write(y,u||a?w.points[y][2]:NaN),p.write(y,a&&u?w.points[y][3]:NaN),n++;return n!=0&&(o.resize(n),o.kn(0,l)),u&&(o.se(1),o.kn(1,d)),a&&(o.se(2),o.kn(2,u==0?d:p)),o.Qc(16777215),o},C.gG=function(w,u,a,n){var o=0,l=2;if(n=="P"){var p=new c.Ea;o=1,l=3}else p=new c.Ua;for(var d=c.Zc.Qh(0),y=c.Zc.Or(0),g=0,_=0,M=[],$=[],E=0;E<w.length;E++){var k=w[E].length;if(M[E]=!1,n==="P"&&w[E][0][0]===w[E][w[E].length-1][0]&&w[E][0][1]===w[E][w[E].length-1][1]){var P=a==0||w[E][0][3]===w[E][w[E].length-1][3]||w[E][0][3]===void 0&&w[E][w[E].length-1][3]===void 0;(u==0||w[E][0][2]===w[E][w[E].length-1][2]||w[E][0][2]===void 0&&w[E][w[E].length-1][2]===void 0)&&P&&(M[E]=!0,--k)}k>=l?($[E]=!1,_+=1,d.add(g),y.add(o),g+=k):$[E]=!0}for((n=3*g)%2!=0&&n++,2>n&&(n=2),4>(E=c.P.truncate(3*g/2))?E=4:16>E&&(E=16),n=c.Zc.Fn(n,0),o=c.Zc.Fn(E),l=c.Zc.Fn(E),E=k=0;E<w.length;E++)if($[E]===!1)for(P=0;P<w[E].length;P++){var F=!1;P===w[E].length-1&&M[E]===!0&&(F=!0),F||(n.write(2*k,w[E][P][0]),n.write(2*k+1,w[E][P][1]),o.write(k,u||a?w[E][P][2]:NaN),l.write(k,a&&u?w[E][P][3]:NaN),k++)}return g!=0&&(w=p,d.resize(_),y.resize(_),0<g&&(d.add(g),y.add(0)),w.kn(0,n),w.KJ(y),w.LJ(d)),u&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,u==0?o:l)),p.Qc(16777215),p},C}()}(U||(U={})),function(c){c.Dx=function(){function C(){}return C.dr=function(w){var u,a=0,n=w.length,o=w[0];for(u=0;u<n-1;u++){var l=w[u+1];a+=(l[0]-o[0])*(l[1]+o[1]),o=l}return 0<=a},C.rotate=function(w,u,a){u=u*Math.PI/180;var n=Math.cos(u),o=Math.sin(u);if(w.paths!==void 0){u={paths:[]};for(var l=0;l<w.paths.length;l++){for(var p=w.paths[l],d=[],y=0;y<p.length;y++){var g=p[y].slice(0);d.push(g);var _=n*(p[y][0]-a.x)-o*(p[y][1]-a.y)+a.x,M=o*(p[y][0]-a.x)+n*(p[y][1]-a.y)+a.y;g[0]=_,g[1]=M}u.paths.push(d),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM)}return u}if(w.rings!==void 0){for(u={rings:[]},l=0;l<w.rings.length;l++){p=w.rings[l],d=[];var $=C.dr(p);for(y=0;y<p.length;y++)g=p[y].slice(0),d.push(g),_=n*(p[y][0]-a.x)-o*(p[y][1]-a.y)+a.x,M=o*(p[y][0]-a.x)+n*(p[y][1]-a.y)+a.y,g[0]=_,g[1]=M;C.dr(d)!==$&&d.reverse(),u.rings.push(d),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM)}return u}if(w.x!==void 0)return u={x:n*(w.x-a.x)-o*(w.y-a.y)+a.x,y:o*(w.x-a.x)+n*(w.y-a.y)+a.y},w.z!==void 0&&(u.z=w.z),w.m!==void 0&&(u.m=w.m),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM),u;if(w.points!==void 0){for(u={points:[]},l=w.points,y=0;y<l.length;y++)(p=l[y].slice(0))[0]=n*(l[y][0]-a.x)-o*(l[y][1]-a.y)+a.x,p[1]=o*(l[y][0]-a.x)+n*(l[y][1]-a.y)+a.y,u.points.push(p);return w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM),u}return null},C.EQ=function(w,u){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],l=[],p=0;p<o.length;p++){var d=o[p].slice(0);l.push(d);var y=u.x-o[p][0];d[0]=o[p][0]+2*y}a.paths.push(l)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var g=C.dr(o);for(l=[],p=0;p<o.length;p++)d=o[p].slice(0),l.push(d),y=u.x-o[p][0],d[0]=o[p][0]+2*y;C.dr(l)!==g&&l.reverse(),a.rings.push(l)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return y=u.x-w.x,a={x:w.x+2*y,y:w.y},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),y=u.x-o[0],o[0]+=2*y,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),y=u.x-w.xmin,a.xmax=w.xmin+2*y,y=u.x-w.xmax,a.xmin=w.xmax+2*y,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C.FQ=function(w,u){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],l=[],p=0;p<o.length;p++){var d=o[p].slice(0);l.push(d);var y=u.y-o[p][1];d[1]=o[p][1]+2*y}a.paths.push(l)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var g=C.dr(o);for(l=[],p=0;p<o.length;p++)d=o[p].slice(0),l.push(d),y=u.y-o[p][1],d[1]=o[p][1]+2*y;C.dr(l)!==g&&l.reverse(),a.rings.push(l)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return y=u.y-w.y,a={y:w.y+2*y,x:w.x},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),y=u.y-o[1],o[1]+=2*y,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),y=u.y-w.ymin,a.ymax=w.ymin+2*y,y=u.y-w.ymax,a.ymin=w.ymax+2*y,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C}()}(U||(U={})),function(c){c.UK=function(){function C(){}return C.Kg=function(w,u){switch(u==null&&(u=c.fe.pg()),w){case 33:return new c.Ta(u);case 322:return new c.zb(u);case 197:return new c.Hh(u);case 550:return new c.ee(u);case 1607:return new c.Ua(u);case 1736:return new c.Ea(u);default:throw c.i.ga("invalid argument.")}},C}()}(U||(U={})),function(c){var C=function(){function w(u,a){this.Qe=c.ja.rf(u,-1),this.va=new c.cu,this.yl=a}return w.prototype.vW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},w.prototype.addElement=function(u,a){if(a===void 0)return this.$M(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,u)},w.prototype.$M=function(u){var a=this.yl.ez(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,u)},w.prototype.kd=function(u,a){if(a===void 0)this.FP(u);else{a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==u?(this.va.kd(n,l,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):l=o,o=p}}},w.prototype.FP=function(u){var a=this.yl.ez(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==u?(this.va.kd(n,l,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):l=o,o=p}},w.prototype.lR=function(u){return u=c.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},w.prototype.zR=function(u){return this.va.lb(u)},w.prototype.wd=function(u){var a=this.yl.ez(this.ka(u));a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){if(o==u)return this.va.kd(n,l,o),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1)));l=o,o=this.va.lb(o)}throw c.i.O()},w.prototype.ka=function(u){return this.va.ka(u)},w.prototype.clear=function(){this.Qe=c.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.OF()},w}();c.ZK=C}(U||(U={})),function(c){var C=function(){function w(){this.Ni=new c.ad(3),this.va=new c.ad(6),this.mT=!1,this.ke=-1}return w.prototype.hl=function(u){this.Ni.kd(u)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(u){this.va.kd(u)},w.prototype.VA=function(){return this.va.De()},w.prototype.RB=function(u,a){this.Ni.T(u,1,a)},w.prototype.fx=function(u,a){this.Ni.T(u,2,a)},w.prototype.bX=function(u,a){this.Ni.T(u,3,a)},w.prototype.PB=function(u,a){this.va.T(u,4,a)},w.prototype.eX=function(u,a){this.va.T(u,3,a)},w.prototype.OJ=function(u,a){this.va.T(u,2,a)},w.prototype.Rh=function(u){var a=this.VA();return this.va.T(a,3,this.ke),this.va.T(a,4,0),this.va.T(a,5,u),this.ke!=-1&&this.OJ(this.ke,a),this.ke=a},w.prototype.eh=function(u){this.GE(u);var a=this.va.U(u,2),n=this.va.U(u,3);return a!=-1?this.eX(a,n):this.ke=n,n!=-1&&this.OJ(n,a),this.dv(u),n},w.prototype.Bt=function(u){this.va.Ee(u)},w.prototype.KF=function(u){return this.va.U(u,5)},w.prototype.aX=function(u,a){this.va.T(u,5,a)},w.prototype.addElement=function(u,a){return this.oS(u,a)},w.prototype.oS=function(u,a){var n=this.Rw();this.fx(n,-1),this.va.U(u,0)==-1&&this.va.T(u,0,n);var o=this.va.U(u,1);return this.RB(n,o),o!=-1&&this.fx(o,n),this.va.T(u,1,n),this.setData(n,a),this.PB(u,this.ds(u)+1),this.mT&&this.bX(n,u),n},w.prototype.kd=function(u,a){var n=this.xe(a),o=this.lb(a);return n!=-1?this.fx(n,o):this.va.T(u,0,o),o!=-1?this.RB(o,n):this.va.T(u,1,n),this.hl(a),this.PB(u,this.ds(u)-1),o},w.prototype.hn=function(u){this.Ni.Ee(u)},w.prototype.getData=function(u){return this.Ni.U(u,0)},w.prototype.setData=function(u,a){this.Ni.T(u,0,a)},w.prototype.lb=function(u){return this.Ni.U(u,2)},w.prototype.xe=function(u){return this.Ni.U(u,1)},w.prototype.sc=function(u){return this.va.U(u,0)},w.prototype.Gc=function(u){return this.va.U(u,1)},w.prototype.clear=function(){for(var u=this.ke;u!=-1;)u=this.eh(u)},w.prototype.GE=function(u){for(var a=this.Gc(u);a!=-1;){var n=a;a=this.xe(n),this.hl(n)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.PB(u,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.OF=function(){return this.Ni.size},w.prototype.ds=function(u){return this.va.U(u,4)},w.prototype.lz=function(u){return this.va.U(u,3)},w}();c.lp=C}(U||(U={})),function(c){var C=function(){function w(u){u===void 0?(this.vg=new c.ad(2),this.va=new c.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new c.ad(2),this.va=new c.ad(u?4:2),this.ke=-1,this.Sv=u)}return w.prototype.hl=function(u){this.vg.kd(u)},w.prototype.Rw=function(){return this.vg.De()},w.prototype.dv=function(u){this.va.kd(u)},w.prototype.VA=function(){return this.va.De()},w.prototype.Rh=function(){var u=this.VA();return this.Sv&&(this.va.T(u,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,u),this.ke=u),u},w.prototype.eh=function(u){for(var a=this.sc(u);a!=-1;){var n=a;a=this.lb(a),this.hl(n)}this.Sv&&(a=this.va.U(u,2),n=this.va.U(u,3),a!=-1?this.va.T(a,3,n):this.ke=n,n!=-1&&this.va.T(n,2,a)),this.dv(u)},w.prototype.Bt=function(u){this.va.Ee(u)},w.prototype.addElement=function(u,a){var n=this.va.U(u,1),o=this.Rw();return n!=-1?this.vg.T(n,1,o):this.va.T(u,0,o),this.va.T(u,1,o),this.vg.T(o,0,a),o},w.prototype.hn=function(u){this.vg.Ee(u)},w.prototype.kd=function(u,a,n){a!=-1?(this.vg.T(a,1,this.vg.U(n,1)),this.va.U(u,1)==n&&this.va.T(u,1,a)):(this.va.T(u,0,this.vg.U(n,1)),this.va.U(u,1)==n&&this.va.T(u,1,-1)),this.hl(n)},w.prototype.Cy=function(u,a){var n=this.va.U(u,1),o=this.va.U(a,0);o!=-1&&(n!=-1?this.vg.T(n,1,o):this.va.T(u,0,o),this.va.T(u,1,this.va.U(a,1))),this.Sv&&(u=this.va.U(a,2),n=this.va.U(a,3),u!=-1?this.va.T(u,3,n):this.ke=n,n!=-1&&this.va.T(n,2,u)),this.dv(a)},w.prototype.ka=function(u){return this.vg.U(u,0)},w.prototype.Uj=function(u,a){this.vg.T(u,0,a)},w.prototype.lb=function(u){return this.vg.U(u,1)},w.prototype.sc=function(u){return this.va.U(u,0)},w.prototype.Ln=function(u){return this.ka(this.sc(u))},w.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},w.prototype.B=function(){return this.vg.size==0},w.prototype.OF=function(){return this.vg.size},w.prototype.lz=function(u){return this.va.U(u,3)},w}();c.cu=C}(U||(U={})),function(c){c.ua=function(){function C(){}return C.Xd=function(w,u,a){return u=u.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,a&&(u*=4,w*=1.1),Math.max(w,u)},C.Gr=function(w){return 2*Math.sqrt(2)*w},C.mN=function(w){return Math.sqrt(2)*w},C.mj=function(w,u,a){var n=new c.l;return u.A(n),C.Xd(w,n,a)},C.rE=function(w,u,a){return u=u.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,a&&(u*=4,w*=1.1),Math.max(w,u)},C.ov=function(w,u){var a=new c.l;return w.yc(a),w=new c.l,u.yc(w),a.$b(w),a},C.TN=function(w){var u=new c.l;if(w.yc(u),u.B())return null;var a=new c.fu(u,8),n=-1,o=new c.l,l=!1;do for(var p=0,d=w.ea();p<d;p++){if(w.Tj(p,o),(n=a.Ez(p,o,n))==-1){if(l)throw c.i.ga("internal error");w.Ap(u,!1),l=!0,a.reset(u,8);break}l=!1}while(l);return a},C.iE=function(w){var u=new c.l;w.yc(u);for(var a=new c.fu(u,8),n=-1,o=w.Ha(),l=new c.l,p=!1;o.ab();)for(;o.Ia();){var d=o.ia(),y=o.xb();if(d.A(l),(n=a.Ez(y,l,n))==-1){if(p)throw c.i.Ra();w.Ap(u,!1),p=!0,a.reset(u,8),o.aj();break}}return a},C.lj=function(w,u){var a=new c.l;w.yc(a);for(var n=new c.fu(a,8),o=-1,l=new c.l,p=w.Ha(),d=!1;p.ab();)for(;p.Ia();){var y=p.ia(),g=p.xb();if(y.A(l),l.isIntersecting(u)&&(o=n.Ez(g,l,o))==-1){if(d)throw c.i.ga("internal error.");w.Ap(a,!1),d=!0,n.reset(a,8),p.aj();break}}return n},C.jE=function(w,u){for(var a=new c.fu(u,8),n=new c.h,o=!1,l=new c.l,p=0;p<w.I();p++)if(w.D(p,n),u.contains(n)&&(l.L(n),a.xj(p,l)==-1)){if(o)throw c.i.Ra();o=!0,p=new c.l,w.Ap(p,!1),a.reset(p,8),p=-1}return a},C.gR=function(w,u,a){var n=new c.l,o=new c.l;w.yc(n),u.yc(o),n.X(a,a),o.X(a,a);var l=new c.l;l.L(n),l.Fa(o),w=w.Ha(),u=u.Ha();var p=new c.sC;p.WB(a);var d=!1;for(p.kK();w.ab();)for(;w.Ia();)w.ia().A(n),n.isIntersecting(l)&&(d=!0,(a=new c.l).L(n),p.DD(w.xb(),a));if(p.dF(),!d)return null;for(n=!1,p.jK();u.ab();)for(;u.Ia();)u.ia().A(o),o.isIntersecting(l)&&(n=!0,(a=new c.l).L(o),p.zD(u.xb(),a));return p.cF(),n?p:null},C.hR=function(w,u,a,n,o){var l=w.K(),p=u.K(),d=new c.l,y=new c.l;w.yc(d),u.yc(y),d.X(a,a),y.X(a,a);var g=new c.l;g.L(d),g.Fa(y);var _=new c.sC;_.WB(a);var M=!1;_.kK();var $=0;for(a=w.ea();$<a;$++)n&&l==1736&&!w.Gv($)||(w.Tj($,d),d.isIntersecting(g)&&(M=!0,_.DD($,d)));if(_.dF(),!M)return null;for(w=!1,_.jK(),n=0,a=u.ea();n<a;n++)o&&p==1736&&!u.Gv(n)||(u.Tj(n,y),y.isIntersecting(g)&&(w=!0,_.zD(n,y)));return _.cF(),w?_:null},C.Tu=function(w,u,a){if(w!=u)for(var n=0;n<a;n++)w[n]==null?w[n]=c.h.cl(u[n]):w[n].N(u[n])},C.Ey=function(w,u,a,n){var o=0;for(n+=0;o<n;a++,o++)w[o]==null&&(w[o]=[0,0]),w[o][0]=u[a].x,w[o][1]=u[a].y},C.Dy=function(w,u,a,n){var o=u,l=0;for(u=n+u;o<u;l++,o++)w[o]==null?w[o]=c.h.construct(a[l][0],a[l][1]):w[o].na(a[l][0],a[l][1])},C.fP=function(w,u,a){if(w!=u)for(var n=0;n<a;n++)w[n]==null?w[n]=new c.Ta(u[n]):u[n].copyTo(w[n])},C.qE=function(w,u,a,n){var o=0;return w!=null&&(o=w.Yd(0),n&&!a||w==null||(o+=1.01*w.pz(0))),a&&(u*=4,o*=1.01),Math.max(o,u)},C.oy=function(w,u,a){return C.qE(w,u.zr(),a,!1)},C.bO=function(w,u){var a=new c.l;return u.A(a),C.oy(w,a,!0)},C.py=function(w,u){return C.qE(w,u.zr(),!1,!0)},C.Ju=function(w,u){var a=new c.l;return u.A(a),C.py(w,a)},C.vG=function(w,u,a,n){n*=n;var o=new c.h;if(o.vc(w,u),(w=new c.h).vc(a,u),u=o.Uk(),a=w.Uk(),u<=n&&a<=n)return!0;var l=c.mc.ox(o.yi(w));return(l<=n*u||l<=n*a)&&0<=o.Sh(w)},C.ZJ=function(w,u,a,n){for(var o=0;o<u;o++){var l=w[o].y,p=c.P.Tk(l,a,n);p!=l&&(w[o].y=p)}},C}()}(U||(U={})),function(c){var C,w,u=function(){function l(p){this.Za=p}return l.prototype.compare=function(p,d,y){p=p.ka(y),y=this.Za.qk(d);var g=this.Za.qk(p);return y<g?-1:y==g?o.iq(d)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(d)?1:0:1},l}(),a=function(){function l(p){this.Za=p}return l.prototype.qr=function(p,d,y){this.Za.CX(y,p,d)},l.prototype.bq=function(p){return this.Za.qk(p)},l}();(w=C||(C={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var n=function(){function l(){this.Za=null,this.Si=new c.Oc,this.ji=new c.ja(0),this.tg=[0,0]}return l.prototype.Zi=function(p,d){this.Si.pa=p.pa-d,this.Si.wa=p.wa+d,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.zB=function(p,d,y){if(p>d)throw c.i.O();this.Si.pa=p-y,this.Si.wa=d+y,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.Wo=function(p,d){this.Si.pa=p-d,this.Si.wa=p+d,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw c.i.Hb();if(0>this.ie)return-1;for(var p=!0;p;)switch(this.tg[this.ie]){case 1:p=this.AU();break;case 2:p=this.BU();break;case 3:p=this.CU();break;case 4:p=this.DU();break;case 5:p=this.AW();break;case 6:p=this.fT();break;case 7:p=this.oN();break;case 0:p=this.Bz();break;default:throw c.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(p){var d=new l;return d.Za=p,d.ji.Jb(20),d.ie=-1,d},l.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},l.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0):p<this.Si.pa?(p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),!0)},l.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.nk(this.Mc))!=-1&&this.ji.add(p),!0},l.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},l.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.pk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},l.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},l.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();c.AY=n;var o=function(){function l(p){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=p,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Pk(!0)},l.prototype.Dr=function(p,d){if(!this.Uv)throw c.i.Hb();this.Hj.push(new c.Oc(p,d))},l.prototype.Hp=function(){if(!this.Uv)throw c.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},l.prototype.xj=function(p){if(!this.Uf||!this.nq)throw c.i.O("invalid call");if(this.kf==-1){var d=this.Hj.length;if(this.dA){var y=new c.ja(0);y.Jb(2*d),this.XI(y),this.bi.Jb(2*d),this.bi.resize(0),this.WI(y),this.Mm.resize(d,-1),this.Mm.Yj(-1,0,d),this.dA=!1}else this.Mm.Yj(-1,0,d);this.kf=this.Vu()}d=this.kG(p<<1,this.kf),y=this.bg.addElement(1+(p<<1),this.rz(d)),this.QJ(d,y),this.Mm.set(p,d),this.aw++},l.prototype.remove=function(p){if(!this.Uf||!this.nq)throw c.i.ga("invalid call");var d=this.Mm.get(p);if(d==-1)throw c.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var y=this.rz(d),g=this.bg.UR(y);this.bg.wd(this.rR(d),y),this.bg.wd(this.OR(d),y),(p=this.bg.size(y))==0&&(this.bg.HP(y),this.UJ(g,-1)),this.Gj.kd(d),y=this.PF(g);var _=this.sj(g),M=this.nk(g);for(d=0;!(0<p||g==this.kf||_!=-1&&M!=-1);)g==this.sj(y)?_!=-1?(this.Qk(y,_),this.Wj(_,y),this.Qk(g,-1)):M!=-1?(this.Qk(y,M),this.Wj(M,y),this.Sk(g,-1)):this.Qk(y,-1):_!=-1?(this.Sk(y,_),this.Wj(_,y),this.Qk(g,-1)):M!=-1?(this.Sk(y,M),this.Wj(M,y),this.Sk(g,-1)):this.Sk(y,-1),this.Wj(g,-1),d++,g=y,p=(y=this.pk(g))!=-1?this.bg.size(y):0,_=this.sj(g),M=this.nk(g),y=this.PF(g)},l.prototype.reset=function(){if(!this.Uf||!this.nq)throw c.i.O("invalid call");this.Pk(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return n.construct(this)},l.prototype.XI=function(p){for(var d=this.Hj.length,y=0;y<2*d;y++)p.add(y);this.DX(p,2*d)},l.prototype.WI=function(p){for(var d=NaN,y=0;y<p.size;y++){var g=p.get(y),_=this.qk(g);_!=d&&(this.bi.add(g),d=_)}},l.prototype.qS=function(){var p=this.Hj.length,d=new c.ja(0);d.Jb(2*p),this.XI(d),this.bi.Jb(2*p),this.bi.resize(0),this.WI(d),this.Gj.Ee(p),this.Vi.hn(2*p);var y=c.Zc.Qh(p);for(y.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<d.size;p++){var g=d.get(p),_=y.get(g>>1);_!=-1?this.QJ(_,this.Vi.addElement(this.rz(_),g)):(_=this.kG(g,this.kf),y.set(g>>1,_))}},l.prototype.kG=function(p,d){var y=d,g=d,_=-1,M=0,$=this.bi.size-1,E=0,k=p>>1,P=NaN,F=NaN,D=!0,V=this.yR(k);for(k=this.vR(k);D;){M<$?(E=M+c.P.truncate(($-M)/2),this.bz(y)==-1&&this.AJ(y,this.bi.get(E),this.bi.get(E+1))):this.bz(y)==-1&&this.AJ(y,this.bi.get(M),this.bi.get(M));var N=this.Pp(y);if(k<N)d!=-1&&(d==y?(g=y,P=N,F=(d=this.sj(y))!=-1?this.Pp(d):NaN):F>N&&(N<P?this.Qk(g,y):this.Sk(g,y),this.Sk(y,d),this.Uf&&(this.Wj(y,g),this.Wj(d,y)),g=y,P=N,d=-1,F=NaN)),($=this.sR(y))==-1&&($=this.Vu(),this.ZW(y,$)),y=$,$=E;else if(V>N)d!=-1&&(d==y?(g=y,P=N,F=(d=this.nk(y))!=-1?this.Pp(d):NaN):F<N&&(N<P?this.Qk(g,y):this.Sk(g,y),this.Qk(y,d),this.Uf&&(this.Wj(y,g),this.Wj(d,y)),g=y,P=N,d=-1,F=NaN)),(M=this.PR(y))==-1&&(M=this.Vu(),this.jX(y,M)),y=M,M=E+1;else{(D=this.pk(y))==-1&&(D=this.uP(y),this.UJ(y,D));var G=this.aN(D,p);_=this.sP(),this.mX(_,D),this.YW(_,G),y!=d&&(N<P?this.Qk(g,y):this.Sk(g,y),this.Uf&&this.Wj(y,g),d!=-1&&(F<N?this.Qk(y,d):this.Sk(y,d),this.Uf&&this.Wj(d,y))),D=!1}}return _},l.prototype.Vu=function(){return this.ne.De()},l.prototype.uP=function(p){return this.Uf?this.bg.Rr(p):this.Vi.Rh(p)},l.prototype.sP=function(){return this.Gj.De()},l.prototype.Pk=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=c.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=c.Zc.Qh(0),this.bg=new c.$j,this.bg.Xo(new u(this))):this.bg.clear():this.Vi==null?this.Vi=new c.lp:this.Vi.clear(),this.ne==null?(this.Gj=new c.ad(3),this.ne=new c.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},l.prototype.AJ=function(p,d,y){this.SW(p,d),this.TW(p,y)},l.prototype.Pp=function(p){var d=this.bz(p);return d==-1?NaN:(d=this.qk(d))==(p=this.qk(this.bR(p)))?d:.5*(d+p)},l.prototype.SW=function(p,d){this.ne.T(p,0,d)},l.prototype.TW=function(p,d){this.ne.T(p,1,d)},l.prototype.ZW=function(p,d){this.ne.T(p,3,d)},l.prototype.jX=function(p,d){this.ne.T(p,4,d)},l.prototype.UJ=function(p,d){this.ne.T(p,2,d)},l.prototype.Qk=function(p,d){this.ne.T(p,5,d)},l.prototype.Sk=function(p,d){this.ne.T(p,6,d)},l.prototype.Wj=function(p,d){this.ne.T(p,7,d)},l.prototype.mX=function(p,d){this.Gj.T(p,0,d)},l.prototype.aN=function(p,d){return this.Uf?this.bg.addElement(d,p):this.Vi.addElement(p,d)},l.prototype.YW=function(p,d){this.Gj.T(p,1,d)},l.prototype.QJ=function(p,d){this.Gj.T(p,2,d)},l.prototype.ml=function(p){return this.Uf?this.bg.sc(p):this.Vi.sc(p)},l.prototype.bs=function(p){return this.Uf?this.bg.Gc(p):this.Vi.Gc(p)},l.iq=function(p){return(1&p)==0},l.Iv=function(p){return(1&p)==1},l.prototype.bz=function(p){return this.ne.U(p,0)},l.prototype.bR=function(p){return this.ne.U(p,1)},l.prototype.pk=function(p){return this.ne.U(p,2)},l.prototype.sR=function(p){return this.ne.U(p,3)},l.prototype.PR=function(p){return this.ne.U(p,4)},l.prototype.sj=function(p){return this.ne.U(p,5)},l.prototype.nk=function(p){return this.ne.U(p,6)},l.prototype.PF=function(p){return this.ne.U(p,7)},l.prototype.rz=function(p){return this.Gj.U(p,0)},l.prototype.rR=function(p){return this.Gj.U(p,1)},l.prototype.OR=function(p){return this.Gj.U(p,2)},l.prototype.yR=function(p){return this.Hj[p].pa},l.prototype.vR=function(p){return this.Hj[p].wa},l.prototype.DX=function(p,d){this.Cm==null&&(this.Cm=new c.Zt);var y=new a(this);this.Cm.sort(p,0,d,y)},l.prototype.CX=function(p,d,y){var g=this;p.Wd(d,y,function(_,M){var $=g.qk(_),E=g.qk(M);return $<E||$==E&&l.iq(_)&&l.Iv(M)?-1:1})},l.prototype.qk=function(p){var d=this.Hj[p>>1];return l.iq(p)?d.pa:d.wa},l}();c.ur=o}(U||(U={})),function(c){var C=function(){function w(u){if(u==null)throw c.i.ga("Invalid arguement");this.hf=u;var a=u.iR();a.cS()?u.ef.DG()?this.no=c.ui.PannableFold:this.no=c.ui.Clip:this.no=c.ui.DontClip,a.dS()?u.$f.DG()?this.Sm=c.ui.PannableFold:this.Sm=c.ui.Clip:this.Sm=c.ui.DontClip,this.Dm=a.Lr,this.hH=a.Xu,u=this.hf.nH,this.WG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return w.Bh=function(u,a,n){return a.yw.Bh(u,n)},w.Tt=function(u,a,n,o){return u.yw.Tt(a,n,o)},w.St=function(u,a,n,o){if(n=0>n?a.length:n,(u=u.yw.Tt(a,n,o))==n)return u;for(var l=a=0;l<n;l++){var p=o[l];p.isNaN()||(a<l&&o[a].N(p),a++)}for(;a<n;a++)o[a].Sc();return u},w.transform=function(u,a,n,o,l){if(u.isIdentity())return c.ua.fP(o,a,n),n;for(var p=[],d=0,y=0;y<n;){for(var g=Math.min(p.length,n-y),_=y,M=0;_<g;_++,M++)p[M]==null?p[M]=a[_].D():a[_].D(p[M]);var $=l?w.St(u,p,g,p):w.Tt(u,p,g,p);for(M=_=0;_<$;_++,M++)o[y]==null&&(o[y]=new c.Ta(a[y])),o[y].Db(p[M]);y+=g,d+=$}return d},w.prototype.Tt=function(u,a,n){if(this.hf.isIdentity())return u!=n&&c.ua.Tu(n,u,a),a;var o=this.hf.ef,l=this.hf.$f,p=o.Tb(),d=l.Tb();if(p==0&&p===d){var y=o.Sp();return l=y/(l=l.Sp()),(y=new c.Ed).Jt(l,l),y.aY(u,a,n),a}if(y=c.P.Hu(Math.min(a,64)),p==3){var g=o.Li;p=(o=g.hk()).Tb(),n!=u&&c.ua.Tu(n,u,a),c.Ab.bl(g,n,a,!0),g.St(c.dm.forward,n,a),c.Ab.al(g,n,a,!0)}if(p==3||d===3)throw c.i.ga("image: transform_in_place_");if(p==2)this.no==c.ui.Clip?(n!=u&&c.ua.Tu(n,u,a),u=o.ol(),c.Ab.JS(u,o,n,a)):(n!=u&&c.ua.Tu(n,u,a),o.Xc()&&(p=o.Yd(0),g=o.Le(),c.Ab.AX(n,a,g,p),c.Ab.lF(n,a,o,0))),c.Ab.DL(o,n,a,y);else for(p=o.Yd(0),g=o.Le(),o=0;o<a;o++)c.Ab.BX(u[o],g,p,n[o]);for(c.Ab.BL(this.hf,n,a,y),u=0,(d=d==2)?u=l.Bi():isNaN(this.Dm)||(u=this.Dm),d&&this.Sm!=c.ui.Clip||c.Ab.lF(n,a,l.tc(),u),d&&(c.Ab.tG(n,a,l,this.Sm),c.Ab.CL(l,n,a,y)),u=a,o=0;o<a;++o)n[o].isNaN()&&u--;return u},w.prototype.Bh=function(u,a){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.SI(u);var n=this.hf.ef,o=this.hf.$f,l=n.Tb(),p=o.Tb();if(l==0&&l==p)return a=n.Sp(),a/=o=o.Sp(),(o=new c.Ed).Jt(a,a),(u=c.ba.kg(u)).Pc(o),u;switch(u.K()){case 1607:case 1736:u=this.QI(u,a);break;case 550:u=this.aW(u,a);break;case 197:u=this.$V(u,a);break;default:throw c.i.ga("")}return u},w.prototype.SI=function(u){var a=u.D(),n=[];return n[0]=a,this.Tt(n,1,n),(u=new c.Ta(u)).Db(n[0]),u},w.prototype.QI=function(u,a){if(u.vm())throw c.i.ga("curves not supported");var n=u.K();if(n==1736)return this.bW(u,a);if(n==1607)return this.cW(u,a);throw c.i.ga("projectMultiPath")},w.prototype.bW=function(u,a){var n=this.hf.ef,o=this.hf.$f,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64)),y=c.Ea.kg(u);l==3&&(l=(n=(u=n.Li).hk()).Tb(),y=u.bl(y,!0),this.yp(u,c.dm.forward,y),y=u.al(y,!0)),u=null,p==3&&(p=(o=(u=o.Li).hk()).Tb());var g=l==2,_=p==2,M=_?o.tc():o,$=!_&&!this.Wv;p=!1;var E=y;if(g){if((E=c.Ab.OI(E,n,this.no,a)).B())return E}else{if(y=new c.l,E.yc(y),l=n.Le(),y.G<l.G||y.H>l.H){var k=c.l.construct(y.v-1,l.G,y.C+1,l.H);if((E=c.ti.Pu(E,k,n,NaN,0,a)).B())return E}y.S()>2*l.S()&&(E=c.Ab.Jp(E,-2*l.S(),2*l.S(),n,!0,0,!0,a))}y=this.hH,(l=!isNaN(y))&&(E=c.Zl.local().W(E,y,a)),k=_?o.mk():null;var P=NaN;g&&(P=n.Bi());var F=o.Yr()!=null;if(this.WG)g&&(c.Ab.wr(n,P,E,d),l&&(g=n.jh(),y*=(P=n.tc().jh())/g)),c.Ab.vr(this.hf,E,$,d),l&&(g=n.tc().jh(),y*=(P=o.tc().jh())/g),n=E;else{var D=new c.Ua(E.description);D.yD(E),g&&(c.Ab.wr(n,P,D,d),l&&(g=n.jh(),y*=(P=n.tc().jh())/g)),c.Ab.vr(this.hf,D,$,d),l&&(g=n.tc().rm(),y*=(P=o.tc().rm())/g),$=NaN,_?(k=o.mk(),$=o.Bi()):isNaN(this.Dm)||($=this.Dm),g=w.vv(n)|w.vv(o),P=10*M.Yd(0),this.Wv&&(g=3,P=0),n=c.Ab.PQ(E,n,D,M,$,a,g,P)}return F&&(n=c.Ab.SD(n,o,a)),_&&(p||(_=M.Le().S(),n.Vg(0,0).S()>=_-M.Yd(0)&&(M=k.getNorthPoleLocation(),_=k.getSouthPoleLocation(),E=k.getNorthPoleGeometry(),k=k.getSouthPoleGeometry(),$=0,E==c.Eg.PE_POLE_POINT&&M!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($=1),k==c.Eg.PE_POLE_POINT&&_!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($|=2),$!==0&&(p=!0))),n=c.Ab.Hz(n,o,this.Sm,a),l&&(n=c.Zl.local().W(n,y,a)),c.Ab.Kx(o,n,d)),n.B()||(p&&(n=c.$l.local().W(n,o,!1,a)),u!=null&&(n=u.al(n,!1),this.yp(u,c.dm.reverse,n),n=u.bl(n,!1))),n},w.vv=function(u){if(u.Tb()!=2)return 0;var a=0,n=u.mk();u=n.getNorthPoleLocation();var o=n.getSouthPoleLocation(),l=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),l==c.Eg.PE_POLE_POINT&&u!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),n==c.Eg.PE_POLE_POINT&&o!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},w.prototype.cW=function(u,a){var n=this.hf.ef,o=this.hf.$f,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64)),y=c.Ua.kg(u);l==3&&(l=(n=(u=n.Li).hk()).Tb(),y=u.bl(y,!0),this.yp(u,c.dm.forward,y),y=u.al(y,!0)),u=null,p==3&&(p=(o=(u=o.Li).hk()).Tb());var g=l==2;l=(p=p==2)?o.tc():o;var _=!p&&!this.Wv;if(g){if((y=c.Ab.OI(y,n,this.no,a)).B())return y}else{var M=new c.l;y.yc(M);var $=n.Le();if((M.G<$.G||M.H>$.H)&&(M=c.l.construct(M.v-1,$.G,M.C+1,$.H),(y=c.ti.Pu(y,M,n,NaN,0,a)).B()))return y}var E=NaN;g&&(E=n.Bi()),M=o.Yr()!=null,$=this.hH;var k=!isNaN($);if(k&&(y=c.Zl.local().W(y,$,a)),this.WG)g&&c.Ab.wr(n,E,y,d),k&&(g=n.jh(),$*=(E=n.tc().jh())/g),c.Ab.vr(this.hf,y,_,d),k&&(g=n.tc().jh(),$*=(E=o.tc().jh())/g),n=y;else{var P=new c.Ua(y.description);P.yD(y),g&&(c.Ab.wr(n,E,P,d),k&&(g=n.jh(),$*=(E=n.tc().jh())/g)),c.Ab.vr(this.hf,P,_,d),k&&(g=n.tc().jh(),$*=(E=o.tc().jh())/g),_=NaN,p?_=o.Bi():isNaN(this.Dm)||(_=this.Dm),g=w.vv(n)|w.vv(o),E=10*l.Yd(0),this.Wv&&(g=3,E=0),n=c.Ab.QQ(y,n,P,l,_,a,g,E)}return M&&(n=c.Ab.SD(n,o,a)),p&&(n=c.Ab.Hz(n,o,this.Sm,a),k&&(n=c.Zl.local().W(n,$,a)),c.Ab.Kx(o,n,d)),n.B()||u!=null&&(n=u.al(n,!1),this.yp(u,c.dm.reverse,n),n=u.bl(n,!1)),n},w.prototype.$V=function(u,a){var n=(u.da()+u.S())/400;return n!=0?(n=c.Zl.local().W(u,n,a),n=this.QI(n,a),a=u.Ja(),n.dn(a)):(a=new c.Ta(u.Kp()),n=this.SI(a),a=u.Ja(),n.B()?a.Pa():(u.copyTo(a),u=n.D(),a.L(u.x,u.y,u.x,u.y))),a},w.prototype.aW=function(u,a){u=c.ba.kg(u);var n=this.hf.ef,o=this.hf.$f,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64));if(l==3){var y=n.Li;l=(n=y.hk()).Tb(),u=y.al(u,!0),this.yp(y,c.dm.forward,u),u=y.bl(u,!0)}if(l==2){if(this.no==c.ui.Clip?u=c.Zj.local().W(u,n.ol(),n,a):n.Xc()&&(l=new c.l,u.yc(l),n.Le().contains(l)||(this.no==c.ui.PannableFold&&(u=c.Ab.nj(u,n)),c.Ab.Lt(u,n.Le(),n.Yd(0),!0),u=c.Ab.Hn(u,n,0,!0,0,a))),u.B())return u;c.Ab.wr(n,0,u,d)}else c.Ab.Lt(u,n.Le(),n.Yd(0),!0);return c.Ab.vr(this.hf,u,!1,d),n=0,l=!1,y=null,p==3&&(l=!0,p=(o=(y=o.Li).hk()).Tb()),(p=p==2)?n=o.Bi():isNaN(this.Dm)||(n=this.Dm),p&&this.Sm!=c.ui.Clip||(u=c.Ab.Hn(u,o.tc(),n,!1,0,a)),p&&(u=c.Ab.Hz(u,o,this.Sm,a),c.Ab.Kx(o,u,d),u.B())||l&&(u=y.al(u,!0),this.yp(y,c.dm.reverse,u),u=y.bl(u,!0)),u},w.prototype.yp=function(u,a,n){var o=n.I();if(o!=0){for(var l=n.vb(0),p=c.P.mg(200,0),d=[],y=0;y<o;){var g=Math.min(100,o-y);l.Xw(2*y,2*g,p,2,!0);for(var _=0;_<g;++_)d[_]=c.h.construct(p[2*y],p[2*y+1]);u.St(a,d,g),y+=g}n.Qc(1993)}},w.Py=function(u,a,n){if(u==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(u.B())return u;var o=u.K();return o==197?(o=new c.Ea(u.description)).bd(u,!1):c.ba.zd(o)?(o=new c.Ua(u.description)).pc(u,!0):o=u,(o=c.Ab.nj(o,a)).B()?o:c.Ab.Hn(o,a,0,o!=u,0,n)},w.pj=function(u,a,n,o){if(u==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(u.B())return u;var l=u.K();if(c.ba.Ic(l)){u=c.Ab.nj(u,a),l=new c.l,u.A(l);for(var p=c.ua.oy(a,l,!1),d=a.ih(),y=Math.floor((l.v-d.v)/d.S())*d.S()+d.v;y<l.C;)y>l.v+p&&y<l.C-p&&(u=c.Ab.pS(u,a,n,y)),y+=d.S()}else{if(l==197)return(l=new c.Ea(u.description)).bd(u,!1),w.pj(l,a,n,o);if(c.ba.zd(l))return(l=new c.Ua(u.description)).pc(u,!0),w.pj(l,a,n,o)}return w.Py(u,a,o)},w}();c.du=C}(U||(U={})),function(c){var C=function(w){function u(a,n,o,l){var p=w.call(this)||this;return a===void 0?p.description=c.fe.pg():o===void 0?p.description=a:(p.description=c.fe.pg(),p.UB(a,n),p.Sl(o,l)),p}return St(u,w),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var a=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(a*a+n*n)},u.prototype.Di=function(a){var n=this.ta-this.qa,o=this.oa-this.ma;return Math.sqrt(n*n+o*o)<=a},u.prototype.Rn=function(){return!1},u.prototype.lg=function(){var a=new c.h;return a.vc(this.xc(),this.bc()),a},u.YO=function(a,n){return new u(a.x,a.y,n.x,n.y)},u.prototype.dn=function(a){a.Pa(),a.Pf(this.description);var n=new c.l;this.A(n),a.Zo(n),n=1;for(var o=this.description.Ba;n<o;n++)for(var l=this.description.ld(n),p=c.sa.Wa(l);n<p;n++){var d=this.Vg(l,0);a.setInterval(l,0,d)}},u.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,this.ma),a.normalize()},u.prototype.So=function(a){a.Pa(),a.$b(this.ta,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(a){if(a instanceof c.Ed){this.wc();var n=new c.h;n.x=this.ta,n.y=this.oa,a.Gh(n,n),this.ta=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,a.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new c.Od).x=this.ta,n.y=this.oa,n.z=this.Pd(0,1,0),n=a.hp(n),this.ta=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=a.hp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(a,n){return(this.qa-a-(this.ta-a))*(this.ma-n+(this.oa-n))*.5},u.prototype.ux=function(a){return a*this.Rb()},u.prototype.IG=function(a){return a/this.Rb()},u.prototype.yF=function(a){return c.mc.jq(this.ta,this.qa,a)},u.prototype.aR=function(a){return c.mc.jq(this.oa,this.ma,a)},u.prototype.fl=function(a,n){var o=new c.jg;return this.dh(a,n,o),o.get()},u.prototype.dh=function(a,n,o){if(o==null)throw c.i.O();o.Qr(),(o=o.get()).Pf(this.description);var l=new c.h;this.ic(a,l),o.UB(l.x,l.y),this.ic(n,l),o.Sl(l.x,l.y),l=1;for(var p=this.description.Ba;l<p;l++)for(var d=this.description.Fd(l),y=c.sa.Wa(d),g=0;g<y;g++){var _=this.Vc(a,d,g);o.TB(d,g,_),_=this.Vc(n,d,g),o.JB(d,g,_)}},u.prototype.Vc=function(a,n,o){if(n==0)return o==0?this.ic(a).x:this.ic(a).y;switch(c.sa.gz(n)){case 0:return .5>a?this.yv(n,o):this.jv(n,o);case 1:var l=this.yv(n,o);return n=this.jv(n,o),c.mc.jq(l,n,a);case 2:throw c.i.ga("not implemented")}throw c.i.Ra()},u.prototype.ge=function(a,n){var o=this.qa-this.ta,l=this.ma-this.oa,p=o*o+l*l;return p==0?.5:(a=((a.x-this.ta)*o+(a.y-this.oa)*l)/p,n||(0>a?a=0:1<a&&(a=1)),a)},u.prototype.fq=function(a,n,o,l){if(a){if((a=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/a)||1<n)return 0;o!=null&&(o[0]=this.yF(n))}else{if((a=this.qa-this.ta)==0)return n==this.qa?-1:0;if(0>(n=(n-this.ta)/a)||1<n)return 0;o!=null&&(o[0]=this.aR(n))}return l!=null&&(l[0]=n),1},u.prototype.Me=function(a,n){var o=this.ma-this.oa;return o==0?a==this.ma?n:NaN:(a=(a-this.oa)/o,n=this.yF(a),a==1&&(n=this.qa),n)},u.prototype.tu=function(a,n,o){return 0<=this.tp(a.x,a.y,n,o)},u.prototype.xi=function(a,n,o){return 0<=this.tp(a,n,o,!0)},u.prototype.ss=function(a,n){return this.tu(a,n,!1)},u.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var n=this.description.Qq-2;a<n;a++){var o=this.la[a];this.la[a]=this.la[a+n],this.la[a+n]=o}}},u.prototype.wu=function(a,n){(n=c.h.construct(a,n)).sub(this.bc());var o=new c.h;return o.vc(this.xc(),this.bc()),(a=o.yi(n))>(n=8881784197001252e-31*(Math.abs(o.x*n.y)+Math.abs(o.y*n.x)))?-1:a<-n?1:0},u.prototype.tp=function(a,n,o,l){var p=this.ta,d=this.oa,y=a-p,g=n-d;if((y=Math.sqrt(y*y+g*g))<=Math.max(o,6661338147750939e-31*y))return l&&y==0?NaN:0;if(y=a-this.qa,g=n-this.ma,(y=Math.sqrt(y*y+g*g))<=Math.max(o,6661338147750939e-31*y))return l&&y==0?NaN:1;if(y=this.qa-this.ta,g=this.ma-this.oa,0<(l=Math.sqrt(y*y+g*g))){var _=1/l,M=a-p,$=n-d,E=M*(y*=_)+$*(g*=_),k=17763568394002505e-31*(Math.abs(M*y)+Math.abs($*g)),P=y;if(y=-g,g=P,E<-(k=Math.max(o,k))||E>l+k)return NaN;if(Math.abs(M*y+$*g)<=Math.max(o,17763568394002505e-31*(Math.abs(M*y)+Math.abs($*g)))&&(.5>=(y=c.P.Tk(E*_,0,1))?(g=this.ta+(this.qa-this.ta)*y,l=this.oa+(this.ma-this.oa)*y):(g=this.qa-(this.qa-this.ta)*(1-y),l=this.ma-(this.ma-this.oa)*(1-y)),c.h.Jy(g,l,a,n)<=o)){if(.5>y){if(c.h.Jy(g,l,p,d)<=o)return 0}else if(c.h.Jy(g,l,this.qa,this.ma)<=o)return 1;return y}}return NaN},u.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.AM(a))},u.prototype.mD=function(a,n,o){var l=o?this.ta:this.qa;o=o?this.oa:this.ma;var p=new c.h;return p.x=a.qa-l,p.y=a.ma-o,!(n.Sh(p)>6661338147750939e-31*n.aD(p))||(p.x=a.ta-l,p.y=a.oa-o,n.Sh(p)<=6661338147750939e-31*n.aD(p))},u.prototype.lD=function(a){var n=new c.h;return n.x=this.qa-this.ta,n.y=this.ma-this.oa,!!this.mD(a,n,!1)&&(n.Uq(),!!this.mD(a,n,!0))},u.IM=function(a,n){var o=a.wu(n.ta,n.oa),l=a.wu(n.qa,n.ma);return!(0>o&&0>l||0<o&&0<l)&&(o=n.wu(a.ta,a.oa),l=n.wu(a.qa,a.ma),!(0>o&&0>l||0<o&&0<l)&&((o=a.Rb())>(l=n.Rb())?a.lD(n):n.lD(a)))},u.GM=function(a,n,o){var l=c.h.construct(NaN,NaN),p=a.qa-a.ta,d=a.ma-a.oa,y=n.qa-n.ta,g=n.ma-n.oa,_=y*d-p*g;if(_==0)return l;var M=8881784197001252e-31*(Math.abs(y*d)+Math.abs(p*g)),$=n.ta-a.ta,E=n.oa-a.oa,k=y*E-$*g,P=k/_,F=Math.abs(_);return P<-(y=(8881784197001252e-31*(Math.abs(y*E)+Math.abs($*g))*F+M*Math.abs(k))/(_*_)+2220446049250313e-31*Math.abs(P))||P>1+y||(y=(g=p*E-$*d)/_)<-(p=(8881784197001252e-31*(Math.abs(p*E)+Math.abs($*d))*F+M*Math.abs(g))/(_*_)+2220446049250313e-31*Math.abs(y))||y>1+p||(P=c.P.Tk(P,0,1),p=c.P.Tk(y,0,1),d=a.ic(P),_=n.ic(p),(M=new c.h).vc(d,_),M.length()>o&&(M.add(d,_),M.scale(.5),P=a.ge(M,!1),p=n.ge(M,!1),a=a.ic(P),n=n.ic(p),a.sub(n),a.length()>o)||l.na(P,p)),l},u.JM=function(a,n,o,l){var p=0;if((a.ta==n.ta&&a.oa==n.oa||a.ta==n.qa&&a.oa==n.ma)&&(p++,!l))return 1;if(a.qa==n.ta&&a.ma==n.oa||a.qa==n.qa&&a.ma==n.ma){if(++p==2)return 2;if(!l)return 1}return n.xi(a.ta,a.oa,o)||n.xi(a.qa,a.ma,o)||a.xi(n.ta,n.oa,o)||a.xi(n.qa,n.ma,o)?1:l&&p!=0||u.IM(a,n)==0?0:1},u.Yx=function(a,n,o,l,p,d){var y=0,g=a.tp(n.ta,n.oa,d,!1),_=a.tp(n.qa,n.ma,d,!1),M=n.tp(a.ta,a.oa,d,!1),$=n.tp(a.qa,a.ma,d,!1);return isNaN(g)||(l!=null&&(l[y]=g),p!=null&&(p[y]=0),o!=null&&(o[y]=c.h.construct(n.ta,n.oa)),y++),isNaN(_)||(l!=null&&(l[y]=_),p!=null&&(p[y]=1),o!=null&&(o[y]=c.h.construct(n.qa,n.ma)),y++),y==2||isNaN(M)||g==0&&M==0||_==0&&M==1||(l!=null&&(l[y]=0),p!=null&&(p[y]=M),o!=null&&(o[y]=c.h.construct(a.ta,a.oa)),y++),y==2||isNaN($)||g==1&&$==0||_==1&&$==1||(l!=null&&(l[y]=1),p!=null&&(p[y]=$),o!=null&&(o[y]=c.h.construct(n.qa,n.ma)),y++),0<y?(y==2&&l!=null&&l[0]>l[1]&&(a=l[0],l[0]=l[1],l[1]=a,p!=null&&(l=p[0],p[0]=p[1],p[1]=l),o!=null&&(p=c.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),y):(y=u.GM(a,n,d),isNaN(y.x)?0:(o!=null&&(o[0]=a.ic(y.x)),l!=null&&(l[0]=y.x),p!=null&&(p[0]=y.y),1))},u.prototype.$F=function(){return 0},u.prototype.qp=function(){},u.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(c.NC);c.zb=C}(U||(U={})),function(c){var C=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},w.prototype.VX=function(u){this.Lm.push(u)},w.prototype.re=function(){},w}();c.bL=C}(U||(U={})),function(c){var C;(C=c.NL||(c.NL={}))[C.enumFillRuleOddEven=0]="enumFillRuleOddEven",C[C.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(u){function a(n,o){var l=u.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,o===void 0)l.yf=n,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=c.fe.pg();else{if(o==null)throw c.i.O();l.yf=n,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=o}return l.Cj=null,l.gb=0,l}return St(a,u),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new c.Ta(this.description):this.Gq.Pf(this.description)},a.prototype.rx=function(n,o){var l=new c.h;l.x=n,l.y=o,this.Nt(l)},a.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},a.prototype.nf=function(n){if(n.B())throw c.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=c.Zc.Qh(2),this.nb.write(0,0),this.mb=c.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(o+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(n,o){this.Rx(),this.Db(this.xa-1,n,o)},a.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},a.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},a.prototype.xU=function(n){if(this.wc(),this.yf)throw c.i.Ra();var o=this.ea();if(n>o)throw c.i.Ra();if(this.ec(n)){if(this.mb==null)throw c.i.Ra();var l=this.xa,p=this.Ca(n),d=this.Wc(n);this.fm(this.xa+1),this.oc();for(var y=0,g=this.description.Ba;y<g;y++)if(this.Aa[y]!=null){var _=c.sa.Wa(this.description.Fd(y));this.Aa[y].On(_*d,this.Aa[y],_*p,_,!0,1,_*l)}for(;o>n;o--)l=this.nb.read(o),this.nb.write(o,l+1);this.mb.FE(n,1)}},a.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var o=this.mb.read(n);this.mb.write(n,1|o),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},a.prototype.ec=function(n){return(1&this.mb.read(n))!=0},a.prototype.Pn=function(n){if(this.ec(n))return!0;var o=this.Ca(n);return!(o>(n=this.Wc(n)-1))&&(o=this.Oa(o),n=this.Oa(n),o.rb(n))},a.prototype.Av=function(n){return(2&this.mb.read(n))!=0},a.prototype.pc=function(n,o){if(this.Ll(n.description),n.K()!=322)throw c.i.Ra();var l=new c.Ta;(o||this.B())&&(n.Vo(l),this.nf(l)),n.Ro(l),this.lineTo(l)},a.prototype.vp=function(n){var o=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(n,o){if(!n.B()){for(var l=this.xa==0,p=new c.Ta(this.description),d=0;4>d;d++)n.If(o?4-d-1:d,p),d==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,l&&!o&&this.Nf(256,!1)}},a.prototype.add=function(n,o){for(var l=0;l<n.ea();l++)this.addPath(n,l,!o)},a.prototype.addPath=function(n,o,l){this.wf(-1,n,o,l)},a.prototype.$k=function(n,o){this.Cz(n,o)},a.prototype.Fr=function(n,o,l,p,d){if(d||this.ea()!=0||(d=!0),0>o&&(o=n.ea()-1),o>=n.ea()||0>l||0>p||p>n.tv(o))throw c.i.ga("index out of bounds");if(p!=0){var y=n.ec(o)&&l+p==n.tv(o);if(!y||p!=1){if(this.Og=!1,this.Ll(n.description),l=n.Ca(o)+l+1,d&&(p++,l--),y&&p--,y=this.xa,this.fm(this.xa+p),this.oc(),d){if(p==0)return;this.nb.add(this.xa),d=n.mb.read(o),d&=-5,this.yf&&(d|=1),this.mb.write(this.mb.size-1,d),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);d=0;for(var g=this.description.Ba;d<g;d++){var _=this.description.ld(d),M=c.sa.Wa(_),$=n.description.Rf(_);0>$||n.Aa[$]==null?this.Aa[d].Nn(M*y,c.sa.te(_),p*M,M*y):this.Aa[d].On(M*y,n.Aa[$],M*l,p*M,!0,M,M*y)}if(this.vm()||n.Av(o))throw c.i.Ra();this.Qc(1993)}}},a.prototype.jJ=function(){for(var n=0,o=this.ea();n<o;n++)this.zW(n)},a.prototype.zW=function(n){if(this.oc(),n>=this.ea())throw c.i.O();var o=this.Ca(n),l=this.Ka(n);n=this.ec(n)?1:0;for(var p=0,d=this.description.Ba;p<d;p++)if(this.Aa[p]!=null){var y=c.sa.Wa(this.description.Fd(p));this.Aa[p].pi(y*(o+n),y*(l-n),y)}this.Qc(1993)},a.prototype.ar=function(n){this.oc();var o=this.ea();if(0>n&&(n=o-1),n>=o)throw c.i.O();for(var l=this.Ca(n),p=this.Ka(n),d=0,y=this.description.Ba;d<y;d++)if(this.Aa[d]!=null){var g=c.sa.Wa(this.description.Fd(d));this.Aa[d].Gn(g*l,g*p,g*this.xa)}for(l=n+1;l<=o;l++)d=this.nb.read(l),this.nb.write(l-1,d-p);if(this.mb==null)for(l=n+1;l<=o;l++)n=this.mb.read(l),this.mb.write(l-1,n);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(n,o,l,p){if(o==this||l>=o.ea())throw c.i.O();var d=this.ea();if(n>d)throw c.i.O();0>n&&(n=d),0>l&&(l=o.ea()-1),this.Og=!1,this.Ll(o.description),o.oc();var y=o.Ca(l),g=o.Ka(l),_=this.xa,M=o.ec(l)&&!p?1:0;this.fm(this.xa+g),this.oc();for(var $=n<d?this.Ca(n):_,E=0,k=this.description.Ba;E<k;E++){var P=this.description.Fd(E),F=o.description.Rf(P),D=c.sa.Wa(P);0<=F&&o.Aa[F]!=null?(M!=0&&this.Aa[E].On($*D,o.Aa[F],D*y,D,!0,D,D*_),this.Aa[E].On(($+M)*D,o.Aa[F],D*(y+M),D*(g-M),p,D,D*(_+M))):this.Aa[E].Nn($*D,c.sa.te(P),D*g,D*_)}for(this.nb.add(_+g),p=d;p>=n+1;p--)y=this.nb.read(p-1),this.nb.write(p,y+g);for(o.Av(l),this.mb.add(0),p=d-1;p>=n+1;p--)d=this.mb.read(p),d&=-5,this.mb.write(p+1,d);d=o.ER().read(l),d&=-5,this.yf&&(d|=1),this.mb.write(n,d)},a.prototype.Cz=function(n,o){var l=-1,p=this.ea();if(l>p)throw c.i.O();0>l&&(l=p),this.Og=!1;var d=this.xa;this.fm(this.xa+o),this.oc();var y=l<p?this.Ca(l):d;if(n!=null)this.Aa[0].Dz(2*y,n,0,o,!0,2*d);else{var g=c.sa.te(0);this.Aa[0].Nn(2*y,g,2*o,2*d)}n=1;for(var _=this.description.Ba;n<_;n++){g=this.description.ld(n);var M=c.sa.Wa(g);g=c.sa.te(g),this.Aa[n].Nn(y*M,g,M*o,M*d)}for(this.nb.add(this.xa),d=p;d>=l+1;d--)y=this.nb.read(d-1),this.nb.write(d,y+o);for(this.mb.add(0),d=p-1;d>=l+1;d--)o=this.mb.read(d),o&=-5,this.mb.write(d+1,o);this.yf&&this.mb.write(l,1)},a.prototype.lG=function(n,o,l){var p=-1;if(0>n&&(n=this.ea()),n>this.ea()||p>this.Ka(n)||l>o.length)throw c.i.ga("index out of bounds");if(l!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(n)),this.oc();var d=this.xa;this.fm(this.xa+l),this.oc();for(var y=0,g=this.description.Ba;y<g;y++){var _=this.description.Fd(y),M=c.sa.Wa(_);this.Aa[y].Wt(M*(this.Ca(n)+p+l),(d-this.Ca(n)-p)*M,this.Aa[y],M*(this.Ca(n)+p),!0,M),y==0?this.Aa[y].qC(M*(this.Ca(n)+p),l,o,0,!0):this.Aa[y].Yj(c.sa.te(_),(this.Ca(n)+p)*M,l*M)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+p+l,d-this.Ca(n)-p,this.Se,this.Ca(n)+p,!0,1),this.Nj.Wt(this.Ca(n)+p+l,d-this.Ca(n)-p,this.Nj,this.Ca(n)+p,!0,1),this.Se.Yj(1,this.Ca(n)+p,l),this.Nj.Yj(-1,this.Ca(n)+p,l)),n+=1,o=this.ea();n<=o;n++)this.nb.write(n,this.nb.read(n)+l)}},a.prototype.xf=function(n,o,l){var p=this.ea();if(0>n&&(n=this.ea()),n>=p||o>this.Ka(n))throw c.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(n));var d=this.xa;this.fm(this.xa+1),this.oc();var y=this.Ca(n);this.Aa[0].xj(2*(y+o),l,2*d),l=1;for(var g=this.description.Ba;l<g;l++){var _=this.description.Fd(l),M=c.sa.Wa(_);this.Aa[l].Nn(M*(y+o),c.sa.te(_),M,M*d)}for(n+=1;n<=p;n++)this.nb.write(n,this.nb.read(n)+1)},a.prototype.yB=function(n,o){var l=this.ea();if(0>n&&(n=l-1),n>=l||o>=this.Ka(n))throw c.i.ga("index out of bounds");this.oc();var p=this.Ca(n);0>o&&(o=this.Ka(n)-1),o=p+o,p=0;for(var d=this.description.Ba;p<d;p++)if(this.Aa[p]!=null){var y=c.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(y*o,y,y*this.xa)}for(;l>=n+1;l--)o=this.nb.read(l),this.nb.write(l,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.pE=function(n,o,l,p){if(n=this.Ca(n)+o,(l=this.Ca(l)+p)<n||0>n||l>this.I()-1)throw c.i.O();o=0,(p=this.Ha()).Wb(n);do{for(;p.Ia()&&(n=p.ia(),p.xb()!=l);)o+=n=n.Rb();if(p.xb()==l)break}while(p.ab());return o},a.prototype.aO=function(n,o,l){if(o=this.Ca(n)+o,l=this.Ca(n)+l,0>o||l>this.I()-1)throw c.i.O();var p=this.Ha();if(o>l){if(!this.ec(n))throw c.i.O("cannot iterate across an open path");p.EB()}var d=n=0;p.Wb(o);do d+=n,n=p.ia().Rb();while(p.xb()!=l);return d},a.prototype.ng=function(){return c.si.im(this,null)},a.prototype.FS=function(n,o,l){for(var p=n;p<l-1;p++)if(this.ec(p))throw c.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var d=this.pE(n,o,l,void 0);if(d!=0)for(var y=1;y<p;y++){var g=this.description.ld(y);if(c.sa.gz(g)!=2)for(var _=c.sa.Wa(g),M=0;M<_;M++)this.HS(g,n,o,l,d,M)}}},a.prototype.ES=function(n,o,l){var p=this.description.Ba;if(p!=1){var d=this.aO(n,o,l);if(d!=0)for(var y=1;y<p;y++){var g=this.description.ld(y);if(c.sa.gz(g)!=2)for(var _=c.sa.Wa(g),M=0;M<_;M++)this.GS(g,n,o,l,d,M)}}},a.prototype.HS=function(n,o,l,p,d,y){var g=this.Ha(),_=this.Ca(o)+l;p=this.Ca(p)+void 0,o=this.Vc(n,_,y),l=this.Vc(n,p,y);var M=o,$=0;g.Wb(_);do if(g.Ia()){if(g.ia(),g.xb()==p)break;this.setAttribute(n,g.xb(),y,M),g.ni();do{if(_=g.ia(),g.kk()==p)return;$+=_=_.Rb(),M=c.mc.jq(o,l,$/d),g.Qn()||this.setAttribute(n,g.kk(),y,M)}while(g.Ia())}while(g.ab())},a.prototype.GS=function(n,o,l,p,d,y){var g=this.Ha(),_=this.Ca(o)+l;if((o=this.Ca(o)+p)!=_){p=this.Vc(n,_,y),l=this.Vc(n,o,y);var M=0;g.Wb(_),g.EB(),_=p;do{var $=g.ia();this.setAttribute(n,g.xb(),y,_),M+=_=$.Rb(),_=c.mc.jq(p,l,M/d)}while(g.kk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},a.prototype.Pc=function(n){n instanceof c.Ed?this.TD(n,-1):this.rN(n)},a.prototype.TD=function(n,o){if(!this.B()&&!n.isIdentity()){this.oc();var l=this.Aa[0],p=new c.h,d=new c.h;if(0>o){var y=this.vm(),g=0;o=this.xa}else y=this.Av(o),g=this.Ca(o),o=this.Wc(o);for(;g<o;g++){if(p.x=l.read(2*g),p.y=l.read(2*g+1),y){var _=this.Nj.read(g);if(0<=_)switch(7&this.Se.read(g)){case 2:d.x=this.Td.read(_),d.y=this.Td.read(_+1),n.Gh(d,d),this.Td.write(_,d.x),this.Td.write(_+1,d.y),d.x=this.Td.read(_+3),d.y=this.Td.read(_+4),n.Gh(d,d),this.Td.write(_+3,d.x),this.Td.write(_+4,d.y);break;case 4:throw c.i.Ra()}}n.Gh(p,p),l.write(2*g,p.x),l.write(2*g+1,p.y)}this.Qc(1993)}},a.prototype.rN=function(n){if(!this.B()){this.se(1),this.oc();for(var o=this.Aa[0],l=this.Aa[1],p=new c.Od,d=new c.Od,y=this.vm(),g=0;g<this.xa;g++){if(p.x=o.read(2*g),p.y=o.read(2*g+1),p.z=l.read(g),y){var _=this.Nj.read(g);if(0<=_)switch(7&this.Se.read(g)){case 2:d.x=this.Td.read(_),d.y=this.Td.read(_+1),d.z=this.Td.read(_+2),d=n.hp(d),this.Td.write(_,d.x),this.Td.write(_+1,d.y),this.Td.write(_+1,d.z),d.x=this.Td.read(_+3),d.y=this.Td.read(_+4),d.z=this.Td.read(_+5),d=n.hp(d),this.Td.write(_+3,d.x),this.Td.write(_+4,d.y),this.Td.write(_+5,d.z);break;case 4:throw c.i.Ra()}}p=n.hp(p),o.write(2*g,p.x),o.write(2*g+1,p.y),l.write(g,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=c.Zc.Qh(1,0),this.mb=c.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.qp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?c.ja.Dn(this.nb):null,n.mb=this.mb!=null?c.rn.Dn(this.mb):null,n.Nj=this.Nj!=null?c.ja.Dn(this.Nj):null,n.Se=this.Se!=null?c.rn.Dn(this.Se):null,n.Td=this.Td!=null?c.ce.Dn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.ck(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var n=this.Ha(),o=new c.Ex(0);n.ab();)for(;n.Ia();)o.add(n.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&u.prototype.Nb.call(this,n)))return!1;var o=this.ea();return!(o!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,o+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,o))&&u.prototype.Nb.call(this,n)},a.prototype.Ha=function(){return new c.TL(this)},a.prototype.dy=function(n){if(u.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Ap=function(n,o){if(u.prototype.Ap.call(this,n,o),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(n){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},a.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},a.prototype.zu=function(){if(this.ck(1024)){var n=this.ea();this.Cj==null?this.Cj=new c.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new c.Ex(0);for(var o=new c.Ex(0),l=new c.h,p=0,d=this.Ha();d.ab();){for(o.reset(),this.D(this.Ca(d.gb),l);d.Ia();)o.add(d.ia().Sx(l.x,l.y));n.add(o.tm());var y=p++;this.Cj.write(y,o.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},a.prototype.AR=function(){if(this.yf){this.hm();for(var n=this.ea(),o=0;o<n;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.ck(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=c.Zc.Or(n+1));for(var o=1,l=0;l<n;l++){var p=this.Cj.read(l);l==0&&(o=0<p?1:-1),0<p*o?this.mb.uJ(l,4):this.mb.FE(l,4)}this.Nf(8,!1)}},a.prototype.nz=function(n){var o=this.gb,l=this.ea();if(0<=o&&o<l){if(n<this.Wc(o)){if(n>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<l&&n>=this.Ca(o)&&n<this.Wc(o))return this.gb=o}if(5>l){for(o=0;o<l;o++)if(n<this.Wc(o))return this.gb=o;throw c.i.ga("corrupted geometry")}for(o=0,--l;l>o;){var p=o+(l-o>>1);if(n<this.Ca(p))l=p-1;else{if(!(n>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var o=0,l=this.ea();o<l;o++)this.ec(o)&&n++}return n},a.prototype.tv=function(n){var o=this.Ka(n);return this.ec(n)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.LJ=function(n){this.nb=n,this.Qc(16777215)},a.prototype.QR=function(){return this.vx(),this.Se},a.prototype.ER=function(){return this.vx(),this.mb},a.prototype.KJ=function(n){this.mb=n,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(n){return this.nb.read(n+1)},a.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},a.prototype.Ca=function(n){return this.nb.read(n)},a.prototype.nu=function(n,o){this.Cb==null&&(this.Cb=new c.Wk),o=c.Mx.kW(o);var l=this.Cb.Hk;if(l!=null){if(!(l.Kk<n||o>l.MR()))return!0;this.Cb.tD(null)}return l=c.Mx.create(this,n,o),this.Cb.tD(l),!0},a.prototype.dc=function(){var n=u.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Cn(n,0,o+1),this.mb!=null&&this.mb.Cn(n,0,o)}return n},a.prototype.UF=function(n){return this.Se!=null?this.Se.read(n):1},a.prototype.cc=function(n,o,l){var p=this.nz(n);if(n==this.Wc(p)-1&&!this.ec(p))throw c.i.ga("index out of bounds");this.oc();var d=this.Se,y=1;if(d!=null&&(y=7&d.read(n)),y!==1)throw c.i.Ra();if(o.Qr(),o=o.get(),l?o.Pf(c.fe.pg()):o.Pf(this.description),p=n==this.Wc(p)-1&&this.ec(p)?this.Ca(p):n+1,d=new c.h,this.D(n,d),o.Ec(d),this.D(p,d),o.Rc(d),!l)for(l=1,d=this.description.Ba;l<d;l++){y=this.description.Fd(l);for(var g=c.sa.Wa(y),_=0;_<g;_++){var M=this.Vc(y,n,_);o.TB(y,_,M),M=this.Vc(y,p,_),o.JB(y,_,M)}}},a.prototype.Tj=function(n,o){if(n>=this.ea())throw c.i.O();if(this.B())o.Pa();else{if(this.Av(n))throw c.i.ga("not implemented");var l=this.vb(0),p=new c.h,d=new c.l;d.Pa();var y=this.Ca(n);for(n=this.Wc(n);y<n;y++)l.uc(2*y,p),d.$b(p);o.L(d)}},a.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new c.Wk),!(n==0||16>this.I())&&(n=c.ua.iE(this),this.Cb.RM(n),!0)},a.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new c.Wk),this.Cb.Bo==null){this.Cb.sD(null);var n=c.ua.TN(this);this.Cb.sD(n)}},a.prototype.$o=function(n){this.zq=n},a.prototype.Kn=function(){return this.zq},a.prototype.yD=function(n){if(this==n)throw c.i.ga("MultiPathImpl.add");for(var o=this.ea(),l=0;l<n.ea();l++)this.addPath(n,l,!0),this.xU(o),o++},a.prototype.fO=function(n){var o=this.nz(n),l=this.Ca(o);if(l!=n){if(n>=(o=this.Wc(o))||n<l)throw c.i.ga("change_ring_start_point");for(var p=0,d=this.description.Ba;p<d;p++){var y=this.description.ld(p);y=c.sa.Wa(y),this.Aa[p].rotate(l*y,n*y,o*y)}}},a}(c.Fx);c.Xk=w}(U||(U={})),function(c){var C=function(w){function u(a){var n=w.call(this)||this;if(a!==void 0){if(a==null)throw c.i.O();n.description=a}else n.description=c.fe.pg();return n.xa=0,n}return St(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},u.prototype.Du=function(a,n){this.resize(this.xa+1);var o=new c.h;o.na(a,n),this.Db(this.xa-1,o)},u.prototype.Gd=function(a,n,o){if(o=0>o?a.I():o,0>n||n>a.I()||o<n)throw c.i.O();if(n!=o){this.Ll(a.description),o-=n;var l=this.xa;this.resize(this.xa+o),this.oc();for(var p=0,d=a.description.Ba;p<d;p++){var y=a.description.Fd(p),g=c.sa.Wa(y),_=this.vb(y);y=a.vb(y),_.On(l*g,y,n*g,o*g,!0,1,l*g)}}},u.prototype.CD=function(a,n){var o=a.length;if(n=0>n?o:n,0>o||0>n)throw c.i.O();if(n!=0){o=n-0,n=this.xa,this.resize(this.xa+o);for(var l=0;l<o;l++)this.Db(n+l,a[0+l])}},u.prototype.yB=function(a){if(0>a||a>=this.I())throw c.i.ga("index out of bounds");this.oc();for(var n=0,o=this.description.Ba;n<o;n++)if(this.Aa[n]!=null){var l=c.sa.Wa(this.description.Fd(n));this.Aa[n].Gn(l*a,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(a){this.fm(a)},u.prototype.qp=function(){},u.prototype.Pa=function(){w.prototype.rD.call(this)},u.prototype.Pc=function(a){if(a instanceof c.Ed){if(this.B())return;this.oc();for(var n=this.Aa[0],o=new c.h,l=0;l<this.xa;l++)o.x=n.read(2*l),o.y=n.read(2*l+1),a.Gh(o,o),n.write(2*l,o.x),n.write(2*l+1,o.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),n=this.Aa[0],o=this.Aa[1];var p=new c.Od;for(l=0;l<this.xa;l++){p.x=n.read(2*l),p.y=n.read(2*l+1),p.z=o.read(l);var d=a.hp(p);n.write(2*l,d.x),n.write(2*l+1,d.y),o.write(l,d.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(a){return a==this||a instanceof u&&w.prototype.Nb.call(this,a)},u.prototype.gW=function(a,n){var o=this.xa;if(o=Math.min(o,n+1e3),0>n||n>=this.xa||o<n||a.length!=1e3)throw c.i.O();var l=o-n,p=[];for(this.vb(0).Xw(2*n,2*l,p,0,!0),n=0;n<l;n++)a[n]=c.h.construct(p[2*n],p[2*n+1]);return o},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.ng=function(){return null},u}(c.Fx);c.ee=C}(U||(U={})),function(c){var C;(C=c.dL||(c.dL={}))[C.NotDetermined=0]="NotDetermined",C[C.Structure=1]="Structure",C[C.DegenerateSegments=2]="DegenerateSegments",C[C.Clustering=3]="Clustering",C[C.Cracking=4]="Cracking",C[C.CrossOver=5]="CrossOver",C[C.RingOrientation=6]="RingOrientation",C[C.RingOrder=7]="RingOrder",C[C.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",C[C.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",C[C.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function u(a,n,o){a===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=a,this.Lo=n,this.Mo=o)}return u.prototype.Yt=function(a){this.Lj=a.Lj,this.Lo=a.Lo,this.Mo=a.Mo},u}();c.Nd=w}(U||(U={})),function(c){c.P=function(){function C(){}return C.assert=function(w){if(w===!1)throw c.i.BK()},C.XJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},C.Hu=function(w){var u;u===void 0&&(u=0);for(var a=[],n=0;n<w;n++)a[n]=C.mg(2,u);return a},C.mg=function(w,u){u===void 0&&(u=0);for(var a=[],n=0;n<w;n++)a[n]=u;return a},C.bv=function(w,u){var a,n;for(a===void 0&&(a=0),n===void 0&&(n=w.length-1);a<=n;a++)w[a]=u},C.Tk=function(w,u,a){return w<u?u:w>a?a:w},C.Vh=function(w,u){var a=5381;return((a=((a=((a=u!==void 0?(u<<5)+u+(255&w):(a<<5)+a+(255&w))<<5)+a+(w>>8&255))<<5)+a+(w>>16&255))<<5)+a+(w>>24&255)&2147483647},C.wj=function(){throw Error("Not Implemented")},C.XA=function(w){return C.WT(w)+12345&2147483647},C.SG=function(w){var u=32,a=w%C.Px|0,n=w/C.Px|0;return(u&=63)==0?w:(32>u?(w=a>>>u|n<<32-u,u=n>>u):(w=n>>u-32,u=0<=n?0:-1),u*C.Px+(w>>>0))},C.WT=function(w){var u=1103515245,a=65535&u;return((u-a)*(w|=0)|0)+(a*w|0)|0},C.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},C.MAX_SAFE_INTEGER=Math.pow(2,53)-1,C.MIN_SAFE_INTEGER=-C.MAX_SAFE_INTEGER,C.QC=65536,C.Px=C.QC*C.QC,C}()}(U||(U={})),function(c){var C;(C=c.xL||(c.xL={}))[C.Project=0]="Project",C[C.Union=1]="Union",C[C.Difference=2]="Difference",C[C.Proximity2D=3]="Proximity2D",C[C.Relate=4]="Relate",C[C.Equals=5]="Equals",C[C.Disjoint=6]="Disjoint",C[C.Intersects=7]="Intersects",C[C.Within=8]="Within",C[C.Contains=9]="Contains",C[C.Crosses=10]="Crosses",C[C.Touches=11]="Touches",C[C.Overlaps=12]="Overlaps",C[C.Buffer=13]="Buffer",C[C.Distance=14]="Distance",C[C.Intersection=15]="Intersection",C[C.Clip=16]="Clip",C[C.Cut=17]="Cut",C[C.DensifyByLength=18]="DensifyByLength",C[C.DensifyByAngle=19]="DensifyByAngle",C[C.LabelPoint=20]="LabelPoint",C[C.GeodesicBuffer=21]="GeodesicBuffer",C[C.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",C[C.ShapePreservingDensify=23]="ShapePreservingDensify",C[C.GeodeticLength=24]="GeodeticLength",C[C.GeodeticArea=25]="GeodeticArea",C[C.Simplify=26]="Simplify",C[C.SimplifyOGC=27]="SimplifyOGC",C[C.Offset=28]="Offset",C[C.Generalize=29]="Generalize",C[C.SymmetricDifference=30]="SymmetricDifference",C[C.ConvexHull=31]="ConvexHull",C[C.Boundary=32]="Boundary",C[C.SimpleRelation=33]="SimpleRelation";var w=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.yn=function(){},u.prototype.Ku=function(){return!1},u}();c.Ge=w}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(p=new c.$c(a),this.W(p,n,[o],!1,l).next()):l===!0?(o=new c.wC(a,n,o,!1,p),c.Ih.local().W(o,n,p)):new c.wC(a,n,o,!1,p)},u.instance=null,u}(c.Ge);c.vC=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l){this.za=-1,this.Sd=u,this.Vz=a,this.Es=n,this.nT=new c.l,this.nT.Pa(),this.ho=-1,this.Vb=l}return w.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(u,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(u,a){return c.CK.buffer(u,a,this.Vz,NaN,96,this.Vb)},w.prototype.re=function(){},w}();c.wC=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.gL(a,n,o,l)},u.instance=null,u}(c.Ge);c.fL=C}(U||(U={})),function(c){var C=function(){function w(u,a,n){if(this.za=-1,u==null)throw c.i.O();this.aa=a,this.Ak=u,this.ra=c.ua.Xd(n,a,!1)}return w.prototype.next=function(){var u;return(u=this.Ak.next())!=null?(this.za=this.Ak.Ma(),c.Vd.clip(u,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.gL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){return a instanceof c.ba?c.yC.mE(a):new c.yC(n,a,o)},u.instance=null,u}(c.Ge);c.xC=C}(U||(U={})),function(c){var C=function(){function w(u,a,n){if(this.pA=new c.au,this.za=-1,a==null)throw c.i.O();this.YG=u,this.Jc=!1,this.Ak=a,this.Vb=n}return w.prototype.next=function(){if(this.YG){if(!this.Jc){var u=this.ZN(this.Ak);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.Ak.next())!=null)return this.za=this.Ak.Ma(),w.mE(u);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZN=function(u){for(var a;(a=u.next())!=null;)this.pA.Ib(a);return this.pA.YQ()},w.prototype.re=function(){if(!this.Jc){if(!this.YG)throw c.i.ga("Invalid call for non merging convex hull.");var u=this.Ak.next();if(u==null)throw c.i.ga("Expects a non-null geometry.");this.pA.Ib(u)}},w.mE=function(u){if(w.QS(u))return u;var a=u.K();if(c.Xk.zd(a))return(a=new c.Ua(u.description)).pc(u,!0),a;if(a==550&&u.I()==2){var n=new c.Ta;return a=new c.Ua(u.description),u.we(0,n),a.nf(n),u.we(1,n),a.lineTo(n),a}return c.au.MO(u)},w.QS=function(u){if(u.B())return!0;var a=u.K();return a==33||a==197||!c.Xk.zd(a)&&(a==550?u.I()==1:a==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||c.au.EG(u,0)))},w}();c.yC=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return new c.iL(a,n,o,l,p)},u.instance=null,u}(c.Ge);c.hL=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l){if(this.Vf=null,a==null||n==null)throw c.i.ga("invalid argument");this.kT=u,this.iA=a,this.gH=n,u=c.ua.ov(a,n),this.ra=c.ua.Xd(o,u,!0),this.fH=-1,this.od=l}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},w.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},w.prototype.OQ=function(){var u=new c.Ua,a=new c.Ua,n=new c.Ua;this.Vf.push(u),this.Vf.push(a);var o=[];c.GK.EK(this.kT,this.iA,this.gH,this.ra,o,this.od);for(var l=0;l<o.length;l++){var p=o[l];if(p.ct==0)u.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Vf.push(p.Y);else{if(p.ct!=4)throw c.i.ga("internal");n.add(p.Y,!1)}}n.B()||u.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(n),u.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)},w.prototype.NQ=function(){var u=new c.ja(0),a=new c.hd,n=a.WE(),o=a.Ib(this.iA),l=a.Ib(this.gH),p=new c.Hg;try{p.Gt(a,this.ra,this.od),p.fl(n,o,l,u);var d=a.Ke(o),y=new c.Ea,g=new c.Ea;for(this.Vf.length=0,this.Vf.push(y),this.Vf.push(g),o=0;o<u.size;o++){var _=new c.hd,M=_.Ib(d),$=_.Ib(a.Ke(u.get(o)));p.fr(_,this.od);var E=p.Cv(M,$),k=_.Ke(E);if(!k.B()){var P=a.FF(u.get(o),n);P==2?y.add(k,!1):P==1?g.add(k,!1):this.Vf.push(k);var F=new c.hd;M=F.Ib(d),$=F.Ib(a.Ke(u.get(o))),p.fr(F,this.od),d=F.Ke(p.km(M,$))}}!d.B()&&0<u.size&&this.Vf.push(d),y.B()&&g.B()&&(this.Vf.length=0)}finally{p.Wg()}},w.prototype.re=function(){},w}();c.iL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){if(a instanceof c.ba)return a=new c.$c(a),this.W(a,n,o).next();if(0>=n)throw c.i.O();return new c.jL(a,n,o)},u.instance=null,u}(c.Ge);c.Zl=C}(U||(U={})),function(c){var C=function(){function w(u,a){this.za=-1,this.Sd=u,this.Rs=a}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(u)):null},w.prototype.IP=function(u){if(u.B()||1>u.Eb())return u;var a=u.K();if(a==1736||a==1607)return this.Iy(u);if(c.ba.zd(a))return this.KP(u);if(a==197)return this.JP(u);throw c.i.Ra()},w.prototype.KP=function(u){if(u.Rb()<=this.Rs)return u;var a=new c.Ua(u.description);return a.pc(u,!0),this.Iy(a)},w.prototype.JP=function(u){var a=new c.Ea(u.description);a.bd(u,!1);var n=new c.l;return u.A(n),u=n.da(),n.S()<=this.Rs&&u<=this.Rs?a:this.Iy(a)},w.prototype.Iy=function(u){for(var a=u.Ja(),n=u.Ha();n.ab();)for(var o=!0;n.Ia();){var l=n.ia();if(l.K()!=322)throw c.i.ga("not implemented");var p=n.Qn(),d=l.Rb();if(d>this.Rs){var y=Math.ceil(d/this.Rs);d=new c.Ta(u.description),o&&(l.Vo(d),a.nf(d));var g=o=1/y,_=0;for(--y;_<y;_++)l.Vw(g,d),a.lineTo(d),g+=o;p?a.Cp():(l.Ro(d),a.lineTo(d))}else p?a.Cp():a.pc(l,o);o=!1}return a},w.prototype.re=function(){},w}();c.jL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l).next()):new c.kL(a,n,o,l)},u.km=function(a,n,o,l){if(a.B()||n.B())return a;var p=a.Eb(),d=n.Eb();if(p>d)return a;var y=a.K(),g=n.K(),_=new c.l,M=new c.l,$=new c.l;a.A(_),n.A(M),$.L(_),$.$b(M);var E=($=c.ua.Xd(o,$,!0))*Math.sqrt(2)*1.00001,k=new c.l;if(k.L(_),k.X(E,E),!k.isIntersecting(M))return a;if(p==1&&d==2)return u.FV(a,n,g,o,l);if(y==33)switch(c.Xk.zd(g)?(o=new c.Ua(n.description),o.pc(n,!0)):o=n,g){case 1736:return u.SU(a,o,$);case 1607:return u.TU(a,o,$);case 550:return u.QU(a,o,$);case 197:return u.PU(a,o,$);case 33:return u.RU(a,o,$);default:throw c.i.O()}else if(y==550)switch(g){case 1736:return u.iU(a,n,$);case 197:return u.gU(a,n,$);case 33:return u.hU(a,n,$)}return c.Hg.km(a,n,o,l)},u.SU=function(a,n,o){return c.jd.FG(n,a,o)==0?a:a.Ja()},u.TU=function(a,n,o){var l=a.D();n=n.Ha();for(var p=o*Math.sqrt(2)*1.00001,d=p*p,y=new c.l;n.ab();)for(;n.Ia();){var g=n.ia();if(g.A(y),y.X(p,p),y.contains(l)){if(g.ss(l,o))return a.Ja();var _=g.bc();if(c.h.zc(l,_)<=d||(_=g.xc(),c.h.zc(l,_)<=d))return a.Ja()}}return a},u.QU=function(a,n,o){var l=n.vb(0);n=n.I();var p=a.D(),d=new c.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var y=0;y<n;y++)if(l.uc(2*y,d),c.h.zc(d,p)<=o)return a.Ja();return a},u.PU=function(a,n,o){var l=new c.l;return n.A(l),l.X(o,o),n=a.D(),l.contains(n)?a.Ja():a},u.RU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D();return n=n.D(),c.h.zc(l,n)<=o?a.Ja():a},u.iU=function(a,n,o){var l=new c.l;n.A(l),l.X(o,o);for(var p=a.I(),d=!1,y=[],g=0;g<p;g++)y[g]=!1;var _=new c.h;for(g=0;g<p;g++)a.D(g,_),l.contains(_)&&c.jd.Zd(n,_,o)!=0&&(d=!0,y[g]=!0);if(!d)return a;for(n=a.Ja(),g=0;g<p;g++)y[g]||n.Gd(a,g,g+1);return n},u.gU=function(a,n,o){var l=new c.l;n.A(l),l.X(o,o),n=a.I();var p=!1;o=[];for(var d=0;d<n;d++)o[d]=!1;var y=new c.h;for(d=0;d<n;d++)a.D(d,y),l.contains(y)&&(p=!0,o[d]=!0);if(!p)return a;for(l=a.Ja(),d=0;d<n;d++)o[d]||l.Gd(a,d,d+1);return l},u.hU=function(a,n,o){var l=a.vb(0),p=a.I(),d=n.D(),y=new c.h,g=!1;n=[];for(var _=0;_<p;_++)n[_]=!1;for(o=(_=o*Math.sqrt(2)*1.00001)*_,_=0;_<p;_++)l.uc(2*_,y),c.h.zc(y,d)<=o&&(g=!0,n[_]=!0);if(!g)return a;for(l=a.Ja(),_=0;_<p;_++)n[_]||l.Gd(a,_,_+1);return l},u.FV=function(a,n,o,l,p){var d=new c.Hh;a.dn(d);var y=new c.l;return n.A(y),d.$b(y),d.X(.1*d.S(),.1*d.da()),(y=new c.Ea).bd(d,!1),o==1736?y.add(n,!0):y.bd(n,!0),c.Zj.local().W(a,y,l,p)},u.instance=null,u}(c.Ge);c.mp=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o){this.vs=a==null,this.za=-1,this.Sd=u,this.Vz=n,this.rT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.mp.km(u,this.rT,this.Vz,this.Vb)):null;var u},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.kL=C}(U||(U={})),function(c){var C=function(){function u(a){this.od=a,this.Dj=new c.l,this.Dj.Pa(),this.qh=new c.l,this.qh.Pa()}return u.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},u.prototype.$P=function(a,n){if(this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return c.ba.Ic(a.K())&&c.ba.Ic(n.K())?a.I()>n.I()?this.bE(a,n,o):(this.Pt(),a=this.bE(n,a,o),this.Pt(),a):a.K()==550&&c.ba.Ic(n.K())?(a=this.cE(n,a,o),this.Pt(),a):n.K()==550&&c.ba.Ic(a.K())?this.cE(a,n,o):a.K()==550&&n.K()==550?a.I()>n.I()?this.dE(a,n):(this.Pt(),a=this.dE(n,a),this.Pt(),a):0},u.prototype.bE=function(a,n,o){var l=a.Ha(),p=n.Ha(),d=new c.l,y=new c.l,g=17976931348623157e292;if(!o&&this.lY(a,n,l,p))return 0;for(;l.ab();)for(;l.Ia();)if((a=l.ia()).A(d),!(d.px(this.qh)>g)){for(;p.ab();)for(;p.Ia();)if((n=p.ia()).A(y),d.px(y)<g&&(n=a.ub(n,o),(n*=n)<g)){if(n==0)return 0;g=n}p.aj()}return Math.sqrt(g)},u.prototype.cE=function(a,n,o){var l=a.Ha(),p=new c.l,d=17976931348623157e292,y=new c.h,g=n.I();for(o=!o&&a.K()==1736;l.ab();)for(;l.Ia();){var _=l.ia();if(_.A(p),!(1<g&&p.px(this.qh)>d)){for(var M=0;M<g;M++){if(n.D(M,y),o&&c.jd.Zd(a,y,0)!=0)return 0;var $=_.ge(y,!1);if(y.sub(_.ic($)),($=y.Uk())<d){if($==0)return 0;d=$}}o=!1}}return Math.sqrt(d)},u.prototype.dE=function(a,n){for(var o,l=17976931348623157e292,p=new c.h,d=new c.h,y=a.I(),g=n.I(),_=0;_<y;_++)if(a.D(_,p),!(1<g&&this.qh.dK(p)>l)){for(var M=0;M<g;M++)if(n.D(M,d),(o=c.h.zc(p,d))<l){if(o==0)return 0;l=o}}return Math.sqrt(l)},u.prototype.lY=function(a,n,o,l){if(a.K()==1736){for(;l.ab();)if(l.Ia()){var p=l.ia();if(c.jd.Zd(a,p.xc(),0)!=0)return!0}l.aj()}if(n.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),c.jd.Zd(n,a.xc(),0)!=0))return!0;o.aj()}return!1},u.prototype.im=function(a,n){return a.B()||n.B()?NaN:(a.A(this.Dj),n.A(this.qh),this.$P(a,n))},u}(),w=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return St(a,u),a.prototype.W=function(n,o,l){if(n==null||o==null)throw c.i.O();if(n.B()||o.B())return NaN;var p=n.K(),d=o.K();if(p==33){if(d==33)return c.h.ub(n.D(),o.D());if(d==197)return l=new c.l,o.A(l),l.ub(n.D());(p=new c.ee).add(n),n=p}else if(p==197){if(d==197)return d=new c.l,n.A(d),l=new c.l,o.A(l),l.ub(d);(p=new c.Ea).bd(n,!1),n=p}return d==33?((d=new c.ee).add(o),o=d):d==197&&((d=new c.Ea).bd(o,!1),o=d),new C(l).im(n,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(c.Ge);c.lL=w}(U||(U={})),function(c){var C=function(){function w(u,a,n,o){this.uH=u,this.yH=a,this.od=o,this.VG=n}return w.prototype.next=function(){var u=this.uH.next();return u==null?null:this.uC(u)},w.prototype.Ma=function(){return this.uH.Ma()},w.prototype.uC=function(u){var a=u.K();if(c.ba.Tn(a))return u;if(a==197)return(a=new c.Ea(u.description)).bd(u,!1),this.uC(a);if(u.B())return u;if(u==null)throw c.i.Ra();a=u.Ja();for(var n=new c.zb,o=0,l=u.ea();o<l;o++)this.OK(u,o,a,n);return a},w.prototype.OK=function(u,a,n,o){if(!(2>u.Ka(a))){var l=u.Ca(a),p=u.Wc(a)-1,d=u.vb(0),y=u.ec(a),g=new c.ja(0);g.Jb(u.Ka(a)+1);var _=new c.ja(0);for(_.Jb(u.Ka(a)+1),g.add(y?l:p),g.add(l),l=new c.h;1<g.size;){var M=g.Gc();g.Jf();var $=g.Gc();u.D(M,l),o.Ec(l),u.D($,l),o.Rc(l),0<=($=this.NK(o,l,d,M,$,p))?(g.add($),g.add(M)):_.add(M)}if(y||_.add(g.get(0)),_.size==g.size)n.addPath(u,a,!0);else if(2<=_.size&&(!this.VG||_.size!=2||!(y||c.h.ub(u.Oa(_.get(0)),u.Oa(_.get(1)))<=this.yH))){for(a=new c.Ta,o=0,p=_.size;o<p;o++)u.we(_.get(o),a),o==0?n.nf(a):n.lineTo(a);y&&(this.VG||_.size!=2||n.lineTo(a),n.Cp())}}},w.prototype.NK=function(u,a,n,o,l,p){var d=l-1;for(l<=o&&(d=p),p=l=-1,o+=1;o<=d;o++){n.uc(2*o,a);var y=a.x,g=a.y;u.ic(u.ge(a,!1),a),a.x-=y,a.y-=g,(y=a.length())>this.yH&&y>p&&(l=o,p=y)}return l},w.prototype.re=function(){},w}();c.mL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 29},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.mL(a,n,o,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.zC=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p,d,y,g){return a instanceof c.ba?(g=new c.$c(a),this.W(g,n,o,[l],p,d,!1,y).next()):y===!0?(o=new c.BC(a,n,o,l,p,!1,!1,g),c.Ih.local().W(o,n,g)):new c.BC(a,n,o,l,p,!1,!1,g)},u.instance=null,u}(c.Ge);c.AC=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l,p,d,y){if(p)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=u,this.wg=a,this.Ae=n,this.Es=o,this.bo=l,this.ho=-1,this.Vb=y,this.oT=new c.l,this.oT.Pa()}return w.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(u,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.VQ=function(u,a){return c.QK.buffer(u,this.wg,this.Ae,a,this.bo,this.Vb)},w.prototype.re=function(){},w}();c.BC=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){if(n==null)throw c.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw c.i.Fe();var l=c.cb.tc(n),p=c.cb.xv(l),d=c.cb.gv(l);p*=2-p;var y=l.Id().ci,g=a.K();if(g==1736||g==197)var _=a.ng();else c.ba.zd(g)?(_=new c.Ua(a.description)).pc(a,!0):_=a;if(l.Nb(n)==0){if(c.cb.Xc(n)){_=c.Jh.nj(_,n),g==1607&&_==a&&(_=c.ba.kg(a)),a=new c.Oc,c.cb.ih(n).en(a),g=0;for(var M=_.I();g<M;g++){var $=_.Oa(g);$.x=c.Jh.an($.x,a),_.Db(g,$)}}a=_.Ja(),_=c.Jh.RI(n,l,_,a)?a:c.cb.Bh(_,n,l)}return this.cQ(_,o,d,p,y)},u.prototype.cQ=function(a,n,o,l,p){var d=new c.ha(0),y=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var g=a.ia(),_=g.bc();g=g.xc(),_.scale(p),g.scale(p),c.kb.xd(o,l,_.x,_.y,g.x,g.y,d,null,null,n),y+=d.u}return y},u.instance=null,u}(c.Ge);c.qL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l,p).next()):new c.oL(a,o,l,n,-1,-1,p)},u.instance=null,u}(c.Ge);c.nL=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l,p){if(0<p||n!=4&&0<l)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=u,this.wg=a,this.Ae=n,this.yT=o,this.xT=l}return w.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(u){return c.ej.Sr(u,this.wg,this.Ae,this.yT,this.xT,this.Vb)},w.prototype.re=function(){},w}();c.oL=C}(U||(U={})),function(c){(function(C){C[C.Unknown=0]="Unknown",C[C.Contains=1]="Contains",C[C.Within=2]="Within",C[C.Equals=3]="Equals",C[C.Disjoint=4]="Disjoint",C[C.Touches=8]="Touches",C[C.Crosses=16]="Crosses",C[C.Overlaps=32]="Overlaps",C[C.NoThisRelation=64]="NoThisRelation",C[C.Intersects=1073741824]="Intersects",C[C.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(c.YK||(c.YK={})),c.rL=function(){function C(){}return C.iW=function(w,u){var a=w.K(),n=u.K();if(c.ba.zj(a)){var o=w.Cb;if(o!=null&&(o=o.Hk)!=null){if(n==33){var l=u.D();o=o.Uo(l.x,l.y)}else l=new c.l,u.A(l),o=o.To(l);if(o==1)return 1;if(o==0)return 4}}if(c.ba.zj(n)&&(o=u.Cb)!=null&&(o=o.Hk)!=null){if(a==33?(w=w.D(),o=o.Uo(w.x,w.y)):(u=new c.l,w.A(u),o=o.To(u)),o==1)return 2;if(o==0)return 4}return 0},C}()}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l,p===void 0?-1:p).next()):p===void 0?new c.CC(a,n,o,l,-1):new c.CC(a,n,o,l,p)},u.prototype.yn=function(a,n,o){this.Ku(a)&&(n=c.ua.mj(n,a,!1),a.hj(o)||a.nu(n,o))},u.prototype.Ku=function(a){return c.Mx.uE(a)},u.instance=null,u}(c.Ge);c.Zj=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l){if(this.vs=a==null,this.za=-1,this.Sd=u,this.wg=n,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw c.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.KS(u),u=this.Bw.next()),u;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(u){var a=this.uK(u);if(a!=null)return a;a=c.ua.ov(this.Pe,u);var n=c.ua.Xd(this.wg,a,!0);a=new c.l,this.Pe.A(a);var o=new c.l;return u.A(o),a.X(2*n,2*n),a.Fa(o),a.X(100*n,100*n),n=c.Vd.clip(this.Pe,a,0,0),u=c.Vd.clip(u,a,0,0),c.Hg.Cv(u,n,this.wg,this.Vb)},w.prototype.KI=function(u,a,n){var o=0;if(1&a)n[0]==null&&(n[0]=new c.ee(u)),o++;else for(var l=0;l<n.length-1;l++)n[l]=n[l+1];if(2&a)n[o]==null&&(n[o]=new c.Ua(u)),o++;else for(l=o;l<n.length-1;l++)n[l]=n[l+1];if(4&a)n[o]==null&&(n[o]=new c.Ea(u)),o++;else for(l=o;l<n.length-1;l++)n[l]=n[l+1];if(o!=3){for(u=[],l=0;l<o;l++)u[l]=n[l];return new c.$c(u)}return new c.$c(n)},w.prototype.KS=function(u){var a=this.uK(u);if(a!=null){var n=[null,null,null];return n[a.Eb()]=a,this.KI(u.description,this.Hi,n)}a=c.ua.ov(this.Pe,u),n=c.ua.Xd(this.wg,a,!0),a=new c.l,this.Pe.A(a),a.X(2*n,2*n);var o=new c.l;return u.A(o),a.Fa(o),a.X(100*n,100*n),n=c.Vd.clip(this.Pe,a,0,0),a=c.Vd.clip(u,a,0,0),n=c.Hg.Kz(a,n,this.wg,this.Vb),this.KI(u.description,this.Hi,n)},w.prototype.uK=function(u){var a=c.ua.ov(u,this.Pe),n=c.ua.Xd(this.wg,a,!0);a=u.K();var o=u.B(),l=this.Pe.B();if(!(l=o||l)){l=new c.l,u.A(l);var p=new c.l;this.Pe.A(p),p.X(2*n,2*n),l=!l.isIntersecting(p)}if(!l)if((p=c.rL.iW(this.Pe,u))==4)l=!0;else{if(2&p)return this.Pe;if(1&p)return u}if(l)return(n=c.ba.uf(a))<(l=c.ba.uf(this.Fj))?w.CB(u,o):n>l||n==0&&a==550&&this.Fj==33?this.iJ():w.CB(u,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return n=this.Pe,a=new c.l,u.A(a),o=new c.l,n.A(o),a.Fa(o),n=new c.Hh,u.copyTo(n),n.Zo(a),n;if(a==197&&c.ba.uf(this.Fj)==0||this.Fj==197&&c.ba.uf(a)==0)return o=a==197?u:this.Pe,u=a==197?this.Pe:u,a=new c.l,o.A(a),c.Vd.clip(u,a,n,0);if(c.ba.uf(a)==0&&0<c.ba.uf(this.Fj)||0<c.ba.uf(a)&&c.ba.uf(this.Fj)==0){if(n=c.ua.mj(this.wg,u,!1),a==550||a==33)return c.Hg.uG(u,this.Pe,n);if(this.Fj==550||this.Fj==33)return c.Hg.uG(this.Pe,u,n);throw c.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.rK(this.Pe,u):this.rK(u,this.Pe)},w.prototype.rK=function(u,a){var n=u,o=a,l=c.ua.mj(this.wg,a,!1),p=new c.l;o.A(p);var d=new c.l;n.A(d),d.X(2*l,2*l),p.Fa(d),p.X(10*l,10*l),n=u=c.Vd.clip(u,p,0,0),d=new c.ja(0);var y=-1,g=o.Cb;if(g!=null){var _=g.Hk;if(_!=null){y=0,d.Jb(n.I()+n.ea());for(var M=new c.l,$=n.Ha();$.ab();)for(;$.Ia();){$.ia().A(M);var E=_.To(M);E==1?d.add(1):E==0?d.add(0):(d.add(-1),y++)}}}if(5<a.I()&&(g=(o=a=c.Vd.clip(a,p,0,0)).Cb),0>y&&(y=n.sz()),p=n.I()+o.I(),y*o.I()>Math.log(p)*p*4)return null;p=null,y=o.Ha(),g!=null&&g.Gb!=null&&(p=g.Gb),p==null&&20<o.I()&&(p=c.ua.iE(o)),u=u.Ja(),o=null,g=n.Ha(),_=[0,0,0,0,0,0,0,0,0],M=new c.ce(0),$=new c.jg,E=-1;for(var k=0,P=0,F=0<d.size,D=-1;g.ab();){D=g.gb;var V=0;for(E=-1,k=0;g.Ia();){var N=F?c.P.truncate(d.get(P)):-1;P++;var G=g.ia();if(0>N){if(p!=null)for(o==null?o=p.qR(G,l):o.Wo(G,l),N=o.next();N!=-1;N=o.next()){y.Wb(p.ka(N)),N=y.ia();var J=G.Fa(N,null,_,null,l);for(N=0;N<J;N++)M.add(_[N])}else for(y.aj();y.ab();)for(;y.Ia();)for(N=y.ia(),J=G.Fa(N,null,_,null,l),N=0;N<J;N++)M.add(_[N]);if(0<M.size){M.Wd(0,M.size,function(de,ce){return de-ce});var W=0;M.add(1),J=-1,N=0;for(var ee=M.size;N<ee;N++){var Z=M.get(N);if(Z!=W){var ae=!1;if(W!=0||Z!=1?(G.dh(W,Z,$),W=$.get()):(W=G,ae=!0),2<=V){if(u.Fr(n,D,E,k,V==3),this.LD(a,W.bc(),l)!=1&&this.MD(a,W,l)!=1)return null;u.pc(W,!1),V=1,k=0}else switch(J=this.MD(a,W,l),J){case 1:ae?2>V?(E=g.xb()-n.Ca(D),k=1,V=V==0?3:2):k++:(u.pc(W,V==0),V=1);break;case 0:V=0,E=-1,k=0;break;default:return null}W=Z}}}else{if(0>(N=this.LD(a,G.bc(),l)))return null;N==1?(2>V&&(E=g.xb()-n.Ca(D),V=V==0?3:2),k++):(E=-1,k=0)}M.clear(!1)}else N!=0&&N==1&&(V==0?(V=3,E=g.xb()-n.Ca(D)):V==1?(V=2,E=g.xb()-n.Ca(D)):k++)}2<=V&&(u.Fr(n,D,E,k,V==3),E=-1)}return u},w.prototype.LD=function(u,a,n){return c.Fg.ym(u,a,n)},w.prototype.MD=function(u,a,n){var o=a.bc();a=a.xc();var l=c.Fg.ym(u,o,n),p=c.Fg.ym(u,a,n);return l==1&&p==0||l==0&&p==1?-1:l==0||p==0?0:l==1||p==1?1:((l=new c.h).add(o,a),l.scale(.5),(u=c.Fg.ym(u,l,n))==0?0:u==1?1:-1)},w.CB=function(u,a){return a?u:u.Ja()},w.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},w.prototype.re=function(){},w}();c.CC=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p,d,y){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l,p,d,y).next()):new c.sL(a,n,o,l,p,d,y)},u.instance=null,u}(c.Ge);c.DC=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o,l,p,d){this.za=-1,this.Sd=u,this.Oj=a,this.La=n,this.Mi=o,this.xA=l,this.pH=p,this.od=d}return w.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.eL(u)):null},w.prototype.Ma=function(){return this.za},w.prototype.eL=function(u){var a=0>=this.pH?c.ua.mj(this.Oj,u,!1):this.pH;return c.DK.W(u,this.La,this.Mi,this.xA,a,this.od)},w.prototype.re=function(){},w}();c.sL=C}(U||(U={})),function(c){var C;(C=c.IK||(c.IK={}))[C.clipToDomainOnly=1]="clipToDomainOnly",C[C.clipWithHorizon=2]="clipWithHorizon",C[C.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return St(a,u),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(n,o,l){return n instanceof c.ba?(n=new c.$c(n),this.W(n,o,l).next()):new c.tL(n,o,l)},a.prototype.transform=function(n,o,l,p){return c.du.transform(n,o,l,p,!0)},a.prototype.St=function(n,o,l,p){return c.du.St(n,o,l,p)},a.instance=null,a}(c.Ge);c.Gx=w}(U||(U={})),function(c){var C=function(){function w(u,a,n){this.za=-1,this.Sd=u,this.HT=a,this.od=n}return w.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),c.du.Bh(u,this.HT,this.od)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.tL=C}(U||(U={})),function(c){var C=function(){function u(){}return u.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},u.prototype.vQ=function(a,n,o){for(a.Wb(n,o);a.Ia();){var l=a.ia();if((l=l.Rb())!=0)return a.xb()}for(a.Wb(n,o);a.zz();)if((l=(l=a.ni()).Rb())!=0)return a.xb();return-1},u.prototype.wQ=function(a,n){for(a.Wb(n,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},u.prototype.uQ=function(a,n){for(a.Wb(n,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},u.prototype.tQ=function(a,n,o,l){if(this.zk=this.vQ(n,o,l),this.zk!=-1){n.Wb(this.zk,-1);var p=n.ia(),d=p.ic(p.ge(a,!1));if(o=c.h.zc(d,a),(l=new c.h).N(d),l.sub(p.bc()),(d=new c.h).N(a),d.sub(p.bc()),this.mq=0>l.yi(d),this.rh=this.uQ(n,this.zk),this.rh!=-1){n.Wb(this.rh,-1);var y=(p=n.ia()).ge(a,!1);y=p.ic(y);var g=c.h.zc(y,a);g>o?this.rh=-1:(l.N(y),l.sub(p.bc()),d.N(a),d.sub(p.bc()),this.ws=0>l.yi(d))}this.rh==-1&&(this.rh=this.wQ(n,this.zk),this.rh!=-1&&(n.Wb(this.rh,-1),y=(p=n.ia()).ge(a,!1),y=p.ic(y),(g=c.h.zc(y,a))>o?this.rh=-1:(l.N(y),l.sub(p.bc()),d.N(a),d.sub(p.bc()),this.ws=0>l.yi(d),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},u.prototype.YN=function(a,n,o,l,p){return o=o.Ha(),this.tQ(a,o,l,p),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.zk,-1),a=o.ia().lg(),o.Wb(this.rh,-1),n=o.ia().lg(),0<=a.yi(n)):n},u}(),w=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return St(a,u),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(n,o,l){var p;if(p===void 0&&(p=!1),n.B())return new c.bm;o=o.D();var d=n,y=n.K();switch(y==197&&((d=new c.Ea).bd(n,!1),y=1736),y){case 33:return this.sI(d,o);case 550:return this.eI(d,o);case 1607:case 1736:return this.XT(d,o,l,p);default:throw c.i.ga("not implemented")}},a.prototype.jz=function(n,o){if(n.B())return new c.bm;o=o.D();var l=n,p=n.K();switch(p==197&&((l=new c.Ea).bd(n,!1),p=1736),p){case 33:return this.sI(l,o);case 550:case 1607:case 1736:return this.eI(l,o);default:throw c.i.ga("not implemented")}},a.prototype.kz=function(n,o,l,p){if(0>p)throw c.i.O();if(n.B())return[];o=o.D();var d=n,y=n.K();switch(y==197&&((d=new c.Ea).bd(n,!1),y=1736),y){case 33:return this.OU(d,o,l,p);case 550:case 1607:case 1736:return this.oU(d,o,l,p);default:throw c.i.ga("not implemented")}},a.prototype.XT=function(n,o,l,p){if(n.K()==1736&&l&&(l=new c.l,n.A(l),l=c.ua.Xd(null,l,!1),(p?c.jd.Zd(n,o,0):c.jd.Zd(n,o,l))!=0)){var d=new c.bm(o,0,0);return p&&d.RJ(!0),d}var y=n.Ha();d=new c.h;for(var g=l=-1,_=17976931348623157e292,M=0;y.ab();)for(;y.Ia();){var $=y.ia();$=$.ic($.ge(o,!1));var E=c.h.zc($,o);E<_?(M=1,d=$,l=y.xb(),g=y.gb,_=E):E==_&&M++}return d=new c.bm(d,l,Math.sqrt(_)),p&&(y.Wb(l,g),$=y.ia(),p=0>c.h.Wq(o,$.bc(),$.xc()),1<M&&((M=new C).reset(),p=M.YN(o,p,n,l,g)),d.RJ(p)),d},a.prototype.sI=function(n,o){return n=n.D(),o=c.h.ub(n,o),new c.bm(n,0,o)},a.prototype.eI=function(n,o){for(var l=n.vb(0),p=n.I(),d=n=0,y=0,g=17976931348623157e292,_=0;_<p;_++){var M=new c.h;l.uc(2*_,M);var $=c.h.zc(M,o);$<g&&(d=M.x,y=M.y,n=_,g=$)}return(o=new c.bm).by(d,y,n,Math.sqrt(g)),o},a.prototype.OU=function(n,o,l,p){return p==0?[]:(l*=l,n=n.D(),(o=c.h.zc(n,o))<=l?(l=[],(p=new c.bm).by(n.x,n.y,0,Math.sqrt(o)),l[0]=p):l=[],l)},a.prototype.oU=function(n,o,l,p){if(p==0)return[];var d=n.vb(0),y=n.I();n=[],l*=l;for(var g=0;g<y;g++){var _=d.read(2*g),M=d.read(2*g+1),$=o.x-_,E=o.y-M;($=$*$+E*E)<=l&&((E=new c.bm).by(_,M,g,Math.sqrt($)),n.push(E))}return o=n.length,n.sort(function(k,P){return k.La<P.La?-1:k.La==P.La?0:1}),p>=o||(n.length=p),n.slice(0)},a.instance=null,a}(c.Ge);c.Hx=w}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 4},u.prototype.W=function(a,n,o,l,p){return c.cm.tB(a,n,o,l,p)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(a){return c.Xt.ry(a)},u.prototype.yn=function(a,n,o){c.Xt.xD(a,n,o)},u.instance=null,u}(c.Ge);c.uL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 33},u.prototype.W=function(a,n,o,l,p){return a===1073741824?!c.vd.uB(n,o,l,4,p):c.vd.uB(n,o,l,a,p)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(a){return c.Xt.ry(a)},u.prototype.yn=function(a,n,o){c.Xt.xD(a,n,o)},u.instance=null,u}(c.Ge);c.fj=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o){if(this.od=o,this.lT=n,this.za=-1,u==null)throw c.i.O();this.Ak=u,this.Oj=a}return w.prototype.next=function(){var u;if((u=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");return this.$B(u)}return null},w.prototype.Ma=function(){return this.za},w.prototype.$B=function(u){if(u==null)throw c.i.O();return c.Ix.YJ(u,this.Oj,this.lT,this.od)},w.prototype.re=function(){},w}();c.vL=C}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 26},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.vL(a,n,o,l)},u.prototype.ts=function(a,n,o,l,p){return 0<(l!==void 0?c.Ix.ts(a,n,o,l,p):c.Ix.ts(a,n,!1,null,o))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.$l=C}(U||(U={})),function(c){var C=function(){function p(){this.Aq=0}return p.prototype.iX=function(d){this.Aq&=-2,this.Aq|=d?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.SF=function(){return this.Yp()?0:1},p}();c.tY=C;var w=function(){},u=function(p,d,y,g){this.x=p,this.y=d,this.Ci=y,this.zm=g},a=function(){function p(d){this.Ce=d}return p.prototype.compare=function(d,y,g){return d=d.ka(g),y=this.Ce.lf.read(2*y),0>(y-=d=this.Ce.lf.read(2*d))?-1:0<y?1:0},p}(),n=function(){function p(d){this.Ce=d}return p.prototype.compare=function(d,y,g){y=this.Ce.hb[y],d=this.Ce.hb[d.ka(g)];var _=y.Yp(),M=d.Yp();g=y.oe.Me(this.Ce.Oo,0);var $=d.oe.Me(this.Ce.Oo,0);return g==$&&((_=.5*((g=Math.min(_?y.oe.oa:y.oe.ma,M?d.oe.oa:d.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(_=g),g=y.oe.Me(_,0),$=d.oe.Me(_,0)),g<$?-1:g>$?1:0},p}(),o=function(){function p(d,y){this.TI=new c.h,this.parent=d,this.ZR=y}return p.prototype.qr=function(d,y,g){var _=this.parent,M=this.ZR;g.Wd(d,y,function($,E){return _.Oh($,E,M)})},p.prototype.bq=function(d){return d=this.parent.ii.get(d),this.parent.lf.uc(2*(d>>1),this.TI),this.TI.y+(1&d?this.parent.Qj:-this.parent.Qj)},p}(),l=function(){function p(d,y,g,_,M){this.iH=d.description,this.Y=d,this.Sg=y,this.Qj=c.ua.mj(this.Sg,d,!1),this.Do=c.ua.mj(this.Sg,d,!0),this.sA=g,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new c.lp,this.fb=new c.$j,this.le=new c.Nd,this.UG=this.sl=M}return p.prototype.$S=function(){return this.UG=!0,(!c.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?c.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},p.prototype.fC=function(d,y){var g=this.lf.read(2*d);d=this.lf.read(2*d+1);var _=this.lf.read(2*y);y=this.lf.read(2*y+1);var M=!c.$t.Ev(g,d,_,y,this.Qj*this.Qj);return M||this.Y.Eb()!=0&&g==_&&d==y},p.prototype.BE=function(){for(var d=this.Y,y=d.yf?3:2,g=0,_=d.ea();g<_;g++)if(d.Ka(g)<y)return this.le=new c.Nd(1,g,0),!1;return!0},p.prototype.yE=function(d){var y=this.Y,g=y.Ha(),_=y.hasAttribute(1);for(y=_?c.ua.rE(this.Sg,y,!1):0;g.ab();)for(;g.Ia();){var M=g.ia();if(!(M.Rb()>this.Qj)){if(d&&_){var $=M.yv(1,0);if(M=M.yv(1,0),Math.abs(M-$)>y)continue}return this.le=new c.Nd(2,g.xb(),-1),!1}}return!0},p.prototype.hO=function(){var d=this.Y,y=null;c.ba.Ic(this.Y.K())&&(y=this.Y);var g=(this.UG||this.sl)&&y!=null,_=d.I();this.lf=d.vb(0),this.ii=new c.ja(0),this.ii.Jb(2*_),this.hi=new c.ja(0),this.hi.Jb(2*_),g&&(this.Hl==null&&(this.Hl=new c.ja(0)),this.Hl.Jb(_));for(var M=d=0;M<_;M++)if(this.ii.add(2*M),this.ii.add(2*M+1),this.hi.add(2*M),this.hi.add(2*M+1),g){for(;M>=y.Wc(d);)d++;this.Hl.add(d)}for(new c.Zt().sort(this.hi,0,2*_,new o(this,g)),this.fb.clear(),this.fb.Xo(new a(this)),this.fb.Ee(_),y=0,_*=2;y<_;y++)if(g=this.hi.get(y),g=(d=this.ii.get(g))>>1,(1&d)==0){if(d=this.fb.addElement(g,-1),(M=this.fb.xe(d))!=-1&&!this.fC(this.fb.ka(M),g))return this.le=new c.Nd(3,g,this.fb.ka(M)),!1;var $=this.fb.lb(d);if($!=-1&&!this.fC(this.fb.ka($),g))return this.le=new c.Nd(3,g,this.fb.ka($)),!1}else if(d=this.fb.search(g,-1),M=this.fb.xe(d),$=this.fb.lb(d),this.fb.wd(d,-1),M!=-1&&$!=-1&&!this.fC(this.fb.ka(M),this.fb.ka($)))return this.le=new c.Nd(3,this.fb.ka(M),this.fb.ka($)),!1;return!0},p.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},p.prototype.jO=function(){var d=new c.hd;d.Ib(this.Y);var y=new c.Nd;return!c.bu.fI(!1,d,this.Qj,y,this.od)||(y.Lo=d.Va(y.Lo),y.Mo=d.Va(y.Mo),this.le.Yt(y),!1)},p.prototype.iO=function(){var d=this.Y,y=d.Ha();for(d=d.Ha();y.ab();)for(;y.Ia();){var g=y.ia();if(!y.Sn()||!y.VS()){d.wW(y);do for(;d.Ia();){var _=d.ia();if((_=g.Br(_,this.Qj,!0))!=0)return this.le=new c.Nd(_==2?5:4,y.xb(),d.xb()),!1}while(d.ab())}}return!0},p.prototype.nO=function(){var d=this.Y;this.hb.length=0,this.ro.length=0,this.ag=d.Ha(),this.ag.EB();var y=new c.ja(0);y.Jb(10);var g=NaN,_=0,M=0;for(d=2*d.I();M<d;M++){var $=this.hi.get(M);if(!(1&($=this.ii.get($)))){$>>=1;var E=this.lf.read(2*$),k=this.lf.read(2*$+1);if(y.size!=0&&(E!=g||k!=_)){if(!this.LI(y))return!1;y!=null&&y.clear(!1)}y.add($),g=E,_=k}}return!!this.LI(y)},p.prototype.mO=function(){for(var d=this.Y,y=Array(d.ea()),g=0,_=d.ea();g<_;g++)y[g]=d.Pn(g);_=new w;var M=new c.h;g=this.hi.get(0);var $=(g=this.ii.get(g))>>1;this.lf.uc(2*$,M);var E=y[g=this.Hl.get($)],k=d.Ca(g),P=d.Wc(g)-1;_.gl=$==k||$==P,_.jy=this.sl?!E&&_.gl:_.gl,_.Ci=g,_.x=M.x,_.y=M.y,_.zm=$;for(var F=new w,D=1,V=this.hi.size;D<V;D++)if(g=this.hi.get(D),(1&(g=this.ii.get(g)))==0){$=g>>1,this.lf.uc(2*$,M),(g=this.Hl.get($))!=_.Ci&&(E=y[g],k=d.Ca(g),P=d.Wc(g)-1);var N=$==k||$==P,G=this.sl?!E&&_.gl:_.gl;if(F.x=M.x,F.y=M.y,F.Ci=g,F.zm=$,F.jy=G,F.gl=N,F.x==_.x&&F.y==_.y){if(this.sl){if(!(F.jy&&_.jy||F.Ci==_.Ci&&(F.gl||_.gl)))return this.le=new c.Nd(8,F.zm,_.zm),!1}else if(!F.gl||!_.gl)return this.le=new c.Nd(5,F.zm,_.zm),!1}g=_,_=F,F=g}return!0},p.prototype.EE=function(){for(var d=this.Y,y=[],g=-1,_=!1,M=0,$=d.ea();M<$;M++)d.Gv(M)&&(_=!1,g++,M<$-1&&(d.Gv(M+1)||(_=!0))),y[M]=_?g:-1;_=new c.h,M=this.hi.get(0);var E=(M=this.ii.get(M))>>1;this.lf.uc(2*E,_),M=this.Hl.get(E),g=new u(_.x,_.y,M,E,y[M]),d=[];var k=1;for($=this.hi.size;k<$;k++)if(M=this.hi.get(k),(1&(M=this.ii.get(M)))==0){if(E=M>>1,this.lf.uc(2*E,_),M=this.Hl.get(E),(M=new u(_.x,_.y,M,E,y[M])).x==g.x&&M.y==g.y){if(M.Ci==g.Ci)return this.le=new c.Nd(9,M.zm,g.zm),!1;0<=y[M.Ci]&&y[M.Ci]==y[g.Ci]&&(d.length!=0&&d[d.length-1]==g||d.push(g),d.push(M))}g=M}if(d.length==0)return!0;for(M=new c.lp(!0),c.P.bv(y,-1),_=-1,(k=new c.h).Sc(),g=0,$=d.length;g<$;g++){(E=d[g]).x==k.x&&E.y==k.y||(_=M.Rh(0),k.x=E.x,k.y=E.y);var P=y[E.Ci];P==-1&&(P=M.Rh(2),y[E.Ci]=P),M.addElement(P,_),M.addElement(_,P)}for(($=new c.ja(0)).Jb(10),g=M.ke;g!=-1;g=M.lz(g))if(!(1&(d=M.KF(g)))&&2&d){for(d=-1,$.add(g),$.add(-1);0<$.size;){if(_=$.Gc(),$.Jf(),k=$.Gc(),$.Jf(),(1&(E=M.KF(k)))!=0){d=2&E?k:_;break}for(M.aX(k,1|E),E=M.sc(k);E!=-1;E=M.lb(E))(P=M.getData(E))!=_&&($.add(P),$.add(k))}if(d!=-1){for(M=-1,g=0,$=y.length;g<$;g++)if(y[g]==d){M=g;break}return this.le=new c.Nd(10,M,-1),!1}}return!0},p.prototype.oO=function(){var d=this.Y;if(0>=d.He())return this.le=new c.Nd(6,d.ea()==1?1:-1,-1),0;if(d.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=c.ja.rf(d.ea(),0),this.EA=c.ja.rf(d.ea(),-1);for(var y=-1,g=0,_=0,M=d.ea();_<M;_++){var $=d.Kr(_);if(this.vo.write(_,0>$?0:256),0<$)y=_,g=$;else{if($==0)return this.le=new c.Nd(6,_,-1),0;if((0>y||g<Math.abs($))&&(this.le=new c.Nd(7,_,-1),this.sl))return 0;this.EA.write(_,y)}}for(this.et=d.ea(),this.Qm=new c.ja(0),this.Qm.Jb(10),M=d.I(),this.Oo=NaN,(d=new c.ja(0)).Jb(10),this.Sq=c.ja.rf(M,-1),this.Jw=c.ja.rf(M,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new c.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new n(this)),y=0,M*=2;0<this.et&&y<M;y++)if(g=this.hi.get(y),(1&(g=this.ii.get(g)))==0){if(g>>=1,(_=this.lf.read(2*g+1))!=this.Oo&&d.size!=0){if(!this.vt(d))return 0;d!=null&&d.clear(!1)}d.add(g),this.Oo=_}return 0<this.et&&!this.vt(d)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},p.prototype.LI=function(d){if(d.size==1)return!0;for(var y=0,g=d.size;y<g;y++){var _=d.get(y);this.ag.Wb(_);var M=this.ag.ni();this.hb.push(this.Uu(M,_,this.ag.gb,!0)),this.ag.ia(),M=this.ag.ia(),this.hb.push(this.Uu(M,_,this.ag.gb,!1))}var $=this;for(this.hb.sort(function(P,F){return $.SP(P,F)}),(_=this.oh.ke)==-1&&(_=this.oh.Rh(0)),this.oh.hn(this.hb.length),y=0,g=this.hb.length;y<g;y++)this.oh.addElement(_,y);y=!0;for(var E=g=-1;y&&(y=!1,(M=this.oh.sc(_))!=-1);)for(var k=this.oh.lb(M);k!=-1;)if(g=this.oh.getData(M),E=this.oh.getData(k),(g=this.hb[g].Ko)!=(E=this.hb[E].Ko))M=k,k=this.oh.lb(M);else if(y=!0,this.oh.kd(_,M),M=this.oh.xe(k),(k=this.oh.kd(_,k))==-1||M==-1)break;if(y=this.oh.ds(_),this.oh.GE(_),0<y)return this.le=new c.Nd(5,g,E),!1;for(y=0,g=d.size;y<g;y++)this.qB(this.hb[y]);return this.hb.length=0,!0},p.prototype.vt=function(d){for(var y=0,g=d.size;y<g;y++){var _=d.get(y),M=this.Sq.read(_);if(M!=-1){var $=this.fb.ka(M);this.Bj.add($),this.fb.wd(M,-1),this.qB(this.hb[$]),this.hb[$]=null,this.Sq.write(_,-1)}(M=this.Jw.read(_))!=-1&&($=this.fb.ka(M),this.Bj.add($),this.fb.wd(M,-1),this.qB(this.hb[$]),this.hb[$]=null,this.Jw.write(_,-1))}for(y=0,g=d.size;y<g;y++){if(_=d.get(y),this.ag.Wb(_),(M=this.ag.ni()).oa>M.ma){var E=this.ag.xb(),k=this.Uu(M,_,this.ag.gb,!0);0<this.Bj.size?($=this.Bj.Gc(),this.Bj.Jf(),this.hb[$]=k):($=this.hb.length,this.hb.push(k)),M=this.fb.addElement($,-1),this.Sq.read(E)==-1?this.Sq.write(E,M):this.Jw.write(E,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M)}this.ag.ia(),(M=this.ag.ia()).oa<M.ma&&(E=this.ag.kk(),k=this.Uu(M,_,this.ag.gb,!1),0<this.Bj.size?($=this.Bj.Gc(),this.Bj.Jf(),this.hb[$]=k):($=this.hb.length,this.hb.push(k)),M=this.fb.addElement($,-1),this.Sq.read(E)==-1?this.Sq.write(E,M):this.Jw.write(E,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M))}for(y=0,g=this.Qm.size;y<g&&0<this.et;y++)if(M=this.Qm.get(y),(3&this.vo.read(this.hb[this.fb.ka(M)].DA))==0){d=-1,_=this.fb.xe(M);var P=M;k=null,$=-1;for(var F=0;_!=-1&&($=this.fb.ka(_),$=(k=this.hb[$]).DA,(3&(F=this.vo.read($)))==0);)P=_,_=this.fb.xe(_);_==-1?(E=1,_=P):(d=(3&F)==1?$:this.EA.read($),E=k.SF()!=0?0:1,_=this.fb.lb(_));do{if($=this.fb.ka(_),$=(k=this.hb[$]).DA,(3&(P=this.vo.read($)))==0){if(E!=k.SF())return this.le=new c.Nd(6,$,-1),!1;if(P=252&P|(F=E==0||k.Yp()?2:1),this.vo.write($,F),F==2&&this.le.Lj==0&&this.EA.read($)!=d&&(this.le=new c.Nd(7,$,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&P)==1&&(d=$),P=_,_=this.fb.lb(_),E=E!=0?0:1}while(P!=M)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new c.ja(0),!0},p.prototype.Uu=function(d,y,g,_){if(d.K()!=322)throw c.i.Ra();return(d=this.nP(d)).Ko=y,d.DA=g,d.Aq=0,d.iX(_),d},p.prototype.nP=function(d){if(0<this.ro.length){var y=this.ro[this.ro.length-1];--this.ro.length,d.copyTo(y.oe)}else(y=new C).oe=c.NC.kg(d);return y},p.prototype.qB=function(d){d.oe.K()==322&&this.ro.push(d)},p.prototype.fU=function(){for(var d=this.Y.I(),y=new c.ja(0),g=0;g<d;g++)y.add(g);var _=this;for(y.Wd(0,d,function(M,$){return _.Qu(M,$)}),g=1;g<d;g++)if(this.Qu(y.get(g-1),y.get(g))==0)return this.le=new c.Nd(3,y.get(g-1),y.get(g)),0;return 2},p.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},p.prototype.jV=function(){return this.$S()},p.prototype.kU=function(){for(var d=this.Y.I(),y=new c.ja(0),g=0;g<d;g++)y.add(g);var _=this;y.Wd(0,d,function(P,F){return _.KO(P,F)});var M=Array(d);for(c.P.bv(M,!1),M[y.get(0)]=!0,g=1;g<d;g++){var $=y.get(g-1),E=y.get(g);this.Qu($,E)==0?M[E]=!1:M[E]=!0}y=this.Y.Ja(),$=this.Y,E=0;var k=1;for(g=0;g<d;g++)M[g]?k=g+1:(E<k&&y.Gd($,E,k),E=g+1);return E<k&&y.Gd($,E,k),y.Eh(2,this.Do),y},p.prototype.IV=function(){var d=this.Y,y=d.Ha(),g=d.Ha(),_=this.Y.Ja(),M=this.Y,$=d.hasAttribute(1),E=$?c.ua.rE(this.Sg,d,!0):0,k=new c.ja(0),P=new c.ja(0);for(k.Jb(c.P.truncate(d.I()/2+1)),P.Jb(c.P.truncate(d.I()/2+1));y.ab();)if(g.ab(),!(2>d.Ka(y.gb))){g.yW();for(var F,D,V=!0;y.Ia();){var N=y.ia(),G=g.ni();if(y.xb()>g.xb())break;V&&(k.add(y.xb()),P.add(g.kk()),V=!1),D=k.Gc();var J=y.kk();if(1<J-D){var W=new c.h;W.vc(d.Oa(D),d.Oa(J)),F=W.length()}else F=N.Rb();D=P.Gc(),1<(J=g.xb())-D?((W=new c.h).vc(d.Oa(D),d.Oa(J)),D=W.length()):D=G.Rb(),F>this.Do?k.add(y.kk()):$&&(F=d.Vc(1,k.Gc(),0),N=N.jv(1,0),Math.abs(N-F)>E&&k.add(y.kk())),D>this.Do?P.add(g.xb()):$&&(F=d.Vc(1,P.Gc(),0),N=G.jv(1,0),Math.abs(N-F)>E&&P.add(g.xb()))}if(k.Gc()<P.Gc()?k.size>P.size?k.Jf():P.Jf():(k.Gc()!=P.Gc()&&P.Jf(),P.Jf()),2<=P.size+k.size){for(V=new c.Ta,G=0,N=k.size;G<N;G++)M.we(k.get(G),V),G==0?_.nf(V):_.lineTo(V);for(G=P.size-1;0<G;G--)M.we(P.get(G),V),_.lineTo(V);M.ec(y.gb)?_.Cp():0<P.size&&(M.we(P.get(0),V),_.lineTo(V))}k!=null&&k.clear(!1),P!=null&&P.clear(!1)}return _.Eh(2,this.Do),_},p.prototype.mV=function(){return this.zX()},p.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?c.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new c.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&c.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&c.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},p.ts=function(d,y,g,_,M){if(_!=null&&(_.Lj=0,_.Lo=-1,_.Mo=-1),d.B())return 1;var $=d.K();if($==33)return 1;var E=c.ua.mj(y,d,!1);if($==197)return y=new c.l,d.A(y),y.Di(E)?(_!=null&&(_.Lj=2,_.Lo=-1,_.Mo=-1),0):1;if(c.ba.zd($))return(E=new c.Ua(d.description)).pc(d,!0),p.ts(E,y,g,_,M);var k=d.qm(E);if((g=g?-1:k)!=-1)return g;if(y=new p(d,y,g,M,!1),$==550)g=y.fU();else if($==1607)g=y.EV();else{if($!=1736)throw c.i.Ra();g=y.jV()}return d.Eh(g,E),_!=null&&g==0&&_.Yt(y.le),g},p.YJ=function(d,y,g,_){if(d.B())return d;var M=d.K();if(M==33)return d;var $=c.ua.mj(y,d,!1);if(M==197)return y=new c.l,d.A(y),y.Di($)?d.Ja():d;if(c.ba.zd(M))return(M=new c.Ua(d.description)).pc(d,!0),p.YJ(M,y,g,_);if($=d.qm($),(g=g?-1:$)==2)return d;if(d=new p(d,y,g,_,!1),M==550)d=d.kU();else if(M==1607)d=d.IV();else{if(M!=1736)throw c.i.Ra();d=d.mV()}return d},p.prototype.Oh=function(d,y,g){if(d==y)return 0;d=this.ii.get(d);var _=this.ii.get(y);y=d>>1;var M=_>>1,$=new c.h,E=new c.h;return this.lf.uc(2*y,$),$.y+=1&d?this.Qj:-this.Qj,this.lf.uc(2*M,E),E.y+=1&_?this.Qj:-this.Qj,(d=$.compare(E))==0&&g?0>(g=this.Hl.get(y)-this.Hl.get(M))?-1:0<g?1:0:d},p.prototype.Qu=function(d,y){if(d==y)return 0;var g=this.Y,_=g.Oa(d),M=g.Oa(y);if(_.x<M.x)return-1;if(_.x>M.x)return 1;if(_.y<M.y)return-1;if(_.y>M.y)return 1;for(_=1;_<this.jT;_++){M=this.iH.ld(_);for(var $=c.sa.Wa(M),E=0;E<$;E++){var k=g.Vc(M,d,E),P=g.Vc(M,y,E);if(k<P)return-1;if(k>P)return 1}}return 0},p.prototype.KO=function(d,y){var g=this.Qu(d,y);return g==0?d<y?-1:1:g},p.prototype.SP=function(d,y){if(d===y)return 0;var g=d.oe.lg();d.Yp()&&g.Uq(),d=y.oe.lg(),y.Yp()&&d.Uq(),y=g.su();var _=d.su();return _==y?(y=g.yi(d),Math.abs(y)<=8881784197001252e-31*(Math.abs(d.x*g.y)+Math.abs(d.y*g.x))&&(y--,y++),0>y?1:0<y?-1:0):y<_?-1:1},p}();c.Ix=l}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l).next()):new c.wL(a,n,o,l)},u.gp=function(a,n,o,l){var p=a.Eb(),d=n.Eb();if(a.B()&&n.B())return p>d?a:n;if(a.B())return n;if(n.B())return a;var y=new c.l,g=new c.l,_=new c.l;return a.A(y),n.A(g),_.L(y),_.$b(g),y=c.ua.Xd(o,_,!0),g=a.K(),_=n.K(),g==33&&_==33?u.WU(a,n,y):g!=_?0<p||0<d?p>d?a:n:g==550?u.dI(a,n,y):u.dI(n,a,y):c.Hg.gp(a,n,o,l)},u.WU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D(),p=n.D(),d=new c.ee(a.description);return c.h.zc(l,p)>o&&(d.add(a),d.add(n)),d},u.dI=function(a,n,o){var l=a.vb(0),p=a.I(),d=n.D(),y=a.Ja();o=o*Math.sqrt(2)*1.00001;var g=new c.l;if(a.A(g),g.X(o,o),g.contains(d)){o*=o,g=!1;for(var _=[],M=0;M<p;M++)_[M]=!1;for(M=0;M<p;M++){var $=l.read(2*M),E=l.read(2*M+1);($-=d.x)*$+(E-=d.y)*E<=o&&(g=!0,_[M]=!0)}if(g)for(M=0;M<p;M++)_[M]||y.Gd(a,M,M+1);else y.Gd(a,0,p),y.add(n)}else y.Gd(a,0,p),y.add(n);return y},u.instance=null,u}(c.Ge);c.Jx=C}(U||(U={})),function(c){var C=function(){function w(u,a,n,o){this.vs=a==null,this.za=-1,this.Sd=u,this.wg=n,this.IT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.Jx.gp(u,this.IT,this.wg,this.Vb)):null;var u},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.wL=C}(U||(U={})),function(c){var C=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},a}(),w=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.kN=function(n){this.Ir+=n.zx,this.rj.push(n)},a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(n){return n===this},a}(),u=function(){function a(n,o,l){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=n,this.wg=o,this.Vb=l}return a.ZD=function(n){var o=[],l=0;for(n=Object.keys(n);l<n.length;l++)o.push(Number(n[l]));return o.sort(function(p,d){return p-d}),o},a.prototype.aG=function(n){var o=this.Fo[n],l=a.ZD(o)[0],p=o[l],d=p.iy().Vy;return p=p.iy().vK,delete o[l],p&&(d=c.$l.local().W(d,this.wg,!1,this.Vb),n==0&&d.K()==33&&(n=new c.ee(d.description),d.B()||n.add(d),d=n)),d},a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw c.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},a.prototype.Ma=function(){return this.za},a.prototype.lK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),c.op.Bp(this.Vb),n!=null){var o=n.Eb();this.vH[o]=!0,o>=this.Bk&&!this.eA&&(this.HD(o,!1,n),o>this.Bk&&!this.eA&&this.uW(o))}if(0<this.kq)for(o=0;o<=this.Bk;o++)for(;1<this.wq[o]&&(n=this.AO(o)).length!=0;)n=c.Hg.QP(n,this.wg,this.Vb),this.HD(o,!0,n);return this.Jc},a.prototype.AO=function(n){for(var o=[],l=[],p=this.Fo[n],d=a.ZD(p),y=0;y<d.length;y++){var g=d[y],_=p[g];if(this.Jc||1e4<_.Ir&&1<_.rj.length){for(this.wq[n]-=_.rj.length,this.kq-=_.rj.length;0<_.rj.length;)o.push(_.iy().Vy),_.OV();l.push(g)}}for(y=0;y<l.length;y++)delete p[l[y]];return o},a.prototype.uW=function(n){for(var o=0;o<n;o++)this.Fo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.HD=function(n,o,l){var p=new C;if(p.Az(),p.Vy=l,l=a.$R(l),p.zx=l,l=a.YR(l),n+1>this.Fo.length)for(var d=0,y=Math.max(2,n+1);d<y;d++)this.Fo.push([]);(d=this.Fo[n][l])===void 0&&(d=new w,this.Fo[n][l]=d),p.vK=o,d.kN(p),this.wq[n]++,this.kq++,this.Bk=Math.max(this.Bk,n)},a.YR=function(n){return 0<n?c.P.truncate(Math.log(n)/Math.log(4)+.5):0},a.$R=function(n){var o=n.K();if(c.ba.zj(o))return n.I();if(o==33)return 1;if(o==197)return 4;if(c.ba.zd(o))return 2;throw c.i.Ra()},a.prototype.re=function(){this.lK()},a}();c.yL=u}(U||(U={})),function(c){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return St(u,w),u.prototype.K=function(){return 1},u.prototype.W=function(a,n,o,l){return l===void 0?new c.yL(a,n,o):this.bQ(a,n,o,l)},u.prototype.bQ=function(a,n,o,l){return a=new c.$c([a,n]),this.W(a,o,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.Ih=C}(U||(U={})),function(c){var C,w;(w=C||(C={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",C=function(){function u(a,n,o,l){this.Vs=new c.l,this.BT=a,this.CT=n,this.oq=l,this.wo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=l?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.wo=n.ea():this.td=n.Ha()),this.tl||(p=n.Cb)!=null&&(p=l?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.wo=a.ea():this.td=a.Ha()),this.tl||(this.ei=l?c.ua.hR(a,n,o,1<=a.qm(0),1<=n.qm(0)):c.ua.gR(a,n,o))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.sU();break;case 1:a=this.tU();break;case 2:a=this.Pz();break;default:throw c.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},u.prototype.Wy=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Wo(a,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),c.am=C}(U||(U={})),function(c){(c=c.JL||(c.JL={}))[c.enumClosed=1]="enumClosed",c[c.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",c[c.enumOGCStartPolygon=4]="enumOGCStartPolygon",c[c.enumCalcMask=4]="enumCalcMask"}(U||(U={})),function(c){c.LC=function(){function C(){}return C.ub=function(w,u,a,n,o,l,p,d,y){var g=[0,0,0],_=[0,0,0],M=[0,0,0],$=[0,0,0,0],E=new c.ha(0),k=new c.ha(0),P=new c.ha(0);if(p!=null||d!=null||y!=null)if(c.s.vi(u))c.$g.ub(w,a,n,o,l,p,d,y);else{o=c.F.ca(o),a=c.F.ca(a);var F=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.$(a,o)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),y!=null&&(y.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(y!=null&&(y.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(F),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,u)),d!=null&&(d.u=0),y!=null&&(y.u=0))}else if(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897)||c.s.$(a,o)||c.s.$(c.s.R(F),3.141592653589793)||c.s.Dd(n))return void c.Yk.ub(w,u,a,n,o,l,p,d,y);var D=Math.sqrt(1-u);o=c.F.ca(o-a),a=0,c.F.el(1,u,n,a,0,E,k,P),g[0]=E.u,g[1]=k.u,g[2]=P.u,c.F.el(1,u,l,o,0,E,k,P),_[0]=E.u,_[1]=k.u,_[2]=P.u,M[0]=0,M[1]=0,M[2]=-1*u*c.F.n(1,u,n)*Math.sin(n),0>o?c.F.Yq(M,_,g,$,0):c.F.Yq(M,g,_,$,0),k=[0,0,0],P=[0,0,0];var V=[0,0,0];g=[0,0,0],E=[0,0,0];var N=Math.acos($[2]/1),G=1-u,J=Math.tan(N),W=1+J*J/G,ee=2*M[2]*J/G;for(G=(-ee+(J=Math.sqrt(ee*ee-4*W*(M[2]*M[2]/G-1))))/(W*=2),ee=(-ee-J)/W,J=Math.tan(N),N=(G+ee)/2,M=((W=J*G+M[2])+(J*ee+M[2]))/2,J=c.F.ip(G-N,W-M),G=M/D*1.570796326794897,ee=0;100>ee&&(W=(W=c.F.w(u,G))*W/Math.cos(G)*(Math.sin(G)-M*W/(1-u)),!c.s.Dd(W));ee++)G-=W;M=c.F.n(1,u,G)*Math.cos(G),J=1-J/(M=Math.sqrt((M-N)*(M+N))),J*=2-J,W=c.F.qn(k),N=c.F.qn(P),G=c.F.qn(V);var Z=c.F.Ut(V,k);ee=c.F.Ut(V,P),c.F.yx(V,k,g),c.F.yx(V,P,E),k=Math.acos(Z/(G*W)),P=Math.acos(ee/(G*N)),P*=c.s.Mb(1,c.F.Ut(g,E)),(1.570796326794897<=c.s.R(k)&&1.570796326794897<=c.s.R(P)||3.141592653589793<c.s.R(k-P))&&(k=(3.141592653589793-c.s.R(k))*c.s.Mb(1,k),P=(3.141592653589793-c.s.R(P))*c.s.Mb(1,P)),g=c.F.Sj(J,P),E=c.F.q(M,J,c.F.Sj(J,k)),g=c.F.q(M,J,g),g=c.s.R(g-E)*w,k=new c.ha(0),P=new c.ha(0),V=$[1]/1,V*=-c.s.Mb(1,F),E=Math.acos(V)*c.s.Mb(1,F),C.sf(w,u,a,n,g,E,k,P),c.s.$(o,k.u)&&c.s.$(l,P.u)||(J=c.F.ip(c.F.ca(o-k.u),l-P.u),C.sf(w,u,a,n,g,c.F.ca(E+3.141592653589793),k,P),(W=c.F.ip(c.F.ca(o-k.u),l-P.u))<J&&(E=c.F.ca(E+3.141592653589793))),k=[0,0,0,0],P=[0,0,0,0],J=[0,0,0],w=[0,0,0],a=[0,0,0],n=[0,0,0],V=[0,0,0],(M=[0,0,0])[0]=0,M[1]=0,M[2]=D,J[0]=0,J[1]=0,J[2]=0,c.F.Yq(J,M,_,k,0),c.s.Dd(l)?(w[0]=_[0],w[1]=_[1],w[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(u=c.F.n(1,u,l)*Math.cos(l),w[0]=0,w[1]=0,_[2]+=Math.tan(1.570796326794897-c.s.R(l))*u*c.s.Mb(1,l),a[0]=u*Math.cos(o)-u*Math.sin(o),a[1]=u*Math.sin(o)+u*Math.cos(o)),a[2]=_[2],c.F.Yq(_,a,w,P,1),c.F.yx(P,k,n),c.F.yx(P,$,V),V=c.F.Ut(n,V)/(c.F.qn(n)*c.F.qn(V)),V*=c.s.Mb(1,F),o=Math.acos(V)*-c.s.Mb(1,F),(0<E&&0<o||0>E&&0>o)&&(o=c.F.ca(o+3.141592653589793)),p!=null&&(p.u=g),d!=null&&(d.u=E),y!=null&&(y.u=o)}}},C.sf=function(w,u,a,n,o,l,p,d){var y=[0,0,0],g=[0,0,0],_=[0,0,0],M=[0,0,0],$=[0,0,0],E=[0,0,0],k=[0,0,0],P=[0,0,0,0],F=new c.ha(0),D=new c.ha(0),V=new c.ha(0),N=new c.ha(0),G=new c.ha(0),J=new c.ha(0);if(p!=null&&d!=null)if(c.s.vi(u))c.$g.sf(w,a,n,o,l,p,d);else if(c.s.Dd(o))p!=null&&(p.u=a),d!=null&&(d.u=n);else if(l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),a=c.F.ca(a),n=c.F.ca(n),1.570796326794897<c.s.R(n)&&(a=c.F.ca(a+3.141592653589793),n=c.s.Mb(3.141592653589793,n)-n),c.s.$(c.s.R(n),1.570796326794897)||c.s.Dd(n)||c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))c.Yk.sf(w,u,a,n,o,l,p,d);else{var W=Math.sqrt(1-u);for(w=o/w,c.F.el(1,u,n,0,0,N,G,J),y[0]=N.u,y[1]=G.u,y[2]=G.u,k[0]=0,k[1]=0,k[2]=-1*u*c.F.n(1,u,n)*Math.sin(n),N=c.F.n(1,u,n),G=c.F.ca(1.570796326794897-l),J=Math.sin(G),o=Math.cos(n),n=Math.sin(n),$[0]=N*o-n*J,$[1]=Math.cos(G),$[2]=(1-u)*N*n+o*J,0>l?c.F.Yq(k,$,y,P,0):c.F.Yq(k,y,$,P,0),y=Math.acos(P[2]/1),P=Math.atan2(-P[1],-P[0]),n=1-u,G=1+($=Math.tan(y))*$/n,n=(-(N=2*k[2]*$/n)+($=Math.sqrt(N*N-4*G*(k[2]*k[2]/n-1))))/(G*=2),N=(-N-$)/G,$=Math.tan(y),y=(n+N)/2,k=((G=$*n+k[2])+($*N+k[2]))/2,$=c.F.ip(n-y,G-k),W=k/W*1.570796326794897,n=0;100>n&&(N=(N=c.F.w(u,W))*N/Math.cos(W)*(Math.sin(W)-k*N/(1-u)),!c.s.Dd(N));n++)W-=N;W=c.F.n(1,u,W)*Math.cos(W),k=1-$/(W=Math.sqrt((W-y)*(W+y))),k*=2-k,E=Math.acos(c.F.Ut(E,g)/(c.F.qn(E)*c.F.qn(g))),E*=c.s.Mb(1,g[0]),l=(c.F.q(W,k,c.F.Sj(k,E))+w*c.s.Mb(1,l))/c.F.Ch(W,k),l=c.F.ca(1.570796326794897*l),l=c.F.Tq(k,l),c.F.n(W,k,l),$=c.F.ca(P+a),a=Math.cos($),l=Math.sin($),_[0]=M[0]*a+M[1]*-l,_[1]=M[0]*l+M[1]*a,_[2]=M[2],c.F.eO(u,_[0],_[1],_[2],V,D,F),p!=null&&(p.u=D.u),d!=null&&(d.u=V.u)}},C}()}(U||(U={})),function(c){var C=function(){function o(l){this.Za=null,this.xt=new c.h,this.yt=new c.h,this.g=l}return o.prototype.compare=function(l,p,d){return this.g.Hc(p,this.xt),this.g.Hc(l.ka(d),this.yt),this.xt.compare(this.yt)},o}(),w=function(){function o(l){this.Cf=new c.h,this.Fk=new c.h,this.g=l}return o.prototype.Fh=function(l){this.Cf.N(l)},o.prototype.compare=function(l,p){return this.g.Hc(l.ka(p),this.Fk),this.Cf.compare(this.Fk)},o}(),u=function(o){function l(p){var d=o.call(this,p.g,p.ra,!1)||this;return d.ib=p,d}return St(l,o),l.prototype.compare=function(p,d,y){if(this.sg)return-1;var g=this.ib.Rd.Ln(this.ib.Th(d));p=p.ka(y);var _=this.ib.Rd.Ln(this.ib.Th(p));return this.Fm=y,this.ME(d,g,p,_)},l}(c.PC),a=function(o){function l(p){var d=o.call(this,p.g,p.ra)||this;return d.ib=p,d}return St(l,o),l.prototype.compare=function(p,d){return this.sg?-1:(p=this.ib.Rd.Ln(this.ib.Th(p.ka(d))),this.Fm=d,this.NE(d,p))},l}(c.WL),n=function(){function o(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new c.h,this.Ri=new c.h,this.hb=new c.ad(8),this.Ad=new c.ad(5),this.nh=new c.cu,this.Rd=new c.cu,this.Pg=!1,this.xh=new c.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new c.$j,this.Nc=new c.$j,this.ph=new c.ja(0),this.Ik=new c.OC,this.Gf=new c.ja(0),this.Ck=new c.ja(0),this.lo=new c.Ta}return o.prototype.LX=function(l,p){var d=new c.Ed;return d.VB(),l.Pc(d),this.gr(l),this.Yn=!1,this.ra=p,this.PA=p*p,p=this.eC(),l.Pc(d),p||(this.lQ(),p||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},o.prototype.PX=function(l,p){this.gr(l),this.Yn=!1,this.ra=p,this.PA=p*p,this.Pg=!1,this.eC(),this.Pg||(this.Pg=l.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.qg=function(l,p){return this.hb.U(l,0+p)},o.prototype.GB=function(l,p,d){this.hb.T(l,0+p,d)},o.prototype.Th=function(l){return this.hb.U(l,2)},o.prototype.UW=function(l,p){this.hb.T(l,2,p)},o.prototype.MF=function(l,p){return this.hb.U(l,3+p)},o.prototype.Rp=function(l){return this.hb.U(l,7)},o.prototype.Rl=function(l,p){this.hb.T(l,7,p)},o.prototype.Tp=function(l,p){return this.hb.U(l,3+this.Qp(l,p))},o.prototype.hr=function(l,p,d){this.hb.T(l,3+this.Qp(l,p),d)},o.prototype.IR=function(l,p){return this.hb.U(l,5+this.Qp(l,p))},o.prototype.jr=function(l,p,d){this.hb.T(l,5+this.Qp(l,p),d)},o.prototype.Ur=function(l){return this.Ad.U(l,0)},o.prototype.PW=function(l,p){this.Ad.T(l,0,p)},o.prototype.$y=function(l){return this.Ad.U(l,4)},o.prototype.er=function(l,p){this.Ad.T(l,4,p)},o.prototype.kl=function(l){return this.Ad.U(l,1)},o.prototype.nn=function(l,p){this.Ad.T(l,1,p)},o.prototype.Zy=function(l){return this.Ad.U(l,3)},o.prototype.Ft=function(l,p){this.Ad.T(l,3,p)},o.prototype.$m=function(l){var p=this.Ad.De(),d=this.nh.Rh();return this.PW(p,d),l!=-1?(this.nh.addElement(d,l),this.g.Sa(l,this.zh,p),this.er(p,this.g.Va(l))):this.er(p,-1),p},o.prototype.CP=function(l){this.Ad.kd(l)},o.prototype.FD=function(l,p){this.nh.addElement(this.Ur(l),p),this.g.Sa(p,this.zh,l)},o.prototype.ot=function(l){var p=this.hb.De(),d=this.Rd.Rh();return this.UW(p,d),l!=-1&&this.Rd.addElement(d,l),p},o.prototype.GD=function(l,p){this.Rd.addElement(this.Th(l),p)},o.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.gF(l))&&this.ph.NV(l)},o.prototype.jj=function(l,p){if(this.qg(l,0)==-1)this.GB(l,0,p);else{if(this.qg(l,1)!=-1)throw c.i.Ra();this.GB(l,1,p)}this.gy(l,p)},o.prototype.gy=function(l,p){var d=this.kl(p);if(d!=-1){var y=this.Tp(d,p);this.jr(y,p,l),this.hr(l,p,y),this.hr(d,p,l),this.jr(l,p,d)}else this.jr(l,p,l),this.hr(l,p,l),this.nn(p,l)},o.prototype.Qp=function(l,p){return this.qg(l,0)==p?0:1},o.prototype.Zm=function(l,p){var d,y=this.Zy(p);if(y!=-1&&(this.df.wd(y,-1),this.Ft(p,-1)),(y=this.kl(p))!=-1){var g=d=y;do{var _=!1,M=this.Qp(d,p),$=this.MF(d,M);if(this.qg(d,M+1&1)==l){if(this.Zu(d),this.Rd.eh(this.Th(d)),this.Wu(d),d==$){y=-1;break}y==d&&(y=this.kl(p),g=$,_=!0)}d=$}while(d!=g||_);if(y!=-1){do M=this.Qp(d,p),$=this.MF(d,M),this.GB(d,M,l),d=$;while(d!=g);(d=this.kl(l))!=-1?(g=this.Tp(d,l),_=this.Tp(y,l),g==d?(this.nn(l,y),this.gy(d,l),this.nn(l,d)):_==y&&this.gy(y,l),this.hr(y,l,g),this.jr(g,l,y),this.hr(d,l,_),this.jr(_,l,d)):this.nn(l,y)}}for(y=this.Ur(l),d=this.Ur(p),g=this.nh.sc(d);g!=-1;g=this.nh.lb(g))this.g.Sa(this.nh.ka(g),this.zh,l);this.nh.Cy(y,d),this.CP(p)},o.prototype.PT=function(l,p){var d=this.qg(l,0),y=this.qg(l,1),g=this.qg(p,0),_=this.qg(p,1);this.Rd.Cy(this.Th(l),this.Th(p)),p==this.kl(d)&&this.nn(d,l),p==this.kl(y)&&this.nn(y,l),this.Zu(p),this.Wu(p),d==g&&y==_||y==g&&d==_||(this.Jn(d,this.Ao),this.Jn(g,this.Ri),this.Ao.rb(this.Ri)?(d!=g&&this.Zm(d,g),y!=_&&this.Zm(y,_)):(y!=g&&this.Zm(y,g),d!=_&&this.Zm(d,_)))},o.prototype.Zu=function(l){var p=this.qg(l,1);this.ZE(l,this.qg(l,0)),this.ZE(l,p)},o.prototype.ZE=function(l,p){var d=this.Tp(l,p),y=this.IR(l,p),g=this.kl(p);d!=l?(this.hr(y,p,d),this.jr(d,p,y),g==l&&this.nn(p,d)):this.nn(p,-1)},o.prototype.RD=function(l,p,d){var y=this.Rd.sc(l),g=this.Rd.ka(y);l=this.Ie(g);var _=this.Ie(this.g.V(g));for(this.g.lr(g,p,d,!0),y=this.Rd.lb(y);y!=-1;y=this.Rd.lb(y)){g=this.Rd.ka(y);var M=this.Ie(g)==l;this.g.lr(g,p,d,M)}y=p.Xp(d,0).bc(),p=p.Xp(d,p.ql(d)-1).xc(),this.wK(l,y),this.wK(_,p)},o.prototype.UE=function(l,p,d){var y=this.Th(l),g=this.qg(l,0),_=this.qg(l,1),M=this.ot(-1);for(this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,g),l=1,p=p.ql(d);l<p;l++)d=this.$m(-1),this.Ck.add(d),this.Gf.add(d),this.jj(M,d),M=this.ot(-1),this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,d);for(this.jj(M,_),y=this.Rd.sc(y);y!=-1;y=this.Rd.lb(y))if(_=this.Rd.ka(y),this.Ie(_)==g){l=0;do 0<l&&(M=this.Gf.get(l-1),this.FD(M,_),this.$y(M)==-1&&this.er(M,this.g.Va(_))),M=this.Gf.get(l),l+=2,this.GD(M,_),_=this.g.V(_);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&(M=this.Gf.get(l+1),this.FD(M,_),0>this.$y(M)&&this.er(M,this.g.Va(_))),M=this.Gf.get(l),l-=2,this.GD(M,_),_=this.g.V(_);while(0<=l)}this.Gf.clear(!1)},o.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},o.prototype.NI=function(l,p,d){var y=this.qg(p,0),g=new c.h;this.Jn(y,g);var _=new c.h,M=this.qg(p,1);this.Jn(M,_);var $=d.ql(l),E=d.Xp(l,0),k=new c.h;if(E.$p(k),!g.rb(k)){if(!this.Pg){var P=g.compare(this.xh);0>P*(k=k.compare(this.xh))&&(this.Pg=!0)}this.qF(y,this.Gf),this.Ck.add(y)}for(!this.Pg&&1<$&&(P=g.compare(_),E=E.xc(),(g.compare(E)!=P||E.compare(_)!=P||0>E.compare(this.xh))&&(this.Pg=!0)),l=(E=d.Xp(l,$-1)).xc(),_.rb(l)||(this.Pg||0>(P=_.compare(this.xh))*(k=l.compare(this.xh))&&(this.Pg=!0),this.qF(M,this.Gf),this.Ck.add(M)),this.Gf.add(p),_=0,M=this.Gf.size;_<M;_++)l=this.Gf.get(_),d=this.Rp(l),c.ad.GG(d)&&(this.Nc.wd(d,-1),this.Rl(l,-1)),l!=p&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},o.prototype.gO=function(l,p){this.ae.compare(this.Nc,this.Nc.ka(l),p),this.ae.sg&&(this.ae.Mr(),this.jF(l,p))},o.prototype.jF=function(l,p){this.Yn=!0,l=this.Nc.ka(l),p=this.Nc.ka(p);var d=this.Rd.Ln(this.Th(l)),y=this.Rd.Ln(this.Th(p)),g=this.g.cc(d);g==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(d,this.je),g=this.je),(d=this.g.cc(y))==null&&(this.Pm==null&&(this.Pm=new c.zb),this.g.fd(y,this.Pm),d=this.Pm),this.Ik.Qo(g),this.Ik.Qo(d),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(l,p,-1,this.Ik),this.Ik.clear()},o.prototype.BQ=function(l,p){this.Yn=!0,p=this.Nc.ka(p);var d=this.Rd.Ln(this.Th(p)),y=this.g.cc(d);y==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(d,this.je),y=this.je),d=this.wF(l),this.Ik.Qo(y),this.g.Xi(d,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(p,-1,l,this.Ik),this.Ik.clear()},o.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.RS(l)!=-1&&this.rS(l),this.Xn=!1}},o.prototype.rS=function(l){if(this.Xn){var p=this.Nc.Bu(this.HH,this.BH,l,!0);this.Xn=!1}else p=this.Nc.ED(l);p==-1?this.PT(this.Nc.ka(this.Nc.AF()),l):(this.Rl(l,p),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,p)))},o.prototype.RS=function(l){var p=this.qg(l,0);if(l=this.qg(l,1),this.Jn(p,this.Ao),this.Jn(l,this.Ri),c.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var d=this.Ao.compare(this.xh),y=this.Ri.compare(this.xh);return 0>=d&&0<y?l:0>=y&&0<d?p:-1},o.prototype.jQ=function(){var l=new c.ja(0);l.Jb(this.g.gd);for(var p=this.g.$q(),d=p.next();d!=-1;d=p.next())this.g.Qa(d,this.zh)!=-1&&l.add(d);this.g.nx(l,l.size),this.kQ(l)},o.prototype.kQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Xo(new C(this.g));var p=new c.h;p.Sc();for(var d=-1,y=new c.h,g=0,_=l.size;g<_;g++){var M=l.get(g);this.g.Hc(M,y),y.rb(p)?(M=this.g.Qa(M,this.zh),this.Zm(d,M)):(d=this.Ie(M),this.g.Hc(M,p),M=this.df.zn(M),this.Ft(d,M))}},o.prototype.lQ=function(){var l=new c.ja(0);l.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))l.add(this.df.ka(p));this.df.clear(),this.g.nx(l,l.size),p=0;for(var d=l.size;p<d;p++){var y=l.get(p),g=this.Ie(y);y=this.df.zn(y),this.Ft(g,y)}},o.prototype.qF=function(l,p){var d=this.kl(l);if(d!=-1){var y=d;do c.ad.GG(this.Rp(y))&&p.add(y),y=this.Tp(y,l);while(y!=d)}},o.prototype.wK=function(l,p){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),p)},o.prototype.cK=function(l,p,d,y){this.Zu(l),p!=-1&&this.Zu(p),this.NI(0,l,y),p!=-1&&this.NI(1,p,y),d!=-1&&(y.Cf.D(this.Ao),this.Jn(d,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(d)),d=0;for(var g=this.Ck.size;d<g;d++){var _=this.Ck.get(d),M=this.Zy(_);M!=-1&&(this.df.wd(M,-1),this.Ft(_,-1))}for(d=this.Th(l),g=p!=-1?this.Th(p):-1,this.RD(d,y,0),p!=-1&&this.RD(g,y,1),this.UE(l,y,0),p!=-1&&this.UE(p,y,1),this.Rd.eh(d),this.Wu(l),p!=-1&&(this.Rd.eh(g),this.Wu(p)),d=0,g=this.Ck.size;d<g;d++)(_=this.Ck.get(d))==this.Lq&&(this.Zv=!0),(M=this.Zy(_))==-1&&((M=this.df.ED(this.wF(_)))==-1?(l=this.Ie(this.df.ka(this.df.AF())),this.Zm(l,_)):this.Ft(_,M));this.Ck.clear(!1)},o.prototype.Jn=function(l,p){this.g.ZF(this.$y(l),p)},o.prototype.wF=function(l){return this.nh.Ln(this.Ur(l))},o.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.ao=this.ae);var l=new c.ja(0),p=null,d=null;this.BH=this.HH=-1,this.Xn=!1;for(var y=this.df.sc(-1);y!=-1;){this.Xn=!1;var g=this.df.ka(y);this.Lq=this.Ie(g),this.g.Hc(g,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var _=this.kl(this.Lq),M=_==-1;if(!M){g=_;do{var $=this.Rp(g);$==-1?(this.ph.add(g),this.Rl(g,-3)):$!=-3&&l.add($),g=this.Tp(g,this.Lq)}while(g!=_)}if(0<l.size){for(this.Xn=l.size==1&&this.ph.size==1,M=0,_=l.size;M<_;M++)g=this.Nc.ka(l.get(M)),this.Rl(g,-2);var E=-2,k=-2;for(M=0,_=l.size;M<_;M++){if($=l.get(M),E==-2){var P=this.Nc.xe($);P!=-1?(g=this.Nc.ka(P),(g=this.Rp(g))!=-2&&(E=P)):E=-1}if(k==-2&&(($=this.Nc.lb($))!=-1?(g=this.Nc.ka($),(g=this.Rp(g))!=-2&&(k=$)):k=-1),E!=-2&&k!=-2)break}for(M=0,_=l.size;M<_;M++)$=l.get(M),g=this.Nc.ka($),this.Nc.wd($,-1),this.Rl(g,-1);l.clear(!1),this.HH=E!=-1?E:-1,this.BH=k!=-1?k:-1,E!=-1&&k!=-1?this.Xn||this.gO(E,k):E==-1&&k==-1&&(this.Xn=!1)}else M&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.pJ(p),p.sg&&(p.Mr(),this.BQ(this.Lq,p.Fm)));this.sS(),this.Zv?(this.Zv=!1,d==null&&(d=new w(this.g)),d.Fh(this.xh),y=this.df.pJ(d)):y=this.df.lb(y)}return this.Yn},o.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.md;l!=-1;l=this.g.ve(l))if(c.ba.Ic(this.g.jc(l)))for($=this.g.Ob(l);$!=-1;$=this.g.Sb($)){var p=this.g.Ka($),d=this.g.Ya($),y=this.$m(d),g=this.ot(d);for(this.jj(g,y),E=this.g.V(d),d=0,p-=2;d<p;d++){var _=this.g.V(E),M=this.$m(E);this.jj(g,M),g=this.ot(E),this.jj(g,M),E=_}this.g.ec($)?(M=this.$m(E),this.jj(g,M),g=this.ot(E),this.jj(g,M),this.jj(g,y)):(M=this.$m(E),this.jj(g,M))}else for(var $=this.g.Ob(l);$!=-1;$=this.g.Sb($)){var E=this.g.Ya($);for(y=0,p=this.g.Ka($);y<p;y++)this.$m(E),E=this.g.V(E)}this.jQ()},o}();c.MC=n}(U||(U={})),function(c){var C=function(w){function u(a,n,o){var l=w.call(this)||this;if(a!==void 0)if(o!==void 0){l.description=c.fe.pg();var p=new c.Od;p.L(a,n,o),l.ZB(p)}else if(n!==void 0)l.description=c.fe.pg(),l.Db(a,n);else if(a instanceof c.sa)l.description=a;else if(a instanceof c.h)l.description=c.fe.pg(),l.Db(a);else{if(!(a instanceof u))throw c.i.O();l.description=a.description,l.Db(a.Ng(),a.kh()),a.la!==null&&(l.la=a.la.slice(0))}else l.description=c.fe.pg();return l}return St(u,w),u.prototype.D=function(a){if(a===void 0){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return(a=new c.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},u.prototype.Db=function(a,n){typeof a=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=a,this.la[1]=n):(this.wc(),this.Db(a.x,a.y))},u.prototype.xz=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");var a=new c.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.dG()?this.la[2]:c.sa.te(1),a},u.prototype.ZB=function(a){this.wc();var n=this.hasAttribute(1);n||c.sa.yG(1,a.z)||(this.se(1),n=!0),this.la==null&&this.wn(),this.la[0]=a.x,this.la[1]=a.y,n&&(this.la[2]=a.z)},u.prototype.Ng=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.YB=function(a){this.setAttribute(0,0,a)},u.prototype.kh=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.WJ=function(a){this.setAttribute(0,1,a)},u.prototype.XR=function(){return this.Vc(1,0)},u.prototype.sX=function(a){this.setAttribute(1,0,a)},u.prototype.uR=function(){return this.Vc(2,0)},u.prototype.cX=function(a){this.setAttribute(2,0,a)},u.prototype.Fc=function(){return this.tF(3,0)},u.prototype.GJ=function(a){this.setAttribute(3,0,a)},u.prototype.Vc=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:c.sa.te(a)},u.prototype.tF=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:c.sa.te(a)},u.prototype.setAttribute=function(a,n,o){this.wc();var l=this.description.Rf(a);0>l&&(this.se(a),l=this.description.Rf(a)),this.la==null&&this.wn(),this.la[this.description.bk(l)+n]=o},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(a){if(this.la!=null){for(var n=c.fe.Kw(a,this.description),o=[],l=0,p=0,d=a.Ba;p<d;p++){var y=a.ld(p),g=c.sa.Wa(y);if(n[p]==-1){var _=c.sa.te(y);for(y=0;y<g;y++)o[l]=_,l++}else for(_=this.description.bk(n[p]),y=0;y<g;y++)o[l]=this.la[_],l++,_++}this.la=o}this.description=a},u.prototype.wn=function(){this.gJ(this.description.Be.length),u.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(a){if(a instanceof c.Ed){if(!this.Bc()){var n=this.D();a.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.ZB(a.hp(n)))},u.prototype.copyTo=function(a){if(a.K()!=33)throw c.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),u.YD(this.la,a.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.Pf(this.description),a.$b(this)},u.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},u.prototype.So=function(a){if(this.Bc())a.Pa();else{var n=this.xz();a.v=n.x,a.G=n.y,a.Xe=n.z,a.C=n.x,a.H=n.y,a.Dg=n.z}},u.prototype.Vg=function(a,n){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,n),o.pa=a,o.wa=a,o)},u.prototype.gJ=function(a){if(this.la==null)this.la=c.P.mg(a);else if(this.la.length<a){for(var n=this.la.slice(0),o=this.la.length;o<a;o++)n[o]=0;this.la=n}},u.YD=function(a,n,o){if(0<o)for(o=0;o<a.length;o++)n[o]=a[o]},u.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof u)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var n=0,o=this.description.Be.length;n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var n=0,o=this.description.Be.length;n<o;n++){var l=this.la[n];l=c.P.truncate(l^l>>>32),a=c.P.Vh(l,a)}return a},u.prototype.ng=function(){return null},u}(c.ba);c.Ta=C}(U||(U={})),function(c){var C=function(){function w(u,a,n){u!==void 0&&(this.x=u,this.y=a,this.z=n)}return w.construct=function(u,a,n){var o=new w;return o.x=u,o.y=a,o.z=n,o},w.prototype.L=function(u,a,n){this.x=u,this.y=a,this.z=n},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(u){return new w(this.x-u.x,this.y-u.y,this.z-u.z)},w.prototype.Bg=function(u){new w(this.x*u,this.y*u,this.z*u)},w.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},w}();c.Od=C}(U||(U={})),function(c){var C=function(){function w(u,a,n){this.Iw=this.yA=null,this.Zf=a,this.AT=a.y-n,this.zT=a.y+n,this.Gw=0,this.Zz=u,this.ra=n,this.MT=n*n,this.$z=n!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.UM=function(u){return u=u.ic(u.ge(this.Zf,!1)),c.h.zc(u,this.Zf)<=this.MT},w.prototype.aF=function(u){if(!this.$z&&(this.Zz&&this.Zf.rb(u.bc())||this.Zf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Zf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var a=Math.max(u.ta,u.qa);this.Zf.x>Math.min(u.ta,u.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var n=!1;if(a=Math.max(u.ta,u.qa),this.Zf.x>a?n=!0:this.Zf.x>=Math.min(u.ta,u.qa)&&(n=0<u.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),n){if(this.Zf.y==u.bc().y){if(this.Zf.y<u.xc().y)return}else if(this.Zf.y==u.xc().y&&this.Zf.y<u.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.bc().y>u.xc().y?1:-1)}}},w.prototype.MI=function(u){var a=u.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&this.UM(u))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=u.$F()))for(u=0;u<a;u++){var n=this.yA[u].get();if(this.aF(n),this.Nv)return!0}else if(this.aF(u),this.Nv)return!0;return!1},w.KM=function(u,a,n){for(a=new w(u.Kn()==0,a,n),u=u.Ha();u.ab();)for(;u.Ia();)if(n=u.ia(),a.MI(n))return-1;return a.result()},w.LM=function(u,a,n,o){var l=new c.l;u.yc(l),l.X(o,o);var p=new w(u.Kn()==0,n,o);u=u.Ha();var d=new c.l;for(d.L(l),d.C=n.x+o,d.G=n.y-o,d.H=n.y+o,o=(n=a.HF(d,o)).next();o!=-1;o=n.next())if(u.Wb(a.ka(o)),u.Ia()&&(o=u.ia(),p.MI(o)))return-1;return p.result()},w.ym=function(u,a,n){if(u.B())return 0;var o=new c.l;if(u.yc(o),o.X(n,n),!o.contains(a))return 0;if((o=u.Cb)!=null){var l=o.Hk;if(l!=null){if((l=l.Uo(a.x,a.y))==1)return 1;if(l==0)return 0}if((o=o.Gb)!=null)return w.LM(u,o,a,n)}return w.KM(u,a,n)},w.XS=function(u,a,n){return a.B()?0:w.ym(u,a.D(),n)},w.Ol=function(u,a){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*a<1*u*a},w}();c.Fg=C}(U||(U={})),function(c){var C=function(w){function u(a){return w.call(this,!0,a)||this}return St(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.sG=function(a,n,o){this.ES(a,n,o)},u.prototype.kR=function(){this.AR()},u}(c.Xk);c.Ea=C}(U||(U={})),function(c){(function(C){C[C.PiPOutside=0]="PiPOutside",C[C.PiPInside=1]="PiPInside",C[C.PiPBoundary=2]="PiPBoundary"})(c.ML||(c.ML={})),c.jd=function(){function C(){}return C.FG=function(w,u,a){return(w=c.Fg.XS(w,u,a))==0?0:w==1?1:2},C.Zd=function(w,u,a){return(w=c.Fg.ym(w,u,a))==0?0:w==1?1:2},C.SX=function(w,u,a,n,o){if(u.length<a||o.length<a)throw c.i.O();for(var l=0;l<a;l++)o[l]=C.Zd(w,u[l],n)},C.nK=function(w,u,a,n,o){if(w.K()==1736)C.SX(w,u,a,n,o);else{if(w.K()!=197)throw c.i.ga("invalid_call");var l=new c.l;w.A(l),C.VM(l,u,a,n,o)}},C.VM=function(w,u,a,n,o){if(u.length<a||o.length<a)throw c.i.O();if(w.B())for(n=0;n<a;n++)o[n]=0;else for(w.X(.5*-n,.5*-n),w.X(.5*n,.5*n),n=0;n<a;n++)w.contains(u[n])?o[n]=1:w.contains(u[n])?o[n]=2:o[n]=0},C.UX=function(w,u,a,n,o){for(var l=0;l<a;l++)o[l]=w.ss(u[l],n)?2:0},C.TX=function(w,u,a,n,o){var l=w.Cb,p=null;l!=null&&(p=l.Hk),l=a;for(var d=0;d<a;d++)if(o[d]=1,p!=null){var y=u[d];p.Uo(y.x,y.y)==0&&(o[d]=0,l--)}if(l!=0)for(w=w.Ha();w.ab()&&l!=0;)for(;w.Ia()&&l!=0;)for(p=w.ia(),d=0;d<a&&l!=0;d++)o[d]==1&&p.ss(u[d],n)&&(o[d]=2,l--);for(d=0;d<a;d++)o[d]==1&&(o[d]=0)},C.oK=function(w,u,a,n,o){var l=w.K();if(l==1607)C.TX(w,u,a,n,o);else{if(!c.ba.zd(l))throw c.i.ga("Invalid call.");C.UX(w,u,a,n,o)}},C}()}(U||(U={})),function(c){var C=function(w){function u(a,n){if(arguments.length==2){var o=w.call(this,!1,a.description)||this;o.nf(a),o.lineTo(n)}else o=w.call(this,!1,a)||this;return o}return St(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.sG=function(a,n,o){this.FS(a,n,o)},u}(c.Xk);c.Ua=C}(U||(U={})),function(c){var C=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw c.i.RC()},w}();c.op=C}(U||(U={})),function(c){var C;(C=c.KK||(c.KK={}))[C.clipWithInputHorizon=1]="clipWithInputHorizon",C[C.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.KW=function(o){this.LB(1,o)},n.prototype.LW=function(o){this.LB(2,o)},n.prototype.cS=function(){return this.ks(1)},n.prototype.dS=function(){return this.ks(2)},n.prototype.LB=function(o,l){this.Mg=l?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.prototype.Qf=function(){var o=new n;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},n}();c.tC=w,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(c.LK||(c.LK={}));var u=function(){function n(){this.Mg=0}return n.prototype.LB=function(o,l){this.Mg=l?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.kg=function(o){var l=new n;return l.Mg=o.Mg,l},n.prototype.hM=function(o){this.Mg=o.Mg},n}();c.wY=u;var a=function(){function n(o,l,p){this.ef=o,this.$f=l,this.Wf=new c.l,this.Wf.L(p),this.vT=o.dc()+l.dc()+this.Wf.dc().toString()}return n.prototype.dc=function(){return this.vT},n.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.$f.Nb(o.$f)&&this.Wf.Nb(o.Wf)},n}();c.BY=a,a=function(){function n(){this.$f=this.ef=null,this.mH=new w,this.nH=new u,this.yw=this.Yf=null,this.ow=this.Vn=!0}return n.Pr=function(o,l,p,d){var y;d===void 0&&(d=null),y===void 0&&(y=null);var g=new n;return g.sp(o,l,p,d,y),g},n.prototype.sp=function(o,l,p,d,y){if(o==null||l==null)throw c.i.ga("invalidArgument");if(this.ef=o,this.$f=l,this.ow=this.Vn=!1,d!=null&&(this.mH=d.Qf()),y!=null&&this.nH.hM(y),y=!1,l.Tb()==1&&d!=null&&(d=d.Lr,isNaN(d)||d==0||(y=!0)),o==l)this.Vn=!y,this.ow=!0;else{d=o.Tb();var g=l.Tb();if(d==0||g==0){if(p!=null)throw c.i.O();o.Id()!=null&&l.Id()!=null&&(this.Vn=o.Id().Nb(l.Id()))}else d==3||g==3?this.Vn=o.Nb(l):this.ef.fS(this.$f)?this.Vn=!y:this.Vn=!1,this.Yf=p,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},n.prototype.isIdentity=function(){return this.Vn},n.prototype.iR=function(){return this.mH.Qf()},n.prototype.Nb=function(o){return o==this||!!(o instanceof n&&this.ef.Nb(o.ef)&&this.$f.Nb(o.$f))&&(this.Yf==o.Yf||!(this.Yf==null||o.Yf==null||!this.Yf.Nb(o.Yf)))},n.prototype.kY=function(){this.yw=new c.du(this)},n}(),c.xr=a}(U||(U={})),function(c){var C=function(){function w(){}return w.Ep=function(u){return u*w.jW},w.mx=function(u,a){return w.bP(a-u)},w.cP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=c.mc.MK(u))&&(u+=360),u)},w.bP=function(u){return 180<(u=w.cP(u))&&(u-=360),u},w.jW=57.29577951308232,w}();c.sr=C,c.Jh=function(){function w(){}return w.nj=function(u,a){var n=new c.l;u.A(n);var o=c.cb.ih(a),l=new c.l;return l.L(o),l.v=n.v,l.C=n.C,l.X(.01*l.da(),0),a=c.ua.Xd(a,n,!1),l.contains(n)?u:c.Vd.clip(u,l,a,0)},w.ms=function(u,a,n,o,l){if(!c.cb.Xc(a))throw c.i.O();var p=c.ua.mj(a,u,!1),d=c.cb.ih(a),y=c.cb.tc(a),g=y.Id().ci,_=c.cb.xv(y);y=c.cb.gv(y),_*=2-_;var M=new c.Oc;d.en(M);var $=[[0,0],[0,0]];if(c.Gg.Tb(a)==2?o?($[0][0]=w.an(l,M),$[0][1]=d.Lp(),c.cb.wt(),d=$[0][0]*g):($[0][0]=d.ik(),$[0][1]=l,c.cb.wt(),d=$[0][1]*g):d=l*g,!o&&d!=0)throw c.i.O();var E=new c.ha,k=new c.hd;u=k.Ib(u);for(var P=[0],F=new c.h,D=new c.h,V=new c.h,N=new c.h,G=new c.h,J=new c.h,W=k.Ob(u);W!=-1;W=k.Sb(W)){var ee=k.Ya(W);k.D(ee,V);for(var Z=!1,ae=ee=k.V(ee);ae!=-1;ae=k.V(ae)){if(ae==ee){if(Z)break;Z=!0}if(k.D(ae,N),o&&p<l-V.x&&N.x-l>p||p<l-N.x&&V.x-l>p||!o&&p<-V.y&&N.y>p||p<-N.y&&V.y>p)do if(!(Math.abs(V.x-N.x)>=.5*M.S())){if(c.Gg.Tb(a)==2?($[0][0]=w.an(V.x,M),$[0][1]=V.y,$[1][0]=w.an(N.x,M),$[1][1]=N.y,c.cb.ZV(),G.x=$[0][0]*g,G.y=$[0][1]*g,J.x=$[1][0]*g,J.y=$[1][1]*g):(G.x=V.x*g,G.y=V.y*g,J.x=N.x*g,J.y=N.y*g),J.x=6.283185307179586*(N.x-V.x)/M.S()+G.x,o){if(D.x=d,D.y=w.Iz(y,_,G,J,d,n),isNaN(D.y))break}else{if(D.x=w.Gz(y,_,G,J,n),isNaN(D.x))break;D.y=0}c.kb.xd(y,_,G.x,G.y,J.x,J.y,E,null,null,n);var de=E.u;c.kb.xd(y,_,G.x,G.y,D.x,D.y,E,null,null,n);var ce=E.u;c.Gg.Tb(a)==2?($[0][0]=D.x/g,$[0][1]=D.y/g,c.cb.XQ(),o?(F.y=$[0][1],F.x=l):(F.x=w.qs($[0][0],V.x,N.x,M),F.y=l)):o?(F.x=l,F.y=D.y/g):(F.x=w.qs(D.x/g,V.x,N.x,M),F.y=l),P[0]=0<de?c.P.Tk(ce/de,0,1):.5,P[0]!=0&&P[0]!=1&&(de=k.Na(ae),k.Wl(de,P,1),k.Db(k.V(de),F.x,F.y))}while(0);V.N(N)}}return k.Ke(u)},w.Hn=function(u,a,n,o,l){if(u.B())return u;var p=c.cb.bf(a);return w.Jp(u,n-180*p,360*p,a,o,l,!0)},w.Iz=function(u,a,n,o,l,p){if(3.141592653589793<=Math.abs(n.x-o.x)||!w.Un(n.x,o.x,l))return NaN;if(n.x>o.x)var d=o;else d=n,n=o;o=new c.ha(0);var y=new c.ha(0),g=new c.ha(0);c.kb.xd(u,a,d.x,d.y,n.x,n.y,y,o,null,p);var _=y.u,M=0,$=1,E=new c.h;for(E.N(d);_*($-M)>1e-12*u;){var k=.5*(M+$);if(c.kb.qj(u,a,d.x,d.y,_*k,o.u,y,g,p),E.x=y.u,E.y=g.u,E.x==l)break;if(w.Un(d.x,E.x,l))$=k;else{if(!w.Un(n.x,E.x,l))return NaN;M=k}}return E.y},w.Un=function(u,a,n){return u=C.Ep(u),a=C.mx(u,C.Ep(a)),(n=C.mx(u,C.Ep(n)))==0||0<a&&0<n&&n<=a||0>a&&0>n&&n>=a},w.an=function(u,a){var n=a.wa-a.pa;return a.Kt(u-Math.floor((u-a.pa)/n)*n)},w.qs=function(u,a,n,o){var l=new c.Oc;for(l.L(a,n),n=o.S(),u=Math.floor((u-a)/n)*n+u,l=l.tf();Math.abs(u-l)>Math.abs(u+n-l);)u+=n;return u},w.Gz=function(u,a,n,o,l){if(n.y>o.y)var p=o;else p=n,n=o;if((o=new c.Oc).L(p.y,n.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-n.x))return NaN;if(p.x==n.x)return p.x;var d=new c.ha(0),y=new c.ha(0),g=new c.ha(0);c.kb.xd(u,a,p.x,p.y,n.x,n.y,y,d,null,l);var _=y.u,M=0,$=1,E=new c.h;for(E.N(p);_*($-M)>1e-12*u;){var k=.5*(M+$);if(c.kb.qj(u,a,p.x,p.y,_*k,d.u,y,g,l),E.x=y.u,E.y=g.u,o.L(p.y,E.y),E.y==0)break;if(o.contains(0))$=k;else{if(o.L(n.y,E.y),!o.contains(0))return NaN;M=k}}return E.x},w.Jp=function(u,a,n,o,l,p,d){var y=new c.l;if(u.A(y),y.B())return u;var g=new c.Oc;y.en(g);var _=new c.Oc;if(_.L(a,a+n),_.contains(g)&&_.wa!=g.wa)return u;var M=new c.l;M.L(y);var $=u.K();if($==33)return((y=(M=l?u:u.Qf()).Ng())<_.pa||y>=_.wa||d&&y==_.wa)&&(y+=Math.ceil((_.pa-y)/n)*n,y=_.Kt(y),M.YB(y)),M;if($==550){for(o=(M=l?u:u.Qf()).vb(0),$=2*M.I(),u=!1,l=0;l<$;l+=2)((y=o.read(l))<_.pa||y>=_.wa||d&&y==_.wa)&&(u=!0,y+=Math.ceil((_.pa-y)/n)*n,y=_.Kt(y),o.write(l,y));return u&&M.Qc(1993),M}if(_.contains(g))return u;if($==197)return n=l?u:u.Qf(),y.Fa(M),n.Zo(y),n;var E=.1*Math.max(y.da(),y.S());for(M.X(0,E),d=u,_=o.Yd(0),u=c.Ih.local(),l=new c.Ed;;){var k=Math.floor((g.pa-a)/n),P=Math.ceil((g.wa-a)/n);if(!(3<P-k))break;k=Math.floor(.5*(P+k)),M.v=y.v-E,M.C=a+n*k;var F=c.Vd.clip(d,M,_,p);M.v=M.C,M.C=y.C+E;var D=c.Vd.clip(d,M,_,p);l.ig((k-P)*n,0),D.Pc(l),$==1736?d=u.W(F,D,o,null):(d=F).add(D,!1),d.A(y),y.en(g)}for(M.v=a,M.C=a+n,(a=new c.l).L(M),a.X(_,0),(a=Math.floor((y.v-M.v)/n)*n)!=0?(M.move(a,0),l.ig(-a,0)):l.MB(),a=$==1607?new c.Ua(d.description):new c.Ea(d.description),p=new c.l,g=new c.l;y.C>M.v;)(E=c.Vd.clip(d,M,_,0)).A(g),($==1607?!E.B()&&(g.S()>_||g.da()>_):!E.B()&&($!=1736||g.S()>_))&&(E.Pc(l),E.A(g),a.A(p),p.X(_,_),p.isIntersecting(g)&&$==1736?a=u.W(a,E,o,null):a.add(E,!1)),M.move(n,0),l.shift(-n,0);return a},w.RI=function(u,a,n,o){var l=new c.ee(n.description);l.Gd(n,0,-1),l=c.cb.Bh(l,u,a);var p=n.I();if(o.Pa(),!c.cb.Xc(u)||p!=l.I())return!1;var d=new c.l;n.A(d);var y=new c.l;if(l.A(y),d=d.S(),y=y.S(),d!=0&&y!=0){if(y/=d,u=c.cb.ih(a).S()/c.cb.ih(u).S(),1e-10<Math.abs(y/u-1))return!1}else if(d!=0||y!=0)return!1;for(o.add(n,!1),n=0;n<p;n++)u=l.Oa(n),o.Db(n,u);return!0},w.Jz=function(){throw c.i.Fe()},w}()}(U||(U={})),function(c){var C,w,u;(w=C=c.ui||(c.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(u=c.RK||(c.RK={})),c.Ab=function(){function a(){}return a.zv=function(n,o,l){if(l||0<o){for(n=n.toString(c.Tc.PE_STR_NAME_CANON|c.Tc.PE_STR_AUTH_NONE),o=[],l=0;l<n.length;l++)o[l]="a"<=n[l]&&"z">=n[l]?o[l]=n[l].toUpperCase():n[l];return o.join()}return n.toString(c.Tc.PE_STR_AUTH_TOP)},a.wr=function(n,o,l,p){var d=p.length,y=l.I();if(y!=0){var g=l.vb(0),_=Math.min(y,d),M=0,$=n.gh();isNaN(o)&&(o=0);for(var E=n.Xc(),k=179*(n=E?n.tc().Le().S():0)/360;0<y;){if(g.pB(M<<1,_,p),c.gj.projToGeogCenter($,_,p,o),E)for(var P=0;P<_;P++){var F=p[P][0]-o,D=c.mc.sign(F),V=g.read(2*(M+P));0>D*c.mc.sign(V)&&Math.abs(F)>k&&(p[P][0]+=-D*n)}g.pC(M<<1,_,p),M+=_,y-=_,_=Math.min(y,d)}l.Qc(1993)}},a.DL=function(n,o,l,p){var d=0,y=n.gh();isNaN(d)&&(d=0);var g=n.Xc(),_=n.bf();n=360*_,_*=179;for(var M=p.length,$=0;$<l;){for(var E=$;E<l&&o[E].isNaN();++E)$++;var k=Math.min(M,l-$);if(0<k){E=1;for(var P=$+1;E<k;++E,++P)if(o[P].isNaN()){k=E;break}if(c.ua.Ey(p,o,$,k),c.gj.projToGeogCenter(y,k,p,d),g)for(E=0,P=$;E<k;++E,++P){var F=o[P].x,D=p[E][0]-d,V=c.mc.sign(D);0>V*c.mc.sign(F)&&Math.abs(D)>_&&(p[E][0]-=V*n)}c.ua.Dy(o,$,p,k),$+=k}}},a.Kx=function(n,o,l){var p=l.length,d=o.I();if(!(1>d)){var y=o.vb(0),g=Math.min(d,p),_=0,M=n.gh(),$=n.Xc(),E=$?n.Le().S():0,k=179*E/360,P=0;for($&&(P=n.Bi());0<d;){if(y.pB(_<<1,g,l),c.gj.geogToProj(M,g,l),$)for(n=0;n<g;n++){var F=l[n][0],D=c.mc.sign(F),V=y.read(2*(_+n))-P;0>D*c.mc.sign(V)&&Math.abs(F)>k&&(l[n][0]+=-D*E)}y.pC(_<<1,g,l),_+=g,d-=g,g=Math.min(d,p)}o.Qc(1993)}},a.CL=function(n,o,l,p){if(l!=0){var d=n.gh(),y=n.Xc(),g=y?n.Le().S():0,_=179*g/360,M=0;for(y&&(M=n.Bi()),n=0;n<l;){for(var $=n;$<l&&o[$].isNaN();++$)n++;var E=Math.min(p.length,l-n);if(0<E){$=1;for(var k=n+1;$<E;++$,++k)if(o[k].isNaN()){E=$;break}if(c.ua.Ey(p,o,n,E),c.gj.geogToProj(d,E,p),y)for($=0,k=n;$<E;$++){var P=p[$][0],F=c.mc.sign(P);0>F*c.mc.sign(o[k].x-M)&&Math.abs(P)>_&&(p[$][0]-=F*g)}c.ua.Dy(o,n,p,E),n+=E}}}},a.vr=function(n,o,l,p){var d=o.I();if(d!=0){var y=o.vb(0),g=n.ef,_=n.$f,M=g.tc().Sp(),$=_.tc().Sp(),E=g.bf(),k=_.bf();if((n=n.Yf)==null||n.count()==0){for(l=M/$,p=(g.Wp()-_.Wp())*k,$=-90*E,n=90*E,M=!1,k=1,g=2*d;k<g;)E=y.get(k),(_=c.P.Tk(E,$,n))!=E&&(y.set(k,_),M=!0),k+=2;if(p!=0||l!=1)for(M=!0,$=new c.h,k=0;k<d;k++)y.uc(2*k,$),$.x*=l,$.x+=p,$.y*=l,y.Vt(2*k,$);M&&o.Qc(1993)}else{g=p.length,_=Math.min(d,g);var P=c.P.mg(_),F=null,D=0,V=NaN,N=NaN,G=360*k,J=k/E;l&&(N=90*k,V=89.9*E,F=c.P.mg(_));for(var W=!0,ee=0;d!=0;){for(E=!1,y.pB(D<<1,_,p),k=0;k<_;k++)P[k]=p[k][0];if(l)for(k=0;k<_;k++){var Z=Math.abs(p[k][1])-V;0<Z&&(E=p[k][1],p[k][1]=c.mc.En(V,E),F[k]=c.mc.En(Z,E),E=!0)}for(k=p[0][0],n.transform(p,_,M,$),W&&(ee=p[0][0]-J*k,W=!1),k=0;k<_;k++)Z=p[k][0]-P[k]*J-ee,200<Math.abs(Z)&&(p[k][0]=0<Z?p[k][0]-G:p[k][0]+G);if(E){for(k=0;k<_;k++)F[k]!=0&&(p[k][1]+=J*F[k],p[k][1]>N?p[k][1]=N:p[k][1]<-N&&(p[k][1]=-N));for(E=0;E<_;E++)F[E]=0}y.pC(D<<1,_,p),D+=_,d-=_,_=Math.min(d,g)}o.Qc(1993)}}},a.BL=function(n,o,l,p){if(n.ow)p=90*n.ef.bf(),c.ua.ZJ(o,l,-p,p);else{var d=n.Yf,y=n.ef,g=n.$f;n=y.Zr();var _=g.Zr(),M=y.bf(),$=90*M,E=g.bf();if(d==null||d.count()==0){if(p=n/_,d=(y.Wp()-g.Wp())*E,c.ua.ZJ(o,l,-$,$),d!=0||p!=1)for(E=0;E<l;E++)o[E].x*=p,o[E].x+=d,o[E].y*=p}else{y=Math.min(l,p.length),$=c.P.mg(y),g=360*E,M=E/M;for(var k=!0,P=0,F=0;l!=0;){for(E=0;E<y;E++)$[E]=o[E+F].x;for(E=o[0].x,c.ua.Ey(p,o,F,y),d.transform(p,y,n,_),c.ua.Dy(o,F,p,y),k&&(P=o[0].x-M*E,k=!1),E=0;E<y;E++){var D=o[F+E].x-$[E]*M-P;200<Math.abs(D)&&(o[F+E].x=0<D?o[F+E].x-g:o[F+E].x+g)}F+=y,l-=y,y=Math.min(l,p.length)}}}},a.fv=function(n,o){return n=n.ih(),isNaN(o)||n.Lu(o,0),n},a.PQ=function(n,o,l,p,d,y,g,_){for(var M=a.fv(p,d),$=M.S(),E=$/360,k=a.kE*E,P=n.vb(0),F=o.Xc(),D=F?$/o.Le().S():0,V=!1,N=new c.Ea(l.description),G=0,J=l.ea();G<J;++G){var W=F,ee=new c.Ua(l.description);if(ee.addPath(l,G,!0),g!=0){var Z=a.KD(!0,ee,M.H-_,M.H,g);(V=V||Z)&&(W=!1)}var ae=-1;W&&(ae=n.Ca(G));var de=ee.vb(0),ce=ee.I(),Ae=0,be=de.read(0),Je=0;Z=3*p.Yd(0);var Ve=!1,Ie=new c.h;Ie.Sc();var qt=new c.h;qt.Sc();for(var Ii=!1,Ht=1;Ht<ce;++Ht){var wt=c.h.construct(de.gg(2*Ht),de.gg(2*Ht+1)),bt=wt.x,ot=bt+Ae,Qt=ot-be;if(wt.x=ot,Math.abs(Qt)>k){if(W){var nt=ae+(Ht+1<ce?Ht:0),En=P.read(2*(ae+Ht-1));nt=(P.read(2*nt)-En)*D,Math.abs(Qt-nt)>1*E&&(W=!1)}W||(ot=bt+(Ae-=c.mc.En($,ot-be)),++Je,Ii=Ae!=0,wt.x=ot)}else Ve||c.ua.vG(qt,Ie,wt,Z)&&(Ve=!0);Ii&&de.write(2*Ht,ot),be=ot,qt.N(Ie),Ie.N(wt)}0<Je&&ee.Qc(1993),W=ee.Oa(0),ce=ee.Oa(ce-1),ee=c.h.ub(W,ce)<Z?a.pQ(ee,p,d,y,Ve):a.qQ(n,G,ee,p,d),N.add(ee,!1)}return d=p.Yd(0),l=M.S()/180,a.Lt(N,M,.1*d,!1),N=N!=(d=c.ti.clip(N,M,d,l,y)),n=n.He(),g=0,0<(_=d.He())&&0>n?g=1:0>=_&&0<n&&(_==0?(_=NaN,o.Tb()==2?_=o.ol().He():o.Tb()==1&&(_=o.Le().rF()),n>.99*_&&(g=-1)):g=-1),g!=0&&((o=new c.Ea(d.description)).vp(M),(o=c.Zl.local().W(o,l,y)).add(d,!1),N=!0,d=o),N&&(d=c.$l.local().W(d,p,!1,y)),d},a.qQ=function(n,o,l,p,d){var y=l.I(),g=l.Oa(0),_=l.Oa(y-1);d=(p=a.fv(p,d)).S(),g=c.mc.sign(_.x-g.x);var M=new c.l;l.yc(M);var $=p.ik();if(_=$-d,$+=d,0<=g){var E=Math.ceil((_-M.v)/d);for(E*=d;_>M.v+E;)E+=d;for(;_<M.C+E;)E-=d;var k=E;720<M.S()&&($=_+360*Math.ceil(M.S()/360))}else{for(E=Math.ceil(($-M.C)/d),E*=d;$<M.C+E;)E-=d;for(;$>M.v+E;)E+=d;k=E,720<M.S()&&(_=$-360*Math.ceil(M.S()/360))}E=g*d;var P=c.l.construct(M.v,M.G,M.C,M.H);P.move(k,0);var F=new c.Ed;F.ig(k,0),l.Pc(F),(M=new c.Ua(l.description)).add(l,!1),k=l.Oa(y-1),d=0;for(var D=M.Oa(0).x,V=0;0<g?P.C<$:P.v>_;)1024<=V&&(V=0),P.move(E,0),F.Lb=E,l.Pc(F),D+=E,p.v<=D&&p.C>=D&&(d=M.I()-1),l.Db(0,k),k=l.Oa(y-1),M.Fr(l,0,0,y-1,!1);return l=new c.Ea(M.description),y=0<n.Kr(o),l.add(M,!1),n=M.Oa(0),_=M.Oa(M.I()-1),o=l.ea()-1,(0>g?y:!y)?(g=c.h.construct(_.x,p.H),l.Ei(g),g=c.h.construct(p.ik(),p.H),l.Ei(g),p=c.h.construct(n.x,p.H)):(g=c.h.construct(_.x,p.G),l.Ei(g),g=c.h.construct(p.ik(),p.G),l.Ei(g),p=c.h.construct(n.x,p.G)),l.Ei(p),l.sG(0,o,0),l.fO(d),l},a.pQ=function(n,o,l,p,d){var y=new c.Ea(n.description);y.add(n,!1),y.yB(0,y.I()-1);var g=new c.l;y.yc(g);var _=(l=a.fv(o,l)).S(),M=Math.ceil((l.v-g.v)/_);for(M*=_;l.v>g.v+M;)M+=_;for(;l.v<g.C+M;)M-=_;if((M+=_)!=0){g.move(M,0);var $=new c.Ed;$.ig(M,0),y.Pc($)}if(l.v<=g.v&&l.C>g.C)return d&&(d=y.He(),o=(y=c.$l.local().W(y,o,!0,p)).He(),(o=c.mc.sign(d)!=c.mc.sign(o))&&y.jJ()),y;for((n=new c.Ea(n.description)).add(y,!1),d=d||g.S()>_-o.Yd(0);g.v<l.C;)g.move(_,0),($=new c.Ed).ig(_,0),y.Pc($),n.add(y,!1);return d&&(d=n.He(),n.$o(1),o=(n=c.$l.local().W(n,o,!0,p)).He(),(o=c.mc.sign(d)!=c.mc.sign(o))&&n.jJ()),n},a.KD=function(n,o,l,p,d){for(var y=o.vb(0),g=o.I(),_=!1,M=0;M<g;M++){var $=c.h.construct(y.gg(2*M),y.gg(2*M+1));if(1&d&&$.y>=l){_=!0;break}if(2&d&&$.y<=-l){_=!0;break}}if(!_)return!1;y=!1,n&&(y=o.Pn(0)),g=(n=new c.hd).Ib(o),_=n.Ob(g);var E=-1,k=!0,P=new c.h;P.Sc(),M=new c.Ta;for(var F=-1,D=n.Ya(_);D!=-1;D=n.V(D)){$=n.Oa(D);var V=1&d&&90<=$.y?1:0;if(V|=2&d&&$.y<=-l?2:0,0<E&&E!=V){if(P.x!=$.x){P.x=$.x,n.Xi(n.Na(D),M);var N=n.yj(_,D,M);n.mf(N,P)}if(y)for(F=F!=-1?n.V(F):n.Ya(_),N=n.Na(D);F!=N;)F=n.qd(F,!1);F=-1}0<V&&($.y=c.mc.En(p,$.y),n.mf(D,$),k||E==V||($.x!=P.x?(n.Xi(D,M),N=n.yj(_,D,M),n.Db(N,P.x,$.y),F=N):F=D)),E=V,P=$,k=!1}if(y){if(F!=-1)for(F=n.V(F);F!=-1;)F=n.qd(F,!1);l=n.Ya(_),n.hq(l,n.tj(_))||(n.Xi(l,M),n.yj(_,-1,M))}return n.Ke(g).copyTo(o),!0},a.Hz=function(n,o,l,p){var d=n;if(d.B()||l==C.DontClip)return d;var y=d.K();if(y==33)return d=[(p=d).D()],a.tG(d,1,o,l),d[0].isNaN()?p.Pa():p.Db(d[0]),n;var g=(n=o.tc()).bf(),_=90*g,M=180*g,$=360*g,E=o.Bi(),k=.5*g,P=new c.l;d.A(P);var F=o.Xr(),D=o.KQ(),V=F.K()==197;if(o=new c.l,F.A(o),l==C.PannableFold&&(l=n.Le().S(),o.v=E-.5*l,o.C=o.v+l),P.G<-_||P.H>_){if(new c.l().L(P.v-g,-_,P.C+g,_),(d=c.ti.Pu(d,o,n,NaN,0,p)).B())return d;d.A(P)}if(D&&(o.H<P.G||o.G>P.H))return d.Ja();if(P.S()>$&&(d=a.Jp(d,E-M,$,n,!0,0,!0,p)).A(P),(_=a.$N(P.v,P.C,o.v,o.C,$))!=0&&P.move(_,0),P.C>o.C||P.v<o.v){if(P.C>o.C)for(;P.v>=o.C;)P.move(-$,0),_-=$;for(;P.v<o.C-$;)P.move($,0),_+=$}if(l=c.ua.Ju(n,F),_!=0&&((g=new c.Ed).ig(_,0),d.Pc(g)),D){if(V&&o.contains(P))return d;for(D=[null,null],_=0;2>_;_++){if(V?g=c.ba.Ic(y)?c.ti.clip(d,o,l,k,p):c.ti.clip(d,o,l,0,p):(g=c.Zj.local().W(d,F,n,p))==F&&(g=c.ba.kg(g)),o.v<=P.v&&o.C>=P.C||o.v>=P.v&&o.C<=P.C)return g;D[_]=g,_==0&&(P.move(-$,0),(g=new c.Ed).ig(-$,0),d.Pc(g))}if(y==550)D[0].Gd(D[1],0,-1);else if(c.ba.Ic(y))D[0].add(D[1],!1);else{if(y!=33)throw c.i.ga("intersect_with_GCS_horizon: unexpected geometry type");D[0].B()&&(D[0]=D[1])}return D[0]}if(o.H<P.G||o.G>P.H)return d;for(y=0;!d.B()&&P.C>o.v;)y!=0&&((g=new c.Ed).ig(y,0),d.Pc(g)),c.fj.local().W(4,d,F,n,p)||F==(d=c.mp.local().W(d,F,n,p))&&(d=c.ba.kg(d)),y!=0&&((k=new c.Ed).ig(-y,0),d.Pc(k)),y-=$,P.move(-$,0);return d},a.tG=function(n,o,l,p){if(o!=0&&p!=C.DontClip)if(p==C.PannableFold){p=l.CR();for(var d=o,y=0;y<o;y++)(n[y].y>p.H||n[y].y<p.G)&&(n[y].Sc(),d--);d!=0&&a.cv(n,o,p.v,p.S())}else{var g=90*(p=l.bf()),_=180*p;for(p*=360,d=o,y=0;y<o;y++)(n[y].y>g||n[y].y<-g)&&(n[y].Sc(),d--);if(d!=0){(d=new c.l).bx(n,o),g=l.Xr();var M=l.kv();y=g.K()==197;var $=new c.l;if(g.A($),!M||!($.H<d.G||$.G>d.H))if(M)if(a.cv(n,o,$.ik()-_,p),d=o,y)for(y=0;y<o;y++)$.contains(n[y])||(n[y].Sc(),d--);else for(l=c.ua.Ju(l.tc(),g),y=0;y<o;y++)(_=c.jd.Zd(g,n[y],l)!=0)||(n[y].Sc(),d--);else for(a.cv(n,o,-_,p),d=o,l=c.ua.Ju(l.tc(),g),y=0;y<o;y++)(_=n[y]).isNaN()&&d--,M=a.oE(_.x,$.v,$.C,p),_.x+=M,(_=c.jd.Zd(g,_,l)!=0)&&(n[y].Sc(),d--)}}},a.Jp=function(n,o,l,p,d,y,g,_){var M=n.K(),$=o+l;if(M===33){var E=(p=d?n:n.Qf()).Ng();return(E<o||E>=$||g&&E==$)&&(E+=Math.ceil((o-E)/l)*l,E=c.P.Tk(E,o,$),p.YB(E)),p}if(n.B()||(E=new c.l,n.A(E),E.B()))return n;var k=new c.Oc;E.en(k);var P=new c.Oc;if(P.L(o,$),P.contains(k))return n;if(($=new c.l).L(E),M===550){for(_=(p=d?n:n.Qf()).vb(0),M=2*p.I(),$=!1,o=0;o<M;o+=2)((E=_.read(o))<P.pa||E>=P.wa||g&&E==P.wa)&&($=!0,E+=Math.ceil((P.pa-E)/l)*l,E=P.Kt(E),_.write(o,E));return $&&p.Qc(1993),p}if(M==197)return l=d?n:n.Qf(),E.Fa($),l.Zo(E),l;var F=.1*Math.max(E.da(),E.S());for($.X(0,F),g=n,P=p.Yd(0),n=c.Ih.local(),d=new c.Ed;;){var D=Math.floor((k.pa-o)/l),V=Math.ceil((k.wa-o)/l);if(!(3<V-D))break;D=Math.floor(.5*(V+D)),$.v=E.v-F,$.C=o+l*D;var N=c.ti.clip(g,$,P,y,_);$.v=$.C,$.C=E.C+F;var G=c.ti.clip(g,$,P,y,_);d.ig((D-V)*l,0),G.Pc(d),M==1736?g=n.W(N,G,p,null):(g=N).add(G,!1),g.A(E),E.en(k)}for($.v=o,$.C=o+l,(o=new c.l).L($),o.X(P,0),(o=Math.floor((E.v-$.v)/l)*l)!=0?($.move(o,0),d.ig(-o,0)):d.MB(),o=M==1607?new c.Ua(g.description):new c.Ea(g.description),y=new c.l,k=new c.l;E.C>$.v;)(F=c.ti.clip(g,$,P,0,_)).A(k),(M==1607?!F.B()&&(k.S()>P||k.da()>P):!F.B()&&(M!=1736||k.S()>P))&&(F.Pc(d),F.A(k),o.A(y),y.X(P,P),y.isIntersecting(k)&&M==1736?o=n.W(o,F,p,null):o.add(F,!1)),$.move(l,0),d.shift(-l,0);return o},a.cv=function(n,o,l,p){for(var d=l+p,y=0;y<o;y++){var g=n[y].x;l<=g&&g<d||!(g<l||g>d||g==d)||(g+=Math.ceil((l-g)/p)*p,g=c.P.Tk(g,l,d),n[y].x=g)}},a.Hn=function(n,o,l,p,d,y){if(!o.Xc())throw c.i.ga("fold_into_360_degree_range");if(n.B())return n;if(o.Tb()==2){l=o.rv();var g=o.qv()-l}else{var _=o.bf();g=360*_,l-=180*_}return a.Jp(n,l,g,o,p,d,!0,y)},a.lF=function(n,o,l,p){if(l.Tb()==2)p=l.rv(),l=l.qv()-p;else{var d=l.bf();l=360*d,p-=180*d}a.cv(n,o,p,l)},a.nj=function(n,o){var l=o.Le();if(n.K()==33){var p=n.kh();return l.G<=p&&p<=l.H?n:n.Ja()}p=new c.l,n.A(p);var d=new c.l;return d.L(l),d.v=p.v,d.C=p.C,d.X(.01*d.da(),0),l=c.ua.py(o,p),d.contains(p)?n:c.ti.clip(n,d,l,0,null)},a.kr=function(n,o,l){return n>o.C&&n-o.C<l?o.C:n<o.v&&o.v-n<l?o.v:n},a.BX=function(n,o,l,p){p.x=a.kr(n.x,o,l),p.y=n.y},a.AX=function(n,o,l,p){for(var d=0;d<o;d++)n[d].y<l.G||n[d].y>l.H?n[d].Sc():n[d].x=a.kr(n[d].x,l,p)},a.Lt=function(n,o,l,p){if(!n.B()){var d=n.K();if(!p||d!=1736)if(c.ba.zj(d)){p=n.vb(0),d=0;for(var y=n.I();d<y;d++){var g=p.read(2*d),_=a.kr(g,o,l);_!=g&&p.write(2*d,_)}n.Qc(1993)}else if(d==197)p=new c.l,n.A(p),p.v=a.kr(p.v,o,l),p.C=a.kr(p.C,o,l),n.Zo(p);else{if(d!=33)throw c.i.ga("internal error");n.YB(a.kr(n.Ng(),o,l))}}},a.pS=function(n,o,l,p){var d=new c.hd,y=d.Ib(n);return n=c.ua.Ju(o,n),a.ms(d,y,o,n,l,!0,p),d.Ke(y)},a.ms=function(n,o,l,p,d,y,g){if(!l.Xc())throw c.i.O("invalid call");var _=l.Le(),M=l.tc(),$=M.gh().getDatum().getSpheroid();M=M.Id().ci;var E=$.getFlattening();$=$.getAxis(),E*=2-E;var k=new c.Oc;_.en(k);var P=null,F=[[0,0],[0,0]];if(l.Tb()==2?(P=l.gh(),y?(F[0][0]=a.an(g,k),F[0][1]=_.Lp(),c.gj.projToGeog(P,1,F),_=F[0][0]*M):(F[0][0]=_.ik(),F[0][1]=g,c.gj.projToGeog(P,1,F),_=F[0][1]*M)):_=g*M,!y&&_!=0&&d!=u.GreatElliptic)throw c.i.ga("invalid argument");var D=new c.ha,V=[0],N=new c.h,G=new c.h,J=new c.h,W=[null,null],ee=new c.h,Z=new c.h,ae=new c.h,de=new c.h;for(o=n.Ob(o);o!=-1;o=n.Sb(o)){var ce=n.Ya(o);n.D(ce,ee);for(var Ae=!1,be=ce=n.V(ce);be!=-1;be=n.V(be)){if(be==ce){if(Ae)break;Ae=!0}if(n.D(be,Z),y&&(p<g-ee.x&&Z.x-g>p||p<g-Z.x&&ee.x-g>p)||!y&&(g!=0||p<-ee.y&&Z.y>p||p<-Z.y&&ee.y>p))do if(!(Math.abs(ee.x-Z.x)>=.5*k.S())){if(l.Tb()==2?(F[0][0]=a.an(ee.x,k),F[0][1]=ee.y,F[1][0]=a.an(Z.x,k),F[1][1]=Z.y,c.gj.projToGeogCenter(P,2,F,0),ae.x=F[0][0]*M,ae.y=F[0][1]*M,de.y=F[1][1]*M):(ae.x=ee.x*M,ae.y=ee.y*M,de.y=Z.y*M),de.x=2*(Z.x-ee.x)*Math.PI/k.S()+ae.x,y){if(G.x=_,G.y=a.Iz($,E,ae,de,_,d),isNaN(G.y))break;W[0]=G;var Je=1}else if(d==u.GreatElliptic){var Ve=[0,0];if((Je=c.Nx.Jz(E,ae,de,_,Ve))==0)break;G.x=Ve[0],G.y=_,W[0]=G,Je==2&&(J.x=Ve[1],J.y=_,W[1]=J)}else{if(G.x=a.Gz($,E,ae,de,d),isNaN(G.x))break;G.y=0,W[0]=G,Je=1}var Ie=-1;for(Ve=0;Ve<Je;Ve++){c.kb.xd($,E,ae.x,ae.y,de.x,de.y,D,null,null,d);var qt=D.u;c.kb.xd($,E,ae.x,ae.y,W[Ve].x,W[Ve].y,D,null,null,d);var Ii=D.u;if(l.Tb()==2?(F[0][0]=W[Ve].x/M,F[0][1]=W[Ve].y/M,c.gj.geogToProj(P,1,F),y?(N.y=F[0][1],N.x=g):(N.x=a.qs(F[0][0],ee.x,Z.x,k),N.y=g)):y?(N.x=g,N.y=W[Ve].y/M):(N.x=a.qs(W[Ve].x/M,ee.x,Z.x,k),N.y=g),V[0]=0<qt?c.P.Tk(Ii/qt,0,1):.5,V[0]==0||V[0]==1)break;Ie>V[0]||(Ie=n.Na(be),n.Wl(Ie,V,1),n.Db(n.V(Ie),N.x,N.y),Ie=V[0])}}while(0);ee.N(Z)}}},a.an=function(n,o){var l=o.wa-o.pa;return o.Kt(n-Math.floor((n-o.pa)/l)*l)},a.qs=function(n,o,l,p){var d=new c.Oc;for(d.L(o,l),l=p.S(),n=Math.floor((n-o)/l)*l+n,d=d.tf();Math.abs(n-d)>Math.abs(n+l-d);)n+=l;return n},a.Un=function(n,o,l){return n=c.sr.Ep(n),o=c.sr.mx(n,c.sr.Ep(o)),(l=c.sr.mx(n,c.sr.Ep(l)))==0||0<o&&0<l&&l<=o||0>o&&0>l&&l>=o},a.Iz=function(n,o,l,p,d,y){if(y==u.GreatElliptic)return c.Nx.NS(o,l,p,d);if(Math.abs(l.x-p.x)>=Math.PI||!a.Un(l.x,p.x,d))return NaN;if(l.x>p.x)var g=p;else g=l,l=p;p=new c.ha;var _=new c.ha,M=new c.ha;c.kb.xd(n,o,g.x,g.y,l.x,l.y,_,p,null,y);var $=_.u,E=0,k=1,P=new c.h;for(P.N(g);$*(k-E)>1e-12*n;){var F=.5*(E+k);if(c.kb.qj(n,o,g.x,g.y,$*F,p.u,_,M,y),P.x=_.u,P.y=M.u,P.x==d)break;if(a.Un(g.x,P.x,d))k=F;else{if(!a.Un(l.x,P.x,d))return NaN;E=F}}return P.y},a.Gz=function(n,o,l,p,d){if(d==u.GreatElliptic)return n=[0,0],c.Nx.Jz(o,l,p,0,n),n[0];if(l.y>p.y)var y=p;else y=l,l=p;if((p=new c.Oc).L(y.y,l.y),!p.contains(0)||Math.abs(y.x-l.x)>=Math.PI)return NaN;if(y.x==l.x)return y.x;var g=new c.ha,_=new c.ha,M=new c.ha;c.kb.xd(n,o,y.x,y.y,l.x,l.y,_,g,null,d);var $=_.u,E=0,k=1,P=new c.h;for(P.N(y);$*(k-E)>1e-12*n;){var F=.5*(E+k);if(c.kb.qj(n,o,y.x,y.y,$*F,g.u,_,M,d),P.x=_.u,P.y=M.u,p.L(y.y,P.y),P.y==0)break;if(p.contains(0))k=F;else{if(p.L(l.y,P.y),!p.contains(0))return NaN;E=F}}return P.x},a.RI=function(n,o,l,p){if(!n.ef.Xc())return!1;var d=new c.ee(o.description);if(d.Gd(o,0,-1),p=c.Gx.local().W(d,n,p),d=o.I(),l.Pa(),d!=p.I())return!1;var y=new c.l;o.A(y);var g=new c.l;if(p.A(g),y=y.S(),g=g.S(),y!=0&&g!=0){if(g/=y,n=n.$f.ih().S()/n.ef.ih().S(),1e-10<Math.abs(g/n-1))return!1}else if(y!=0||g!=0)return!1;for(l.add(o,!1),o=new c.h,n=0;n<d;n++)p.D(n,o),l.Db(n,o);return!0},a.lN=function(n,o){return(n%=360*o)>=180*o&&(n-=360*o),n},a.OI=function(n,o,l,p){if(l==C.Clip){var d=o.ol();d.K()==197?(l=new c.l,d.A(l),d=c.ua.py(o,l),n=c.ti.clip(n,l,d,5e4*o.rm(),p)):c.fj.local().W(1,d,n,o,p)||(n=c.Zj.local().W(n,d,o,p))==d&&(n=c.Xk.kg(n))}else o.Xc()&&(p=new c.l,n.yc(p),o.Le().contains(p)||(a.Lt(n,o.Le(),o.Yd(0),!0),l==C.PannableFold&&(n=a.nj(n,o)),n=a.Hn(n,o,0,!0,1e5*o.rm(),null)));return n},a.SD=function(n,o,l){var p=o.Yr();if(p==null)return n;var d=(o=o.tc()).Le().S(),y=new c.l;n.yc(y);var g=new c.Oc;y.en(g),y=p.Ha(),p=null;for(var _=new c.Ed;y.ab();)for(;y.Ia();){var M=y.ia(),$=M.Vg(0,0),E=new c.Oc;for(E.L($.pa,$.wa),$=0;E.wa>g.pa;)E.move(-d),--$;for(;E.pa<=g.wa;){if(E.isIntersecting(g)){p==null&&(p=new c.Ua);var k=c.zb.YO(M.bc(),M.xc());$!=0&&(_.ig($*d,0),k.Pc(_)),p.pc(k,!0)}E.move(d),++$}}return p!=null?(o=c.ua.bO(o,p),o=c.ua.Gr(o),c.bu.gP(n,p,o,l)):n},a.$N=function(n,o,l,p,d){return n>=l&&o<=p?0:a.oE(.5*(o+n),l,p,d)},a.oE=function(n,o,l,p){return c.mc.round((.5*(l+o)-n)/p)*p},a.QQ=function(n,o,l,p,d,y,g,_){var M=a.fv(p,d),$=M.S(),E=$/360,k=a.kE*E,P=n.vb(0),F=o.Xc(),D=F?$/o.Le().S():0;o=n.Ja();for(var V=0,N=l.ea();V<N;++V){var G=F,J=new c.Ua(l.description);J.addPath(l,V,!0);var W=l.ec(V);g!=0&&(W=a.KD(W,J,M.H-_,M.H,g))&&(G=!1);var ee=-1;W=J.I();var Z=!1;G&&(ee=n.Ca(V),Z=n.ec(V));var ae=J.vb(0),de=0,ce=ae.read(0),Ae=0,be=3*p.Yd(0),Je=!1,Ve=new c.h;Ve.Sc();var Ie=new c.h;Ie.Sc();for(var qt=!1,Ii=1;Ii<W;++Ii){var Ht=c.h.construct(ae.gg(2*Ii),ae.gg(2*Ii+1)),wt=Ht.x,bt=wt+de,ot=bt-ce;if(Ht.x=bt,Math.abs(ot)>k){if(G){var Qt=ee+Ii-1,nt=ee;(!Z||Ii+1<W)&&(nt+=Ii),Qt=P.read(2*Qt),nt=(P.read(2*nt)-Qt)*D,Math.abs(ot-nt)>1*E&&(F=!1)}G||(bt=wt+(de-=c.mc.En($,bt-ce)),++Ae,qt=de!=0,Ht.x=bt)}else Je||c.ua.vG(Ve,Ie,Ht,be)&&(Je=!0);qt&&ae.write(2*Ii,bt),ce=bt,Ve.N(Ie),Ie.N(Ht)}Ae!=0&&J.Qc(1993),G=J.Oa(0),W=J.Oa(W-1),c.h.ub(G,W),J=a.rQ(J,p,isNaN(d)?0:d,y),o.add(J,!1)}return n=p.Yd(0),l=M.S()/180,a.Lt(o,M,.1*n,!1),c.ti.clip(o,M,n,l,y)},a.rQ=function(n,o,l,p){return a.Hn(n,o,l,!0,0,p)},a.JS=function(n,o,l,p){var d=n.K();if(d==1736)for(o=o!=null?o.Yd(0):0,d=0;d<p;d++)c.jd.Zd(n,l[d],o)!=1&&l[d].Sc();else{if(d!=197)throw c.i.O();for(d=0;d<p;d++)n.ZO(l[d])||l[d].Sc()}},a.bl=function(n,o,l,p){if(32>l)for(var d=new c.Ta,y=0;y<l;y++)d.Db(o[y]),n.bl(d,p).D(o[y]);else{var g=new c.ee;for(g.se(3),g.CD(o,l),d=g.vb(3),y=0;y<l;y++)d.write(y,y);for(y=n.bl(g,p),n=y.vb(0),d=y.vb(3),p=c.h.construct(NaN,NaN),g=0;g<l;g++)o[g]=p;for(l=y.I(),y=0;y<l;y++)p=d.read(y),n.uc(2*y,o[p])}},a.al=function(n,o,l,p){if(32>l)for(var d=new c.Ta,y=0;y<l;y++)d.Db(o[y]),n.al(d,p).D(o[y]);else{var g=new c.ee;for(g.se(3),g.CD(o,l),d=g.vb(3),y=0;y<l;y++)d.write(y,y);for(y=n.al(g,p),n=y.vb(0),d=y.vb(3),p=c.h.construct(NaN,NaN),g=0;g<l;g++)o[g]=p;for(l=y.I(),y=0;y<l;y++)p=d.read(y),n.uc(2*y,o[p])}},a.kE=210,a}()}(U||(U={})),function(c){var C;(C=c.PL||(c.PL={}))[C.rightSide=1]="rightSide";var w=function(){function u(a,n,o){this.Ds=new c.h,a===void 0?this.Ko=-1:(this.Ds.N(a),this.Ko=n,this.La=o,this.pw=0)}return u.prototype.RJ=function(a){this.pw=a?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Ko},u.prototype.az=function(){if(this.B())throw c.i.ga("invalid call");return new c.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw c.i.ga("invalid call");return this.Ko},u.prototype.cz=function(){if(this.B())throw c.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(a,n,o,l){this.Ds.x=a,this.Ds.y=n,this.Ko=o,this.La=l},u}();c.bm=w}(U||(U={})),function(c){var C=function(){function u(){}return u.prototype.Wo=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,a.yc(this.Gk),this.Gk.X(n,n),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=c.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(a),this.Gk.X(n,n),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var a=null,n=null,o=null,l=null;this.xs&&(a=new c.h,n=new c.h,o=new c.l);for(var p=!1;!p;){for(;this.vk!=-1;){var d=this.Gb.Xy(this.Gb.hv(this.vk));if(d.isIntersecting(this.Gk)){if(!this.xs){p=!0;break}if(a.N(this.OH),n.N(this.NH),o.L(d),o.X(this.ra,this.ra),0<o.uy(a,n)){p=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){d=this.vh.Gc();var y=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new c.l,l[1]=new c.l,l[2]=new c.l,l[3]=new c.l),w.zJ(y,l),this.vh.Jf(),--this.Ki.length,y=0;4>y;y++){var g=this.Gb.Np(d,y);if(g!=-1&&0<this.Gb.RR(g)&&l[y].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),n.N(this.NH),o.L(l[y]),o.X(this.ra,this.ra),0<o.uy(a,n)){var _=new c.l;_.L(l[y]),this.vh.add(g),this.Ki.push(_)}}else(_=new c.l).L(l[y]),this.vh.add(g),this.Ki.push(_)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},u.XO=function(a,n,o){var l=new u;return l.Gb=a,l.Gk=new c.l,l.vh=new c.ja(0),l.Ki=[],l.Wo(n,o),l},u.WO=function(a,n,o){var l=new u;return l.Gb=a,l.Gk=new c.l,l.vh=new c.ja(0),l.Ki=[],l.Zi(n,o),l},u.VO=function(a){var n=new u;return n.Gb=a,n.Gk=new c.l,n.vh=new c.ja(0),n.Ki=[],n},u}();c.CY=C;var w=function(){function u(a,n){this.jf=new c.ad(11),this.ai=new c.ad(5),this.ys=[],this.iw=new c.ja(0),this.Da=new c.l,this.Pk(a,n)}return u.prototype.reset=function(a,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(a,n)},u.prototype.xj=function(a,n){return this.Bv(a,n,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(a,n,o){o=o==-1?this.kf:this.RF(o);var l=this.da(o),p=this.jR(o);return this.Bv(a,n,l,p,o,!1,-1)},u.prototype.ka=function(a){return this.eR(a)},u.prototype.BF=function(a){return this.Xy(this.hv(a))},u.prototype.da=function(a){return this.lv(a)},u.prototype.jR=function(a){var n=new c.l;n.L(this.Da);var o=this.lv(a);a=this.LF(a);for(var l=0;l<2*o;l+=2){var p=c.P.truncate(3&a>>l);p==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):p==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(p==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},u.prototype.RR=function(a){return this.vz(a)},u.prototype.qR=function(a,n){return C.XO(this,a,n)},u.prototype.HF=function(a,n){return C.WO(this,a,n)},u.prototype.getIterator=function(){return C.VO(this)},u.prototype.Pk=function(a,n){if(0>n||32<2*n)throw c.i.O("invalid height");this.wT=n,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},u.prototype.Bv=function(a,n,o,l,p,d,y){if(!l.contains(n))return o==0?-1:this.Bv(a,n,0,this.Da,this.kf,d,y);if(!d)for(var g=p;g!=-1;g=this.DR(g))this.jx(g,this.vz(g)+1);(g=new c.l).L(l),l=p;var _=[];for(_[0]=new c.l,_[1]=new c.l,_[2]=new c.l,_[3]=new c.l;o<this.wT&&this.dO(l);o++){u.zJ(g,_);for(var M=!1,$=0;4>$;$++)if(_[$].contains(n)){M=!0;var E=this.Np(l,$);E==-1&&(E=this.mP(l,$)),this.jx(E,this.vz(E)+1),l=E,g.L(_[$]);break}if(!M)break}return this.nS(a,n,o,g,l,d,p,y)},u.prototype.nS=function(a,n,o,l,p,d,y,g){var _=this.IF(p);if(d){if(p==y)return g;this.NP(g),d=g}else d=this.oP(),this.IB(d,a),this.FW(this.hv(d),n);return this.hX(d,p),_!=-1?(this.hx(d,_),this.ex(_,d)):this.BJ(p,d),this.NB(p,d),this.dx(p,this.nv(p)+1),this.cO(p)&&this.HQ(o,l,p),d},u.prototype.NP=function(a){var n=this.RF(a),o=this.IF(n),l=this.JR(a),p=this.pv(a);this.Wr(n)==a?(p!=-1?this.hx(p,-1):this.NB(n,-1),this.BJ(n,p)):o==a?(this.ex(l,-1),this.NB(n,l)):(this.hx(p,l),this.ex(l,p)),this.hx(a,-1),this.ex(a,-1),this.dx(n,this.nv(n)-1)},u.zJ=function(a,n){var o=.5*(a.v+a.C),l=.5*(a.G+a.H);n[0].L(o,l,a.C,a.H),n[1].L(a.v,l,o,a.H),n[2].L(a.v,a.G,o,l),n[3].L(o,a.G,a.C,l)},u.prototype.cO=function(a){return this.nv(a)==8&&!this.bG(a)},u.prototype.HQ=function(a,n,o){var l=this.Wr(o);do{var p=this.hv(l),d=this.ai.U(l,0);p=this.Xy(p),this.Bv(d,p,a,n,o,!0,l),l=d=this.pv(l)}while(l!=-1)},u.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)},u.prototype.bG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},u.prototype.mP=function(a,n){var o=this.jf.De();return this.JW(a,n,o),this.jx(o,0),this.dx(o,0),this.Rk(o,a),this.FJ(o,this.lv(a)+1),this.IJ(o,n<<2*this.lv(a)|this.LF(a)),o},u.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new c.l);return this.GW(a,n),a},u.prototype.Np=function(a,n){return this.jf.U(a,n)},u.prototype.JW=function(a,n,o){this.jf.T(a,n,o)},u.prototype.Wr=function(a){return this.jf.U(a,4)},u.prototype.BJ=function(a,n){this.jf.T(a,4,n)},u.prototype.IF=function(a){return this.jf.U(a,5)},u.prototype.NB=function(a,n){this.jf.T(a,5,n)},u.prototype.LF=function(a){return this.jf.U(a,6)},u.prototype.IJ=function(a,n){this.jf.T(a,6,n)},u.prototype.nv=function(a){return this.jf.U(a,7)},u.prototype.vz=function(a){return this.jf.U(a,8)},u.prototype.dx=function(a,n){this.jf.T(a,7,n)},u.prototype.jx=function(a,n){this.jf.T(a,8,n)},u.prototype.DR=function(a){return this.jf.U(a,9)},u.prototype.Rk=function(a,n){this.jf.T(a,9,n)},u.prototype.lv=function(a){return this.jf.U(a,10)},u.prototype.FJ=function(a,n){this.jf.T(a,10,n)},u.prototype.eR=function(a){return this.ai.U(a,0)},u.prototype.IB=function(a,n){this.ai.T(a,0,n)},u.prototype.JR=function(a){return this.ai.U(a,1)},u.prototype.pv=function(a){return this.ai.U(a,2)},u.prototype.hx=function(a,n){this.ai.T(a,1,n)},u.prototype.ex=function(a,n){this.ai.T(a,2,n)},u.prototype.RF=function(a){return this.ai.U(a,3)},u.prototype.hX=function(a,n){this.ai.T(a,3,n)},u.prototype.hv=function(a){return this.ai.U(a,4)},u.prototype.GW=function(a,n){this.ai.T(a,4,n)},u.prototype.Xy=function(a){return this.ys[a]},u.prototype.FW=function(a,n){this.ys[a].L(n)},u}();c.fu=w}(U||(U={})),function(c){var C;(C=c.WK||(c.WK={}))[C.Outside=0]="Outside",C[C.Inside=1]="Inside",C[C.Border=2]="Border";var w=function(){function a(n,o){this.KT=o,this.Xh=n}return a.prototype.ax=function(n,o){this.dH!=o&&n.flush(),this.dH=o},a.prototype.bF=function(n,o){for(var l=0;l<o;)for(var p=n[l++],d=n[l++],y=n[l++]*this.KT;p<d;p++)this.Xh[y+(p>>4)]|=this.dH<<2*(15&p)},a}();c.DY=w;var u=function(){function a(n,o,l){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(n,o,l)}return a.create=function(n,o,l){if(!a.uE(n))throw c.i.O();return a.rP(n,o,l)},a.kW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw c.i.ga("Internal Error")}return n},a.uE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},a.prototype.mQ=function(n,o){o=o.Ha();for(var l=new c.h,p=new c.h;o.ab();)for(;o.Ia();){var d=o.ia();if(d.K()!=322)throw c.i.ga("Internal Error");n.Gh(d.bc(),l),n.Gh(d.xc(),p),this.Ti.fy(l.x,l.y,p.x,p.y)}this.Ti.dJ(c.Ox.Bx)},a.prototype.nQ=function(){throw c.i.ga("Internal Error")},a.prototype.My=function(n,o){for(var l=1;4>l;l++)n.fy(o[l-1].x,o[l-1].y,o[l].x,o[l].y);n.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.dJ(c.Ox.Bx)},a.prototype.mK=function(n,o,l){for(var p=[null,null,null,null],d=0;d<p.length;d++)p[d]=new c.h;o=o.Ha(),l=this.Lk.$X(l)+1.5,d=new c.h;for(var y=new c.h,g=new c.h,_=new c.h,M=new c.h,$=new c.l,E=new c.h;o.ab();){var k=!1,P=!0;for(E.na(0,0);o.Ia();){var F=o.ia();if(_.x=F.ta,_.y=F.oa,M.x=F.qa,M.y=F.ma,$.Pa(),$.$b(_.x,_.y),$.Nk(M.x,M.y),this.xl.CG($)){this.Lk.Gh(M,M),P?(this.Lk.Gh(_,_),E.N(_),P=!1):_.N(E),d.vc(M,_);var D=.5>(F=d.length());F==0?d.na(1,0):(D||E.N(M),d.scale(l/F),y.na(-d.y,d.x),g.na(d.y,-d.x),_.sub(d),M.add(d),p[0].add(_,y),p[1].add(_,g),p[2].add(M,g),p[3].add(M,y),D?k=!0:this.My(n,p))}else k&&(this.My(n,p),k=!1),P=!0}k&&this.My(n,p)}},a.prototype.nC=function(n){return c.P.truncate(n*this.lH+this.WH)},a.prototype.oC=function(n){return c.P.truncate(n*this.Gs+this.YH)},a.rP=function(n,o,l){return new a(n,o,l)},a.prototype.Az=function(n,o,l){this.Hf=Math.max(c.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=c.P.truncate((2*this.Hf+31)/32),this.xl=new c.l,this.Kk=o,l=0;for(var p=this.Hf,d=this.Wm;8<=p;)l+=p*d,p=c.P.truncate(p/2),d=c.P.truncate((2*p+31)/32);this.Xh=c.P.mg(l,0),this.Ti=new c.Ox,l=new w(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,l),n.A(this.xl),this.xl.X(o,o),p=new c.l;var y=o*(d=c.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=d.da(),p.L(this.xl.tf(),Math.max(y,this.xl.S()),Math.max(o,this.xl.da())),this.NA=this.Kk,this.Lk=new c.Ed,this.Lk.kS(p,d),new c.Ed,n.K()){case 550:l.ax(this.Ti,2),this.nQ();break;case 1607:l.ax(this.Ti,2),this.mK(this.Ti,n,this.NA);break;case 1736:l.ax(this.Ti,1),this.mQ(this.Lk,n),l.ax(this.Ti,2),this.mK(this.Ti,n,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},a.prototype.SN=function(){this.Ti.flush();for(var n=0,o=this.Hf*this.Wm,l=this.Hf,p=c.P.truncate(this.Hf/2),d=this.Wm,y=c.P.truncate((2*p+31)/32);8<l;){for(l=0;l<p;l++)for(var g=2*l,_=2*l+1,M=0;M<p;M++){var $=2*M,E=2*M+1,k=$>>4;$=2*(15&$);var P=E>>4;E=2*(15&E);var F=this.Xh[n+d*g+k]>>$&3;F|=this.Xh[n+d*g+P]>>E&3,F|=this.Xh[n+d*_+k]>>$&3,F|=this.Xh[n+d*_+P]>>E&3,this.Xh[o+y*l+(M>>4)]|=F<<2*(15&M)}l=p,d=y,n=o,p=c.P.truncate(l/2),y=c.P.truncate((2*p+31)/32),o=n+d*l}},a.prototype.Uo=function(n,o){return this.xl.contains(n,o)?(n=this.nC(n),o=this.oC(o),0>n||n>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(n>>4)]>>2*(15&n)&3)==0?0:o==1?1:2):0},a.prototype.To=function(n){if(!n.Fa(this.xl))return 0;var o=this.nC(n.v),l=this.nC(n.C),p=this.oC(n.G);if(n=this.oC(n.H),0>o&&(o=0),0>p&&(p=0),l>=this.Hf&&(l=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),o>l||p>n)return 0;for(var d=Math.max(l-o,1)*Math.max(n-p,1),y=0,g=this.Wm,_=this.Hf,M=0;;){if(32>d||16>_){for(d=p;d<=n;d++)for(var $=o;$<=l;$++)if(1<(M=this.Xh[y+g*d+($>>4)]>>2*(15&$)&3))return 2;if(M==0)return 0;if(M==1)return 1}y+=g*_,_=c.P.truncate(_/2),g=c.P.truncate((2*_+31)/32),o=c.P.truncate(o/2),p=c.P.truncate(p/2),l=c.P.truncate(l/2),n=c.P.truncate(n/2),d=Math.max(l-o,1)*Math.max(n-p,1)}},a.prototype.MR=function(){return this.Hf*this.Wm},a}();c.Mx=u}(U||(U={})),function(c){var C;(C=c.QL||(c.QL={}))[C.contains=1]="contains",C[C.within=2]="within",C[C.equals=3]="equals",C[C.disjoint=4]="disjoint",C[C.touches=8]="touches",C[C.crosses=16]="crosses",C[C.overlaps=32]="overlaps",C[C.unknown=0]="unknown",C[C.intersects=1073741824]="intersects";var w=function(){function a(){}return a.construct=function(n,o,l,p,d,y,g,_){var M=new a;return M.rw=n,M.Om=o,M.Mj=l,M.Ui=p,M.wH=d,M.OY=y,M.PY=g,M.QY=_,M},a}();c.Xt=function(){function a(){}return a.xD=function(n,o,l){if(a.ry(n)){var p=c.ua.mj(o,n,!1);o=!1,c.Wk.xE(n)&&(o=o||n.nu(p,l)),(p=n.K())!=1736&&p!=1607||!c.Wk.vE(n)||l==0||(o=o||n.hj(l)),p!=1736&&p!=1607||!c.Wk.wE(n)||l==0||o||n.cM()}},a.ry=function(n){return c.Wk.xE(n)||c.Wk.vE(n)||c.Wk.wE(n)},a}();var u=function(){function a(){this.th=[]}return a.uB=function(n,o,l,p,d){var y=n.K(),g=o.K();if(y==197){if(g==197)return a.oW(n,o,l,p);if(g==33)return p==2?p=1:p==1&&(p=2),a.cJ(o,n,l,p)}else if(y==33){if(g==197)return a.cJ(n,o,l,p);if(g==33)return a.qW(n,o,l,p)}if(n.B()||o.B())return p==4;var _=new c.l;n.A(_);var M=new c.l;o.A(M);var $=new c.l;if($.L(_),$.$b(M),l=c.ua.Xd(l,$,!1),a.fk(_,M,l))return p==4;switch(_=!1,c.Xk.zd(y)&&((y=new c.Ua(n.description)).pc(n,!0),n=y,y=1607),c.Xk.zd(g)&&((g=new c.Ua(o.description)).pc(o,!0),o=g,g=1607),y!=197&&g!=197?(n.Eb()<o.Eb()||y==33&&g==550)&&(p==2?p=1:p==1&&(p=2)):y!=1736&&g!=197&&(p==2?p=1:p==1&&(p=2)),y){case 1736:switch(g){case 1736:_=a.st(n,o,l,p,d);break;case 1607:_=a.bn(n,o,l,p,d);break;case 33:_=a.rt(n,o,l,p);break;case 550:_=a.qt(n,o,l,p,d);break;case 197:_=a.BI(n,o,l,p,d)}break;case 1607:switch(g){case 1736:_=a.bn(o,n,l,p,d);break;case 1607:_=a.bB(n,o,l,p,d);break;case 33:_=a.ut(n,o,l,p,d);break;case 550:_=a.tt(n,o,l,p,d);break;case 197:_=a.HI(n,o,l,p)}break;case 33:switch(g){case 1736:_=a.rt(o,n,l,p);break;case 1607:_=a.ut(o,n,l,p,d);break;case 550:_=a.mt(o,n,l,p)}break;case 550:switch(g){case 1736:_=a.qt(o,n,l,p,d);break;case 1607:_=a.tt(o,n,l,p,d);break;case 550:_=a.UA(n,o,l,p,d);break;case 33:_=a.mt(n,o,l,p);break;case 197:_=a.cI(n,o,l,p)}break;case 197:switch(g){case 1736:_=a.BI(o,n,l,p,d);break;case 1607:_=a.HI(o,n,l,p);break;case 550:_=a.cI(o,n,l,p)}}return _},a.oW=function(n,o,l,p){if(n.B()||o.B())return p==4;var d=new c.l,y=new c.l,g=new c.l;switch(n.A(d),o.A(y),g.L(d),g.$b(y),n=c.ua.Xd(l,g,!1),p){case 4:return a.fk(d,y,n);case 2:return a.eF(y,d,n);case 1:return a.eF(d,y,n);case 3:return a.gk(d,y,n);case 8:return a.YP(d,y,n);case 32:return a.XP(d,y,n);case 16:return a.WP(d,y,n)}return!1},a.cJ=function(n,o,l,p){if(n.B()||o.B())return p==4;n=n.D();var d=new c.l,y=new c.l;switch(o.A(d),y.L(n),y.$b(d),o=c.ua.Xd(l,y,!1),p){case 4:return a.Tw(n,d,o);case 2:return a.$A(n,d,o);case 1:return a.MU(n,d,o);case 3:return a.qI(n,d,o);case 8:return a.ZA(n,d,o)}return!1},a.qW=function(n,o,l,p){if(n.B()||o.B())return p==4;n=n.D(),o=o.D();var d=new c.l;switch(d.L(n),d.$b(o),l=c.ua.Xd(l,d,!1),p){case 4:return a.NU(n,o,l);case 2:return a.pI(o,n,l);case 1:return a.pI(n,o,l);case 3:return a.rI(n,o,l)}return!1},a.st=function(n,o,l,p,d){switch(p){case 4:return a.fV(n,o,l);case 2:return a.Uw(o,n,l,d);case 1:return a.Uw(n,o,l,d);case 3:return a.iV(n,o,l);case 8:return a.qV(n,o,l);case 32:return a.lV(n,o,l,d)}return!1},a.bn=function(n,o,l,p,d){switch(p){case 4:return a.gV(n,o,l);case 1:return a.aB(n,o,l,d);case 8:return a.rV(n,o,l,d);case 16:return a.bV(n,o,l)}return!1},a.rt=function(n,o,l,p){switch(p){case 4:return a.eV(n,o,l);case 1:return a.ZU(n,o,l);case 8:return a.pV(n,o,l)}return!1},a.qt=function(n,o,l,p){switch(p){case 4:return a.dV(n,o,l);case 1:return a.YU(n,o,l);case 8:return a.oV(n,o,l);case 16:return a.aV(n,o,l)}return!1},a.BI=function(n,o,l,p,d){if(a.cV(n,o,l))return p==4;if(p==4)return!1;switch(p){case 2:return a.sV(n,o,l);case 1:return a.XU(n,o,l);case 3:return a.hV(n,o,l);case 8:return a.nV(n,o,l,d);case 32:return a.kV(n,o,l,d);case 16:return a.$U(n,o,l,d)}return!1},a.bB=function(n,o,l,p){switch(p){case 4:return a.BV(n,o,l);case 2:return a.FI(o,n,l);case 1:return a.FI(n,o,l);case 3:return a.DV(n,o,l);case 8:return a.II(n,o,l);case 32:return a.HV(n,o,l);case 16:return a.GI(n,o,l)}return!1},a.ut=function(n,o,l,p){switch(p){case 4:return a.AV(n,o,l);case 1:return a.vV(n,o,l);case 8:return a.LV(n,o,l)}return!1},a.tt=function(n,o,l,p){switch(p){case 4:return a.zV(n,o,l);case 1:return a.uV(n,o,l);case 8:return a.KV(n,o,l);case 16:return a.xV(n,o,l)}return!1},a.HI=function(n,o,l,p){if(a.yV(n,o,l))return p==4;if(p==4)return!1;switch(p){case 2:return a.MV(n,o,l);case 1:return a.tV(n,o,l);case 3:return a.CV(n,o,l);case 8:return a.JV(n,o,l);case 32:return a.GV(n,o,l);case 16:return a.wV(n,o,l)}return!1},a.UA=function(n,o,l,p){switch(p){case 4:return a.bU(n,o,l);case 2:return a.$H(o,n,l);case 1:return a.$H(n,o,l);case 3:return a.dU(n,o,l);case 32:return a.jU(n,o,l)}return!1},a.mt=function(n,o,l,p){switch(p){case 4:return a.aI(n,o,l);case 2:return a.nU(n,o,l);case 1:return a.ZT(n,o,l);case 3:return a.Pw(n,o,l)}return!1},a.cI=function(n,o,l,p){switch(p){case 4:return a.aU(n,o,l);case 2:return a.mU(n,o,l);case 1:return a.YT(n,o,l);case 3:return a.cU(n,o,l);case 8:return a.lU(n,o,l);case 16:return a.$T(n,o,l)}return!1},a.iV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.gk(p,d,l)&&(p=a.rc(n,o,!1))!=4&&p!=1&&p!=2&&(!!a.ZH(n,o,l)||(p=n.Rb(),d=o.Rb(),!(Math.abs(p-d)>4*Math.max(n.I(),o.I())*l)&&a.Rz(n,o,l,!0)))},a.fV=function(n,o,l){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.zI(n,o,l)},a.qV=function(n,o,l){var p=a.rc(n,o,!1);return p!=4&&p!=1&&p!=2&&a.DI(n,o,l,null)},a.lV=function(n,o,l,p){var d=a.rc(n,o,!1);return d!=4&&d!=1&&d!=2&&a.AI(n,o,l,p)},a.Uw=function(n,o,l,p){var d=new c.l,y=new c.l;return n.A(d),o.A(y),!!a.Ac(d,y,l)&&(d=a.rc(n,o,!1))!=4&&d!=2&&(d==1||a.wI(n,o,l,p))},a.gV=function(n,o,l){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=1073741824&&a.zI(n,o,l)},a.rV=function(n,o,l,p){var d=a.rc(n,o,!1);return d!=4&&d!=1&&a.EI(n,o,l,p)},a.bV=function(n,o,l){var p=a.rc(n,o,!1);return p!=4&&p!=1&&a.yI(n,o,l,null)},a.aB=function(n,o,l,p){var d=new c.l,y=new c.l;return n.A(d),o.A(y),!!a.Ac(d,y,l)&&(d=a.rc(n,o,!1))!=4&&(d==1||a.xI(n,o,l,p))},a.eV=function(n,o,l){return c.jd.FG(n,o,l)==0},a.pV=function(n,o,l){return o=o.D(),a.CI(n,o,l)},a.ZU=function(n,o,l){return o=o.D(),a.vI(n,o,l)},a.dV=function(n,o,l){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1)return!1;p=new c.l,n.A(p),p.X(l,l);for(var d=new c.h,y=0;y<o.I();y++)if(o.D(y,d),p.contains(d)){var g=c.jd.Zd(n,d,l);if(g==1||g==2)return!1}return!0},a.oV=function(n,o,l){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;p=new c.l,n.A(p),p.X(l,l);for(var d=!1,y=n,g=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(p.contains(M)){if((M=c.jd.Zd(y,M,l))==2)d=!0;else if(M==1)return!1}g||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?y=n:(y=new c.Ea,n.copyTo(y),y.hj(1)),g=!0)}return!!d},a.aV=function(n,o,l){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;var d=new c.l;p=new c.l;var y=new c.l;n.A(d),o.A(y),p.L(d),p.X(l,l),y=d=!1;for(var g=n,_=!1,M=0;M<o.I();M++){var $=o.Oa(M);if(p.contains($)?($=c.jd.Zd(g,$,l))==0?y=!0:$==1&&(d=!0):y=!0,d&&y)return!0;_||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new c.Ea,n.copyTo(g),g.hj(1)),_=!0)}return!1},a.YU=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!this.Ac(p,d,l)||(d=this.rc(n,o,!1))==4)return!1;if(d==1)return!0;d=!1;for(var y=n,g=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(!p.contains(M))return!1;if((M=c.jd.Zd(y,M,l))==1)d=!0;else if(M==0)return!1;g||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?y=n:(y=new c.Ea,n.copyTo(y),y.hj(1)),g=!0)}return d},a.hV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.gk(p,d,l)&&((p=new c.Ea).bd(o,!1),a.Rz(n,p,l,!0))},a.cV=function(n,o,l){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var d=new c.l;if(p=new c.l,n.A(d),o.A(p),a.Ac(p,d,l)||(d=new c.h,p.fn(d),(o=c.jd.Zd(n,d,l))!=0)||(p.VI(d),(o=c.jd.Zd(n,d,l))!=0)||(p.gn(d),(o=c.jd.Zd(n,d,l))!=0)||(p.YI(d),(o=c.jd.Zd(n,d,l))!=0))return!1;o=n.vb(0),(d=new c.l).L(p),d.X(l,l);for(var y=0,g=n.I();y<g;y++){var _=o.read(2*y),M=o.read(2*y+1);if(d.contains(_,M))return!1}return!a.NG(n,p,l)},a.nV=function(n,o,l,p){var d=a.rc(n,o,!1);if(d==4||d==1||d==2)return!1;d=new c.l;var y=new c.l;return n.A(d),o.A(y),!a.Ac(y,d,l)&&(y.S()<=l&&y.da()<=l?(o=o.Kp(),a.CI(n,o,l)):y.S()<=l||y.da()<=l?(d=new c.Ua,y=new c.Ta,o.If(0,y),d.nf(y),o.If(2,y),d.lineTo(y),a.EI(n,d,l,p)):((d=new c.Ea).bd(o,!1),a.DI(n,d,l,p)))},a.kV=function(n,o,l,p){var d=a.rc(n,o,!1);if(d==4||d==1||d==2)return!1;d=new c.l;var y=new c.l;return n.A(d),o.A(y),!(a.Ac(y,d,l)||y.S()<=l||y.da()<=l)&&((d=new c.Ea).bd(o,!1),a.AI(n,d,l,p))},a.sV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),a.Ac(d,p,l)},a.XU=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.Ac(p,d,l)&&(p=a.rc(n,o,!1))!=4&&p!=2&&(p==1||(d.S()<=l&&d.da()<=l?(o=o.Kp(),a.vI(n,o,l)):d.S()<=l||d.da()<=l?(d=new c.Ua,p=new c.Ta,o.If(0,p),d.nf(p),o.If(2,p),d.lineTo(p),a.xI(n,d,l,null)):((d=new c.Ea).bd(o,!1),a.wI(n,d,l,null))))},a.$U=function(n,o,l,p){var d=new c.l,y=new c.l;return n.A(d),o.A(y),!(a.Ac(y,d,l)||y.da()>l&&y.S()>l||y.da()<=l&&y.S()<=l)&&(d=new c.Ua,y=new c.Ta,o.If(0,y),d.nf(y),o.If(2,y),d.lineTo(y),a.yI(n,d,l,p))},a.DV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.gk(p,d,l)||a.rc(n,o,!1)==4)&&(!!a.ZH(n,o,l)||a.Rz(n,o,l,!1))},a.BV=function(n,o,l){return this.rc(n,o,!1)==4||!!new c.am(n,o,l,!0).next()&&!this.OG(n,o,l)},a.II=function(n,o,l){if(a.rc(n,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(n,o,l,p)!=0)return!1;for(var d=new c.ee,y=0;y<p.size;y+=2){var g=p.read(y),_=p.read(y+1);d.Du(g,_)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),a.Ow(n,d,l)},a.GI=function(n,o,l){if(a.rc(n,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(n,o,l,p)!=0)return!1;for(var d=new c.ee,y=0;y<p.size;y+=2){var g=p.read(y),_=p.read(y+1);d.Du(g,_)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),!a.Ow(n,d,l)},a.HV=function(n,o,l){return a.rc(n,o,!1)!=4&&a.QG(n,o,l)},a.FI=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||a.rc(n,o,!1)==4)&&a.Am(o,n,l,!1)},a.AV=function(n,o,l){return a.rc(n,o,!1)==4||(o=o.D(),!a.Tz(n,o,l))},a.LV=function(n,o,l){return a.rc(n,o,!1)!=4&&(o=o.D(),a.Uz(n,o,l))},a.vV=function(n,o,l){return a.rc(n,o,!1)!=4&&(o=o.D(),a.MG(n,o,l))},a.zV=function(n,o,l){return a.rc(n,o,!1)==4||!a.PG(n,o,l,!1)},a.KV=function(n,o,l){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),d=new c.l,y=new c.l,g=new c.l;n.A(d),o.A(y),d.X(l,l),y.X(l,l),g.L(d),g.Fa(y),d=null;var _=n.Cb;if(_!=null){var M=_.Gb;d=_.Bo,M==null&&(M=_=c.ua.lj(n,g))}else M=_=c.ua.lj(n,g);var $=M.getIterator(),E=null;d!=null&&(E=d.getIterator());var k=new c.h,P=new c.h,F=!1,D=l*l;for(d=new c.rn(o.I()),_=0;_<o.I();_++)d.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,k),g.contains(k)){if(y.L(k.x,k.y,k.x,k.y),E!=null&&(E.Zi(y,l),E.next()==-1))continue;$.Zi(y,l);for(var V=$.next();V!=-1;V=$.next())if(p.Wb(M.ka(V)),(V=p.ia()).ic(V.ge(k,!1),P),c.h.zc(k,P)<=D){d.write(_,1),F=!0;break}}if(!F)return!1;for(n=n.ng(),p=new c.ee,y=new c.h,_=0;_<o.I();_++)d.read(_)!=0&&(o.D(_,y),p.Du(y.x,y.y));return this.Ow(n,p,l)},a.xV=function(n,o,l){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),d=new c.l,y=new c.l,g=new c.l;n.A(d),o.A(y),d.X(l,l),y.X(l,l),g.L(d),g.Fa(y),d=null;var _=n.Cb;if(_!=null){var M=_.Gb;d=_.Bo,M==null&&(M=_=c.ua.lj(n,g))}else M=_=c.ua.lj(n,g);var $=M.getIterator(),E=null;d!=null&&(E=d.getIterator());var k=new c.h,P=new c.h,F=!1,D=!1,V=l*l;for(d=new c.rn(o.I()),_=0;_<o.I();_++)d.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,k),g.contains(k)){if(y.L(k.x,k.y,k.x,k.y),E!=null&&(E.Zi(y,l),E.next()==-1)){D=!0;continue}$.Zi(y,l);for(var N=!1,G=$.next();G!=-1;G=$.next())if(p.Wb(M.ka(G)),(G=p.ia()).ic(G.ge(k,!1),P),c.h.zc(k,P)<=V){d.write(_,1),N=F=!0;break}N||(D=!0)}else D=!0;if(!F||!D)return!1;for(n=n.ng(),p=new c.ee,y=new c.h,_=0;_<o.I();_++)d.read(_)!=0&&(o.D(_,y),p.Du(y.x,y.y));return!this.Ow(n,p,l)},a.uV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||a.rc(n,o,!1)==4||!a.PG(n,o,l,!0))&&(n=n.ng(),!a.bI(n,o,l))},a.CV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(d.da()>l&&d.S()>l)&&a.gk(p,d,l)},a.yV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!a.Ac(d,p,l)&&!a.NG(n,d,l)},a.JV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),d.da()<=l&&d.S()<=l)return d=o.Kp(),a.Uz(n,d,l);if(d.da()<=l||d.S()<=l)return d=new c.Ua,p=new c.Ta,o.If(0,p),d.nf(p),o.If(2,p),d.lineTo(p),a.II(n,d,l);n=n.Ha(),o=new c.l,p=new c.l,o.L(d),p.L(d),o.X(-l,-l),p.X(l,l),d=!1;for(var y=new c.l,g=new c.l;n.ab();)for(;n.Ia();){if(n.ia().A(y),g.L(o),g.Fa(y),!g.B()&&(g.da()>l||g.S()>l))return!1;g.L(p),g.Fa(y),g.B()||(d=!0)}return d},a.GV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(a.Ac(p,d,l)||a.Ac(d,p,l)||a.Ac(d,p,l)||d.da()>l&&d.S()>l||d.da()<=l&&d.S()<=l)&&(p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.QG(n,p,l))},a.MV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return a.Ac(d,p,l);n=n.Ha(),(o=new c.l).L(d),o.X(-l,-l),d=!1,p=new c.l;for(var y=new c.l;n.ab();)for(;n.Ia();)n.ia().A(p),o.jm(p)?d=!0:(y.L(o),y.Fa(p),!y.B()&&(y.da()>l||y.S()>l)&&(d=!0));return d},a.tV=function(n,o,l){var p=new c.l,d=new c.l;return o.A(d),n.A(p),!(!a.Ac(p,d,l)||d.da()>l&&d.S()>l)&&(d.da()<=l&&d.S()<=l?(o=o.Kp(),a.MG(n,o,l)):(p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.Am(p,n,l,!1)))},a.wV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.GI(n,p,l);n=n.Ha(),o=new c.l,(p=new c.l).L(d),o.L(d),p.X(-l,-l),o.X(l,l);for(var y=d=!1,g=new c.l,_=new c.l;n.ab();)for(;n.Ia();)if(n.ia().A(g),y||o.contains(g)||(y=!0),d||(_.L(p),_.Fa(g),!_.B()&&(_.da()>l||_.S()>l)&&(d=!0)),d&&y)return!0;return!1},a.dU=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.gk(p,d,l)&&(!!a.eU(n,o,l)||a.TA(n,o,l,!1,!0,!1))},a.bU=function(n,o,l){return!a.bI(n,o,l)},a.jU=function(n,o,l){return a.TA(n,o,l,!1,!1,!0)},a.$H=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.Ac(p,d,l)&&a.TA(o,n,l,!0,!1,!1)},a.Ow=function(n,o,l){l*=l;for(var p=new c.h,d=new c.h,y=0;y<o.I();y++){o.D(y,d);for(var g=!1,_=0;_<n.I();_++)if(n.D(_,p),c.h.zc(p,d)<=l){g=!0;break}if(!g)return!1}return!0},a.Pw=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),a.gk(p,d,l)},a.aI=function(n,o,l){return o=o.D(),a.lt(n,o,l)},a.nU=function(n,o,l){return a.Pw(n,o,l)},a.ZT=function(n,o,l){return!a.aI(n,o,l)},a.cU=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(d.da()>l||d.S()>l)&&a.gk(p,d,l)},a.aU=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l))return!1;for((o=new c.l).L(d),o.X(l,l),l=new c.h,d=0;d<n.I();d++)if(n.D(d,l),o.contains(l))return!1;return!0},a.lU=function(n,o,l){var p=new c.l,d=new c.l,y=new c.l;if(o.A(p),p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l){o=new c.h;var g=!1;d.L(p),y.L(p),d.X(l,l),p.da()>l?y.X(0,-l):y.X(-l,0);for(var _=0;_<n.I();_++)if(n.D(_,o),d.contains(o)){if(p.da()>l){if(o.y>y.G&&o.y<y.H)return!1}else if(o.x>y.v&&o.x<y.C)return!1;g=!0}return g}for(d.L(p),y.L(p),d.X(l,l),y.X(-l,-l),o=new c.h,g=!1,_=0;_<n.I();_++)if(n.D(_,o),d.contains(o)){if(y.jm(o))return!1;g=!0}return g},a.mU=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!a.Ac(d,p,l))return!1;if(d.da()<=l&&d.S()<=l)return a.gk(p,d,l);if(d.da()<=l||d.S()<=l){o=!1,p=new c.l;var y=new c.l;p.L(d),y.L(d),d.da()>l?p.X(0,-l):p.X(-l,0),y.X(l,l);for(var g=new c.h,_=0;_<n.I();_++){if(n.D(_,g),!y.contains(g))return!1;d.da()>l?g.y>p.G&&g.y<p.H&&(o=!0):g.x>p.v&&g.x<p.C&&(o=!0)}return o}for(o=!1,p=new c.l,y=new c.l,p.L(d),y.L(d),p.X(-l,-l),y.X(l,l),g=new c.h,_=0;_<n.I();_++){if(n.D(_,g),!y.contains(g))return!1;p.jm(g)&&(o=!0)}return o},a.YT=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||d.da()>l||d.S()>l)&&(o=o.Kp(),!a.lt(n,o,l))},a.$T=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l){o=new c.l,p=new c.l,o.L(d),d.da()>l?o.X(0,-l):o.X(-l,0),p.L(d),p.X(l,l);for(var y=new c.h,g=!1,_=!1,M=0;M<n.I();M++)if(n.D(M,y),g||(d.da()>l?y.y>o.G&&y.y<o.H&&(g=!0):y.x>o.v&&y.x<o.C&&(g=!0)),_||p.contains(y)||(_=!0),g&&_)return!0;return!1}for(o=new c.l,p=new c.l,o.L(d),o.X(-l,-l),p.L(d),p.X(l,l),y=new c.h,_=g=!1,M=0;M<n.I();M++)if(n.D(M,y),!g&&o.jm(y)&&(g=!0),_||p.contains(y)||(_=!0),g&&_)return!0;return!1},a.rI=function(n,o,l){return c.h.zc(n,o)<=l*l},a.NU=function(n,o,l){return c.h.zc(n,o)>l*l},a.pI=function(n,o,l){return a.rI(n,o,l)},a.qI=function(n,o,l){var p=new c.l;return p.L(n),a.gk(p,o,l)},a.Tw=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),!p.contains(n)},a.ZA=function(n,o,l){if(o.da()<=l&&o.S()<=l)return!1;var p=new c.l,d=new c.l;if(p.L(o),p.X(l,l),!p.contains(n))return!1;if(o.da()<=l||o.S()<=l){if(d.L(o),o.da()>l?d.X(0,-l):d.X(-l,0),o.da()>l){if(n.y>d.G&&n.y<d.H)return!1}else if(n.x>d.v&&n.x<d.C)return!1;return!0}return d.L(o),d.X(-l,-l),!d.jm(n)},a.$A=function(n,o,l){if(o.da()<=l&&o.S()<=l)return!0;if(o.da()<=l||o.S()<=l){var p=new c.l;p.L(o),o.da()>l?p.X(0,-l):p.X(-l,0);var d=!1;return o.da()>l?n.y>p.G&&n.y<p.H&&(d=!0):n.x>p.v&&n.x<p.C&&(d=!0),d}return(p=new c.l).L(o),p.X(-l,-l),p.jm(n)},a.MU=function(n,o,l){return a.qI(n,o,l)},a.gk=function(n,o,l){return a.Ac(n,o,l)&&a.Ac(o,n,l)},a.fk=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),!n.isIntersecting(p)},a.YP=function(n,o,l){if(n.da()<=l&&n.S()<=l){var p=n.tf();return a.ZA(p,o,l)}if(o.da()<=l&&o.S()<=l)return p=o.tf(),a.ZA(p,n,l);if(n.da()>l&&n.S()>l&&(o.da()<=l||o.S()<=l)?p=o:(p=n,n=o),p.da()<=l||p.S()<=l){if(n.da()<=l||n.S()<=l){o=new c.zb;var d=new c.zb,y=[0,0],g=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),n.fn(_),d.Ec(_),n.gn(_),d.Rc(_),o.Fa(d,null,y,g,l),o.Fa(d,null,null,null,l)==1&&(y[0]==0||y[1]==1||g[0]==0||g[1]==1)}return o=new c.l,d=new c.l,o.L(n),o.X(-l,-l),d.L(o),d.Fa(p),!(!d.B()&&(d.da()>l||d.S()>l))}return n.X(l,l),(d=new c.l).L(p),d.Fa(n),!(d.B()||!d.B()&&d.da()>l&&d.S()>l)},a.XP=function(n,o,l){if(a.Ac(n,o,l)||a.Ac(o,n,l)||n.da()<=l&&n.S()<=l||o.da()<=l&&o.S()<=l)return!1;if(n.da()<=l||n.S()<=l){if(o.da()>l&&o.S()>l)return!1;var p=new c.zb,d=new c.zb,y=[0,0],g=[0,0],_=new c.h;return n.fn(_),p.Ec(_),n.gn(_),p.Rc(_),o.fn(_),d.Ec(_),o.gn(_),d.Rc(_),p.Fa(d,null,y,g,l),p.Fa(d,null,null,null,l)==2&&(0<y[0]||1>y[1])&&(0<g[0]||1>g[1])}return!(o.da()<=l||o.S()<=l)&&((p=new c.l).L(n),p.Fa(o),!(p.B()||p.da()<=l||p.S()<=l))},a.eF=function(n,o,l){if(!a.Ac(n,o,l))return!1;if(n.da()<=l&&n.S()<=l)return n=n.tf(),a.$A(n,o,l);if(o.da()<=l&&o.S()<=l)return o=o.tf(),a.$A(o,n,l);if(n.da()<=l||n.S()<=l)return a.Ac(n,o,l);if(o.da()<=l||o.S()<=l){var p=new c.l;return p.L(n),p.X(-l,-l),p.jm(o)?!0:((n=new c.l).L(p),n.Fa(o),!(n.B()||n.da()<=l&&n.S()<=l))}return a.Ac(n,o,l)},a.WP=function(n,o,l){if(a.Ac(n,o,l)||a.Ac(o,n,l)||n.da()<=l&&n.S()<=l||o.da()<=l&&o.S()<=l||o.da()>l&&o.S()>l&&n.da()>l&&n.S()>l)return!1;if(n.da()>l&&n.S()>l)var p=o;else p=n,n=o;if(n.da()>l&&n.S()>l){o=new c.l;var d=new c.l;return d.L(n),d.X(-l,-l),o.L(d),o.Fa(p),!(o.B()||o.da()<=l&&o.S()<=l)}o=new c.zb,d=new c.zb;var y=[0,0],g=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),n.fn(_),d.Ec(_),n.gn(_),d.Rc(_),o.Fa(d,null,y,g,l),o.Fa(d,null,null,null,l)==1&&0<y[0]&&1>y[1]&&0<g[0]&&1>g[1]},a.zI=function(n,o,l){var p=new c.l,d=new c.l,y=new c.am(n,o,l,!0);if(!y.next())return!0;if(this.OG(n,o,l))return!1;var g=n,_=null;o.K()==1736&&(_=o);var M=!1,$=!1;do{var E=y.pl(),k=y.jl();if(k=o.Oa(o.Ca(k)),p.L(y.oz()),p.X(l,l),p.contains(k)&&(k=c.jd.Zd(g,k,0))!=0||o.K()==1736&&(E=n.Oa(n.Ca(E)),d.L(y.Wy()),d.X(l,l),d.contains(E)&&(k=c.jd.Zd(_,E,0))!=0))return!1;M||(!c.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new c.Ea,n.copyTo(g),g.hj(1)),M=!0),o.K()!=1736||$||($=o,!c.Fg.Ol($,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(_=new c.Ea,$.copyTo(_),_.hj(1)),$=!0)}while(y.next());return!0},a.Ac=function(n,o,l){var p=new c.l;return p.L(n),p.X(l,l),p.contains(o)},a.ns=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),o=new c.h,n.fn(o),!p.contains(o)||(n.VI(o),!p.contains(o)||(n.YI(o),!p.contains(o)||(n.gn(o),!p.contains(o))))},a.ZH=function(n,o,l){if(n.ea()!=o.ea()||n.I()!=o.I())return!1;var p=new c.h,d=new c.h,y=!0;l*=l;for(var g=0;g<n.ea();g++){if(n.Wc(g)!=o.Wc(g)){y=!1;break}for(var _=n.Ca(g);_<o.Wc(g);_++)if(n.D(_,p),o.D(_,d),c.h.zc(p,d)>l){y=!1;break}if(!y)break}return!!y},a.eU=function(n,o,l){if(n.I()!=o.I())return!1;var p=new c.h,d=new c.h,y=!0;l*=l;for(var g=0;g<n.I();g++)if(n.D(g,p),o.D(g,d),c.h.zc(p,d)>l){y=!1;break}return!!y},a.TA=function(n,o,l,p,d,y){var g=!1;if(n.I()>o.I()){p&&(p=!1,g=!0);var _=o}else _=n,n=o;if(o=null,d||y||g){o=new c.rn(n.I());for(var M=0;M<n.I();M++)o.write(M,0)}M=new c.l;var $=new c.l,E=new c.l;_.A(M),n.A($),M.X(l,l),$.X(l,l),E.L(M),E.Fa($),$=new c.h;for(var k=new c.h,P=!0,F=c.ua.jE(n,E),D=F.getIterator(),V=l*l,N=0;N<_.I();N++)if(_.D(N,$),E.contains($)){var G=!1;M.L($.x,$.y,$.x,$.y),D.Zi(M,l);for(var J=D.next();J!=-1&&(J=F.ka(J),n.D(J,k),!(c.h.zc($,k)<=V&&((d||y||g)&&o.write(J,1),G=!0,p)));J=D.next());if(!G&&(P=!1,d||p))return!1}else{if(d||p)return!1;P=!1}if(y&&P)return!1;if(p)return!0;for(M=0;M<n.I();M++)if(o.read(M)==1){if(y)return!0}else if(d||g)return!1;return!y},a.bI=function(n,o,l){if(n.I()>o.I())var p=o;else p=n,n=o;o=new c.l;var d=new c.l,y=new c.l;p.A(o),n.A(d),o.X(l,l),d.X(l,l),y.L(o),y.Fa(d),d=new c.h;for(var g=new c.h,_=l*l,M=c.ua.jE(n,y),$=M.getIterator(),E=0;E<p.I();E++)if(p.D(E,d),y.contains(d)){o.L(d.x,d.y,d.x,d.y),$.Zi(o,l);for(var k=$.next();k!=-1;k=$.next())if(n.D(M.ka(k),g),c.h.zc(d,g)<=_)return!0}return!1},a.Rz=function(n,o,l,p){return a.Am(n,o,l,p)&&a.Am(o,n,l,p)},a.Am=function(n,o,l,p){function d(Ae,be){return k.LE(Ae,be)}var y,g=!0,_=[0,0],M=[0,0],$=0,E=new c.ja(0),k=new a,P=new c.l,F=new c.l,D=new c.l;n.A(P),o.A(F),P.X(l,l),F.X(l,l),D.L(P),D.Fa(F),n=n.Ha(),F=o.Ha();var V=null,N=V=null,G=o.Cb;for(G!=null?(V=G.Gb,N=G.Bo,V==null&&(V=c.ua.lj(o,D))):V=c.ua.lj(o,D),o=V.getIterator(),G=null,N!=null&&(G=N.getIterator());n.ab();)for(;n.Ia();){var J=!1,W=n.ia();if(W.A(P),!P.isIntersecting(D)||G!=null&&(G.Zi(P,l),G.next()==-1))return!1;for(N=W.Rb(),o.Wo(W,l),y=o.next();y!=-1;y=o.next()){F.Wb(V.ka(y)),y=F.ia();var ee=W.Fa(y,null,_,M,l);if(ee==2&&(!p||M[0]<=M[1])){ee=_[0];var Z=_[1],ae=M[0],de=M[1];if(ee*N<=l&&(1-Z)*N<=l){J=!0,$=0,E.resize(0),k.th.length=0;var ce=n.xb();for(ae=!0;ae;){if(n.Ia()){if(N=(W=n.ia()).Rb(),(ee=W.Fa(y,null,_,M,l))==2&&(!p||M[0]<=M[1])&&(ee=_[0],Z=_[1],ee*N<=l&&(1-Z)*N<=l)){ce=n.xb();continue}if(F.Ia()&&(y=F.ia(),(ee=W.Fa(y,null,_,M,l))==2&&(!p||M[0]<=M[1])&&(ee=_[0],Z=_[1],ee*N<=l&&(1-Z)*N<=l))){ce=n.xb();continue}}ae=!1}ce!=n.xb()&&(n.Wb(ce),n.ia());break}ce=n.xb(),y=w.construct(ce,n.gb,ee,Z,F.xb(),F.gb,ae,de),k.th.push(y),E.add(E.size)}}if(!J){if($==k.th.length)return!1;for(1<E.size-$&&E.Wd($,E.size,d),J=0;$<k.th.length;$++)if(!((y=k.th[E.get($)]).Mj<J&&y.Ui<J)){if(N*(y.Mj-J)>l)return!1;if(N*(1-(J=y.Ui))<=l||J==1)break}if(N*(1-J)>l)return!1;$=0,E.resize(0),k.th.length=0}}return g},a.QG=function(n,o,l){if(1>a.Sz(n,o,l,null))return!1;var p=new c.l,d=new c.l;n.A(p),o.A(d);var y=a.ns(p,d,l);return p=a.ns(d,p,l),!(!y||!p)||(y&&!p?!a.Am(o,n,l,!1):p&&!y?!a.Am(n,o,l,!1):!a.Am(n,o,l,!1)&&!a.Am(o,n,l,!1))},a.Sz=function(n,o,l,p){function d(Ie,qt){return P.LE(Ie,qt)}if(n.sz()>o.sz())var y=o,g=n;else y=n,g=o;n=y.Ha(),o=g.Ha();var _=[0,0],M=[0,0],$=-1,E=0,k=new c.ja(0),P=new a,F=new c.l,D=new c.l,V=new c.l;y.A(F),g.A(D),F.X(l,l),D.X(l,l),V.L(F),V.Fa(D),y=null,p!=null&&(y=new c.h);var N=D=D=null,G=g.Cb;for(G!=null?(D=G.Gb,N=G.Bo,D==null&&(D=c.ua.lj(g,V))):D=c.ua.lj(g,V),g=D.getIterator(),G=null,N!=null&&(G=N.getIterator());n.ab();)for(N=0;n.Ia();){var J=n.ia();if(J.A(F),F.isIntersecting(V)){if(G!=null&&(G.Zi(F,l),G.next()==-1))continue;var W=J.Rb();g.Wo(J,l);for(var ee=g.next();ee!=-1;ee=g.next()){var Z=D.ka(ee);o.Wb(Z);var ae=o.ia(),de=ae.Rb(),ce=J.Fa(ae,null,_,M,l);if(0<ce){ee=_[0],$=M[0];var Ae=ce==2?_[1]:NaN,be=ce==2?M[1]:NaN;if(ce==2){if(W*(Ae-ee)>l)return 1;var Je=W*(Ae-ee);if(o.Ia()){if(ae=o.ia(),(ce=J.Fa(ae,null,_,null,l))==2){ce=_[0];var Ve=_[1];if(Je+(ce=W*(Ve-ce))>l)return 1}o.Wb(Z),o.ia()}if(!o.xm()){if(o.ni(),ae=o.ni(),(ce=J.Fa(ae,null,_,null,l))==2&&(ce=_[0],Je+(ce=W*((Ve=_[1])-ce))>l))return 1;o.Wb(Z),o.ia()}if(n.Ia()){if(Z=n.xb(),(ce=(J=n.ia()).Fa(ae,null,_,null,l))==2&&(ce=_[0],Je+(ce=W*((Ve=_[1])-ce))>l))return 1;n.Wb(Z),n.ia()}if(!n.xm()){if(Z=n.xb(),n.ni(),(ce=(J=n.ni()).Fa(ae,null,_,null,l))==2&&(ce=_[0],Je+(ce=de*((Ve=_[1])-ce))>l))return 1;n.Wb(Z),n.ia()}ae=w.construct(n.xb(),n.gb,ee,Ae,o.xb(),o.gb,$,be),P.th.push(ae),k.add(k.size)}$=0,p!=null&&(J.ic(ee,y),p.add(y.x),p.add(y.y))}}if(E<P.th.length){for(k.Wd(E,k.size,d),J=0,ee=P.th[k.get(E)].Om;E<P.th.length;E++)if(!((ae=P.th[k.get(E)]).Mj<J&&ae.Ui<J))if(W*(ae.Mj-J)>l)N=W*(ae.Ui-ae.Mj),J=ae.Ui,ee=ae.Om;else{if(ae.Om!=ee?(N=W*(ae.Ui-ae.Mj),ee=ae.Om):N+=W*(ae.Ui-ae.Mj),N>l)return 1;if((J=ae.Ui)==1)break}W*(1-J)>l&&(N=0),E=0,k.resize(0),P.th.length=0}}}return $},a.OG=function(n,o,l){var p=n.Ha(),d=o.Ha();for(n=new c.am(n,o,l,!1);n.next();){o=n.pl();var y=n.jl();if(p.Wb(o),d.Wb(y),o=p.ia(),0<d.ia().Fa(o,null,null,null,l))return!0}return!1},a.PG=function(n,o,l,p){var d=n.Ha(),y=new c.l,g=new c.l,_=new c.l;n.A(y),o.A(g),y.X(l,l),y.contains(g),g.X(l,l),_.L(y),_.Fa(g),(y=n.Cb)!=null?(y=y.Gb)==null&&(y=c.ua.lj(n,_)):y=c.ua.lj(n,_),n=y.getIterator();for(var M=new c.h,$=new c.h,E=l*l,k=0;k<o.I();k++)if(o.D(k,M),_.contains(M)){g.L(M.x,M.y,M.x,M.y),n.Zi(g,l);for(var P=!1,F=n.next();F!=-1;F=n.next())if(d.Wb(y.ka(F)),(F=d.ia()).ic(F.ge(M,!1),$),c.h.zc($,M)<=E){P=!0;break}if(p){if(!P)return!1}else if(P)return!0}return!!p},a.Tz=function(n,o,l){var p=new c.h,d=l*l,y=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var g=new c.l;for(g.L(o),g=(l=n.HF(g,l)).next();g!=-1;g=l.next())if(y.Wb(n.ka(g)),y.Ia()){var _=(g=y.ia()).ge(o,!1);if(g.ic(_,p),c.h.zc(o,p)<=d)return!0}return!1}for(n=new c.l;y.ab();)for(;y.Ia();)if((g=y.ia()).A(n),n.X(l,l),n.contains(o)&&(_=g.ge(o,!1),g.ic(_,p),c.h.zc(o,p)<=d))return!0;return!1},a.MG=function(n,o,l){return a.Tz(n,o,l)&&!a.Uz(n,o,l)},a.Uz=function(n,o,l){return n=n.ng(),!a.lt(n,o,l)},a.NG=function(n,o,l){if(n.vm()){var p=new c.zb(o.v,o.G,o.v,o.H),d=new c.zb(o.v,o.H,o.C,o.H),y=new c.zb(o.C,o.H,o.C,o.G);for(o=new c.zb(o.C,o.G,o.v,o.G),n=n.Ha();n.ab();)for(;n.Ia();){var g=n.ia();if(g.isIntersecting(p,l)||g.isIntersecting(d,l)||g.isIntersecting(y,l)||g.isIntersecting(o,l))return!0}}else{(p=new c.l).L(o),p.X(l,l),l=n.vb(0),d=new c.h,y=new c.h,o=new c.h,g=new c.h;for(var _=0,M=n.ea();_<M;_++)for(var $=!0,E=n.Ca(_),k=n.Wc(_);E<k;E++)if($)l.uc(2*E,y),$=!1;else{if(l.uc(2*E,d),o.N(y),g.N(d),p.uy(o,g)!=0)return!0;y.N(d)}}return!1},a.rc=function(n,o,l){var p=n.K(),d=o.K();if(c.ba.zj(p)){var y=n.Cb;if(y!=null&&(y=y.Hk)!=null)if(d==33){var g=o.D();if((g=y.Uo(g.x,g.y))==1)return 1;if(g==0)return 4}else{if(g=new c.l,o.A(g),(g=y.To(g))==1)return 1;if(g==0)return 4;if(l&&c.ba.zj(d)&&a.CE(o,y))return 1073741824}}if(c.ba.zj(d)&&(y=o.Cb)!=null&&(y=y.Hk)!=null)if(p==33){if(n=n.D(),(g=y.Uo(n.x,n.y))==1)return 2;if(g==0)return 4}else{if(o=new c.l,n.A(o),(g=y.To(o))==1)return 2;if(g==0)return 4;if(l&&c.ba.zj(p)&&a.CE(n,y))return 1073741824}return 0},a.CE=function(n,o){for(var l=n.I(),p=new c.h,d=0;d<l;d++)if(n.D(d,p),o.Uo(p.x,p.y)==1)return!0;return!1},a.DI=function(n,o,l,p){for(var d=1<=n.qm(0)&&1<=o.qm(0),y=n.Ha(),g=o.Ha(),_=[0,0],M=[0,0],$=new c.am(n,o,l,!1),E=!1;$.next();){var k=$.pl(),P=$.jl();if(y.Wb(k),g.Wb(P),k=y.ia(),(P=g.ia().Fa(k,null,M,_,l))==2){if(E=_[0],P=_[1],k=k.Rb(),d&&(P-E)*k>l)return!1;E=!0}else if(P!=0){if(E=_[0],k=M[0],0<E&&1>E&&0<k&&1>k)return!1;E=!0}}return!!E&&(y=new c.l,g=new c.l,d=new c.l,n.A(y),o.A(g),y.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),d.L(y),d.Fa(g),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&c.cm.st(n,o,l,"F********",p))},a.AI=function(n,o,l,p){var d=1<=n.qm(0)&&1<=o.qm(0),y=new c.l,g=new c.l,_=new c.l;n.A(y),o.A(g);for(var M=!1,$=a.ns(y,g,l),E=a.ns(g,y,l),k=n.Ha(),P=o.Ha(),F=[0,0],D=[0,0],V=new c.am(n,o,l,!1);V.next();){var N=V.pl(),G=V.jl();if(k.Wb(N),P.Wb(G),G=k.ia(),(N=P.ia().Fa(G,null,D,F,l))==2){N=F[0];var J=F[1];if(G=G.Rb(),d&&(J-N)*G>l&&(M=!0,$&&E))return!0}else if(N!=0&&(N=F[0],G=D[0],0<N&&1>N&&0<G&&1>G))return!0}if(d=new c.l,k=new c.l,d.L(y),d.X(1e3*l,1e3*l),k.L(g),k.X(1e3*l,1e3*l),_.L(d),_.Fa(k),y="",y=M?y+"**":y+"T*",$){if(10<o.I()&&(o=c.Vd.clip(o,_,l,0)).B())return!1;y+="****"}else y+="T***";if(E){if(10<n.I()&&(n=c.Vd.clip(n,_,l,0)).B())return!1;y+="***"}else y+="T**";return c.cm.st(n,o,l,y.toString(),p)},a.wI=function(n,o,l,p){var d=[!1],y=a.uI(n,o,l,d);return d[0]?y:(d=new c.l,o.A(d),d.X(1e3*l,1e3*l),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B()))&&c.cm.Uw(n,o,l,p))},a.uI=function(n,o,l,p){p[0]=!1;for(var d=n.Ha(),y=o.Ha(),g=[0,0],_=[0,0],M=new c.am(n,o,l,!1),$=!1;M.next();){var E=M.pl(),k=M.jl();if(d.Wb(E,-1),y.Wb(k,-1),E=d.ia(),(E=y.ia().Fa(E,null,_,g,l))!=0&&($=!0,E==1&&(E=g[0],k=_[0],0<E&&1>E&&0<k&&1>k)))return p[0]=!0,!1}if(!$){for(p[0]=!0,g=new c.l,n.A(g),g.X(l,l),M=n,$=!1,_=new c.l,p=0,d=o.ea();p<d;p++)if(0<o.Ka(p)){if(o.Tj(p,_),!g.isIntersecting(_)||(y=o.Oa(o.Ca(p)),(y=c.Fg.ym(M,y,0))==0))return!1;$||(!c.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?M=n:(y=new c.Ea,n.copyTo(y),y.hj(1),M=y),$=!0)}if(n.ea()==1||o.K()==1607)return!0;for(g=new c.l,o.A(g),g.X(l,l),_=o,M=!1,l=new c.l,p=0,d=n.ea();p<d;p++)if(0<n.Ka(p)){if(n.Tj(p,l),g.isIntersecting(l)&&(y=n.Oa(n.Ca(p)),(y=c.Fg.ym(_,y,0))==1))return!1;M||(!c.Fg.Ol(o,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(y=new c.Ea,o.copyTo(y),y.hj(1),_=y),M=!0)}return!0}return!1},a.EI=function(n,o,l,p){for(var d=n.Ha(),y=o.Ha(),g=[0,0],_=[0,0],M=new c.am(n,o,l,!1),$=!1;M.next();){var E=M.pl(),k=M.jl();if(d.Wb(E),y.Wb(k),E=d.ia(),(E=y.ia().Fa(E,null,_,g,l))==2)$=!0;else if(E!=0){if($=g[0],E=_[0],0<$&&1>$&&0<E&&1>E)return!1;$=!0}}return!!$&&(y=new c.l,g=new c.l,d=new c.l,n.A(y),o.A(g),y.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),d.L(y),d.Fa(g),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&c.cm.bn(n,o,l,"F********",p))},a.yI=function(n,o,l,p){for(var d=n.Ha(),y=o.Ha(),g=[0,0],_=[0,0],M=new c.am(n,o,l,!1),$=!1;M.next();){var E=M.pl(),k=M.jl();if(d.Wb(E),y.Wb(k),E=d.ia(),(E=y.ia().Fa(E,null,_,g,l))==2)$=!0;else if(E!=0){if($=g[0],E=_[0],0<$&&1>$&&0<E&&1>E)return!0;$=!0}}return!!$&&(y=new c.l,g=new c.l,_=new c.l,M=new c.l,d=new c.l,n.A(y),o.A(g),a.ns(g,y,l)?(_.L(y),_.X(1e3*l,1e3*l),M.L(g),M.X(1e3*l,1e3*l),d.L(_),d.Fa(M),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&(l=c.cm.bn(n,o,l,"T********",p))):l=c.cm.bn(n,o,l,"T*****T**",p))},a.xI=function(n,o,l,p){var d=[!1],y=a.uI(n,o,l,d);return d[0]?y:(d=new c.l,o.A(d),d.X(1e3*l,1e3*l),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B()))&&c.cm.aB(n,o,l,p))},a.vI=function(n,o,l){return c.jd.Zd(n,o,l)==1},a.CI=function(n,o,l){return c.jd.Zd(n,o,l)==2},a.lt=function(n,o,l){var p=new c.h;l*=l;for(var d=0;d<n.I();d++)if(n.D(d,p),c.h.zc(p,o)<=l)return!1;return!0},a.prototype.LE=function(n,o){return n=this.th[n],o=this.th[o],n.Om<o.Om||n.Om==o.Om&&(n.rw<o.rw||n.rw==o.rw&&(n.Mj<o.Mj||n.Mj==o.Mj&&(n.Ui<o.Ui||n.Ui==o.Ui&&n.wH<o.wH)))?-1:1},a}();c.vd=u}(U||(U={})),function(c){var C,w,u;(w=C||(C={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),C=function(){function a(){this.me=0,this.j=new c.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.tB=function(n,o,l,p,d){if(p.length!=9)throw c.i.ga("relation string length has to be 9 characters");for(var y=0;9>y;y++){var g=p.charAt(y);if(g!="*"&&g!="T"&&g!="F"&&g!="0"&&g!="1"&&g!="2")throw c.i.ga("relation string")}if((y=this.HR(p,n.Eb(),o.Eb()))!=0)return c.vd.uB(n,o,l,y,d);y=new c.l,n.A(y),g=new c.l,o.A(g);var _=new c.l;if(_.L(y),_.$b(g),l=c.ua.Xd(l,_,!1),n=this.RE(n,l),o=this.RE(o,l),n.B()||o.B())return this.pW(n,o,p);switch(y=o.K(),g=!1,n.K()){case 1736:switch(y){case 1736:g=this.st(n,o,l,p,d);break;case 1607:g=this.bn(n,o,l,p,d);break;case 33:g=this.rt(n,o,l,p);break;case 550:g=this.qt(n,o,l,p,d)}break;case 1607:switch(y){case 1736:g=this.bn(o,n,l,this.aq(p),d);break;case 1607:g=this.bB(n,o,l,p,d);break;case 33:g=this.ut(n,o,l,p,d);break;case 550:g=this.tt(n,o,l,p,d)}break;case 33:switch(y){case 1736:g=this.rt(o,n,l,this.aq(p));break;case 1607:g=this.ut(o,n,l,this.aq(p),d);break;case 33:g=this.VU(n,o,l,p);break;case 550:g=this.mt(o,n,l,this.aq(p))}break;case 550:switch(y){case 1736:g=this.qt(o,n,l,this.aq(p),d);break;case 1607:g=this.tt(o,n,l,this.aq(p),d);break;case 550:g=this.UA(n,o,l,p,d);break;case 33:g=this.mt(n,o,l,p)}break;default:g=!1}return g},a.st=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.sJ();var g=new c.l,_=new c.l;return n.A(g),o.A(_),p=!1,c.vd.fk(g,_,l)&&(y.Eu(n,o),p=!0),p||((g=c.vd.rc(n,o,!1))==4?(y.Eu(n,o),p=!0):g==1?(y.hy(o),p=!0):g==2&&(y.UD(n),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.Dp(n,o),y.j.Wg()),a.hg(y.J,y.Yc)},a.Uw=function(n,o,l,p){var d=new a;d.$i(),d.dj("T*****F**"),d.sJ();var y=new c.l,g=new c.l;n.A(y),o.A(g);var _=!1;return c.vd.fk(y,g,l)&&(d.Eu(n,o),_=!0),_||((y=c.vd.rc(n,o,!1))==4?(d.Eu(n,o),_=!0):y==1?(d.hy(o),_=!0):y==2&&(d.UD(n),_=!0)),_?this.hg(d.J,d.Yc):(n=(_=new c.hd).Ib(n),y=_.Ib(o),c.Vk.W(_,l,p,!1),l=_.Ke(y).ng(),_.Ip(0,!0,!0),c.tn.W(_,n,-1,!1,p),_.I(n)!=0&&(c.tn.W(_,y,-1,!1,p),d.gr(_,p),(o=_.I(y)==0)||(d.Dp(n,y),d.j.Wg(),y=this.hg(d.J,d.Yc))?(n=_.Ke(n),n=(_=new c.hd).Ib(n),y=_.Ib(l),d.gr(_,p),d.me=0,d.$i(),d.dj(o?"T*****F**":"******F**"),d.DB(),d.Dp(n,y),d.j.Wg(),this.hg(d.J,d.Yc)):y))},a.bn=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.DB();var g=new c.l,_=new c.l;return n.A(g),o.A(_),p=!1,c.vd.fk(g,_,l)&&(y.Fu(n,o),p=!0),p||((g=c.vd.rc(n,o,!1))==4?(y.Fu(n,o),p=!0):g==1&&(y.VD(o),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.mh=y.j.Fp(),a.Lw(o,y.j,y.mh),y.Dp(n,o),y.j.Gp(y.mh),y.j.Wg()),a.hg(y.J,y.Yc)},a.aB=function(n,o,l,p){var d=new a;d.$i(),d.dj("T*****F**"),d.DB();var y=new c.l,g=new c.l;n.A(y),o.A(g);var _=!1;return c.vd.fk(y,g,l)&&(d.Fu(n,o),_=!0),_||((y=c.vd.rc(n,o,!1))==4?(d.Fu(n,o),_=!0):y==1&&(d.VD(o),_=!0)),_?this.hg(d.J,d.Yc):(n=(_=new c.hd).Ib(n),o=_.Ib(o),d.Yo(_,l,p),_.I(n)!=0&&(d.Dp(n,o),d.j.Wg(),this.hg(d.J,d.Yc)))},a.qt=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.tJ();var g=new c.l,_=new c.l;return n.A(g),o.A(_),p=!1,c.vd.fk(g,_,l)&&(y.Gu(n),p=!0),p||((g=c.vd.rc(n,o,!1))==4?(y.Gu(n),p=!0):g==1&&(y.uN(),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.By(n,o),y.j.Wg()),a.hg(y.J,y.Yc)},a.bB=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.$W(),p=new c.l;var g=new c.l;n.A(p),o.A(g);var _=!1;return c.vd.fk(p,g,l)&&(y.KG(n,o),_=!0),_||c.vd.rc(n,o,!1)!=4||(y.KG(n,o),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.$h=y.j.Fp(),y.mh=y.j.Fp(),a.Lw(n,y.j,y.$h),a.Lw(o,y.j,y.mh),y.Dp(n,o),y.j.Gp(y.$h),y.j.Gp(y.mh),y.j.Wg()),a.hg(y.J,y.Yc)},a.tt=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.HJ(),p=new c.l;var g=new c.l;n.A(p),o.A(g);var _=!1;return c.vd.fk(p,g,l)&&(y.Qz(n),_=!0),_||c.vd.rc(n,o,!1)!=4||(y.Qz(n),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.$h=y.j.Fp(),a.Lw(n,y.j,y.$h),y.By(n,o),y.j.Gp(y.$h),y.j.Wg()),a.hg(y.J,y.Yc)},a.UA=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.MJ(),p=new c.l;var g=new c.l;n.A(p),o.A(g);var _=!1;return c.vd.fk(p,g,l)&&(y.tI(),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),y.Yo(p,l,d),y.By(n,o),y.j.Wg()),a.hg(y.J,y.Yc)},a.rt=function(n,o,l,p){var d=new a;d.$i(),d.dj(p),d.tJ();var y=new c.l;n.A(y),o=o.D();var g=!1;return c.vd.Tw(o,y,l)&&(d.Gu(n),g=!0),g||((l=c.jd.Zd(n,o,l))==1?(d.J[0]=0,d.J[2]=2,d.J[3]=-1,d.J[5]=1,d.J[6]=-1):l==2?(d.J[6]=-1,n.He()!=0?(d.J[0]=-1,d.J[3]=0,d.J[2]=2,d.J[5]=1):(d.J[0]=0,d.J[3]=-1,d.J[5]=-1,l=new c.l,n.A(l),d.J[2]=l.da()==0&&l.S()==0?-1:1)):d.Gu(n)),this.hg(d.J,p)},a.ut=function(n,o,l,p,d){var y=new a;y.$i(),y.dj(p),y.HJ();var g=new c.l;n.A(g),p=o.D();var _=!1;if(c.vd.Tw(p,g,l)&&(y.Qz(n),_=!0),!_){g=null;var M=_=!1;(y.fa[0]||y.fa[6])&&(c.vd.Tz(n,p,l)?(y.fa[0]&&(g=c.si.im(n,d),M=!c.vd.lt(g,p,l),_=!0,y.J[0]=M?-1:0),y.J[6]=-1):(y.J[0]=-1,y.J[6]=0)),y.fa[3]&&(g!=null&&g.B()?y.J[3]=-1:(_||(g==null&&(g=c.si.im(n,d)),M=!c.vd.lt(g,p,l),_=!0),y.J[3]=M?0:-1)),y.fa[5]&&(g!=null&&g.B()?y.J[5]=-1:_&&!M?y.J[5]=0:(g==null&&(g=c.si.im(n,d)),d=c.vd.Pw(g,o,l),y.J[5]=d?-1:0)),y.fa[2]&&(n.Rb()!=0?y.J[2]=1:((d=new c.ee(n.description)).Gd(n,0,n.I()),n=c.vd.Pw(d,o,l),y.J[2]=n?-1:0))}return this.hg(y.J,y.Yc)},a.mt=function(n,o,l,p){var d=new a;d.$i(),d.dj(p),d.MJ();var y=new c.l;n.A(y),o=o.D();var g=!1;if(c.vd.Tw(o,y,l)&&(d.tI(),g=!0),!g){y=!1,g=!0,l*=l;for(var _=0;_<n.I();_++){var M=n.Oa(_);if(c.h.zc(M,o)<=l?y=!0:g=!1,y&&!g)break}y?(d.J[0]=0,d.J[2]=g?-1:0,d.J[6]=-1):(d.J[0]=-1,d.J[2]=0,d.J[6]=0)}return a.hg(d.J,p)},a.VU=function(n,o,l,p){n=n.D(),o=o.D();for(var d=[],y=0;9>y;y++)d[y]=-1;return c.h.zc(n,o)<=l*l?d[0]=0:(d[2]=0,d[6]=0),d[8]=2,a.hg(d,p)},a.hg=function(n,o){for(var l=0;9>l;l++)switch(o.charAt(l)){case"T":if(n[l]==-1)return!1;break;case"F":if(n[l]!=-1)return!1;break;case"0":if(n[l]!=0)return!1;break;case"1":if(n[l]!=1)return!1;break;case"2":if(n[l]!=2)return!1}return!0},a.pW=function(n,o,l){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&o.B()){for(var d=0;9>d;d++)p[d]=-1;return this.hg(p,l)}return d=!1,n.B()&&(n=o,d=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=n.K(),c.ba.Ic(o)?o==1736?n.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new c.l,n.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=n.Rb()!=0,p[2]=o?1:0,p[5]=c.si.cq(n)?0:-1):(p[2]=0,p[5]=-1),d&&this.qK(p),this.hg(p,l)},a.HR=function(n,o,l){return a.ZP(n)?3:a.PP(n)?4:a.ZX(n,o,l)?8:a.xP(n,o,l)?16:a.$O(n)?1:a.zU(n,o,l)?32:0},a.ZP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.PP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.ZX=function(n,o,l){return(o!=0||l!=0)&&((o!=2||l!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||o==1&&l==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||l!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},a.xP=function(n,o,l){return o>l?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":o==1&&l==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.$O=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.zU=function(n,o,l){if(o==l){if(o!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},a.Lw=function(n,o,l){n=o.Ma(n);for(var p=o.Oe;p!=-1;p=o.Tf(p))if(o.yd(p)&n){var d=o.Je(p);if(d==-1)o.pn(p,l,0);else{var y=d,g=0;do o.fh(y)&n&&g++,y=o.kc(o.ya(y));while(y!=d);o.pn(p,l,g)}}},a.aq=function(n){var o=""+n.charAt(0);return o+=n.charAt(3),o+=n.charAt(6),o+=n.charAt(1),o+=n.charAt(4),o+=n.charAt(7),o+=n.charAt(2),(o+=n.charAt(5))+n.charAt(8)},a.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},a.qK=function(n){var o=n[1],l=n[2],p=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=o,n[6]=l,n[7]=p},a.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.me++):this.fa[n]=!1},a.prototype.PJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},a.prototype.qc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.me--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.me--,!0):(this.fa[n]=!1,this.me--,!0))},a.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.sN=function(n,o,l){var p=!0;return this.fa[0]&&(this.xS(n,o,l),p=p&&this.qc(0)),this.fa[1]&&(this.nG(n,o,1),p=p&&this.qc(1)),this.fa[2]&&(this.oG(n,o,l,2),p=p&&this.qc(2)),this.fa[3]&&(this.nG(n,l,3),p=p&&this.qc(3)),this.fa[4]&&(this.wN(n,o,l),p=p&&this.qc(4)),this.fa[5]&&(this.$D(n,l,5),p=p&&this.qc(5)),this.fa[6]&&(this.oG(n,l,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.$D(n,o,7),p=p&&this.qc(7)),p},a.prototype.Eu=function(n,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(n,o,l,p,d){o==-1&&p==-1||((l!="T"&&l!="F"&&o!=-1||d!="T"&&d!="F"&&p!=-1)&&n.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(l=new c.l,n.A(l),this.J[o]=l.da()==0&&l.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.UD=function(n){this.hy(n),a.qK(this.J)},a.prototype.Fu=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||o.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.VD=function(n){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||n.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(n=c.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.KG=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||n.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(n=c.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||o.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||n.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(n=c.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},a.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.tN=function(n,o,l){var p=!0;return this.fa[0]&&(this.yS(n,o),p=p&&this.qc(0)),this.fa[1]&&(this.uS(n,o,l,this.mh),p=p&&this.qc(1)),this.fa[2]&&(this.vS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.AN(n,o,l,this.mh),p=p&&this.qc(3)),this.fa[4]&&(this.xN(n,o,l,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.yN(n,o,l),p=p&&this.qc(5)),this.fa[6]&&(this.gQ(n,o),p=p&&this.qc(6)),this.fa[7]&&(this.fQ(n,o,l,this.mh),p=p&&this.qc(7)),p},a.prototype.hT=function(n,o,l){var p=!0;return this.fa[0]&&(this.BS(n,o,l,this.$h,this.mh),p=p&&this.qc(0)),this.fa[1]&&(this.pG(n,o,l,this.$h,this.mh,1),p=p&&this.qc(1)),this.fa[2]&&(this.qG(n,o,l,2),p=p&&this.qc(2)),this.fa[3]&&(this.pG(n,l,o,this.mh,this.$h,3),p=p&&this.qc(3)),this.fa[4]&&(this.CN(n,o,l,this.$h,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.aE(n,l,this.$h,5),p=p&&this.qc(5)),this.fa[6]&&(this.qG(n,l,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.aE(n,o,this.mh,7),p=p&&this.qc(7)),p},a.prototype.WD=function(n,o,l){var p=!0;return this.fa[0]&&(this.zS(n,o),p=p&&this.qc(0)),this.fa[2]&&(this.wS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.BN(n,o,l),p=p&&this.qc(3)),this.fa[5]&&(this.zN(n,o),p=p&&this.qc(5)),this.fa[6]&&(this.hQ(n,o),p=p&&this.qc(6)),p},a.prototype.LG=function(n,o,l){var p=!0;return this.fa[0]&&(this.CS(n,o,l,this.$h),p=p&&this.qc(0)),this.fa[2]&&(this.AS(n,l),p=p&&this.qc(2)),this.fa[3]&&(this.EN(n,o,l,this.$h),p=p&&this.qc(3)),this.fa[5]&&(this.DN(n,o,l,this.$h),p=p&&this.qc(5)),this.fa[6]&&(this.iQ(n,o,l),p=p&&this.qc(6)),p},a.prototype.UU=function(n,o,l){var p=!0;return this.fa[0]&&(this.DS(n,o,l),p=p&&this.qc(0)),this.fa[2]&&(this.rG(n,o,l,2),p=p&&this.qc(2)),this.fa[6]&&(this.rG(n,l,o,6),p=p&&this.qc(6)),p},a.prototype.xS=function(n,o,l){this.J[0]!=2&&(n=this.j.af(n))&o&&n&l&&(this.J[0]=2)},a.prototype.nG=function(n,o,l){if(this.J[l]!=1){var p=this.j.af(this.j.ya(n));this.j.af(n)&o&&p&o&&(this.J[l]=1)}},a.prototype.oG=function(n,o,l,p){this.J[p]!=2&&(n=this.j.af(n))&o&&!(n&l)&&(this.J[p]=2)},a.prototype.wN=function(n,o,l){if(this.J[4]!=1){var p=this.j.fh(n);p&o&&p&l?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.yd(this.j.vf(n)))&o&&n&l&&(this.J[4]=0)}},a.prototype.$D=function(n,o,l){if(this.J[l]!=1){var p=this.j.af(this.j.ya(n));!(this.j.af(n)&o)&&!(p&o)&&(this.J[l]=1)}},a.prototype.yS=function(n,o){if(this.J[0]!=1){var l=this.j.af(this.j.ya(n));this.j.af(n)&o&&l&o&&(this.J[0]=1)}},a.prototype.uS=function(n,o,l,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n),y=this.j.yd(d);!(y&o)&&this.j.af(n)&o&&(n=this.j.og(d,p),y&l&&n%2!=0&&(this.J[1]=0))}},a.prototype.vS=function(n,o){this.J[2]!=2&&this.j.fh(n)&o&&(this.J[2]=2)},a.prototype.AN=function(n,o,l,p){if(this.J[3]!=1){var d=this.j.fh(n);d&o&&d&l?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(d=this.j.vf(n),(n=this.j.yd(d))&o&&(o=this.j.og(d,p),n&l&&o%2==0&&(this.J[3]=0)))}},a.prototype.xN=function(n,o,l,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n);(n=this.j.yd(d))&o&&(o=this.j.og(d,p),n&l&&o%2!=0&&(this.J[4]=0))}},a.prototype.yN=function(n,o,l){this.J[5]!=1&&(n=this.j.fh(n))&o&&!(n&l)&&(this.J[5]=1)},a.prototype.gQ=function(n,o){if(this.J[6]!=1){var l=this.j.af(this.j.ya(n));!(this.j.af(n)&o)&&!(l&o)&&(this.J[6]=1)}},a.prototype.fQ=function(n,o,l,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n),y=this.j.yd(d);!(y&o)&&!(this.j.af(n)&o)&&(n=this.j.og(d,p),y&l&&n%2!=0&&(this.J[7]=0))}},a.prototype.BS=function(n,o,l,p,d){if(this.J[0]!=1){var y=this.j.fh(n);y&o&&y&l?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(y=this.j.yd(n))&o&&y&l&&(o=this.j.og(n,p),d=this.j.og(n,d),o%2==0&&d%2==0&&(this.J[0]=0)))}},a.prototype.pG=function(n,o,l,p,d,y){if(this.J[y]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var g=this.j.yd(n);g&o&&g&l&&(o=this.j.og(n,p),d=this.j.og(n,d),o%2==0&&d%2!=0&&(this.J[y]=0))}},a.prototype.qG=function(n,o,l,p){this.J[p]!=1&&(n=this.j.fh(n))&o&&!(n&l)&&(this.J[p]=1)},a.prototype.CN=function(n,o,l,p,d){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var y=this.j.yd(n);y&o&&y&l&&(o=this.j.og(n,p),d=this.j.og(n,d),o%2!=0&&d%2!=0&&(this.J[4]=0))}},a.prototype.aE=function(n,o,l,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),!(this.j.yd(n)&o)&&this.j.og(n,l)%2!=0&&(this.J[p]=0))},a.prototype.zS=function(n,o){this.J[0]!=0&&!(this.j.yd(n)&o)&&this.j.jk(this.j.Yy(n))&o&&(this.J[0]=0)},a.prototype.wS=function(n,o){this.J[2]!=2&&this.j.yd(n)&o&&(this.J[2]=2)},a.prototype.BN=function(n,o,l){this.J[3]!=0&&(n=this.j.yd(n))&o&&n&l&&(this.J[3]=0)},a.prototype.zN=function(n,o){this.J[5]!=1&&this.j.yd(n)&o&&(this.J[5]=1)},a.prototype.hQ=function(n,o){this.J[6]!=0&&!(this.j.yd(n)&o)&&!(this.j.jk(this.j.Yy(n))&o)&&(this.J[6]=0)},a.prototype.CS=function(n,o,l,p){if(this.J[0]!=0){var d=this.j.yd(n);d&o&&d&l&&this.j.og(n,p)%2==0&&(this.J[0]=0)}},a.prototype.AS=function(n,o){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(n)&o)&&(this.J[2]=0))},a.prototype.EN=function(n,o,l,p){if(this.J[3]!=0){var d=this.j.yd(n);d&o&&d&l&&this.j.og(n,p)%2!=0&&(this.J[3]=0)}},a.prototype.DN=function(n,o,l,p){if(this.J[5]!=0){var d=this.j.yd(n);d&o&&!(d&l)&&this.j.og(n,p)%2!=0&&(this.J[5]=0)}},a.prototype.iQ=function(n,o,l){this.J[6]!=0&&!((n=this.j.yd(n))&o)&&n&l&&(this.J[6]=0)},a.prototype.DS=function(n,o,l){this.J[0]!=0&&(n=this.j.yd(n))&o&&n&l&&(this.J[0]=0)},a.prototype.rG=function(n,o,l,p){this.J[p]!=0&&(n=this.j.yd(n))&o&&!(n&l)&&(this.J[p]=0)},a.prototype.Dp=function(n,o){var l=!1;n=this.j.Ma(n),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){var d=this.j.Je(p);if(d==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.WD(p,n,o);break;case 4:l=this.LG(p,n,o);break;default:throw c.i.ga("internal error")}}else{var y=d;do{var g=y;if(this.j.Bb(g,this.Wi)!=1)do{switch(this.xw){case 0:l=this.sN(g,n,o);break;case 1:l=this.tN(g,n,o);break;case 2:l=this.hT(g,n,o);break;default:throw c.i.ga("internal error")}if(l)break;this.j.Kb(g,this.Wi,1),g=this.j.kc(g)}while(g!=y&&!l);if(l)break;y=this.j.kc(this.j.ya(g))}while(y!=d);if(l)break}}l||this.PJ(),this.j.Lg(this.Wi)},a.prototype.By=function(n,o){var l=!1;n=this.j.Ma(n),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){switch(this.Um){case 3:l=this.WD(p,n,o);break;case 4:l=this.LG(p,n,o);break;case 5:l=this.UU(p,n,o);break;default:throw c.i.Ra()}if(l)break}l||this.PJ()},a.prototype.gr=function(n,o){this.j.fr(n,o)},a.prototype.Yo=function(n,o,l){this.TP(n,o,l),this.gr(n,l)},a.prototype.TP=function(n,o,l){for(c.Vk.W(n,o,l,!1),n.Ip(0,!0,!0),o=n.md;o!=-1;o=n.ve(o))n.jc(o)==1736&&c.tn.W(n,o,-1,!1,l)},a.RE=function(n,o){var l=n.K();return c.ba.zd(l)?((o=new c.Ua(n.description)).pc(n,!0),o):l==197?(l=new c.l,n.A(l),l.da()<=o&&l.S()<=o?(o=new c.Ta(n.description),n.tf(o),o):l.da()<=o||l.S()<=o?(o=new c.Ua(n.description),l=new c.Ta,n.If(0,l),o.nf(l),n.If(2,l),o.lineTo(l),o):((o=new c.Ea(n.description)).bd(n,!1),o)):n},a}(),c.cm=C}(U||(U={})),function(c){var C=function(){function a(n){this.Gm=new c.ja(0),this.fw=new c.ja(0),this.xt=new c.h,this.yt=new c.h,this.g=n,this.Js=-1}return a.prototype.cc=function(n){return this.g.cc(this.uz(n))},a.prototype.Dv=function(n){var o=this.dz(n);if(n=this.CF(n),this.g.Na(o)==n){var l=o;o=n,n=l}return this.g.Hc(o,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(n){var o=this.dz(n);return n=this.CF(n),this.g.V(o)==n?o:n},a.prototype.dz=function(n){return this.Gm.get(n)},a.prototype.CF=function(n){return this.fw.get(n)},a.prototype.mF=function(n){this.Gm.set(n,this.Js),this.Js=n},a.prototype.iI=function(n){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,n),this.fw.set(o,this.g.V(n)),o}return this.Gm==null&&(this.Gm=new c.ja(0),this.fw=new c.ja(0)),o=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),o},a.prototype.mz=function(n){return this.g.cd(this.dz(n))},a}();c.uY=C;var w=function(){function a(n){this.Ce=n,this.je=new c.zb,this.Pm=new c.zb,this.xH=0,this.Co=null,this.tA=-1}return a.prototype.compare=function(n,o,l){l=n.ka(l);var p=this.Ce.hb;if(this.tA==o)var d=this.xH;else this.Co=p.cc(o),this.Co==null?((n=p.g).fd(p.uz(o),this.je),this.Co=this.je,d=this.je.Me(this.Ce.Ah,0)):d=this.Co.Me(this.Ce.Ah,0),this.xH=d,this.tA=o;if((n=p.cc(l))==null){(n=p.g).fd(p.uz(l),this.Pm),n=this.Pm;var y=this.Pm.Me(this.Ce.Ah,0)}else y=n.Me(this.Ce.Ah,0);return d==y&&(o=p.Dv(o),l=p.Dv(l),(o=.5*((l=Math.min(o?this.Co.ma:this.Co.oa,l?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=l),d=this.Co.Me(o,0),y=n.Me(o,0)),d<y?-1:d>y?1:0},a.prototype.reset=function(){this.tA=-1},a}(),u=function(){function a(){this.Ym=this.Il=null,this.fb=new c.$j,this.fb.MP(),this.ae=new w(this),this.fb.Xo(this.ae)}return a.prototype.CQ=function(){var n=!1;if(this.hw&&(n=this.DQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return n=this.g.qz(o),this.g.KB(o,!0),0>n&&(n=this.g.Ya(o),this.g.kJ(n),this.g.Yg(o,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.yo,-1);o=new c.ja(0),this.Ah=NaN;var l=new c.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.ke);p!=-1;p=this.Il.lb(p)){var d=this.Il.getData(p);if(this.g.Hc(d,l),l.y!=this.Ah&&o.size!=0&&(n=this.vt(o)||n,this.ae.reset(),o.clear(!1)),o.add(d),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(o)||n,o.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.KB(o,!0),l=o,o=this.g.uj(o,this.yo);o!=-1;)p=this.g.uj(o,this.yo),this.g.UT(this.Y,this.g.Sb(l),o),l=o,o=p;o=this.g.Sb(l)}else this.g.KB(o,!1),o=this.g.Sb(o);return this.g.xB(this.Gl),this.g.xB(this.yo),n},a.prototype.vt=function(n){return this.VV(n)},a.prototype.VV=function(n){var o=!1;this.hb==null&&(this.hb=new C(this.g)),this.Ym==null?(this.Ym=new c.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(n);for(var l=0,p=n.size;l<p;l++){var d=n.get(l);d!=-1&&this.jG(d,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(n=this.Ym.get(l),d=this.hb.mz(this.fb.ka(n)),p=-1,this.g.uj(d,this.Gl)==0){d=this.fb.xe(n);for(var y,g=n;d!=-1;){var _=this.fb.ka(d),M=this.hb.mz(_),$=this.g.uj(M,this.Gl);if($!=0){p=M;break}g=d,d=this.fb.xe(d)}d==-1?(y=!0,d=g):(_=this.fb.ka(d),y=this.hb.Dv(_),d=this.fb.lb(d),y=!y);do{if(_=this.fb.ka(d),M=this.hb.mz(_),($=this.g.uj(M,this.Gl))==0&&(y!=this.hb.Dv(_)&&(o=this.g.Ya(M),this.g.kJ(o),this.g.Yg(M,this.g.Na(o)),o=!0),this.g.ir(M,this.Gl,y?3:2),y||(g=this.g.uj(p,this.yo),this.g.ir(p,this.yo,M),this.g.ir(M,this.yo,g)),this.ft--,this.ft==0))return o;p=M,g=d,d=this.fb.lb(d),y=!y}while(g!=n)}return o},a.prototype.UV=function(n){for(var o=0,l=n.size;o<l;o++){var p=n.get(o),d=this.g.Qa(p,this.to),y=this.g.Qa(p,this.Ts);if(d!=-1){var g=this.fb.ka(d);this.hb.mF(g),this.g.Sa(p,this.to,-1)}y!=-1&&(g=this.fb.ka(y),this.hb.mF(g),this.g.Sa(p,this.Ts,-1)),g=-1,d!=-1&&y!=-1?(this.fb.wd(d,-1),this.fb.wd(y,-1),n.set(o,-1)):g=d!=-1?d:y,g!=-1&&(this.jG(p,g)||this.fb.wd(g,-1),n.set(o,-1))}},a.prototype.jG=function(n,o){var l=new c.h,p=new c.h;this.g.Hc(n,l);var d=this.g.V(n);this.g.Hc(d,p);var y=!1;if(l.y<p.y){y=!0;var g=this.hb.iI(n);if(o==-1)var _=this.fb.addElement(g,-1);else _=o,this.fb.Uj(_,g);(g=this.g.Qa(d,this.to))==-1?this.g.Sa(d,this.to,_):this.g.Sa(d,this.Ts,_),d=this.g.cd(n),this.g.uj(d,this.Gl)==0&&this.Ym.add(_)}return d=this.g.Na(n),this.g.Hc(d,p),l.y<p.y&&(y=!0,g=this.hb.iI(d),o==-1?_=this.fb.addElement(g,-1):(_=o,this.fb.Uj(_,g)),(g=this.g.Qa(d,this.to))==-1?this.g.Sa(d,this.to,_):this.g.Sa(d,this.Ts,_),d=this.g.cd(n),this.g.uj(d,this.Gl)==0&&this.Ym.add(_)),y},a.W=function(n,o,l,p){var d=new a;return d.g=n,d.Y=o,d.Il=l,d.hw=p,d.CQ()},a.prototype.DQ=function(){var n=new c.ja(0),o=new c.ja(0),l=-1,p=-1,d=new c.h;d.Sc();for(var y=-1,g=-1,_=-1,M=new c.h,$=this.Il.sc(this.Il.ke);$!=-1;$=this.Il.lb($)){var E=this.Il.getData($);this.g.Hc(E,M);var k=this.g.cd(E);d.rb(M)&&g==k?(p==-1&&(l=this.g.Fy(),p=this.g.Hd()),_==-1&&(_=o.size,this.g.Sa(y,p,_),o.add(1),this.g.uj(k,l)==-1&&(this.g.ir(k,l,y),n.add(k))),this.g.Sa(E,p,_),o.XW(o.Gc()+1)):(_=-1,d.N(M)),y=E,g=k}if(n.size==0)return!1;for(d=new c.ja(0),y=new c.ja(0),g=0,_=n.size;g<_;g++){k=n.get(g);var P=this.g.uj(k,l);for(E=this.g.Qa(P,p),d.clear(!1),y.clear(!1),d.add(P),y.add(E),E=this.g.V(P);E!=P;E=this.g.V(E)){var F=E;if((M=this.g.Qa(F,p))!=-1)if(y.size==0)y.add(M),d.add(F);else if(y.Gc()==M){$=d.Gc();var D=this.g.V($);P=this.g.V(F),this.g.Cc($,P),this.g.Dc(P,$),this.g.Cc(F,D),this.g.Dc(D,F),F=[!1],D=this.g.iG(this.Y,D,this.g.Ya(k),F),this.g.Sa(E,p,-1),F[0]&&this.g.Kf(k,P),E=this.g.Ka(k),E-=P=this.g.Ka(D),this.g.Xj(k,E),o.set(M,o.get(M)-1),o.get(M)==1&&(o.set(M,0),y.Jf(),d.Jf()),E=P=$}else d.add(E),y.add(M)}}return this.g.xB(l),this.g.Ud(p),!0},a}();c.RL=u}(U||(U={})),function(c){var C=function(){function w(){}return w.prototype.jg=function(){this.KA=this.tb=null},w.prototype.get=function(){return this.KA},w.prototype.set=function(u){if(this.KA=u,u!=null)throw u.K()==322&&(this.tb=u),c.i.Ra()},w.prototype.create=function(u){if(u!=322)throw c.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new c.zb),this.KA=this.tb},w}();c.jg=C}(U||(U={})),function(c){(c=c.SL||(c.SL={}))[c.enumLineSeg=1]="enumLineSeg",c[c.enumBezierSeg=2]="enumBezierSeg",c[c.enumArcSeg=4]="enumArcSeg",c[c.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",c[c.enumSegmentMask=7]="enumSegmentMask",c[c.enumDensified=8]="enumDensified"}(U||(U={})),function(c){var C=function(u){this.bj=u,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},w=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new c.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return u.prototype.rB=function(a){if(a!=null){for(var n=0,o=a.length;n<o;n++)this.mW(a[n]);a.length=0}},u.prototype.mW=function(a){a.bj=null,this.Kq.push(a)},u.prototype.Qw=function(a){if(this.Kq.length===0)var n=new C(a);else(n=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return n},u.prototype.NR=function(a,n){return a==0?this.bt[n]:this.Aw[n]},u.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new c.jg);var a=this.HA[this.Ew];return this.Ew++,a},u.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},u.prototype.Qo=function(a){this.oo.push(this.Qw(a))},u.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(a,n){return this.NR(a,n).bj},u.prototype.Fa=function(a,n){if(this.oo.length!=2)throw c.i.Ra();this.ra=a;var o=c.mc.ox(.01*a),l=!1,p=this.oo[0],d=this.oo[1];if(n||5&p.bj.Br(d.bj,a,!0)){if(p.bj.K()==322){var y=p.bj;if(d.bj.K()==322){n=d.bj;var g=c.zb.Yx(y,n,null,this.Hq,this.Dk,a);if(g==0)throw c.zb.Yx(y,n,null,this.Hq,this.Dk,a),c.i.Ra();a=Array(9),c.P.bv(a,null);for(var _=0;_<g;_++){var M=this.Hq[_],$=this.Dk[_],E=p.nB,k=1;M==0?(E=p.oB,k=p.mC):M==1&&(E=p.mB,k=p.lC);var P=d.nB,F=1;$==0?(P=d.oB,F=d.mC):$==1&&(P=d.mB,F=d.lC);var D=new c.h;E==P?(E=new c.h,y.ic(M,E),M=new c.h,n.ic($,M),F/=$=k+F,c.mc.JG(E,M,F,D),c.h.zc(D,E)+c.h.zc(D,M)>o&&(l=!0)):E>P?(y.ic(M,D),M=new c.h,n.ic($,M),c.h.zc(D,M)>o&&(l=!0)):(n.ic($,D),E=new c.h,y.ic(M,E),c.h.zc(D,E)>o&&(l=!0)),a[_]=D}for(p=0,d=-1,_=0;_<=g;_++)(F=_<g?this.Hq[_]:1)!=p&&(o=this.WA(),y.dh(p,F,o),d!=-1&&o.get().Ec(a[d]),_!=g&&o.get().Rc(a[_]),p=F,this.bt.push(this.Qw(o.get()))),d=_;for(y=[0,0,0,0,0,0,0,0,0],_=0;_<g;_++)y[_]=_;for(1<g&&this.Dk[0]>this.Dk[1]&&(F=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=F,_=y[0],y[0]=y[1],y[1]=_),p=0,d=-1,_=0;_<=g;_++)(F=_<g?this.Dk[_]:1)!=p&&(o=this.WA(),n.dh(p,F,o),d!=-1&&(p=y[d],o.get().Ec(a[p])),_!=g&&(p=y[_],o.get().Rc(a[p])),p=F,this.Aw.push(this.Qw(o.get()))),d=_;return l}}throw c.i.Ra()}return!1},u.prototype.Fz=function(a,n,o){if(n.copyTo(this.Cf),this.oo.length!=1)throw c.i.Ra();this.ra=a;var l=this.oo[0];if(o||l.bj.tu(n.D(),a,!0)){if(l.bj.K()!=322)throw c.i.Ra();var p=(a=l.bj).ge(n.D(),!1);this.Hq[0]=p;var d=l.nB;for(o=1,p==0?(d=l.oB,o=l.mC):p==1&&(d=l.mB,o=l.lC),l=new c.h,d==0?(d=new c.h,a.ic(p,d),n=n.D(),c.mc.JG(d,n,1/(o+1),l)):0<d?(l=new c.h,a.ic(p,l)):l=n.D(),o=0,p=-1,d=0;1>=d;d++){if((n=1>d?this.Hq[d]:1)!=o){var y=this.WA();a.dh(o,n,y),p!=-1&&y.get().Ec(l),d!=1&&y.get().Rc(l),o=n,this.bt.push(this.Qw(y.get()))}p=d}this.Cf.Db(l)}},u}();c.OC=w}(U||(U={})),function(c){var C=function(){function w(u){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new c.h}return w.prototype.wW=function(u){if(this.ib!=u.ib)throw c.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.cg=u.cg,this.Bm=u.Bm,this.tk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw c.i.de();this.Kd++}return this.tk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw c.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},w.prototype.xW=function(){this.Af=-1,this.Kd=0},w.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},w.prototype.Wb=function(u,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.DM();if(u>=n&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-n)}a=0<=a&&a<this.ib.ea()&&u>=this.ib.Ca(a)&&u<this.ib.Wc(a)?a:this.ib.nz(u),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=u-this.ib.Ca(a),this.cg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(u){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(u)&&(a=0),this.ib.Ka(u)-a},w.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},w.prototype.EB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.DM=function(){return this.ib.Ca(this.gb)},w.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Sn=function(){return this.Af==this.cg-1},w.prototype.Ia=function(){return this.Kd<this.cg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Qf=function(){var u=new w(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.cg=this.cg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},w.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw c.i.de();this.Af=this.Kd;var u=this.xb();this.ib.oc();var a=this.ib.Se,n=1;switch(a!=null&&(n=7&a.read(u)),a=this.ib.description,n){case 1:this.tb==null&&(this.tb=new c.zb),this.tk=this.tb;break;case 2:throw c.i.ga("internal error");default:throw c.i.Ra()}this.tk.Pf(a),n=this.kk(),this.ib.Hc(u,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.tk.Rc(this.Fs);for(var o=1,l=a.Ba;o<l;o++)for(var p=a.ld(o),d=c.sa.Wa(p),y=0;y<d;y++){var g=this.ib.Vc(p,u,y);this.tk.TB(p,y,g),g=this.ib.Vc(p,n,y),this.tk.JB(p,y,g)}},w.prototype.VS=function(){return this.gb==this.ib.ea()-1},w.prototype.Rn=function(){var u=this.ib.QR();return u!=null&&(7&u.read(this.Af))!=1},w}();c.TL=C}(U||(U={})),function(c){var C=function(){function w(u){u instanceof c.ba?(this.sH=u,this.za=-1,this.Gi=1):(this.qT=u.slice(0),this.za=-1,this.Gi=u.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},w.prototype.re=function(){},w}();c.$c=C}(U||(U={})),function(c){var C=function(){this.next=null},w=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.wX=function(a,n,o){this.ri=a,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=c.P.mg(384,0)),this.iK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},u.prototype.iK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var n=this.Yl[a];n!=null;){var o=n;n=n.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.dJ=function(a){for(this.fF=a==u.Bx,a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()},u.prototype.fy=function(a,n,o,l){if(n!=l){var p=1;if(n>l&&(p=a,a=o,o=p,p=n,n=l,l=p,p=-1),!(0>l||n>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var d=(o-a)/(l-n);l>this.rl&&(o=d*((l=this.rl)-n)+a),0>n&&(a=d*(0-n)+a,n=0);var y=Math.max(this.ri+1,8388607);-8388607>a?(n=(0-a)/d+n,a=0):a>y&&(n=(this.ri-a)/d+n,a=this.ri),-8388607>o?l=(0-a)/d+n:o>y&&(l=(this.ri-a)/d+n),(n=c.P.truncate(n))!=(l=c.P.truncate(l))&&((o=new C).x=c.P.truncate(4294967296*a),o.y=n,o.H=l,o.RP=c.P.truncate(4294967296*d),o.dir=p,this.Yl==null&&(this.Yl=c.P.mg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},u.prototype.nN=function(){if(this.Lh!=null){for(var a=!1,n=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var l=o;o=o.next,n!=null?n.next=o:this.Lh=o,l.next=null}else o.x+=o.RP,n!=null&&n.x>o.x&&(a=!0),n=o,o=o.next;a&&(this.Lh=this.aK(this.Lh))}},u.prototype.gN=function(a){if(!(a>=this.rl)){var n=this.Yl[a];if(n!=null){this.Yl[a]=null,n=this.aK(n),this.Vq-=this.bK,a=this.Lh;for(var o=!0,l=n,p=null;a!=null&&l!=null;)a.x>l.x?(o&&(this.Lh=l),o=l.next,l.next=a,p!=null&&(p.next=l),p=l,l=o):(o=a.next,a.next=l,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=n)}}},u.$J=function(a,n){return 0>a?0:a>n?n:a},u.prototype.UP=function(){if(this.Lh!=null){for(var a=0,n=this.Lh,o=c.P.truncate(c.P.SG(n.x)),l=n.next;l!=null;l=l.next)if(a=this.fF?1^a:a+l.dir,l.x>n.x){var p=c.P.truncate(c.P.SG(l.x));a!=0&&(n=u.$J(o,this.ri),(o=u.$J(p,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=o,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),n=l,o=p}}},u.prototype.aK=function(a){for(var n=0,o=a;o!=null;o=o.next)n++;if(this.bK=n,n==1)return a;this.Lf==null?this.Lf=c.P.mg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=c.P.mg(Math.max(n,2*this.Lf.length),null));var l=0;for(o=a;o!=null;o=o.next)this.Lf[l++]=o;for(n==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):u.vN(this.Lf,n,function(p,d){return p==d?0:p.x<d.x?-1:p.x>d.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,l=1;l<n;l++)o.next=this.Lf[l],o=this.Lf[l],this.Lf[l]=null;return o.next=null,a},u.vN=function(a,n,o){if(n==a.length)a.sort(o);else{var l=a.slice(0,0),p=a.slice(n);n=a.slice(0,n).sort(o),a.length=0,a.push.apply(a,l.concat(n).concat(p))}},u.Bx=0,u}();c.Ox=w}(U||(U={})),function(c){var C=function(){function w(){}return w.prototype.wi=function(u,a){var n=this.g.Qa(u,this.Rq);if(this.Fl==n&&(this.Fl=this.pe.lb(this.Fl)),this.jo==n&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,n),this.dk(u),a&&(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u){var o=this.g.V(u);if(o!=u){if((n=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(u))!=u&&(n=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},w.prototype.kD=function(){for(var u=!1,a=new c.h;;){this.Yh==null?(this.Yh=new c.ja(0),this.Bs=new c.ja(0),this.ye=new c.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.jo,o=0,l=!0;n!=this.Fl;){var p=this.pe.getData(n),d=new c.h;this.g.Hc(p,d),l&&(this.g.Hc(p,a),l=!1),d=this.g.Na(p);var y=this.g.V(p);this.g.Qa(d,this.Ag)!=-559038737&&(this.Yh.add(d),this.g.Sa(d,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(y,this.Ag)!=-559038737&&(this.Yh.add(y),this.g.Sa(y,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),n=this.pe.lb(n)}if(2>this.Yh.size)break;var g=this;for(this.ye.Wd(0,this.ye.size,function(_,M){return g.kM(_,M)}),n=0,o=this.ye.size;n<o;n++)l=this.ye.get(n),l=this.Yh.get(l),this.g.Sa(l,this.Ag,n),d=new c.h,this.g.Hc(l,d);for(d=this.OM(a),n=0,o=this.ye.size;n<o;n++)(l=this.ye.get(n))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.Ag,-1));if(!d)break;u=!0}return u},w.prototype.OM=function(u){for(var a=!1,n=!0;n;){n=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var l=this.em(o),p=0,d=this.ye.size;p<d&&o!=-1&&l!=-1&&o!=l;p++){var y=this.ye.get(o);l=this.ye.get(l),y=this.Yh.get(y),l=this.Yh.get(l);var g=this.g.V(y);this.g.Fv(g,u)||(g=this.g.Na(y));var _=this.g.V(l);this.g.Fv(_,u)||(_=this.g.Na(l));var M=this.ru(g,y),$=this.ru(_,l),E=M?this.g.Na(g):this.g.V(g),k=$?this.g.Na(_):this.g.V(_),P=!1;(this.up(g)||this.up(_)||this.up(y)||this.up(l)||this.up(E)||this.up(k))&&(P=!0),!P&&this.g.hq(y,l)&&(P=!0,this.oD(M,$,g,y,_,l)),!P&&this.g.hq(E,k)&&(P=!0,this.oD(!M,!$,g,E,_,k)),P&&(a=!0),n=n||P,o=this.em(o),l=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),l=this.em(o),p=0,d=this.ye.size;p<d&&o!=-1&&l!=-1&&o!=l;p++)y=this.ye.get(o),l=this.ye.get(l),y=this.Yh.get(y),l=this.Yh.get(l),g=this.g.V(y),this.g.Fv(g,u)||(g=this.g.Na(y)),_=this.g.V(l),this.g.Fv(_,u)||(_=this.g.Na(l)),M=this.ru(g,y),$=this.ru(_,l),E=M?this.g.Na(g):this.g.V(g),k=$?this.g.Na(_):this.g.V(_),this.yM(M,$,y,g,E,l,_,k)&&(a=!0),o=this.em(o),l=this.em(o);return a},w.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new c.Hg().HU(this.hw,this.g,this.Y,this.od);var u=!1,a=!0;this.Ag=this.Rq=-1;var n=this.g.I(this.Y),o=new c.ja(0);o.Jb(n);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var p=this.g.Ya(l),d=0,y=this.g.Ka(l);d<y;d++)o.add(p),p=this.g.V(p);var g=this.g.ud.o,_=this.g.ud.Mf;this.g.wb.oc();var M=this.g.wb.Aa[0].o;for(o.Wd(0,n,function(E,k){var P=g[_*E],F=g[_*k],D=M[2*P];P=M[2*P+1];var V=M[2*F];return(D=P<(F=M[2*F+1])?-1:P>F?1:D<V?-1:D>V?1:0)==0&&(D=(E=g[_*E+3])<(k=g[_*k+3])?-1:E==k?0:1),D}),this.Rq=this.g.Hd(),this.pe=new c.lp,this.MA=this.pe.Rh(0),this.pe.hn(n),l=0;l<n;l++)p=o.get(l),d=this.pe.addElement(this.MA,p),this.g.Sa(p,this.Rq,d);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(u=!0);a;){a=!1,n=0,o=!1;do{o=!1,this.jo=-1,y=0,l=new c.h,d=new c.h;for(var $=this.pe.sc(this.MA);$!=-1;)p=this.pe.getData($),this.jo!=-1?(this.g.Hc(p,d),l.rb(d)?y++:(l.N(d),this.Fl=$,0<y&&(p=this.kD())&&(o=!0,this.Fl!=-1&&(p=this.pe.getData(this.Fl),this.g.Hc(p,l))),this.jo=$=this.Fl,y=0)):(this.jo=$,this.g.Hc(this.pe.getData($),l),y=0),$!=-1&&($=this.pe.lb($));if(this.Fl=-1,0<y&&(p=this.kD())&&(o=!0),10<n++)throw c.i.Ra();o&&this.BM(),this.YC()&&(o=!0),a=a||o&&!1,u=u||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),c.RL.W(this.g,this.Y,this.pe,this.hw)||u},w.prototype.ru=function(u,a){return this.g.V(a)!=u},w.prototype.yM=function(u,a,n,o,l,p,d,y){if(o==d)return this.dk(n),this.dk(p),!1;var g=this.g.Qa(n,this.Ag),_=this.g.Qa(l,this.Ag),M=this.g.Qa(p,this.Ag),$=this.g.Qa(y,this.Ag),E=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,E[0]=g,n[1]=0,E[1]=_,n[2]=1,E[2]=M,n[3]=1,E[3]=$,g=1;4>g;g++){for(_=E[g],M=n[g],$=g-1;0<=$&&E[$]>_;)E[$+1]=E[$],n[$+1]=n[$],$--;E[$+1]=_,n[$+1]=M}return E=0,n[0]!=0&&(E|=1),n[1]!=0&&(E|=2),n[2]!=0&&(E|=4),n[3]!=0&&(E|=8),(E==5||E==10)&&(u==a?u?(this.g.Cc(y,o),this.g.Dc(o,y),this.g.Cc(l,d),this.g.Dc(d,l)):(this.g.Dc(y,o),this.g.Cc(o,y),this.g.Dc(l,d),this.g.Cc(d,l)):u?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(d,l),this.g.Cc(l,d)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(d,l),this.g.Dc(l,d)),!0)},w.prototype.oD=function(u,a,n,o,l,p){this.IY?this.QM():this.PM(u,a,n,o,l,p)},w.prototype.QM=function(){throw c.i.ga("not implemented.")},w.prototype.PM=function(u,a,n,o,l,p){if(u!=a)u?(this.g.Cc(n,l),this.g.Dc(l,n),this.g.Cc(p,o),this.g.Dc(o,p),this.xn(l,n),this.wi(l,!0),this.g.oi(l,!0),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(l,n),this.g.Dc(n,l),this.g.Cc(o,p),this.g.Dc(p,o),this.xn(l,n),this.wi(l,!0),this.g.oi(l,!1),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.dk(o);else{var d=u?n:o,y=a?l:p;for(u=u?o:n,a=a?p:l,l=!1,this.g.Cc(d,y),this.g.Cc(y,d),this.g.Dc(u,a),this.g.Dc(a,u),p=a;p!=y;)n=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,n),l=l||p==d,p=o;l||(n=this.g.Na(y),o=this.g.V(y),this.g.Dc(y,o),this.g.Cc(y,n)),this.xn(y,d),this.wi(y,!0),this.g.oi(y,!1),this.dk(d),this.xn(a,u),this.wi(a,!0),this.g.oi(a,!1),this.dk(u)}},w.prototype.YC=function(){for(var u=!1,a=this.g.Ob(this.Y);a!=-1;){for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l&&1<l;){var p=this.g.Na(n),d=this.g.V(n);this.g.hq(p,d)?(u=!0,this.wi(n,!1),this.g.qd(n,!0),this.wi(d,!1),this.g.qd(d,!0),n=p,o=0,l=this.g.Ka(a)):(n=d,o++)}if(2>this.g.Ka(a)){for(u=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++)this.wi(u,!1),u=this.g.V(u);a=this.g.ar(a),u=!0}else a=this.g.Sb(a)}return u},w.prototype.up=function(u){for(var a=!1;;){var n=this.g.V(u),o=this.g.Na(u);if(n==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(n,o)||(a=!0,this.dk(o),this.dk(n),this.wi(u,!0),this.g.oi(u,!1),this.xn(n,o),this.wi(n,!0),this.g.oi(n,!0),n==o))break;u=o}return a},w.prototype.BM=function(){for(var u=0,a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a)){var n=this.pe.getData(a);this.g.cj(n,-1)}for(var o=0,l=this.g.Ob(this.Y);l!=-1;)if((a=this.g.Ya(l))==-1||this.g.cd(a)!=-1)n=l,l=this.g.Sb(l),this.g.br(n);else{this.g.cj(a,l);var p=1;for(n=this.g.V(a);n!=a;n=this.g.V(n))this.g.cj(n,l),p++;this.g.fp(l,!1),this.g.Xj(l,p),this.g.Yg(l,this.g.Na(a)),o+=p,u++,l=this.g.Sb(l)}for(a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a))n=this.pe.getData(a),this.g.cd(n)==-1&&(l=this.g.iG(this.Y,n,n,null),o+=this.g.Ka(l),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,o),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},w.prototype.em=function(u){for(var a=0,n=this.ye.size-1;a<n;a++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},w.prototype.xn=function(u,a){var n=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.Ag);this.g.gC(u,a),this.g.Sa(a,this.Rq,n),this.g.Sa(a,this.Ag,o)},w.prototype.dk=function(u){var a=this.g.Qa(u,this.Ag);a!=-1&&(this.ye.set(a,-1),this.g.Sa(u,this.Ag,-1))},w.W=function(u,a,n,o,l){var p=new w;return p.g=u,p.Y=a,p.sA=n,p.hw=o,p.od=l,p.SM()},w.prototype.kM=function(u,a){var n=this.Yh.get(u),o=new c.h;this.g.Hc(n,o),n=new c.h;var l=this.Yh.get(a);return this.g.Hc(l,n),o.rb(n)?0:(l=this.Bs.get(u),u=new c.h,this.g.Hc(l,u),l=this.Bs.get(a),a=new c.h,this.g.Hc(l,a),(l=new c.h).vc(o,u),(o=new c.h).vc(n,a),c.h.pu(l,o))},w}();c.tn=C}(U||(U={})),function(c){var C;(C=c.VL||(c.VL={}))[C.Local=0]="Local",C[C.Geographic=1]="Geographic",C[C.Projected=2]="Projected",C[C.Image=3]="Image",C[C.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(c.OL||(c.OL={}));var w=function(){function u(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return u.prototype.Fc=function(){return this.fg},u.prototype.QF=function(){return 1},u.prototype.QW=function(a){this.hA=a},u.prototype.Yd=function(){if(this.hA!==null)return this.hA;var a=.001;return this.fg!=0?a=c.yr.xQ(this.fg):this.yh!=null&&(a=c.SC.yQ(this.yh)),a},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.fg!=0?c.Uc.ah(c.yr.Ny(this.fg)):this.yh!=null?c.SC.zQ(this.yh):void 0},u.Tb=function(a){if(a.fg!=0){if(c.yr.US(a.fg)===!0)return 1;if(c.yr.WS(a.fg)===!0)return 2}return 4},u.prototype.cs=function(){var a=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=c.yr.AK(a),this.Jo!=-1?this.Jo:a)},u.create=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var n=new u;return n.fg=a,n},u.lP=function(a){if(a==null||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var n=new u;return n.yh=a,n},u.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.fg==a.fg&&(this.fg!=0||this.yh===a.yh)},u.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.rp!=="")return this.rp;var a=this.toString();if(Array.prototype.reduce)return this.rp="S"+a.split("").reduce(function(l,p){return(l=(l<<5)-l+p.charCodeAt(0))&l},0);var n=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)n=(n<<5)-n+a.charCodeAt(o),n&=n;return this.rp="S"+n},u.prototype.Mn=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=c.iu.tP(this)},u.UN=2147483645,u.VN=9007199254740990,u}();c.Gg=w}(U||(U={})),function(c){var C=function(w){function u(){var a=w!==null&&w.apply(this,arguments)||this;return a.Li=null,a.NT=null,a.Jq=new c.UL,a.Go=null,a.lw=null,a}return St(u,w),u.tP=function(a){var n=new u;if(n.fg=a.fg,n.Jo=a.Jo,n.UH=a.UH,n.yh=a.yh,n.yh!==""&&n.yh!==null){a=u.fM(n.yh);var o=u.dM(n.yh);n.Jq.Wx(a,o,c.ju.Integer64),n.ay(a),n.cy(o),n.fg=a.cs()}else a=u.eM(n.fg),n.ay(a),n.cy(null),n.Jq.Wx(a,null,c.ju.Integer64);return n},u.prototype.Yd=function(a){return this.Jq.Mn(a)},u.dM=function(a){if(0>=a.length)throw c.i.O();var n=null;try{n=c.IC.fromString(a)}catch{n=null}return n==null?null:u.XC(n,!0)},u.prototype.ay=function(a){this.Ld=a,this.Go=this.Ld.Id()},u.prototype.cy=function(a){this.FH=a,this.NT=this.FH!=null?this.FH.Go:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.mk=function(){return this.Ld.mk()},u.prototype.fS=function(a){return c.JC.Ky(this.Ld,a.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.ih(a),a},u.prototype.Le=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.uo},u.prototype.CR=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.BR(a),a},u.prototype.rv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},u.prototype.KQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Go.getUnitFactor()},u.prototype.pz=function(a){return this.Jq.pz(a)},u.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.hk().tc();if(a==0||a===4)throw c.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw c.i.Ra();return this.lw=u.XE(a,this.Jq.QF())},u.XE=function(a,n){if(a==null)throw c.i.O("null pointer.");var o=new u;return a=u.ou(a,!0),o.Jq.Wx(a,null,n),o.ay(a),o.cy(null),o.fg=a.cs(),o},u.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case c.Tc.PE_TYPE_GEOGCS:return 1;case c.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(a,n){var o=a.getCode();if(0>=o&&0<(o=c.qf.getCode(a))){if((a=c.qf.coordsys(o))==null)throw c.i.O("Text to wkid mapping had failed: "+o);return u.ou(a,n)}if(n&&0<o&&(n=u.qx[o]))return n;n=c.Ab.zv(a,o,!1);var l=u.gK[n];return l||(a=0>=o?a:c.qf.coordsys(o),a=new c.JC(a),u.gK[n]=a,0<o&&(u.qx[o]=a),a)},u.eM=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var n=u.qx[a];if(n!=null)return n;if((n=c.qf.coordsys(a))==null)throw c.i.O("Invalid or unsupported wkid: "+a);return(n=u.ou(n,!1)).cs()!=a&&(u.qx[a]=n),n},u.fM=function(a){if(a==null||a===void 0||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=c.qf.fromString(c.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw c.i.O("Cannot create SpatialReference from text. "+o.message)}if(n===null)throw c.i.O("Cannot create SpatialReference from text. ");return u.ou(n,!0)},u.XC=function(a,n){var o,l=a.getCode();if(0>=l&&0<(l=c.qf.getCode(a))){if((l=c.qf.vertcs(l))===null)throw c.i.O();return u.XC(l,n)}if(n&&0<l&&(n=u.fK[l])||(a=c.Ab.zv(a,l,!1),n=u.hK[a]))return n;if(0>=l||(o=c.qf.vertcs(l)),o===null)throw c.i.O();return o=new c.KL(o),u.hK[a]=o,0<l&&(u.fK[l]=o),o},u.nI=function(a,n){if(n===null||n.B())return null;var o=new c.l;if(n!==null&&a.Tb()!=1){var l=a.tc(),p=l.gh();a=c.xr.Pr(a,l,null,null),(n=c.Gx.local().W(n,a,null)).A(o)}else p=a.gh(),n.A(o);return n=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new c.GC(o.v,o.G,o.C,o.H,n,p)},u.gD=function(a){var n={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var l=a[o],p={HY:!1,VY:"",UY:-1,geogtran:null};l.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var d=l.getGeogtran().getCode();-1<d?p.wkid=d:p.wkt=l.getGeogtran().toString(),n.steps.push(p)}return n},u.SR=function(a,n,o,l){return o===void 0&&(o=null),o=u.nI(l,o),a=c.np.getGTlist(a.gh(),n.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,1),n=null,a&&0<a.length&&(n=this.gD(a[0]),c.Lx.destroy(a)),o!==null&&o.destroy(),n},u.TR=function(a,n,o,l){var p;if(o===void 0&&(o=null),l===void 0&&(l=null),p===void 0&&(p=30),o=u.nI(l,o),a=c.np.getGTlist(a.gh(),n.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,p),n=[],a&&0<a.length){for(p=0;p<a.length;p++)n.push(this.gD(a[p]));c.Lx.destroy(a)}return o!==null&&o.destroy(),n},u.qx={},u.gK={},u.fK={},u.hK={},u}(c.Gg);c.iu=C}(U||(U={})),function(c){var C,w;(w=C=c.ju||(c.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var u=function(){function a(){this.sp()}return a.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.nA=n.nA,this.Ho=n.Ho,this.mA=n.mA,this.Kk=n.Kk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},a.prototype.QF=function(){return this.Tm},a.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=C.FloatingPoint},a.prototype.Wx=function(n,o,l){if(this.sp(),this.Tm=l,l!=C.FloatingPoint){var p=new c.l;n.cR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=n.Re.getType())==c.Tc.PE_TYPE_GEOGCS?(p=(l==C.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/p):p==c.Tc.PE_TYPE_PROJCS&&(p=(l==C.Integer64?1e-4:.001)*n.rm(),this.Rj=1/p),o!=null?(p=(l==C.Integer32?.001:1e-4)*o.DH,this.Ho=1/p):this.Ho=1e4,this.TM(),this.Kk=n.uw,this.Oq=o!=null?.001*o.DH:.001,this.Nq=2220446049250313e-29},a.prototype.TM=function(){if(this.Tm!=C.FloatingPoint){var n=this.Tm==C.Integer64?c.Gg.VN:c.Gg.UN,o=n/this.Rj,l=this.Hm+o,p=c.P.truncate((l-this.Hm)*this.Rj);p>n&&(this.Rj=n/(l-this.Hm)),o=this.Im+o,(p=c.P.truncate((o-this.Im)*this.Rj))>n&&(this.Rj=n/(o-this.Im))}},a.prototype.WB=function(n){switch(n){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Mn=function(n){switch(n){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(n){if(this.Tm==C.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},a.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Kk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();c.UL=u}(U||(U={})),function(c){function C(l,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function w(l,p,d){return l=l/6378137*57.29577951308232,d?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function u(l,p,d){var y=l.Qf();if(l.K()===33)p=p(y.Ng(),y.kh()),y.Db(p[0],p[1]);else if(l.K()===197){var g=p(l.gs(),l.js(),d);p=p(l.fs(),l.hs(),d),y.L(g[0],g[1],p[0],p[1])}else for(g=new c.h,l=0;l<y.I();l++){y.D(l,g);var _=p(g.x,g.y,d);g.na(_[0],_[1]),y.Db(l,g)}return y}function a(l){return u(l,w,!0)}function n(l){return u(l,C,!0)}var o=Math.PI/180;c.PK=function(){function l(){}return l.xu=function(p){var d=Math.sqrt(.006694379990197414),y=Math.sin(p.y*o);return c.h.construct(6378137*p.x*o,3.1677196636462314e6*(y/(1-.006694379990197414*y*y)-1/(2*d)*Math.log((1-d*y)/(1+d*y))))},l.Ux=function(p,d,y,g){var _=.0033528106647474805,M=Math.sin(y);y=Math.cos(y);var $=(1-_)*Math.tan(p),E=$*(p=1/Math.sqrt(1+$*$)),k=Math.atan2($,y),P=($=p*M)*$,F=1-P,D=27233160610754688e-5*F/4040829998466145e-2,V=1+D/16384*(4096+D*(D*(320-175*D)-768)),N=D/1024*(256+D*(D*(74-47*D)-128));D=g/(635675231424518e-8*V);for(var G,J,W,ee=2*Math.PI;1e-12<Math.abs(D-ee);)W=Math.cos(2*k+D),ee=D,D=g/(635675231424518e-8*V)+N*(G=Math.sin(D))*(W+N/4*((J=Math.cos(D))*(2*W*W-1)-N/6*W*(4*G*G-3)*(4*W*W-3)));return g=E*G-p*J*y,F=_/16*F*(4+_*(4-3*F)),c.h.construct((d+(Math.atan2(G*M,p*J-E*G*y)-(1-F)*_*$*(D+F*G*(W+F*J*(2*W*W-1)))))/o,Math.atan2(E*J+p*G*y,(1-_)*Math.sqrt(P+g*g))/o)},l.HM=function(p,d,y,g){var _=.0033528106647474805,M=g-d,$=Math.atan((1-_)*Math.tan(p)),E=Math.atan((1-_)*Math.tan(y)),k=Math.sin($);$=Math.cos($);var P=Math.sin(E);E=Math.cos(E);var F=M,D=1e3;do{var V=Math.sin(F),N=Math.cos(F),G=Math.sqrt(E*V*E*V+($*P-k*E*N)*($*P-k*E*N));if(G===0)return 0;N=k*P+$*E*N;var J=Math.atan2(G,N),W=$*E*V/G,ee=1-W*W;V=N-2*k*P/ee,isNaN(V)&&(V=0);var Z=_/16*ee*(4+_*(4-3*ee)),ae=F;F=M+(1-Z)*_*W*(J+Z*G*(V+Z*N*(2*V*V-1)))}while(1e-12<Math.abs(F-ae)&&0<--D);return D===0?(k=g-d,{azimuth:Math.atan2(Math.sin(k)*Math.cos(y),Math.cos(p)*Math.sin(y)-Math.sin(p)*Math.cos(y)*Math.cos(k)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos(g-d))}):(d=(p=27233160610754688e-5*ee/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(E*Math.sin(F),$*P-k*E*Math.cos(F)),TQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(J-d*G*(V+d/4*(N*(2*V*V-1)-d/6*V*(4*G*G-3)*(4*V*V-3)))),TY:Math.atan2($*Math.sin(F),$*P*Math.cos(F)-k*E)})},l.eQ=function(p){var d=p.hasAttribute(1),y=p.hasAttribute(2),g=[],_=p.ea(),M=null,$=null;d&&(M=p.vb(1)),y&&($=p.vb(2));for(var E=new c.h,k=0;k<_;k++){for(var P=p.Ca(k),F=p.Ka(k),D=0,V=0,N=NaN,G=NaN,J=NaN,W=NaN,ee=p.ec(k),Z=[],ae=P;ae<P+F;ae++){p.D(ae,E),W=J=NaN;var de=[E.x,E.y];d&&(J=M.get(ae),de.push(J)),y&&(_=$.get(ae),de.push(W)),ae==P&&ee&&(D=E.x,V=E.y,N=J,G=W),Z.push(de)}!ee||D==E.x&&V==E.y&&(!d||isNaN(N)&&isNaN(J)||N==J)&&(!y||isNaN(G)&&isNaN(W)||G==W)||Z.push(Z[0].slice(0)),g.push(Z)}return g},l.Ry=function(p,d){p=l.eQ(p),637.100877141506>d&&(d=637.100877141506);for(var y,g=[],_=0;_<p.length;_++){var M,$,E=p[_];g.push(y=[]),y.push([E[0][0],E[0][1]]);var k=E[0][0]*o,P=E[0][1]*o;for(M=0;M<E.length-1;M++){var F=E[M+1][0]*o,D=E[M+1][1]*o;if(k!==F||P!==D){F=(D=l.HM(P,k,D,F)).azimuth;var V=(D=D.TQ)/d;if(1<V){for($=1;$<=V-1;$++){var N=l.Ux(P,k,F,$*d);y.push([N.x,N.y])}$=l.Ux(P,k,F,(D+Math.floor(V-1)*d)/2),y.push([$.x,$.y])}P=l.Ux(P,k,F,D),y.push([P.x,P.y]),k=P.x*o,P=P.y*o}}}return{lJ:g}},l.SQ=function(p){for(var d=[],y=0;y<p.length;y++){var g=p[y];g=l.Ry(g,1e4),d.push(g)}p=[];for(var _=0;_<d.length;_++){g=d[_];var M=0;for(y=0;y<g.lJ.length;y++){var $,E=g.lJ[y],k=l.xu(c.h.construct(E[0][0],E[0][1])),P=l.xu(c.h.construct(E[E.length-1][0],E[E.length-1][1])),F=P.x*k.y-k.x*P.y;for($=0;$<E.length-1;$++)k=l.xu(c.h.construct(E[$+1][0],E[$+1][1])),F+=(P=l.xu(c.h.construct(E[$][0],E[$][1]))).x*k.y-k.x*P.y;M+=F}M/=1,p.push(M/-2)}return p},l}(),c.cb=function(){function l(){}return l.sB=function(p,d,y,g,_,M,$){l.bD[p.dc()]=d,isNaN(y)==0&&(l.hD[p.dc()]=y),isNaN(g)==0&&(l.uD[p.dc()]=g),isNaN(_)==0&&(l.WC[p.dc()]=_),l.iD[p.dc()]=M,$!==null&&(l.jD[p.dc()]=$)},l.Yw=function(p,d,y){l.nD[p.dc()+"-"+d.dc()]=y},l.tc=function(p){if((p=l.bD[p.dc()])==null)throw c.i.Fe();return p},l.bf=function(p){if((p=l.hD[p.dc()])==null)throw c.i.Fe();return p},l.xv=function(p){if((p=l.uD[p.dc()])==null)throw c.i.Fe();return p},l.gv=function(p){if((p=l.WC[p.dc()])==null)throw c.i.Fe();return p},l.ih=function(p){if((p=l.jD[p.dc()])==null)throw c.i.Fe();return c.l.construct(p[0],p[1],p[2],p[3])},l.Xc=function(p){if((p=l.iD[p.dc()])==null)throw c.i.Fe();return p},l.Bh=function(p,d,y){if(d.Nb(y))return p;var g=l.nD[d.dc()+"-"+y.dc()];if(g!==void 0)return g(p,d,y);throw c.i.Fe()},l.wt=function(){throw c.i.Fe()},l.XQ=function(){throw c.i.Fe()},l.ZV=function(){throw c.i.Fe()},l.ol=function(){throw c.i.Fe()},l.nW=function(){var p=c.Gg.create(102100),d=c.Gg.create(3857),y=c.Gg.create(4326);c.cb.sB(p,y,NaN,NaN,NaN,!1,null),c.cb.sB(y,y,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),c.cb.sB(d,y,NaN,NaN,NaN,!1,null),c.cb.Yw(p,y,a),c.cb.Yw(y,p,n),c.cb.Yw(d,y,a),c.cb.Yw(y,d,n)},l.bD=[],l.hD=[],l.uD=[],l.WC=[],l.iD=[],l.jD=[],l.nD=[],l}()}(U||(U={})),U.cb.nW(),function(c){var C=function(){function w(u){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return w.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.ko,this.ko=u):this.Dl--,this.size--},w.prototype.U=function(u,a){return this.o[u*this.Mf+a]},w.prototype.T=function(u,a,n){this.o[u*this.Mf+a]=n},w.prototype.De=function(){var u=this.ko;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw c.i.de();this.yz(u)}u=this.Dl,this.Dl++}else this.ko=this.o[u*this.Mf];this.size++;for(var a=u*this.Mf;a<u*this.Mf+this.Mf;a++)this.o[a]=-1;return u},w.prototype.Nl=function(u){var a=this.ko;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw c.i.de();this.yz(a)}a=this.Dl,this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var n=a*this.Mf,o=0;o<u.length;o++)this.o[n+o]=u[o];return a},w.prototype.oj=function(u){this.ko=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},w.prototype.sx=function(u,a){u*=this.Mf,a*=this.Mf;for(var n=0;n<this.Mf;n++){var o=this.o[a+n];this.o[a+n]=this.o[u+n],this.o[u+n]=o}},w.prototype.bC=function(u,a,n){var o=this.o[this.Mf*a+n];this.o[this.Mf*a+n]=this.o[this.Mf*u+n],this.o[this.Mf*u+n]=o},w.GG=function(u){return 0<=u},w.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*u);a.set(this.o,0),this.o=a,this.Jg=u},w}();c.ad=C}(U||(U={})),function(c){var C,w;(w=C||(C={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function n(o){this.Ce=o,this.Ah=NaN,this.$G=new c.jg,this.aH=new c.jg,this.os=new c.Oc,this.ps=new c.Oc}return n.prototype.compare=function(o,l,p){if(o=o.ka(p),this.Ce.kB(l,this.$G),this.Ce.kB(o,this.aH),l=this.$G.get(),o=this.aH.get(),this.os.L(l.ta,l.qa),this.ps.L(o.ta,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=l.oa==l.ma;var d=o.oa==o.ma;if(p||d){if(p&&d)return 0;if(l.oa==o.oa&&l.ta==o.ta)return p?1:-1;if(l.ma==o.ma&&l.qa==o.qa)return p?-1:1}return(p=l.Me(this.Ah,this.os.pa))==(d=o.Me(this.Ah,this.ps.pa))&&((d=.5*((p=Math.min(l.ma,o.ma))+this.Ah))==this.Ah&&(d=p),p=l.Me(d,this.os.pa),d=o.Me(d,this.ps.pa)),p<d?-1:p>d?1:0},n.prototype.WJ=function(o){this.Ah=o},n}(),a=function(){function n(o){this.ib=o,this.RH=new c.jg,this.Cf=new c.h,this.rA=new c.Oc}return n.prototype.fX=function(o){this.Cf.N(o)},n.prototype.compare=function(o,l){return this.ib.kB(o.ka(l),this.RH),o=this.RH.get(),this.rA.L(o.ta,o.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},n}();C=function(){function n(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new c.Nd,this.XN=2147483647,this.WN=c.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(o){this.gA=o},n.prototype.$m=function(){this.he==null&&(this.he=new c.ad(8));var o=this.he.De();return this.he.T(o,1,0),o},n.prototype.qU=function(){this.Lc==null&&(this.Lc=new c.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.EJ(o,l),this.EJ(l,o),o},n.prototype.hI=function(){this.ze==null&&(this.ze=new c.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},n.prototype.OW=function(o,l){this.he.T(o,7,l)},n.prototype.on=function(o,l){this.he.T(o,2,l)},n.prototype.NW=function(o,l){this.he.T(o,1,l)},n.prototype.gX=function(o,l){this.he.T(o,3,l)},n.prototype.dX=function(o,l){this.he.T(o,4,l)},n.prototype.er=function(o,l){this.he.T(o,5,l)},n.prototype.$Q=function(o){return this.he.U(o,5)},n.prototype.MW=function(o,l){this.he.T(o,6,l)},n.prototype.YM=function(o,l){this.MW(l,o)},n.prototype.DJ=function(o,l){this.Lc.T(o,1,l)},n.prototype.EJ=function(o,l){this.Lc.T(o,4,l)},n.prototype.Vl=function(o,l){this.Lc.T(o,5,l)},n.prototype.Ul=function(o,l){this.Lc.T(o,6,l)},n.prototype.VW=function(o,l){this.Lc.T(o,2,l)},n.prototype.cx=function(o,l){this.Lc.T(o,3,l)},n.prototype.GF=function(o){return this.Lc.U(o,3)},n.prototype.Ht=function(o,l){this.Lc.T(o,7,l)},n.prototype.zK=function(o,l){if(this.om(o)!=-1)for(l=l?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,l)},n.prototype.xx=function(o,l){o!=-1&&(this.zK(o,l),this.zK(this.ya(o),l))},n.prototype.Et=function(o,l){this.ze.T(o,1,l)},n.prototype.Xg=function(o,l){this.ze.T(o,2,l)},n.prototype.ln=function(o,l){this.ze.T(o,3,l),this.IW(o,this.ZQ(l)),this.HW(l,o)},n.prototype.HW=function(o,l){this.ze.T(o,4,l)},n.prototype.IW=function(o,l){this.ze.T(o,5,l)},n.prototype.yJ=function(o,l){this.ze.T(o,6,l)},n.prototype.wJ=function(o,l){this.ze.T(o,7,l)},n.prototype.vJ=function(o,l){this.$n.write(o,l)},n.prototype.xJ=function(o,l){this.fA.write(o,l)},n.prototype.gY=function(o){var l=0,p=0,d=this.vF(o),y=new c.h,g=new c.h,_=new c.h;this.$r(d,y),g.N(y);var M=d;do this.nm(M,_),p+=c.h.ub(g,_),this.$e(this.ya(M))!=o&&(l+=(_.x-y.x-(g.x-y.x))*(_.y-y.y+(g.y-y.y))*.5),g.N(_),M=this.kc(M);while(M!=d);this.$n.write(o,l),this.fA.write(o,p)},n.prototype.KU=function(o,l){var p=new u(this),d=new c.$j;d.Ee(c.P.truncate(this.xa/2)),d.Xo(p);for(var y=new c.ja(0),g=this.bh(),_=null,M=0,$=new c.h,E=this.Oe;E!=-1;E=this.Tf(E)){if(!(255&++M)&&l!=null&&!l.progress(-1,-1))throw c.i.RC();var k=this.Je(E);if(k!=-1){if(y.Dh(0),!this.cY(d,g,y,k)){this.D(E,$),p.WJ($.y);var P=k;do{var F=this.Bb(P,g);F!=-1&&(d.wd(F,-1),this.Kb(P,g,-2)),P=this.kc(this.ya(P))}while(k!=P);P=k;do(F=this.Bb(P,g))==-1&&(F=d.addElement(P,-1),y.add(F)),P=this.kc(this.ya(P));while(k!=P)}for(k=y.size-1;0<=k;k--)F=y.get(k),P=d.ka(F),this.Kb(this.ya(P),g,F),this.JU(d,F,o)}else this.Yy(E)==-1&&(_==null&&(_=new a(this)),this.D(E,$),_.fX($),P=d.DW(_),k=this.Jl,P!=-1&&(F=d.ka(P),this.$e(F)==this.$e(this.ya(F))&&(F=this.JF(d,P)),F!=-1&&(k=this.$e(F))),this.YM(k,E))}this.Lg(g)},n.prototype.JU=function(o,l,p){var d=o.ka(l),y=this.$e(d);if(this.In(y)==-1){var g=this.JF(o,l),_=this.ya(d),M=this.$e(_);this.Mp(y),this.Mp(M);var $=this.In(y),E=this.In(M);if(g==-1&&$==-1&&(M==y?(this.ln(M,this.Jl),$=E=this.Jl):(E==-1&&(this.ln(M,this.Jl),E=this.Jl),this.ln(y,M),$=M)),g!=-1){var k=this.$e(g);E==-1&&(0>=this.Mp(k)?(E=this.In(k),this.ln(M,E)):(this.ln(M,k),E=k),M==y&&($=E))}$==-1&&this.dY(y,M),p==0?this.eW(o,l,d,g,y,M):p==5?this.fW(o,l,d,_,y,M):p==4&&this.dW(d,g,y,M)}},n.prototype.eW=function(o,l,p,d,y,g){var _=this.jk(y);if(d!=-1){var M=this.jk(g),$=this.jk(this.$e(d));d=_&M&$,$^=$&this.fh(p),($|=d)!=0&&(this.Xg(g,M|$),this.Xg(y,$|_),_=_||$)}for(l=o.lb(l);l!=-1&&(d=o.ka(l),p=this.$e(this.ya(d)),y=this.jk(p),g=this.fh(d),M=this.$e(d),d=y&($=this.jk(M))&_,_^=_&g,(_|=d)!=0);l=o.lb(l))this.Xg(p,y|_),this.Xg(M,$|_)},n.prototype.fW=function(o,l,p,d,y,g){if(y!=g){p=this.Bb(p,this.eg),p+=this.Bb(d,this.eg),d=0;var _=new c.ja(0),M=new c.ja(0);M.add(0);for(var $=o.sc(-1);$!=l;$=o.lb($)){var E=o.ka($),k=this.ya(E),P=this.$e(E),F=this.$e(k);if(P!=F){if(E=this.Bb(E,this.eg),d+=E+=this.Bb(k,this.eg),k=!1,_.size!=0&&_.Gc()==F&&(M.Jf(),_.Jf(),k=!0),this.In(F)==-1)throw c.i.Ra();k&&this.In(F)==P||(M.add(d),_.add(P))}}d+=p,_.size!=0&&_.Gc()==g&&(M.Jf(),_.Jf()),d!=0?M.Gc()==0&&(o=this.g.md,o=this.Ma(o),this.Xg(y,o)):M.Gc()!=0&&(o=this.g.md,o=this.Ma(o),this.Xg(y,o))}},n.prototype.dW=function(o,l,p,d){var y=this.Ma(this.g.md);if(l==-1)this.Xg(d,this.Io),1&(o=this.Bb(o,this.yg))?this.Xg(p,y):this.Xg(p,this.Io);else{var g=this.jk(d);g==0?(g=this.jk(this.$e(l)),this.Xg(d,g),1&(o=this.Bb(o,this.yg))?this.Xg(p,g==y?this.Io:y):this.Xg(p,g)):1&(o=this.Bb(o,this.yg))?this.Xg(p,g==y?this.Io:y):this.Xg(p,g)}},n.prototype.cY=function(o,l,p,d){var y=d,g=-1,_=-1,M=0;do{if(M==2)return!1;var $=this.Bb(y,l);if($!=-1){if(g!=-1)return!1;g=$}else{if(_!=-1)return!1;_=y}M++,y=this.kc(this.ya(y))}while(d!=y);return _!=-1&&g!=-1&&(this.Kb(o.ka(g),l,-2),o.Uj(g,_),p.add(g),!0)},n.prototype.dY=function(o,l){var p=this.Mp(o);if(p!=0){var d=this.Mp(l);0<p&&0>d||0>p&&0<d?this.ln(o,l):(l=this.In(l))!=-1&&this.ln(o,l)}},n.prototype.qP=function(o,l){this.Eq=this.g.Hd();for(var p=0,d=l.size;p<d;p++){var y=l.get(p),g=this.g.Qa(y,this.Em),_=this.g.Sf(this.g.cd(y)),M=this.g.jc(_);if(c.ba.Ic(M)){var $=this.g.V(y);if($!=-1){var E=this.g.Qa($,this.Em);if(g!=E){var k=this.qU(),P=this.ya(k),F=this.lh.De();this.lh.T(F,0,y),this.lh.T(F,1,-1),this.Ht(k,F),this.DJ(k,g),(F=this.Je(g))==-1?(this.on(g,k),this.Vl(k,P),this.Ul(P,k)):(g=this.ue(F),this.Vl(F,P),this.Ul(P,F),this.Ul(g,k),this.Vl(k,g)),this.DJ(P,E),(g=this.Je(E))==-1?(this.on(E,P),this.Ul(k,P),this.Vl(P,k)):(E=this.ue(g),this.Vl(g,k),this.Ul(k,g),this.Ul(E,P),this.Vl(P,E)),_=this.Ma(_),o==0?(this.Kb(P,this.be,0),this.Kb(k,this.be,M==1736?_:0)):o==5?(E=new c.h,this.g.D(y,E),y=new c.h,this.g.D($,y),g=$=0,0>E.compare(y)?$=1:g=-1,this.Kb(P,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.eg,$),this.Kb(P,this.eg,g)):o==7?(this.Kb(P,this.be,this.Io),this.Kb(k,this.be,M==1736?_:0)):o==4&&(this.Kb(P,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.yg,1),this.Kb(P,this.yg,1)),M=M==1736?this.WN:0,this.cx(k,_|M),this.cx(P,_|M)}}}}},n.prototype.QT=function(o,l){var p=this.om(l);if(p!=-1){var d=this.om(o);this.lh.T(p,1,d),this.Ht(o,p),this.Ht(l,-1)}o=this.ya(o),l=this.ya(l),(p=this.om(l))!=-1&&(d=this.om(o),this.lh.T(p,1,d),this.Ht(o,p),this.Ht(l,-1))},n.prototype.EX=function(o){function l(J,W){return d.CO(J,W)}var p=new c.ja(0);p.Jb(10);for(var d=this,y=this.Oe;y!=-1;y=this.Tf(y)){p.clear(!1);var g=this.Je(y);if(g!=-1){var _=g;do p.add(_),_=this.kc(this.ya(_));while(_!=g);if(1<p.size){if(_=!0,2<p.size)p.Wd(0,p.size,l),p.add(p.get(0));else if(0<this.BO(p.get(0),p.get(1))){var M=p.get(0);p.set(0,p.get(1)),p.set(1,M)}else _=!1;for(var $=M=p.get(0),E=this.vf($),k=this.ya($),P=-1,F=1,D=p.size;F<D;F++){var V=p.get(F),N=this.ya(V),G=this.lk(N);if(G==E&&V!=$){if(o==0)P=this.GF($)|this.GF(V),this.cx($,P),this.cx(k,P),this.Kb($,this.be,this.Bb($,this.be)|this.Bb(V,this.be)),this.Kb(k,this.be,this.Bb(k,this.be)|this.Bb(N,this.be));else if(this.eg!=-1)P=this.Bb($,this.eg)+this.Bb(V,this.eg),N=this.Bb(k,this.eg)+this.Bb(N,this.eg),this.Kb($,this.eg,P),this.Kb(k,this.eg,N);else{if(o==7)return void(this.Pi=new c.Nd(5,y,-1));this.yg!=-1&&(P=this.Bb($,this.yg)+this.Bb(V,this.yg),N=this.Bb(k,this.yg)+this.Bb(N,this.yg),this.Kb($,this.yg,P),this.Kb(k,this.yg,N))}this.QT($,V),this.Gy(V),P=$,p.set(F,-1),V==M&&(p.set(0,-1),M=-1)}else this.xx(P,!1),P=-1,$=V,E=G,k=N}if(this.xx(P,!1),P=-1,_){for(M=-1,F=0,D=p.size;F<D;F++)if((V=p.get(F))!=-1){if(M==-1)$=M=V,E=this.vf($),k=this.ya($);else if(V!=$&&(N=this.ya(V),G=this.lk(N),this.Ul(k,V),this.Vl(V,k),$=V,E=G,k=N,o==7&&(this.Bb(V,this.be)|this.Bb(this.ue(V),this.be))==(1|this.Io)))return void(this.Pi=new c.Nd(5,y,-1))}this.on(y,M)}else{for(M=-1,F=0,D=p.size;F<D;F++)if((V=p.get(F))!=-1){M=V;break}g!=M&&this.on(y,M)}}}}},n.prototype.RN=function(){for(var o=-1,l=this.bh(),p=this.Oe;p!=-1;p=this.Tf(p)){var d=this.Je(p);if(d!=-1){var y=d;do{if(this.Bb(y,l)!=1){var g=this.hI();this.Et(g,y),this.wJ(g,o),o!=-1&&this.yJ(o,g),o=g;var _=0,M=y;do _|=this.Bb(M,this.be),this.VW(M,g),this.Kb(M,l,1),M=this.kc(M);while(M!=y);this.Xg(g,_)}y=this.kc(this.ya(y))}while(y!=d)}}g=this.hI(),this.Et(g,-1),this.wJ(g,o),o!=-1&&this.yJ(o,g),this.Jl=g,this.$n=c.ce.rf(this.ze.size,NaN),this.fA=c.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(l)},n.prototype.mR=function(o,l,p){if((l=l!=-1?l:this.Je(o))==-1)return-1;for(o=l;;){if(this.Bb(l,p)!=1)return l;if((l=this.kc(this.ya(l)))==o)return-1}},n.prototype.tW=function(){for(var o=this.bh(),l=this.Oe;l!=-1;l=this.Tf(l))for(var p=-1;;){var d=this.mR(l,p,o);if(d==-1)break;p=this.kc(this.ya(d));for(var y=d;;){var g=this.kc(y),_=this.ue(y),M=this.ya(y);if(_==M){if(this.DP(y),p!=y&&p!=M||(p=-1),y==d||_==d){if(y==(d=g)||_==d)break;y=g;continue}}else this.Kb(y,o,1);if((y=g)==d)break}}this.Lg(o)},n.prototype.HB=function(o,l,p,d,y){this.Wg(),this.bH=y,this.g=o,this.Dq=this.g.WE(),(o=new c.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var g=0,_=1,M=p!=null?p.get(0):this.g.md;for(y=1;M!=-1;){this.g.CJ(M,this.Dq,_),_<<=1;for(var $=this.g.Ob(M);$!=-1;$=this.g.Sb($))for(var E=this.g.Ya($),k=0,P=this.g.Ka($);k<P;k++)o.add(E),E=this.g.V(E);c.ba.Tn(this.g.jc(M))||(g+=this.g.ea(M)),p!=null?(M=y<p.size?p.get(y):-1,y++):M=this.g.ve(M)}for(this.Io=_,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new c.ad(2),this.he=new c.ad(8),this.Lc=new c.ad(8),this.ze=new c.ad(8)),this.lh.Ee(this.xa),c.op.Bp(d),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,g)),this.Em=this.g.Hd(),p=new c.h,y=0,g=new c.h,p.Sc(),_=0;_<=this.xa;_++)if(_<this.xa?(E=o.get(_),this.g.D(E,g)):g.Sc(),!p.rb(g)){if(y<_){for(E=this.$m(),P=k=-1;y<_;y++)P=o.get(y),this.g.Sa(P,this.Em,E),M=this.lh.De(),this.lh.T(M,0,P),this.lh.T(M,1,k),k=M,$=this.g.cd(P),M=this.g.Sf($),M=this.Ma(M),this.NW(E,this.yd(E)|M);this.OW(E,k),this.er(E,this.g.Va(P)),this.Qs!=-1&&this.dX(this.Qs,E),this.gX(E,this.Qs),this.Qs=E,this.Oe==-1&&(this.Oe=E)}y=_,p.N(g)}c.op.Bp(d),this.be=this.bh(),l==5&&(this.eg=this.bh()),l==4&&(this.yg=this.bh()),this.qP(l,o),this.Pi.Lj==0&&(this.EX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(l,d))):this.kA=!0))},n.prototype.Gy=function(o){var l=this.kc(o),p=this.ue(o),d=this.ya(o),y=this.kc(d),g=this.ue(d);l!=d&&(this.Ul(g,l),this.Vl(l,g)),p!=d&&(this.Ul(p,y),this.Vl(y,p)),p=this.lk(o),this.Je(p)==o&&(y!=o?this.on(p,y):this.on(p,-1)),y=this.lk(d),this.Je(y)==d&&(l!=d?this.on(y,l):this.on(y,-1)),this.Lc.kd(o),this.Lc.kd(d)},n.prototype.JF=function(o,l){for(;;){if((l=o.xe(l))==-1)return-1;var p=o.ka(l);if(this.$e(p)!=this.$e(this.ya(p)))return p}},n.prototype.fr=function(o,l){var p;p===void 0&&(p=!0),this.HB(o,0,null,l,p)},n.prototype.qJ=function(o,l,p){var d=new c.ja(0);d.add(l),this.HB(o,4,d,p,o.jc(l)==1736)},n.prototype.rJ=function(o,l,p){var d=new c.ja(0);d.add(l),this.HB(o,5,d,p,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},n.prototype.Je=function(o){return this.he.U(o,2)},n.prototype.D=function(o,l){this.g.ZF(this.$Q(o),l)},n.prototype.yd=function(o){return this.he.U(o,1)},n.prototype.Tf=function(o){return this.he.U(o,4)},n.prototype.Yy=function(o){return this.he.U(o,6)},n.prototype.mm=function(o){return this.he.U(o,7)},n.prototype.ls=function(o){return this.lh.U(o,1)},n.prototype.vj=function(o){return this.lh.U(o,0)},n.prototype.og=function(o,l){return(l=this.Fi[l]).size<=o?-1:l.read(o)},n.prototype.pn=function(o,l,p){(l=this.Fi[l]).size<=o&&l.resize(this.he.size,-1),l.write(o,p)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=c.ja.rf(this.he.Jg,-1),l=0,p=this.Fi.length;l<p;l++)if(this.Fi[l]==null)return this.Fi[l]=o,l;return this.Fi.push(o),this.Fi.length-1},n.prototype.Gp=function(o){this.Fi[o]=null},n.prototype.lk=function(o){return this.Lc.U(o,1)},n.prototype.vf=function(o){return this.lk(this.ya(o))},n.prototype.ya=function(o){return this.Lc.U(o,4)},n.prototype.ue=function(o){return this.Lc.U(o,5)},n.prototype.kc=function(o){return this.Lc.U(o,6)},n.prototype.$e=function(o){return this.Lc.U(o,2)},n.prototype.af=function(o){return this.jk(this.Lc.U(o,2))},n.prototype.om=function(o){return this.Lc.U(o,7)},n.prototype.$r=function(o,l){this.D(this.lk(o),l)},n.prototype.nm=function(o,l){this.D(this.vf(o),l)},n.prototype.fh=function(o){return this.Lc.U(o,3)&this.XN},n.prototype.Bb=function(o,l){return(l=this.Ii[l]).size<=o?-1:l.read(o)},n.prototype.Kb=function(o,l,p){(l=this.Ii[l]).size<=o&&l.resize(this.Lc.size,-1),l.write(o,p)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=c.ja.rf(this.Lc.Jg,-1),l=0,p=this.Ii.length;l<p;l++)if(this.Ii[l]==null)return this.Ii[l]=o,l;return this.Ii.push(o),this.Ii.length-1},n.prototype.Lg=function(o){this.Ii[o]=null},n.prototype.DP=function(o){var l=this.$e(o),p=this.ya(o),d=this.kc(o);d==p&&(d=this.kc(d))==o&&(d=-1);var y=this.vF(l);y!==o&&y!=p||this.Et(l,d),p=this.$n.read(l),isNaN(p)||(this.vJ(l,NaN),this.xJ(l,NaN)),this.xx(o,!0),this.Gy(o)},n.prototype.EP=function(o){for(var l=0,p=o.size;l<p;l++){var d=o.get(l),y=this.$e(this.ya(d));this.Et(this.$e(d),-1),this.Et(y,-1),this.xx(d,!0),this.Gy(d)}},n.prototype.vF=function(o){return this.ze.U(o,1)},n.prototype.jk=function(o){return this.ze.U(o,2)},n.prototype.In=function(o){return this.ze.U(o,3)},n.prototype.ZQ=function(o){return this.ze.U(o,4)},n.prototype.Mp=function(o){var l=this.$n.read(o);return isNaN(l)&&(this.gY(o),l=this.$n.read(o)),l},n.prototype.Ma=function(o){return this.g.FF(o,this.Dq)},n.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},n.prototype.oR=function(o){return this.g.Qa(o,this.Eq)},n.prototype.nR=function(o,l){var p=this.Je(o);if(p==-1)return-1;var d=p,y=-1,g=-1;do{if(this.vf(d)==l)return d;if(y==-1){if((y=this.Je(l))==-1)break;g=y}if(this.vf(g)==o)return this.ya(g);d=this.kc(this.ya(d)),g=this.kc(this.ya(g))}while(d!=p&&g!=y);return-1},n.prototype.kB=function(o,l){l.Qr(),l=l.get();var p=new c.h;this.$r(o,p),l.Ec(p),this.nm(o,p),l.Rc(p)},n.prototype.CO=function(o,l){if(o==l)return 0;var p=new c.h;this.nm(o,p);var d=new c.h;return this.nm(l,d),p.rb(d)?0:(l=new c.h,this.$r(o,l),(o=new c.h).vc(p,l),(p=new c.h).vc(d,l),c.h.pu(o,p))},n.prototype.BO=function(o,l){if(o==l)return 0;var p=new c.h;this.nm(o,p);var d=new c.h;return this.nm(l,d),p.rb(d)?0:(l=new c.h,this.$r(o,l),(o=new c.h).vc(p,l),(p=new c.h).vc(d,l),0<=p.y&&0<o.y?c.h.pu(o,p):0)},n.prototype.sO=function(){for(var o=c.mc.ox(this.gA),l=new c.h,p=new c.h,d=new c.h,y=new c.h,g=new c.h,_=this.Oe;_!=-1;_=this.Tf(_)){var M=this.Je(_);if(M!=-1){var $=M;this.$r($,l),this.nm($,p),g.vc(p,l);var E=g.Uk();do{var k=$;if(($=this.kc(this.ya($)))!=k){this.nm($,d),y.vc(d,l),k=y.Uk();var P=y.yi(g);if(P*P/(k*E)*Math.min(k,E)<=o)return!1;g.N(y),E=k,p.N(d)}}while($!=M)}}return!0},n}(),c.ku=C}(U||(U={})),function(c){var C=function(){function w(){this.j=null,this.jH=new c.h,this.kH=new c.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},w.prototype.fl=function(u,a,n,o){var l=c.ba.uf(this.j.g.jc(n));if(c.ba.uf(this.j.g.jc(a))!=2||l!=1)throw c.i.Ra();this.AP(u,a,n,o)},w.prototype.fr=function(u,a){this.j==null&&(this.j=new c.ku),this.j.fr(u,a)},w.prototype.Gt=function(u,a,n){for(c.Vk.W(u,a,n,!0),a=u.md;a!=-1;a=u.ve(a))u.jc(a)==1736&&c.tn.W(u,a,-1,this.Ov,n);this.fr(u,n)},w.prototype.HE=function(u,a,n,o,l){var p=this.j.g;if(p.jc(u)==1736)for(u=p.Ob(u);u!=-1;u=p.Sb(u)){var d=p.Ya(u);this.j.Ie(d),this.j.Ie(p.V(d));var y=this.j.oR(d);if(y!=-1){var g=this.j.Bb(y,n);if(g!=1&&g!=2)if(this.cf(this.j.af(y))){this.j.Kb(y,n,1),g=p.wf(a,-1);var _=y,M=this.j.Ie(d),$=1;do{var E=this.um(d,l);p.kj(g,E),o!=-1&&this.j.pn(M,o,1),this.j.Kb(_,n,1),_=this.j.kc(_);do var k=(E=$==1?p.V(d):p.Na(d))!=-1?this.j.Ie(E):-1;while(k==M);var P=this.j.lk(_);if(P!=k){do k=(E=$==1?p.Na(d):p.V(d))!=-1?this.j.Ie(E):-1;while(k==M);P!=k?(k=P,E=this.j.vj(this.j.mm(k))):$=-$}M=k,d=E}while(_!=y);p.mn(g,!0)}else this.j.Kb(y,n,2)}}},w.prototype.$E=function(){for(var u=this.j.bh(),a=new c.ja(0),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var o=this.j.Je(n),l=o;if(o!=-1)do{if(this.j.Bb(l,u)!=1){var p=this.j.ya(l);this.j.Kb(p,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(p))&&a.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=o)}this.j.Lg(u),this.j.EP(a)},w.prototype.um=function(u,a){return a==-1?u:this.WR(u,a)},w.prototype.WR=function(u,a){var n=this.j.g,o=this.j.mm(this.j.Ie(u));do{var l=this.j.vj(o);if(n.Sf(n.cd(l))==a)return l;o=this.j.ls(o)}while(o!=-1);return u},w.prototype.Qt=function(u,a,n){this.$E();var o=this.j.g,l=o.Kg(1736),p=this.j.bh();return this.pK(u,a,l,n,p,-1),this.j.Lg(p),c.tn.W(o,l,1,this.Ov,null),l},w.prototype.pK=function(u,a,n,o,l,p){for(this.HE(u,n,l,p,o),a!=-1&&this.HE(a,n,l,p,o),u=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var d=this.j.Je(a);if(d!=-1){var y=d;do{var g=this.j.Bb(y,l);if(g!=1&&g!=2)if(this.cf(this.j.af(y))){g=u.wf(n,-1);var _=y;do{var M=this.j.om(_);M!=-1?M=this.j.vj(M):(M=this.j.vj(this.j.om(this.j.ya(_))),M=this.j.g.V(M)),M=this.um(M,o),u.kj(g,M),this.j.Kb(_,l,1),p!=-1&&(M=this.j.Ie(M),this.j.pn(M,p,1)),_=this.j.kc(_)}while(_!=y);u.mn(g,!0)}else this.j.Kb(y,l,2);y=this.j.kc(this.j.ya(y))}while(y!=d)}}},w.prototype.XX=function(u,a,n){var o=this.j.g,l=o.Kg(1736),p=o.Kg(1607),d=o.Kg(550);this.$E();var y=-1,g=this.j.bh(),_=this.j.Fp();for(this.pK(u,a,l,n,g,_),u=this.j.Oe;u!=-1;u=this.j.Tf(u))if((a=this.j.Je(u))!=-1){var M=a;do{var $=this.j.Bb(M,g),E=this.j.Bb(this.j.ya(M),g);if(($|=E)==2)if($=this.j.fh(M),this.cf($)){var k=o.wf(p,-1),P=M;$=this.$w(u,o),$=this.um($,n),o.kj(k,$),this.j.pn(u,_,1);do{if($=this.j.vf(P),E=this.$w($,o),E=this.um(E,n),o.kj(k,E),this.j.Kb(P,g,1),this.j.Kb(this.j.ya(P),g,1),this.j.pn($,_,1),P=this.j.kc(P),$=this.j.Bb(P,g),($|=E=this.j.Bb(this.j.ya(P),g))!=2)break;if($=this.j.fh(P),!this.cf($)){this.j.Kb(P,g,1),this.j.Kb(this.j.ya(P),g,1);break}}while(P!=M)}else this.j.Kb(M,g,1),this.j.Kb(this.j.ya(M),g,1);M=this.j.kc(this.j.ya(M))}while(M!=a)}for(u=this.j.Oe;u!=-1;u=this.j.Tf(u))($=this.j.og(u,_))!=1&&($=this.j.yd(u),this.cf($)&&(y==-1&&(y=o.wf(d,-1)),(a=this.j.mm(u))!=-1&&(a=this.j.vj(a),$=this.um(a,n),o.kj(y,$))));return this.j.Gp(_),this.j.Lg(g),c.tn.W(o,l,1,this.Ov,null),(n=[])[0]=d,n[1]=p,n[2]=l,n},w.prototype.$w=function(u,a){var n=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var o=this.j.vj(u);n==-1&&(n=o);var l=this.j.Ma(a.Sf(a.cd(o)));if(this.cf(l)){n=o;break}}return n},w.prototype.gB=function(u,a){for(var n=this.ll(a),o=this.j.lk(a),l=this.j.vf(a),p=0,d=0,y=this.j.mm(o);y!=-1;y=this.j.ls(y)){var g=this.j.vj(y),_=u.cd(g),M=this.j.Ma(u.Sf(_));_=u.Ya(_),(M=(M&n)!=0)&&_==g&&(this.vl=a);var $=u.V(g);$!=-1&&this.j.Ie($)==l?(p++,M&&(this.vl===-1&&_==$&&(g=this.j.kc(a),this.cf(this.ll(g))&&(this.vl=g)),d++)):(g=u.Na(g))!=-1&&this.j.Ie(g)==l&&(p--,M&&(this.vl===-1&&_===g&&(g=this.j.kc(a),this.cf(this.ll(g))&&(this.vl=g)),d--))}return this.j.D(o,this.jH),this.j.D(l,this.kH),(d!=0?d:p)*(u=c.h.ub(this.jH,this.kH))},w.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},w.prototype.sK=function(u){for(var a=this.j.ya(this.j.ue(u)),n=-1;a!=u;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.ue(a))}return n!=-1?this.j.ya(n):-1},w.prototype.tK=function(u){for(var a=this.j.ya(this.j.kc(u)),n=-1;a!=u;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.kc(a))}return n!=-1?this.j.ya(n):-1},w.prototype.hJ=function(u,a,n,o,l){var p=this.j.g,d=u,y=this.j.ya(d);this.j.Kb(d,n,1),this.j.Kb(y,n,1),this.vl=-1;for(var g=this.gB(p,d),_=d,M=-1,$=!1,E=1;;){var k=this.j.ue(d);if(k==y)break;if(y=this.j.kc(y),this.j.ya(k)!=y){if((d=this.sK(d))==-1){$=!0;break}y=this.j.ya(d)}else d=k;if(d==u){M=u;break}if(k=this.ll(d),!this.cf(k))break;this.j.Kb(d,n,1),this.j.Kb(y,n,1),_=d,g+=this.gB(p,d),E++}if(M==-1)for(d=u,y=this.j.ya(d),M=d;(u=this.j.kc(d))!=y;){if(y=this.j.ue(y),this.j.ya(u)!=y){if((d=this.tK(d))==-1){$=!0;break}y=this.j.ya(d)}else d=u;if(k=this.ll(d),!this.cf(k))break;this.j.Kb(d,n,1),this.j.Kb(y,n,1),M=d,g+=this.gB(p,d),E++}else if(this.vl!=-1&&(_=this.vl,M=this.j.ue(this.vl),this.j.ya(M)!=this.j.kc(this.j.ya(_))&&(M=this.sK(_))==-1))throw c.i.Ra();for(0<=g||(d=M,M=this.j.ya(_),_=this.j.ya(d)),n=p.wf(a,-1),d=_,_=this.j.lk(_),$=this.j.vf(M)==_&&$,g=this.$w(_,p),g=this.um(g,l),p.kj(n,g),o!=-1&&this.j.pn(_,o,1),_=0,E=$?c.P.truncate((E+1)/2):-1;u=this.j.vf(d),g=this.$w(u,p),g=this.um(g,l),p.kj(n,g),_++,o!=-1&&this.j.pn(u,o,1),$&&_==E&&(n=p.wf(a,-1),p.kj(n,g)),d!=M;)if(u=this.j.kc(d),this.j.ue(this.j.ya(d))!=this.j.ya(u)){if((d=this.tK(d))==-1)throw c.i.Ra()}else d=u},w.prototype.Rt=function(u){for(var a=this.j.g.Kg(1607),n=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var l=this.j.Je(o),p=l;do this.j.Bb(p,n)!=1&&this.cf(this.ll(p))&&this.hJ(p,a,n,-1,u),p=this.j.kc(this.j.ya(p));while(p!=l)}return this.j.Lg(n),a},w.prototype.YX=function(u){for(var a=this.j.g,n=a.Kg(1607),o=a.Kg(550),l=this.j.bh(),p=this.j.Fp(),d=-1,y=this.j.Oe;y!=-1;y=this.j.Tf(y)){var g=this.j.Je(y),_=g;do{var M=this.j.Bb(_,l);M!=1&&(M=this.ll(_),this.cf(M)&&this.hJ(_,n,l,p,u)),_=this.j.kc(this.j.ya(_))}while(_!=g)}for(y=this.j.Oe;y!=-1;y=this.j.Tf(y))(M=this.j.og(y,p))!=1&&(M=this.j.yd(y),this.cf(M)&&(d==-1&&(d=a.wf(o,-1)),(g=this.j.mm(y))!=-1&&(g=this.j.vj(g),g=this.um(g,u),a.kj(d,g))));return this.j.Lg(l),this.j.Gp(p),(u=[])[0]=o,u[1]=n,u},w.prototype.pr=function(){for(var u=this.j.g,a=u.Kg(550),n=u.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Tf(o))if(this.cf(this.j.yd(o))){for(var l=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var d=this.j.vj(p);l==-1&&(l=d);var y=this.j.Ma(u.Sf(u.cd(d)));if(this.cf(y)){l=d;break}}u.kj(n,l)}return a},w.prototype.eq=function(u){this.Ij=[];for(var a=0;a<u;a++)this.Ij[a]=!1},w.WV=function(u,a,n){var o=u.Ja(),l=Array(1e3);c.P.bv(l,null);var p=c.P.mg(1e3,0),d=u.I(),y=!0,g=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();for(var _=0;_<d;){var M=c.P.truncate(u.gW(l,_)-_);g?c.jd.nK(a,l,M,n,p):c.jd.oK(a,l,M,n,p);for(var $=0,E=0;E<M;E++)p[E]==0&&(y&&(y=!1,o.Gd(u,0,_)),$!=E&&o.Gd(u,_+$,_+E),$=E+1);y||$==M||o.Gd(u,_+$,_+M),_+=M}return y?u:o},w.uG=function(u,a,n){return u instanceof c.ee?w.WV(u,a,n):a instanceof c.Ta?u.B()||a.B()?u.Ja():c.Vk.uU(n,u,a)?c.Vk.xO(u,a):u.Ja():w.XV(u,a,n)},w.Cv=function(u,a,n,o){var l=new c.l;u.A(l);var p=new c.l;a.A(p);var d=new c.l;if(d.L(l),d.$b(p),n=c.ua.Xd(n,d,!0),(d=new c.l).L(p),p=c.ua.Gr(n),d.X(p,p),!l.isIntersecting(d)){if(u.Eb()<=a.Eb())return w.mi(w.Ue(u.Ja()),u,"&");if(u.Eb()>a.Eb())return w.mi(w.Ue(a.Ja()),u,"&")}return p=new w,d=(l=new c.hd).Ib(w.Ue(u)),a=l.Ib(w.Ue(a)),p.Gt(l,n,o),o=p.Cv(d,a),u=w.mi(l.Ke(o),u,"&"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},w.XV=function(u,a,n){if(u.B()||a.B())return u.Ja();var o=[null],l=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();return o[0]=u.D(),p?c.jd.nK(a,o,1,n,l):c.jd.oK(a,o,1,n,l),l[0]==0?u.Ja():u},w.prototype.GU=function(u,a,n,o,l){if(u.B())return u;var p=new c.hd;return u=p.Ib(u),this.Ok(p,u,a,n,o,l)},w.prototype.IU=function(u,a,n,o,l,p){if(l&&u.jc(a)!=550){var d=new c.MC;d.PX(u,n),d.Pg?(c.Vk.W(u,n,p,!0),l=!1):this.j.ty(n)}else c.Vk.W(u,n,p,!0),l=!1;if(o&&u.jc(a)!=550?this.j.rJ(u,a,p):this.j.qJ(u,a,p),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(u,a,n,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,u.jc(a)==1736||o&&u.jc(a)!=550)return u.$o(a,0),a=this.Qt(a,-1,-1),(u=u.Ke(a)).$o(0),l?u.Eh(1,0):(u.Eh(2,n),u.hm()),u;if(u.jc(a)==1607)return a=this.Rt(-1),u=u.Ke(a),l||u.Eh(2,n),u;if(u.jc(a)==550)return a=this.pr(),u=u.Ke(a),l||u.Eh(2,n),u;throw c.i.Ra()},w.prototype.Ok=function(u,a,n,o,l,p){this.j=new c.ku;try{return this.IU(u,a,n,o,l,p)}finally{this.j.Wg()}},w.Ok=function(u,a,n,o,l){return new w().GU(u,a,n,o,l)},w.prototype.HU=function(u,a,n,o){this.Ov=u,this.j=new c.ku,u=a.Kn(n);var l=a.jc(n);if(u!=1||l==550?this.j.qJ(a,n,o):this.j.rJ(a,n,o),!this.j.kA)if(this.j.ty(NaN),o=this.j.Ma(n),this.eq(o+1),this.Ij[o]=!0,a.jc(n)==1736||u==1&&a.jc(n)!=550)a.$o(n,0),o=this.Qt(n,-1,-1),a.cC(o,n),a.wB(o);else if(a.jc(n)==1607)o=this.Rt(-1),a.cC(o,n),a.wB(o);else{if(a.jc(n)!=550)throw c.i.ga("internal error");o=this.pr(),a.cC(o,n),a.wB(o)}},w.prototype.km=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a));if(n>o)return u;var l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)]=!0,n==2&&o==2)return this.Qt(u,a,-1);if(n==1&&o==2||n==1&&o==1)return this.Rt(-1);if(n==0)return this.pr();throw c.i.Ra()},w.prototype.Cv=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)|this.j.Ma(a)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),n==2&&o==2)return this.Qt(u,a,l);if(n==1&&0<o||o==1&&0<n)return this.Rt(l);if(n==0||o==0)return this.pr();throw c.i.Ra()},w.prototype.Kz=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)|this.j.Ma(a)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),n==2&&o==2)return this.XX(u,a,l);if(n==1&&0<o||o==1&&0<n)return this.YX(l);if(n==0||o==0)return(u=[])[0]=this.pr(),u;throw c.i.Ra()},w.prototype.gp=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(a)]=!0,n==2&&o==2)return this.Qt(u,a,-1);if(n==1&&o==1)return this.Rt(-1);if(n==0&&o==0)return this.pr();throw c.i.Ra()},w.Ue=function(u){var a=u.K();return a==197?(a=new c.Ea(u.description),u.B()||a.bd(u,!1),a):a==33?(a=new c.ee(u.description),u.B()||a.add(u),a):a==322?(a=new c.Ua(u.description),u.B()||a.pc(u,!0),a):u},w.mi=function(u,a,n){var o=u.K();return o==197?(a=new c.Ea(u.description),u.B()||a.bd(u,!1),a):o!=33||n!="|"&&n!="^"?o==322?(a=new c.Ua(u.description),u.B()||a.pc(u,!0),a):o==33&&n=="-"&&a.K()==33||o==550&&n=="&"&&a.K()==33?(a=new c.Ta(u.description),u.B()||u.we(0,a),a):u:(a=new c.ee(u.description),u.B()||a.add(u),a)},w.km=function(u,a,n,o){if(u.B()||a.B()||u.Eb()>a.Eb())return w.mi(w.Ue(u),u,"-");var l=new c.l;u.A(l);var p=new c.l;if(a.A(p),!l.isIntersecting(p))return w.mi(w.Ue(u),u,"-");var d=new c.l;return d.L(l),d.$b(p),n=c.ua.Xd(n,d,!0),p=new w,d=(l=new c.hd).Ib(w.Ue(u)),a=l.Ib(w.Ue(a)),p.Gt(l,n,o),o=p.km(d,a),o=l.Ke(o),u=w.mi(o,u,"-"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},w.QP=function(u,a,n){if(2>u.length)throw c.i.O("not enough geometries to dissolve");for(var o=0,l=0,p=u.length;l<p;l++)o=Math.max(u[l].Eb(),o);var d=new c.l;d.Pa();var y=new c.hd,g=-1,_=0,M=-1;for(l=0,p=u.length;l<p;l++)if(u[l].Eb()==o)if(u[l].B())M==-1&&(M=l);else{M=l,g==-1?g=y.Ib(w.Ue(u[l])):y.pN(g,w.Ue(u[l]));var $=new c.l;u[l].yc($),d.$b($),_++}return 2>_?w.Ue(u[M]):(u=o==2,a=c.ua.Xd(o==0?a:null,d,!0),new w().Ok(y,g,a,u,!0,n))},w.Kz=function(u,a,n,o){var l=[null,null,null],p=new c.l;u.A(p);var d=new c.l;a.A(d);var y=new c.l;if(y.L(p),y.$b(d),n=c.ua.Xd(n,y,!0),(y=new c.l).L(d),d=c.ua.Gr(n),y.X(d,d),!p.isIntersecting(y)){if(u.Eb()<=a.Eb())return l[(u=w.mi(w.Ue(u.Ja()),u,"&")).Eb()]=u,l;if(u.Eb()>a.Eb())return l[(u=w.mi(w.Ue(a.Ja()),u,"&")).Eb()]=u,l}for(d=new w,y=(p=new c.hd).Ib(w.Ue(u)),a=p.Ib(w.Ue(a)),d.Gt(p,n,o),o=d.Kz(y,a),a=0;a<o.length;a++)d=w.mi(p.Ke(o[a]),u,"&"),c.ba.Ic(d.K())&&(d.Eh(2,n),d.K()==1736&&d.hm()),l[d.Eb()]=d;return l},w.gp=function(u,a,n,o){if(u.Eb()>a.Eb())return w.mi(w.Ue(u),u,"^");if(u.Eb()<a.Eb()||u.B())return w.mi(w.Ue(a),u,"^");if(a.B())return w.mi(w.Ue(u),u,"^");var l=new c.l;u.A(l);var p=new c.l;a.A(p);var d=new c.l;return d.L(l),d.$b(p),n=c.ua.Xd(n,d,!0),p=new w,d=(l=new c.hd).Ib(w.Ue(u)),a=l.Ib(w.Ue(a)),p.Gt(l,n,o),o=p.gp(d,a),u=w.mi(l.Ke(o),u,"^"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},w.prototype.GQ=function(u,a){var n=this.j.g;u=n.wf(u,-1);for(var o=a.size,l=0;l<o;l++){var p=a.get(l);n.kj(u,p)}n.mn(u,!0)},w.prototype.WW=function(u,a){for(var n=this.j.g,o=n.md;o!=-1;o=n.ve(o))if(o==a)for(var l=n.Ob(o);l!=-1;l=n.Sb(l)){var p=n.Ya(l);if(p!=-1)for(var d=n.V(p);d!=-1;){p=this.j.Ie(p);var y=this.j.Ie(d);(p=this.j.nR(p,y))!=-1&&(y=this.j.ya(p),this.j.Kb(p,u,1),this.j.Kb(y,u,2)),p=d,d=n.V(p)}}},w.prototype.YV=function(u,a,n,o){n=this.j.Ma(n),o=this.j.Ma(o);var l=new c.ja(0);l.Jb(256);for(var p=this.j.g,d=this.j.bh(),y=this.j.Oe;y!=-1;y=this.j.Tf(y)){var g=this.j.Je(y);if(g!=-1){var _=g;do{if(this.j.Bb(_,d)!=1){var M=_,$=_,E=!1,k=0;do{if(this.j.Kb(M,d,1),!E){var P=this.j.fh(M);P&o&&this.j.af(M)&n&&($=M,E=!0)}E&&(l.add(this.j.vj(this.j.mm(this.j.lk(M)))),u!=-1&&(P=this.j.fh(M))&o&&(k|=P=this.j.Bb(M,u))),M=this.j.kc(M)}while(M!=$);E&&0<this.j.Mp(this.j.$e($))&&(M=p.Kg(1736),this.GQ(M,l),a!=-1&&p.CJ(M,a,k)),l.clear(!1)}_=this.j.kc(this.j.ya(_))}while(_!=g)}}this.j.Lg(d)},w.prototype.AP=function(u,a,n,o){this.j.tW();var l=-1;u!=-1&&(l=this.j.bh(),this.WW(l,n)),this.YV(l,u,a,n),l!=-1&&(this.j.Lg(l),l=-1);var p=this.j.g;for(u=0,l=p.md;l!=-1;l=p.ve(l))l!=a&&l!=n&&(o.add(l),u++);o.Wd(0,u,function(d,y){return(d=p.qz(p.Ob(d)))<(y=p.qz(p.Ob(y)))?-1:d==y?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();c.Hg=C}(U||(U={})),function(c){var C=function(){function w(u){u!==void 0?this.Jt(u):this.MB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(u){return this==u||u instanceof w&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},w.prototype.dc=function(){return c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj()},w.prototype.Gh=function(u,a){var n=this.qb*u.x+this.bb*u.y+this.Qb;a.x=this.eb*u.x+this.jb*u.y+this.Lb,a.y=n},w.prototype.aY=function(u,a,n){for(var o=0;o<a;o++){var l=u[o].x,p=u[o].y,d=this.eb*l+this.jb*p+this.Lb;l=this.qb*l+this.bb*p+this.Qb,n[o]!=null?n[o].na(d,l):n[o]=c.h.construct(d,l)}},w.prototype.multiply=function(u){w.multiply(this,u,this)},w.multiply=function(u,a,n){var o=u.eb*a.eb+u.qb*a.jb,l=u.jb*a.eb+u.bb*a.jb,p=u.Lb*a.eb+u.Qb*a.jb+a.Lb,d=u.eb*a.qb+u.qb*a.bb,y=u.jb*a.qb+u.bb*a.bb;u=u.Lb*a.qb+u.Qb*a.bb+a.Qb,n.eb=o,n.jb=l,n.Lb=p,n.qb=d,n.bb=y,n.Qb=u},w.prototype.Qf=function(){var u=new w;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},w.prototype.hC=function(u){if(!u.B()){for(var a=[],n=0;4>n;n++)a[n]=new c.h;u.iB(a),this.bY(a,a),u.bx(a,4)}},w.prototype.bY=function(u,a){for(var n=0;n<u.length;n++){var o=new c.h,l=u[n];o.x=this.eb*l.x+this.jb*l.y+this.Lb,o.y=this.qb*l.x+this.bb*l.y+this.Qb,a[n]=o}},w.prototype.kS=function(u,a){u.B()||a.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/u.S(),this.bb=a.da()/u.da(),this.Lb=a.v-u.v*this.eb,this.Qb=a.G-u.G*this.bb)},w.prototype.$X=function(u){var a=new c.h,n=new c.h;a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.sub(a);var o=.5*a.Uk();return a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.add(n),u*(o>(a=.5*a.Uk())?Math.sqrt(o):Math.sqrt(a))},w.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(u){if(u!==void 0){var a=c.h.construct(0,1);return this.Gh(a,a),a.sub(c.h.construct(0,1)),a.Uk()>u*u?!1:(a.na(0,0),this.Gh(a,a),!(a.Uk()>u*u)&&(a.na(1,0),this.Gh(a,a),a.sub(c.h.construct(1,0)),a.Uk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.ig=function(u,a){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=a},w.prototype.Jt=function(u,a){a!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(u,u)},w.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.kX=function(u){this.lX(Math.cos(u),Math.sin(u))},w.prototype.lX=function(u,a){this.eb=u,this.jb=-a,this.Lb=0,this.qb=a,this.bb=u,this.Qb=0},w.prototype.shift=function(u,a){this.Lb+=u,this.Qb+=a},w.prototype.scale=function(u,a){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=a,this.bb*=a,this.Qb*=a},w.prototype.flipX=function(u,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+a-this.Lb},w.prototype.flipY=function(u,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+a-this.Qb},w.prototype.rotate=function(u){var a=new w;a.kX(u),this.multiply(a)},w.prototype.inverse=function(u){if(u!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?u.lx():(a=1/a,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,u.eb=this.bb*a,u.jb=-this.jb*a,u.qb=-this.qb*a,u.bb=this.eb*a)}else this.inverse(this)},w}();c.Ed=C}(U||(U={})),function(c){var C=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(u,a){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(u,a,n){this.Lb+=u,this.Qb+=a,this.Cg+=n},w.prototype.hC=function(u){if(!u.B()){for(var a=new c.Od[8],n=0;8>n;n++)a[n]=new c.Od;u.iB(a),this.transform(a,8,a),u.bx(a)}},w.prototype.transform=function(u,a,n){for(var o=0;o<a;o++){var l=new c.Od,p=u[o];l.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,l.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,l.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,n[o]=l}},w.prototype.hp=function(u){var a=new c.Od;return a.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,a.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,a.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,a},w.prototype.Bg=function(u){w.multiply(this,u,this)},w.multiply=function(u,a,n){var o=u.eb*a.eb+u.qb*a.jb+u.pf*a.Ve,l=u.eb*a.qb+u.qb*a.bb+u.pf*a.We,p=u.eb*a.pf+u.qb*a.Ye+u.pf*a.Ze,d=u.jb*a.eb+u.bb*a.jb+u.Ye*a.Ve,y=u.jb*a.qb+u.bb*a.bb+u.Ye*a.We,g=u.jb*a.pf+u.bb*a.Ye+u.Ye*a.Ze,_=u.Ve*a.eb+u.We*a.jb+u.Ze*a.Ve,M=u.Ve*a.qb+u.We*a.bb+u.Ze*a.We,$=u.Ve*a.pf+u.We*a.Ye+u.Ze*a.Ze,E=u.Lb*a.eb+u.Qb*a.jb+u.Cg*a.Ve+a.Lb,k=u.Lb*a.qb+u.Qb*a.bb+u.Cg*a.We+a.Qb;u=u.Lb*a.pf+u.Qb*a.Ye+u.Cg*a.Ze+a.Cg,n.eb=o,n.qb=l,n.pf=p,n.jb=d,n.bb=y,n.Ye=g,n.Ve=_,n.We=M,n.Ze=$,n.Lb=E,n.Qb=k,n.Cg=u},w.inverse=function(u,a){var n=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(n==0)throw c.i.ga("math singularity");var o=1/n;n=(u.bb*u.Ze-u.Ye*u.We)*o;var l=-(u.jb*u.Ze-u.Ye*u.Ve)*o,p=(u.jb*u.We-u.bb*u.Ve)*o,d=-(u.qb*u.Ze-u.We*u.pf)*o,y=(u.eb*u.Ze-u.pf*u.Ve)*o,g=-(u.eb*u.We-u.qb*u.Ve)*o,_=(u.qb*u.Ye-u.pf*u.bb)*o,M=-(u.eb*u.Ye-u.pf*u.jb)*o;o*=u.eb*u.bb-u.qb*u.jb;var $=-(u.Lb*n+u.Qb*l+u.Cg*p),E=-(u.Lb*d+u.Qb*y+u.Cg*g);u=-(u.Lb*_+u.Qb*M+u.Cg*o),a.eb=n,a.qb=d,a.pf=_,a.jb=l,a.bb=y,a.Ye=M,a.Ve=p,a.We=g,a.Ze=o,a.Lb=$,a.Qb=E,a.Cg=u},w.prototype.Qf=function(){var u=new w;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},w}();c.FY=C}(U||(U={})),function(c){var C=function(u){function a(n){if(n!==void 0)n=u.call(this,n.dc(),n)||this;else{(n=u.call(this)||this).dg=[],n.dg[0]=0,n.Ba=1,n.wh=[];for(var o=0;10>o;o++)n.wh[o]=-1;n.wh[n.dg[0]]=0}return n.lq=!0,n}return St(a,u),a.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.eD())},a.prototype.removeAttribute=function(n){if(n==0)throw c.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.eD())},a.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.dg[0]]=0,this.lq=!0},a.prototype.zF=function(){return w.fz().add(this)},a.pg=function(){return w.fz().VR()},a.prototype.oM=function(){var n=this.dc();return new c.sa(n,this)},a.prototype.eD=function(){for(var n=this.Ba=0,o=0;10>n;n++)0<=this.wh[n]&&(this.dg[o]=n,this.wh[n]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},a.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof a)||n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return this.lq==n.lq},a.prototype.BG=function(n){if(n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return!0},a.Kw=function(n,o){for(var l=[],p=0;p<n.Ba;p++)l[p]=-1;p=0;for(var d=n.Ba;p<d;p++)l[p]=o.Rf(n.ld(p));return l},a.wR=function(n,o){return(n=new a(n)).se(o),n.zF()},a.xR=function(n,o){for(var l=null,p=0;10>p;p++)!n.hasAttribute(p)&&o.hasAttribute(p)&&(l==null&&(l=new a(n)),l.se(p));return l!=null?l.zF():n},a}(c.sa);c.fe=C;var w=function(){function u(){this.map=[];var a=new C;this.add(a),(a=new C).se(1),this.add(a)}return u.fz=function(){return u.XK},u.prototype.VR=function(){return u.gt},u.prototype.add=function(a){var n=a.dc();if(u.gt!=null&&u.gt.dc()==n&&a.BG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==n&&a.BG(u.Fw))return u.Fw;var o=null;return this.map[n]!==void 0&&(o=this.map[n]),o==null&&((o=a.oM()).Ba==1?u.gt=o:o.Ba==2&&o.ld(1)==1?u.Fw=o:this.map[n]=o),o},u.XK=new u,u}()}(U||(U={}));var Os={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Dm={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},ya=new(function(){function c(){this.MM=50,this.pp=new Map,this.ij=[]}return c.prototype.clear=function(){this.ij.length=0,this.pp.clear()},c.prototype.delete=function(C){return!!this.pp.delete(C)&&(this.ij.splice(this.ij.indexOf(C),1),!0)},c.prototype.get=function(C){var w=this.pp.get(C);if(w!==void 0)return this.ij[0]!==C&&(this.ij.splice(this.ij.indexOf(C),1),this.ij.unshift(C)),w},c.prototype.has=function(C){return this.pp.has(C)},c.prototype.set=function(C,w){return this.get(C)!==void 0&&this.delete(C),this.ij.unshift(C),this.pp.set(C,w),this.jM(),this},c.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var C=this.ij.pop();this.pp.delete(C)}},c}()),Se=((Ni={}).convertJSONToGeometry=function(c){return U.ac.aP(c)},Ni.hasM=function(c){return c.hasAttribute(U.Kh.M)},Ni.hasZ=function(c){return c.hasAttribute(U.Kh.Z)},Ni.getPointX=function(c){return c.Ng()},Ni.getPointY=function(c){return c.kh()},Ni.getPointZ=function(c){return c.XR()},Ni.getPointM=function(c){return c.uR()},Ni.getXMin=function(c){return c.gs()},Ni.getYMin=function(c){return c.js()},Ni.getXMax=function(c){return c.fs()},Ni.getYMax=function(c){return c.hs()},Ni.getZExtent=function(c){return c.Vg(U.Kh.Z,0)},Ni.getMExtent=function(c){return c.Vg(U.Kh.M,0)},Ni.exportPaths=function(c){var C=[],w=c.ea(),u=null,a=null,n=c.hasAttribute(U.Kh.Z),o=c.hasAttribute(U.Kh.M);n&&(u=c.vb(U.Kh.Z)),o&&(a=c.vb(U.Kh.M));for(var l=new U.h,p=0;p<w;p++){for(var d=c.Ca(p),y=c.Ka(p),g=0,_=0,M=NaN,$=NaN,E=NaN,k=NaN,P=c.ec(p),F=[],D=d;D<d+y;D++){c.D(D,l),k=E=NaN;var V=[l.x,l.y];n&&(E=u.get(D),V.push(E)),o&&(k=a.get(D),V.push(k)),D==d&&P&&(g=l.x,_=l.y,M=E,$=k),F.push(V)}!P||g==l.x&&_==l.y&&(!n||isNaN(M)&&isNaN(E)||M==E)&&(!o||isNaN($)&&isNaN(k)||$==k)||F.push(F[0].slice(0)),C.push(F)}return C},Ni.exportPathsFlat=function(){},Ni.exportPoints=function(c){var C=c.hasAttribute(U.Kh.Z),w=c.hasAttribute(U.Kh.M),u=null,a=null;C&&(u=c.vb(U.Kh.Z)),w&&(a=c.vb(U.Kh.M));for(var n=new U.h,o=c.I(),l=[],p=0;p<o;p++){c.D(p,n);var d=[n.x,n.y];C&&d.push(u.get(p)),w&&d.push(a.get(p)),l.push(d)}return l},Ni.exportPointsFlat=function(){},Ni),vl=new Map;return function(){function c(){}return c.buffer=Ar,c.clip=O,c.contains=L,c.convexHull=Pe,c.crosses=z,c.cut=R,c.densify=Fm,c.difference=He,c.disjoint=oe,c.distance=j,c.equals=H,c.extendedSpatialReferenceInfo=A,c.generalize=s3,c.geodesicArea=Nm,c.geodesicBuffer=ai,c.geodesicDensify=o3,c.geodesicLength=u3,c.intersect=st,c.intersects=Y,c.isSimple=xe,c.nearestCoordinate=In,c.nearestVertex=n3,c.nearestVertices=Rm,c.offset=ii,c.overlaps=le,c.planarArea=a3,c.planarLength=l3,c.relate=ve,c.simplify=Fe,c.symmetricDifference=ze,c.touches=X,c.union=Ne,c.within=te,c.rotate=U.Dx.rotate,c.flipHorizontal=U.Dx.EQ,c.flipVertical=U.Dx.FQ,c.intersectLinesToPoints=m3,c.ExtendedParams=U.tC,c.clearDefaultSpatialReferenceTolerance=y3,c.changeDefaultSpatialReferenceTolerance=f3,c._enableProjection=h3,c._project=d3,c._getTransformation=c3,c._getTransformationBySuitability=p3,c}()}var r=i();r!==void 0&&(t.exports=r)})({get exports(){return Lw},set exports(t){Lw=t}});const ct=Lw,dwe=pwe({__proto__:null,default:ct},[Lw]),fwe=Object.freeze(Object.defineProperty({__proto__:null,G:ct,g:dwe},Symbol.toStringTag,{value:"Module"})),Ot={convertToGEGeometry:ywe,exportPoint:mwe,exportPolygon:gwe,exportPolyline:vwe,exportMultipoint:wwe,exportExtent:bwe};function ywe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function mwe(t,e,i){const r=t.hasZ(e),s=t.hasM(e),h=new ke({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return r&&(h.z=t.getPointZ(e)),s&&(h.m=t.getPointM(e)),h.cache._geVersion=e,h}function gwe(t,e,i){const r=new ua({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function vwe(t,e,i){const r=new _n({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function wwe(t,e,i){const r=new rm({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return r.cache._geVersion=e,r}function bwe(t,e,i){const r=t.hasZ(e),s=t.hasM(e),h=new At({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(r){const f=t.getZExtent(e);h.zmin=f.vmin,h.zmax=f.vmax}if(s){const f=t.getMExtent(e);h.mmin=f.vmin,h.mmax=f.vmax}return h.cache._geVersion=e,h}const _we=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Ot},Symbol.toStringTag,{value:"Module"}));function Lt(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function xwe(t){return ct.extendedSpatialReferenceInfo(t)}function Swe(t,e){return ct.clip(Ot,Lt(t),t,e)}function Mwe(t,e){return ct.cut(Ot,Lt(t),t,e)}function $we(t,e){return ct.contains(Ot,Lt(t),t,e)}function Twe(t,e){return ct.crosses(Ot,Lt(t),t,e)}function Iwe(t,e,i){return ct.distance(Ot,Lt(t),t,e,i)}function Ewe(t,e){return ct.equals(Ot,Lt(t),t,e)}function Awe(t,e){return ct.intersects(Ot,Lt(t),t,e)}function Cwe(t,e){return ct.touches(Ot,Lt(t),t,e)}function kwe(t,e){return ct.within(Ot,Lt(t),t,e)}function Owe(t,e){return ct.disjoint(Ot,Lt(t),t,e)}function Pwe(t,e){return ct.overlaps(Ot,Lt(t),t,e)}function Rwe(t,e,i){return ct.relate(Ot,Lt(t),t,e,i)}function Fwe(t){return ct.isSimple(Ot,Lt(t),t)}function Nwe(t){return ct.simplify(Ot,Lt(t),t)}function Lwe(t,e=!1){return ct.convexHull(Ot,Lt(t),t,e)}function jwe(t,e){return ct.difference(Ot,Lt(t),t,e)}function Dwe(t,e){return ct.symmetricDifference(Ot,Lt(t),t,e)}function zwe(t,e){return ct.intersect(Ot,Lt(t),t,e)}function Vwe(t,e=null){return ct.union(Ot,Lt(t),t,e)}function Gwe(t,e,i,r,s,h){return ct.offset(Ot,Lt(t),t,e,i,r,s,h)}function qwe(t,e,i,r=!1){return ct.buffer(Ot,Lt(t),t,e,i,r)}function Uwe(t,e,i,r,s,h){return ct.geodesicBuffer(Ot,Lt(t),t,e,i,r,s,h)}function Bwe(t,e,i=!0){return ct.nearestCoordinate(Ot,Lt(t),t,e,i)}function Hwe(t,e){return ct.nearestVertex(Ot,Lt(t),t,e)}function Wwe(t,e,i,r){return ct.nearestVertices(Ot,Lt(t),t,e,i,r)}function x$(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function Jwe(t,e,i){if(t==null)throw new M0;const r=t.spatialReference;if((i=i??x$(t))==null)throw new M0;const s=t.constructor.fromJSON(ct.rotate(t,e,i));return s.spatialReference=r,s}function Kwe(t,e){if(t==null)throw new M0;const i=t.spatialReference;if((e=e??x$(t))==null)throw new M0;const r=t.constructor.fromJSON(ct.flipHorizontal(t,e));return r.spatialReference=i,r}function Zwe(t,e){if(t==null)throw new M0;const i=t.spatialReference;if((e=e??x$(t))==null)throw new M0;const r=t.constructor.fromJSON(ct.flipVertical(t,e));return r.spatialReference=i,r}function Ywe(t,e,i,r){return ct.generalize(Ot,Lt(t),t,e,i,r)}function Xwe(t,e,i){return ct.densify(Ot,Lt(t),t,e,i)}function Qwe(t,e,i,r=0){return ct.geodesicDensify(Ot,Lt(t),t,e,i,r)}function ebe(t,e){return ct.planarArea(Ot,Lt(t),t,e)}function tbe(t,e){return ct.planarLength(Ot,Lt(t),t,e)}function ibe(t,e,i){return ct.geodesicArea(Ot,Lt(t),t,e,i)}function WG(t,e,i){return ct.geodesicLength(Ot,Lt(t),t,e,i)}function rbe(t,e){return ct.intersectLinesToPoints(Ot,Lt(t),t,e)}function nbe(t,e){ct.changeDefaultSpatialReferenceTolerance(t,e)}function sbe(t){ct.clearDefaultSpatialReferenceTolerance(t)}class M0 extends Error{constructor(){super("Illegal Argument Exception")}}const xSe=Object.freeze(Object.defineProperty({__proto__:null,buffer:qwe,changeDefaultSpatialReferenceTolerance:nbe,clearDefaultSpatialReferenceTolerance:sbe,clip:Swe,contains:$we,convexHull:Lwe,crosses:Twe,cut:Mwe,densify:Xwe,difference:jwe,disjoint:Owe,distance:Iwe,equals:Ewe,extendedSpatialReferenceInfo:xwe,flipHorizontal:Kwe,flipVertical:Zwe,generalize:Ywe,geodesicArea:ibe,geodesicBuffer:Uwe,geodesicDensify:Qwe,geodesicLength:WG,intersect:zwe,intersectLinesToPoints:rbe,intersects:Awe,isSimple:Fwe,nearestCoordinate:Bwe,nearestVertex:Hwe,nearestVertices:Wwe,offset:Gwe,overlaps:Pwe,planarArea:ebe,planarLength:tbe,relate:Rwe,rotate:Jwe,simplify:Nwe,symmetricDifference:Dwe,touches:Cwe,union:Vwe,within:kwe},Symbol.toStringTag,{value:"Module"})),obe=(t,e)=>WG({paths:[[[t.coords.latitude,t.coords.longitude],[e.coords.latitude,e.coords.longitude]]],spatialReference:{wkid:4326}},"meters"),abe=(t,e)=>t/e,lbe=t=>{const e=t.reduce((r,s)=>r+s)/t.length,i=t.pop();return!t.some(r=>Math.abs(i-r)<=e)},ube=({currentPosition:t,lastPosition:e,speeds:i})=>!!e&&(i.length>=5&&i.shift(),i.push(abe(Math.ceil(obe(t,e)),t.timestamp-e.timestamp)),!(i.length<2)&&lbe(i)),hbe=15e3;let ps=class extends cwe{constructor(t){super(t),this._watchId=void 0,this._trackStartingTimeoutId=void 0,this._settingPosition=null,this._lastFilterPosition=null,this._speeds=[],this.defaultPositionFilterFunction=({currentPosition:e,lastPosition:i})=>!ube({currentPosition:e,lastPosition:i,speeds:this._speeds}),this.positionFilterFunction=this.defaultPositionFilterFunction}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||this._trackStartingTimeoutId!==void 0?"waiting":this.tracking?"tracking":"ready":"feature-unsupported"}get tracking(){return this._watchId!==void 0}start(){this.state!=="disabled"&&this.state!=="feature-unsupported"&&this._startTracking()}stop(){this.state!=="disabled"&&this.state!=="feature-unsupported"&&this._stopTracking()}_stopWatchingPosition(){this._watchId!==void 0&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}_stopTracking(){this._clearWaitingTimer(),this._stopWatchingPosition(),this._clear(),this._speeds=[],this._lastFilterPosition=null}_startTracking(){this._stopTracking();const t=async e=>{const{_lastFilterPosition:i}=this,{timestamp:r,coords:s}=e,h={timestamp:r,coords:{latitude:s.latitude,longitude:s.longitude}};try{if(typeof this.positionFilterFunction=="function"&&!this.positionFilterFunction.call(null,{currentPosition:h,lastPosition:i}))return;this._lastFilterPosition=h,await this._setPosition(e),this._clearWaitingTimer();const{view:f,graphic:m}=this;if(f&&f.graphics.remove(m),m){const b=m.clone();this.graphic=b,f&&f.graphics.push(b)}this.emit("track",{position:e})}catch(f){throw this._emitError(f),this._clearWaitingTimer(),f}};this._watchId=navigator.geolocation.watchPosition(e=>{this._settingPosition=t(e)},this._handleWatchPositionError.bind(this),this.geolocationOptions??void 0),this._trackStartingTimeoutId=setTimeout(()=>{this._trackStartingTimeoutId=void 0},hbe)}_handleWatchPositionError(t){this._emitError(t),this._stopTracking()}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=void 0,this._settingPosition=null}_emitError(t){this.emit("track-error",{error:t})}};v([x()],ps.prototype,"_watchId",void 0),v([x()],ps.prototype,"_trackStartingTimeoutId",void 0),v([x()],ps.prototype,"_settingPosition",void 0),v([x({readOnly:!0})],ps.prototype,"defaultPositionFilterFunction",void 0),v([x()],ps.prototype,"positionFilterFunction",void 0),v([x({readOnly:!0})],ps.prototype,"state",null),v([x({readOnly:!0})],ps.prototype,"tracking",null),v([x()],ps.prototype,"start",null),v([x()],ps.prototype,"stop",null),ps=v([B("esri.widgets.Track.TrackViewModel")],ps);const JG=ps,Io={base:"esri-track esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",startTrackingIcon:"esri-icon-tracking",stopTrackingIcon:"esri-icon-pause",widgetIcon:"esri-icon-tracking",disabled:"esri-disabled",hidden:"esri-hidden"},KG="esri.widgets.Track",mC=fe.getLogger(KG);let ar=class extends Er{constructor(t,e){super(t,e),this.iconClass=Io.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new JG}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get rotationDisabled(){return this.viewModel.rotationDisabled}set rotationDisabled(t){this.viewModel.rotationDisabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get tracking(){return this.viewModel.tracking}get useHeadingEnabled(){return yy(mC,"useHeadingEnabled",{replacement:"rotationDisabled",version:"4.27",warnOnce:!0}),!this.viewModel.rotationDisabled}set useHeadingEnabled(t){yy(mC,"useHeadingEnabled",{replacement:"rotationDisabled",version:"4.27",warnOnce:!0}),this.viewModel.rotationDisabled=!t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const t=this.get("viewModel.state"),e={[Io.disabled]:t==="disabled",[Io.hidden]:t==="feature-unsupported"},i=t==="tracking",r={[Io.startTrackingIcon]:!i&&t!=="waiting",[Io.stopTrackingIcon]:i,[Io.rotating]:t==="waiting",[Io.loading]:t==="waiting"},{messages:s}=this,h=(i?s==null?void 0:s.stopTracking:s==null?void 0:s.startTracking)??"";return ie("div",{bind:this,class:this.classes(Io.base,e),hidden:t==="feature-unsupported",onclick:this._toggleTracking,onkeydown:this._toggleTracking,role:"button",tabIndex:0,"aria-label":h,title:h},ie("span",{"aria-hidden":"true",class:this.classes(Io.icon,r)}),ie("span",{class:Io.text},h))}_toggleTracking(){const t=this.viewModel;t&&t.state!=="feature-unsupported"&&t.state!=="disabled"&&(t.state!=="tracking"&&t.state!=="waiting"?this.viewModel.start():this.viewModel.stop())}};v([x()],ar.prototype,"geolocationOptions",null),v([x()],ar.prototype,"goToLocationEnabled",null),v([x()],ar.prototype,"goToOverride",null),v([x()],ar.prototype,"graphic",null),v([x()],ar.prototype,"iconClass",void 0),v([x()],ar.prototype,"icon",void 0),v([x()],ar.prototype,"label",null),v([x(),xr("esri/widgets/Track/t9n/Track")],ar.prototype,"messages",void 0),v([x()],ar.prototype,"rotationDisabled",null),v([x()],ar.prototype,"scale",null),v([x({readOnly:!0})],ar.prototype,"tracking",null),v([x()],ar.prototype,"useHeadingEnabled",null),v([x()],ar.prototype,"view",null),v([x({type:JG}),_N(["track","track-error"])],ar.prototype,"viewModel",void 0),v([zn()],ar.prototype,"_toggleTracking",null),ar=v([B(KG)],ar);const cbe=ar;const ZG=document.getElementById("geolocationDiv"),pbe=new SP({basemap:"topo-vector"}),i3=new Y2e({container:"viewDiv",map:pbe,zoom:4,center:[15,65]}),r3=new cbe({view:i3});i3.ui.add(r3,"top-left");i3.ui.add(ZG,"top-right");r3.on("track",t=>{console.log("Track:",t),ZG.innerText=`
  Latitude: ${t.position.coords.latitude.toFixed(3)}
  Longitude: ${t.position.coords.longitude.toFixed(3)}
  Altitude: ${t.position.coords.altitude}
  Heading: ${t.position.coords.heading}
  Speed: ${t.position.coords.speed}
  Accuracy: ${t.position.coords.accuracy}m`});r3.on("track-error",t=>{console.error("Geolocation error:",t)});i3.when(()=>{r3.start()});export{Zo as $,Wc as A,Ut as B,cy as C,me as D,_t as E,fi as F,qk as G,w3e as H,Dce as I,fe as J,ke as K,wi as L,C6 as M,e_e as N,$s as O,sn as P,yl as Q,ZJ as R,z1 as S,E0 as T,AX as U,qe as V,ah as W,Q3e as X,jw as Y,ik as Z,he as _,nk as a,sh as a$,eQ as a0,Qd as a1,rm as a2,_n as a3,YJ as a4,sy as a5,xve as a6,M6e as a7,T6e as a8,ir as a9,$2e as aA,tQ as aB,Pz as aC,Hi as aD,np as aE,Ye as aF,dH as aG,Wk as aH,B7 as aI,my as aJ,fr as aK,Jw as aL,C0 as aM,Bxe as aN,tae as aO,fp as aP,an as aQ,fa as aR,ye as aS,Yw as aT,Me as aU,Ee as aV,S8 as aW,JN as aX,fne as aY,dne as aZ,un as a_,pp as aa,v as ab,x as ac,B as ad,H7 as ae,om as af,Q5e as ag,f0 as ah,Mr as ai,Zn as aj,Rk as ak,qn as al,Jc as am,Oe as an,rk as ao,At as ap,hw as aq,Gh as ar,c4e as as,ia as at,Rz as au,x0 as av,Z0e as aw,JM as ax,Mde as ay,Bge as az,Ui as b,KS as b$,fk as b0,Hxe as b1,al as b2,Pi as b3,Sn as b4,z3e as b5,ur as b6,J0 as b7,Ur as b8,e5e as b9,Nge as bA,c6e as bB,Wge as bC,w0 as bD,p6e as bE,_y as bF,_be as bG,ua as bH,d5e as bI,zc as bJ,zJ as bK,n_e as bL,hL as bM,b5e as bN,oI as bO,lL as bP,vo as bQ,Nw as bR,s_e as bS,X3e as bT,l_e as bU,nm as bV,oP as bW,aP as bX,ZS as bY,_P as bZ,J3e as b_,Am as ba,fo as bb,gO as bc,WH as bd,V3e as be,I9 as bf,sx as bg,Un as bh,Xt as bi,vG as bj,Tt as bk,dG as bl,pa as bm,er as bn,iM as bo,gp as bp,Ud as bq,Uu as br,gt as bs,Qe as bt,_r as bu,e3 as bv,pZ as bw,oG as bx,dV as by,aG as bz,Oi as c,WD as c$,JS as c0,M4e as c1,$4e as c2,S4e as c3,Dw as c4,kae as c5,C2 as c6,Ld as c7,DY as c8,S0 as c9,Doe as cA,j5e as cB,Be as cC,ml as cD,$G as cE,Qw as cF,NN as cG,pre as cH,dre as cI,CC as cJ,kC as cK,xbe as cL,Gn as cM,RJ as cN,v3 as cO,H3e as cP,K3e as cQ,BS as cR,nP as cS,NJ as cT,W9 as cU,eK as cV,qJ as cW,W3e as cX,u_e as cY,Y3e as cZ,UD as c_,Oae as ca,TP as cb,v_e as cc,M_e as cd,w_e as ce,__e as cf,b_e as cg,x_e as ch,xy as ci,Hn as cj,HK as ck,Au as cl,IO as cm,se as cn,MD as co,$D as cp,T4e as cq,pce as cr,hce as cs,It as ct,zoe as cu,N4e as cv,tt as cw,$3 as cx,foe as cy,nve as cz,Ts as d,G2 as d$,HD as d0,Ape as d1,Yo as d2,Vy as d3,Vb as d4,JJ as d5,ul as d6,eh as d7,t_e as d8,g_e as d9,Khe as dA,yo as dB,pse as dC,fL as dD,g5e as dE,PL as dF,f5e as dG,$ne as dH,S5e as dI,aI as dJ,qd as dK,gbe as dL,vbe as dM,cse as dN,dL as dO,Ope as dP,Ft as dQ,H2 as dR,dp as dS,gy as dT,hl as dU,ht as dV,_m as dW,Br as dX,Wue as dY,_ce as dZ,L3e as d_,oS as da,XS as db,Zc as dc,ug as dd,BN as de,DJ as df,Rc as dg,Td as dh,L1 as di,pr as dj,Du as dk,B8 as dl,M5e as dm,y5e as dn,kpe as dp,Boe as dq,X5e as dr,Hoe as ds,Z5e as dt,on as du,Jr as dv,P0 as dw,Y5e as dx,Whe as dy,Jhe as dz,we as e,C9e as e$,o4e as e0,S_e as e1,ft as e2,vt as e3,rp as e4,Ku as e5,b4 as e6,ci as e7,w4 as e8,x4 as e9,Vae as eA,$be as eB,Fy as eC,Zbe as eD,jc as eE,Kc as eF,b3e as eG,q0 as eH,_ae as eI,v3e as eJ,v9e as eK,b9e as eL,g9e as eM,AF as eN,P9e as eO,Aee as eP,E9e as eQ,Ate as eR,y9e as eS,$9e as eT,A9e as eU,Ete as eV,Tte as eW,x9e as eX,S9e as eY,M9e as eZ,m9e as e_,Z2 as ea,IX as eb,t3e as ec,$t as ed,ab as ee,C8 as ef,h_e as eg,IZ as eh,H_e as ei,h9e as ej,Ed as ek,WM as el,W0e as em,Ir as en,ti as eo,Vc as ep,Le as eq,bc as er,$0 as es,cq as et,Tae as eu,mce as ev,xce as ew,ZL as ex,mbe as ey,Pb as ez,l2 as f,Tbe as f$,I9e as f0,F9e as f1,w9e as f2,xr as f3,Er as f4,ie as f5,Ho as f6,Q2 as f7,SN as f8,OC as f9,K9e as fA,AZ as fB,BV as fC,S9 as fD,TC as fE,qhe as fF,Uhe as fG,Bhe as fH,o_e as fI,c_e as fJ,hO as fK,rO as fL,x5e as fM,h5e as fN,cL as fO,sL as fP,Nre as fQ,$_e as fR,wP as fS,Z3e as fT,UH as fU,YH as fV,ib as fW,k3e as fX,_s as fY,wbe as fZ,s2e as f_,e0 as fa,zd as fb,y3e as fc,pB as fd,co as fe,eb as ff,Yy as fg,ms as fh,I3e as fi,Rbe as fj,FB as fk,O5e as fl,l0 as fm,B1 as fn,o4 as fo,BB as fp,V5e as fq,Poe as fr,ct as fs,MK as ft,PK as fu,Yu as fv,HB as fw,B_e as fx,_5e as fy,jN as fz,Yt as g,I_e as g$,mo as g0,We as g1,at as g2,aa as g3,im as g4,ki as g5,mt as g6,vi as g7,Gt as g8,D3e as g9,cfe as gA,UY as gB,t0 as gC,rs as gD,KB as gE,nO as gF,sO as gG,ZB as gH,u4e as gI,h3e as gJ,zw as gK,oj as gL,l5e as gM,s5e as gN,r5e as gO,v5e as gP,Bne as gQ,a5e as gR,L9e as gS,j9e as gT,r_e as gU,sl as gV,Dae as gW,vb as gX,une as gY,p5e as gZ,e7 as g_,j2 as ga,Abe as gb,Cbe as gc,jz as gd,Dz as ge,Ms as gf,yfe as gg,Tm as gh,tX as gi,Vu as gj,Bi as gk,br as gl,FX as gm,u0 as gn,lh as go,qR as gp,OM as gq,Ou as gr,dX as gs,xs as gt,Oz as gu,C3e as gv,M3e as gw,TS as gx,ES as gy,ife as gz,lS as h,T9e as h$,E_e as h0,T_e as h1,G3e as h2,JR as h3,U7 as h4,U3e as h5,F1 as h6,Gne as h7,kne as h8,Nne as h9,hz as hA,Z1e as hB,qb as hC,A0 as hD,Nde as hE,Vde as hF,Y0 as hG,DS as hH,BW as hI,VM as hJ,gxe as hK,vxe as hL,Hde as hM,fbe as hN,CB as hO,SS as hP,nq as hQ,uK as hR,nn as hS,O9e as hT,k9e as hU,BG as hV,ewe as hW,dl as hX,iP as hY,Kk as hZ,Lu as h_,Hne as ha,w5e as hb,wY as hc,B5e as hd,Dq as he,l_ as hf,u_ as hg,c5e as hh,oi as hi,t5e as hj,h2e as hk,kZ as hl,m5e as hm,YN as hn,Ebe as ho,zz as hp,Q9 as hq,ZM as hr,Bt as hs,Jd as ht,Qie as hu,I4 as hv,Dse as hw,zse as hx,m8 as hy,dz as hz,K0e as i,Oce as i$,_9e as i0,R9e as i1,G_e as i2,W_e as i3,J_e as i4,ol as i5,fae as i6,Wr as i7,_3e as i8,vee as i9,Ss as iA,lB as iB,JP as iC,vae as iD,Uk as iE,p4e as iF,qae as iG,Bae as iH,xae as iI,lM as iJ,Mae as iK,$ae as iL,hr as iM,Vfe as iN,rS as iO,nS as iP,h7 as iQ,ip as iR,em as iS,$8 as iT,y7 as iU,fs as iV,TX as iW,wce as iX,Eae as iY,fce as iZ,Pae as i_,oo as ia,ese as ib,o5e as ic,FS as id,I4e as ie,Sbe as ig,FD as ih,A4e as ii,E4e as ij,C4e as ik,j3e as il,l4e as im,Aae as io,wW as ip,Iae as iq,Cce as ir,Ace as is,yu as it,h4e as iu,DI as iv,Gce as iw,Zoe as ix,uM as iy,Pce as iz,Fz as j,mhe as j$,T8 as j0,$P as j1,hM as j2,jb as j3,jE as j4,Gae as j5,o6 as j6,Ob as j7,zae as j8,SM as j9,fw as jA,bm as jB,gL as jC,X1 as jD,Sae as jE,c9e as jF,bk as jG,qw as jH,lm as jI,Iy as jJ,ku as jK,Bn as jL,UZ as jM,tb as jN,BZ as jO,K_e as jP,ei as jQ,Fbe as jR,sq as jS,l7 as jT,iR as jU,V_e as jV,g0 as jW,fD as jX,uS as jY,sd as jZ,D4 as j_,OD as ja,vy as jb,Tn as jc,Is as jd,yb as je,nh as jf,yK as jg,fK as jh,kJ as ji,d8 as jj,Hr as jk,kb as jl,pH as jm,cH as jn,T3e as jo,a_ as jp,vU as jq,jce as jr,z0 as js,tM as jt,_L as ju,Kre as jv,soe as jw,Zre as jx,TL as jy,OL as jz,jS as k,XU as k$,v2 as k0,sA as k1,N0 as k2,i_e as k3,a_e as k4,_8 as k5,mde as k6,H0e as k7,mye as k8,cye as k9,Yue as kA,Xue as kB,Que as kC,the as kD,ihe as kE,rhe as kF,nhe as kG,she as kH,ohe as kI,ahe as kJ,lhe as kK,uhe as kL,kD as kM,T0 as kN,AC as kO,po as kP,d3e as kQ,W$ as kR,uR as kS,NW as kT,ao as kU,VO as kV,kO as kW,zO as kX,Uae as kY,a4e as kZ,f3e as k_,YS as ka,m3e as kb,oa as kc,na as kd,UP as ke,Xk as kf,Dy as kg,Cae as kh,K5e as ki,qu as kj,PE as kk,by as kl,Wae as km,Hae as kn,th as ko,gb as kp,q7 as kq,hhe as kr,dae as ks,gl as kt,x4e as ku,_4e as kv,b4e as kw,Ahe as kx,dhe as ky,fhe as kz,Y0e as l,F$ as l0,q as l1,$3e as l2,z5e as l3,D5e as l4,xM as l5,m_e as l6,ll as l7,Wu as l8,yD as l9,Pbe as lA,kbe as lB,IB as lC,JY as lD,FR as lE,Zu as lF,_S as lG,pm as lH,KN as lI,E3e as lJ,eie as lK,hg as lL,ox as lM,Pfe as lN,_de as lO,wde as lP,jO as lQ,xfe as lR,g3e as lS,q3e as lT,kH as lU,$5e as lV,nM as lW,N5e as lX,j4e as lY,xSe as lZ,r7 as la,SD as lb,Ep as lc,tL as ld,d0 as le,uve as lf,hve as lg,sve as lh,wp as li,qO as lj,gde as lk,EC as ll,mH as lm,q_e as ln,U_e as lo,yX as lp,fX as lq,CW as lr,qY as ls,Tb as lt,ca as lu,tr as lv,dA as lw,Jte as lx,rR as ly,Obe as lz,ue as m,Hbe as n,Y6e as o,oq as p,Mbe as q,K0 as r,ne as s,ybe as t,WP as u,TG as v,Hw as w,$i as x,Z6e as y,Mn as z};
