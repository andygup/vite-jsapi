import"./string-3d0ebcd3.js";import{o as f}from"./jsonMap-a9c94baf.js";import{r as c,z as H}from"./typedArrayUtil-2bcf3cee.js";import{k as T,s as l,t as U,e as d,P as b,g as E,i as G,C as _,j as g,A as C}from"./Extent-7f29a1bb.js";function h(e){return new T({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const Y=h(l),B=h(U),S=h(d),se=new T({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${l.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function ie(e){return e&&(b(e)||e===B)?B:e&&(E(e)||e===S)?S:Y}function D(e){return c(e)&&(b(e)||e===B)?U:c(e)&&(E(e)||e===S)?d:l}function ne(e){return G(e)?U:_(e)?d:l}const re=39.37,N=l.radius*Math.PI/200,P=/UNIT\[([^\]]+)\]\]$/i,o=g,O=/UNIT\[([^\]]+)\]/i,X=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),x=f()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),t=e=>e*e,u=e=>e*e*e,m={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:t(.001)},"square-centimeters":{inBaseUnits:t(.01)},"square-decimeters":{inBaseUnits:t(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:t(1e3)},"square-inches":{inBaseUnits:t(.0254)},"square-feet":{inBaseUnits:t(.3048)},"square-yards":{inBaseUnits:t(.9144)},"square-miles":{inBaseUnits:t(1609.344)},"square-us-feet":{inBaseUnits:t(1200/3937)},acres:{inBaseUnits:.0015625*t(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*u(.001)},"cubic-centimeters":{inBaseUnits:1e3*u(.01)},"cubic-decimeters":{inBaseUnits:1e3*u(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*u(1e3)},"cubic-inches":{inBaseUnits:1e3*u(.0254)},"cubic-feet":{inBaseUnits:1e3*u(.3048)},"cubic-yards":{inBaseUnits:1e3*u(.9144)},"cubic-miles":{inBaseUnits:1e3*u(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},F=(()=>{const e={};for(const s in m)for(const i in m[s].units)e[i]=s;return e})();function W(e,s,i){return e*m[i].units[s].inBaseUnits}function $(e,s,i){return e/m[i].units[s].inBaseUnits}function q(e){const s=F[e];if(!s)throw new Error("unknown type");return s}function k(e,s=null){return s=s||q(e),m[s].baseUnit===e}function v(e,s,i){if(s===i)return e;const n=q(s);if(n!==q(i))throw new Error("incompatible units");const r=k(s,n)?e:W(e,s,n);return k(i,n)?r:$(r,i,n)}function te(e,s,i){return v(e,s,"meters")/(i*Math.PI/180)}function z(e){return x.fromJSON(e.toLowerCase())||null}function ae(e){if(c(e)&&!C(e))return 1;const s=w(e);return s>1e5?1:s}function ue(e){return w(e)>=D(e).metersPerDegree?"meters":K(e)}function w(e,s=l.metersPerDegree){return H(J(e,!0),s)}function J(e,s=!1){const i=c(e)?e.wkid:null,n=c(e)?e.wkt:null;let r=null;if(i){if(G(i))return U.metersPerDegree;if(_(i))return d.metersPerDegree;r=o.values[o[i]],!r&&s&&X.has(i)&&(r=N)}else n&&(R(n)?r=I(P.exec(n),r):M(n)&&(r=I(O.exec(n),r)));return r}function I(e,s){return e&&e[1]?A(e[1]):s}function A(e){return parseFloat(e.split(",")[1])}function K(e){const s=c(e)?e.wkid:null,i=c(e)?e.wkt:null;let n=null;if(s)n=o.units[o[s]];else if(i){const r=R(i)?P:M(i)?O:null;if(r){const a=r.exec(i);a&&a[1]&&(n=Z(a[1]))}}return c(n)?z(n):null}function M(e){return/^GEOCCS/i.test(e)}function R(e){return/^PROJCS/i.test(e)}const L=1e-7;function Z(e){const s=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=s&&s[1];if(!i||!o.units.includes(i)){const n=A(e);i=null;const r=o.values;for(let a=0;a<r.length;++a)if(Math.abs(n-r[a])<L){i=o.units[a];break}}return i}const p={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},y={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},ce=f()(p),oe=f()(y);f()({...p,...y});export{w as $,B as E,z as G,Y as I,ae as L,ie as O,S as R,ue as W,K as X,te as Y,v as a,re as f,ce as l,oe as m,se as p,ne as s};
