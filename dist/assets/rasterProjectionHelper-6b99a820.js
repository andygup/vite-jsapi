import{e4 as D,aE as bn,ap as Y,W as O,Q as $,aj as Pn,bH as xn,K as G,e5 as Sn,s as Gn,e6 as T,e7 as k,e8 as tn,e9 as Nn,ea as En,aF as kn,eb as en}from"./index-af438f1c.js";var U;function hn(n,t,i){return!Sn(n,t,i)}function L(n,t,i){const r=hn(n,t,i);if(r&&!D())throw new Gn("rasterprojectionhelper-project","projection engine is not loaded");return r}(function(n){n[n.None=0]="None",n[n.North=1]="North",n[n.South=2]="South",n[n.Both=3]="Both"})(U||(U={}));const on=(n,t,i,r=0)=>{if(i[0]===1)return[0,0];let s=1,e=-1,o=1,u=-1;for(let a=0;a<n.length;a+=2)isNaN(n[a])||(s=s>n[a]?n[a]:s,e=e>n[a]?e:n[a],o=o>n[a+1]?n[a+1]:o,u=u>n[a+1]?u:n[a+1]);const{cols:c,rows:f}=t,l=(e-s)/c/i[0],d=(u-o)/f/i[1],p=2*r;let x=0,h=!1,m=[0,0];for(let a=0;a<c-3;a++){for(let w=0;w<f-3;w++){const y=a*f*2+2*w,g=(n[y]+n[y+4]+n[y+4*f]+n[y+4*f+4])/4,M=(n[y+1]+n[y+5]+n[y+4*f+1]+n[y+4*f+5])/4,R=Math.abs((g-n[y+2*f+2])/l),b=Math.abs((M-n[y+2*f+3])/d);if(R+b>x&&(x=R+b,m=[R,b]),p&&x>p){h=!0;break}}if(h)break}return m},Tn={3395:20037508342789244e-9,3410:17334193943686873e-9,3857:20037508342788905e-9,3975:17367530445161372e-9,4087:20037508342789244e-9,4088:20015108787169147e-9,6933:17367530445161372e-9,32662:20037508342789244e-9,53001:2001508679602057e-8,53002:1000754339801029e-8,53003:2001508679602057e-8,53004:2001508679602057e-8,53016:14152803599503474e-9,53017:17333573624304302e-9,53034:2001508679602057e-8,53079:20015114352186374e-9,53080:20015114352186374e-9,54001:20037508342789244e-9,54002:10018754171394624e-9,54003:20037508342789244e-9,54004:20037508342789244e-9,54016:14168658027268292e-9,54017:1736753044516137e-8,54034:20037508342789244e-9,54079:20037508342789244e-9,54080:20037508342789244e-9,54100:20037508342789244e-9,54101:20037508342789244e-9},A=32,B=4,K=B,X=new Map,H=new Map,F=500;async function jn(){D()||await bn()}function An(n,t,i){return L(n.spatialReference,t),i?en(t,n.spatialReference,n):en(n.spatialReference,t,n)}function sn(n,t,i,r=null){const s=n.spatialReference;if(s.equals(t))return n;L(s,t,r);const e=i.center,o=new Y({xmin:e.x-n.x/2,xmax:e.x+n.x/2,ymin:e.y-n.y/2,ymax:e.y+n.y/2,spatialReference:s}),u=O(o,t,r),c=v(t);let f;if(u==null||c!=null&&u.width>=c){const l=$(s)/$(t);f={x:n.x*l,y:n.y*l}}else f={x:u.width,y:u.height};return f}function N(n,t=.01){return $(n)?t/$(n):0}function rn(n,t,i=null,r=!0){const s=n.spatialReference;if(s.equals(t))return n;L(s,t,i);const e=O(n,t,i);return r&&e&&mn([n],[e],s,t),e}function mn(n,t,i,r){const s=I(i,!0),e=I(r,!0),o=N(i,F),u=N(r,F);if(o&&s!=null&&e!=null)for(let c=0;c<n.length;c++){const f=t[c];if(!f)continue;const{x:l}=n[c],{x:d}=f;d>=e[1]-u&&Math.abs(l-s[0])<o?f.x-=e[1]-e[0]:d<=e[0]+u&&Math.abs(l-s[1])<o&&(f.x+=e[1]-e[0])}}function vn(n){const{inSR:t,outSR:i,datumTransformation:r,preferPE:s}=n;if(t.equals(i)){const{points:e}=V(n,null);return e}return t.isWebMercator&&i.isWGS84||t.isWGS84&&i.isWebMercator?_n(n):L(t,i,r)&&s&&(t.isGeographic||W(t)!=null)?an(n):Cn(n)}function Cn(n){const{points:t}=V(n,null),{inSR:i,outSR:r,datumTransformation:s}=n,e=t.map(u=>new G(u[0],u[1],i)),o=O(e,r,s);return s&&mn(e,o,i,r),o.map(u=>u?[u.x,u.y]:[NaN,NaN])}function an(n){const{inSR:t,outSR:i,datumTransformation:r}=n,s=W(t),{points:e,mask:o}=V(n,s);if(!t.isGeographic){const c=t.wkid?T.coordsys(t.wkid):T.fromString(t.isGeographic?k.PE_TYPE_GEOGCS:k.PE_TYPE_PROJCS,t.wkt);tn.projToGeog(c,e.length,e)}if(r!=null&&r.steps.length){let c;if(i.isGeographic&&(c=e.map(([l])=>l>179.9955?1:l<-179.9955?-1:0)),r.steps.forEach(l=>{const d=l.wkid?T.geogtran(l.wkid):T.fromString(k.PE_TYPE_GEOGTRAN,l.wkt);Nn.geogToGeog(d,e.length,e,null,l.isInverse?k.PE_TRANSFORM_2_TO_1:k.PE_TRANSFORM_1_TO_2)}),c)for(let l=0;l<e.length;l++){const d=c[l],p=e[l][0],x=p>179.9955?1:p<-179.9955?-1:0;d&&x&&d!==x&&(e[l][0]=d>0?p+360:p-360)}}if(!i.isGeographic){const c=W(i,!0),f=c!=null&&c.isEnvelope?[c.bbox[1],c.bbox[3]]:[-90,90];zn(e,f);const l=i.wkid?T.coordsys(i.wkid):T.fromString(i.isGeographic?k.PE_TYPE_GEOGCS:k.PE_TYPE_PROJCS,i.wkt);tn.geogToProj(l,e.length,e)}let u=e;if(o&&e.length!==o.length){u=[];for(let c=0,f=0;c<o.length;c++)o[c]?u.push(e[f++]):u.push([NaN,NaN])}return u}function _n(n){const{cols:t,rows:i,xres:r,yres:s,usePixelCenter:e,inSR:o,outSR:u}=n;let{xmin:c,ymax:f}=n;e&&(c+=r/2,f-=s/2);const l=[],d=[],p=Math.max(t,i);for(let h=0;h<p;h++){const m=c+r*Math.min(t,h),a=f-s*Math.min(i,h),w=O(new G({x:m,y:a,spatialReference:o}),u);h<=t&&l.push(w.x),h<=i&&d.push(w.y)}const x=[];for(let h=0;h<t;h++)for(let m=0;m<i;m++)x.push([l[h],d[m]]);return x}function W(n,t=!1){let i=n.wkid||n.wkt;if(!i||n.isGeographic)return null;if(i=String(i),X.has(i)){const o=X.get(i);return t?o==null?void 0:o.gcs:o==null?void 0:o.pcs}const r=n.wkid?T.coordsys(n.wkid):T.fromString(n.isGeographic?k.PE_TYPE_GEOGCS:k.PE_TYPE_PROJCS,n.wkt),s=ln(r,N(n,1e-4)),e=ln(r,0,!0);return X.set(i,{pcs:s,gcs:e}),t?e:s}function ln(n,t=0,i=!1){const r=En.generate(n),s=i?n.horizonGcsGenerate():n.horizonPcsGenerate();if(!r||!(s!=null&&s.length))return null;let e=!1,o=s.find(a=>a.getInclusive()===1&&a.getKind()===1);if(!o){if(o=s.find(a=>a.getInclusive()===1&&a.getKind()===0),!o)return null;e=!0}const u=i?0:(r.getNorthPoleLocation()===2?1:0)|(r.getSouthPoleLocation()===2?2:0),c=r.isPannableRectangle(),f=o.getCoord();if(e)return{isEnvelope:e,isPannable:c,vertices:f,coef:null,bbox:[f[0][0]-t,f[0][1]-t,f[1][0]+t,f[1][1]+t],poleLocation:u};let l=0;const d=[];let[p,x]=f[0],[h,m]=f[0];for(let a=0,w=f.length;a<w;a++){l++,l===w&&(l=0);const[y,g]=f[a],[M,R]=f[l];if(R===g)d.push([y,M,g,R,2]);else{const b=(M-y)/(R-g||1e-4),E=y-b*g;g<R?d.push([b,E,g,R,0]):d.push([b,E,R,g,1])}p=p<y?p:y,x=x<g?x:g,h=h>y?h:y,m=m>g?m:g}return{isEnvelope:!1,isPannable:c,vertices:f,coef:d,bbox:[p,x,h,m],poleLocation:u}}function V(n,t){const i=[],{cols:r,rows:s,xres:e,yres:o,usePixelCenter:u}=n;let{xmin:c,ymax:f}=n;if(u&&(c+=e/2,f-=o/2),t==null){for(let x=0;x<r;x++)for(let h=0;h<s;h++)i.push([c+e*x,f-o*h]);return{points:i}}const l=new Uint8Array(r*s);if(t.isEnvelope){const{bbox:[x,h,m,a]}=t;for(let w=0,y=0;w<r;w++){const g=c+e*w,M=t.isPannable||g>=x&&g<=m;for(let R=0;R<s;R++,y++){const b=f-o*R;M&&b>=h&&b<=a&&(i.push([g,b]),l[y]=1)}}return{points:i,mask:l}}const d=t.coef,p=[];for(let x=0;x<s;x++){const h=f-o*x,m=[],a=[];for(let y=0;y<d.length;y++){const[g,M,R,b,E]=d[y];if(h===R&&R===b)m.push(g),m.push(M),a.push(2),a.push(2);else if(h>=R&&h<=b){const S=g*h+M;m.push(S),a.push(E)}}let w=m;if(m.length>2){let y=a[0]===2?0:a[0],g=m[0];w=[];for(let M=1;M<a.length;M++)a[M]===2&&M!==a.length-1||(a[M]!==y&&(w.push(y===0?Math.min(g,m[M-1]):Math.max(g,m[M-1])),y=a[M],g=m[M]),M===a.length-1&&w.push(a[M]===0?Math.min(g,m[M]):Math.max(g,m[M])));w.sort((M,R)=>M-R)}else m[0]>m[1]&&(w=[m[1],m[0]]);p.push(w)}for(let x=0,h=0;x<r;x++){const m=c+e*x;for(let a=0;a<s;a++,h++){const w=f-o*a,y=p[a];if(y.length===2)m>=y[0]&&m<=y[1]&&(i.push([m,w]),l[h]=1);else if(y.length>2){let g=!1;for(let M=0;M<y.length;M+=2)if(m>=y[M]&&m<=y[M+1]){g=!0;break}g&&(i.push([m,w]),l[h]=1)}}}return{points:i,mask:l}}function zn(n,t){const[i,r]=t;for(let s=0;s<n.length;s++){const e=n[s][1];(e<i||e>r)&&(n[s]=[NaN,NaN])}}function pn(n){const t=v(n[0].spatialReference);if(n.length<2||t==null)return n[0];const i=N(n[0].spatialReference);if((n=n.filter(u=>u.width>i)).length===1)return n[0];let{xmin:r,xmax:s,ymin:e,ymax:o}=n[0];for(let u=1;u<n.length;u++){const c=n[u];s=c.xmax+t*u,e=Math.min(e,c.ymin),o=Math.max(o,c.ymax)}return new Y({xmin:r,xmax:s,ymin:e,ymax:o,spatialReference:n[0].spatialReference})}function gn(n,t,i=null,r=!0){const s=n.spatialReference;if(s.equals(t))return n;const e=On(n),o=v(s,!0),u=v(t);if(e===0||o==null||u==null){const f=cn(n,t,i,r);if(o==null&&u!=null&&Math.abs(f.width-u)<N(t)&&D()){const l=W(s);if(l!=null&&l.poleLocation===U.None&&n.width<(l.bbox[2]-l.bbox[0])/2)return Wn(n,t)||f}return f}const c=n.clone().normalize();if(c.length===1&&n.xmax<o&&n.xmax-o/2>N(s)){const{xmin:f,xmax:l}=n;for(let d=0;d<=e;d++){const p=d===0?f:-o/2,x=d===e?l-o*d:o/2;c[d]=new Y({xmin:p,xmax:x,ymin:n.ymin,ymax:n.ymax,spatialReference:s})}}return pn(c.map(f=>cn(f,t,i,r)).filter(Pn))}function Bn(n,t,i){if(n.type==="extent"){const{xmin:r,ymin:s,xmax:e,ymax:o,spatialReference:u}=n;n=new xn({rings:[[[r,o],[e,o],[e,s],[r,s],[r,o]]],spatialReference:u})}return n.spatialReference.equals(t)?n:(L(n.spatialReference,t,i),O(n,t,i))}function Wn(n,t){const i=v(t);if(i==null)return null;let{xmin:r,ymin:s,xmax:e,ymax:o}=n;const u=n.spatialReference,c=new xn({spatialReference:u,rings:[[[r,s],[e,s],[e,o],[r,o],[r,s]]]}),f=O(c,t);if(f.rings.length!==2||!f.rings[0].length||!f.rings[1].length)return null;const{rings:l}=f,d=N(u),p=new Y({spatialReference:t});for(let x=0;x<2;x++){r=e=l[x][0][0],s=o=l[x][0][1];for(let h=0;h<l[x].length;h++)r=r>l[x][h][0]?l[x][h][0]:r,e=e<l[x][h][0]?l[x][h][0]:e,s=s>l[x][h][1]?l[x][h][1]:s,o=o<l[x][h][1]?l[x][h][1]:o;if(x===0)p.ymin=s,p.ymax=o,p.xmin=r,p.xmax=e;else if(p.ymin=Math.min(p.ymin,s),p.ymax=Math.max(p.ymax,o),Math.abs(e-i/2)<d)p.xmin=r,p.xmax=p.xmax+i;else{if(!(Math.abs(r+i/2)<d))return null;p.xmax=e+i}}return p}function cn(n,t,i=null,r=!0,s=!0){const e=n.spatialReference;if(e.equals(t)||!t)return n;L(e,t,i);const o=O(n,t,i);if(s&&t.isWebMercator&&o&&(o.ymax=Math.min(20037508342787e-6,o.ymax),o.ymin=Math.max(-20037508342787e-6,o.ymin),o.ymin>=o.ymax))return null;if(!r||!o)return o;const u=I(e,!0),c=I(t,!0);if(u==null||c==null)return o;const f=N(e,.001),l=N(e,F),d=N(t,.001);if(Math.abs(o.xmin-c[0])<d&&Math.abs(o.xmax-c[1])<d){const p=Math.abs(n.xmin-u[0]),x=Math.abs(u[1]-n.xmax);if(p<f&&x>l){o.xmin=c[0];const h=[];h.push(new G(n.xmax,n.ymin,e)),h.push(new G(n.xmax,(n.ymin+n.ymax)/2,e)),h.push(new G(n.xmax,n.ymax,e));const m=h.map(a=>rn(a,t,i)).filter(a=>!isNaN(a==null?void 0:a.x)).map(a=>a.x);o.xmax=Math.max.apply(null,m)}if(x<f&&p>l){o.xmax=c[1];const h=[];h.push(new G(n.xmin,n.ymin,e)),h.push(new G(n.xmin,(n.ymin+n.ymax)/2,e)),h.push(new G(n.xmin,n.ymax,e));const m=h.map(a=>rn(a,t,i)).filter(a=>!isNaN(a==null?void 0:a.x)).map(a=>a.x);o.xmin=Math.min.apply(null,m)}}else{const p=N(t,.001);Math.abs(o.xmin-c[0])<p&&(o.xmin=c[0]),Math.abs(o.xmax-c[1])<p&&(o.xmax=c[1])}return o}function v(n,t=!1){if(!n)return null;const i=t?20037508342787e-6:20037508342788905e-9;return n.isWebMercator?2*i:n.wkid&&n.isGeographic?360:2*Tn[n.wkid]||null}function I(n,t=!1){if(n.isGeographic)return[-180,180];const i=v(n,t);return i!=null?[-i/2,i/2]:null}function fn(n,t,i,r){let s=(n-t)/i;return s-Math.floor(s)!=0?s=Math.floor(s):r&&(s-=1),s}function On(n,t=!1){const i=v(n.spatialReference);if(i==null)return 0;const r=t?0:-(i/2),s=N(n.spatialReference),e=!t&&Math.abs(n.xmax-i/2)<s?i/2:n.xmax,o=!t&&Math.abs(n.xmin+i/2)<s?-i/2:n.xmin;return fn(e,r,i,!0)-fn(o,r,i,!1)}function Fn(n){const t=n.storageInfo.origin.x,i=v(n.spatialReference,!0);if(i==null)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const r=i/2,{nativePixelSize:s,storageInfo:e,extent:o}=n,{maximumPyramidLevel:u,blockWidth:c,pyramidScalingFactor:f}=e;let l=s.x;const d=[],p=n.transform!=null&&n.transform.type==="gcs-shift",x=t+(p?0:r),h=p?i-t:r-t;for(let m=0;m<=u;m++){const a=(o.xmax-t)/l/c,w=a-Math.floor(a)==0?a:Math.ceil(a),y=h/l/c,g=y-Math.floor(y)==0?y:Math.ceil(y),M=Math.floor(x/l/c),R=Math.round(x/l)%c,b=(c-Math.round(h/l)%c)%c;d.push({resolutionX:l,blockWidth:c,datsetColumnCount:w,worldColumnCountFromOrigin:g,leftMargin:R,rightPadding:b,originColumnOffset:M}),l*=f}return{originX:t,halfWorldWidth:r,pyramidsInfo:d,hasGCSSShiftTransform:p}}function Ln(n){if(!n||n.isGeographic)return n;const t=String(n.wkid||n.wkt);let i;return H.has(t)?i=H.get(t):(i=(n.wkid?T.coordsys(n.wkid):T.fromString(k.PE_TYPE_PROJCS,n.wkt)).getGeogcs().getCode(),H.set(t,i)),new kn({wkid:i})}function In(n){const t=n.isAdaptive&&n.spacing==null;let i=n.spacing||[A,A],r=Q(n),s={cols:r.size[0]+1,rows:r.size[1]+1};const e=r.outofBoundPointCount>0&&r.outofBoundPointCount<r.offsets.length/2;let o=r.outofBoundPointCount===r.offsets.length/2||t&&e?[0,0]:on(r.offsets,s,i,K);const u=(o[0]+o[1])/2,c=n.projectedExtent.spatialReference,f=n.srcBufferExtent.spatialReference;if(t&&(e||u>K)&&(hn(c,f,n.datumTransformation)&&(c.isGeographic||W(c)),i=[B,B],r=Q({...n,spacing:i}),s={cols:r.size[0]+1,rows:r.size[1]+1},o=on(r.offsets,s,i,K)),r.error=o,i[0]>1&&(r.coefficients=un(r.offsets,s,e)),n.includeGCSGrid&&!c.isGeographic&&!c.isWebMercator)if(f.isGeographic)r.gcsGrid={offsets:r.offsets,coefficients:r.coefficients,spacing:i};else{const l=W(c);if(l!=null&&!l.isEnvelope){const d=Ln(c),p=gn(n.projectedExtent,d),{offsets:x}=Q({...n,srcBufferExtent:p,spacing:i}),h=un(x,s,e);r.gcsGrid={offsets:x,coefficients:h,spacing:i}}}return r}function Q(n){const{projectedExtent:t,srcBufferExtent:i,pixelSize:r,datumTransformation:s,rasterTransform:e}=n,o=t.spatialReference,u=i.spatialReference,c=L(o,u),{xmin:f,ymin:l,xmax:d,ymax:p}=t,x=v(u),h=x!=null&&(n.hasWrapAround||(e==null?void 0:e.type)==="gcs-shift"),m=n.spacing||[A,A],a=m[0]*r.x,w=m[1]*r.y,y=m[0]===1,g=Math.ceil((d-f)/a-.1/m[0])+(y?0:1),M=Math.ceil((p-l)/w-.1/m[1])+(y?0:1),R=vn({cols:g,rows:M,xmin:f,ymax:p,xres:a,yres:w,inSR:o,outSR:u,datumTransformation:s,preferPE:m[0]<=B,usePixelCenter:y}),b=[];let E,S=0;const C=y?-1:NaN,{xmin:z,xmax:q,ymax:yn,width:dn,height:Mn}=i,wn=N(u,F),Rn=x!=null&&z>0&&q>x/2;let Z=!1;if(c){const _=W(o);Z=_!=null&&_.poleLocation>0}for(let _=0;_<g;_++){const J=[];for(let j=0;j<M;j++){let P=R[_*M+j];if(h&&P[0]>q&&P[0]>x/2-wn?P[0]-=x:h&&_===0&&P[0]<0&&Rn&&!e&&(P[0]+=x),!P||isNaN(P[0])||isNaN(P[1]))b.push(C),b.push(C),J.push(null),S++;else{if(e){const nn=e.inverseTransform(new G({x:P[0],y:P[1],spatialReference:u}));P=[nn.x,nn.y]}J.push(P),_>0&&h&&E[j]&&P[0]<E[j][0]&&(P[0]+=x,Z&&P[0]>q&&P[0]>x&&(P[0]-=x)),b.push((P[0]-z)/dn),b.push((yn-P[1])/Mn)}}E=J}return{offsets:b,error:null,coefficients:null,outofBoundPointCount:S,spacing:m,size:y?[g,M]:[g-1,M-1]}}function un(n,t,i){const{cols:r,rows:s}=t,e=new Float32Array((r-1)*(s-1)*2*6),o=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),u=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let c=0;c<r-1;c++){for(let f=0;f<s-1;f++){let l=c*s*2+2*f;const d=n[l],p=n[l+1],x=n[l+2],h=n[l+3];l+=2*s;const m=n[l],a=n[l+1],w=n[l+2],y=n[l+3];let g=0,M=12*(f*(r-1)+c);for(let R=0;R<3;R++)e[M++]=o[g++]*d+o[g++]*x+o[g++]*w;g=0;for(let R=0;R<3;R++)e[M++]=o[g++]*p+o[g++]*h+o[g++]*y;g=0;for(let R=0;R<3;R++)e[M++]=u[g++]*d+u[g++]*m+u[g++]*w;g=0;for(let R=0;R<3;R++)e[M++]=u[g++]*p+u[g++]*a+u[g++]*y}if(i)for(let f=0;f<e.length;f++)isNaN(e[f])&&(e[f]=-1)}return e}function Yn(n){const t=n.clone().normalize();return t.length===1?t[0]:pn(t)}function qn(n,t,i){const{storageInfo:r,pixelSize:s}=t;let e=0,o=!1;const{pyramidResolutions:u}=r;if(u!=null&&u.length){const p=(n.x+n.y)/2,x=u[u.length-1],h=(x.x+x.y)/2,m=(s.x+s.y)/2;if(p<=m)e=0;else if(p>=h)e=u.length,o=p/h>8;else{let w,y=m;for(let g=1;g<=u.length;g++){if(w=(u[g-1].x+u[g-1].y)/2,p<=w){p===w?e=g:i==="down"?(e=g-1,o=p/y>8):e=i==="up"||p-y>w-p||p/y>2?g:g-1;break}y=w}}const a=e===0?s:u[e-1];return o&&Math.min(a.x,a.y)*$(t.spatialReference)>19567&&(o=!1),{pyramidLevel:e,pyramidResolution:new G({x:a.x,y:a.y,spatialReference:t.spatialReference}),excessiveReading:o}}const c=Math.log(n.x/s.x)/Math.LN2,f=Math.log(n.y/s.y)/Math.LN2,l=t.storageInfo.maximumPyramidLevel||0;e=i==="down"?Math.floor(Math.min(c,f)):i==="up"?Math.ceil(Math.max(c,f)):Math.round((c+f)/2),e<0?e=0:e>l&&(o=e>l+3,e=l);const d=2**e;return{pyramidLevel:e,pyramidResolution:new G({x:d*t.nativePixelSize.x,y:d*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:o}}function Jn(n,t,i=512,r=!0){var E;const{extent:s,spatialReference:e,pixelSize:o}=n,u=sn(new G({x:o.x,y:o.y,spatialReference:e}),t,s);if(u==null)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(u.x+u.y)/2,f=$(t),l=c*f*96*39.37,d=t.isGeographic?256/i*2958287637958547e-7:256/i*591657527591555e-6;let p=n.dataType==="vector-magdir"||n.dataType==="vector-uv";const x=gn(s,t),h=Math.min(Math.ceil(Math.log(Math.min(n.width,n.height)/32)/Math.LN2),Math.ceil(Math.log(d/2/l)/Math.LN2));if(!p&&r&&(t.isGeographic||t.isWebMercator)&&(p=x.xmin*x.xmax<0,!p&&h<3)){const S=v(t);if(S!=null){const C=2**h*c*i,z=Math.ceil(S/C);p=z===1||z===2&&S/2-x.xmax<C}}let m,a=l;const w=1.001,y=Math.min(2,Math.max(1.414,((E=n.storageInfo)==null?void 0:E.pyramidScalingFactor)||2));if(p){a=d;const S=t.isGeographic?1341104507446289e-21:.29858214164761665,C=S*(96*f*39.37),z=t.isGeographic?4326:3857;m=sn(new G({x:S,y:S,spatialReference:{wkid:z}}),e,x),m.x*=a/C,m.y*=a/C}else{m={x:o.x,y:o.y};let S=0;for(;a<d*(w/2)&&S<h;)S++,a*=y,m.x*=y,m.y*=y;Math.max(a,d)/Math.min(a,d)<=w&&(a=d)}const g=[a],M=[{x:m.x,y:m.y}],R=70.5310735,b=Math.min(R,l)/w;for(;a>=b;)a/=y,m.x/=y,m.y/=y,g.push(a),M.push({x:m.x,y:m.y});return{projectedPixelSize:u,scales:g,srcResolutions:M,isCustomTilingScheme:!p}}export{In as $,Bn as J,v as K,On as Q,An as T,Fn as V,rn as _,hn as d,qn as i,jn as k,Yn as n,Jn as o,gn as q,sn as v};
