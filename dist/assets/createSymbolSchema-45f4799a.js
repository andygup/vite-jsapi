import{E as c,S}from"./TileInfoView-92be3e39.js";import{f as h,_ as V,A as b}from"./SymbolProcessor-656d5f3b.js";import"./index-0b6846a6.js";import"./cimAnalyzer-76997abb.js";import"./TileClipper-ae6eca9e.js";import"./enums-9bbe4bf0.js";import"./number-954e4ab6.js";import"./BidiEngine-9a40f2f4.js";import"./diffUtils-c77d4e09.js";import"./Pipeline-37fdce75.js";import"./QueryEngine-02c1d5a8.js";import"./normalizeUtils-671b6bae.js";import"./normalizeUtilsCommon-dd4bd041.js";import"./WhereClause-5b6b2f54.js";import"./executionError-c92d3b85.js";import"./json-48e3ea08.js";import"./QueryEngineCapabilities-42e44ded.js";import"./utils-de2da349.js";import"./generateRendererUtils-683e6018.js";import"./FieldsIndex-26e3776b.js";import"./StreamFeatureManager-9c167979.js";import"./quickselect-1945acd7.js";import"./arcadeTimeUtils-6604b222.js";import"./centroid-8e8cfa47.js";import"./ogcFeatureUtils-b227e36a.js";import"./geojson-02d6bdb6.js";import"./clientSideDefaults-8f62f8cc.js";import"./defaultsJSON-59981e75.js";import"./query-defb54e0.js";import"./pbfQueryUtils-4a04b7c5.js";import"./pbf-30015616.js";import"./queryZScale-b668e568.js";import"./Query-a5cf26eb.js";import"./createConnection-1c7e5e2a.js";import"./tileUtils-8040e76b.js";import"./TurboLine-dcc84a17.js";import"./Rect-98da58d6.js";import"./GeometryUtils-0258f920.js";import"./LRUCache-b7b1b5e3.js";function u(e){var r;return e.type==="line-marker"?{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function y(e){return b(e)}function ne(e,r,t=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return x(e,r,t);case"simple-marker":case"picture-marker":return g(e,r,t);case"simple-line":return K(e,r,t);case"text":return z(e,r,t);case"label":return d(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return{...u(e),type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}function d(e,r,t){const o=e.toJSON(),i=h(c.LABEL,{...r,placement:o.labelPlacement});return{materialKey:t?y(i):i,hash:e.hash(),...o,labelPlacement:o.labelPlacement}}function x(e,r,t){const o=h(c.FILL,r),i=t?y(o):o,m=e.clone(),a=m.outline,s=V(r.symbologyType);s||(m.outline=null);const p={materialKey:i,hash:m.hash(),...u(m)};if(s)return p;const l=[];if(l.push(p),a){const n=h(c.LINE,{...r,isOutline:!0}),f={materialKey:t?y(n):n,hash:a.hash(),...u(a)};l.push(f)}return{type:"composite-symbol",layers:l,hash:l.reduce((n,f)=>f.hash+n,"")}}function K(e,r,t){const o=V(r.symbologyType)?S.DEFAULT:r.symbologyType,i=h(c.LINE,{...r,symbologyType:o}),m=t?y(i):i,a=e.clone(),s=a.marker;a.marker=null;const p=[];if(p.push({materialKey:m,hash:a.hash(),...u(a)}),s){const l=h(c.MARKER,r),n=t?y(l):l;s.color=s.color??a.color,p.push({materialKey:n,hash:s.hash(),lineWidth:a.width,...u(s)})}return{type:"composite-symbol",layers:p,hash:p.reduce((l,n)=>n.hash+l,"")}}function g(e,r,t){const o=h(c.MARKER,r),i=t?y(o):o,m=u(e);return{materialKey:i,hash:e.hash(),...m,angle:e.angle,maxVVSize:r.maxVVSize}}function z(e,r,t){const o=h(c.TEXT,r),i=t?y(o):o,m=u(e);return{materialKey:i,hash:e.hash(),...m,angle:e.angle,maxVVSize:r.maxVVSize}}export{ne as createSymbolSchema};
