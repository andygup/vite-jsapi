import{ae as t,af as o,ai as a,bH as b,bJ as d,bK as A,J as $e,b4 as he,f1 as Pe,cJ as M,eK as Ce,ag as Ee,aL as B,f2 as H,cL as pe,s as l,_ as Se,f3 as D,f4 as Ne,f5 as qe,f6 as Ge,bj as Be,f7 as Ue,bx as me,V as fe,f8 as ke,f9 as _e}from"./index-65afe59f.js";import{n as Qe,i as We}from"./Field-f17f32a3.js";import{d as He,I as Je,D as Ze,f as ze}from"./commonProperties-605b6017.js";import{e as Ke}from"./sql-c4c85944.js";import{c as Xe}from"./AttachmentQuery-02a78654.js";import{b as U}from"./Query-380d10a1.js";import Oe from"./RelationshipQuery-8b36d96a.js";import{p as Ye,n as et}from"./serviceCapabilitiesUtils-722c1e48.js";var J;let x=J=class extends b{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new J({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};t([o({type:String,json:{write:!0}})],x.prototype,"expression",void 0),t([o({type:String,json:{write:!0}})],x.prototype,"name",void 0),t([o({type:["boolean","date","number","string"],json:{write:!0}})],x.prototype,"returnType",void 0),t([o({type:String,json:{write:!0}})],x.prototype,"title",void 0),x=J=t([a("esri.form.ExpressionInfo")],x);const tt=x;let j=class extends b{constructor(i){super(i),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};t([o({type:String,json:{write:!0}})],j.prototype,"description",void 0),t([o({type:String,json:{write:!0}})],j.prototype,"label",void 0),t([o()],j.prototype,"type",void 0),t([o({type:String,json:{write:!0}})],j.prototype,"visibilityExpression",void 0),j=t([a("esri.form.elements.Element")],j);const L=j;var Z;let P=Z=class extends b{constructor(e){super(e),this.type=null}clone(){return new Z({type:this.type})}};t([o({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],P.prototype,"type",void 0),P=Z=t([a("esri.form.elements.inputs.AttachmentInput")],P);const it=P;var z;let I=z=class extends L{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new z({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};t([o({type:String,json:{write:!0}})],I.prototype,"attachmentKeyword",void 0),t([o({type:Boolean,json:{write:!0}})],I.prototype,"editable",void 0),t([o({type:it,json:{read:{source:"inputType"},write:{target:"inputType"}}})],I.prototype,"input",void 0),t([o({type:["attachment"],json:{read:!1,write:!0}})],I.prototype,"type",void 0),I=z=t([a("esri.form.elements.AttachmentElement")],I);const ve=I;let C=class extends b{constructor(i){super(i),this.type=null}};t([o()],C.prototype,"type",void 0),C=t([a("esri.form.elements.inputs.Input")],C);const V=C;let R=class extends V{constructor(e){super(e),this.maxLength=null,this.minLength=0}};t([o({type:Number,json:{write:!0}})],R.prototype,"maxLength",void 0),t([o({type:Number,json:{write:!0}})],R.prototype,"minLength",void 0),R=t([a("esri.form.elements.inputs.TextInput")],R);const le=R;var K;let N=K=class extends le{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new K({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["barcode-scanner"],json:{read:!1,write:!0}})],N.prototype,"type",void 0),N=K=t([a("esri.form.elements.inputs.BarcodeScannerInput")],N);const ot=N;var X;let E=X=class extends V{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new X({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};t([o({type:String,json:{write:!0}})],E.prototype,"noValueOptionLabel",void 0),t([o({type:Boolean,json:{write:!0}})],E.prototype,"showNoValueOption",void 0),t([o({type:["combo-box"],json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=X=t([a("esri.form.elements.inputs.ComboBoxInput")],E);const rt=E;var Y;function we(e){return e!=null?new Date(e):null}function be(e){return e?e.getTime():null}let y=Y=class extends V{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,i){return we(i.max)}writeMax(e,i){i.max=be(e)}readMin(e,i){return we(i.min)}writeMin(e,i){i.min=be(e)}clone(){return new Y({includeTime:this.includeTime,max:this.max,min:this.min})}};t([o({type:Boolean,json:{write:!0}})],y.prototype,"includeTime",void 0),t([o({type:Date,json:{type:Number,write:!0}})],y.prototype,"max",void 0),t([d("max")],y.prototype,"readMax",null),t([A("max")],y.prototype,"writeMax",null),t([o({type:Date,json:{type:Number,write:!0}})],y.prototype,"min",void 0),t([d("min")],y.prototype,"readMin",null),t([A("min")],y.prototype,"writeMin",null),t([o({type:["datetime-picker"],json:{read:!1,write:!0}})],y.prototype,"type",void 0),y=Y=t([a("esri.form.elements.inputs.DateTimePickerInput")],y);const nt=y;var ee;let S=ee=class extends V{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new ee({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};t([o({type:String,json:{write:!0}})],S.prototype,"noValueOptionLabel",void 0),t([o({type:Boolean,json:{write:!0}})],S.prototype,"showNoValueOption",void 0),t([o({type:["radio-buttons"],json:{read:!1,write:!0}})],S.prototype,"type",void 0),S=ee=t([a("esri.form.elements.inputs.RadioButtonsInput")],S);const st=S;var te;let O=te=class extends V{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new te({offValue:this.offValue,onValue:this.onValue})}};t([o({type:[String,Number],json:{write:!0}})],O.prototype,"offValue",void 0),t([o({type:[String,Number],json:{write:!0}})],O.prototype,"onValue",void 0),t([o({type:["switch"],json:{read:!1,write:!0}})],O.prototype,"type",void 0),O=te=t([a("esri.form.elements.inputs.SwitchInput")],O);const at=O;var ie;let q=ie=class extends le{constructor(e){super(e),this.type="text-area"}clone(){return new ie({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["text-area"],json:{read:!1,write:!0}})],q.prototype,"type",void 0),q=ie=t([a("esri.form.elements.inputs.TextAreaInput")],q);const pt=q;var oe;let G=oe=class extends le{constructor(e){super(e),this.type="text-box"}clone(){return new oe({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["text-box"],json:{read:!1,write:!0}})],G.prototype,"type",void 0),G=oe=t([a("esri.form.elements.inputs.TextBoxInput")],G);const lt=G,dt={base:V,key:"type",typeMap:{"barcode-scanner":ot,"combo-box":rt,"datetime-picker":nt,"radio-buttons":st,switch:at,"text-area":pt,"text-box":lt}};var re;const Te="esri.form.elements.FieldElement",ge=$e.getLogger(Te);let u=re=class extends L{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return he(ge,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(e){he(ge,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new re({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};t([o({types:Qe,json:{read:{reader:We},write:!0}})],u.prototype,"domain",void 0),t([o({type:Boolean,json:{write:!0}})],u.prototype,"editable",null),t([o({type:String,json:{write:!0}})],u.prototype,"editableExpression",void 0),t([o({type:String,json:{write:!0}})],u.prototype,"fieldName",void 0),t([o({type:String,json:{write:!0}})],u.prototype,"hint",void 0),t([o({types:dt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],u.prototype,"input",void 0),t([o({type:String,json:{write:!0}})],u.prototype,"requiredExpression",void 0),t([o({type:String,json:{read:!1,write:!0}})],u.prototype,"type",void 0),t([o({type:String,json:{write:!0}})],u.prototype,"valueExpression",void 0),u=re=t([a(Te)],u);const xe=u;var ne;let v=ne=class extends L{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ne({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:M(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};t([o({type:Number,json:{write:!0}})],v.prototype,"displayCount",void 0),t([o({type:["list"],json:{write:!0}})],v.prototype,"displayType",void 0),t([o({type:Boolean,json:{write:!0}})],v.prototype,"editable",void 0),t([o({type:[Pe],json:{write:!0}})],v.prototype,"orderByFields",void 0),t([o({type:Number,json:{write:!0}})],v.prototype,"relationshipId",void 0),t([o({type:["relationship"],json:{read:!1,write:!0}})],v.prototype,"type",void 0),v=ne=t([a("esri.form.elements.RelationshipElement")],v);const je=v;function Me(e){return{typesWithGroup:{base:L,key:"type",typeMap:{attachment:ve,field:xe,group:e,relationship:je}},typesWithoutGroup:{base:L,key:"type",typeMap:{attachment:ve,field:xe,relationship:je}}}}function Le(e,i,n=!0){if(!e)return null;const r=n?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function Ve(e,i,n=!0){if(!e)return null;const r=n?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function Re(e,i,n=!0){return e?e.map(r=>Ce(n?i.typesWithGroup:i.typesWithoutGroup,r)):null}var se;let m=se=class extends L{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Re(e,Q,!1)}readElements(e,i){return Le(i.formElements,Q,!1)}writeElements(e,i){i.formElements=Ve(e,Q,!1)}clone(){return new se({description:this.description,elements:M(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};t([o({json:{write:!0}})],m.prototype,"elements",void 0),t([Ee("elements")],m.prototype,"castElements",null),t([d("elements",["formElements"])],m.prototype,"readElements",null),t([A("elements")],m.prototype,"writeElements",null),t([o({type:["collapsed","expanded"],json:{write:!0}})],m.prototype,"initialState",void 0),t([o({type:String,json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=se=t([a("esri.form.elements.GroupElement")],m);const Q=Me(m),ut=m;var ae;const W=Me(ut);let h=ae=class extends b{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Re(e,W)}readElements(e,i){return Le(i.formElements,W)}writeElements(e,i){i.formElements=Ve(e,W)}clone(){return new ae({description:this.description,expressionInfos:M(this.expressionInfos),elements:M(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};t([o({type:String,json:{write:!0}})],h.prototype,"description",void 0),t([o({json:{write:!0}})],h.prototype,"elements",void 0),t([Ee("elements")],h.prototype,"castElements",null),t([d("elements",["formElements"])],h.prototype,"readElements",null),t([A("elements")],h.prototype,"writeElements",null),t([o({type:[tt],json:{write:!0}})],h.prototype,"expressionInfos",void 0),t([o({type:Boolean,json:{default:!1,write:!0}})],h.prototype,"preserveFieldValuesWhenHidden",void 0),t([o({type:String,json:{write:!0}})],h.prototype,"title",void 0),h=ae=t([a("esri.form.FormTemplate")],h);const Mt=h;let w=class extends B(b){constructor(i){super(i),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};t([o()],w.prototype,"creatorField",void 0),t([o()],w.prototype,"creationDateField",void 0),t([o()],w.prototype,"editorField",void 0),t([o()],w.prototype,"editDateField",void 0),t([o()],w.prototype,"realm",void 0),t([o({type:H})],w.prototype,"dateFieldsTimeReference",void 0),w=t([a("esri.layers.support.EditFieldsInfo")],w);const ct=w;let f=class extends B(b){constructor(i){super(i)}};t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"name",void 0),t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"fields",void 0),t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"isAscending",void 0),t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"indexType",void 0),t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"isUnique",void 0),t([o({constructOnly:!0,json:{write:!0}})],f.prototype,"description",void 0),f=t([a("esri.layers.support.FeatureIndex")],f);const yt=new pe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Rt(e,i,n,r){const s=await g(e);if(await de(e,i,r),!s.addAttachment)throw new l(r,"Layer source does not support addAttachment capability");return s.addAttachment(i,n)}function de(e,i,n){const{attributes:r}=i,{objectIdField:s}=e;return e.get("capabilities.data.supportsAttachment")?i?r?s&&r[s]?Promise.resolve():Promise.reject(new l(n,`feature is missing the identifying attribute ${s}`)):Promise.reject(new l(n,"'attributes' are required on a feature to query attachments")):Promise.reject(new l(n,"A feature is required to add/delete/update attachments")):Promise.reject(new l(n,"this layer doesn't support attachments"))}async function At(e,i,n,r,s){const p=await g(e);if(await de(e,i,s),!p.updateAttachment)throw new l(s,"Layer source does not support updateAttachment capability");return p.updateAttachment(i,n,r)}async function Dt(e,i,n){const r=await Se(()=>import("./editingSupport-f1c77ad8.js"),["assets/editingSupport-f1c77ad8.js","assets/index-65afe59f.js","assets/index-001d3307.css","assets/normalizeUtils-678d9dd1.js","assets/normalizeUtilsCommon-2b774e39.js","assets/EditBusLayer-418a86f7.js","assets/infoFor3D-1eaade9a.js"]),s=await e.load();return r.applyEdits(s,s.source,i,n)}async function Pt(e,i,n){const r=await Se(()=>import("./editingSupport-f1c77ad8.js"),["assets/editingSupport-f1c77ad8.js","assets/index-65afe59f.js","assets/index-001d3307.css","assets/normalizeUtils-678d9dd1.js","assets/normalizeUtilsCommon-2b774e39.js","assets/EditBusLayer-418a86f7.js","assets/infoFor3D-1eaade9a.js"]),s=await e.load();return r.uploadAssets(s,s.source,i,n)}async function Ct(e,i,n,r){const s=await g(e);if(await de(e,i,r),!s.deleteAttachments)throw new l(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(i,n)}async function Nt(e,i,n){const r=(await e.load({signal:i==null?void 0:i.signal})).source;if(!r.fetchRecomputedExtents)throw new l(n,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(i)}async function qt(e,i,n,r){var ce,ye;i=Xe.from(i),await e.load();const s=e.source,p=e.capabilities;if(!((ce=p==null?void 0:p.data)!=null&&ce.supportsAttachment))throw new l(r,"this layer doesn't support attachments");const{attachmentTypes:F,objectIds:k,globalIds:$,num:Ae,size:_,start:De,where:ue}=i;if(!((ye=p==null?void 0:p.operations)!=null&&ye.supportsQueryAttachments)&&((F==null?void 0:F.length)>0||($==null?void 0:$.length)>0||(_==null?void 0:_.length)>0||Ae||De||ue))throw new l(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",i);if(!(k!=null&&k.length||$!=null&&$.length||ue))throw new l(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",i);if(!s.queryAttachments)throw new l(r,"Layer source does not support queryAttachments capability",i);return s.queryAttachments(i)}async function Gt(e,i,n,r){const s=await g(e);if(!s.queryObjectIds)throw new l(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(U.from(i)??e.createQuery(),n)}async function Bt(e,i,n,r){const s=await g(e);if(!s.queryFeatureCount)throw new l(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(U.from(i)??e.createQuery(),n)}async function Ut(e,i,n,r){const s=await g(e);if(!s.queryExtent)throw new l(r,"Layer source does not support queryExtent capability");return s.queryExtent(U.from(i)??e.createQuery(),n)}async function kt(e,i,n,r){const s=await g(e);if(!s.queryRelatedFeatures)throw new l(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(Oe.from(i),n)}async function _t(e,i,n,r){const s=await g(e);if(!s.queryRelatedFeaturesCount)throw new l(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(Oe.from(i),n)}async function Qt(e){const i=e.source;if(i!=null&&i.refresh)try{const{dataChanged:n,updates:r}=await i.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),n)return!0}catch{}if(e.definitionExpression)try{return(await Ke(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function Wt(e){const i=new U,n=e.get("capabilities.data"),r=e.get("capabilities.query");i.historicMoment=e.historicMoment,i.gdbVersion=e.gdbVersion,i.returnGeometry=!0,r&&(i.compactGeometryEnabled=r.supportsCompactGeometry,i.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),n&&(n.supportsZ&&e.returnZ!=null&&(i.returnZ=e.returnZ),n.supportsM&&e.returnM!=null&&(i.returnM=e.returnM)),i.outFields=["*"];const{timeOffset:s,timeExtent:p}=e;return i.timeExtent=s!=null&&p!=null?p.offset(-s.value,s.unit):p||null,i.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,i}function ht(e){const{globalIdField:i,fields:n}=e;if(i)return i;if(n){for(const r of n)if(r.type==="esriFieldTypeGlobalID")return r.name}}function mt(e){const{objectIdField:i,fields:n}=e;if(i)return i;if(n){for(const r of n)if(r.type==="esriFieldTypeOID")return r.name}}function ft(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function g(e){return(await e.load()).source}async function vt(e,i){if(!D||D.findCredential(e))return;let n;try{const r=await Ne(e,i);r&&(n=await D.checkSignInStatus(`${r}/sharing`))}catch{}if(n)try{const r=i!=null?i.signal:null;await D.getCredential(e,{signal:r})}catch{}}async function Ht(e,i){var s;const n=(s=e.parsedUrl)==null?void 0:s.path;if(!n)return;const r=e.editFieldsInfo;(e.userHasUpdateItemPrivileges||e.userHasFullEditingPrivileges&&e.capabilities.operations.supportsEditing||r!=null&&r.creatorField||r!=null&&r.editorField)&&await vt(n,i)}function Jt(e){var i;return!((i=e.sourceJSON)!=null&&i.isMultiServicesView)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}let T=class extends B(b){constructor(i){super(i),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};t([o({type:String,json:{read:{source:"shapeAreaFieldName"}}})],T.prototype,"shapeAreaField",void 0),t([o({type:String,json:{read:{source:"shapeLengthFieldName"}}})],T.prototype,"shapeLengthField",void 0),t([o({type:String,json:{read:e=>qe.read(e)||Ge.read(e)}})],T.prototype,"units",void 0),T=t([a("esri.layers.support.GeometryFieldsInfo")],T);const wt=T,Ie=new pe({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Fe=new pe({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends B(b){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};t([o({json:{read:Ie.read,write:Ie.write}})],c.prototype,"cardinality",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"id",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"name",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),t([o({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),t([o({json:{read:Fe.read,write:Fe.write}})],c.prototype,"role",void 0),c=t([a("esri.layers.support.Relationship")],c);const bt=c,zt=e=>{let i=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=me.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(fe.ofType(f)),this.version=void 0}readCapabilitiesFromService(n,r){return et(r,this.url)}get effectiveCapabilities(){var F;const n=this.capabilities;if(!n)return null;const r=M(n),{operations:s,editing:p}=r;return(F=this.sourceJSON)!=null&&F.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=p.supportsDeleteByOthers=p.supportsGeometryUpdate=p.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=p.supportsGeometryUpdate=!0),r)}readEditingInfo(n,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(n,r){return r.type==="Table"}readMinScale(n,r){return r.effectiveMinScale||n||0}readMaxScale(n,r){return r.effectiveMaxScale||n||0}readGlobalIdFieldFromService(n,r){return ht(r)}readObjectIdFieldFromService(n,r){return mt(r)}readServiceDefinitionExpression(n,r){return r.definitionQuery||r.definitionExpression}set url(n){const r=ke({layer:this,url:n,nonStandardUrlAllowed:!0,logger:$e.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(n,r,s,p){_e(this,n,null,r,p)}readVersion(n,r){return ft(r)}};return t([o({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),t([d("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),t([o({readOnly:!0})],i.prototype,"effectiveCapabilities",null),t([o({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),t([o({type:H})],i.prototype,"dateFieldsTimeReference",void 0),t([o({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),t([o({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),t([o({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),t([o({readOnly:!0,type:ct})],i.prototype,"editFieldsInfo",void 0),t([o({readOnly:!0})],i.prototype,"editingInfo",void 0),t([d("editingInfo")],i.prototype,"readEditingInfo",null),t([o((()=>{const n=M(He),r=n.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},n})())],i.prototype,"elevationInfo",void 0),t([o({type:Ye,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],i.prototype,"floorInfo",void 0),t([o({type:Be,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),t([o()],i.prototype,"gdbVersion",void 0),t([o({readOnly:!0,type:wt,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),t([o({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:yt.read}}}})],i.prototype,"geometryType",void 0),t([o({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),t([o({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),t([o({readOnly:!0,type:Ue})],i.prototype,"heightModelInfo",void 0),t([o({type:Date})],i.prototype,"historicMoment",void 0),t([o({readOnly:!0})],i.prototype,"isTable",void 0),t([d("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),t([o({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),t([o(Je)],i.prototype,"minScale",void 0),t([d("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),t([o(Ze)],i.prototype,"maxScale",void 0),t([d("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),t([o({type:String})],i.prototype,"globalIdField",void 0),t([d("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),t([o({type:String})],i.prototype,"objectIdField",void 0),t([d("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),t([o({type:H})],i.prototype,"preferredTimeReference",void 0),t([o({type:[bt],readOnly:!0})],i.prototype,"relationships",void 0),t([o()],i.prototype,"sourceJSON",void 0),t([o({type:Boolean})],i.prototype,"returnM",void 0),t([o({type:Boolean})],i.prototype,"returnZ",void 0),t([o({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),t([d("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),t([o({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),t([o({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),t([o({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),t([o({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),t([o({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),t([o({type:fe.ofType(f),readOnly:!0})],i.prototype,"indexes",void 0),t([o(ze)],i.prototype,"url",null),t([A("url")],i.prototype,"writeUrl",null),t([o({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),t([d("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),i=t([a("esri.layers.mixins.FeatureLayerBase")],i),i};export{mt as A,Jt as C,Qt as F,Wt as I,ht as P,Ht as R,zt as T,Mt as a,Ut as b,Rt as c,Pt as d,Ct as f,Bt as g,qt as h,_t as j,At as l,Nt as m,kt as q,yt as u,Gt as w,Dt as y};
