import"./geometry-4b789d90.js";import{r as h}from"./typedArrayUtil-2bcf3cee.js";import{$ as p}from"./unitUtils-43365914.js";import{a as c}from"./Extent-7f29a1bb.js";function u(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function b(e){let t=0,n=0;for(let r=0;r<e.length;r++){const s=e[r].size;typeof s=="number"&&(t+=s,n++)}return t/n}function m(e,t){return typeof e=="number"?e:e&&e.stops&&e.stops.length?b(e.stops):t}function M(e,t){if(!t)return e;const n=t.filter(i=>i.type==="size").map(i=>{const{maxSize:a,minSize:f}=i;return(m(a,e)+m(f,e))/2});let r=0;const s=n.length;if(s===0)return e;for(let i=0;i<s;i++)r+=n[i];const o=Math.floor(r/s);return Math.max(o,e)}function S(e){var s;const t=e&&e.renderer,n=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!t)return n;const r="visualVariables"in t?M(n,t.visualVariables):n;if(t.type==="simple")return u(r,t.symbol);if(t.type==="unique-value"){let o=r;return(s=t.uniqueValueInfos)==null||s.forEach(i=>{o=u(o,i.symbol)}),o}if(t.type==="class-breaks"){let o=r;return t.classBreakInfos.forEach(i=>{o=u(o,i.symbol)}),o}return t.type==="dot-density"||t.type,r}function g(e,t,n,r=new c){let s;if(n.type==="2d")s=t*n.resolution;else if(n.type==="3d"){const x=n.overlayPixelSizeInMapUnits(e),l=n.basemapSpatialReference;s=h(l)&&!l.equals(n.spatialReference)?p(l)/p(n.spatialReference):t*x}const o=e.x-s,i=e.y-s,a=e.x+s,f=e.y+s,{spatialReference:y}=n;return r.xmin=Math.min(o,a),r.ymin=Math.min(i,f),r.xmax=Math.max(o,a),r.ymax=Math.max(i,f),r.spatialReference=y,r}new c;export{g as a,S as s};
