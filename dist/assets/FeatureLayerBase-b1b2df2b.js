import{ae as t,af as i,ai as l,bD as g,bF as u,bG as B,L as je,b0 as he,eX as Ge,cE as T,eE as $e,ag as Se,aL as N,eY as Q,cG as le,E as p,_ as Te,eZ as V,e_ as qe,e$ as Ne,f0 as Ue,bf as ke,f1 as We,bt as me,J as fe,f2 as Je,f3 as Qe}from"./index-b4b3ae7d.js";import{t as He,f as Ze}from"./Field-a6e349b0.js";import{e as ze,m as Ke,d as Xe,u as Ye}from"./commonProperties-6e3ee32c.js";import{p as et}from"./sql-336bd077.js";import{A as tt}from"./AttachmentQuery-519da496.js";import{Q as U}from"./Query-d1069a20.js";import Oe from"./RelationshipQuery-c46a891a.js";import{L as rt,g as it}from"./serviceCapabilitiesUtils-c4edeec6.js";var H;let I=H=class extends g{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new H({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};t([i({type:String,json:{write:!0}})],I.prototype,"expression",void 0);t([i({type:String,json:{write:!0}})],I.prototype,"name",void 0);t([i({type:["boolean","date","number","string"],json:{write:!0}})],I.prototype,"returnType",void 0);t([i({type:String,json:{write:!0}})],I.prototype,"title",void 0);I=H=t([l("esri.form.ExpressionInfo")],I);const ot=I;let E=class extends g{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};t([i({type:String,json:{write:!0}})],E.prototype,"description",void 0);t([i({type:String,json:{write:!0}})],E.prototype,"label",void 0);t([i()],E.prototype,"type",void 0);t([i({type:String,json:{write:!0}})],E.prototype,"visibilityExpression",void 0);E=t([l("esri.form.elements.Element")],E);const O=E;var Z;let D=Z=class extends g{constructor(e){super(e),this.type=null}clone(){return new Z({type:this.type})}};t([i({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],D.prototype,"type",void 0);D=Z=t([l("esri.form.elements.inputs.AttachmentInput")],D);const nt=D;var z;let F=z=class extends O{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new z({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};t([i({type:String,json:{write:!0}})],F.prototype,"attachmentKeyword",void 0);t([i({type:Boolean,json:{write:!0}})],F.prototype,"editable",void 0);t([i({type:nt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],F.prototype,"input",void 0);t([i({type:["attachment"],json:{read:!1,write:!0}})],F.prototype,"type",void 0);F=z=t([l("esri.form.elements.AttachmentElement")],F);const ve=F;let P=class extends g{constructor(e){super(e),this.type=null}};t([i()],P.prototype,"type",void 0);P=t([l("esri.form.elements.inputs.Input")],P);const C=P;let _=class extends C{constructor(e){super(e),this.maxLength=null,this.minLength=0}};t([i({type:Number,json:{write:!0}})],_.prototype,"maxLength",void 0);t([i({type:Number,json:{write:!0}})],_.prototype,"minLength",void 0);_=t([l("esri.form.elements.inputs.TextInput")],_);const pe=_;var K;let G=K=class extends pe{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new K({maxLength:this.maxLength,minLength:this.minLength})}};t([i({type:["barcode-scanner"],json:{read:!1,write:!0}})],G.prototype,"type",void 0);G=K=t([l("esri.form.elements.inputs.BarcodeScannerInput")],G);const st=G;var X;let R=X=class extends C{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new X({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};t([i({type:String,json:{write:!0}})],R.prototype,"noValueOptionLabel",void 0);t([i({type:Boolean,json:{write:!0}})],R.prototype,"showNoValueOption",void 0);t([i({type:["combo-box"],json:{read:!1,write:!0}})],R.prototype,"type",void 0);R=X=t([l("esri.form.elements.inputs.ComboBoxInput")],R);const at=R;var Y;function we(r){return r!=null?new Date(r):null}function be(r){return r?r.getTime():null}let y=Y=class extends C{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,s){return we(s.max)}writeMax(e,s){s.max=be(e)}readMin(e,s){return we(s.min)}writeMin(e,s){s.min=be(e)}clone(){return new Y({includeTime:this.includeTime,max:this.max,min:this.min})}};t([i({type:Boolean,json:{write:!0}})],y.prototype,"includeTime",void 0);t([i({type:Date,json:{type:Number,write:!0}})],y.prototype,"max",void 0);t([u("max")],y.prototype,"readMax",null);t([B("max")],y.prototype,"writeMax",null);t([i({type:Date,json:{type:Number,write:!0}})],y.prototype,"min",void 0);t([u("min")],y.prototype,"readMin",null);t([B("min")],y.prototype,"writeMin",null);t([i({type:["datetime-picker"],json:{read:!1,write:!0}})],y.prototype,"type",void 0);y=Y=t([l("esri.form.elements.inputs.DateTimePickerInput")],y);const lt=y;var ee;let A=ee=class extends C{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new ee({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};t([i({type:String,json:{write:!0}})],A.prototype,"noValueOptionLabel",void 0);t([i({type:Boolean,json:{write:!0}})],A.prototype,"showNoValueOption",void 0);t([i({type:["radio-buttons"],json:{read:!1,write:!0}})],A.prototype,"type",void 0);A=ee=t([l("esri.form.elements.inputs.RadioButtonsInput")],A);const pt=A;var te;let M=te=class extends C{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new te({offValue:this.offValue,onValue:this.onValue})}};t([i({type:[String,Number],json:{write:!0}})],M.prototype,"offValue",void 0);t([i({type:[String,Number],json:{write:!0}})],M.prototype,"onValue",void 0);t([i({type:["switch"],json:{read:!1,write:!0}})],M.prototype,"type",void 0);M=te=t([l("esri.form.elements.inputs.SwitchInput")],M);const ut=M;var re;let $=re=class extends pe{constructor(e){super(e),this.type="text-area"}clone(){return new re({maxLength:this.maxLength,minLength:this.minLength})}};t([i({type:["text-area"],json:{read:!1,write:!0}})],$.prototype,"type",void 0);$=re=t([l("esri.form.elements.inputs.TextAreaInput")],$);const dt=$;var ie;let q=ie=class extends pe{constructor(e){super(e),this.type="text-box"}clone(){return new ie({maxLength:this.maxLength,minLength:this.minLength})}};t([i({type:["text-box"],json:{read:!1,write:!0}})],q.prototype,"type",void 0);q=ie=t([l("esri.form.elements.inputs.TextBoxInput")],q);const ct=q,yt={base:C,key:"type",typeMap:{"barcode-scanner":st,"combo-box":at,"datetime-picker":lt,"radio-buttons":pt,switch:ut,"text-area":dt,"text-box":ct}};var oe;const Re="esri.form.elements.FieldElement",ge=je.getLogger(Re);let d=oe=class extends O{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return he(ge,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(e){he(ge,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new oe({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};t([i({types:He,json:{read:{reader:Ze},write:!0}})],d.prototype,"domain",void 0);t([i({type:Boolean,json:{write:!0}})],d.prototype,"editable",null);t([i({type:String,json:{write:!0}})],d.prototype,"editableExpression",void 0);t([i({type:String,json:{write:!0}})],d.prototype,"fieldName",void 0);t([i({type:String,json:{write:!0}})],d.prototype,"hint",void 0);t([i({types:yt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],d.prototype,"input",void 0);t([i({type:String,json:{write:!0}})],d.prototype,"requiredExpression",void 0);t([i({type:String,json:{read:!1,write:!0}})],d.prototype,"type",void 0);t([i({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);d=oe=t([l(Re)],d);const xe=d;var ne;let w=ne=class extends O{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ne({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:T(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};t([i({type:Number,json:{write:!0}})],w.prototype,"displayCount",void 0);t([i({type:["list"],json:{write:!0}})],w.prototype,"displayType",void 0);t([i({type:Boolean,json:{write:!0}})],w.prototype,"editable",void 0);t([i({type:[Ge],json:{write:!0}})],w.prototype,"orderByFields",void 0);t([i({type:Number,json:{write:!0}})],w.prototype,"relationshipId",void 0);t([i({type:["relationship"],json:{read:!1,write:!0}})],w.prototype,"type",void 0);w=ne=t([l("esri.form.elements.RelationshipElement")],w);const Ie=w;function Ae(r){return{typesWithGroup:{base:O,key:"type",typeMap:{attachment:ve,field:xe,group:r,relationship:Ie}},typesWithoutGroup:{base:O,key:"type",typeMap:{attachment:ve,field:xe,relationship:Ie}}}}function Me(r,e,s=!0){if(!r)return null;const n=s?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return r.filter(o=>n[o.type]).map(o=>n[o.type].fromJSON(o))}function Le(r,e,s=!0){if(!r)return null;const n=s?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return r.filter(o=>n[o.type]).map(o=>o.toJSON())}function Ce(r,e,s=!0){return r?r.map(n=>$e(s?e.typesWithGroup:e.typesWithoutGroup,n)):null}var se;let f=se=class extends O{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Ce(e,W,!1)}readElements(e,s){return Me(s.formElements,W,!1)}writeElements(e,s){s.formElements=Le(e,W,!1)}clone(){return new se({description:this.description,elements:T(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};t([i({json:{write:!0}})],f.prototype,"elements",void 0);t([Se("elements")],f.prototype,"castElements",null);t([u("elements",["formElements"])],f.prototype,"readElements",null);t([B("elements")],f.prototype,"writeElements",null);t([i({type:["collapsed","expanded"],json:{write:!0}})],f.prototype,"initialState",void 0);t([i({type:String,json:{read:!1,write:!0}})],f.prototype,"type",void 0);f=se=t([l("esri.form.elements.GroupElement")],f);const W=Ae(f),ht=f;var ae;const J=Ae(ht);let h=ae=class extends g{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Ce(e,J)}readElements(e,s){return Me(s.formElements,J)}writeElements(e,s){s.formElements=Le(e,J)}clone(){return new ae({description:this.description,expressionInfos:T(this.expressionInfos),elements:T(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};t([i({type:String,json:{write:!0}})],h.prototype,"description",void 0);t([i({json:{write:!0}})],h.prototype,"elements",void 0);t([Se("elements")],h.prototype,"castElements",null);t([u("elements",["formElements"])],h.prototype,"readElements",null);t([B("elements")],h.prototype,"writeElements",null);t([i({type:[ot],json:{write:!0}})],h.prototype,"expressionInfos",void 0);t([i({type:Boolean,json:{default:!1,write:!0}})],h.prototype,"preserveFieldValuesWhenHidden",void 0);t([i({type:String,json:{write:!0}})],h.prototype,"title",void 0);h=ae=t([l("esri.form.FormTemplate")],h);const Ht=h;let b=class extends N(g){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};t([i()],b.prototype,"creatorField",void 0);t([i()],b.prototype,"creationDateField",void 0);t([i()],b.prototype,"editorField",void 0);t([i()],b.prototype,"editDateField",void 0);t([i()],b.prototype,"realm",void 0);t([i({type:Q})],b.prototype,"dateFieldsTimeReference",void 0);b=t([l("esri.layers.support.EditFieldsInfo")],b);const mt=b;let v=class extends N(g){constructor(e){super(e)}};t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"name",void 0);t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"fields",void 0);t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"isAscending",void 0);t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"indexType",void 0);t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"isUnique",void 0);t([i({constructOnly:!0,json:{write:!0}})],v.prototype,"description",void 0);v=t([l("esri.layers.support.FeatureIndex")],v);const ft=new le({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Kt(r,e,s,n){const o=await x(r);if(await ue(r,e,n),!o.addAttachment)throw new p(n,"Layer source does not support addAttachment capability");return o.addAttachment(e,s)}function ue(r,e,s){const{attributes:n}=e,{objectIdField:o}=r;return r.get("capabilities.data.supportsAttachment")?e?n?!o||!n[o]?Promise.reject(new p(s,`feature is missing the identifying attribute ${o}`)):Promise.resolve():Promise.reject(new p(s,"'attributes' are required on a feature to query attachments")):Promise.reject(new p(s,"A feature is required to add/delete/update attachments")):Promise.reject(new p(s,"this layer doesn't support attachments"))}async function Xt(r,e,s,n,o){const a=await x(r);if(await ue(r,e,o),!a.updateAttachment)throw new p(o,"Layer source does not support updateAttachment capability");return a.updateAttachment(e,s,n)}async function Yt(r,e,s){const n=await Te(()=>import("./editingSupport-d3bc600c.js"),["assets/editingSupport-d3bc600c.js","assets/index-b4b3ae7d.js","assets/index-d832a396.css","assets/normalizeUtils-a85cdb25.js","assets/normalizeUtilsCommon-fdc8c13f.js","assets/EditBusLayer-eda2c950.js","assets/infoFor3D-91dff30a.js"]),o=await r.load();return n.applyEdits(o,o.source,e,s)}async function er(r,e,s){const n=await Te(()=>import("./editingSupport-d3bc600c.js"),["assets/editingSupport-d3bc600c.js","assets/index-b4b3ae7d.js","assets/index-d832a396.css","assets/normalizeUtils-a85cdb25.js","assets/normalizeUtilsCommon-fdc8c13f.js","assets/EditBusLayer-eda2c950.js","assets/infoFor3D-91dff30a.js"]),o=await r.load();return n.uploadAssets(o,o.source,e,s)}async function tr(r,e,s,n){const o=await x(r);if(await ue(r,e,n),!o.deleteAttachments)throw new p(n,"Layer source does not support deleteAttachments capability");return o.deleteAttachments(e,s)}async function rr(r,e,s){const n=(await r.load({signal:e==null?void 0:e.signal})).source;if(!n.fetchRecomputedExtents)throw new p(s,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(e)}async function ir(r,e,s,n){var ce,ye;e=tt.from(e),await r.load();const o=r.source,a=r.capabilities;if(!((ce=a==null?void 0:a.data)!=null&&ce.supportsAttachment))throw new p(n,"this layer doesn't support attachments");const{attachmentTypes:m,objectIds:j,globalIds:S,num:_e,size:k,start:Be,where:de}=e;if(!((ye=a==null?void 0:a.operations)!=null&&ye.supportsQueryAttachments)){const Ve=(m==null?void 0:m.length)>0,De=(S==null?void 0:S.length)>0,Pe=(k==null?void 0:k.length)>0;if(Ve||De||Pe||_e||Be||de)throw new p(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e)}if(!(j!=null&&j.length||S!=null&&S.length||de))throw new p(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!o.queryAttachments)throw new p(n,"Layer source does not support queryAttachments capability",e);return o.queryAttachments(e)}async function or(r,e,s,n){const o=await x(r);if(!o.queryObjectIds)throw new p(n,"Layer source does not support queryObjectIds capability");return o.queryObjectIds(U.from(e)??r.createQuery(),s)}async function nr(r,e,s,n){const o=await x(r);if(!o.queryFeatureCount)throw new p(n,"Layer source does not support queryFeatureCount capability");return o.queryFeatureCount(U.from(e)??r.createQuery(),s)}async function sr(r,e,s,n){const o=await x(r);if(!o.queryExtent)throw new p(n,"Layer source does not support queryExtent capability");return o.queryExtent(U.from(e)??r.createQuery(),s)}async function ar(r,e,s,n){const o=await x(r);if(!o.queryRelatedFeatures)throw new p(n,"Layer source does not support queryRelatedFeatures capability");return o.queryRelatedFeatures(Oe.from(e),s)}async function lr(r,e,s,n){const o=await x(r);if(!o.queryRelatedFeaturesCount)throw new p(n,"Layer source does not support queryRelatedFeaturesCount capability");return o.queryRelatedFeaturesCount(Oe.from(e),s)}async function pr(r){const e=r.source;if(e!=null&&e.refresh)try{const{dataChanged:s,updates:n}=await e.refresh();if(n!=null&&(r.sourceJSON={...r.sourceJSON,...n},r.read(n,{origin:"service",url:r.parsedUrl})),s)return!0}catch{}if(r.definitionExpression)try{return(await et(r.definitionExpression,r.fieldsIndex)).hasDateFunctions}catch{}return!1}function ur(r){const e=new U,s=r.get("capabilities.data"),n=r.get("capabilities.query");e.historicMoment=r.historicMoment,e.gdbVersion=r.gdbVersion,e.returnGeometry=!0,n&&(e.compactGeometryEnabled=n.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),s&&(s.supportsZ&&r.returnZ!=null&&(e.returnZ=r.returnZ),s.supportsM&&r.returnM!=null&&(e.returnM=r.returnM)),e.outFields=["*"];const{timeOffset:o,timeExtent:a}=r;return o!=null&&a!=null?e.timeExtent=a.offset(-o.value,o.unit):e.timeExtent=a||null,e.multipatchOption=r.geometryType==="multipatch"?"xyFootprint":null,e}function vt(r){const{globalIdField:e,fields:s}=r;if(e)return e;if(s){for(const n of s)if(n.type==="esriFieldTypeGlobalID")return n.name}}function wt(r){const{objectIdField:e,fields:s}=r;if(e)return e;if(s){for(const n of s)if(n.type==="esriFieldTypeOID")return n.name}}function bt(r){return r.currentVersion?r.currentVersion:r.hasOwnProperty("capabilities")||r.hasOwnProperty("drawingInfo")||r.hasOwnProperty("hasAttachments")||r.hasOwnProperty("htmlPopupType")||r.hasOwnProperty("relationships")||r.hasOwnProperty("timeInfo")||r.hasOwnProperty("typeIdField")||r.hasOwnProperty("types")?10:9.3}async function x(r){return(await r.load()).source}async function gt(r,e){if(!V||V.findCredential(r))return;let n;try{const o=await qe(r,e);o&&(n=await V.checkSignInStatus(`${o}/sharing`))}catch{}if(n)try{const o=e!=null?e.signal:null;await V.getCredential(r,{signal:o})}catch{}}async function dr(r,e){var o;const s=(o=r.parsedUrl)==null?void 0:o.path;if(!s)return;const n=r.editFieldsInfo;(r.userHasUpdateItemPrivileges||r.userHasFullEditingPrivileges&&r.capabilities.operations.supportsEditing||n!=null&&n.creatorField||n!=null&&n.editorField)&&await gt(s,e)}function cr(r){var e;return(e=r.sourceJSON)!=null&&e.isMultiServicesView?!1:r.userHasUpdateItemPrivileges||r.editingEnabled}let L=class extends N(g){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};t([i({type:String,json:{read:{source:"shapeAreaFieldName"}}})],L.prototype,"shapeAreaField",void 0);t([i({type:String,json:{read:{source:"shapeLengthFieldName"}}})],L.prototype,"shapeLengthField",void 0);t([i({type:String,json:{read:r=>Ne.read(r)||Ue.read(r)}})],L.prototype,"units",void 0);L=t([l("esri.layers.support.GeometryFieldsInfo")],L);const xt=L,Ee=new le({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Fe=new le({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends N(g){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};t([i({json:{read:Ee.read,write:Ee.write}})],c.prototype,"cardinality",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"composite",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"id",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"name",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0);t([i({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0);t([i({json:{read:Fe.read,write:Fe.write}})],c.prototype,"role",void 0);c=t([l("esri.layers.support.Relationship")],c);const It=c,mr=r=>{let e=class extends r{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=me.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(fe.ofType(v)),this.version=void 0}readCapabilitiesFromService(n,o){return it(o,this.url)}get effectiveCapabilities(){var j;const n=this.capabilities;if(!n)return null;const o=T(n),{operations:a,editing:m}=o;return(j=this.sourceJSON)!=null&&j.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(a.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(a.supportsAdd=a.supportsDelete=a.supportsEditing=a.supportsQuery=a.supportsUpdate=m.supportsDeleteByOthers=m.supportsGeometryUpdate=m.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&a.supportsEditing&&(a.supportsAdd=a.supportsDelete=a.supportsUpdate=m.supportsGeometryUpdate=!0),o)}readEditingInfo(n,o){const{editingInfo:a}=o;return a?{lastEditDate:a.lastEditDate!=null?new Date(a.lastEditDate):null}:null}readIsTableFromService(n,o){return o.type==="Table"}readMinScale(n,o){return o.effectiveMinScale||n||0}readMaxScale(n,o){return o.effectiveMaxScale||n||0}readGlobalIdFieldFromService(n,o){return vt(o)}readObjectIdFieldFromService(n,o){return wt(o)}readServiceDefinitionExpression(n,o){return o.definitionQuery||o.definitionExpression}set url(n){const o=Je({layer:this,url:n,nonStandardUrlAllowed:!0,logger:je.getLogger(this.declaredClass)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}writeUrl(n,o,a,m){Qe(this,n,null,o,m)}readVersion(n,o){return bt(o)}};return t([i({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),t([u("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),t([i({readOnly:!0})],e.prototype,"effectiveCapabilities",null),t([i({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),t([i({type:Q})],e.prototype,"dateFieldsTimeReference",void 0),t([i({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),t([i({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),t([i({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),t([i({readOnly:!0,type:mt})],e.prototype,"editFieldsInfo",void 0),t([i({readOnly:!0})],e.prototype,"editingInfo",void 0),t([u("editingInfo")],e.prototype,"readEditingInfo",null),t([i((()=>{const s=T(ze),n=s.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},s})())],e.prototype,"elevationInfo",void 0),t([i({type:rt,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),t([i({type:ke,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),t([i()],e.prototype,"gdbVersion",void 0),t([i({readOnly:!0,type:xt,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),t([i({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ft.read}}}})],e.prototype,"geometryType",void 0),t([i({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),t([i({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),t([i({readOnly:!0,type:We})],e.prototype,"heightModelInfo",void 0),t([i({type:Date})],e.prototype,"historicMoment",void 0),t([i({readOnly:!0})],e.prototype,"isTable",void 0),t([u("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),t([i({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),t([i(Ke)],e.prototype,"minScale",void 0),t([u("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),t([i(Xe)],e.prototype,"maxScale",void 0),t([u("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),t([i({type:String})],e.prototype,"globalIdField",void 0),t([u("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),t([i({type:String})],e.prototype,"objectIdField",void 0),t([u("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),t([i({type:Q})],e.prototype,"preferredTimeReference",void 0),t([i({type:[It],readOnly:!0})],e.prototype,"relationships",void 0),t([i()],e.prototype,"sourceJSON",void 0),t([i({type:Boolean})],e.prototype,"returnM",void 0),t([i({type:Boolean})],e.prototype,"returnZ",void 0),t([i({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),t([u("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),t([i({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),t([i({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),t([i({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),t([i({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),t([i({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),t([i({type:fe.ofType(v),readOnly:!0})],e.prototype,"indexes",void 0),t([i(Ye)],e.prototype,"url",null),t([B("url")],e.prototype,"writeUrl",null),t([i({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),t([u("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=t([l("esri.layers.mixins.FeatureLayerBase")],e),e};export{mr as F,wt as a,Kt as b,cr as c,Yt as d,dr as e,er as f,ur as g,tr as h,rr as i,or as j,nr as k,sr as l,ar as m,lr as n,pr as o,Ht as p,ir as q,vt as r,ft as s,Xt as u};
