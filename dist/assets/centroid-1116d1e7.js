function P(t,n){return t?n?4:3:n?3:2}function y(t,n,r,f,N){if(n==null||!n.lengths.length)return null;const c=(N==null?void 0:N.originPosition)==="upperLeft"?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const e=t.coords,I=[],i=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:E}=n,_=P(r,f);let V=0;for(const l of T){const u=O(i,E,V,l,r,f,c);u&&I.push(u),V+=l*_}if(I.sort((l,u)=>{let s=c*l[2]-c*u[2];return s===0&&r&&(s=l[4]-u[4]),s}),I.length){let l=6*I[0][2];e[0]=I[0][0]/l,e[1]=I[0][1]/l,r&&(l=6*I[0][4],l!==0?e[2]=I[0][3]/l:e[2]=0),(e[0]<i[0]||e[0]>i[1]||e[1]<i[2]||e[1]>i[3]||r&&(e[2]<i[4]||e[2]>i[5]))&&(e.length=0)}if(!e.length){const l=n.lengths[0]?C(E,0,T[0],r,f):null;if(l)e[0]=l[0],e[1]=l[1],r&&l.length>2&&(e[2]=l[2]);else return null}return t}function O(t,n,r,f,N,c,e=1){const I=P(N,c);let i=r,T=r+I,E=0,_=0,V=0,l=0,u=0;for(let A=0,x=f-1;A<x;A++,i+=I,T+=I){const o=n[i],F=n[i+1],g=n[i+2],Y=n[T],p=n[T+1],L=n[T+2];let m=o*p-Y*F;l+=m,E+=(o+Y)*m,_+=(F+p)*m,N&&(m=o*L-Y*g,V+=(g+L)*m,u+=m),o<t[0]&&(t[0]=o),o>t[1]&&(t[1]=o),F<t[2]&&(t[2]=F),F>t[3]&&(t[3]=F),N&&(g<t[4]&&(t[4]=g),g>t[5]&&(t[5]=g))}if(l*e>0&&(l*=-1),u*e>0&&(u*=-1),!l)return null;const s=[E,_,l*.5];return N&&(s[3]=V,s[4]=u*.5),s}function C(t,n,r,f,N){const c=P(f,N);let e=n,I=n+c,i=0,T=0,E=0,_=0;for(let V=0,l=r-1;V<l;V++,e+=c,I+=c){const u=t[e],s=t[e+1],A=t[e+2],x=t[I],o=t[I+1],F=t[I+2],g=f?S(u,s,A,x,o,F):G(u,s,x,o);if(g)if(i+=g,f){const Y=h(u,s,A,x,o,F);T+=g*Y[0],E+=g*Y[1],_+=g*Y[2]}else{const Y=z(u,s,x,o);T+=g*Y[0],E+=g*Y[1]}}return i>0?f?[T/i,E/i,_/i]:[T/i,E/i]:r>0?f?[t[n],t[n+1],t[n+2]]:[t[n],t[n+1]]:null}function G(t,n,r,f){const N=r-t,c=f-n;return Math.sqrt(N*N+c*c)}function S(t,n,r,f,N,c){const e=f-t,I=N-n,i=c-r;return Math.sqrt(e*e+I*I+i*i)}function z(t,n,r,f){const N=t+.5*(r-t),c=n+.5*(f-n);return[N,c]}function h(t,n,r,f,N,c){const e=t+.5*(f-t),I=n+.5*(N-n),i=r+.5*(c-r);return[e,I,i]}export{y as g};
