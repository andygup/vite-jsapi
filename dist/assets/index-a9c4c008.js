(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function c(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}const OP="modulepreload",xP=function(t){return"/"+t},q0={},R=function(e,r,i){if(!r||r.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=xP(s),s in q0)return;q0[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let f=n.length-1;f>=0;f--){const p=n[f];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":OP,o||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),o)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function kP(t){return t&&t.release&&typeof t.release=="function"}function LP(t){return t&&t.acquire&&typeof t.acquire=="function"}class Gr{constructor(e,r,i,n=1,s=0){if(this._ctor=e,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let r;if(Gr.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...e):LP(r)&&r.acquire(...e),r}release(e){!e||Gr.test.disabled||(this._releaseFunction?this._releaseFunction(e):kP(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let r=e;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}}Gr.test={disabled:!1};function RP(t){t.length=0}class pt{constructor(e=50,r=50){this._pool=new Gr(Array,void 0,RP,r,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return mf.acquire()}static release(e){return mf.release(e)}static prune(){mf.prune()}}const mf=new pt(100);function x9(t){const e=[];return function*(){yield*e;for(const r of t)e.push(r),yield r}}function NP(t,e){for(const r of t)if(r!=null&&e(r))return r}function rh(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function os(t,e){return t!=null?e(t):null}function xt(t,e){return Nv(t,e),t}function Nv(t,e){if(t==null)throw new Error(e??"value is None")}function Ce(t){return t==null||t.destroy(),null}function k9(t){return t==null||t.dispose(),null}function xe(t){return t==null||t.remove(),null}function El(t){return t==null||t.abort(),null}function L9(t){return t==null||t.release(),null}function R9(t,e,r){return t!=null&&e!=null?r!=null?r(t,e):t.equals(e):t===e}function DP(t){return null}function N9(t,e){const r=new Array;for(const i of t)r.push(i!=null?e(i):null);return r}function D9(t,e){for(const r of t)os(r,e)}function $9(t){return t}class Vi{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(r=>{e+=r.length}),e}add(e,r){if(rh(e)){const i=this._getOrCreateGroup(r);for(const n of e)this._isHandle(n)&&i.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(e,r){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&r&&i.forEach(r)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&rh(e)){for(const r of e)this.remove(r);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(this._ensureGroupKey(e),r),r}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){e.forEach(r=>r.remove())}}const Dv=Symbol("Accessor-beforeDestroy");function Id(t){return ga(()=>t.forEach(e=>e!=null&&e.remove()))}function ga(t){return{remove:()=>{t&&(t(),t=void 0)}}}class Fr{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Fr._m}getInt(){return this._seed=(Fr._a*this._seed+Fr._c)%Fr._m,this._seed}getFloat(){return this.getInt()/(Fr._m-1)}getIntRange(e,r){return Math.round(this.getFloatRange(e,r))}getFloatRange(e,r){const i=r-e,n=this.getInt()/Fr._m;return e+n*i}}Fr._m=2147483647;Fr._a=48271;Fr._c=0;const F9=1.5;function U9(t,e){return e?t.filter((r,i,n)=>n.findIndex(e.bind(null,r))===i):t.filter((r,i,n)=>n.indexOf(r)===i)}function Od(t,e,r){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(r){for(let i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1}else for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function V9(t,e){let r=t.length!==e.length;r&&(t.length=e.length);for(let i=0;i<e.length;++i)t[i]!==e[i]&&(t[i]=e[i],r=!0);return r}function G9(t,e,r){let i,n;return r?(i=e.filter(s=>!t.some(o=>r(o,s))),n=t.filter(s=>!e.some(o=>r(o,s)))):(i=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:i,removed:n}}function z9(t){return t&&typeof t.length=="number"}const $P=!!Array.prototype.fill;function j9(t,e){if($P)return new Array(t).fill(e);const r=new Array(t);for(let i=0;i<t;i++)r[i]=e;return r}function W9(t,e){e===void 0&&(e=t,t=0);const r=new Array(e-t);for(let i=t;i<e;i++)r[i-t]=i;return r}class $v{constructor(){this.last=0}}const Fv=new $v;function gp(t,e,r,i){i=i||Fv;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(t[o]===e)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(t[o]===e)return i.last=o,o;return-1}function FP(t,e,r,i){const n=r??t.length,s=gp(t,e,n,i);if(s!==-1)return t[s]=t[n-1],r==null&&t.pop(),e}const rr=new Set;function UP(t,e,r=t.length,i=e.length,n,s){if(i===0||r===0)return r;rr.clear();for(let a=0;a<i;++a)rr.add(e[a]);n=n||Fv;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(rr.has(t[a])&&(s&&s.push(t[a]),rr.delete(t[a]),t[a]=t[r-1],--r,--a,rr.size===0||r===0))return rr.clear(),r;for(let a=0;a<o;++a)if(rr.has(t[a])&&(s&&s.push(t[a]),rr.delete(t[a]),t[a]=t[r-1],--r,--a,rr.size===0||r===0))return rr.clear(),r;return rr.clear(),r}function VP(t,e){const r=t.indexOf(e);return r!==-1?(t.splice(r,1),e):null}function vn(t,e){return t!=null}let yi;var Cv,Av,Iv,Ov;(Cv=globalThis.dojoConfig)!=null&&Cv.has||(Av=globalThis.esriConfig)!=null&&Av.has?yi={...(Iv=globalThis.dojoConfig)==null?void 0:Iv.has,...(Ov=globalThis.esriConfig)==null?void 0:Ov.has}:yi={};function C(t){return typeof yi[t]=="function"?yi[t]=yi[t](globalThis):yi[t]}C.add=(t,e,r,i)=>((i||typeof yi[t]>"u")&&(yi[t]=e),r&&C(t));C.cache=yi;C.add("esri-deprecation-warnings",!0);C.add("esri-force-fullscreen-debug",!1);(()=>{var e;C.add("host-webworker",typeof globalThis.WorkerGlobalScope<"u"&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(C.add("host-browser",t),C.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),C.add("dom",t),C("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(C.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),C.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),C.add("khtml",n.includes("Konqueror")?s:void 0),C.add("edge",parseFloat(i.split("Edge/")[1])||void 0),C.add("opr",parseFloat(i.split("OPR/")[1])||void 0),C.add("webkit",!C("wp")&&!C("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),C.add("chrome",!C("edge")&&!C("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),C.add("android",!C("wp")&&parseFloat(i.split("Android ")[1])||void 0),C.add("safari",n.includes("Safari")&&!C("wp")&&!C("chrome")&&!C("android")&&!C("edge")&&!C("opr")?parseFloat(n.split("Version/")[1]):void 0),C.add("mac",n.includes("Macintosh")),!C("wp")&&i.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replace(/_/g,""));C.add(o,u),C.add("ios",u)}C("webkit")||(i.includes("Gecko")&&!C("wp")&&!C("khtml")&&!C("edge")&&C.add("mozilla",s),C("mozilla")&&C.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})();(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),r=/iPhone/i.test(t);e&&C.add("esri-mobile",e),r&&C.add("esri-iPhone",r),C.add("esri-geolocation",!!navigator.geolocation)}C.add("esri-wasm","WebAssembly"in globalThis),C.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),C.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),C.add("esri-atomics","Atomics"in globalThis),C.add("esri-workers","Worker"in globalThis),C.add("web-feat:cache","caches"in globalThis),C.add("esri-workers-arraybuffer-transfer",!C("safari")||Number(C("safari"))>=12),C.add("workers-pool-size",8),C.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),C.add("featurelayer-simplify-payload-size-factors",[1,1,4]),C.add("featurelayer-animation-enabled",!0),C.add("featurelayer-snapshot-enabled",!0),C.add("featurelayer-snapshot-point-min-threshold",8e4),C.add("featurelayer-snapshot-point-max-threshold",4e5),C.add("featurelayer-snapshot-point-coverage",.1),C.add("featurelayer-advanced-symbols",!1),C.add("featurelayer-pbf",!0),C.add("featurelayer-pbf-statistics",!1),C.add("feature-layers-workers",!0),C.add("feature-polyline-generalization-factor",1),C.add("mapview-transitions-duration",200),C.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),C.add("mapserver-pbf-version-support",10.81),C.add("mapservice-popup-identify-max-tolerance",20),C.add("heatmap-allow-raster-fallback",!1),C.add("heatmap-force-raster",!1),!C("host-webworker")&&C("host-browser")&&(C.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),C.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',t.decode().then(()=>{C.add("esri-image-decode",!0,!0,!0)}).catch(()=>{C.add("esri-image-decode",!1,!0,!0)});return}return!1}),C.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function B9(t){return t instanceof ArrayBuffer}function Zy(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function Uv(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Vv(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function Yy(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Gv(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function Jy(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function zv(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function xd(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function kd(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function GP(t){return!("buffer"in t)}function H9(t){return t!=null?GP(t)?t.length*8+12:t.byteLength+145:0}const q9=1024;function Z9(t){return kd(t)||xd(t)||Jy(t)||Yy(t)||Zy(t)}function Y9(t){return kd(t)||xd(t)}function J9(t){return kd(t)?179769e303:xd(t)?3402823e32:zv(t)?4294967295:Gv(t)?65535:Uv(t)||Vv(t)?255:Jy(t)?2147483647:Yy(t)?32767:Zy(t)?127:256}function jv(t,e){let r;if(e)for(r in t)t.hasOwnProperty(r)&&(t[r]===void 0?delete t[r]:t[r]instanceof Object&&jv(t[r],!0));else for(r in t)t.hasOwnProperty(r)&&t[r]===void 0&&delete t[r];return t}function x(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Hv(t);if(e!=null)return e;if(ih(t))return t.clone();if(Wv(t))return t.map(x);if(Bv(t))return t.clone();const r={};for(const i of Object.getOwnPropertyNames(t))r[i]=x(t[i]);return r}function _p(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=Hv(t);if(e!=null)return e;if(Wv(t)){let r=!0;const i=t.map(n=>{const s=_p(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}else{if(ih(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!Bv(t)){const r=Object.getPrototypeOf(t).constructor,i=new r;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=_p(s);if(s!=null&&o==null)return null;i[n]=o}return i}}return null}function ih(t){return typeof t.clone=="function"}function Wv(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Bv(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Z0(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Hv(t){if(Zy(t)||Uv(t)||Vv(t)||Yy(t)||Gv(t)||Jy(t)||zv(t)||xd(t)||kd(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[r,i]of t)e.set(r,x(i));return e}if(t instanceof Set){const e=new Set;for(const r of t)e.add(x(r));return e}return null}function Ky(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function qv(t,e){return t===e?!0:t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Od(t,e):t instanceof Set?e instanceof Set&&jP(t,e):t instanceof Map?e instanceof Map&&WP(t,e):Z0(t)?Z0(e)&&zP(t,e):!1}function zP(t,e){if(t===null||e===null)return!1;const r=Object.keys(t);if(e===null||Object.keys(e).length!==r.length)return!1;for(const i of r)if(t[i]!==e[i]||!Object.prototype.hasOwnProperty.call(e,i))return!1;return!0}function jP(t,e){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}function WP(t,e){if(t.size!==e.size)return!1;for(const[r,i]of t){const n=e.get(r);if(n!==i||n===void 0&&!e.has(r))return!1}return!0}function bi(t){return t.__accessor__??null}function BP(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function Lu(t,e,r){return r?nh(t,e,{policy:r,path:""}):nh(t,e,null)}function nh(t,e,r){return e?Object.keys(e).reduce((i,n)=>{const s=n;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,a=r.policy(o)),a==="replace")return i[s]=e[s],i;if(a==="replace-arrays"&&Array.isArray(i[s]))return i[s]=e[s],i;if(i[s]===void 0)return i[s]=x(e[s]),i;let u=i[s],h=e[s];if(u===h)return i;if(Array.isArray(h)||Array.isArray(i))u?Array.isArray(u)?u=i[s]=u.concat():u=i[s]=[u]:u=i[s]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(f=>{u.includes(f)||u.push(f)}));else if(h&&typeof h=="object")if(r){const f=r.path;r.path=o,i[s]=nh(u,h,r),r.path=f}else i[s]=nh(u,h,null);else(!i.hasOwnProperty(n)||e.hasOwnProperty(n))&&(i[s]=h);return i},t||{}):t}function Zv(t){return Array.isArray(t)?t:t.split(".")}function Y0(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function HP(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(...Y0(r));return e}return Y0(t)}function Yv(t,e,r,i){const n=HP(e);if(n.length!==1){const s=n.map(o=>i(t,o,r));return Id(s)}return i(t,n[0],r)}function Jv(t){let e=!1;return()=>{e||(e=!0,t())}}function Kv(t,e){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.getItemAt(n)}const i=bi(e);return BP(i,r)?i.get(r):e[r]}function Xv(t,e,r){if(t==null)return t;const i=e[r],n=Kv(i,t);if(!(!n&&r<e.length-1))return r===e.length-1?n:Xv(n,e,r+1)}function Pc(t,e,r=0){return typeof e=="string"&&!e.includes(".")?Kv(e,t):Xv(t,Zv(e),r)}function sh(t,e){return Pc(t,e)}function J0(t,e){return Pc(e,t)!==void 0}function Cc(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(!e)e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});else if(!r){e=Object.create(e);for(const i in e)e[i]=x(e[i]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}return t.constructor.__accessorMetadata__}function Ld(t,e){const r=Cc(t);let i=r[e];return i||(i=r[e]={}),i}function qP(t,e){return Lu(t,e,YP)}const ZP=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function YP(t){return ZP.test(t)?"replace":"merge"}function JP(t,e,r=!1){return eb(t,e,r)}function Ac(t,e){if(e!=null)return e[t]||Qv(t.split("."),!1,e)}function _a(t,e,r){const i=t.split("."),n=i.pop(),s=Qv(i,!0,r);s&&n&&(s[n]=e)}function Qv(t,e,r){let i=r;for(const n of t){if(i==null)return;if(!(n in i))if(e)i[n]={};else return;i=i[n]}return i}function eb(t,e,r){return e?Object.keys(e).reduce((i,n)=>{let s=i[n],o=e[n];return s===o?i:s===void 0?(i[n]=x(o),i):(Array.isArray(o)||Array.isArray(i)?(s?Array.isArray(s)?s=i[n]=s.concat():s=i[n]=[s]:s=i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=eb(s,o,r):(!i.hasOwnProperty(n)||e.hasOwnProperty(n))&&(i[n]=o),i)},t||{}):t}const Rd="20230424",tb="79a0ccac04b80db0e0c07b10775709f58e087d1f";var xv;const se={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(xv=globalThis.location)==null?void 0:xv.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&(JP(se,globalThis.esriConfig,!0),delete se.has);if(!se.assetsPath){{const t="4.27.0";se.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${t}-next.${Rd}/assets`}se.defaultAssetsPath=se.assetsPath}const KP=/\{([^\}]+)\}/g;function K0(t){return t??""}function Xy(t,e){return t.replace(KP,typeof e=="object"?(r,i)=>K0(Ac(i,e)):(r,i)=>K0(e(i)))}function K9(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>e&&e.includes(r)?r:`\\${r}`)}function rb(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e}function X9(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}const X0={info:0,warn:1,error:2,none:3};class k{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,k._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=k.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings(){return e._loggedMessages.warn.clear()}}}static get testSingleton(){return{resetLoggers(e={}){const r=k._loggers;return k._loggers=e,r},set throttlingDisabled(e){k._throttlingDisabled=e}}}static getLogger(e){let r=k._loggers[e];return r||(r=new k({module:e})),r}_log(e,r,...i){if(!this._matchLevel(e))return;if(r!=="always"&&!k._throttlingDisabled){const s=this._argsToKey(i),o=this._loggedMessages[e].get(s);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=k._tickCounter)return;this._loggedMessages[e].set(s,k._tickCounter),k._scheduleTickCounterIncrement()}for(const s of se.log.interceptors)if(s(e,this.module,...i))return;this._inheritedWriter()(e,this.module,...i)}_parentWithMember(e,r){let i=this;for(;i!=null;){const n=i[e];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,r,...i){console[e](`[${r}]`,...i)}_matchLevel(e){const r=se.log.level||"warn";return X0[this._parentWithMember("level",r)]<=X0[e]}_argsToKey(...e){return rb(JSON.stringify(e,(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){k._tickCounterScheduled||(k._tickCounterScheduled=!0,Promise.resolve().then(()=>{k._tickCounter++,k._tickCounterScheduled=!1}))}}k._loggers={};k._tickCounter=0;k._tickCounterScheduled=!1;k._throttlingDisabled=!1;var mi;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(mi||(mi={}));class XP{constructor(e,r){this._observers=e,this._observer=r}remove(){VP(this._observers,this._observer)}}class ib{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return QP;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)n=!0;else if(a===e){i=!0;break}}return i||(r.push(e),n&&this._removeDestroyedObservers()),new XP(r,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const r=e.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&e[n+i].destroyed;)++i;if(i>0)if(n+i<r)e[n]=e[n+i];else break}e.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const r of e)r.onCommitted();this._observers=null}}}const QP={remove:()=>{}};var le;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.USER=6]="USER"})(le||(le={}));const Q9=le.USER+1;function nb(t){switch(t){case"defaults":return le.DEFAULTS;case"service":return le.SERVICE;case"portal-item":return le.PORTAL_ITEM;case"web-scene":return le.WEB_SCENE;case"web-map":return le.WEB_MAP;case"user":return le.USER;default:return null}}function wp(t){switch(t){case le.DEFAULTS:return"defaults";case le.SERVICE:return"service";case le.PORTAL_ITEM:return"portal-item";case le.WEB_SCENE:return"web-scene";case le.WEB_MAP:return"web-map";case le.USER:return"user"}return void 0}function e3(t){return wp(t)}var he;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(he||(he={}));const oh={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Qa=[];let ul=oh;function H(t){ul.onObservableAccessed(t)}let Ru=!1,Nu=!1;function Si(t,e,r){if(Ru)return Qy(t,e,r);sb(t);const i=e.call(r);return ob(),i}function t3(t,e){return Si(oh,t,e)}function Qy(t,e,r){const i=Ru;Ru=!0,sb(t);let n=null;try{n=e.call(r)}catch(s){Nu&&k.getLogger("esri.core.accessorSupport.tracking").error(s)}return ob(),Ru=i,n}function sb(t){ul=t,Qa.push(t)}function ob(){const t=Qa.length;if(t>1){const e=Qa.pop();ul=Qa[t-2],e.onTrackingEnd()}else if(t===1){const e=Qa.pop();ul=oh,e.onTrackingEnd()}else ul=oh}function ab(t,e){const r=e.observerObject;if(r.flags&he.DepTrackingInitialized)return;const i=Nu;Nu=!1,r.flags&he.AutoTracked?Qy(e,e.metadata.get,t):lb(t,e),Nu=i}const r3=[];function lb(t,e){const r=e.observerObject;r.flags&he.ExplicitlyTracking||(r.flags|=he.ExplicitlyTracking,Qy(e,()=>{const i=e.metadata.dependsOn||r3;for(const n of i)if(typeof n=="string"&&!n.includes("."))Q0(t,n,!1);else{const s=Zv(n);for(let o=0,a=t;o<s.length&&a!=null&&typeof a=="object";++o)a=Q0(a,s[o],o!==s.length-1)}}),r.flags&=~he.ExplicitlyTracking)}function Q0(t,e,r){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const n=bi(t);if(n){const s=n.properties.get(i);s&&(H(s.observerObject),ab(t,s))}return r?t[i]:void 0}class e_{constructor(e,r,i){this.properties=e,this.propertyName=r,this.metadata=i,this.observerObject=new i3,this._accessed=null,this._handles=null,this.observerObject.flags=he.Dirty|(i.nonNullable?he.NonNullable:0)|(i.hasOwnProperty("value")?he.HasDefaultValue:0)|(i.get===void 0?he.DepTrackingInitialized:0)|(i.dependsOn===void 0?he.AutoTracked:0),t_.register(this,new WeakRef(this.observerObject),this)}destroy(){t_.unregister(this),this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(){const e=this.observerObject;H(e);const r=this.properties.store,i=this.propertyName,n=e.flags,s=r.get(i);if(n&he.Computing||~n&he.Dirty&&r.has(i))return s;e.flags|=he.Computing;const o=this.properties.host;let a;n&he.AutoTracked?a=Si(this,this.metadata.get,o):(lb(o,this),a=this.metadata.get.call(o)),r.set(i,a,le.COMPUTED);const u=r.get(i);return u===s?e.flags&=~he.Dirty:t3(this.commit,this),e.flags&=~he.Computing,u}onObservableAccessed(e){if(e===this.observerObject)return;let r=this._accessed;if(r==null)r=[],this._accessed=r;else if(r.includes(e))return;r.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=he.DepTrackingInitialized;const r=this._accessed;if(r==null||r.length===0)return;let i=this._handles;i==null&&(i=[],this._handles=i);for(let n=0;n<r.length;++n)i.push(r[n].observe(e));r.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~he.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let r=0;r<e.length;++r)e[r].remove();e.length=0}}}class i3 extends ib{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&he.Overriden&&(this.flags|=he.Dirty);const e=this._observers;if(e&&e.length>0)for(const r of e)r.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const i of r)i.onCommitted()}}destroy(){this.flags&he.Dirty&&this.onCommitted(),super.destroy()}}const t_=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});class eg{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new eg;return this._values.forEach((i,n)=>{(!e||!e.has(n))&&r.set(n,x(i))}),r}get(e){return this._values.get(e)}originOf(){return le.USER}keys(){return[...this._values.keys()]}set(e,r){this._values.set(e,r)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}k.getLogger("esri.core.accessorSupport.Properties");function Kc(t,e,r){return t!==void 0}function r_(t,e,r,i){return t===void 0?!1:r==null&&t.observerObject.flags&he.NonNullable?(i.lifecycle,mi.INITIALIZING,!1):!0}function n3(t){return t&&typeof t.destroy=="function"}class s3{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=mi.INITIALIZING,this.store=new eg,this._origin=le.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new e_(this,i,r[i]);this.properties.set(i,n)}this.metadatas=r}initialize(){this.lifecycle=mi.CONSTRUCTING}constructed(){this.lifecycle=mi.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,r]of this.properties){if(r.metadata.autoDestroy){const i=this.internalGet(e);i&&n3(i)&&(i.destroy(),~r.observerObject.flags&he.NonNullable&&this._internalSet(r,null))}r.destroy()}}get initialized(){return this.lifecycle!==mi.INITIALIZING}get(e){const r=this.properties.get(e);if(r.metadata.get)return r.getComputed();H(r.observerObject);const i=this.store;return i.has(e)?i.get(e):r.metadata.value}originOf(e){const r=this.store.originOf(e);if(r===void 0){const i=this.properties.get(e);if(i!==void 0&&i.observerObject.flags&he.HasDefaultValue)return"defaults"}return wp(r)}has(e){return this.properties.has(e)?this.store.has(e):!1}keys(){return[...this.properties.keys()]}internalGet(e){const r=this.properties.get(e);if(Kc(r))return this.store.has(e)?this.store.get(e):r.metadata.value}internalSet(e,r){const i=this.properties.get(e);Kc(i)&&this._internalSet(i,r)}getDependsInfo(e,r,i){const n=this.properties.get(r);if(!Kc(n))return"";const s=new Set,o=Si({onObservableAccessed:h=>s.add(h),onTrackingEnd:()=>{}},()=>{var h;return(h=n.metadata.get)==null?void 0:h.call(e)}),a=e.declaredClass.split(".").pop();let u=`${i}${a}.${r}: ${o}
`;if(s.size===0)return u;i+="  ";for(const h of s){if(!(h instanceof e_))continue;const f=h.properties.host,p=h.propertyName,m=bi(f);m?u+=m.getDependsInfo(f,p,i):u+=`${i}${p}: undefined
`}return u}setAtOrigin(e,r,i){const n=this.properties.get(e);if(Kc(n))return this._setAtOrigin(n,r,i)}isOverridden(e){const r=this.properties.get(e);return r!==void 0&&!!(r.observerObject.flags&he.Overriden)}clearOverride(e){const r=this.properties.get(e),i=r==null?void 0:r.observerObject;i&&i.flags&he.Overriden&&(i.flags&=~he.Overriden,r.notifyChange())}override(e,r){const i=this.properties.get(e);if(!r_(i,e,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(yf.release(s),!o)return;r=a}i.observerObject.flags|=he.Overriden,this._internalSet(i,r)}set(e,r){const i=this.properties.get(e);if(!r_(i,e,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:u}=o;if(yf.release(o),!a)return;r=u}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(e){this._origin=nb(e)}getDefaultOrigin(){return wp(this._origin)}notifyChange(e){const r=this.properties.get(e);r!==void 0&&r.notifyChange()}invalidate(e){const r=this.properties.get(e);r!==void 0&&r.invalidate()}commit(e){const r=this.properties.get(e);r!==void 0&&r.commit()}_internalSet(e,r){const i=this.lifecycle!==mi.INITIALIZING?this._origin:le.DEFAULTS;this._setAtOrigin(e,r,i)}_setAtOrigin(e,r,i){const n=this.store,s=e.propertyName;n.has(s,i)&&Ky(r,n.get(s))&&~e.observerObject.flags&he.Overriden&&i===n.originOf(s)||(e.invalidate(),n.set(s,r,i),e.commit(),ab(this.host,e))}_cast(e,r){const i=yf.acquire();return i.valid=!0,i.value=r,e&&(i.value=e.call(this.host,r,i)),i}}class o3{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const yf=new Gr(o3);function a3(t,e){return t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(r,i)=>{if(i==="")return"$";const n=Ac(i,e),s=n??"";if(typeof s>"u")throw new Error(`could not find key "${i}" in template`);return s.toString()})}class cb{constructor(e,r,i){this.name=e,this.details=i,this.message=(r&&a3(r,i))??""}toString(){return"["+this.name+"]: "+this.message}}let D=class ub extends cb{constructor(e,r,i){super(e,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return x(r)}catch{return"[object]"}}))}}catch(e){throw k.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new ub(e.name,e.message,e.details)}};D.prototype.type="error";function ah(t,e,r){if(!(!t||!e))if(typeof e=="object")for(const i of Object.getOwnPropertyNames(e))ah(t,i,e[i]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(n.length-1,1)[0];ah(sh(t,n),s,r);return}const i=t.__accessor__;i!=null&&l3(e,i),t[e]=r}}function l3(t,e){if(C("esri-unknown-property-errors")&&!c3(t,e))throw new D("set:unknown-property",u3(t,e))}function c3(t,e){return e.metadatas[t]!=null}function u3(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}class hb extends Gr{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=DP(this._set)}acquire(...e){const r=super.acquire(...e);return this._set.delete(r),r}release(e){!e||this._set.has(e)||(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}const Xc=[];function lh(t){Xc.push(t),Xc.length===1&&queueMicrotask(()=>{const e=Xc.slice();Xc.length=0;for(const r of e)r()})}class hl{constructor(e,r=30){this.name=e,this._counter=0,this._samples=new Array(r)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,r)=>e-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,r)=>e+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}var vp;(function(t){const e=(s,o,a,u)=>{let h=o,f=o;const p=a>>>1,m=s[h-1];for(;f<=p;){f=h<<1,f<a&&u(s[f-1],s[f])<0&&++f;const y=s[f-1];if(u(y,m)<=0)break;s[h-1]=y,h=f}s[h-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let f=a>>>1;f>o;f--)e(s,f,a,u);const h=o+1;for(let f=a-1;f>o;f--){const p=s[o];s[o]=s[f],s[f]=p,e(s,h,f,u)}}t.sort=i;function*n(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let f=a>>>1;f>o;f--)e(s,f,a,u),yield;const h=o+1;for(let f=a-1;f>o;f--){const p=s[o];s[o]=s[f],s[f]=p,e(s,h,f,u),yield}}t.iterableSort=n})(vp||(vp={}));const i_=vp,h3=1.5,d3=1.1;class dl{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new $v,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>n_(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];e(n)&&r.push(n)}return r}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}includes(e,r){const i=this.data.indexOf(e,r);return i!==-1&&i<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e;return}if(this._deallocator)for(let r=e;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=e,this._shrink()}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,r=e.length){for(let i=0;i<r;i++)this.data[this._length++]=e[i]}fill(e,r){for(let i=0;i<r;i++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,n_(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const r=gp(this.data,e,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(gp(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,r=e.length,i){this.length=UP(this.data,e,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,r){if(e>=this.length||r>=this.length||e===r)return;const i=this.data[e];this.data[e]=this.data[r],this.data[r]=i}sort(e){i_.sort(this.data,0,this.length,e)}iterableSort(e){return i_.iterableSort(this.data,0,this.length,e)}some(e,r){for(let i=0;i<this.length;++i)if(e.call(r,this.data[i],i,this.data))return!0;return!1}find(e,r){for(let i=0;i<this.length;++i){const n=this.data[i];if(e.call(r,n,i))return n}}filterInPlace(e,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(e,r){const i=this.length,n=this.data;for(let s=0;s<i;++s)e.call(r,n[s],s,n)}forEach(e,r){for(let i=0;i<this.length;++i)e.call(r,this.data[i],i,this.data)}map(e,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=e.call(r,this.data[n],n,this.data);return i}reduce(e,r){let i=r;for(let n=0;n<this.length;++n)i=e(i,this.data[n],n,this.data);return i}has(e){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===e)return!0;return!1}}function n_(t){t.data.length>h3*t.length&&(t.data.length=Math.floor(t.length*d3))}function f3(t){return{setTimeout:(e,r)=>{const i=t.setTimeout(e,r);return{remove:()=>t.clearTimeout(i)}}}}const Ic=f3(globalThis);function Nd(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function Dd(t,e,r){if(!Nd(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,r);if(Array.isArray(e)){const i=e.slice();for(const n of i)t.addEventListener(n,r);return{remove(){for(const n of i)t.removeEventListener(n,r)}}}return t.addEventListener(e,r),{remove(){t.removeEventListener(e,r)}}}function db(t,e,r){if(!Nd(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,r);const i=Dd(t,e,n=>{i.remove(),r.call(t,n)});return{remove(){i.remove()}}}const p3={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function m3({key:t}){return p3[t]||t}function Ae(t="Aborted"){return new D("AbortError",t)}function De(t,e="Aborted"){if(wr(t))throw Ae(e)}function $d(t){return t!=null?"aborted"in t?t:t.signal:t}function wr(t){const e=$d(t);return e!=null&&e.aborted}function fb(t){if(Gi(t))throw t}function s_(t){if(!Gi(t))throw t}function Zt(t,e){const r=$d(t);if(r!=null){if(r.aborted){e();return}return db(r,"abort",()=>e())}}function tg(t,e){const r=$d(t);if(r!=null)return De(r),db(r,"abort",()=>e(Ae()))}function eU(t,e){return $d(e)==null?t:new Promise((i,n)=>{let s=Zt(e,()=>n(Ae()));const o=()=>s=xe(s);t.then(o,o),t.then(i,n)})}function Gi(t){return(t==null?void 0:t.name)==="AbortError"}async function o_(t){try{return await t}catch(e){if(!Gi(e))throw e;return}}function Ti(){let t=null;const e=new Promise((r,i)=>{t={promise:void 0,resolve:r,reject:i}});return t.promise=e,t}async function uo(t){if(!t)return;if(typeof t.forEach!="function"){const r=Object.keys(t),i=r.map(o=>t[o]),n=await uo(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(r=>Array.from(e,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function y3(t){return(await uo(t)).filter(r=>!!r.value).map(r=>r.value)}function pb(t,e=void 0,r){const i=new AbortController;return Zt(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);Zt(i,()=>{o&&(clearTimeout(o),s(Ae()))})})}function zi(t){return t&&typeof t.then=="function"}function bp(t){return zi(t)?t:Promise.resolve(t)}function g3(t,e=-1){let r,i,n,s,o=null;const a=(...u)=>{if(r){i=u,s&&s.reject(Ae()),s=Ti();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||Ti(),s=null,e>0){const m=new AbortController;r=bp(t(...u,m.signal));const y=r;pb(e).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=bp(t(...u));const h=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},f=r,p=n;return f.then(h,h),f.then(p.resolve,p.reject),p.promise};return a}function _3(){let t,e;const r=new Promise((n,s)=>{t=n,e=s}),i=n=>{t(n)};return i.resolve=n=>t(n),i.reject=n=>e(n),i.timeout=(n,s)=>Ic.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function a_(t){await Promise.resolve(),De(t)}function tU(t){return t}let w3=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}};class v3{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let Sp=0;const La={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Tp=["prepare","preRender","render","postRender","update","finish"],Ep=[],vs=new dl;class b3{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const ch={frameTasks:vs,willDispatch:!1,clearFrameTasks:S3,dispatch:gb,executeFrameTasks:T3};function Oc(t){const e=new v3(t);return Ep.push(e),ch.willDispatch||(ch.willDispatch=!0,lh(gb)),e}function Wo(t){const e=new w3(t);return vs.push(e),uh==null&&(Sp=performance.now(),uh=requestAnimationFrame(mb)),new b3(e)}let uh=null;function S3(t=!1){vs.forAll(e=>{e.removed=!0}),t&&yb()}function mb(){const t=performance.now();uh=null,uh=vs.length>0?requestAnimationFrame(mb):null,ch.executeFrameTasks(t)}function T3(t){const e=t-Sp;Sp=t;const r=1e3/60,i=Math.max(0,e-r);La.time=t,La.frameDuration=r-i;for(let n=0;n<Tp.length;n++){const s=performance.now(),o=Tp[n];vs.forAll(a=>{var h;a.paused||a.removed||(n===0&&a.ticks++,!a.phases[o])||(La.elapsedFrameTime=performance.now()-t,La.deltaTime=a.ticks===0?0:e,(h=a.phases[o])==null||h.call(a,La))}),E3[n].record(performance.now()-s)}yb(),M3.record(performance.now()-t)}const Qc=new dl;function yb(){vs.forAll(t=>{t.removed&&Qc.push(t)}),vs.removeUnorderedMany(Qc.data,Qc.length),Qc.clear()}function gb(){for(;Ep.length;){const t=Ep.shift();t.isActive&&t.callback()}ch.willDispatch=!1}function iU(t=1,e){const r=_3(),i=()=>{wr(e)?r.reject(Ae()):t===0?r():(--t,lh(()=>i()))};return i(),r.promise}const E3=Tp.map(t=>new hl(t)),M3=new hl("total");function P3(t,e){for(const r of t.entries())if(e(r[0]))return!0;return!1}let C3=0;function fl(){return++C3}class Fd{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new A3(e),l_.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;l_.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const r=this._accessed;r.includes(e)||r.push(e)}onTrackingEnd(){const e=this._handles,r=this._accessed,i=this._observerObject;for(let n=0;n<r.length;++n)e.push(r[n].observe(i));r.length=0}clear(){const e=this._handles;for(let r=0;r<e.length;++r)e[r].remove();e.length=0}}class A3{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1){this._invalidCount=0,this._notify();return}this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=I3}}const l_=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function I3(){}let No=!1;const hh=[];function _b(t,e){let r=new Fd(s),i=null,n=!1;function s(){if(!r||n)return;if(No){vb(s);return}const a=i;r.clear(),No=!0,n=!0,i=Si(r,t),n=!1,No=!1,e(i,a),bb()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Si(r,t),n=!1,{remove:o}}function wb(t,e){let r=new Fd(n),i=null;function n(){e(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Si(r,t),i):null}return o(),{remove:s}}function O3(t){let e=new Fd(i),r=!1;function i(){if(!(!e||r)){if(No){vb(i);return}e.clear(),No=!0,r=!0,Si(e,t),r=!1,No=!1,bb()}}function n(){e&&(e.destroy(),e=null)}return r=!0,Si(e,t),r=!1,{remove:n}}function vb(t){hh.includes(t)||hh.unshift(t)}function bb(){for(;hh.length;)hh.pop()()}var pl;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(pl||(pl={}));class Ml{constructor(){this.uid=fl(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,r,i,n,s){return this.pool.acquire(pl.Untracked,e,r,i,n,s,Ky)}static acquireTracked(e,r,i,n){return this.pool.acquire(pl.Tracked,e,r,i,null,null,n)}notify(e,r){this.type===pl.Untracked?this.callback.call(this.target,e,r,this.path,this.target):this.callback.call(null,e,r)}acquire(e,r,i,n,s,o,a){this.uid=fl(),this.removed=!1,this.type=e,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=fl(),this.removed=!0}}Ml.pool=new hb(Ml);const Du=new pt,_i=new Set;let dh;function fh(t){_i.delete(t),_i.add(t),dh||(dh=Oc(L3))}function x3(t){if(t.removed)return;const e=t.oldValue,r=t.getValue();t.equals(e,r)||(t.oldValue=r,t.notify(r,e))}function k3(t){for(const e of _i.values())e.target===t&&(e.removed=!0)}function L3(){let t=10;for(;dh&&t--;){dh=null;const e=R3(),r=Du.acquire();for(const i of e){const n=i.uid;x3(i),n===i.uid&&i.removed&&r.push(i)}for(const i of _i)i.removed&&(r.push(i),_i.delete(i));for(const i of r)Ml.pool.release(i);Du.release(r),Du.release(e),Mp.forEach(i=>i())}}function R3(){const t=Du.acquire();t.length=_i.size;let e=0;for(const r of _i)t[e]=r,++e;return _i.clear(),t}const Mp=new Set;function N3(t){return Mp.add(t),{remove(){Mp.delete(t)}}}function D3(t,e,r){let i=Yv(t,e,r,(n,s,o)=>{let a,u,h=wb(()=>Pc(n,s),(f,p)=>{if(n.__accessor__.destroyed||a&&a.uid!==u){i.remove();return}a||(a=Ml.acquireUntracked(f,o,p,n,s),u=a.uid),fh(a)});return{remove:Jv(()=>{h.remove(),a&&(a.uid===u&&!a.removed&&(a.removed=!0,fh(a)),a=null),i=h=null})}});return i}function $3(t,e,r){const i=Yv(t,e,r,(n,s,o)=>{let a=!1;return _b(()=>Pc(n,s),(u,h)=>{if(n.__accessor__.destroyed){i.remove();return}a||(a=!0,Ky(h,u)||o.call(n,u,h,s,n),a=!1)})});return i}function F3(t,e,r,i=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:i?$3(t,e,r):D3(t,e,r)}function U3(t,e,r){let i,n,s=wb(t,(o,a)=>{if(i&&i.uid!==n){s.remove();return}i||(i=Ml.acquireTracked(o,e,a,r),n=i.uid),fh(i)});return{remove:Jv(()=>{s.remove(),i&&(i.uid===n&&!i.removed&&(i.removed=!0,fh(i)),i=null),s=null})}}function V3(t,e,r){let i=!1;return _b(t,(n,s)=>{i||(i=!0,r(s,n)||e(n,s),i=!1)})}function G3(t,e,r=!1,i=qv){return r?V3(t,e,i):U3(t,e,i)}function c_(t){return P3(_i,e=>e.oldValue===t)}function Ud(t,e){for(const[r,i]of t)if(e(i,r))return!0;return!1}function z3(t,e,r){const i=t.get(e);if(i!==void 0)return i;const n=r();return t.set(e,n),n}const Do=k.getLogger("esri.core.accessorSupport.ensureTypes");function j3(t){return t==null?t:new Date(t)}function W3(t){return t==null?t:!!t}function B3(t){return t==null?t:t.toString()}function dr(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function rg(t){return t==null?t:Math.round(parseFloat(t))}function Sb(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function ph(t,e){return e!=null&&t&&!(e instanceof t)}function Tb(t){return t&&"isCollection"in t}function u_(t){return!t||!t.Type?null:typeof t.Type=="function"?t.Type:t.Type.base}function H3(t,e){if(!e||!e.constructor||!Tb(e.constructor))return Pp(t,e)?e:new t(e);const r=u_(t.prototype.itemType),i=u_(e.constructor.prototype.itemType);return r?i?r===i?e:r.prototype.isPrototypeOf(i.prototype)?new t(e):(Pp(t,e),e):new t(e):e}function Pp(t,e){return Sb(e)?(Do.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+Vd(t)+"'"),!0):!1}function ig(t,e){return e==null?e:Tb(t)?H3(t,e):ph(t,e)?Pp(t,e)?e:new t(e):e}function Vd(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const q3=new WeakMap;function Z3(t){switch(t){case Number:return dr;case Ge:return rg;case Boolean:return W3;case String:return B3;case Date:return j3;default:return z3(q3,t,()=>ig.bind(null,t))}}function je(t,e){const r=Z3(t);return arguments.length===1?r:r(e)}function Pl(t,e,r){return arguments.length===1?Pl.bind(null,t):e&&(Array.isArray(e)?e.map(i=>t(i,r)):[t(e,r)])}function Y3(t,e){return arguments.length===1?Pl(je.bind(null,t)):Pl(je.bind(null,t),e)}function Eb(t,e,r){return e!==0&&Array.isArray(r)?r.map(i=>Eb(t,e-1,i)):t(r)}function mh(t,e,r){if(arguments.length===2)return mh.bind(null,t,e);if(!r)return r;r=Eb(t,e,r);let i=e,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function J3(t,e,r){return arguments.length===2?mh(je.bind(null,t),e):mh(je.bind(null,t),e,r)}function Mb(t){return Array.isArray(t)?!t.some(e=>{const r=typeof e;return!(r==="string"||r==="number"||r==="function"&&t.length>1)}):!1}function Cp(t,e){if(arguments.length===2)return Cp(t).call(null,e);const r=new Set,i=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)(typeof a=="string"||typeof a=="number")&&r.add(a);let s=null,o=null;return(a,u)=>{if(a==null)return a;const h=typeof a,f=h==="string"||h==="number";return f&&(r.has(a)||n.some(p=>h==="string"&&p===String||h==="number"&&p===Number))||h==="object"&&n.some(p=>!ph(a,p))?a:(f&&i.length?(s||(s=i.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),Do.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(p=>Vd(p)).join(", ")),Do.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Do.error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function bs(t,e){if(arguments.length===2)return bs(t).call(null,e);const r={},i=[],n=[];for(const u in t.typeMap){const h=t.typeMap[u];r[u]=je(h),i.push(Vd(h)),n.push(u)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?u=>u[t.key]:t.key;return u=>{if(t.base&&!ph(t.base,u)||u==null)return u;const h=a(u)||t.defaultKeyValue,f=r[h];if(!f)return Do.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!ph(t.typeMap[h],u))return u;if(typeof t.key=="string"&&!Sb(u)){const p={};for(const m in u)m!==t.key&&(p[m]=u[m]);return f(p)}return f(u)}}class Ge{}const nU={native(t){return{type:"native",value:t}},array(t){return{type:"array",value:t}},oneOf(t){return{type:"one-of",values:t}}};function K3(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Pb(t){switch(t.type){case"native":return je(t.value);case"array":return Pl(Pb(t.value));case"one-of":return X3(t);default:return null}}function X3(t){let e=null;return(r,i)=>Ip(r,t)?r:(e==null&&(e=Ap(t)),Do.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),i&&(i.valid=!1),null)}function Ap(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ge:return"integer";case Date:return"date";default:return Vd(t.value)}case"array":return`array of ${Ap(t.value)}`;case"one-of":{const e=t.values.map(r=>Ap(r));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function Ip(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ge:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return Array.isArray(t)?!t.some(r=>!Ip(r,e.value)):!1;case"one-of":return e.values.some(r=>Ip(t,r))}}function d(t={}){return(e,r)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(e,r),n=Ld(e,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in t&&k.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=i.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const u=typeof s=="string"?s:s.source,h=typeof s=="string"?null:s.overridable===!0;let f;n.dependsOn=[u],n.get=function(){let p=sh(this,u);if(typeof p=="function"){f||(f=u.split(".").slice(0,-1).join("."));const m=sh(this,f);m&&(p=p.bind(m))}return p},n.readOnly||(n.set=h?function(p){this._override(r,p)}:function(p){ah(this,u,p)})}const o=t.type,a=t.types;n.cast||(o?n.cast=Q3(o):a&&(Array.isArray(a)?n.cast=Pl(bs(a[0])):n.cast=bs(a))),qP(n,t),t.range&&(n.cast=eC(n.cast,t.range))}}function Cb(t,e,r){const i=Ld(t,r);i.json||(i.json={});let n=i.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function Q3(t){let e=0,r=t;if(K3(t))return Pb(t);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],e++;const i=r;if(Mb(i))return e===0?Cp(i):mh(Cp(i),e);if(e===1)return Y3(i);if(e>1)return J3(i,e);const n=t;return n.from?n.from:je(n)}function eC(t,e){return r=>{let i=+t(r);return e.step!=null&&(i=Math.round(i/e.step)*e.step),e.min!=null&&(i=Math.max(e.min,i)),e.max!=null&&(i=Math.min(e.max,i)),i}}function tC(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(e[i]){const n=e[i];r[i].forEach(s=>{e[s]=n}),delete e[i]}}}class Ei extends cb{constructor(e,r,i){super(e,r,i)}}Ei.prototype.type="warning";function Ab(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Op=k.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function h_(t,e,r){var i,n;t&&(!r&&!e.read||(i=e.read)!=null&&i.reader||((n=e.read)==null?void 0:n.enabled)===!1||nC(t)&&_a("read.reader",Ib(t),e))}function Ib(t){var r,i;const e=t.ndimArray??0;if(e>1)return iC(t);if(e===1)return d_(t);if("type"in t&&xb(t.type)){const n=(i=(r=t.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=d_(typeof n=="function"?{type:n}:{types:n});return(o,a,u)=>{const h=s(o,a,u);return h&&new t.type(h)}}return ng(t)}function ng(t){return"type"in t?rC(t.type):sC(t.types)}function rC(t){return t.prototype.read?(e,r,i)=>{if(e==null)return e;const n=typeof e;if(n!=="object"){Op.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);return}const s=new t;return s.read(e,i),s}:t.fromJSON}function Ob(t,e,r,i){return i!==0&&Array.isArray(e)?e.map(n=>Ob(t,n,r,i-1)):t(e,void 0,r)}function iC(t){const e=ng(t),r=Ob.bind(null,e),i=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,u=n;for(;a>0&&Array.isArray(u);)a--,u=u[0];if(u!==void 0)for(let h=0;h<a;h++)n=[n];return n}}function d_(t){const e=ng(t);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const u=e(a,void 0,n);u!==void 0&&o.push(u)}return o}const s=e(r,void 0,n);return s!==void 0?[s]:void 0}}function xb(t){if(!Ab(t))return!1;const e=t.prototype.itemType;return!e||!e.Type?!1:typeof e.Type=="function"?sg(e.Type):kb(e.Type)}function nC(t){return"types"in t?kb(t.types):sg(t.type)}function sg(t){return Array.isArray(t)?!1:!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||xb(t))}function kb(t){for(const e in t.typeMap){const r=t.typeMap[e];if(!sg(r))return!1}return!0}function sC(t){let e=null;const r=t.errorContext??"type";return(i,n,s)=>{if(i==null)return i;const o=typeof i;if(o!=="object"){Op.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);return}e||(e=oC(t));const a=t.key;if(typeof a!="string")return;const u=i[a],h=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const p=`Type '${u||"unknown"}' is not supported`;s&&s.messages&&i&&s.messages.push(new Ei(`${r}:unsupported`,p,{definition:i,context:s})),Op.error(p);return}const f=new h;return f.read(i,s),f}}function oC(t){var r,i;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=Cc(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;(r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const u=(i=a.json)==null?void 0:i.write;if(!u||!u.writer){e[n]=s;continue}const h=u.target,f=typeof h=="string"?h:t.key,p={};u.writer(n,p,f),p[f]&&(e[p[f]]=s)}return e}function aC(t){if(t.json||(t.json={}),p_(t.json),m_(t.json),f_(t.json),t.json.origins)for(const e in t.json.origins)p_(t.json.origins[e]),m_(t.json.origins[e]),f_(t.json.origins[e]);return!0}function f_(t){t.name&&(t.read?typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name}:t.read={source:t.name},t.write?typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name}:t.write={target:t.name})}function p_(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function m_(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function y_(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const r=(t==null?void 0:t.ndimArray)??0;t&&(r===1||"type"in t&&Ab(t.type))?e.write.writer=uC:r>1?e.write.writer=hC(r):e.types?Array.isArray(e.types)?e.write.writer=cC(e.types[0]):e.write.writer=lC(e.types):e.write.writer=Cl}function lC(t){return(e,r,i,n)=>{if(!e||Lb(e,t,n))return Cl(e,r,i,n)}}function Lb(t,e,r){for(const i in e.typeMap)if(t instanceof e.typeMap[i])return!0;if(r!=null&&r.messages){const i=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&t&&r.messages.push(new D(`${i}:unsupported`,s,{definition:t,context:r})),k.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function cC(t){return(e,r,i,n)=>{if(!e||!Array.isArray(e))return Cl(e,r,i,n);const s=e.filter(o=>Lb(o,t,n));return Cl(s,r,i,n)}}function Cl(t,e,r,i){_a(r,yh(t,i),e)}function yh(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?gh(t):t}function gh(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function uC(t,e,r,i){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>yh(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[yh(t,i)],_a(r,n,e)}function Rb(t,e,r){return r!==0&&Array.isArray(t)?t.map(i=>Rb(i,e,r-1)):yh(t,e)}function hC(t){return(e,r,i,n)=>{let s;if(e===null)s=null;else{s=Rb(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let u=0;u<o;u++)s=[s]}_a(i,s,r)}}function xp(t,e){return og(t,"read",e)}function Nb(t,e){return og(t,"write",e)}function og(t,e,r){let i=t&&t.json;if(t&&t.json&&t.json.origins&&r){const n=r.origin&&t.json.origins[r.origin];n&&(e==="any"||e in n)&&(i=n)}return i}function dC(t){const e=fC(t);if(t.json.origins)for(const r in t.json.origins){const i=t.json.origins[r],n=i.types?pC(i):e;h_(n,i,!1),i.types&&!i.write&&t.json.write&&t.json.write.enabled&&(i.write={...t.json.write}),y_(n,i)}h_(e,t.json,!0),y_(e,t.json)}function fC(t){return t.json.types?kp(t.json):t.type?Db(t):kp(t)}function pC(t){return t.type?Db(t):kp(t)}function Db(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!Mb(r);)r=r[0],e++;return{type:r,ndimArray:e}}function kp(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}function mC(t){aC(t)&&(tC(t),dC(t))}const gf=new Set,_f=new Set;function T(t){return e=>{e.prototype.declaredClass=t,gC(e);const r=[],i=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!gf.has(n.initialize)&&(gf.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!_f.has(n.destroy)&&(_f.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);gf.clear(),_f.clear();class s extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=r.length-1;u>=0;u--)r[u].call(this)}}),i.length){let u=!1;const h=this[Dv];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0,h.call(this);for(let f=0;f<i.length;f++)i[f].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=Cc(e.prototype),s.prototype.declaredClass=t,s}}function yC(t,e){return e.get==null?function(){const i=this.__accessor__,n=i.properties.get(t);if(n===void 0)return;H(n.observerObject);const s=i.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const i=this.__accessor__.properties.get(t);if(i!==void 0)return i.getComputed()}}function gC(t){const e=t.prototype,r=Cc(e),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];mC(s),i[n]={enumerable:!0,configurable:!0,get:yC(n,s),set(o){const a=this.__accessor__;if(a===void 0){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o});return}if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===mi.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}}}Object.defineProperties(t.prototype,i)}var $b,Fb;function _C(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const rn=Symbol("Accessor-Handles"),Lp=Symbol("Accessor-Initialized");class z{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}Cc(o.prototype);for(const a in e){const u=e[a];typeof u=="function"?o.prototype[a]=function(...h){const f=this.inherited;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};let p;try{p=u.apply(this,h)}catch(m){throw this.inherited=f,m}return this.inherited=f,p}:o.prototype[a]=e[a]}for(const a in r){const u=_C(r[a]);d(u)(o.prototype,a)}return T(i)(o)}constructor(...e){if(this[$b]=null,this[Fb]=!1,this.constructor===z)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new s3(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const r=this.__accessor__,i=r.ctorArgs||e;r.initialize(),i&&(this.set(i),r.ctorArgs=null),r.constructed(),this.initialize(),this[Lp]=!0}initialize(){}[Dv](){this[rn]=Ce(this[rn])}destroy(){this.destroyed||(k3(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Lp]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return sh(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,r){return ah(this,e,r),this}watch(e,r,i){return F3(this,e,r,i)}own(e){this.addHandles(e)}addHandles(e,r){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}let i=this[rn];i==null&&(i=this[rn]=new Vi),i.add(e,r)}removeHandles(e){const r=this[rn];r!=null&&r.remove(e)}removeAllHandles(){const e=this[rn];e!=null&&e.removeAll()}hasHandles(e){const r=this[rn];return r!=null?r.has(e):!1}_override(e,r){r===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,r){r==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,r){return this.__accessor__.internalSet(e,r),this}}$b=rn,Fb=Lp;class $o{constructor(){this._emitter=new $o.EventEmitter(this)}emit(e,r){return this._emitter.emit(e,r)}on(e,r){return this._emitter.on(e,r)}once(e,r){return this._emitter.once(e,r)}hasEventListener(e){return this._emitter.hasEventListener(e)}}(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this._target||this;return[...o].forEach(u=>{u.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(u=>this.on(u,s));return Id(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],u=a.indexOf(s);u>=0&&a.splice(u,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(o,a){return this._emitter.emit(o,a)}on(o,a){return this._emitter.on(o,a)}once(o,a){return this._emitter.once(o,a)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return n=c([T("esri.core.Evented")],n),n};let r=class extends z{constructor(){super(...arguments),this._emitter=new $o.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,s){return this._emitter.emit(n,s)}on(n,s){return this._emitter.on(n,s)}once(n,s){return this._emitter.once(n,s)}hasEventListener(n){return this._emitter.hasEventListener(n)}};r=c([T("esri.core.Evented")],r),t.EventedAccessor=r})($o||($o={}));const Hn=$o;var oe;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(oe||(oe={}));function Ub(t){return(e,r)=>{e[r]=t}}class ag extends ib{notify(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}}var fi;class wC{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}}const Ft=new Gr(wC,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),vC=()=>{};function wf(t){return t?t instanceof Ss?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function vf(t){if(!(!t||!t.length))return t[0]}function bC(t,e,r,i){const n=Math.min(t.length-r,e.length-i);let s=0;for(;s<n&&t[r+s]===e[i+s];)s++;return s}function Vb(t,e,r,i){e&&e.forEach((n,s,o)=>{t.push(n),Vb(t,r.call(i,n,s,o),r,i)})}const ji=new Set,Wi=new Set,Bi=new Set,bf=new Map;let SC=0,Ss=fi=class extends Hn.EventedAccessor{static isCollection(e){return e!=null&&e instanceof fi}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new ag,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:SC++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof fi?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return H(this._observable),this._items}set items(e){this._emitBeforeChanges(oe.ADD)||(this._splice(0,this.length,wf(e)),this._emitAfterChanges(oe.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,r){if(e==="change"){const i=this._chgListeners,n={removed:!1,callback:r};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=vC,n.removed=!0,i.splice(i.indexOf(n),1)}}}return this._emitter.on(e,r)}once(e,r){const i=this.on(e,r);return{remove(){i.remove()}}}add(e,r){if(H(this._observable),this._emitBeforeChanges(oe.ADD))return this;const i=this.getNextIndex(r??null);return this._splice(i,0,[e]),this._emitAfterChanges(oe.ADD),this}addMany(e,r=this._items.length){if(H(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(oe.ADD))return this;const i=this.getNextIndex(r);return this._splice(i,0,wf(e)),this._emitAfterChanges(oe.ADD),this}at(e){if(H(this._observable),e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(H(this._observable),!this.length||this._emitBeforeChanges(oe.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(oe.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return H(this._observable),this._createNewInstance({items:this._items.map(x)})}concat(...e){H(this._observable);const r=e.map(wf);return this._createNewInstance({items:this._items.concat(...r)})}drain(e,r){if(H(this._observable),!this.length||this._emitBeforeChanges(oe.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let s=0;s<n;s++)e.call(r,i[s],s,i);this._emitAfterChanges(oe.REMOVE)}every(e,r){return H(this._observable),this._items.every(e,r)}filter(e,r){H(this._observable);let i;return arguments.length===2?i=this._items.filter(e,r):i=this._items.filter(e),this._createNewInstance({items:i})}find(e,r){return H(this._observable),this._items.find(e,r)}findIndex(e,r){return H(this._observable),this._items.findIndex(e,r)}flatten(e,r){H(this._observable);const i=[];return Vb(i,this,e,r),new fi(i)}forEach(e,r){return H(this._observable),this._items.forEach(e,r)}getItemAt(e){return H(this._observable),this._items[e]}getNextIndex(e){H(this._observable);const r=this.length;return e=e??r,e<0?e=0:e>r&&(e=r),e}includes(e,r=0){return H(this._observable),this._items.includes(e,r)}indexOf(e,r=0){return H(this._observable),this._items.indexOf(e,r)}join(e=","){return H(this._observable),this._items.join(e)}lastIndexOf(e,r=this.length-1){return H(this._observable),this._items.lastIndexOf(e,r)}map(e,r){H(this._observable);const i=this._items.map(e,r);return new fi({items:i})}reorder(e,r=this.length-1){H(this._observable);const i=this.indexOf(e);if(i!==-1){if(r<0?r=0:r>=this.length&&(r=this.length-1),i!==r){if(this._emitBeforeChanges(oe.MOVE))return e;this._splice(i,1),this._splice(r,0,[e]),this._emitAfterChanges(oe.MOVE)}return e}}pop(){if(H(this._observable),!this.length||this._emitBeforeChanges(oe.REMOVE))return;const e=vf(this._splice(this.length-1,1));return this._emitAfterChanges(oe.REMOVE),e}push(...e){return H(this._observable),this._emitBeforeChanges(oe.ADD)?this.length:(this._splice(this.length,0,e),this._emitAfterChanges(oe.ADD),this.length)}reduce(e,r){H(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,r):i.reduce(e)}reduceRight(e,r){H(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,r):i.reduceRight(e)}remove(e){return H(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(H(this._observable),e<0||e>=this.length||this._emitBeforeChanges(oe.REMOVE))return;const r=vf(this._splice(e,1));return this._emitAfterChanges(oe.REMOVE),r}removeMany(e){if(H(this._observable),!e||!e.length||this._emitBeforeChanges(oe.REMOVE))return[];const r=e instanceof fi?e.toArray():e,i=this._items,n=[],s=r.length;for(let o=0;o<s;o++){const a=r[o],u=i.indexOf(a);if(u>-1){const h=1+bC(r,i,o+1,u+1),f=this._splice(u,h);f&&f.length>0&&n.push.apply(n,f),o+=h-1}}return this._emitAfterChanges(oe.REMOVE),n}reverse(){if(H(this._observable),this._emitBeforeChanges(oe.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(oe.MOVE),this}shift(){if(H(this._observable),!this.length||this._emitBeforeChanges(oe.REMOVE))return;const e=vf(this._splice(0,1));return this._emitAfterChanges(oe.REMOVE),e}slice(e=0,r=this.length){return H(this._observable),this._createNewInstance({items:this._items.slice(e,r)})}some(e,r){return H(this._observable),this._items.some(e,r)}sort(e){if(H(this._observable),!this.length||this._emitBeforeChanges(oe.MOVE))return this;const r=this._splice(0,this.length);return arguments.length?r.sort(e):r.sort(),this._splice(0,0,r),this._emitAfterChanges(oe.MOVE),this}splice(e,r,...i){H(this._observable);const n=(r?oe.REMOVE:0)|(i.length?oe.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,r,i)||[];return this._emitAfterChanges(n),s}toArray(){return H(this._observable),this._items.slice()}toJSON(){return H(this._observable),this.toArray()}toLocaleString(){return H(this._observable),this._items.toLocaleString()}toString(){return H(this._observable),this._items.toString()}unshift(...e){return H(this._observable),!e.length||this._emitBeforeChanges(oe.ADD)?this.length:(this._splice(0,0,e),this._emitAfterChanges(oe.ADD),this.length)}_createNewInstance(e){return new this.constructor(e)}_splice(e,r,i){const n=this._items,s=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Oc(()=>this._dispatchChange())),r){if(a=n.splice(e,r),this.hasEventListener("before-remove")){const u=Ft.acquire();u.target=this,u.cancellable=!0;for(let h=0,f=a.length;h<f;h++)o=a[h],u.reset(o),this.emit("before-remove",u),u.defaultPrevented&&(a.splice(h,1),n.splice(e,0,o),e=e+1,h=h-1,f=f-1);Ft.release(u)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const u=Ft.acquire();u.target=this,u.cancellable=!1;const h=a.length;for(let f=0;f<h;f++)u.reset(a[f]),this.emit("after-remove",u);Ft.release(u)}}if(i&&i.length){if(s){const p=[];for(const m of i){const y=s.ensureType(m);(y!=null||m==null)&&p.push(y)}i=p}const u=this.hasEventListener("before-add"),h=this.hasEventListener("after-add"),f=e===this.length;if(u||h){const p=Ft.acquire();p.target=this,p.cancellable=!0;const m=Ft.acquire();m.target=this,m.cancellable=!1;for(const y of i)u?(p.reset(y),this.emit("before-add",p),p.defaultPrevented||(f?n.push(y):n.splice(e++,0,y),this._set("length",n.length),h&&(m.reset(y),this.emit("after-add",m)))):(f?n.push(y):n.splice(e++,0,y),this._set("length",n.length),m.reset(y),this.emit("after-add",m));Ft.release(m),Ft.release(p)}else{if(f)for(const p of i)n.push(p);else n.splice(e,0,...i);this._set("length",n.length)}}return(i&&i.length||a&&a.length)&&this._notifyChangeEvent(i,a),a}_emitBeforeChanges(e){let r=!1;if(this.hasEventListener("before-changes")){const i=Ft.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),r=i.defaultPrevented,Ft.release(i)}return r}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const r=Ft.acquire();r.target=this,r.cancellable=!1,r.type=e,this.emit("after-changes",r),Ft.release(r)}this._observable.notify()}_notifyChangeEvent(e,r){!this.hasEventListener("change")||!this._notifications||this._notifications[this._notifications.length-1].changes.push({added:e,removed:r})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const r of e){const i=r.changes;ji.clear(),Wi.clear(),Bi.clear();for(const{added:h,removed:f}of i){if(h)if(Bi.size===0&&Wi.size===0)for(const p of h)ji.add(p);else for(const p of h)Wi.has(p)?(Bi.add(p),Wi.delete(p)):Bi.has(p)||ji.add(p);if(f)if(Bi.size===0&&ji.size===0)for(const p of f)Wi.add(p);else for(const p of f)ji.has(p)?ji.delete(p):(Bi.delete(p),Wi.add(p))}const n=pt.acquire();ji.forEach(h=>{n.push(h)});const s=pt.acquire();Wi.forEach(h=>{s.push(h)});const o=this._items,a=r.items,u=pt.acquire();if(Bi.forEach(h=>{a.indexOf(h)!==o.indexOf(h)&&u.push(h)}),r.listeners&&(n.length||s.length||u.length)){const h={target:this,added:n,removed:s,moved:u},p=r.listeners.length;for(let m=0;m<p;m++){const y=r.listeners[m];y.removed||y.callback.call(this,h)}}pt.release(n),pt.release(s),pt.release(u)}ji.clear(),Wi.clear(),Bi.clear()}};Ss.ofType=t=>{if(!t)return fi;if(bf.has(t))return bf.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const i in t.typeMap){const n=t.typeMap[i].prototype.declaredClass;e?e+=` | ${n}`:e=n}let r=class extends fi{};return c([Ub({Type:t,ensureType:typeof t=="function"?je(t):bs(t)})],r.prototype,"itemType",void 0),r=c([T(`esri.core.Collection<${e}>`)],r),bf.set(t,r),r};c([d()],Ss.prototype,"length",void 0);c([d()],Ss.prototype,"items",null);Ss=fi=c([T("esri.core.Collection")],Ss);const ee=Ss;function Ts(t,e,r=ee){return e||(e=new r),e===t||(e.removeAll(),TC(t)?e.addMany(t):t&&e.add(t)),e}function Gb(t){return t}function TC(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const g_=new Set;function EC(t,e,r=!1){(!r||!g_.has(e))&&(r&&g_.add(e),t.warn(` DEPRECATED - ${e}`))}function __(t,e,r={}){if(C("esri-deprecation-warnings")){const{moduleName:i}=r,n=(i?i+"::":"")+e;_h(t,`Property: ${n}`,r)}}function _h(t,e,r={}){if(C("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=e;i&&(a+=`
	 Replacement: ${i}`),n&&(a+=`
	 Version: ${n}`),s&&(a+=`
	 See ${s} for more details.`),EC(t,a,o)}}class lg{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new lg;return this._values.forEach((i,n)=>{(!e||!e.has(n))&&r.set(n,x(i.value),i.origin)}),r}get(e,r){r=this._normalizeOrigin(r);const i=this._values.get(e);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(e){var r;return((r=this._values.get(e))==null?void 0:r.origin)??le.USER}keys(e){e=this._normalizeOrigin(e);const r=[...this._values.keys()];return e==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===e})}set(e,r,i){if(i=this._normalizeOrigin(i),i===le.DEFAULTS){const n=this._values.get(e);if(n&&n.origin!=null&&n.origin>i)return}this._values.set(e,new MC(r,i))}delete(e,r){var i;r=this._normalizeOrigin(r),(r==null||((i=this._values.get(e))==null?void 0:i.origin)===r)&&this._values.delete(e)}has(e,r){var i;return r=this._normalizeOrigin(r),r!=null?((i=this._values.get(e))==null?void 0:i.origin)===r:this._values.has(e)}forEach(e){this._values.forEach(({value:r},i)=>e(r,i))}_normalizeOrigin(e){if(e!=null)return e===le.DEFAULTS?e:le.USER}}class MC{constructor(e,r){this.value=e,this.origin=r}}function PC(t,e,r){e.keys().forEach(n=>{r.set(n,e.get(n),le.DEFAULTS)});const i=t.metadatas;Object.keys(i).forEach(n=>{t.internalGet(n)&&r.set(n,t.internalGet(n),le.DEFAULTS)})}function CC(t,e,r){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const i=t.read.source;if(typeof i=="string"){if(i===e||i.includes(".")&&i.indexOf(e)===0&&J0(i,r))return!0}else for(const n of i)if(n===e||n.includes(".")&&n.indexOf(e)===0&&J0(n,r))return!0;return!1}function AC(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function IC(t,e,r,i,n){let s=xp(e[r],n);AC(s)&&(t[r]=!0);for(const o of Object.getOwnPropertyNames(e))s=xp(e[o],n),CC(s,r,i)&&(t[o]=!0)}function OC(t,e,r,i){const n=r.metadatas,s=og(n[e],"any",i),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,i):o;a!==void 0&&r.set(e,a)}const zb={origin:"service"};function xC(t,e,r=zb){if(!e||typeof e!="object")return;const i=bi(t),n=i.metadatas,s={};for(const o of Object.getOwnPropertyNames(e))IC(s,n,o,e,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const u=xp(n[o],r).read,h=u&&u.source;let f;h&&typeof h=="string"?f=Pc(e,h):f=e[o],u&&u.reader&&(f=u.reader.call(t,f,e,r)),f!==void 0&&i.set(o,f)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||OC(t,o,i,r)}i.setDefaultOrigin("user")}function cU(t,e,r,i=zb){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type==="warning"&&!t.loaded?t.loadWarnings.push(o):i&&i.messages&&i.messages.push(o)})}function kC(t,e,r,i,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,i,s,r,n),s}function jb(t,e,r,i,n,s){if(!i||!i.write)return!1;const o=t.get(r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(t,o,r,s);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new D("web-document-write:property-required",`Missing value for required property '${r}' on '${t.declaredClass}'`,{propertyName:r,target:t});return a&&s&&s.messages?s.messages.push(a):a&&!s&&k.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!e.store.multipleOriginsSupported||e.store.originOf(r)===le.DEFAULTS)&&LC(t,r,s,i,o)||!n.ignoreOrigin&&s&&s.origin&&e.store.multipleOriginsSupported&&e.store.originOf(r)<nb(s.origin))}function LC(t,e,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,r);return Od(o,n)}return!1}return s===n}function uU(t,e,r,i){const n=bi(t),s=n.metadatas,o=Nb(s[e],i);return o?jb(t,n,e,o,r,i):!1}function RC(t,e,r){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return Lu(e,t.toJSON(r));const i=bi(t),n=i.metadatas;for(const a in n){const u=Nb(n[a],r);if(!jb(t,i,a,u,void 0,r))continue;const h=t.get(a),f=u.write&&typeof u.write.target=="string"?u.write.target:a,p=kC(t,u,f,h,r);Object.keys(p).length>0&&(e=Lu(e,p),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>Lu(e,p,()=>"replace-arrays"))),r&&r.writtenProperties&&r.writtenProperties.push({target:t,propName:a,oldOrigin:e3(i.store.originOf(a)),newOrigin:r.origin}))}return e}const xc=t=>{let e=class extends t{constructor(...i){super(...i);const n=bi(this),s=n.store,o=new lg;n.store=o,PC(n,s,o)}read(i,n){xC(this,i,n)}write(i,n){return RC(this,i??{},n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return NC.call(this,i,n)}};return e=c([T("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function NC(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=this,i=new r;return i.read(t,e),i}let G=class extends xc(z){};G=c([T("esri.core.JSONSupport")],G);var on;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(on||(on={}));class DC{constructor(e){this.instance=e,this._resolver=Ti(),this._status=on.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=on.RESOLVED,this._cleanUp()},()=>{this._status=on.REJECTED,this._cleanUp()})}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===on.RESOLVED}isRejected(){return this._status===on.REJECTED}isFulfilled(){return this._status!==on.PENDING}abort(){this._resolver.reject(Ae())}when(e,r){return this._resolver.promise.then(e,r)}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Ti(),r=[...this._resolvingPromises,e.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==i||Gi(n)||this._resolver.reject(n)}),e.resolve()}}const cg=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new DC(this),this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return new Promise((s,o)=>{this._promiseProps.when(s,o)}).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){!i||this._promiseProps.isFulfilled()||this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=c([T("esri.core.Promise")],e),e};let wh=class extends cg(z){};wh=c([T("esri.core.Promise")],wh);const $C="not-loaded",FC="loading",UC="failed",w_="loaded",Wb=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((u,h)=>{const f=tg(o,h);this.destroyed&&h(new D("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(u,h).finally(()=>{f&&f.remove()})});if(this.loadStatus===$C){this._set("loadStatus",FC);const u=this._loadController=new AbortController;s({signal:u.signal}),Zt(u.signal,()=>{this._promiseProps.abort()})}return n(),a}})),this.when(()=>{this._set("loadStatus",w_),this._loadController=null},n=>{this._set("loadStatus",UC),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController=El(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===w_}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()?this:(this._set("loadError",new D("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this)}};return c([d({readOnly:!0})],e.prototype,"loaded",null),c([d({readOnly:!0})],e.prototype,"loadError",void 0),c([d({clonable:!1})],e.prototype,"loadStatus",void 0),c([d({type:[Ei],readOnly:!0})],e.prototype,"loadWarnings",null),e=c([T("esri.core.Loadable")],e),e};let Al=class extends Wb(wh){};Al=c([T("esri.core.Loadable")],Al);(function(t){t.LoadableMixin=Wb;function e(r){return!!(r&&r.load)}t.isLoadable=e})(Al||(Al={}));const bn=Al;function gU(t,e,r){return uo(t.map((i,n)=>e.apply(r,[i,n])))}async function VC(t,e,r){return(await uo(t.map((n,s)=>e.apply(r,[n,s])))).map(n=>n.value)}function ug(t){return{ok:!0,value:t}}function hg(t){return{ok:!1,error:t}}function GC(t){return t!=null&&t.ok===!0?t.value:null}function zC(t){return t!=null&&t.ok===!1?t.error:null}async function Bb(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return ug(await t)}catch(e){return hg(e)}}async function _U(t){try{return ug(await t)}catch(e){return fb(e),hg(e)}}function dg(t,e){return new Sn(t,e)}let Sn=class extends z{get value(){return GC(this._result)}get error(){return zC(this._result)}get finished(){return this._result!=null}constructor(e,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=El(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(n=>{this._result=ug(n),this._cleanup()},n=>{this._result=hg(n),this._cleanup()}),this._abortHandle=Zt(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=xe(this._abortHandle),this._abortController=null}};c([d()],Sn.prototype,"value",null);c([d()],Sn.prototype,"error",null);c([d()],Sn.prototype,"finished",null);c([d()],Sn.prototype,"promise",void 0);c([d()],Sn.prototype,"_result",void 0);Sn=c([T("esri.core.asyncUtils.ReactiveTask")],Sn);async function Hb(t,e){return await t.load(),jC(t,e)}async function jC(t,e){const r=[],i=(...s)=>{for(const o of s)if(o!=null){if(Array.isArray(o)){i(...o);continue}if(ee.isCollection(o)){o.forEach(a=>i(a));continue}bn.isLoadable(o)&&r.push(o)}};e(i);let n=null;if(await VC(r,async s=>{const o=await Bb(WC(s)?s.loadAll():s.load());o.ok===!1&&!n&&(n=o)}),n)throw n.error;return t}function WC(t){return"loadAll"in t&&typeof t.loadAll=="function"}const BC=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,HC={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function v_(t){const e=t==null?void 0:t.match(BC);if(!e)return null;const[,r,i,n]=e;if(!r)return null;let s=null,o=null,a=null;const{devext:u,qaext:h,www:f}=HC;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qa":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}else({customBaseUrl:o,portalHostname:a}=f);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qaext":({customBaseUrl:o,portalHostname:a}=h);break;case"www":({customBaseUrl:o,portalHostname:a}=f);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function qC(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}const ZC=k.getLogger("esri.core.urlUtils"),wa=se.request,b_="esri/config: esriConfig.request.proxyUrl is not set.",qb=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Zb=/^\s*http:/i,YC=/^\s*https:/i,JC=/^\s*file:/i,KC=/:\d+$/,XC=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,QC=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),eA=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Fo{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(QC);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(eA),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const eu={},tA=new Fo(se.applicationUrl);let at=tA;const rA=iA();let fg=rA;const pg=()=>at,vU=()=>fg;function iA(){const t=at.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${at.scheme}://${at.host}${at.port!=null?`:${at.port}`:""}`}${e}`}function Dt(t){if(!t)return null;const e={path:null,query:null},r=new Fo(t),i=t.indexOf("?");return r.query===null?e.path=t:(e.path=t.substring(0,i),e.query=Yb(r.query)),r.fragment&&(e.hash=r.fragment,r.query===null&&(e.path=e.path.substring(0,e.path.length-(r.fragment.length+1)))),e}function Yb(t){const e=t.split("&"),r={};for(const i of e){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function S_(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function Il(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(e(r,t[r]))).join("&"):Object.keys(t).map(r=>{const i=t[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=e&&e[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>S_(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):S_(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function nA(t=!1){let e,r=wa.proxyUrl;if(typeof t=="string"){e=hA(t);const n=Gd(t);n&&(r=n.proxyUrl)}else e=!!t;if(!r)throw ZC.warn(b_),new D("urlutils:proxy-not-set",b_);return e&&Rp()&&(r=vg(r)),Dt(r)}function bU(t){const e=Gd(t);let r,i;if(e){const n=mg(e.proxyUrl);r=n.path,i=n.query?Yb(n.query):null}if(r){const n=Dt(t);t=r+"?"+n.path;const s=Il({...i,...n.query});s&&(t=`${t}?${s}`)}return t}const Ra={path:"",query:""};function mg(t){const e=t.indexOf("?");return e!==-1?(Ra.path=t.slice(0,e),Ra.query=t.slice(e+1)):(Ra.path=t,Ra.query=null),Ra}function Jb(t){return t=mg(t).path,t=yA(t),t=bh(t,!0),t=t.toLowerCase(),t}function sA(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Jb(t.urlPrefix)},r=wa.proxyRules,i=e.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,e),n}function Gd(t){const e=wa.proxyRules,r=Jb(t);for(let i=0;i<e.length;i++)if(r.indexOf(e[i].urlPrefix)===0)return e[i]}function SU(t,e){if(!t||!e)return!1;t=vh(t),e=vh(e);const r=v_(t),i=v_(e);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r!=null||i!=null?!1:Bo(t,e,!0)}function oA(t,e){return t=vh(t),e=vh(e),bh(t)===bh(e)}function vh(t){t=gn(t);const e=t.indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function Kb(t){const e=i=>i==null||i instanceof RegExp&&i.test(t)||typeof i=="string"&&t.startsWith(i),r=wa.interceptors;if(r){for(const i of r)if(Array.isArray(i.urls)){if(i.urls.some(e))return i}else if(e(i.urls))return i}return null}function Bo(t,e,r=!1){if(!t||!e)return!1;const i=Dp(t),n=Dp(e);return!r&&i.scheme!==n.scheme||i.host==null||n.host==null?!1:i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function yg(t){if(typeof t=="string")if(kt(t))t=Dp(t);else return!0;if(Bo(t,at))return!0;const e=wa.trustedServers||[];for(let r=0;r<e.length;r++){const i=e[r],n=aA(i);for(let s=0;s<n.length;s++)if(Bo(t,n[s]))return!0}return!1}function aA(t){return eu[t]||(!wg(t)&&!zr(t)?eu[t]=[new Fo(`http://${t}`),new Fo(`https://${t}`)]:eu[t]=[new Fo(Bt(t))]),eu[t]}function Bt(t,e=fg,r){return zr(t)?r&&r.preserveProtocolRelative?t:at.scheme==="http"&&at.authority===yr(t).slice(2)?`http:${t}`:`https:${t}`:wg(t)?t:zd(t[0]==="/"?mA(e):e,t)}function gg(t,e=fg,r){if(t==null||!kt(t))return t;const i=gn(t),n=i.toLowerCase(),s=gn(e).toLowerCase().replace(/\/+$/,""),o=r?gn(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(p,m,y)=>(y=p.indexOf(m,y),y===-1?p.length:y);let u=a(n,"/",n.indexOf("//")+2),h=-1;for(;n.slice(0,u+1)===s.slice(0,u)+"/"&&(h=u+1,u!==n.length);)u=a(n,"/",u+1);if(h===-1||o&&h<o.length)return t;t=i.slice(h);const f=s.slice(h-1).replace(/[^/]+/g,"").length;if(f>0)for(let p=0;p<f;p++)t=`../${t}`;else t=`./${t}`;return t}function gn(t){return t=t.trim(),t=Bt(t),t=gA(t),t=_A(t),t=wA(t),t}function zd(...t){const e=t.filter(vn);if(!e||!e.length)return;const r=[];if(kt(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),fA(e[0])&&(r[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&r.push("");const i=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function yr(t,e=!1){if(t==null||_g(t)||ho(t))return null;let r=t.indexOf("://");if(r===-1&&zr(t))r=2;else if(r!==-1)r+=3;else return null;const i=t.indexOf("/",r);return i!==-1&&(t=t.slice(0,i)),e&&(t=bh(t,!0)),t}function kt(t){return zr(t)||wg(t)}function _g(t){return t!=null&&t.slice(0,5)==="blob:"}function ho(t){return t!=null&&t.slice(0,5)==="data:"}function lA(t){const e=Ol(t);if(!e||!e.isBase64)return null;const r=atob(e.data),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}function TU(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const cA=/^data:(.*?)(;base64)?,(.*)$/;function Ol(t){const e=t.match(cA);if(!e)return null;const[,r,i,n]=e;return{mediaType:r,isBase64:!!i,data:n}}function Xb(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function EU(t){const e=lA(t);if(!e)return null;const r=Ol(t);return new Blob([e],{type:r.mediaType})}function MU(t,e){uA(t,e)}function uA(t,e){if(!t)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const i=URL.createObjectURL(t);return r.download=e,r.href=i,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),!0}function zr(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function wg(t){return t!=null&&qb.test(t)}function hA(t){return t!=null&&YC.test(t)||at.scheme==="https"&&zr(t)}function dA(t){return t!=null&&Zb.test(t)||at.scheme==="http"&&zr(t)}function fA(t){return t!=null&&JC.test(t)}function vg(t){return zr(t)?`https:${t}`:t.replace(Zb,"https:")}function pA(){return at.scheme==="http"}function Rp(){return at.scheme==="https"}function bh(t,e=!1){return zr(t)?t.slice(2):(t=t.replace(qb,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function mA(t){const e=t.indexOf("//"),r=t.indexOf("/",e+2);return r===-1?t:t.slice(0,r)}function PU(t){let e=0;if(kt(t)){const i=t.indexOf("//");i!==-1&&(e=i+2)}const r=t.lastIndexOf("/");return r<e?t:t.slice(0,r+1)}function CU(t,e){if(!t)return"";const r=Dt(t).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!(e!=null&&e.length))return i;const n=new RegExp(`.(${e.join("|")})$`,"ig");return i.replace(n,"")}function yA(t){return!t||t[t.length-1]!=="/"?`${t}/`:t}function Qb(t){return t.replace(/\/+$/,"")}function gA(t){if(/^https?:\/\//i.test(t)){const e=mg(t);t=e.path.replace(/\/{2,}/g,"/"),t=t.replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function _A(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function wA(t){const e=wa.httpsDomains;if(!dA(t))return t;const r=t.indexOf("/",7);let i;if(r===-1?i=t:i=t.slice(0,r),i=i.toLowerCase().slice(7),KC.test(i))if(i.endsWith(":80"))i=i.slice(0,-3),t=t.replace(":80","");else return t;return pA()&&i===at.authority&&!XC.test(t)||(Rp()&&i===at.authority||e&&e.some(n=>i===n||i.endsWith(`.${n}`))||Rp()&&!Gd(t))&&(t=vg(t)),t}function Np(t,e,r){if(!e||!r||!t||!kt(t))return t;const i=t.indexOf("//"),n=t.indexOf("/",i+2),s=t.indexOf(":",i+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);if(t.slice(i+2,o).toLowerCase()!==e.toLowerCase())return t;const u=t.slice(0,i+2),h=t.slice(o);return`${u}${r}${h}`}function Dp(t){return typeof t=="string"?new Fo(Bt(t)):(t.scheme||(t.scheme=at.scheme),t)}function AU(t){return vA.test(t)}function eS(t,e){const r=Dt(t),i=Object.keys(r.query||{});return i.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function tS(t,e,r){const i=Dt(t),n=i.query||{};return n[e]=String(r),`${i.path}?${Il(n)}`}function Sf(t,e){const r=Dt(t),i=r.query||{};for(const s in e)i[s]=e[s];const n=Il(i);return n?`${r.path}?${n}`:r.path}function IU(t){if(t==null)return null;const e=t.match(rS);return e?e[2]:null}function T_(t){if(t==null)return null;const e=t.match(rS);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function OU(t){return typeof t=="string"?Ol(t)??{data:t}:new Promise((e,r)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(Ol(i.result)),i.onerror=n=>r(n)})}const rS=/([^.]*)\.([^\/]*)$/,vA=/(^data:image\/svg|\.svg$)/i;function de(t,e,r){let i,n;return e===void 0?(n=t,i=[void 0]):typeof e!="string"?(n=t,i=[void 0],r=e):(n=e,Array.isArray(t)?i=t:i=[t]),(s,o)=>{const a=s.constructor.prototype;for(const u of i){const h=Cb(s,u,n);(!h.write||typeof h.write!="object")&&(h.write={}),r&&(h.write.target=r),h.write.writer=a[o]}}}class rt{constructor(e,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&_a(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const r=this._apiToJSON[e];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const r={};for(const i in e)r[e[i]]=i;return r}_getKeysSorted(e){const r=[];for(const i in e)r.push(i);return r.sort(),r}}function Mt(){return function(e,r){return new rt(e,{ignoreUnknown:!0,...r})}}class bg{constructor(e,r,i,n){this.semiMajorAxis=e,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Ee=new bg(6378137,1/298.257223563,3e5,.006694379990137799),wi=new bg(3396190,1/169.8944472236118,23e4),Tn=new bg(1737400,0,0);var Es;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Es||(Es={}));let l;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(l=2e3;l<=2045;l++)g[l]=0;for(l=2056;l<=2065;l++)g[l]=0;for(l=2067;l<=2135;l++)g[l]=0;for(l=2137;l<=2154;l++)g[l]=0;for(l=2161;l<=2170;l++)g[l]=0;for(l=2172;l<=2193;l++)g[l]=0;for(l=2195;l<=2198;l++)g[l]=0;for(l=2200;l<=2203;l++)g[l]=0;for(l=2205;l<=2217;l++)g[l]=0;for(l=2222;l<=2224;l++)g[l]=1;for(l=2225;l<=2250;l++)g[l]=2;for(l=2251;l<=2253;l++)g[l]=1;for(l=2257;l<=2264;l++)g[l]=2;for(l=2274;l<=2279;l++)g[l]=2;for(l=2280;l<=2282;l++)g[l]=1;for(l=2283;l<=2289;l++)g[l]=2;for(l=2290;l<=2292;l++)g[l]=0;for(l=2308;l<=2313;l++)g[l]=0;for(l=2315;l<=2491;l++)g[l]=0;for(l=2494;l<=2866;l++)g[l]=0;for(l=2867;l<=2869;l++)g[l]=1;for(l=2870;l<=2888;l++)g[l]=2;for(l=2891;l<=2895;l++)g[l]=2;for(l=2896;l<=2898;l++)g[l]=1;for(l=2902;l<=2908;l++)g[l]=2;for(l=2915;l<=2920;l++)g[l]=2;for(l=2921;l<=2923;l++)g[l]=1;for(l=2924;l<=2930;l++)g[l]=2;for(l=2931;l<=2962;l++)g[l]=0;for(l=2964;l<=2968;l++)g[l]=2;for(l=2969;l<=2973;l++)g[l]=0;for(l=2975;l<=2991;l++)g[l]=0;for(l=2995;l<=3051;l++)g[l]=0;for(l=3054;l<=3079;l++)g[l]=0;for(l=3081;l<=3088;l++)g[l]=0;for(l=3092;l<=3101;l++)g[l]=0;for(l=3106;l<=3138;l++)g[l]=0;for(l=3146;l<=3151;l++)g[l]=0;for(l=3153;l<=3166;l++)g[l]=0;for(l=3168;l<=3172;l++)g[l]=0;for(l=3174;l<=3203;l++)g[l]=0;for(l=3294;l<=3358;l++)g[l]=0;for(l=3367;l<=3403;l++)g[l]=0;for(l=3408;l<=3416;l++)g[l]=0;for(l=3417;l<=3438;l++)g[l]=2;for(l=3441;l<=3446;l++)g[l]=2;for(l=3447;l<=3450;l++)g[l]=0;for(l=3451;l<=3459;l++)g[l]=2;for(l=3460;l<=3478;l++)g[l]=0;for(l=3554;l<=3559;l++)g[l]=0;for(l=3560;l<=3570;l++)g[l]=2;for(l=3571;l<=3581;l++)g[l]=0;for(l=3594;l<=3597;l++)g[l]=0;for(l=3601;l<=3604;l++)g[l]=0;for(l=3637;l<=3639;l++)g[l]=0;for(l=3665;l<=3667;l++)g[l]=0;for(l=3693;l<=3695;l++)g[l]=0;for(l=3701;l<=3727;l++)g[l]=0;for(l=3728;l<=3739;l++)g[l]=2;for(l=3740;l<=3751;l++)g[l]=0;for(l=3753;l<=3760;l++)g[l]=2;for(l=3761;l<=3773;l++)g[l]=0;for(l=3775;l<=3777;l++)g[l]=0;for(l=3779;l<=3781;l++)g[l]=0;for(l=3783;l<=3785;l++)g[l]=0;for(l=3788;l<=3791;l++)g[l]=0;for(l=3797;l<=3802;l++)g[l]=0;for(l=3814;l<=3816;l++)g[l]=0;for(l=3825;l<=3829;l++)g[l]=0;for(l=3832;l<=3841;l++)g[l]=0;for(l=3844;l<=3852;l++)g[l]=0;for(l=3873;l<=3885;l++)g[l]=0;for(l=3890;l<=3893;l++)g[l]=0;for(l=3907;l<=3912;l++)g[l]=0;for(l=3942;l<=3950;l++)g[l]=0;for(l=3968;l<=3970;l++)g[l]=0;for(l=3973;l<=3976;l++)g[l]=0;for(l=3986;l<=3989;l++)g[l]=0;for(l=3994;l<=3997;l++)g[l]=0;for(l=4048;l<=4051;l++)g[l]=0;for(l=4056;l<=4063;l++)g[l]=0;for(l=4093;l<=4096;l++)g[l]=0;for(l=4390;l<=4398;l++)g[l]=0;for(l=4399;l<=4413;l++)g[l]=2;for(l=4418;l<=4433;l++)g[l]=2;for(l=4455;l<=4457;l++)g[l]=2;for(l=4484;l<=4489;l++)g[l]=0;for(l=4491;l<=4554;l++)g[l]=0;for(l=4568;l<=4589;l++)g[l]=0;for(l=4652;l<=4656;l++)g[l]=0;for(l=4766;l<=4800;l++)g[l]=0;for(l=5014;l<=5016;l++)g[l]=0;for(l=5069;l<=5072;l++)g[l]=0;for(l=5105;l<=5130;l++)g[l]=0;for(l=5173;l<=5188;l++)g[l]=0;for(l=5253;l<=5259;l++)g[l]=0;for(l=5269;l<=5275;l++)g[l]=0;for(l=5292;l<=5311;l++)g[l]=0;for(l=5329;l<=5331;l++)g[l]=0;for(l=5343;l<=5349;l++)g[l]=0;for(l=5355;l<=5357;l++)g[l]=0;for(l=5387;l<=5389;l++)g[l]=0;for(l=5459;l<=5463;l++)g[l]=0;for(l=5479;l<=5482;l++)g[l]=0;for(l=5518;l<=5520;l++)g[l]=0;for(l=5530;l<=5539;l++)g[l]=0;for(l=5550;l<=5552;l++)g[l]=0;for(l=5562;l<=5583;l++)g[l]=0;for(l=5623;l<=5625;l++)g[l]=2;for(l=5631;l<=5639;l++)g[l]=0;for(l=5649;l<=5653;l++)g[l]=0;for(l=5663;l<=5680;l++)g[l]=0;for(l=5682;l<=5685;l++)g[l]=0;for(l=5875;l<=5877;l++)g[l]=0;for(l=5896;l<=5899;l++)g[l]=0;for(l=5921;l<=5940;l++)g[l]=0;for(l=6050;l<=6125;l++)g[l]=0;for(l=6244;l<=6275;l++)g[l]=0;for(l=6328;l<=6348;l++)g[l]=0;for(l=6350;l<=6356;l++)g[l]=0;for(l=6366;l<=6372;l++)g[l]=0;for(l=6381;l<=6387;l++)g[l]=0;for(l=6393;l<=6404;l++)g[l]=0;for(l=6480;l<=6483;l++)g[l]=0;for(l=6511;l<=6514;l++)g[l]=0;for(l=6579;l<=6581;l++)g[l]=0;for(l=6619;l<=6624;l++)g[l]=0;for(l=6625;l<=6627;l++)g[l]=2;for(l=6628;l<=6632;l++)g[l]=0;for(l=6634;l<=6637;l++)g[l]=0;for(l=6669;l<=6692;l++)g[l]=0;for(l=6707;l<=6709;l++)g[l]=0;for(l=6720;l<=6723;l++)g[l]=0;for(l=6732;l<=6738;l++)g[l]=0;for(l=6931;l<=6933;l++)g[l]=0;for(l=6956;l<=6959;l++)g[l]=0;for(l=7005;l<=7007;l++)g[l]=0;for(l=7057;l<=7070;l++)g[l]=2;for(l=7074;l<=7082;l++)g[l]=0;for(l=7109;l<=7118;l++)g[l]=0;for(l=7119;l<=7127;l++)g[l]=1;for(l=7374;l<=7376;l++)g[l]=0;for(l=7528;l<=7586;l++)g[l]=0;for(l=7587;l<=7645;l++)g[l]=2;for(l=7692;l<=7696;l++)g[l]=0;for(l=7755;l<=7787;l++)g[l]=0;for(l=7791;l<=7795;l++)g[l]=0;for(l=7799;l<=7801;l++)g[l]=0;for(l=7803;l<=7805;l++)g[l]=0;for(l=7825;l<=7831;l++)g[l]=0;for(l=7845;l<=7859;l++)g[l]=0;for(l=8013;l<=8032;l++)g[l]=0;for(l=8065;l<=8068;l++)g[l]=1;for(l=8518;l<=8529;l++)g[l]=2;for(l=8533;l<=8536;l++)g[l]=2;for(l=8538;l<=8540;l++)g[l]=2;for(l=8677;l<=8679;l++)g[l]=0;for(l=8836;l<=8840;l++)g[l]=0;for(l=8857;l<=8859;l++)g[l]=0;for(l=8908;l<=8910;l++)g[l]=0;for(l=9154;l<=9159;l++)g[l]=0;for(l=9205;l<=9218;l++)g[l]=0;for(l=9271;l<=9273;l++)g[l]=0;for(l=9295;l<=9297;l++)g[l]=0;for(l=9356;l<=9360;l++)g[l]=0;for(l=9404;l<=9407;l++)g[l]=0;for(l=9476;l<=9482;l++)g[l]=0;for(l=9487;l<=9494;l++)g[l]=0;for(l=9697;l<=9699;l++)g[l]=0;for(l=9821;l<=9865;l++)g[l]=0;for(l=20002;l<=20032;l++)g[l]=0;for(l=20047;l<=20049;l++)g[l]=0;for(l=20062;l<=20092;l++)g[l]=0;for(l=20135;l<=20138;l++)g[l]=0;for(l=20248;l<=20258;l++)g[l]=0;for(l=20348;l<=20358;l++)g[l]=0;for(l=20436;l<=20440;l++)g[l]=0;for(l=20822;l<=20824;l++)g[l]=0;for(l=20904;l<=20932;l++)g[l]=0;for(l=20934;l<=20936;l++)g[l]=0;for(l=21004;l<=21032;l++)g[l]=0;for(l=21035;l<=21037;l++)g[l]=0;for(l=21095;l<=21097;l++)g[l]=0;for(l=21148;l<=21150;l++)g[l]=0;for(l=21207;l<=21264;l++)g[l]=0;for(l=21307;l<=21364;l++)g[l]=0;for(l=21413;l<=21423;l++)g[l]=0;for(l=21453;l<=21463;l++)g[l]=0;for(l=21473;l<=21483;l++)g[l]=0;for(l=21780;l<=21782;l++)g[l]=0;for(l=21891;l<=21894;l++)g[l]=0;for(l=21896;l<=21899;l++)g[l]=0;for(l=22171;l<=22177;l++)g[l]=0;for(l=22181;l<=22187;l++)g[l]=0;for(l=22191;l<=22197;l++)g[l]=0;for(l=22207;l<=22222;l++)g[l]=0;for(l=22234;l<=22236;l++)g[l]=0;for(l=22243;l<=22250;l++)g[l]=0;for(l=22262;l<=22265;l++)g[l]=0;for(l=22307;l<=22322;l++)g[l]=0;for(l=22348;l<=22357;l++)g[l]=0;for(l=22407;l<=22422;l++)g[l]=0;for(l=22462;l<=22465;l++)g[l]=0;for(l=22521;l<=22525;l++)g[l]=0;for(l=22607;l<=22622;l++)g[l]=0;for(l=22641;l<=22646;l++)g[l]=0;for(l=22648;l<=22657;l++)g[l]=0;for(l=22707;l<=22722;l++)g[l]=0;for(l=22762;l<=22765;l++)g[l]=0;for(l=22991;l<=22994;l++)g[l]=0;for(l=23028;l<=23038;l++)g[l]=0;for(l=23830;l<=23853;l++)g[l]=0;for(l=23866;l<=23872;l++)g[l]=0;for(l=23877;l<=23884;l++)g[l]=0;for(l=23886;l<=23894;l++)g[l]=0;for(l=23946;l<=23948;l++)g[l]=0;for(l=24311;l<=24313;l++)g[l]=0;for(l=24342;l<=24347;l++)g[l]=0;for(l=24370;l<=24374;l++)g[l]=10;for(l=24375;l<=24381;l++)g[l]=0;for(l=24718;l<=24721;l++)g[l]=0;for(l=24817;l<=24821;l++)g[l]=0;for(l=24877;l<=24882;l++)g[l]=0;for(l=24891;l<=24893;l++)g[l]=0;for(l=25391;l<=25395;l++)g[l]=0;for(l=25828;l<=25838;l++)g[l]=0;for(l=26191;l<=26195;l++)g[l]=0;for(l=26391;l<=26393;l++)g[l]=0;for(l=26701;l<=26722;l++)g[l]=0;for(l=26729;l<=26799;l++)g[l]=2;for(l=26801;l<=26803;l++)g[l]=2;for(l=26811;l<=26813;l++)g[l]=2;for(l=26847;l<=26870;l++)g[l]=2;for(l=26891;l<=26899;l++)g[l]=0;for(l=26901;l<=26923;l++)g[l]=0;for(l=26929;l<=26946;l++)g[l]=0;for(l=26948;l<=26998;l++)g[l]=0;for(l=27037;l<=27040;l++)g[l]=0;for(l=27205;l<=27232;l++)g[l]=0;for(l=27258;l<=27260;l++)g[l]=0;for(l=27391;l<=27398;l++)g[l]=0;for(l=27561;l<=27564;l++)g[l]=0;for(l=27571;l<=27574;l++)g[l]=0;for(l=27581;l<=27584;l++)g[l]=0;for(l=27591;l<=27594;l++)g[l]=0;for(l=28191;l<=28193;l++)g[l]=0;for(l=28348;l<=28358;l++)g[l]=0;for(l=28402;l<=28432;l++)g[l]=0;for(l=28462;l<=28492;l++)g[l]=0;for(l=29118;l<=29122;l++)g[l]=0;for(l=29168;l<=29172;l++)g[l]=0;for(l=29177;l<=29185;l++)g[l]=0;for(l=29187;l<=29195;l++)g[l]=0;for(l=29900;l<=29903;l++)g[l]=0;for(l=30161;l<=30179;l++)g[l]=0;for(l=30491;l<=30494;l++)g[l]=0;for(l=30729;l<=30732;l++)g[l]=0;for(l=31251;l<=31259;l++)g[l]=0;for(l=31265;l<=31268;l++)g[l]=0;for(l=31275;l<=31279;l++)g[l]=0;for(l=31281;l<=31297;l++)g[l]=0;for(l=31461;l<=31469;l++)g[l]=0;for(l=31491;l<=31495;l++)g[l]=0;for(l=31917;l<=31922;l++)g[l]=0;for(l=31965;l<=32e3;l++)g[l]=0;for(l=32001;l<=32003;l++)g[l]=2;for(l=32005;l<=32031;l++)g[l]=2;for(l=32033;l<=32060;l++)g[l]=2;for(l=32064;l<=32067;l++)g[l]=2;for(l=32074;l<=32077;l++)g[l]=2;for(l=32081;l<=32086;l++)g[l]=0;for(l=32107;l<=32130;l++)g[l]=0;for(l=32133;l<=32159;l++)g[l]=0;for(l=32164;l<=32167;l++)g[l]=2;for(l=32180;l<=32199;l++)g[l]=0;for(l=32201;l<=32260;l++)g[l]=0;for(l=32301;l<=32360;l++)g[l]=0;for(l=32601;l<=32662;l++)g[l]=0;for(l=32664;l<=32667;l++)g[l]=2;for(l=32701;l<=32761;l++)g[l]=0;for(l=53001;l<=53004;l++)g[l]=0;for(l=53008;l<=53019;l++)g[l]=0;for(l=53021;l<=53032;l++)g[l]=0;for(l=53034;l<=53037;l++)g[l]=0;for(l=53042;l<=53046;l++)g[l]=0;for(l=53074;l<=53080;l++)g[l]=0;for(l=54001;l<=54004;l++)g[l]=0;for(l=54008;l<=54019;l++)g[l]=0;for(l=54021;l<=54032;l++)g[l]=0;for(l=54034;l<=54037;l++)g[l]=0;for(l=54042;l<=54046;l++)g[l]=0;for(l=54048;l<=54053;l++)g[l]=0;for(l=54074;l<=54080;l++)g[l]=0;for(l=54098;l<=54101;l++)g[l]=0;for(l=102001;l<=102040;l++)g[l]=0;for(l=102042;l<=102063;l++)g[l]=0;for(l=102065;l<=102067;l++)g[l]=0;for(l=102070;l<=102117;l++)g[l]=0;for(l=102122;l<=102216;l++)g[l]=0;for(l=102221;l<=102377;l++)g[l]=0;for(l=102382;l<=102388;l++)g[l]=0;for(l=102389;l<=102398;l++)g[l]=2;for(l=102399;l<=102444;l++)g[l]=0;for(l=102445;l<=102447;l++)g[l]=2;for(l=102448;l<=102458;l++)g[l]=0;for(l=102459;l<=102468;l++)g[l]=2;for(l=102469;l<=102499;l++)g[l]=0;for(l=102500;l<=102519;l++)g[l]=1;for(l=102520;l<=102524;l++)g[l]=0;for(l=102525;l<=102529;l++)g[l]=2;for(l=102530;l<=102588;l++)g[l]=0;for(l=102590;l<=102598;l++)g[l]=0;for(l=102601;l<=102603;l++)g[l]=0;for(l=102605;l<=102628;l++)g[l]=0;for(l=102629;l<=102646;l++)g[l]=2;for(l=102648;l<=102700;l++)g[l]=2;for(l=102701;l<=102703;l++)g[l]=0;for(l=102707;l<=102730;l++)g[l]=2;for(l=102733;l<=102758;l++)g[l]=2;for(l=102767;l<=102900;l++)g[l]=0;for(l=102901;l<=102933;l++)g[l]=2;for(l=102934;l<=102950;l++)g[l]=13;for(l=102951;l<=102955;l++)g[l]=0;for(l=102961;l<=102963;l++)g[l]=0;for(l=102965;l<=102969;l++)g[l]=0;for(l=102971;l<=102973;l++)g[l]=0;for(l=102975;l<=102989;l++)g[l]=0;for(l=102990;l<=102992;l++)g[l]=1;for(l=102997;l<=103002;l++)g[l]=0;for(l=103003;l<=103008;l++)g[l]=2;for(l=103009;l<=103011;l++)g[l]=0;for(l=103012;l<=103014;l++)g[l]=2;for(l=103019;l<=103021;l++)g[l]=0;for(l=103022;l<=103024;l++)g[l]=2;for(l=103029;l<=103031;l++)g[l]=0;for(l=103032;l<=103034;l++)g[l]=2;for(l=103065;l<=103068;l++)g[l]=0;for(l=103074;l<=103076;l++)g[l]=0;for(l=103077;l<=103079;l++)g[l]=1;for(l=103080;l<=103082;l++)g[l]=0;for(l=103083;l<=103085;l++)g[l]=2;for(l=103090;l<=103093;l++)g[l]=0;for(l=103097;l<=103099;l++)g[l]=0;for(l=103100;l<=103102;l++)g[l]=2;for(l=103107;l<=103109;l++)g[l]=0;for(l=103110;l<=103112;l++)g[l]=2;for(l=103113;l<=103116;l++)g[l]=0;for(l=103117;l<=103120;l++)g[l]=2;for(l=103153;l<=103157;l++)g[l]=0;for(l=103158;l<=103162;l++)g[l]=2;for(l=103163;l<=103165;l++)g[l]=0;for(l=103166;l<=103168;l++)g[l]=1;for(l=103169;l<=103171;l++)g[l]=2;for(l=103186;l<=103188;l++)g[l]=0;for(l=103189;l<=103191;l++)g[l]=2;for(l=103192;l<=103195;l++)g[l]=0;for(l=103196;l<=103199;l++)g[l]=2;for(l=103200;l<=103224;l++)g[l]=0;for(l=103225;l<=103227;l++)g[l]=1;for(l=103232;l<=103237;l++)g[l]=0;for(l=103238;l<=103243;l++)g[l]=2;for(l=103244;l<=103246;l++)g[l]=0;for(l=103247;l<=103249;l++)g[l]=2;for(l=103254;l<=103256;l++)g[l]=0;for(l=103257;l<=103259;l++)g[l]=2;for(l=103264;l<=103266;l++)g[l]=0;for(l=103267;l<=103269;l++)g[l]=2;for(l=103300;l<=103375;l++)g[l]=0;for(l=103381;l<=103383;l++)g[l]=0;for(l=103384;l<=103386;l++)g[l]=1;for(l=103387;l<=103389;l++)g[l]=0;for(l=103390;l<=103392;l++)g[l]=2;for(l=103397;l<=103399;l++)g[l]=0;for(l=103400;l<=103471;l++)g[l]=2;for(l=103476;l<=103478;l++)g[l]=0;for(l=103479;l<=103481;l++)g[l]=2;for(l=103486;l<=103488;l++)g[l]=0;for(l=103489;l<=103491;l++)g[l]=2;for(l=103492;l<=103495;l++)g[l]=0;for(l=103496;l<=103499;l++)g[l]=2;for(l=103528;l<=103543;l++)g[l]=0;for(l=103544;l<=103548;l++)g[l]=2;for(l=103549;l<=103551;l++)g[l]=0;for(l=103552;l<=103554;l++)g[l]=1;for(l=103555;l<=103557;l++)g[l]=2;for(l=103558;l<=103560;l++)g[l]=0;for(l=103571;l<=103573;l++)g[l]=0;for(l=103574;l<=103576;l++)g[l]=2;for(l=103577;l<=103580;l++)g[l]=0;for(l=103581;l<=103583;l++)g[l]=2;for(l=103595;l<=103694;l++)g[l]=0;for(l=103696;l<=103699;l++)g[l]=0;for(l=103700;l<=103793;l++)g[l]=2;for(l=103794;l<=103890;l++)g[l]=0;for(l=103891;l<=103896;l++)g[l]=2;for(l=103900;l<=103971;l++)g[l]=2;for(l=103972;l<=103977;l++)g[l]=0;for(l=112e3;l<=112101;l++)g[l]=0;const bA={102113:!0,102100:!0,3857:!0,3785:!0},SA={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},E_='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',tu=[-20037508342788905e-9,20037508342788905e-9],ru=[-20037508342787e-6,20037508342787e-6],iS={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:tu,origin:ru,dx:1e-5},102100:{wkTemplate:E_,valid:tu,origin:ru,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:tu,origin:ru,dx:1e-5},3857:{wkTemplate:E_,valid:tu,origin:ru,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ot(t,e){return t===e?!0:t==null||e==null?!1:t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||Ms(t)&&Ms(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:t.wkt&&e.wkt?t.wkt.toUpperCase()===e.wkt.toUpperCase():!1}function vi(t){return et(t)&&t.wkid&&iS[t.wkid]||null}function nS(t){return et(t)?t.wkid?g[t.wkid]==null:t.wkt?!!/^\s*GEOGCS/i.test(t.wkt):!1:!1}function TA(t){return!(Tg(t)||Mg(t))}function xl(t){return et(t)&&t.wkid===4326}function xU(t){return et(t)&&t.wkid===Es.CGCS2000}function Ms(t){return et(t)&&t.wkid!=null&&bA[t.wkid]===!0}function EA(t){return et(t)&&t.wkid===32662}function Sg(t){return t===Es.GCSMARS2000||t===Es.GCSMARS2000_SPHERE}function Tg(t){return et(t)&&t.wkid!=null&&Sg(t.wkid)}function Eg(t){return t===Es.GCSMOON2000}function Mg(t){return et(t)&&t.wkid!=null&&Eg(t.wkid)}function MA(t){return et(t)&&t.wkid!=null&&SA[t.wkid]===!0}function et(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const PA={wkid:4326,wkt:Xy(iS[4326].wkTemplate,{Central_Meridian:"0.0"})},CA={wkid:102100,latestWkid:3857},AA={wkid:32662};function Pg(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const IA=Pg(Ee),sS=Pg(wi),oS=Pg(Tn),OA={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ee.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function xA(t){return t!=null&&(Tg(t)||ot(t,sS))?wi:t!=null&&(Mg(t)||ot(t,oS))?Tn:Ee}function kU(t){return Sg(t)?wi:Eg(t)?Tn:Ee}const LU=39.37,kA=Ee.radius*Math.PI/200,aS=/UNIT\[([^\]]+)\]\]$/i,ms=g,lS=/UNIT\[([^\]]+)\]/i,LA=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),RA=Mt()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),NA={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}},kr=t=>t*t,DA={"square-millimeters":{inBaseUnits:kr(.001)},"square-centimeters":{inBaseUnits:kr(.01)},"square-decimeters":{inBaseUnits:kr(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:kr(1e3)},"square-inches":{inBaseUnits:kr(.0254)},"square-feet":{inBaseUnits:kr(.3048)},"square-yards":{inBaseUnits:kr(.9144)},"square-miles":{inBaseUnits:kr(1609.344)},"square-us-feet":{inBaseUnits:kr(1200/3937)},acres:{inBaseUnits:.0015625*kr(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}},Hi=t=>t*t*t,$A={liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Hi(.001)},"cubic-centimeters":{inBaseUnits:1e3*Hi(.01)},"cubic-decimeters":{inBaseUnits:1e3*Hi(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Hi(1e3)},"cubic-inches":{inBaseUnits:1e3*Hi(.0254)},"cubic-feet":{inBaseUnits:1e3*Hi(.3048)},"cubic-yards":{inBaseUnits:1e3*Hi(.9144)},"cubic-miles":{inBaseUnits:1e3*Hi(1609.344)}},FA={radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}},kl={length:{baseUnit:"meters",units:NA},area:{baseUnit:"square-meters",units:DA},volume:{baseUnit:"liters",units:$A},angle:{baseUnit:"radians",units:FA}},UA=(()=>{const t={};for(const e in kl)for(const r in kl[e].units)t[r]=e;return t})();function VA(t,e,r){return t*kl[r].units[e].inBaseUnits}function GA(t,e,r){return t/kl[r].units[e].inBaseUnits}function $p(t){const e=UA[t];if(!e)throw new Error("unknown type");return e}function M_(t,e=null){return e=e||$p(t),kl[e].baseUnit===t}function zA(t,e,r){if(e===r)return t;const i=$p(e);if(i!==$p(r))throw new Error("incompatible units");const n=M_(e,i)?t:VA(t,e,i);return M_(r,i)?n:GA(n,r,i)}function RU(t,e,r){return zA(t,e,"meters")/(r*Math.PI/180)}function cS(t){return RA.fromJSON(t.toLowerCase())||null}function P_(t){if(t!=null&&!TA(t))return 1;const e=va(t);return e>1e5?1:e}function jA(t){const e=va(t),r=xA(t).metersPerDegree;return e>=r?"meters":hS(t)}function va(t,e=Ee.metersPerDegree){return WA(t,!0)??e}function WA(t,e=!1){const r=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let n=null;if(r){if(Sg(r))return wi.metersPerDegree;if(Eg(r))return Tn.metersPerDegree;n=ms.values[ms[r]],!n&&e&&LA.has(r)&&(n=kA)}else i&&(fS(i)?n=C_(aS.exec(i),n):dS(i)&&(n=C_(lS.exec(i),n)));return n}function C_(t,e){return t&&t[1]?uS(t[1]):e}function uS(t){return parseFloat(t.split(",")[1])}function hS(t){const e=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let i=null;if(e)i=ms.units[ms[e]];else if(r){const n=fS(r)?aS:dS(r)?lS:null;if(n){const s=n.exec(r);s&&s[1]&&(i=HA(s[1]))}}return i!=null?cS(i):null}function dS(t){return/^GEOCCS/i.test(t)}function fS(t){return/^PROJCS/i.test(t)}const BA=1e-7;function HA(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let r=e&&e[1];if(!r||!ms.units.includes(r)){const i=uS(t);r=null;const n=ms.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<BA){r=ms.units[s];break}}return r}const qA={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ZA={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},YA={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},NU=Mt()(qA),DU=Mt()(ZA),$U=Mt()(YA);var Nr;let ce=Nr=class extends G{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Nr.WebMercator;if(e.wkid===4326)return Nr.WGS84}const r=new Nr;return r.read(e),r}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return xl(this)}get isWebMercator(){return Ms(this)}get isGeographic(){return nS(this)}get isWrappable(){return MA(this)}get metersPerUnit(){return va(this)}get unit(){return hS(this)||(this.isGeographic?"degrees":null)}writeWkt(e,r){this.wkid||(r.wkt=e)}clone(){if(this===Nr.WGS84)return Nr.WGS84;if(this===Nr.WebMercator)return Nr.WebMercator;const e=new Nr;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=x(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return r!=null&&!n?i?s.id===r&&s.referenceServiceName===i:s.id===r:JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem)}return ot(this,e)}toJSON(e){return this.write(void 0,e)}};ce.GCS_NAD_1927=null;ce.WGS84=null;ce.WebMercator=null;ce.PlateCarree=null;c([d({readOnly:!0})],ce.prototype,"isWGS84",null);c([d({readOnly:!0})],ce.prototype,"isWebMercator",null);c([d({readOnly:!0})],ce.prototype,"isGeographic",null);c([d({readOnly:!0})],ce.prototype,"isWrappable",null);c([d({type:Ge,json:{write:!0}})],ce.prototype,"latestWkid",void 0);c([d({readOnly:!0})],ce.prototype,"metersPerUnit",null);c([d({readOnly:!0})],ce.prototype,"unit",null);c([d({type:Ge,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ce.prototype,"wkid",void 0);c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ce.prototype,"wkt",void 0);c([de("wkt"),de("web-scene","wkt")],ce.prototype,"writeWkt",null);c([d({type:Ge,json:{write:!0}})],ce.prototype,"vcsWkid",void 0);c([d({type:Ge,json:{write:!0}})],ce.prototype,"latestVcsWkid",void 0);c([d()],ce.prototype,"imageCoordinateSystem",void 0);ce=Nr=c([T("esri.geometry.SpatialReference")],ce);ce.prototype.toJSON.isDefaultToJSON=!0;ce.GCS_NAD_1927=new ce({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});ce.WGS84=new ce(PA);ce.WebMercator=new ce(CA);ce.PlateCarree=new ce(AA);Object.freeze&&(Object.freeze(ce.GCS_NAD_1927),Object.freeze(ce.WGS84),Object.freeze(ce.WebMercator));const _e=ce,JA="4.27";let kc=JA;kc=`4.27.0-next.${Rd}`;const KA={async request(t,e){var a,u;const{default:r}=await R(()=>Promise.resolve().then(()=>pI),void 0),i=t.options,n=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((a=Kb(t.url))!=null&&a.after)?n:"array-buffer";const s=await r(t.url,i),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((u=s.requestOptions)==null?void 0:u.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer;break}return{result:o,transferList:[o.data]}}};let ge;function UU(t){ge=t}function VU(t){const e=ge==null?void 0:ge.findCredential(t);return e!=null&&e.token?tS(t,"token",e.token):t}C("host-webworker");const XA=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function pS(t){const e=yr(t,!0);return e?e.endsWith(".arcgis.com")&&!XA.includes(e)&&!t.endsWith("/sharing/rest/generateToken"):!1}function QA(t,e,r=!1,i){return new Promise((n,s)=>{if(wr(i)){s(A_());return}let o=()=>{h(),s(new Error(`Unable to load ${e}`))},a=()=>{const f=t;h(),n(f)},u=()=>{if(!t)return;const f=t;h(),f.src="",s(A_())};const h=()=>{C("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,i!=null&&i.removeEventListener("abort",u),u=null,r&&URL.revokeObjectURL(e)};i!=null&&i.addEventListener("abort",u),C("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function A_(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}function eI(t){se.request.crossOriginNoCorsDomains||(se.request.crossOriginNoCorsDomains={});const e=se.request.crossOriginNoCorsDomains;for(let r of t)r=r.toLowerCase(),/^https?:\/\//.test(r)?e[yr(r)??""]=0:(e[yr("http://"+r)??""]=0,e[yr("https://"+r)??""]=0)}function tI(t){const e=se.request.crossOriginNoCorsDomains;if(e){let r=yr(t);if(r)return r=r.toLowerCase(),!Bo(r,pg())&&e[r]<Date.now()-60*6e4}return!1}async function rI(t){var n;const e=se.request.crossOriginNoCorsDomains,r=yr(t);e&&r&&(e[r.toLowerCase()]=Date.now());const i=Dt(t);t=i.path,((n=i.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function yt(t,e){var h;const r=ho(t),i=_g(t);!i&&!r&&(t=gn(t));const n={url:t,requestOptions:{...e}};let s=Kb(t);if(s){const f=await uI(s,n);if(f!=null)return{data:f,getHeader:Cg,httpStatus:200,requestOptions:n.requestOptions,url:n.url};!s.after&&!s.error&&(s=null)}if(t=n.url,e=n.requestOptions,e.responseType==="image"){if(C("host-webworker")||C("host-node"))throw pr("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(r)throw pr("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),n);if(e.method==="head"){if(e.body)throw pr("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw pr("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await aI(),Sh)return Sh.execute(t,e);const o=new AbortController;Zt(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:hr.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await dI(a);return(h=s==null?void 0:s.after)==null||h.call(s,u),u}let Sh;const hr=se.request,mS="FormData"in globalThis,iI=[499,498,403,401],nI=["COM_0056","COM_0057","SB_0008"],sI=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Cg=()=>null,Th=Symbol();yt._abortableFetch=null;yt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];function oI(t){const e=yr(t);e&&!yt._corsServers.includes(e)&&yt._corsServers.push(e)}function I_(t){const e=yr(t);return!e||e.endsWith(".arcgis.com")||yt._corsServers.includes(e)||yg(e)}function pr(t,e,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:Cg,ssl:!1};if(e instanceof D)return e.details?(e.details=x(e.details),e.details.url=r.url,e.details.requestOptions=r.requestOptions):e.details=s,e;if(e){const o=i&&(h=>i.headers.get(h)),a=i&&i.status,u=e.message;u&&(n=u),o&&(s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=Th in e?e[Th]:e}return Gi(e)?Ae():new D(t,n,s)}async function aI(){C("host-webworker")?Sh||(Sh=await R(()=>import("./request-ed4443fd.js"),[])):yt._abortableFetch||(yt._abortableFetch=globalThis.fetch.bind(globalThis))}async function Fp(){ge||await R(()=>import("./IdentityManager-1974ce93.js"),["assets/IdentityManager-1974ce93.js","assets/widget-6398120a.js"])}async function lI(t){var a;const e=t.params.url,r=t.params.requestOptions,i=t.controller.signal,n=r.body;let s=null,o=null;if(mS&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:r.cacheBust&&!yt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:hr.priority,redirect:"follow",signal:i},(s||o)&&(t.fetchOptions.body=s||o),r.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&se.apiKey&&pS(e)&&(r.query||(r.query={}),r.query.token=se.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!yS(e)&&!wr(i)){let u;r.authMode==="immediate"?(await Fp(),u=await ge.getCredential(e,{signal:i}),t.credential=u):r.authMode==="no-prompt"?(await Fp(),u=await ge.getCredential(e,{prompt:!1,signal:i}).catch(()=>{}),t.credential=u):ge&&(u=ge.findCredential(e)),u&&(t.credentialToken=u.token,t.useSSL=!!u.ssl)}}function yS(t){return sI.some(e=>e.test(t))}async function cI(t){let e=t.params.url;const r=t.params.requestOptions,i=t.fetchOptions??{},n=_g(e)||ho(e),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:hr.timeout;let a=!1;if(!n){t.useSSL&&(e=vg(e)),r.cacheBust&&i.cache==="default"&&(e=tS(e,"request.preventCache",Date.now()));let m={...r.query};t.credentialToken&&(m.token=t.credentialToken);let y=Il(m);C("esri-url-encodes-apostrophe")&&(y=y.replace(/'/g,"%27"));const _=e.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>hr.maxUrlLength;const w=r.useProxy||!!Gd(e);if(w){const S=nA(e);v=S.path,!a&&v.length+1+_>hr.maxUrlLength&&(a=!0),S.query&&(m={...S.query,...m})}if(i.method==="HEAD"&&(a||w)){if(a)throw _>hr.maxUrlLength?pr("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):pr("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(w)throw pr("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=Sf(e,m):(i.body=Il(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Sf(e,m),w&&(t.useProxy=!0,e=`${v}?${e}`),m.token&&mS&&i.body instanceof FormData&&!qC(e)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!Bo(e,pg())){if(yg(e))t.withCredentials=!0;else if(ge){const S=ge.findServerInfo(e);S&&S.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(i.credentials="include",tI(e)&&await rI(a?Sf(e,m):e))}let u=0,h=!1;o>0&&(u=setTimeout(()=>{h=!0,t.controller.abort()},o));let f,p;try{if(r.responseType==="native-request-init")p=i,p.url=e;else if(r.responseType==="image"&&i.cache==="default"&&i.method==="GET"&&!a&&!hI(r.headers)&&(n||t.useProxy||!hr.proxyUrl||I_(e)))p=await x_(e,t);else if(f=await yt._abortableFetch(e,i),t.useProxy||oI(e),r.responseType==="native")p=f;else if(i.method!=="HEAD")if(!f.ok)p=await f.text();else{switch(s){case"array-buffer":p=await f.arrayBuffer();break;case"blob":case"image":p=await f.blob();break;default:p=await f.text();break}if(u&&(clearTimeout(u),u=0),s==="json"||s==="xml"||s==="document")if(p)switch(s){case"json":p=JSON.parse(p);break;case"xml":p=O_(p,"application/xml");break;case"document":p=O_(p,"text/html");break}else p=null;if(p){if(s==="array-buffer"||s==="blob"){const m=f.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&p[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(p).json();y.error&&(p=y)}catch{}}s==="image"&&p instanceof Blob&&(p=await x_(URL.createObjectURL(p),t,!0))}}}catch(m){if(m.name==="AbortError")throw h?new Error("Timeout exceeded"):Ae("Request canceled");if(!f&&m instanceof TypeError&&hr.proxyUrl&&!r.body&&r.method!=="delete"&&r.method!=="head"&&r.method!=="post"&&r.method!=="put"&&!t.useProxy&&!I_(e))t.redoRequest=!0,sA({proxyUrl:hr.proxyUrl,urlPrefix:yr(e)??""});else throw m}finally{u&&clearTimeout(u)}return[f,p]}async function uI(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let r,i;try{i=await t.before(e)}catch(n){r=pr("request:interceptor",n,e)}if((i instanceof Error||i instanceof D)&&(r=pr("request:interceptor",i,e)),r)throw t.error&&t.error(r),r;return i}}function hI(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function O_(t,e){let r;try{r=new DOMParser().parseFromString(t,e)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function dI(t){var s;await lI(t);let e,r;try{do[e,r]=await cI(t);while(!await fI(t,e,r))}catch(o){const a=pr("request:server",o,t.params,e);throw a.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(a),a}const i=t.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!t.hasToken&&!t.credentialToken&&((s=r.user)!=null&&s.username)&&!yg(i)){const o=yr(i,!0);o&&hr.trustedServers.push(o)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&eI(r.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&ge){const o=ge.findServerInfo(n.server);let a=o&&o.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const u=ge.findCredential(a,n.userId);u&&ge._getIdenticalSvcIdx(a,u)===-1&&u.resources.unshift(a)}}return{data:r,getHeader:e?o=>e==null?void 0:e.headers.get(o):Cg,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function fI(t,e,r){if(t.redoRequest)return t.redoRequest=!1,!1;const i=t.params.requestOptions;if(!e||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n;if(!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[Th]=r,n;r&&(r.error?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[Th]=r,n.details=r.messages));let s,o=null,a;n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const u=i.authMode;if(s===403&&(o===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(u!=="no-prompt"||s===498)&&s!==void 0&&iI.includes(s)&&!yS(t.params.url)&&(s!==403||a&&!nI.includes(a)&&(o==null||o===2&&t.credentialToken))){await Fp();try{const h=await ge.getCredential(t.params.url,{error:pr("request:server",n,t.params),prompt:u!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(u==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function x_(t,e,r=!1){const i=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=hr.priority,n.src=t,QA(n,t,r,i)}const pI=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));function fe(t,e,r){let i,n;return e===void 0||Array.isArray(e)?(n=t,r=e,i=[void 0]):(n=e,Array.isArray(t)?i=t:i=[t]),(s,o)=>{const a=s.constructor.prototype;i.forEach(u=>{const h=Cb(s,u,n);(!h.read||typeof h.read!="object")&&(h.read={}),h.read.reader=a[o],r&&(h.read.source=(h.read.source||[]).concat(r))})}}let jr=class extends G{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=_e.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof _e)return e;if(e!=null){const i=new _e;return i.read(e,r),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r}};c([d()],jr.prototype,"type",void 0);c([d({readOnly:!0})],jr.prototype,"cache",null);c([d({readOnly:!0})],jr.prototype,"extent",null);c([d({type:Boolean,json:{write:{overridePolicy(t){return{enabled:t}}}}})],jr.prototype,"hasM",void 0);c([d({type:Boolean,json:{write:{overridePolicy(t){return{enabled:t}}}}})],jr.prototype,"hasZ",void 0);c([d({type:_e,json:{write:!0},value:_e.WGS84})],jr.prototype,"spatialReference",void 0);c([fe("spatialReference")],jr.prototype,"readSpatialReference",null);jr=c([T("esri.geometry.Geometry")],jr);const qn=jr,mI=Object.prototype.toString;function yI(t){const e="__accessorMetadata__"in t?je(t):t;return function(...r){if(r.push(e),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return gI.apply(this,r)}}function gI(t,e,r,i){Ld(t,e).cast=i}function _I(t){return(e,r)=>{const i=Ld(e,t);i.cast=e[r]}}function wt(...t){if(!(t.length===3&&typeof t[1]=="string")){if(t.length===1&&mI.call(t[0])==="[object Function]")return yI(t[0]);if(t.length===1&&typeof t[0]=="string")return _I(t[0])}}function wI(t,e){const r=t.x-e.x,i=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(r*r+i*i+n*n)}const vI=57.29577951308232,bI=.017453292519943;function k_(t){return t*vI}function L_(t){return t*bI}function zU(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ee.radius))}function Up(t){return t.wkid!=null||t.wkt!=null}const Tf=[0,0];function Eh(t,e,r,i,n){const s=t,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,Tf,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,Tf,i),[o.xmax,o.ymax]=e(s.xmax,s.ymax,Tf,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,u=[];let h;for(let f=0;f<a.length;f++){const p=a[f];h=[],u.push(h);for(let m=0;m<p.length;m++)h.push(e(p[m][0],p[m][1],[0,0],i)),p[m].length>2&&h[m].push(p[m][2]),p[m].length>3&&h[m].push(p[m][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in s&&"points"in o){const a=s.points,u=[];for(let h=0;h<a.length;h++)u[h]=e(a[h][0],a[h][1],[0,0],i),a[h].length>2&&u[h].push(a[h][2]),a[h].length>3&&u[h].push(a[h][3]);o.points=u}return n}function $u(t,e){const r=t&&(Up(t)?t:t.spatialReference),i=e&&(Up(e)?e:e.spatialReference);return t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!r||!i?!1:ot(i,r)?!0:Ms(i)&&xl(r)||Ms(r)&&xl(i)}function jd(t,e){if(t==null)return null;const r=t.spatialReference,i=e&&(Up(e)?e:e.spatialReference);return $u(r,i)?ot(r,i)?x(t):Ms(i)?Eh(t,ko,_e.WebMercator,!1,x(t)):xl(i)?Eh(t,ml,_e.WGS84,!1,x(t)):null:null}function ko(t,e,r=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const i=L_(e);return r[0]=L_(t)*Ee.radius,r[1]=Ee.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function ml(t,e,r=[0,0],i=!1){const n=k_(t/Ee.radius);return r[0]=i?n:n-Math.floor((n+180)/360)*360,r[1]=k_(Math.PI/2-2*Math.atan(Math.exp(-e/Ee.radius))),r}function yl(t,e=!1,r=x(t)){return Eh(t,ko,_e.WebMercator,e,r)}function iu(t,e=!1,r=x(t)){return Eh(t,ml,_e.WGS84,e,r)}var Fu;const Na=[0,0];function R_(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let gt=Fu=class extends qn{static copy(e,r){r._set("x",e._get("x")),r._set("y",e._get("y")),r._set("z",e._get("z")),r._set("m",e._get("m"));const i=e._get("spatialReference");r._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,r,i,n,s){let o;if(Array.isArray(e))o=e,s=r,e=o[0],r=o[1],i=o[2],n=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,r=o.y!=null?o.y:o.latitude,i=o.z,n=o.m,s=o.spatialReference,s&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new _e(s)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)k.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)k.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&s&&s.isWebMercator){const u=ko(o.longitude,o.latitude,Na);e=u[0],r=u[1]}}}else R_(i)?(s=i,i=null):R_(n)&&(s=n,n=null);const a={x:e,y:r};return a.x==null&&a.y!=null?k.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&k.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(a.spatialReference=s),i!=null&&(a.z=i),n!=null&&(a.m=n),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){const r=this._get("m")!==void 0;e!==r&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){const r=this._get("z")!==void 0;e!==r&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:r,y:i}=this;if(e){if(e.isWebMercator)return ml(r,i,Na)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:r,x:i}=this;e!=null&&r&&(r.isWebMercator?this._set("y",ko(i,e,Na)[1]):r.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:r,spatialReference:i}=this;if(i){if(i.isWebMercator)return ml(e,r,Na)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:r,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",ko(e,r,Na)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,r,i){r[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Fu;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Fu.copy(e,this),this}equals(e){if(e==null)return!1;const{x:r,y:i,z:n,m:s,spatialReference:o}=this,{z:a,m:u}=e;let{x:h,y:f,spatialReference:p}=e;if(!o.equals(p))if(o.isWebMercator&&p.isWGS84)[h,f]=ko(h,f),p=o;else if(o.isWGS84&&p.isWebMercator)[h,f]=ml(h,f),p=o;else return!1;return r===h&&i===f&&n===a&&s===u&&o.wkid===p.wkid}offset(e,r,i){return this.x+=e,this.y+=r,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=vi(this.spatialReference);if(!e)return this;let r=this.x;const[i,n]=e.valid,s=2*n;let o;return r>n?(o=Math.ceil(Math.abs(r-n)/s),r-=o*s):r<i&&(o=Math.ceil(Math.abs(r-i)/s),r+=o*s),this._set("x",r),this}distance(e){return wI(this,e)}toArray(){const e=this.hasZ,r=this.hasM;return e&&r?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:r?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],gt.prototype,"cache",null);c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasM",null);c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasZ",null);c([d({type:Number})],gt.prototype,"latitude",null);c([d({type:Number})],gt.prototype,"longitude",null);c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),wt(t=>isNaN(t)?t:dr(t))],gt.prototype,"x",void 0);c([de("x")],gt.prototype,"writeX",null);c([fe("x")],gt.prototype,"readX",null);c([d({type:Number,json:{write:!0}})],gt.prototype,"y",void 0);c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],gt.prototype,"z",void 0);c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],gt.prototype,"m",void 0);gt=Fu=c([T("esri.geometry.Point")],gt);gt.prototype.toJSON.isDefaultToJSON=!0;const q=gt,Ef=[0,0];function Wd(t,e){return e!=null?ft(t,e.x,e.y,e.z):!1}function WU(t,e){if(!e.points||e.points.length)return!1;for(const r of e.points)if(!Ho(t,r))return!1;return!0}function SI(t,e){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?ft(t,r,i,n)&&ft(t,r,o,n)&&ft(t,s,o,n)&&ft(t,s,i,n)&&ft(t,r,i,a)&&ft(t,r,o,a)&&ft(t,s,o,a)&&ft(t,s,i,a):ft(t,r,i)&&ft(t,r,o)&&ft(t,s,o)&&ft(t,s,i)}function Ho(t,e){return ft(t,e[0],e[1])}function TI(t,e){return ft(t,e[0],e[1],e[2])}function ft(t,e,r,i){return e>=t.xmin&&e<=t.xmax&&r>=t.ymin&&r<=t.ymax?i!=null&&t.hasZ?i>=t.zmin&&i<=t.zmax:!0:!1}function gS(t,e){return Ef[1]=e.y,Ef[0]=e.x,EI(t,Ef)}function EI(t,e){return _S(t.rings,e)}function _S(t,e){if(!t)return!1;if(MI(t))return N_(!1,t,e);let r=!1;for(let i=0,n=t.length;i<n;i++)r=N_(r,t[i],e);return r}function MI(t){return!Array.isArray(t[0][0])}function N_(t,e,r){const[i,n]=r;let s=t,o=0;for(let a=0,u=e.length;a<u;a++){o++,o===u&&(o=0);const[h,f]=e[a],[p,m]=e[o];(f<n&&m>=n||m<n&&f>=n)&&h+(n-f)/(m-f)*(p-h)<i&&(s=!s)}return s}function PI(t,e){return Wd(t,e)}function CI(t,e){const r=t.hasZ&&e.hasZ;let i,n,s;if(t.xmin<=e.xmin){if(i=e.xmin,t.xmax<i)return!1}else if(i=t.xmin,e.xmax<i)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(r&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function AI(t,e){const{points:r,hasZ:i}=e,n=i?TI:Ho;for(const s of r)if(n(t,s))return!0;return!1}const Ps=[0,0],Cs=[0,0],As=[0,0],Is=[0,0],II=[Ps,Cs,As,Is],wS=[[As,Ps],[Ps,Cs],[Cs,Is],[Is,As]];function OI(t,e){return xI(t,e.rings)}function xI(t,e){Ps[0]=t.xmin,Ps[1]=t.ymax,Cs[0]=t.xmax,Cs[1]=t.ymax,As[0]=t.xmin,As[1]=t.ymin,Is[0]=t.xmax,Is[1]=t.ymin;for(const r of II)if(_S(e,r))return!0;for(const r of e){if(!r.length)continue;let i=r[0];if(Ho(t,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(Ho(t,s)||vS(i,s,wS))return!0;i=s}}return!1}function kI(t,e){Ps[0]=t.xmin,Ps[1]=t.ymax,Cs[0]=t.xmax,Cs[1]=t.ymax,As[0]=t.xmin,As[1]=t.ymin,Is[0]=t.xmax,Is[1]=t.ymin;const r=e.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(Ho(t,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(Ho(t,o)||vS(n,o,wS))return!0;n=o}}return!1}const Xe=[0,0];function LI(t){for(let e=0;e<t.length;e++){const r=t[e];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=e+1;a<t.length;a++)for(let u=0;u<t[a].length-1;u++){const h=t[a][u],f=t[a][u+1];if(Vp(s,o,h,f,Xe)&&!(Xe[0]===s[0]&&Xe[1]===s[1]||Xe[0]===h[0]&&Xe[1]===h[1]||Xe[0]===o[0]&&Xe[1]===o[1]||Xe[0]===f[0]&&Xe[1]===f[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let u=n+2;u<s;u++){const h=r[u],f=r[u+1];if(Vp(o,a,h,f,Xe)&&!(Xe[0]===o[0]&&Xe[1]===o[1]||Xe[0]===h[0]&&Xe[1]===h[1]||Xe[0]===a[0]&&Xe[1]===a[1]||Xe[0]===f[0]&&Xe[1]===f[1]))return!0}}}return!1}function vS(t,e,r){for(let i=0;i<r.length;i++)if(Vp(t,e,r[i][0],r[i][1]))return!0;return!1}function Vp(t,e,r,i,n){const[s,o]=t,[a,u]=e,[h,f]=r,[p,m]=i,y=p-h,_=s-h,v=a-s,w=m-f,S=o-f,P=u-o,M=w*v-y*P;if(M===0)return!1;const A=(y*S-w*_)/M,I=(v*S-P*_)/M;return A>=0&&A<=1&&I>=0&&I<=1?(n&&(n[0]=s+A*(a-s),n[1]=o+A*(u-o)),!0):!1}function RI(t){switch(t){case"esriGeometryEnvelope":case"extent":return CI;case"esriGeometryMultipoint":case"multipoint":return AI;case"esriGeometryPoint":case"point":return PI;case"esriGeometryPolygon":case"polygon":return OI;case"esriGeometryPolyline":case"polyline":return kI}}var zt;function NI(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function qi(t,e,r){return e==null?r:r==null?e:t(e,r)}let He=zt=class extends qn{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,r,i,n,s){return NI(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?_e.WGS84:e.spatialReference,e):{xmin:e,ymin:r,xmax:i,ymax:n,spatialReference:s??_e.WGS84}}static fromBounds(e,r){return new zt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:r})}static fromPoint(e){return new zt({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new q({x:(this.xmin+this.xmax)*.5,y:(this.ymin+this.ymax)*.5,spatialReference:this.spatialReference});return this.hasZ&&(e.z=(this.zmin+this.zmax)*.5),this.hasM&&(e.m=(this.mmin+this.mmax)*.5),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const r=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-r.x,e.y-r.y,e.z-r.z):this.offset(e.x-r.x,e.y-r.y)}clone(){const e=new zt;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const r=this.spatialReference,i=e.spatialReference;return r&&i&&!r.equals(i)&&$u(r,i)&&(e=r.isWebMercator?yl(e):iu(e,!0)),e.type==="point"?Wd(this,e):e.type==="extent"?SI(this,e):!1}equals(e){if(this===e)return!0;if(e==null)return!1;const r=this.spatialReference,i=e.spatialReference;return r&&i&&!r.equals(i)&&$u(r,i)&&(e=r.isWebMercator?yl(e):iu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const r=(1-e)*.5,i=this.width*r,n=this.height*r;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const s=(this.zmax-this.zmin)*r;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*r;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const r=this.spatialReference,i=e.spatialReference;return r&&i&&!ot(r,i)&&$u(r,i)&&(e=r.isWebMercator?yl(e):iu(e,!0)),RI(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,r,i){return this.xmin+=e,this.ymin+=r,this.xmax+=e,this.ymax+=r,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e?this:(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=qi(Math.min,this.zmin,e.zmin),this.zmax=qi(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=qi(Math.min,this.mmin,e.mmin),this.mmax=qi(Math.max,this.mmax,e.mmax)),this)}intersection(e){return this===e?this:e==null||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=qi(Math.max,this.zmin,e.zmin),this.zmax=qi(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=qi(Math.max,this.mmin,e.mmin),this.mmax=qi(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=vi(this.spatialReference)){if(!e||!this.spatialReference)return this;const r=this.spatialReference,i=this._getCM(e);if(i){const n=r.isWebMercator?iu(i):i;this.xmin-=i.x,this.xmax-=i.x,r.isWebMercator||(n.x=this._normalizeX(n.x,e).x),this.spatialReference=new _e(Xy((r.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(e){let r=null;const[i,n]=e.valid,s=this.xmin,o=this.xmax,a=s>=i&&s<=n,u=o>=i&&o<=n;return a&&u||(r=this.center),r}_normalize(e,r,i){const n=this.spatialReference;if(!n)return this;const s=i??vi(n);if(s==null)return this;const o=this._getParts(s).map(h=>h.extent);if(o.length<2)return o[0]||this;if(o.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(r)return o;let a=!0,u=!0;return o.forEach(h=>{h.hasZ||(a=!1),h.hasM||(u=!1)}),{rings:o.map(h=>{const f=[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]];if(a){const p=(h.zmax-h.zmin)/2;for(let m=0;m<f.length;m++)f[m].push(p)}if(u){const p=(h.mmax-h.mmin)/2;for(let m=0;m<f.length;m++)f[m].push(p)}return f}),hasZ:a,hasM:u,spatialReference:n}}_getParts(e){let r=this.cache._parts;if(!r){r=[];const{ymin:s,ymax:o,spatialReference:a}=this,u=this.width,h=this.xmin,f=this.xmax;let p;e=e||vi(a);const[m,y]=e.valid;p=this._normalizeX(this.xmin,e);const _=p.x,v=p.frameId;p=this._normalizeX(this.xmax,e);const w=p.x,S=p.frameId,P=_===w&&u>0;if(u>2*y){const M=new zt(h<f?_:w,s,y,o,a),A=new zt(m,s,h<f?w:_,o,a),I=new zt(0,s,y,o,a),O=new zt(m,s,0,o,a),F=[],$=[];M.contains(I)&&F.push(v),M.contains(O)&&$.push(v),A.contains(I)&&F.push(S),A.contains(O)&&$.push(S);for(let J=v+1;J<S;J++)F.push(J),$.push(J);r.push({extent:M,frameIds:[v]},{extent:A,frameIds:[S]},{extent:I,frameIds:F},{extent:O,frameIds:$})}else _>w||P?r.push({extent:new zt(_,s,y,o,a),frameIds:[v]},{extent:new zt(m,s,w,o,a),frameIds:[S]}):r.push({extent:new zt(_,s,w,o,a),frameIds:[v]});this.cache._parts=r}const i=this.hasZ,n=this.hasM;if(i||n){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),n&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let o=0;o<r.length;o++)r[o].extent.set(s)}return r}_normalizeX(e,r){const[i,n]=r.valid,s=2*n;let o=0,a;return e>n?(a=Math.ceil(Math.abs(e-n)/s),e-=a*s,o=a):e<i&&(a=Math.ceil(Math.abs(e-i)/s),e+=a*s,o=-a),{x:e,frameId:o}}};c([d({readOnly:!0})],He.prototype,"cache",null);c([d({readOnly:!0})],He.prototype,"center",null);c([d({readOnly:!0})],He.prototype,"extent",null);c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],He.prototype,"hasM",null);c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],He.prototype,"hasZ",null);c([d({readOnly:!0})],He.prototype,"height",null);c([d({readOnly:!0})],He.prototype,"width",null);c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],He.prototype,"xmin",void 0);c([d({type:Number,json:{write:!0}})],He.prototype,"ymin",void 0);c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],He.prototype,"mmin",void 0);c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],He.prototype,"zmin",void 0);c([d({type:Number,json:{write:!0}})],He.prototype,"xmax",void 0);c([d({type:Number,json:{write:!0}})],He.prototype,"ymax",void 0);c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],He.prototype,"mmax",void 0);c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],He.prototype,"zmax",void 0);He=zt=c([T("esri.geometry.Extent")],He);He.prototype.toJSON.isDefaultToJSON=!0;const Me=He;let gl;var kv,Lv;const DI=((kv=globalThis.esriConfig)==null?void 0:kv.locale)??((Lv=globalThis.dojoConfig)==null?void 0:Lv.locale);function bS(){var t;return DI??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function gr(){return gl===void 0&&(gl=bS()),gl}const _l=[];function SS(t){return _l.push(t),{remove(){_l.splice(_l.indexOf(t),1)}}}const Gp=[];function Ag(t){return Gp.push(t),{remove(){_l.splice(Gp.indexOf(t),1)}}}function $I(){const t=bS();gl!==t&&(gl=t,[...Gp].forEach(e=>{e.call(null,t)}),[..._l].forEach(e=>{e.call(null,t)}))}var Rv;(Rv=globalThis.addEventListener)==null||Rv.call(globalThis,"languagechange",$I);var zp;const FI=new rt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Yt=zp=class extends z{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){(e==="asc"||e==="desc")&&this._set("sortOrder",e)}clone(){return new zp({categories:this.categories?x(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,r){let i=[];this.categories&&(i=this.categories.map(a=>Array.isArray(a)?JSON.stringify(a):a));let n="";if(this.extent){const a=jd(this.extent,_e.WGS84);a!=null&&(n=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const o={categories:i,bbox:n,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(a=>FI.toJSON(a.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...r,...o}}}};c([d()],Yt.prototype,"categories",void 0);c([d()],Yt.prototype,"disableExtraQuery",void 0);c([d({type:Me})],Yt.prototype,"extent",void 0);c([d()],Yt.prototype,"filter",void 0);c([d()],Yt.prototype,"num",void 0);c([d()],Yt.prototype,"query",void 0);c([d()],Yt.prototype,"sortField",void 0);c([d()],Yt.prototype,"sortOrder",null);c([d()],Yt.prototype,"start",void 0);Yt=zp=c([T("esri.portal.PortalQueryParams")],Yt);const hn=Yt;let Os=class extends z{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Os.prototype,"nextQueryParams",void 0);c([d()],Os.prototype,"queryParams",void 0);c([d()],Os.prototype,"results",void 0);c([d()],Os.prototype,"total",void 0);Os=c([T("esri.portal.PortalQueryResult")],Os);const UI=Os;let Mi=class extends G{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new D("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],Mi.prototype,"created",void 0);c([d()],Mi.prototype,"id",void 0);c([d()],Mi.prototype,"portal",void 0);c([d()],Mi.prototype,"title",void 0);c([d({readOnly:!0})],Mi.prototype,"url",null);c([d()],Mi.prototype,"username",void 0);Mi=c([T("esri.portal.PortalFolder")],Mi);const VI=Mi;let qe=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,r=this.thumbnail;return e&&r&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${r}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return xt(this.portal).request(this.url+"/categorySchema",e).then(r=>{const i=r.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return xt(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let r=this.thumbnailUrl;return r&&e&&(r+=`&w=${e}`),r}toJSON(){throw new D("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,r){let i=je(hn,e);const n=xt(this.portal);return parseFloat(n.currentVersion)>5?(i=i||new hn,n.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",r)):(i=i?i.clone():new hn,i.query="group:"+this.id+(i.query?" "+i.query:""),n.queryItems(i,r))}_fetchCategorySchemaSet(e,r){const i=xt(this.portal);return i.fetchSelf(i.authMode,!0,r).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const o=new hn;return o.disableExtraQuery=!0,o.num=1,o.query=s,i.queryGroups(o,r)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],o=new hn;return o.num=1,o.query=`typekeywords:"${e}"`,s.queryItems(o,r)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",r).then(o=>{const a=o&&o.categorySchema;return a&&a.length?a:[]}):[])}};c([d()],qe.prototype,"access",void 0);c([d({type:Date})],qe.prototype,"created",void 0);c([d()],qe.prototype,"description",void 0);c([d()],qe.prototype,"id",void 0);c([d()],qe.prototype,"isInvitationOnly",void 0);c([d({type:Date})],qe.prototype,"modified",void 0);c([d()],qe.prototype,"owner",void 0);c([d()],qe.prototype,"portal",void 0);c([d()],qe.prototype,"snippet",void 0);c([d()],qe.prototype,"sortField",void 0);c([d()],qe.prototype,"sortOrder",void 0);c([d()],qe.prototype,"tags",void 0);c([d()],qe.prototype,"thumbnail",void 0);c([d({readOnly:!0})],qe.prototype,"thumbnailUrl",null);c([d()],qe.prototype,"title",void 0);c([d({readOnly:!0})],qe.prototype,"url",null);qe=c([T("esri.portal.PortalGroup")],qe);const jp=qe,GI=Object.freeze(Object.defineProperty({__proto__:null,default:jp},Symbol.toStringTag,{value:"Module"}));var Wp;let we=Wp=class extends G{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,r=this.thumbnail;return e&&r?this.portal.normalizeUrl(`${e}/info/${r}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const r=e&&e.item,i=e&&e.data,n=e&&e.folder,s={method:"post"};r&&(s.query=r.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let o=this.userContentUrl;return n&&(o+="/"+(typeof n=="string"?n:n.id)),this.portal.request(o+"/addItem",s).then(a=>(r.id=a.id,r.portal=this.portal,r.loaded?r.reload():r.load()))}deleteItem(e){let r=this.userContentUrl;return e.ownerFolder&&(r+="/"+e.ownerFolder),this.portal.request(r+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const r=this.userContentUrl+"/deleteItems",i=e.map(n=>n.id);if(i.length){const n={method:"post",query:{items:i.join(",")}};return this.portal.request(r,n).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(r=>{let i;return r&&r.folders?i=r.folders.map(n=>{const s=VI.fromJSON(n);return s.portal=this.portal,s}):i=[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let r;return e&&e.groups?r=e.groups.map(i=>{const n=jp.fromJSON(i);return n.portal=this.portal,n}):r=[],r})}fetchItems(e){const r=e??{};let i=this.userContentUrl??"";r.folder&&(i+="/"+r.folder.id);let n;return R(()=>Promise.resolve().then(()=>MS),void 0).then(({default:s})=>{n=s;const o=r.num||10,a=r.start||1,u=r.sortField||"created",h=r.sortOrder||"asc",f={folders:!1,num:o,start:a,sortField:u,sortOrder:h};return this.portal.request(i,{query:f})}).then(s=>{let o;return s&&s.items?(o=s.items.map(a=>{const u=n.fromJSON(a);return u.portal=this.portal,u}),Promise.all(o.map(a=>a.load())).catch(a=>a).then(()=>({items:o,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let r=this.thumbnailUrl;return r&&e&&(r+=`&w=${e}`),r}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new jp({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new D("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new D("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new Wp;return r.sourceJSON=e,r.read(e),r}};c([d()],we.prototype,"access",void 0);c([d({type:Date})],we.prototype,"created",void 0);c([d()],we.prototype,"culture",void 0);c([d()],we.prototype,"description",void 0);c([d()],we.prototype,"email",void 0);c([d()],we.prototype,"favGroupId",void 0);c([d()],we.prototype,"fullName",void 0);c([d({type:Date})],we.prototype,"modified",void 0);c([d()],we.prototype,"orgId",void 0);c([d()],we.prototype,"portal",void 0);c([d()],we.prototype,"preferredView",void 0);c([d()],we.prototype,"privileges",void 0);c([d()],we.prototype,"region",void 0);c([d()],we.prototype,"role",void 0);c([d()],we.prototype,"roleId",void 0);c([d()],we.prototype,"sourceJSON",void 0);c([d()],we.prototype,"thumbnail",void 0);c([d({readOnly:!0})],we.prototype,"thumbnailUrl",null);c([d()],we.prototype,"units",void 0);c([d({readOnly:!0})],we.prototype,"userContentUrl",null);c([d({readOnly:!0})],we.prototype,"url",null);c([d()],we.prototype,"username",void 0);c([d()],we.prototype,"userType",void 0);we=Wp=c([T("esri.portal.PortalUser")],we);const TS=we,zI=Object.freeze(Object.defineProperty({__proto__:null,default:TS},Symbol.toStringTag,{value:"Module"}));var At;let Mf;const D_={PortalGroup:()=>R(()=>Promise.resolve().then(()=>GI),void 0),PortalItem:()=>R(()=>Promise.resolve().then(()=>MS),void 0),PortalUser:()=>R(()=>Promise.resolve().then(()=>zI),void 0)};let L=At=class extends xc(bn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=se.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){$_.unregister(this),this.defaultBasemap=Ce(this.defaultBasemap),this.defaultDevBasemap=Ce(this.defaultDevBasemap),this.defaultVectorBasemap=Ce(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=xe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)se.request.trustedServers.includes(r)||se.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const r=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const r=e.indexOf("/sharing");r>0?e=e.substring(0,r):e=this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,r=this.thumbnail;return e&&r?this._normalizeSSL(e+"/portals/self/resources/"+r):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let r=null;return e&&(r=TS.fromJSON(e),r.portal=this),r}load(e){const r=R(()=>Promise.resolve().then(()=>hO),void 0).then(({default:i})=>{De(e),Mf=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var n;if(ge){const s=ge;this.credential=s.findCredential(this.restUrl),!this.credential&&this.authMode===At.AUTH_MODE_AUTO&&((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",jI(new WeakRef(this))),$_.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),r=(await R(()=>import("./ElevationLayer-fa2d4d21.js"),["assets/ElevationLayer-fa2d4d21.js","assets/MultiOriginJSONSupport-196fcb0e.js","assets/ArcGISCachedService-a33d8e17.js","assets/TilemapCache-e05e6033.js","assets/ByteSizeUnit-c0a244d3.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/ArcGISService-005a73dc.js","assets/OperationalLayer-58eaf5ba.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/lengthUtils-73ca5ae7.js","assets/PortalLayer-235cd1fe.js","assets/portalItemUtils-6670776d.js"])).default;return e?e.map(i=>new r({id:i.id,url:i.url})):[]}fetchBasemaps(e,r){const i=new hn;return i.query=e||(se.apiKey&&pS(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,r).then(n=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',n.total){const s=n.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,r)}return null}).then(n=>{let s;return n&&n.total?s=n.results.filter(o=>o.type==="Web Map").map(o=>new Mf({portalItem:o})):s=[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(r=>r.categorySchema):wr(e)?Promise.reject(Ae()):Promise.resolve([])}fetchFeaturedGroups(e){const r=this.featuredGroups,i=new hn;if(i.num=100,i.sortField="title",r&&r.length){const n=[];for(const s of r)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return wr(e)?Promise.reject(Ae()):Promise.resolve([])}fetchRegions(e){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||gr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:r}})}fetchSettings(e){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||gr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:r}})}static getDefault(){return(!At._default||At._default.destroyed)&&(At._default=new At),At._default}queryGroups(e,r){return this.queryPortal("/community/groups",e,"PortalGroup",r)}queryItems(e,r){return this.queryPortal("/search",e,"PortalItem",r)}queryUsers(e,r){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",r)}fetchSelf(e=this.authMode,r=!1,i){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:gr().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),r&&(s.query.default=!0),this.request(n,s)}queryPortal(e,r,i,n){const s=je(hn,r),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(u=>{const h=s.clone();return h.start=u.nextStart,new UI({nextQueryParams:h,queryParams:s,total:u.total,results:At._resultsToTypedArray(a,{portal:this},u,n)})}).then(u=>Promise.all(u.results.map(h=>typeof h.when=="function"?h.when():u)).then(()=>u,h=>(fb(h),u)));return i&&D_[i]?D_[i]().then(({default:a})=>(De(n),o(a))):o()}signIn(){if(this.authMode===At.AUTH_MODE_ANONYMOUS)return Promise.reject(new D("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=r=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate"))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return ge?ge.getCredential(this.restUrl).then(r=>e(r)):e(this.credential)}normalizeUrl(e){const r=this.credential&&this.credential.token;return this._normalizeSSL(r?e+(e.includes("?")?"&":"?")+"token="+r:e)}requestToTypedArray(e,r,i){return this.request(e,r).then(n=>{const s=At._resultsToTypedArray(i,{portal:this},n);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():n)).then(()=>s,()=>s)})}request(e,r={}){const i={f:"json",...r.query},{authMode:n=this.authMode===At.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:u="json",signal:h}=r,f={authMode:n,body:s,cacheBust:o,method:a,query:i,responseType:u,timeout:0,signal:h};return yt(this._normalizeSSL(e),f).then(p=>p.data)}toJSON(){throw new D("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new At({sourceJSON:e})}_getHelperService(e){const r=this.helperServices&&this.helperServices[e];if(!r)throw new D("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return r}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const r=Mf.fromJSON(e);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(e,r,i,n){let s=[];if(i){const o=n!=null?n.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||r)&&(s=s.map(a=>{const u=Object.assign(e?e.fromJSON(a):a,r);return typeof u.load=="function"&&u.load(o),u}))}else s=[];return s}};L.AUTH_MODE_ANONYMOUS="anonymous";L.AUTH_MODE_AUTO="auto";L.AUTH_MODE_IMMEDIATE="immediate";c([d()],L.prototype,"access",void 0);c([d()],L.prototype,"allSSL",void 0);c([d()],L.prototype,"authMode",void 0);c([d()],L.prototype,"authorizedCrossOriginDomains",void 0);c([fe("authorizedCrossOriginDomains")],L.prototype,"readAuthorizedCrossOriginDomains",null);c([d()],L.prototype,"basemapGalleryGroupQuery",void 0);c([d()],L.prototype,"bingKey",void 0);c([d()],L.prototype,"canListApps",void 0);c([d()],L.prototype,"canListData",void 0);c([d()],L.prototype,"canListPreProvisionedItems",void 0);c([d()],L.prototype,"canProvisionDirectPurchase",void 0);c([d()],L.prototype,"canSearchPublic",void 0);c([d()],L.prototype,"canShareBingPublic",void 0);c([d()],L.prototype,"canSharePublic",void 0);c([d()],L.prototype,"canSignInArcGIS",void 0);c([d()],L.prototype,"canSignInIDP",void 0);c([d()],L.prototype,"colorSetsGroupQuery",void 0);c([d()],L.prototype,"commentsEnabled",void 0);c([d({type:Date})],L.prototype,"created",void 0);c([d()],L.prototype,"credential",void 0);c([d()],L.prototype,"culture",void 0);c([d()],L.prototype,"currentVersion",void 0);c([d()],L.prototype,"customBaseUrl",void 0);c([d()],L.prototype,"defaultBasemap",void 0);c([fe("defaultBasemap")],L.prototype,"readDefaultBasemap",null);c([d()],L.prototype,"defaultDevBasemap",void 0);c([fe("defaultDevBasemap")],L.prototype,"readDefaultDevBasemap",null);c([d({type:Me})],L.prototype,"defaultExtent",void 0);c([d()],L.prototype,"defaultVectorBasemap",void 0);c([fe("defaultVectorBasemap")],L.prototype,"readDefaultVectorBasemap",null);c([d()],L.prototype,"description",void 0);c([d()],L.prototype,"devBasemapGalleryGroupQuery",void 0);c([d()],L.prototype,"eueiEnabled",void 0);c([d({readOnly:!0})],L.prototype,"extraQuery",null);c([d()],L.prototype,"featuredGroups",void 0);c([d()],L.prototype,"featuredItemsGroupQuery",void 0);c([d()],L.prototype,"galleryTemplatesGroupQuery",void 0);c([d()],L.prototype,"livingAtlasGroupQuery",void 0);c([d()],L.prototype,"hasCategorySchema",void 0);c([d()],L.prototype,"helpBase",void 0);c([d()],L.prototype,"helperServices",void 0);c([d()],L.prototype,"helpMap",void 0);c([d()],L.prototype,"homePageFeaturedContent",void 0);c([d()],L.prototype,"homePageFeaturedContentCount",void 0);c([d()],L.prototype,"httpPort",void 0);c([d()],L.prototype,"httpsPort",void 0);c([d()],L.prototype,"id",void 0);c([d()],L.prototype,"ipCntryCode",void 0);c([d({readOnly:!0})],L.prototype,"isOrganization",null);c([d()],L.prototype,"isPortal",void 0);c([d()],L.prototype,"isReadOnly",void 0);c([d({readOnly:!0})],L.prototype,"itemPageUrl",null);c([d()],L.prototype,"layerTemplatesGroupQuery",void 0);c([d()],L.prototype,"maxTokenExpirationMinutes",void 0);c([d({type:Date})],L.prototype,"modified",void 0);c([d()],L.prototype,"name",void 0);c([d()],L.prototype,"portalHostname",void 0);c([d()],L.prototype,"portalMode",void 0);c([d()],L.prototype,"portalProperties",void 0);c([d()],L.prototype,"region",void 0);c([d({readOnly:!0})],L.prototype,"restUrl",null);c([d()],L.prototype,"rotatorPanels",void 0);c([d()],L.prototype,"showHomePageDescription",void 0);c([d()],L.prototype,"sourceJSON",void 0);c([d()],L.prototype,"staticImagesUrl",void 0);c([d({json:{name:"2DStylesGroupQuery"}})],L.prototype,"stylesGroupQuery2d",void 0);c([d({json:{name:"stylesGroupQuery"}})],L.prototype,"stylesGroupQuery3d",void 0);c([d()],L.prototype,"supportsHostedServices",void 0);c([d()],L.prototype,"symbolSetsGroupQuery",void 0);c([d()],L.prototype,"templatesGroupQuery",void 0);c([d()],L.prototype,"thumbnail",void 0);c([d({readOnly:!0})],L.prototype,"thumbnailUrl",null);c([d()],L.prototype,"units",void 0);c([d()],L.prototype,"url",void 0);c([d()],L.prototype,"urlKey",void 0);c([fe("urlKey")],L.prototype,"readUrlKey",null);c([d()],L.prototype,"user",void 0);c([fe("user")],L.prototype,"readUser",null);c([d()],L.prototype,"useStandardizedQuery",void 0);c([d()],L.prototype,"useVectorBasemaps",void 0);c([d()],L.prototype,"vectorBasemapGalleryGroupQuery",void 0);L=At=c([T("esri.portal.Portal")],L);const Pi=L,$_=new FinalizationRegistry(t=>{t.remove()});function jI(t){const e=ge;return()=>{const r=t.deref();r&&e.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}const WI=k.getLogger("esri.assets");function ae(t){if(!se.assetsPath)throw WI.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new D("assets:path-not-set","config.assetsPath is not set");return zd(se.assetsPath,t)}let Ci=class extends z{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){if(e!=null&&kt(e)){k.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative");return}this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",r){const i=this.cdnUrl;if(i==null)throw new D("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:r==null?void 0:r.signal})}async update(e,r){return(await R(()=>import("./resourceUtils-37ba0d44.js"),[])).addOrUpdateResource(this,"update",e,r)}hasPath(){return this.path!=null}_normalizePath(e,r){return e==null?e:(e=e.replace(/^\/+/,""),r!=null&&kt(e)&&(e=gg(e,r.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([d()],Ci.prototype,"portalItem",void 0);c([d({type:String,value:null})],Ci.prototype,"path",null);c([wt("path")],Ci.prototype,"_castPath",null);c([d({type:String,readOnly:!0})],Ci.prototype,"url",null);c([d({type:String,readOnly:!0})],Ci.prototype,"cdnUrl",null);c([d({type:String,readOnly:!0})],Ci.prototype,"itemRelativeUrl",null);Ci=c([T("esri.portal.PortalItemResource")],Ci);const BI=Ci;let Ll=class extends z{constructor(e){super(e),this.created=null,this.rating=null}};c([d()],Ll.prototype,"created",void 0);c([d()],Ll.prototype,"rating",void 0);Ll=c([T("esri.portal.PortalRating")],Ll);const Pf=Ll;var ts;const HI=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),qI=new Set(["KML","GeoJson","CSV"]);let Y=ts=class extends xc(bn){static from(e){return ig(ts,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,r=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=r.includes("Table")?"Table":r.includes("Route Layer")?"Route Layer":r.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=r.includes("Elevation 3D Layer")?"Elevation Layer":r.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=r.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?!r.includes("Spatiotemporal")&&(r.includes("Hosted Service")||r.includes("Tiled"))&&!r.includes("Relational")?i="Tile Layer":i="Map Image Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&r.includes("configurableApp")?i="Instant App":e==="Insights Page"&&(i="Insights Report"),i}readExtent(e){return e&&e.length?new Me(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",r=this.typeKeywords||[],i="esri/images/portal/",n="16";let s=!1,o=!1,a,u=!1,h=!1,f=!1,p=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=r.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=r.includes("Table"),u=r.includes("Route Layer"),h=r.includes("Markup"),f=r.includes("Spatiotemporal"),p=r.includes("UtilityNetwork"),a=f&&o?"spatiotemporaltable":o?"table":u?"routelayer":h?"markup":f?"spatiotemporal":s?"featureshosted":p?"utilitynetwork":"features"):e==="map service"||e==="wms"||e==="wmts"?a=s||r.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?r.includes("Line")?a="sceneweblayerline":r.includes("3DObject")?a="sceneweblayermultipatch":r.includes("Point")?a="sceneweblayerpoint":r.includes("IntegratedMesh")?a="sceneweblayermesh":r.includes("PointCloud")?a="sceneweblayerpointcloud":r.includes("Polygon")?a="sceneweblayerpolygon":r.includes("Building")?a="sceneweblayerbuilding":r.includes("Voxel")?a="sceneweblayervoxel":a="sceneweblayer":e==="image service"?a=r.includes("Elevation 3D Layer")?"elevationlayer":r.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?a="streamlayer":e==="video service"?a="mediaservice":e==="vector tile service"?a="vectortile":e==="datastore catalog service"?a="datastorecollection":e==="geocoding service"?a="geocodeservice":e==="geoprocessing service"?a=r.includes("Web Tool")?"tool":"layers":e==="geodata service"?a="geodataservice":a="layers"):e==="web map"||e==="cityengine web scene"?a="maps":e==="web scene"?a=r.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&r.includes("configurableApp")?a="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?a="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&r.includes("ArcGIS Pro")||e==="explorer map"&&r.indexOf("Explorer Document")?a="mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?a="datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?a="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?a="addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&r.includes("Explorer Mapping Application")||r.includes("Document")?a="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?a="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?a="layersgray":e==="scene package"?a="scenepackage":e==="mobile scene package"?a="mobilescenepackage":e==="tile package"||e==="compact tile package"?a="tilepackage":e==="task file"?a="taskfile":e==="report template"?a="report-template":e==="statistical data collection"?a="statisticaldatacollection":e==="insights workbook"?a="workbook":e==="insights model"?a="insightsmodel":e==="insights page"?a="insightspage":e==="insights theme"?a="insightstheme":e==="hub initiative"?a="hubinitiative":e==="hubpage"?a="hubpage":e==="hub event"?a="hubevent":e==="hub site application"?a="hubsite":e==="hub project"?a="hubproject":e==="relational database connection"?a="relationaldatabaseconnection":e==="big data file share"?a="datastorecollection":e==="image collection"?a="imagecollection":e==="style"?a="style":e==="desktop style"?a="desktopstyle":e==="dashboard"?a="dashboard":e==="raster function template"?a="rasterprocessingtemplate":e==="vector tile package"?a="vectortilepackage":e==="ortho mapping project"?a="orthomappingproject":e==="ortho mapping template"?a="orthomappingtemplate":e==="solution"?a="solutions":e==="geopackage"?a="geopackage":e==="deep learning package"?a="deeplearningpackage":e==="real time analytic"?a="realtimeanalytics":e==="big data analytic"?a="bigdataanalytics":e==="feed"?a="feed":e==="excalibur imagery project"?a="excaliburimageryproject":e==="notebook"?a="notebook":e==="storymap"?a="storymap":e==="survey123 add in"?a="survey123addin":e==="mission"?a="mission":e==="mission report"?a="missionreport":e==="quickcapture project"?a="quickcaptureproject":e==="pro report"?a="proreport":e==="pro report template"?a="proreporttemplate":e==="urban model"?a="urbanmodel":e==="web experience"?a="experiencebuilder":e==="web experience template"?a="webexperiencetemplate":e==="experience builder widget"?a="experiencebuilderwidget":e==="experience builder widget package"?a="experiencebuilderwidgetpackage":e==="workflow"?a="workflow":e==="insights script"?a="insightsscript":e==="kernel gateway connection"?a="kernelgatewayconnection":e==="hub initiative template"?a="hubinitiativetemplate":e==="storymap theme"?a="storymaptheme":e==="knowledge graph"?a="knowledgegraph":e==="native application"?a="nativeapp":e==="native application installer"?a="nativeappinstaller":e==="link chart"?a="linkchart":e==="investigation"?a="investigation":e==="ogcfeatureserver"?a="features":e==="pro project"?a="proproject":e==="insights workbook package"?a="insightsworkbookpackage":e==="apache parquet"?a="apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?a="notebookcodesnippets":e==="suitability model"?a="suitabilitymodel":e==="esri classifier definition"?a="classifierdefinition":e==="esri classification schema"?a="classificationschema":e==="insights data engineering workbook"?a="dataengineeringworkbook":e==="insights data engineering model"?a="dataengineeringmodel":e==="deep learning studio project"?a="deeplearningproject":e==="discussion"?a="discussion":e==="allsource project"?a="allsourceproject":e==="api key"?a="apikey":a="maps",a?ae(i+a+n+".png"):null}get isLayer(){return this.type!=null&&HI.has(this.type)}get itemCdnUrl(){let e=this.itemUrl;return e&&ge&&!ge.findCredential(e)&&(e=ge._normalizeAGOLorgDomain(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}get itemPageUrl(){var r;const e=(r=this.portal)==null?void 0:r.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var r;const e=(r=this.portal)==null?void 0:r.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,r=this.thumbnail;return e&&r?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${r}?f=json`))??null:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const r=this.owner||this.get("portal.user.username");if(!r)return null;const i=this.ownerFolder?`${r}/${this.ownerFolder}`:r;return`${e}/content/users/${i}/items/${this.id}`}load(e){const r=this.portal??(this.portal=Pi.getDefault()),i=r.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?r.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const r={method:"post",query:{}};return e instanceof Pf&&(e=e.rating),e!=null&&!isNaN(e)&&typeof e=="number"&&(r.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",r),new Pf({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:x(this.applicationProxies),avgRating:this.avgRating,categories:x(this.categories),created:x(this.created),culture:this.culture,description:this.description,extent:x(this.extent),groupCategories:x(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:x(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:x(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:x(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:x(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const r=new ts({sourceJSON:this.sourceJSON}).set(e);return r._set("isOrgItem",this.isOrgItem),r}createPostQuery(){var i;const e=this.toJSON();for(const n of["tags","typeKeywords","categories"])e[n]=(i=e[n])==null?void 0:i.join(", ");const{extent:r}=e;return r&&(e.extent=JSON.stringify(r)),e}async deleteRating(){await xt(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",r){return xt(this.portal).request(this.itemUrl+"/data",{responseType:e,...r,query:{token:this.apiKey}})}async fetchRating(e){const r=await xt(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return r.rating!=null?(r.created=new Date(r.created),new Pf(r)):null}fetchRelatedItems(e,r){return xt(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...r},ts)}getThumbnailUrl(e){let r=this.thumbnailUrl;return r&&e&&(r+=`&w=${e}`),r}reload(){return xt(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>xt(this.portal).signIn()).then(()=>{const r=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,r!=null&&(typeof r=="string"?i.query.text=r:typeof r=="object"&&(i.query.text=JSON.stringify(r))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new D("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new D("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:r,itemUrl:i}=this;await xt(r).signIn();const{copyResources:n,folder:s,tags:o,title:a}=e||{},u={method:"post",query:{copyPrivateResources:n==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!n,tags:o==null?void 0:o.join(","),title:a}},{itemId:h}=await r.request(`${i}/copy`,u);return new ts({id:h,portal:r})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const r=e.thumbnail,i=e.filename,n={method:"post"};if(typeof r=="string")ho(r)?n.query={data:r}:n.query={url:Bt(r)},i!=null&&(n.query.filename=i);else{const s=new FormData;i!=null?s.append("file",r,i):s.append("file",r),n.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new D("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},r){return(await R(()=>import("./resourceUtils-37ba0d44.js"),[])).fetchResources(this,e,r)}async addResource(e,r,i){const n=await R(()=>import("./resourceUtils-37ba0d44.js"),[]);return e.portalItem=this,n.addOrUpdateResource(e,"add",r,i)}async removeResource(e,r){const i=await R(()=>import("./resourceUtils-37ba0d44.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new D("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,r)}async removeAllResources(e){return(await R(()=>import("./resourceUtils-37ba0d44.js"),[])).removeAllResources(this,e)}resourceFromPath(e){return new BI({portalItem:this,path:e})}toJSON(){const e=this.extent,r={accessInformation:this.accessInformation,categories:x(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:x(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:x(this.typeKeywords),url:this.url};return jv(r)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ts({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const r in e)r==="tags"&&e[r]!==null&&(e[r]=e[r].join(", ")),r==="typeKeywords"&&e[r]!==null&&(e[r]=e[r].join(", ")),r==="extent"&&e[r]&&(e[r]=JSON.stringify(e[r]));return e}};c([d({type:["private","shared","org","public"]})],Y.prototype,"access",void 0);c([d()],Y.prototype,"accessInformation",void 0);c([d({type:String})],Y.prototype,"apiKey",void 0);c([d({json:{read:{source:"appProxies"}}})],Y.prototype,"applicationProxies",void 0);c([d()],Y.prototype,"avgRating",void 0);c([d()],Y.prototype,"categories",void 0);c([d({type:Date})],Y.prototype,"created",void 0);c([d()],Y.prototype,"culture",void 0);c([d()],Y.prototype,"description",void 0);c([d({readOnly:!0})],Y.prototype,"displayName",null);c([d({type:Me})],Y.prototype,"extent",void 0);c([fe("extent")],Y.prototype,"readExtent",null);c([d()],Y.prototype,"groupCategories",void 0);c([d({readOnly:!0})],Y.prototype,"iconUrl",null);c([d()],Y.prototype,"id",void 0);c([d({readOnly:!0})],Y.prototype,"isLayer",null);c([d({type:Boolean,readOnly:!0})],Y.prototype,"isOrgItem",void 0);c([d()],Y.prototype,"itemControl",void 0);c([d({readOnly:!0})],Y.prototype,"itemPageUrl",null);c([d({readOnly:!0})],Y.prototype,"itemUrl",null);c([d()],Y.prototype,"licenseInfo",void 0);c([d({type:Date})],Y.prototype,"modified",void 0);c([d()],Y.prototype,"name",void 0);c([d()],Y.prototype,"numComments",void 0);c([d()],Y.prototype,"numRatings",void 0);c([d()],Y.prototype,"numViews",void 0);c([d()],Y.prototype,"owner",void 0);c([d()],Y.prototype,"ownerFolder",void 0);c([d({type:Pi})],Y.prototype,"portal",void 0);c([d()],Y.prototype,"screenshots",void 0);c([d()],Y.prototype,"size",void 0);c([d()],Y.prototype,"snippet",void 0);c([d()],Y.prototype,"sourceJSON",void 0);c([d({type:String})],Y.prototype,"sourceUrl",void 0);c([d({type:String})],Y.prototype,"spatialReference",void 0);c([d()],Y.prototype,"tags",void 0);c([d()],Y.prototype,"thumbnail",void 0);c([d({readOnly:!0})],Y.prototype,"thumbnailUrl",null);c([d()],Y.prototype,"title",void 0);c([d()],Y.prototype,"type",void 0);c([d()],Y.prototype,"typeKeywords",void 0);c([d({type:String,json:{read(t,e){var r;if(qI.has(e.type)){const i=(r=this.portal)==null?void 0:r.restUrl;t||(t=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return t}}})],Y.prototype,"url",void 0);c([d({readOnly:!0})],Y.prototype,"userItemUrl",null);Y=ts=c([T("esri.portal.PortalItem")],Y);const ES=Y,MS=Object.freeze(Object.defineProperty({__proto__:null,default:ES},Symbol.toStringTag,{value:"Module"})),F_=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,ZI={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function U_(t){return t in ZI}const el=[],Uo=new Map;Ag(()=>{Uo.clear()});function V_(t){for(const e of Uo.keys())CS(t.pattern,e)&&Uo.delete(e)}function YI(t){return el.includes(t)||(V_(t),el.unshift(t)),{remove(){const e=el.indexOf(t);e>-1&&(el.splice(e,1),V_(t))}}}async function PS(t){const e=gr();Uo.has(t)||Uo.set(t,KI(t,e));const r=Uo.get(t);return r&&await XI.add(r),r}function JI(t){if(!F_.test(t))return null;const e=F_.exec(t);if(e===null)return null;const[,r,i]=e,n=r+(i?"-"+i.toUpperCase():"");return U_(n)?n:U_(r)?r:null}async function KI(t,e){const r=[];for(const i of el)if(CS(i.pattern,t))try{return await i.fetchMessageBundle(t,e)}catch(n){r.push(n)}throw r.length?new D("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:r}):new D("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function CS(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}const XI=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ti())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function QI(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,r=await PS("esri/t9n/basemaps");return r[t]||r[e]}const Bp={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return ae("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return ae("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ae("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ae("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return ae("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ae("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return ae("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return ae("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return ae("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return ae("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return ae("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return ae("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return ae("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return ae("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return ae("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return ae("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},t7={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function r7(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Ig(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function i7(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function n7(t,e){const r=ge==null?void 0:ge.findServerInfo(t);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=t.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${t.substring(0,i)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await yt(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function eO(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function tO(t){return eO(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function rO(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function iO(t){return rO(t)?"effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled:!1}const nO=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),sO=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function oO(t){return t.layerContainerType==="basemap"?nO:t.layerContainerType==="operational-layers"?sO:null}function aO(t,e){if(e.restrictedWebMapWriting){const r=oO(e);return r!=null?r.has(t.type)&&!Ig(t):!0}return!0}function lO(t,e){if(e)if(Ig(t)){const r=Ac("featureCollection.layers",e),i=r&&r[0]&&r[0].layerDefinition;i&&Cf(t,i)}else if(t.type==="stream"){const r=e.layerDefinition=e.layerDefinition||{};Cf(t,r)}else t.type!=="group"&&Cf(t,e)}function Cf(t,e){"maxScale"in t&&(e.maxScale=gh(t.maxScale)??void 0),"minScale"in t&&(e.minScale=gh(t.minScale)??void 0)}function cO(t,e){if(lO(t,e),!!e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=gh(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(Ig(t)){const r=e.featureCollection;r&&(r.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function G_(t,e,r){if(!("write"in t&&t.write))return r&&r.messages&&r.messages.push(new D("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(aO(t,r)){const i={};return t.write(i,r)?i:null}return e!=null&&(e=x(e),cO(t,e)),e}var Uu;let uO=0;const AS="esri.Basemap";let Jt=Uu=class extends xc(bn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+uO++,this.baseLayers=new ee,this.referenceLayers=new ee;const r=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&k.getLogger(this.declaredClass).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>r(n.item)),this.referenceLayers.on("after-add",n=>r(n.item)),this.baseLayers.on("after-remove",n=>i(n.item)),this.referenceLayers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(e=>{k.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const n of e)n.destroy();const r=this.referenceLayers.removeAll();for(const n of r)n.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),e={...e},delete e.resourceInfo),e}set baseLayers(e){this._set("baseLayers",Ts(e,this._get("baseLayers")))}_writeBaseLayers(e,r,i){const n=[];if(!e){r.baseMapLayers=n;return}i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const o=G_(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);o!=null&&n.push(o)}),this.referenceLayers.forEach(s=>{const o=G_(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);o!=null&&(s.type!=="scene"&&(o.isReference=!0),n.push(o))}),r.baseMapLayers=n}set referenceLayers(e){this._set("referenceLayers",Ts(e,this._get("referenceLayers")))}writeTitle(e,r){r.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Hb(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(r=>ih(r)?r.clone():r),referenceLayers:this.referenceLayers.map(r=>ih(r)?r.clone():r)};return this.loaded&&(e.loadStatus="loaded"),new Uu({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r)}write(e,r){return e=e||{},(!r||!r.origin)&&(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=x(i);return n.url&&zr(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&zr(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:i}=this;De(e);const n=[];if(r){const s=r.context?r.context.url:null;if(n.push(this._loadLayersFromJSON(r.data,s,e)),r.data.id&&!r.data.title){const o=r.data.id;n.push(QI(o).then(a=>{a&&this.read({title:a},r.context)}))}}else i&&n.push(this._loadFromItem(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,r,i){const n=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||n&&n.portal||null,o=n&&n.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:a}=await R(()=>import("./layersCreator-06c2b27f.js"),["assets/layersCreator-06c2b27f.js","assets/lazyLayerLoader-eaf04eee.js","assets/portalLayers-4862466d.js","assets/layersLoader-4ed88303.js","assets/fetchService-f23f6a21.js","assets/jsonContext-4b063fc4.js","assets/portalItemUtils-6670776d.js","assets/styleUtils-afa5cc7a.js"]),u=[];if(De(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{origin:o,url:r,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=y=>o==="web-scene"&&y.layerType==="ArcGISSceneServiceLayer"||y.isReference,p=a(this.baseLayers,e.baseMapLayers.filter(y=>!f(y)),h);u.push(p);const m=a(this.referenceLayers,e.baseMapLayers.filter(f),h);u.push(m)}await uo(u)}async _loadFromItem(e,r){const n=await(await e.load(r)).fetchData("json",r),s=Dt(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:e.type==="Web Scene"?"web-scene":"web-map",portal:e.portal||Pi.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Pi.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,r)}static fromId(e){const r=Bp[e];if(r){if(r.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),_h(k.getLogger(AS),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Uu.fromJSON(r)}return null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,r,i){this._writeBaseLayers(t,e,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ee}},writer(t,e,r,i){this._writeBaseLayers(t,e,i)}}}}}})],Jt.prototype,"baseLayers",null);c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Jt.prototype,"id",void 0);c([d({type:ES})],Jt.prototype,"portalItem",void 0);c([d()],Jt.prototype,"referenceLayers",null);c([d({readOnly:!0})],Jt.prototype,"resourceInfo",void 0);c([d({type:_e})],Jt.prototype,"spatialReference",void 0);c([d()],Jt.prototype,"thumbnailUrl",void 0);c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Jt.prototype,"title",void 0);c([de("title")],Jt.prototype,"writeTitle",null);Jt=Uu=c([T(AS)],Jt);const Mh=Jt,hO=Object.freeze(Object.defineProperty({__proto__:null,default:Mh},Symbol.toStringTag,{value:"Module"})),Ph={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function dO(t){return!!Ph[t]||!!Ph[t.toLowerCase()]}function IS(t){return Ph[t]??Ph[t.toLowerCase()]}function o7(t){return[...IS(t)]}function Af(t,e,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?t+(e-t)*i:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}function fO(t,e,r,i=1){const n=(t%360+360)%360/360,s=r<=.5?r*(e+1):r+e-r*e,o=2*r-s;return[Math.round(Af(o,s,n+1/3)*255),Math.round(Af(o,s,n)*255),Math.round(Af(o,s,n-1/3)*255),i]}function a7(t){const e=t.length>5,r=e?8:4,i=(1<<r)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let u;return s&&(u=o&i,o>>=r,a[3]=n*u/255),u=o&i,o>>=r,a[2]=n*u,u=o&i,o>>=r,a[1]=n*u,u=o&i,o>>=r,a[0]=n*u,a}function ba(){return[0,0,0]}function l7(t){return[t[0],t[1],t[2]]}function OS(t,e,r){return[t,e,r]}function c7(t){const e=ba(),r=Math.min(3,t.length);for(let i=0;i<r;++i)e[i]=t[i];return e}function u7(t,e){return new Float64Array(t,e,3)}function pO(){return ba()}function mO(){return OS(1,1,1)}const h7=pO(),d7=mO();let yO=1e-6;function Lc(){return yO}const gO=Math.PI/180,_O=180/Math.PI;function xS(t){return t*gO}function f7(t){return t*_O}function p7(t){const e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function m7(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function y7(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function g7(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function _7(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function w7(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function v7(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function wO(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function b7(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}function vO(t,e){const r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}function S7(t,e){const r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}function T7(t){const e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function E7(t,e){const r=e[0],i=e[1],n=e[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function M7(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function P7(t,e,r){const i=e[0],n=e[1],s=e[2],o=r[0],a=r[1],u=r[2];return t[0]=n*u-s*a,t[1]=s*o-i*u,t[2]=i*a-n*o,t}function C7(t,e,r,i){const n=e[0],s=e[1],o=e[2];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t[2]=o+i*(r[2]-o),t}function A7(t,e,r){const i=e[0],n=e[1],s=e[2];return t[0]=r[0]*i+r[4]*n+r[8]*s+r[12],t[1]=r[1]*i+r[5]*n+r[9]*s+r[13],t[2]=r[2]*i+r[6]*n+r[10]*s+r[14],t}function I7(t,e,r){const i=e[0],n=e[1],s=e[2];return t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8],t}function O7(t,e,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=e[0],u=e[1],h=e[2];let f=n*h-s*u,p=s*a-i*h,m=i*u-n*a,y=n*m-s*p,_=s*f-i*m,v=i*p-n*f;const w=o*2;return f*=w,p*=w,m*=w,y*=2,_*=2,v*=2,t[0]=a+f+y,t[1]=u+p+_,t[2]=h+m+v,t}function x7(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function k7(t,e,r){const i=r[0]-e[0],n=r[1]-e[1],s=r[2]-e[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=i*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const L7=vO,z_=new Float32Array(1);function R7(t){--t;for(let e=1;e<32;e<<=1)t=t|t>>e;return t+1}function Wr(t,e,r){return Math.min(Math.max(t,e),r)}function N7(t){return(t&t-1)===0}function D7(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}function $7(t,e,r){return t+(e-t)*r}function bO(t){return t*Math.PI/180}function kS(t){return 180*t/Math.PI}function F7(t){return Math.acos(Wr(t,-1,1))}function SO(t){return Math.asin(Wr(t,-1,1))}function If(t,e,r=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=r}const Ch=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function TO(t){return Ch.setFloat64(0,t),Ch.getBigInt64(0)}function j_(t){return Ch.setBigInt64(0,t),Ch.getFloat64(0)}const Of=BigInt("1000000");EO(1);function EO(t){t=Math.abs(t);const e=TO(t),r=e<=Of?j_(Of):j_(e-Of);return Math.abs(t-r)}function U7(t){return LS(Math.max(-W_,Math.min(t,W_)))}function LS(t){return z_[0]=t,z_[0]}function V7(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],i=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(If(e,1)&&If(r,1)&&If(i,1))}const W_=LS(34028234663852886e22);function nu(t){return Wr(rg(t),0,255)}function su(t,e,r){return t=Number(t),isNaN(t)?r:t<e?e:t>r?r:t}class Ne{static blendColors(e,r,i,n=new Ne){return n.r=Math.round(e.r+(r.r-e.r)*i),n.g=Math.round(e.g+(r.g-e.g)*i),n.b=Math.round(e.b+(r.b-e.b)*i),n.a=e.a+(r.a-e.a)*i,n._sanitize()}static fromRgb(e,r){const i=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(u=>parseFloat(u)*2.56);return n.length===4&&(a[3]=parseFloat(n[3])),Ne.fromArray(a,r)}return Ne.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Ne.fromArray(fO(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(e,r=new Ne){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const i=e.length===4?4:8,n=(1<<i)-1;let s=+("0x"+e.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=i,r[o]=i===4?17*a:a}),r.a=1,r)}static fromArray(e,r=new Ne){return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(e,r){const i=dO(e)?IS(e):null;return i&&Ne.fromArray(i,r)||Ne.fromRgb(e,r)||Ne.fromHex(e,r)}static fromJSON(e){return e&&new Ne([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return this.r*.299+this.g*.587+this.b*.114>=127}setColor(e){return typeof e=="string"?Ne.fromString(e,this):Array.isArray(e)?Ne.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Ne||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),r=this.g.toString(16),i=this.b.toString(16);return`#${e.length<2?"0"+e:e}${r.length<2?"0"+r:r}${i.length<2?"0"+i:i}`}toCss(e=!1){const r=this.r+", "+this.g+", "+this.b;return e?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Ne.AlphaMode.ALWAYS){const r=nu(this.r),i=nu(this.g),n=nu(this.b);return e===Ne.AlphaMode.ALWAYS||this.a!==1?[r,i,n,nu(this.a*255)]:[r,i,n]}clone(){return new Ne(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|this.a*255}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(su(this.r,0,255)),this.g=Math.round(su(this.g,0,255)),this.b=Math.round(su(this.b,0,255)),this.a=su(this.a,0,1),this}_set(e,r,i,n){this.r=e,this.g=r,this.b=i,this.a=n}}Ne.prototype.declaredClass="esri.Color";(function(t){(function(e){e[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(t.AlphaMode||(t.AlphaMode={}))})(Ne||(Ne={}));const me=Ne;function G7(t){}function MO(t){return()=>t}function te(t,e={}){const r=t instanceof rt?t:new rt(t,e),i={type:(e==null?void 0:e.ignoreUnknown)??!0?r.apiValues:String,json:{type:r.jsonValues,read:e!=null&&e.readOnly?!1:{reader:r.read},write:{writer:r.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(i.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(i.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(i.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(i.nonNullable=e.nonNullable),d(i)}var Hp;let Ah=Hp=class extends G{constructor(e){super(e),this.type="none"}clone(){return new Hp({type:this.type})}};c([te({none:"none",stayAbove:"stay-above"})],Ah.prototype,"type",void 0);Ah=Hp=c([T("esri.ground.NavigationConstraint")],Ah);function RS(t){const e=rg(100*(1-t));return Math.max(0,Math.min(e,100))}function NS(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var qp;let Ai=qp=class extends xc(bn){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ee;const r=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&k.getLogger(this.declaredClass).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>r(n.item)),this.layers.on("after-remove",n=>i(n.item))])}initialize(){this.when().catch(e=>{k.getLogger(this.declaredClass).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const r of e)r.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),e={...e},delete e.resourceInfo),e}set layers(e){this._set("layers",Ts(e,this._get("layers")))}writeLayers(e,r,i,n){const s=[];if(!e){r.layers=s;return}n={...n,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const a=MO(o)(),u={};a.write(u,n)&&s.push(u)}else n&&n.messages&&n.messages.push(new D("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))}),r.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Hb(this,e=>{e(this.layers)})}async queryElevation(e,r){await this.load({signal:r==null?void 0:r.signal});const{ElevationQuery:i}=await R(()=>import("./ElevationQuery-d2ebddb4.js"),[]);De(r);const n=new i,s=this.layers.filter(B_).toArray();return n.queryAll(s,e,r)}async createElevationSampler(e,r){await this.load({signal:r==null?void 0:r.signal});const{ElevationQuery:i}=await R(()=>import("./ElevationQuery-d2ebddb4.js"),[]);De(r);const n=new i,s=this.layers.filter(B_).toArray();return n.createSamplerAll(s,e,r)}clone(){const e={opacity:this.opacity,surfaceColor:x(this.surfaceColor),navigationConstraint:x(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new qp({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r)}_loadFromSource(e){const r=this.resourceInfo;return r?this._loadLayersFromJSON(r.data,r.context,e):Promise.resolve()}_loadLayersFromJSON(e,r,i){const n=r&&r.origin||"web-scene",s=r&&r.portal||null,o=r&&r.url||null;return R(()=>import("./layersCreator-06c2b27f.js"),["assets/layersCreator-06c2b27f.js","assets/lazyLayerLoader-eaf04eee.js","assets/portalLayers-4862466d.js","assets/layersLoader-4ed88303.js","assets/fetchService-f23f6a21.js","assets/jsonContext-4b063fc4.js","assets/portalItemUtils-6670776d.js","assets/styleUtils-afa5cc7a.js"]).then(({populateOperationalLayers:a})=>{De(i);const u=[];if(e.layers&&Array.isArray(e.layers)){const h={context:{origin:n,url:o,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};u.push(a(this.layers,e.layers,h))}return uo(u)}).then(()=>{})}};c([d({json:{read:!1}})],Ai.prototype,"layers",null);c([de("layers")],Ai.prototype,"writeLayers",null);c([d({readOnly:!0})],Ai.prototype,"resourceInfo",void 0);c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ge,read:{reader:NS,source:"transparency"},write:{writer:(t,e)=>{e.transparency=RS(t)},target:"transparency"}}})],Ai.prototype,"opacity",void 0);c([d({type:me,json:{type:[Ge],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ai.prototype,"surfaceColor",void 0);c([d({type:Ah,json:{write:!0}})],Ai.prototype,"navigationConstraint",void 0);Ai=qp=c([T("esri.Ground")],Ai);function PO(t){return t&&"createElevationSampler"in t}function B_(t){return t.type==="elevation"||PO(t)}const Ih=Ai;let qo=class extends ee{constructor(e){super(e),this.getCollections=null}initialize(){this.own(O3(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null){this.removeAll();return}let r=0;for(const i of e)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(e){return new ee(e)}_processCollection(e,r){if(!r)return e;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};c([d()],qo.prototype,"getCollections",void 0);c([d()],qo.prototype,"getChildrenFunction",void 0);c([d()],qo.prototype,"itemFilterFunction",void 0);qo=c([T("esri.core.CollectionFlattener")],qo);const Rl=qo;function CO(t){var e,r;return!!(t!=null&&t.loaded&&((r=(e=tO(t))==null?void 0:e.operations)!=null&&r.supportsEditing)&&(!("editingEnabled"in t)||iO(t)))}const H_=k.getLogger("esri.support.basemapUtils");function AO(){return{}}function IO(t){for(const e in t){const r=t[e];(r==null?void 0:r.destroyed)===!1&&r.destroy(),delete t[e]}}function OO(t,e){let r;if(typeof t=="string"){if(!(t in Bp)){const n=Object.entries(Bp).filter(([s,o])=>se.apiKey&&!o.classic||!se.apiKey&&o.classic&&!o.deprecated).map(([s])=>`"${s}"`).join(", ");return H_.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`),null}e&&(r=e[t]),r||(r=Mh.fromId(t),e&&(e[t]=r))}else r=je(Mh,t);return r!=null&&r.destroyed&&(H_.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function xO(t){return new Rl({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const r=[];return"tables"in e&&r.push(e.tables),"layers"in e&&r.push(e.layers),r},itemFilterFunction:e=>{const r=e.parent;return!!r&&"tables"in r&&r.tables.includes(e)}})}function xf(t){for(const e of t.values())e==null||e.destroy();t.clear()}const q_={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function kO(t){let e=null;if(typeof t=="string")if(t in q_){const r=q_[t];e=new Ih({resourceInfo:{data:{layers:[r]}}})}else k.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=je(Ih,t);return e}function Zo(t,e,r=!1){let{hasM:i,hasZ:n}=t;Array.isArray(e)?e.length===4&&!i&&!n?(i=!0,n=!0):e.length===3&&r&&!i?(n=!0,i=!1):e.length===3&&i&&n&&(i=!1,n=!1):(n=!n&&e.hasZ&&(!i||e.hasM),i=!i&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=i}var Zp;function Z_(t){return(e,r)=>e==null?r:r==null?e:t(e,r)}function LO(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let En=Zp=class extends qn{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,r){if(!e&&!r)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=r):LO(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const n=i.points&&i.points[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const r=new Me,i=this.hasZ,n=this.hasM,s=i?3:2,o=e[0],a=Z_(Math.min),u=Z_(Math.max);let[h,f]=o,[p,m]=o,y,_,v,w;for(let S=0,P=e.length;S<P;S++){const M=e[S],[A,I]=M;if(h=a(h,A),f=a(f,I),p=u(p,A),m=u(m,I),i&&M.length>2){const O=M[2];y=a(y,O),v=u(v,O)}if(n&&M.length>s){const O=M[s];_=a(_,O),w=u(w,O)}}return r.xmin=h,r.ymin=f,r.xmax=p,r.ymax=m,r.spatialReference=this.spatialReference,i?(r.zmin=y,r.zmax=v):(r.zmin=void 0,r.zmax=void 0),n?(r.mmin=_,r.mmax=w):(r.mmin=void 0,r.mmax=void 0),r}writePoints(e,r){r.points=x(this.points)}addPoint(e){return Zo(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:x(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Zp(e)}getPoint(e){if(!this._validateInputs(e))return null;const r=this.points[e],i={x:r[0],y:r[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=r[2],n=3),this.hasM&&(i.m=r[n]),new q(i)}removePoint(e){if(!this._validateInputs(e))return null;const r=new q(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),r}setPoint(e,r){return this._validateInputs(e)?(Zo(this,r),Array.isArray(r)||(r=r.toArray()),this.points[e]=r,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([d({readOnly:!0})],En.prototype,"cache",null);c([d()],En.prototype,"extent",null);c([d({type:[[Number]],json:{write:{isRequired:!0}}})],En.prototype,"points",void 0);c([de("points")],En.prototype,"writePoints",null);En=Zp=c([T("esri.geometry.Multipoint")],En);En.prototype.toJSON.isDefaultToJSON=!0;const Bd=En;function H7(t){const e=[];for(t.reset();t.nextPath();){const r=[];for(;t.nextPoint();)r.push([t.x,t.y]);e.push(r)}return e}function RO(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return e}function DS(t,e){const r=e[0]-t[0],i=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function NO(t,e,r){const i=t[0]+r*(e[0]-t[0]),n=t[1]+r*(e[1]-t[1]);return t.length>2&&e.length>2?[i,n,t[2]+r*(e[2]-t[2])]:[i,n]}function DO(t,e,r,i){const[n,s]=e,[o,a]=r[i],[u,h]=r[i+1],f=u-o,p=h-a,m=n-o,y=s-a,_=f*f+p*p,v=m*f+y*p,w=Math.min(1,Math.max(0,v/_));return t[0]=o+f*w,t[1]=a+p*w,t}function q7(t,e,r){let i=!1,n=1/0,s,o,a,u;for(r.reset();r.nextPath();)if(r.nextPoint())for(s=r.x,o=r.y;r.nextPoint();)a=r.x,u=r.y,o>e!=u>e&&t<(a-s)*(e-o)/(u-o)+s&&(i=!i),n=Math.min(n,$O(t,e,s,o,a,u)),s=a,o=u;return n===0?0:(i?1:-1)*Math.sqrt(n)}function $O(t,e,r,i,n,s){let o=r,a=i,u=n-o,h=s-a;if(u!==0||h!==0){const f=((t-o)*u+(e-a)*h)/(u*u+h*h);f>1?(o=n,a=s):f>0&&(o+=u*f,a+=h*f)}return u=t-o,h=e-a,u*u+h*h}function $S(t,e){return NO(t,e,.5)}function FS(t,e,r){const i=t.length;let n=0,s=0,o=0;for(let a=0;a<i;a++){const u=t[a],h=t[(a+1)%i];let f=2;n+=u[0]*h[1]-h[0]*u[1],u.length>2&&h.length>2&&r&&(s+=u[0]*h[2]-h[0]*u[2],f=3),u.length>f&&h.length>f&&e&&(o+=u[0]*h[f]-h[0]*u[f])}return n<=0&&s<=0&&o<=0}function FO(t){const e=t.length;return e>2&&Od(t[0],t[e-1])}function Z7(t){if("rings"in t&&(UO(t),t.rings.length>0&&!FS(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function UO(t){if("rings"in t)for(const e of t.rings)FO(e)||e.push(e[0].slice())}function Y7(t){if(!t||t.length<3)return 0;let e=0;const r=t.length-1;for(let i=0;i<r;i++)e+=(t[i][0]-t[i+1][0])*(t[i][1]+t[i+1][1]);return e+=(t[r][0]-t[0][0])*(t[r][1]+t[0][1]),-.5*e}function US(t){if(!t||t.numPoints<3)return 0;let e=0,r,i;if(t.seekPathFront(),!t.nextPoint())return 0;r=t.x,i=t.y;const n=r,s=i;for(;t.nextPoint();)e+=(r-t.x)*(i+t.y),r=t.x,i=t.y;return e+=(r-n)*(i+s),-.5*e}function J7(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function VO(t){return t?GO(t.rings,t.hasZ??!1):null}function GO(t,e){if(!t||!t.length)return null;const r=[],i=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=VS(t[s],e,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||e&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=t[0]&&t[0].length?zO(t[0],e):null;if(s)r[0]=s[0],r[1]=s[1],e&&s.length>2&&(r[2]=s[2]);else return null}return r}function VS(t,e,r){let i=0,n=0,s=0,o=0,a=0;const u=t.length?t[0][0]:0,h=t.length?t[0][1]:0,f=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const y=t[m],_=t[(m+1)%t.length],[v,w,S]=y,P=v-u,M=w-h,[A,I,O]=_,F=A-u,$=I-h,J=P*$-F*M;if(o+=J,i+=(P+F)*J,n+=(M+$)*J,e&&y.length>2&&_.length>2){const U=S-f,K=O-f,B=P*K-F*U;s+=(U+K)*B,a+=B}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),e&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[i/(6*o)+u,n/(6*o)+h,o];return e&&(r[4]===r[5]||a===0?(p[3]=(r[4]+r[5])/2,p[4]=0):(p[3]=s/(6*a)+f,p[4]=a)),p}function zO(t,e){const r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let u=0,h=t.length;u<h-1;u++){const f=t[u],p=t[u+1];if(f&&p){r[0]=f[0],r[1]=f[1],i[0]=p[0],i[1]=p[1],e&&f.length>2&&p.length>2&&(r[2]=f[2],i[2]=p[2]);const m=DS(r,i);if(m){n+=m;const y=$S(f,p);s+=m*y[0],o+=m*y[1],e&&y.length>2&&(a+=m*y[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function jO(t){const{hasZ:e,numPaths:r}=t;if(r===0)return null;const i=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=VS(RO(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let u=o[2]-a[2];return u===0&&e&&(u=o[4]-a[4]),u}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){t.reset(),t.nextPath();const o=t.numPoints?WO(t):null;if(o)i[0]=o[0],i[1]=o[1],e&&o.length>2&&(i[2]=o[2]);else return null}return i}function WO(t){const{hasZ:e}=t,r=e?[0,0,0]:[0,0],i=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let u=t.x,h=t.y,f=t.z;for(;t.nextPoint();){const p=t.x,m=t.y,y=t.z;r[0]=u,r[1]=h,i[0]=p,i[1]=m,e&&(r[2]=f,i[2]=y);const _=DS(r,i);if(_){n+=_;const v=$S(r,i);s+=_*v[0],o+=_*v[1],e&&v.length>2&&(a+=_*v[2])}u=p,h=m,f=y}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.numPoints?(t.seekPathFront(),t.nextPoint(),[t.x,t.y]):null}const BO=1e-6;function K7(t){let e=0;for(t.reset();t.nextPath();)e+=US(t);if(e<BO){const n=jO(t);return n?[n[0],n[1]]:null}const r=[0,0];if(t.reset(),!(t.nextPath()&&t.nextPoint()))return null;const i=[t.x,t.y];for(t.reset();t.nextPath();)qO(r,i,t);return r[0]*=1/e,r[1]*=1/e,r[0]+=i[0],r[1]+=i[1],r}const HO=1/3;function qO(t,e,r){if(!t||!r||r.numPoints<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s=r.x-i,o=r.y-n,a=0,u=0,h;for(;r.nextPoint();)a=r.x-i,u=r.y-n,h=HO*.5*(a*o-u*s),t[0]+=h*(s+a),t[1]+=h*(o+u),s=a,o=u;const f=US(r),p=[i,n];return p[0]-=e[0],p[1]-=e[1],p[0]*=f,p[1]*=f,t[0]+=p[0],t[1]+=p[1],t}function Br(t=KO){return[t[0],t[1],t[2],t[3]]}function X7(t){return[t[0],t[1],t[2],t[3]]}function GS(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function Q7(t,e,r,i,n=Br()){return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}function eV(t,e=Br()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function tV(t,e){return new Me({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function rV(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function iV(t,e,r){if(e==null){GS(r,t);return}if("length"in e)Yp(e)?(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r[3]=Math.max(t[3],e[3])):(e.length===2||e.length===3)&&(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[0]),r[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":r[0]=Math.min(t[0],e.xmin),r[1]=Math.min(t[1],e.ymin),r[2]=Math.max(t[2],e.xmax),r[3]=Math.max(t[3],e.ymax);break;case"point":r[0]=Math.min(t[0],e.x),r[1]=Math.min(t[1],e.y),r[2]=Math.max(t[2],e.x),r[3]=Math.max(t[3],e.y);break}}function ZO(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function YO(t){return t[1]>=t[3]?0:t[3]-t[1]}function nV(t){return ZO(t)*YO(t)}function sV(t,e,r){return e>=t[0]&&r>=t[1]&&e<=t[2]&&r<=t[3]}function oV(t,e,r){return e[0]>=t[0]-r&&e[1]>=t[1]-r&&e[0]<=t[2]+r&&e[1]<=t[3]+r}function aV(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function JO(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function lV(t){return t?GS(t,Y_):Br(Y_)}function Yp(t){return t!=null&&t.length===4}function cV(t,e){return!Yp(t)||!Yp(e)?t===e:t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}const Y_=[1/0,1/0,-1/0,-1/0],KO=[0,0,0,0];function zS(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function jS(t){return t.points!==void 0}function WS(t){return t.x!==void 0&&t.y!==void 0}function BS(t){return t.paths!==void 0}function HS(t){return t.rings!==void 0}function qS(t){function e(r,i){return r==null?i:i==null?r:t(r,i)}return e}const fn=qS(Math.min),pn=qS(Math.max);function uV(t,e){return BS(e)?Yo(t,e.paths,!1,!1):HS(e)?Yo(t,e.rings,!1,!1):jS(e)?Og(t,e.points,!1,!1,!1,!1):zS(e)?ZS(t,e):(WS(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function hV(t){t.reset();let e,r,i,n;for(e=i=1/0,r=n=-1/0;t.nextPath();){const s=XO(t);e=Math.min(s[0],e),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return Br([e,i,r,n])}function XO(t){let e,r,i,n;for(e=i=1/0,r=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),i=Math.min(t.y,i),r=Math.max(t.x,r),n=Math.max(t.y,n);return Br([e,i,r,n])}function dV(t,e){return BS(e)?Yo(t,e.paths,!0,!1):HS(e)?Yo(t,e.rings,!0,!1):jS(e)?Og(t,e.points,!0,!1,!0,!1):zS(e)?ZS(t,e,!0,!1,!0,!1):(WS(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Yo(t,e,r,i){const n=r?3:2;if(!e.length||!e[0].length)return null;let[s,o]=e[0][0],[a,u]=e[0][0],h,f,p,m;for(let y=0;y<e.length;y++){const _=e[y];for(let v=0;v<_.length;v++){const w=_[v],[S,P]=w;if(s=fn(s,S),o=fn(o,P),a=pn(a,S),u=pn(u,P),r&&w.length>2){const M=w[2];h=fn(h,M),f=pn(f,M)}if(i&&w.length>n){const M=w[n];p=fn(h,M),m=pn(f,M)}}}return r?i?(t[0]=s,t[1]=o,t[2]=h,t[3]=p,t[4]=a,t[5]=u,t[6]=f,t[7]=m,t.length=8,t):(t[0]=s,t[1]=o,t[2]=h,t[3]=a,t[4]=u,t[5]=f,t.length=6,t):i?(t[0]=s,t[1]=o,t[2]=p,t[3]=a,t[4]=u,t[5]=m,t.length=6,t):(t[0]=s,t[1]=o,t[2]=a,t[3]=u,t.length=4,t)}function ZS(t,e,r,i,n,s){const o=e.xmin,a=e.xmax,u=e.ymin,h=e.ymax;let f=e.zmin,p=e.zmax,m=e.mmin,y=e.mmax;return n?(f=f||0,p=p||0,s?(m=m||0,y=y||0,t[0]=o,t[1]=u,t[2]=f,t[3]=m,t[4]=a,t[5]=h,t[6]=p,t[7]=y,t):(t[0]=o,t[1]=u,t[2]=f,t[3]=a,t[4]=h,t[5]=p,t)):s?(m=m||0,y=y||0,t[0]=o,t[1]=u,t[2]=m,t[3]=a,t[4]=h,t[5]=y,t):(t[0]=o,t[1]=u,t[2]=a,t[3]=h,t)}function Og(t,e,r,i,n,s){const o=r?3:2,a=i&&s,u=r&&n;if(!e.length||!e[0].length)return null;let[h,f]=e[0],[p,m]=e[0],y,_,v,w;for(let S=0;S<e.length;S++){const P=e[S],[M,A]=P;if(h=fn(h,M),f=fn(f,A),p=pn(p,M),m=pn(m,A),u&&P.length>2){const I=P[2];y=fn(y,I),_=pn(_,I)}if(a&&P.length>o){const I=P[o];v=fn(y,I),w=pn(_,I)}}return n?(y=y||0,_=_||0,s?(v=v||0,w=w||0,t[0]=h,t[1]=f,t[2]=y,t[3]=v,t[4]=p,t[5]=m,t[6]=_,t[7]=w,t):(t[0]=h,t[1]=f,t[2]=y,t[3]=p,t[4]=m,t[5]=_,t)):s?(v=v||0,w=w||0,t[0]=h,t[1]=f,t[2]=v,t[3]=p,t[4]=m,t[5]=w,t):(t[0]=h,t[1]=f,t[2]=p,t[3]=m,t)}function QO(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function ex(t){return t.points!==void 0}function tx(t){return t.x!==void 0&&t.y!==void 0}function rx(t){return t.paths!==void 0}function ix(t){return t.rings!==void 0}const xg=[];function YS(t,e,r,i){return{xmin:t,ymin:e,xmax:r,ymax:i}}function JS(t,e,r,i,n,s){return{xmin:t,ymin:e,zmin:r,xmax:i,ymax:n,zmax:s}}function KS(t,e,r,i,n,s){return{xmin:t,ymin:e,mmin:r,xmax:i,ymax:n,mmax:s}}function XS(t,e,r,i,n,s,o,a){return{xmin:t,ymin:e,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function kg(t,e=!1,r=!1){return e?r?XS(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):JS(t[0],t[1],t[2],t[3],t[4],t[5]):r?KS(t[0],t[1],t[2],t[3],t[4],t[5]):YS(t[0],t[1],t[2],t[3])}function fV(t){return t?QO(t)?t:tx(t)?sx(t):ix(t)?QS(t):rx(t)?e2(t):ex(t)?nx(t):null:null}function nx(t){const{hasZ:e,hasM:r,points:i}=t;return kg(Og(xg,i,e??!1,r??!1),e,r)}function sx(t){const{x:e,y:r,z:i,m:n}=t,s=i!=null,o=n!=null;return s?o?XS(e,r,i,n,e,r,i,n):JS(e,r,i,e,r,i):o?KS(e,r,n,e,r,n):YS(e,r,e,r)}function QS(t){const{hasZ:e,hasM:r,rings:i}=t,n=Yo(xg,i,e??!1,r??!1);return n?kg(n,e,r):null}function e2(t){const{hasZ:e,hasM:r,paths:i}=t,n=Yo(xg,i,e??!1,r??!1);return n?kg(n,e,r):null}var Vu;function J_(t){return!Array.isArray(t[0])}let Hr=Vu=class extends qn{static fromExtent(e){const r=e.clone().normalize(),i=e.spatialReference;let n=!1,s=!1;for(const a of r)a.hasZ&&(n=!0),a.hasM&&(s=!0);const o={rings:r.map(a=>{const u=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(n&&a.hasZ){const h=a.zmin+(a.zmax-a.zmin)*.5;for(let f=0;f<u.length;f++)u[f].push(h)}if(s&&a.hasM){const h=a.mmin+(a.mmax-a.mmin)*.5;for(let f=0;f<u.length;f++)u[f].push(h)}return u}),spatialReference:i};return n&&(o.hasZ=!0),s&&(o.hasM=!0),new Vu(o)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,r){let i=null,n,s,o=null;return e&&!Array.isArray(e)?(i=e.rings??null,r||(e.spatialReference?r=e.spatialReference:e.rings||(r=e)),n=e.hasZ,s=e.hasM):i=e,i=i||[],r=r||_e.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),o=i[0]&&i[0][0],o&&(n===void 0&&s===void 0?(n=o.length>2,s=o.length>3):n===void 0?n=s?o.length>3:o.length>2:s===void 0&&(s=n?o.length>3:o.length>2)),{rings:i,spatialReference:r,hasZ:n,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=VO(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const r=new q;return r.x=e[0],r.y=e[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=e[2]),r}get extent(){const{spatialReference:e}=this,r=QS(this);if(!r)return null;const i=new Me(r);return i.spatialReference=e,i}get isSelfIntersecting(){return LI(this.rings)}writeRings(e,r){r.rings=x(this.rings)}addRing(e){if(!e)return;const r=this.rings,i=r.length;if(J_(e)){const n=[];for(let s=0,o=e.length;s<o;s++)n[s]=e[s].toArray();r[i]=n}else r[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Vu;return e.spatialReference=this.spatialReference,e.rings=x(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const r=this.spatialReference,i=e.spatialReference;if(r!=null!=(i!=null)||r!=null&&i!=null&&!r.equals(i)||this.rings.length!==e.rings.length)return!1;const n=([s,o,a,u],[h,f,p,m])=>s===h&&o===f&&(a==null&&p==null||a===p)&&(u==null&&m==null||u===m);for(let s=0;s<this.rings.length;s++){const o=this.rings[s],a=e.rings[s];if(!Od(o,a,n))return!1}return!0}contains(e){if(!e)return!1;const r=jd(e,this.spatialReference);return gS(this,r??e)}isClockwise(e){let r;return J_(e)?r=e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):r=e,FS(r,this.hasM,this.hasZ)}getPoint(e,r){if(!this._validateInputs(e,r))return null;const i=this.rings[e][r],n=this.hasZ,s=this.hasM;return n&&!s?new q(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new q(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new q(i[0],i[1],i[2],i[3],this.spatialReference):new q(i[0],i[1],this.spatialReference)}insertPoint(e,r,i){return this._validateInputs(e,r,!0)?(Zo(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(r,0,i),this.notifyChange("rings"),this):this}removePoint(e,r){if(!this._validateInputs(e,r))return null;const i=new q(this.rings[e].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const r=this.rings.splice(e,1)[0],i=this.spatialReference,n=r.map(s=>new q(s,i));return this.notifyChange("rings"),n}setPoint(e,r,i){return this._validateInputs(e,r)?(Zo(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][r]=i,this.notifyChange("rings"),this):this}_validateInputs(e,r,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(r!=null){const n=this.rings[e];if(i&&(r<0||r>n.length)||!i&&(r<0||r>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Hr.prototype,"cache",null);c([d({readOnly:!0})],Hr.prototype,"centroid",null);c([d({readOnly:!0})],Hr.prototype,"extent",null);c([d({readOnly:!0})],Hr.prototype,"isSelfIntersecting",null);c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Hr.prototype,"rings",void 0);c([de("rings")],Hr.prototype,"writeRings",null);Hr=Vu=c([T("esri.geometry.Polygon")],Hr);Hr.prototype.toJSON.isDefaultToJSON=!0;const Rc=Hr;var Jp;function ox(t){return!Array.isArray(t[0])}let Mn=Jp=class extends qn{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,r){let i=null,n,s,o=null;return e&&!Array.isArray(e)?(i=e.paths??null,r||(e.spatialReference?r=e.spatialReference:e.paths||(r=e)),n=e.hasZ,s=e.hasM):i=e,i=i||[],r=r||_e.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),o=i[0]&&i[0][0],o&&(n===void 0&&s===void 0?(n=o.length>2,s=!1):n===void 0?n=!s&&o.length>3:s===void 0&&(s=!n&&o.length>3)),{paths:i,spatialReference:r,hasZ:n,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,r=e2(this);if(!r)return null;const i=new Me(r);return i.spatialReference=e,i}writePaths(e,r){r.paths=x(this.paths)}addPath(e){if(!e)return;const r=this.paths,i=r.length;if(ox(e)){const n=[];for(let s=0,o=e.length;s<o;s++)n[s]=e[s].toArray();r[i]=n}else r[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Jp;return e.spatialReference=this.spatialReference,e.paths=x(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,r){if(!this._validateInputs(e,r))return null;const i=this.paths[e][r],n=this.hasZ,s=this.hasM;return n&&!s?new q(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new q(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new q(i[0],i[1],i[2],i[3],this.spatialReference):new q(i[0],i[1],this.spatialReference)}insertPoint(e,r,i){return this._validateInputs(e,r,!0)?(Zo(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(r,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const r=this.paths.splice(e,1)[0],i=this.spatialReference,n=r.map(s=>new q(s,i));return this.notifyChange("paths"),n}removePoint(e,r){if(!this._validateInputs(e,r))return null;const i=new q(this.paths[e].splice(r,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,r,i){return this._validateInputs(e,r)?(Zo(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][r]=i,this.notifyChange("paths"),this):this}_validateInputs(e,r,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(r!=null){const n=this.paths[e];if(i&&(r<0||r>n.length)||!i&&(r<0||r>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Mn.prototype,"cache",null);c([d({readOnly:!0})],Mn.prototype,"extent",null);c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Mn.prototype,"paths",void 0);c([de("paths")],Mn.prototype,"writePaths",null);Mn=Jp=c([T("esri.geometry.Polyline")],Mn);Mn.prototype.toJSON.isDefaultToJSON=!0;const Sa=Mn,yV=Mt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),gV=Mt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function t2(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function r2(t){return t.points!==void 0}function i2(t){return t.x!==void 0&&t.y!==void 0}function n2(t){return t.paths!==void 0}function s2(t){return t.rings!==void 0}function vr(t){return t==null?null:t instanceof qn?t:i2(t)?q.fromJSON(t):n2(t)?Sa.fromJSON(t):s2(t)?Rc.fromJSON(t):r2(t)?Bd.fromJSON(t):t2(t)?Me.fromJSON(t):null}function Lg(t){return t?i2(t)?"esriGeometryPoint":n2(t)?"esriGeometryPolyline":s2(t)?"esriGeometryPolygon":t2(t)?"esriGeometryEnvelope":r2(t)?"esriGeometryMultipoint":null:null}const ax={esriGeometryPoint:q,esriGeometryPolyline:Sa,esriGeometryPolygon:Rc,esriGeometryEnvelope:Me,esriGeometryMultipoint:Bd};function lx(t){return t&&ax[t]||null}const Rg={base:qn,key:"type",typeMap:{extent:Me,multipoint:Bd,point:q,polyline:Sa,polygon:Rc}};bs(Rg);let o2=0;const Ng=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+o2++})}};return e=c([T("esri.core.Identifiable")],e),e},Dg=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:o2++})}};return e=c([T("esri.core.NumericIdentifiable")],e),e};let K_=class extends Ng(class{}){};K_=c([T("esri.core.Identifiable")],K_);async function cx(t){const e="portalItem"in t?t:{portalItem:t},r=await R(()=>import("./portalLayers-4862466d.js"),["assets/portalLayers-4862466d.js","assets/lazyLayerLoader-eaf04eee.js","assets/layersLoader-4ed88303.js","assets/fetchService-f23f6a21.js","assets/jsonContext-4b063fc4.js","assets/portalItemUtils-6670776d.js","assets/styleUtils-afa5cc7a.js"]);try{return await r.fromItem(e)}catch(i){const n=e&&e.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||se.portalUrl;throw k.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",i),i}}let ux=0,Ze=class extends Hn.EventedMixin(Ng(bn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Me(-180,-90,180,90,_e.WGS84),this.id=Date.now().toString(16)+"-layer-"+ux++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=_e.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const r=typeof e=="string"?{url:e}:e;return(await R(()=>import("./arcgisLayers-da69af6f.js"),["assets/arcgisLayers-da69af6f.js","assets/fetchService-f23f6a21.js","assets/lazyLayerLoader-eaf04eee.js"])).fromUrl(r)}static fromPortalItem(e){return cx(e)}initialize(){this.when().catch(e=>{Gi(e)||k.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,r=this.parent;"layers"in r&&r.layers.includes(e)?r.layers.remove(e):"tables"in r&&r.tables.includes(e)?r.tables.remove(e):"baseLayers"in r&&r.baseLayers.includes(e)?r.baseLayers.remove(e):"baseLayers"in r&&r.referenceLayers.includes(e)&&r.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Dt(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await yt(e,{query:{f:"json"},responseType:"json"})).data;throw new D("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Ze.prototype,"attributionDataUrl",void 0);c([d({type:Me})],Ze.prototype,"fullExtent",void 0);c([d({readOnly:!0})],Ze.prototype,"hasAttributionData",null);c([d({type:String,clonable:!1})],Ze.prototype,"id",void 0);c([d({type:Boolean,nonNullable:!0})],Ze.prototype,"legendEnabled",void 0);c([d({type:["show","hide","hide-children"]})],Ze.prototype,"listMode",void 0);c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Ze.prototype,"opacity",void 0);c([d({clonable:!1})],Ze.prototype,"parent",void 0);c([d({readOnly:!0})],Ze.prototype,"parsedUrl",null);c([d({type:Boolean})],Ze.prototype,"popupEnabled",void 0);c([d({type:Boolean})],Ze.prototype,"attributionVisible",void 0);c([d({type:_e})],Ze.prototype,"spatialReference",void 0);c([d({type:String})],Ze.prototype,"title",void 0);c([d({readOnly:!0,json:{read:!1}})],Ze.prototype,"type",void 0);c([d()],Ze.prototype,"url",void 0);c([d({type:Boolean,nonNullable:!0})],Ze.prototype,"visible",void 0);Ze=c([T("esri.layers.Layer")],Ze);const hx=Ze;function Kp(t,e,r){let i,n;if(t)for(let s=0,o=t.length;s<o;s++){if(i=t.getItemAt(s),i[e]===r)return i;if((i==null?void 0:i.type)==="group"&&(n=Kp(i.layers,e,r),n))return n}}const dx=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ee;const n=a=>{a.parent&&"remove"in a.parent&&a.parent.remove(a)},s=a=>{a.parent=this,this.layerAdded(a),(a.type==="elevation"||a.type==="base-elevation")&&k.getLogger(this.declaredClass).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>n(a.item)),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const i=this.layers.toArray();for(const n of i)n.destroy();this.layers.destroy()}set layers(i){this._set("layers",Ts(i,this._get("layers")))}add(i,n){const s=this.layers;if(n=s.getNextIndex(n),i instanceof hx){const o=i;o.parent===this?this.reorder(o,n):s.add(o,n)}else zi(i)?i.then(o=>{this.destroyed||this.add(o,n)}):k.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const s=this.layers;let o=s.getNextIndex(n);i.slice().forEach(a=>{if(a.parent===this){this.reorder(a,o);return}s.add(a,o),o=o+1})}findLayerById(i){return Kp(this.layers,"id",i)}findLayerByUid(i){return Kp(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return c([d()],e.prototype,"layers",null),e=c([T("esri.support.LayersMixin")],e),e};function Xp(t,e,r){if(t)for(let i=0,n=t.length;i<n;i++){const s=t.getItemAt(i);if(s[e]===r)return s;if((s==null?void 0:s.type)==="group"){const o=Xp(s.tables,e,r);if(o)return o}}}const fx=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ee,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&k.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",Ts(i,this._get("tables")))}findTableById(i){return Xp(this.tables,"id",i)}findTableByUid(i){return Xp(this.tables,"uid",i)}};return c([d()],e.prototype,"tables",null),e=c([T("esri.support.TablesMixin")],e),e};let qr=class extends fx(dx(Hn.EventedMixin(z))){constructor(e){super(e),this.allLayers=new Rl({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=xO(this),this.basemap=null,this.editableLayers=new Rl({getCollections:()=>[this.allLayers],itemFilterFunction:CO}),this.ground=new Ih,this._basemapCache=AO()}destroy(){var e,r;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(r=this.basemap)==null||r.destroy(),IO(this._basemapCache),this._basemapCache=null}castBasemap(e){return OO(e,this._basemapCache)}castGround(e){const r=kO(e);return r??this._get("ground")}findLayerById(e){return this.allLayers.find(r=>r.id===e)}findTableById(e){return this.allTables.find(r=>r.id===e)}};c([d({readOnly:!0,dependsOn:[]})],qr.prototype,"allLayers",void 0);c([d({readOnly:!0})],qr.prototype,"allTables",void 0);c([d({type:Mh})],qr.prototype,"basemap",void 0);c([wt("basemap")],qr.prototype,"castBasemap",null);c([d({readOnly:!0})],qr.prototype,"editableLayers",void 0);c([d({type:Ih,nonNullable:!0})],qr.prototype,"ground",void 0);c([wt("ground")],qr.prototype,"castGround",null);qr=c([T("esri.Map")],qr);const a2=qr,Zn=t=>{let e=class extends t{clone(){var f;const i=xt(bi(this),"unable to clone instance of non-accessor class"),n=i.metadatas,s=i.store,o={},a=new Map;for(const p in n){const m=n[p],y=s==null?void 0:s.originOf(p),_=m.clonable;if(m.readOnly||_===!1||y!==le.USER&&y!==le.DEFAULTS&&y!==le.WEB_MAP&&y!==le.WEB_SCENE)continue;const v=this[p];let w=null;typeof _=="function"?w=_(v):_==="reference"?w=v:w=_p(v),!(v!=null&&w==null)&&(y===le.DEFAULTS?a.set(p,w):o[p]=w)}const u=Object.getPrototypeOf(this).constructor,h=new u(o);if(a.size){const p=(f=bi(h))==null?void 0:f.store;if(p)for(const[m,y]of a)p.set(m,y,le.DEFAULTS)}return h}};return e=c([T("esri.core.Clonable")],e),e};let X_=class extends Zn(z){};X_=c([T("esri.core.Clonable")],X_);var ys;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(ys||(ys={}));function px(t,e){switch(t.type){case"range":{const r="range"in t?t.range[0]:t.minValue,i="range"in t?t.range[1]:t.maxValue;if(r!=null&&+e<r||i!=null&&+e>i)return ys.VALUE_OUT_OF_RANGE;break}case"coded-value":if(t.codedValues==null||t.codedValues.every(r=>r==null||r.code!==e))return ys.INVALID_CODED_VALUE;break;case"codedValue":if(t.codedValues==null||t.codedValues.every(r=>r==null||r.code!==e))return ys.INVALID_CODED_VALUE;break}return null}const mx=k.getLogger("esri.support.arcadeOnDemand");let kf;function l2(){return kf||(kf=(async()=>{const t=await R(()=>import("./arcadeUtils-a5d9675e.js").then(e=>e.ax),["assets/arcadeUtils-a5d9675e.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/FieldsIndex-58671a99.js","assets/number-d8768a5d.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/sizeVariableUtils-2914222a.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),kf}const CV=(t,e,r)=>Nc.create(t,e,r,null,["$feature"]),AV=(t,e,r)=>Nc.create(t,e,r,null,["$feature","$view"]),IV=(t,e,r,i)=>Nc.create(t,e,r,i,["$feature","$view"]);class Nc{constructor(e,r,i,n,s,o,a){this.script=e,this.evaluate=n;const u=Array.isArray(o)?o:o.fields;this.fields=u,this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,r,i,n,s,o){const{arcade:a,Feature:u,Dictionary:h}=await l2(),f=_e.fromJSON(r);let p;try{p=a.parseScript(e,o)}catch($){return mx.error(new D("arcade-bad-expression","Failed to parse arcade script",{script:e,error:$})),null}const m=s.reduce(($,J)=>({...$,[J]:null}),{});let y=null;n!=null&&(y=new h(n),y.immutable=!0,m.$config=null);const _=a.scriptUsesGeometryEngine(p),v=_&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),S=a.scriptIsAsync(p),P=S&&a.enableAsyncSupport(),M={vars:m,spatialReference:f,useAsync:!!P};await Promise.all([v,w,P]);const A=new Set;await a.loadDependentModules(A,p,null,S,_);const I=new h;I.immutable=!1,I.setField("scale",0);const O=a.compileScript(p,M),F=$=>("$view"in $&&$.$view&&(I.setField("scale",typeof $.$view=="object"&&"scale"in $.$view?$.$view.scale:void 0),$.$view=I),y&&($.$config=y),O({vars:$,spatialReference:f}));return new Nc(e,a,p,F,new u,i,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}const yx=/^([0-9])/,gx=/[^a-z0-9_\u0080-\uffff]/gi,_x=/_{2,}/g,wx=/^_/,vx=/_$/;function OV(t){return t==null?null:t.trim().replace(gx,"_").replace(_x,"_").replace(wx,"").replace(vx,"").replace(yx,"F$1")||null}const bx=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Sx=["field","normalizationField"];function xV(t,e){if(!(t==null||e==null)){for(const r of Array.isArray(t)?t:[t])if(Q_(bx,r,e),!(!("visualVariables"in r)||!r.visualVariables))for(const i of r.visualVariables)Q_(Sx,i,e)}}function Q_(t,e,r){if(t)for(const i of t){const n=Ac(i,e),s=n&&typeof n!="function"&&r.get(n);s&&_a(i,s.name,e)}}function kV(t,e){var r;if(!(t==null||!((r=e==null?void 0:e.fields)!=null&&r.length)))if("startField"in t){const i=e.get(t.startField),n=e.get(t.endField);t.startField=(i==null?void 0:i.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const i=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(i==null?void 0:i.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const Lf=new Set;function Tx(t,e){return!t||!e?[]:(Lf.clear(),Nl(Lf,t,e),Array.from(Lf).sort())}function Nl(t,e,r){var i;if(r){if(!((i=e==null?void 0:e.fields)!=null&&i.length)){if(r.includes("*")){t.clear(),t.add("*");return}for(const n of r)n!=null&&t.add(n);return}if(r.includes("*")){for(const{name:n}of e.fields)t.add(n);return}for(const n of r)Hd(t,e,n)}}function Hd(t,e,r){if(typeof r=="string")if(e){const i=e.get(r);i&&t.add(i.name)}else t.add(r)}function LV(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(r=>r.name):e}async function xs(t,e,r){var s;if(!r)return;const{arcadeUtils:i}=await l2(),n=i.extractFieldNames(r,(s=e==null?void 0:e.fields)==null?void 0:s.map(o=>o.name));for(const o of n)Hd(t,e,o)}async function c2(t,e,r){if(r&&r!=="1=1"){const n=(await R(()=>import("./WhereClause-741374f4.js").then(s=>s.c),["assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js"])).WhereClause.create(r,e);if(!n.isStandardized)throw new D("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Nl(t,e,n.fieldNames)}}function RV({displayField:t,fields:e}){return t||(!e||!e.length?null:Rf(e,"name-or-title")||Rf(e,"unique-identifier")||Rf(e,"type-or-category")||Ex(e))}function Ex(t){for(const e of t){if(!e||!e.name)continue;const r=e.name.toLowerCase();if(r.includes("name")||r.includes("title"))return e.name}return null}function Rf(t,e){for(const r of t)if(!(!r||!r.valueType)&&r.valueType===e)return r.name;return null}async function NV(t,e){var i;if(!e)return;const r=(i=e.elevationInfo)==null?void 0:i.featureExpressionInfo;if(r)return r.collectRequiredFields(t,e.fieldsIndex)}function Mx(t,e,r){r.onStatisticExpression?xs(t,e,r.onStatisticExpression.expression):t.add(r.onStatisticField)}async function DV(t,e,r){if(!e||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(Px(t,e,n)),r.fields&&i.push(...r.fields.map(async s=>Mx(t,e.fieldsIndex,s))),await Promise.all(i)}async function Px(t,e,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>xs(t,e.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(xs(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function $V(t,e,r){e&&(e.timeInfo&&r!=null&&r.timeExtent&&Nl(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Nl(t,e.fieldsIndex,[e.floorInfo.floorField]),r!=null&&r.where!=null&&await c2(t,e.fieldsIndex,r.where))}async function FV(t,e,r){!e||!r||await Promise.all(r.map(i=>Cx(t,e,i)))}async function Cx(t,e,r){!e||!r||(r.valueExpression?await xs(t,e.fieldsIndex,r.valueExpression):r.field&&Hd(t,e.fieldsIndex,r.field))}function UV(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?Tx(t.fieldsIndex,[e.creatorField,e.creationDateField,e.editorField,e.editDateField]):[]}async function VV(t,e){const{labelingInfo:r,fieldsIndex:i}=e;!r||!r.length||await Promise.all(r.map(n=>Ax(t,i,n)))}async function Ax(t,e,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await xs(t,e,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Hd(t,e,o.slice(1,-1))})}await c2(t,e,n)}function GV(t){const e=t.defaultValue;if(e!==void 0&&d2(t,e))return e;if(t.nullable)return null}function u2(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Ix(t){return t===null||u2(t)}const $g=(()=>"isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t)();function Ox(t){return t===null||$g(t)}function h2(t){return t!=null&&typeof t=="string"}function xx(t){return t===null||h2(t)}function kx(){return!0}function d2(t,e){let r;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=t.nullable?Ox:$g;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=t.nullable?Ix:u2;break;case"string":case"esriFieldTypeString":r=t.nullable?xx:h2;break;default:r=kx}return arguments.length===1?r:r(e)}const Lx=["integer","small-integer","single","double"],Rx=new Set([...Lx,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function Nx(t){return t!=null&&Rx.has(t.type)}function zV(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}var Oh;(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Oh||(Oh={}));var xh;(function(t){t.INVALID_TYPE="type-validation-error::invalid-type"})(xh||(xh={}));function jV(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function WV(t,e){return t==null||t.nullable&&e===null?null:Nx(t)&&!Dx(t.type,Number(e))?Oh.OUT_OF_RANGE:d2(t,e)?t.domain?px(t.domain,e):null:xh.INVALID_TYPE}function Dx(t,e){const r=typeof t=="string"?f2(t):t;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?$g(e)&&e>=i&&e<=n:e>=i&&e<=n}function f2(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return $x;case"esriFieldTypeInteger":case"integer":return Fx;case"esriFieldTypeBigInteger":case"big-integer":return Ux;case"esriFieldTypeSingle":case"single":return Vx;case"esriFieldTypeDouble":case"double":return Gx}}const $x={min:-32768,max:32767,isInteger:!0},Fx={min:-2147483648,max:2147483647,isInteger:!0},Ux={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},Vx={min:-34e37,max:12e37,isInteger:!1},Gx={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function BV(t,e,r){switch(t){case ys.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case ys.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case xh.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case Oh.OUT_OF_RANGE:{const{min:i,max:n}=f2(e.type);return`Value ${r} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${i} to ${n}`}}}function HV(t,e){return!zx(t,e,null)}function zx(t,e,r){if(!e||!e.attributes||!t){if(r!=null)for(const s of t??[])r.add(s);return!0}const i=e.attributes;let n=!1;for(const s of t)if(!(s in i))if(n=!0,r!=null)r.add(s);else break;return n}function qV(t){return t?["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e)):!1}let kh=class extends G{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],kh.prototype,"type",void 0);kh=c([T("esri.popup.content.Content")],kh);const Yn=kh;var Qp;let ks=Qp=class extends Yn{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Qp({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],ks.prototype,"description",void 0);c([d({type:["auto","preview","list"],json:{write:!0}})],ks.prototype,"displayType",void 0);c([d({type:String,json:{write:!0}})],ks.prototype,"title",void 0);c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ks.prototype,"type",void 0);ks=Qp=c([T("esri.popup.content.AttachmentsContent")],ks);const Lh=ks;var em;let Ls=em=class extends Yn{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new em({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?x(this.outFields):null})}};c([d()],Ls.prototype,"creator",void 0);c([d()],Ls.prototype,"destroyer",void 0);c([d()],Ls.prototype,"outFields",void 0);c([d({type:["custom"],readOnly:!0})],Ls.prototype,"type",void 0);Ls=em=c([T("esri.popup.content.CustomContent")],Ls);const jx=Ls;var tm;let Jo=tm=class extends G{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new tm({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],Jo.prototype,"title",void 0);c([d({type:String,json:{write:!0}})],Jo.prototype,"expression",void 0);c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Jo.prototype,"returnType",void 0);Jo=tm=c([T("esri.popup.ElementExpressionInfo")],Jo);const Wx=Jo;var rm;let Dl=rm=class extends Yn{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new rm({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([d({type:Wx,json:{write:!0}})],Dl.prototype,"expressionInfo",void 0);c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Dl.prototype,"type",void 0);Dl=rm=c([T("esri.popup.content.ExpressionContent")],Dl);const Fg=Dl,$l=Mt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});$l.toJSON.bind($l);$l.fromJSON.bind($l);const Lr={year:"numeric",month:"numeric",day:"numeric"},Da={year:"numeric",month:"long",day:"numeric"},$a={year:"numeric",month:"short",day:"numeric"},Fa={year:"numeric",month:"long",weekday:"long",day:"numeric"},jt={hour:"numeric",minute:"numeric"},ir={...jt,second:"numeric"},Ug={"short-date":Lr,"short-date-short-time":{...Lr,...jt},"short-date-short-time-24":{...Lr,...jt,hour12:!1},"short-date-long-time":{...Lr,...ir},"short-date-long-time-24":{...Lr,...ir,hour12:!1},"short-date-le":Lr,"short-date-le-short-time":{...Lr,...jt},"short-date-le-short-time-24":{...Lr,...jt,hour12:!1},"short-date-le-long-time":{...Lr,...ir},"short-date-le-long-time-24":{...Lr,...ir,hour12:!1},"long-month-day-year":Da,"long-month-day-year-short-time":{...Da,...jt},"long-month-day-year-short-time-24":{...Da,...jt,hour12:!1},"long-month-day-year-long-time":{...Da,...ir},"long-month-day-year-long-time-24":{...Da,...ir,hour12:!1},"day-short-month-year":$a,"day-short-month-year-short-time":{...$a,...jt},"day-short-month-year-short-time-24":{...$a,...jt,hour12:!1},"day-short-month-year-long-time":{...$a,...ir},"day-short-month-year-long-time-24":{...$a,...ir,hour12:!1},"long-date":Fa,"long-date-short-time":{...Fa,...jt},"long-date-short-time-24":{...Fa,...jt,hour12:!1},"long-date-long-time":{...Fa,...ir},"long-date-long-time-24":{...Fa,...ir,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":jt,"long-time":ir},Fl=Mt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Fl.apiValues;Fl.toJSON.bind(Fl);Fl.fromJSON.bind(Fl);const Bx={ar:"ar-u-nu-latn-ca-gregory"};let im=new WeakMap,p2=Ug["short-date-short-time"];Ag(()=>{im=new WeakMap,p2=Ug["short-date-short-time"]});function Hx(t){const e=t||p2;let r=im.get(e);if(!r){const i=gr(),n=Bx[gr()]||i;r=new Intl.DateTimeFormat(n,e),im.set(e,r)}return r}function qx(t){return t?Ug[t]:null}function Ul(t,e){return Hx(e).format(t)}const Zx={ar:"ar-u-nu-latn"};let Gu=new WeakMap,m2={};Ag(()=>{Gu=new WeakMap,m2={}});function Yx(t){const e=t||m2;if(!Gu.has(e)){const r=gr(),i=Zx[gr()]||r;Gu.set(e,new Intl.NumberFormat(i,t))}return Gu.get(e)}function Jx(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Vl(t,e){return Object.is(t,-0)&&(t=0),Yx(e).format(t)}var nm;let Rs=nm=class extends G{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new nm({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Ul(e,{...qx(this.dateFormat),...this.dateTimeFormatOptions}):Vl(e,Jx(this))}formatRasterPixelValue(e){if(e.includes("-"))return e;let r,i;return e.trim().includes(",")?(r=",",i=r+" ",this._formatDelimitedString(e,r,i,this)):e.trim().includes(";")?(r=";",i=r+" ",this._formatDelimitedString(e,r,i,this)):e.trim().includes(" ")?(r=i=" ",this._formatDelimitedString(e,r,i,this)):this.format(Number(e))}_formatDelimitedString(e,r,i,n){return!e||!r||!i||!n?e:e.trim().split(r).map(s=>this.format(Number(s))).join(i)}};c([te($l)],Rs.prototype,"dateFormat",void 0);c([d({type:Object,json:{read:!1}})],Rs.prototype,"dateTimeFormatOptions",void 0);c([d({type:Boolean,json:{write:!0}})],Rs.prototype,"digitSeparator",void 0);c([d({type:Ge,json:{write:!0}})],Rs.prototype,"places",void 0);Rs=nm=c([T("esri.popup.support.FieldInfoFormat")],Rs);const Kx=Rs;var sm;let br=sm=class extends G{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new sm({fieldName:this.fieldName,format:this.format?x(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],br.prototype,"fieldName",void 0);c([d({type:Kx,json:{write:!0}})],br.prototype,"format",void 0);c([d({type:Boolean,json:{write:!0,default:!1}})],br.prototype,"isEditable",void 0);c([d({type:String,json:{write:!0}})],br.prototype,"label",void 0);c([te(new rt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],br.prototype,"stringFieldOption",void 0);c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],br.prototype,"statisticType",void 0);c([d({type:String,json:{write:!0}})],br.prototype,"tooltip",void 0);c([d({type:Boolean,json:{write:!0}})],br.prototype,"visible",void 0);br=sm=c([T("esri.popup.FieldInfo")],br);const y2=br;var om;let Ii=om=class extends Yn{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,r){r.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new om(x({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],Ii.prototype,"attributes",void 0);c([d({type:String,json:{write:!0}})],Ii.prototype,"description",void 0);c([d({type:[y2]})],Ii.prototype,"fieldInfos",void 0);c([de("fieldInfos")],Ii.prototype,"writeFieldInfos",null);c([d({type:String,json:{write:!0}})],Ii.prototype,"title",void 0);c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ii.prototype,"type",void 0);Ii=om=c([T("esri.popup.content.FieldsContent")],Ii);const Rh=Ii;let Ns=class extends G{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],Ns.prototype,"altText",void 0);c([d({type:String,json:{write:!0}})],Ns.prototype,"caption",void 0);c([d({type:String,json:{write:!0}})],Ns.prototype,"title",void 0);c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ns.prototype,"type",void 0);Ns=c([T("esri.popup.content.mixins.MediaInfo")],Ns);const Vg=Ns;var am;let Ko=am=class extends z{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new am({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],Ko.prototype,"fieldName",void 0);c([d()],Ko.prototype,"tooltip",void 0);c([d()],Ko.prototype,"value",void 0);Ko=am=c([T("esri.popup.content.support.ChartMediaInfoValueSeries")],Ko);const Xx=Ko;var lm;let Ds=lm=class extends G{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new lm({fields:x(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([d({type:[String],json:{write:!0}})],Ds.prototype,"fields",void 0);c([d({type:String,json:{write:!0}})],Ds.prototype,"normalizeField",void 0);c([d({type:[Xx],json:{read:!1}})],Ds.prototype,"series",void 0);c([d({type:String,json:{write:!0}})],Ds.prototype,"tooltipField",void 0);Ds=lm=c([T("esri.popup.content.support.ChartMediaInfoValue")],Ds);const Qx=Ds;let Gl=class extends Vg{constructor(e){super(e),this.type=null,this.value=null}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Gl.prototype,"type",void 0);c([d({type:Qx,json:{write:!0}})],Gl.prototype,"value",void 0);Gl=c([T("esri.popup.content.mixins.ChartMediaInfo")],Gl);const qd=Gl,Zd=Mt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var cm;let Nh=cm=class extends qd{constructor(e){super(e),this.type="bar-chart"}clone(){return new cm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Zd.write}})],Nh.prototype,"type",void 0);Nh=cm=c([T("esri.popup.content.BarChartMediaInfo")],Nh);const g2=Nh;var um;let Dh=um=class extends qd{constructor(e){super(e),this.type="column-chart"}clone(){return new um({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Zd.write}})],Dh.prototype,"type",void 0);Dh=um=c([T("esri.popup.content.ColumnChartMediaInfo")],Dh);const _2=Dh;var hm;let zl=hm=class extends G{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new hm({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],zl.prototype,"linkURL",void 0);c([d({type:String,json:{write:!0}})],zl.prototype,"sourceURL",void 0);zl=hm=c([T("esri.popup.content.support.ImageMediaInfoValue")],zl);const ek=zl;var dm;let Xo=dm=class extends Vg{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new dm({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([d({type:Number,json:{write:!0}})],Xo.prototype,"refreshInterval",void 0);c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Xo.prototype,"type",void 0);c([d({type:ek,json:{write:!0}})],Xo.prototype,"value",void 0);Xo=dm=c([T("esri.popup.content.ImageMediaInfo")],Xo);const w2=Xo;var fm;let $h=fm=class extends qd{constructor(e){super(e),this.type="line-chart"}clone(){return new fm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Zd.write}})],$h.prototype,"type",void 0);$h=fm=c([T("esri.popup.content.LineChartMediaInfo")],$h);const v2=$h;var pm;let Fh=pm=class extends qd{constructor(e){super(e),this.type="pie-chart"}clone(){return new pm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Zd.write}})],Fh.prototype,"type",void 0);Fh=pm=c([T("esri.popup.content.PieChartMediaInfo")],Fh);const b2=Fh,S2={base:Vg,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":g2,"column-chart":_2,"line-chart":v2,"pie-chart":b2,image:w2}};var mm;let Sr=mm=class extends Yn{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(r=>{if(r.type==="image")return w2.fromJSON(r);if(r.type==="barchart")return g2.fromJSON(r);if(r.type==="columnchart")return _2.fromJSON(r);if(r.type==="linechart")return v2.fromJSON(r);if(r.type==="piechart")return b2.fromJSON(r)}).filter(Boolean)}writeMediaInfos(e,r){r.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new mm(x({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Sr.prototype,"activeMediaInfoIndex",void 0);c([d({type:Object,json:{write:!0}})],Sr.prototype,"attributes",void 0);c([d({type:String,json:{write:!0}})],Sr.prototype,"description",void 0);c([d({types:[S2]})],Sr.prototype,"mediaInfos",void 0);c([fe("mediaInfos")],Sr.prototype,"readMediaInfos",null);c([de("mediaInfos")],Sr.prototype,"writeMediaInfos",null);c([d({type:String,json:{write:!0}})],Sr.prototype,"title",void 0);c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Sr.prototype,"type",void 0);Sr=mm=c([T("esri.popup.content.MediaContent")],Sr);const Uh=Sr;var ym;let jl=ym=class extends G{constructor(e){super(e),this.field=null,this.order=null}clone(){return new ym({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],jl.prototype,"field",void 0);c([d({type:["asc","desc"],json:{write:!0}})],jl.prototype,"order",void 0);jl=ym=c([T("esri.popup.support.RelatedRecordsInfoFieldOrder")],jl);const T2=jl;let Zr=class extends Zn(Yn){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],Zr.prototype,"description",void 0);c([d({type:Number,json:{type:Ge,write:!0}})],Zr.prototype,"displayCount",void 0);c([d({type:["list"],json:{write:!0}})],Zr.prototype,"displayType",void 0);c([d({type:[T2],json:{write:!0}})],Zr.prototype,"orderByFields",void 0);c([d({type:Number,json:{type:Ge,write:!0}})],Zr.prototype,"relationshipId",void 0);c([d({type:String,json:{write:!0}})],Zr.prototype,"title",void 0);c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Zr.prototype,"type",void 0);Zr=c([T("esri.popup.content.RelationshipContent")],Zr);const Vh=Zr;var gm;let Wl=gm=class extends Yn{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new gm({text:this.text})}};c([d({type:String,json:{write:!0}})],Wl.prototype,"text",void 0);c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Wl.prototype,"type",void 0);Wl=gm=c([T("esri.popup.content.TextContent")],Wl);const Gh=Wl,tk={base:null,key:"type",typeMap:{attachment:Lh,media:Uh,text:Gh,expression:Fg,field:Rh,relationship:Vh}};var _m;let $s=_m=class extends G{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new _m({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],$s.prototype,"name",void 0);c([d({type:String,json:{write:!0}})],$s.prototype,"title",void 0);c([d({type:String,json:{write:!0}})],$s.prototype,"expression",void 0);c([d({type:["string","number"],json:{write:!0}})],$s.prototype,"returnType",void 0);$s=_m=c([T("esri.popup.ExpressionInfo")],$s);const rk=$s;var wm;let Bl=wm=class extends G{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new wm({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Bl.prototype,"returnTopmostRaster",void 0);c([d({type:Boolean,json:{write:!0}})],Bl.prototype,"showNoDataRecords",void 0);Bl=wm=c([T("esri.popup.LayerOptions")],Bl);const ik=Bl;var vm;let Hl=vm=class extends G{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new vm({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?x(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Hl.prototype,"showRelatedRecords",void 0);c([d({type:[T2],json:{write:!0}})],Hl.prototype,"orderByFields",void 0);Hl=vm=c([T("esri.popup.RelatedRecordsInfo")],Hl);const nk=Hl;var bm;let Kt=bm=class extends Ng(z){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new bm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],Kt.prototype,"active",void 0);c([d()],Kt.prototype,"className",void 0);c([d()],Kt.prototype,"disabled",void 0);c([d()],Kt.prototype,"icon",void 0);c([d()],Kt.prototype,"id",void 0);c([d()],Kt.prototype,"indicator",void 0);c([d()],Kt.prototype,"title",void 0);c([d()],Kt.prototype,"type",void 0);c([d()],Kt.prototype,"visible",void 0);Kt=bm=c([T("esri.support.actions.ActionBase")],Kt);const Gg=Kt;var Sm;let zh=Sm=class extends Gg{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Sm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],zh.prototype,"image",void 0);zh=Sm=c([T("esri.support.Action.ActionButton")],zh);const sk=zh;var Tm;let ql=Tm=class extends Gg{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Tm({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],ql.prototype,"image",void 0);c([d()],ql.prototype,"value",void 0);ql=Tm=c([T("esri.support.Action.ActionToggle")],ql);const ok=ql,ak="esri.PopupTemplate",lk=k.getLogger(ak),Ua="relationships/",ew="expression/",ck=ee.ofType({key:"type",defaultKeyValue:"button",base:Gg,typeMap:{button:sk,toggle:ok}}),uk={base:Yn,key:"type",typeMap:{media:Uh,custom:jx,text:Gh,attachments:Lh,fields:Rh,expression:Fg,relationship:Vh}},hk=["attachments","fields","media","text","expression","relationship"];let Ye=class extends Zn(G){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(r=>bs(uk,r)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||zi(e)?e:(lk.error("content error","unsupported content value",{value:e}),null)}readContent(e,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeContent(e,r,i,n){if(typeof e=="string"){r.description=e;return}Array.isArray(e)&&(r.popupElements=e.filter(s=>hk.includes(s.type)).map(s=>s&&s.toJSON(n)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)}))}writeFieldInfos(e,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(h=>h.type==="fields"):[],u=a.length&&a.every(h=>{var f;return(f=h.fieldInfos)==null?void 0:f.length});r.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(n);return u&&(f.visible=!1),f})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(e,r,i,n){r[i]=e&&(e.showNoDataRecords!==null||e.returnTopmostRaster!==null)?e.toJSON(n):null}writeTitle(e,r){r.title=e||""}async collectRequiredFields(e,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Nl(e,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const r=new Set;return await this.collectRequiredFields(r,e),[...r].sort()}_writeFieldsContent(e,r){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=x(e.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>o.fieldName.toLowerCase()===n.fieldName.toLowerCase());s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,r){var o,a;const i=((o=e.orderByFields)==null?void 0:o.map(u=>this._toFieldOrderJSON(u,e.relationshipId)))||[],s=[...((a=r.relatedRecordsInfo)==null?void 0:a.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,r){!r.description&&e.text&&(r.description=e.text)}_writeMediaContent(e,r){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=x(e.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(e,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>{if(s.type==="media")return!s.mediaInfos&&r&&!n.mediaInfos&&(s.mediaInfos=r,n.mediaInfos=!0),Uh.fromJSON(s);if(s.type==="text")return!s.text&&e&&!n.description&&(s.text=e,n.description=!0),Gh.fromJSON(s);if(s.type==="attachments")return Lh.fromJSON(s);if(s.type==="fields")return Rh.fromJSON(s);if(s.type==="expression")return Fg.fromJSON(s);if(s.type==="relationship")return Vh.fromJSON(s)}).filter(Boolean)}_toRelationshipContent(e){const{field:r,order:i}=e;if(!(r!=null&&r.startsWith(Ua)))return null;const n=r.replace(Ua,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?Vh.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(e,r){const{order:i,field:n}=e;return{field:`${Ua}${r}/${n}`,order:i}}_readPopupInfo({description:e,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new Gh({text:e})):s.push(new Rh),Array.isArray(r)&&r.length&&s.push(Uh.fromJSON({mediaInfos:r})),i&&s.push(Lh.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(u=>{const h=this._toRelationshipContent(u);h&&s.push(h)}),s.length?s:e}_getContentElementFields(e){const r=e==null?void 0:e.type;if(r==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(r==="custom")return e.outFields||[];if(r==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(r==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:r,title:i,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:u,sourceURL:h,linkURL:f}=s,p=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(h),...this._extractFieldNames(f),...o??[]];return a&&p.push(a),u&&p.push(u),p}_getContentExpressionInfos(e,r){return Array.isArray(e)?e.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,r,i){i&&await Promise.all(i.map(n=>xs(e,r,n.expression)))}_getFieldInfoFields(e){return e?e.filter(r=>typeof r.visible>"u"||!!r.visible).map(r=>r.fieldName).filter(r=>!r.startsWith(Ua)&&!r.startsWith(ew)):[]}_getActionsFields(e){return e?e.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:r,title:i,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const r=/{[^}]*}/g,i=e.match(r);if(!i)return[];const n=/\{(\w+):.+\}/,s=i.filter(o=>!(o.indexOf(`{${Ua}`)===0||o.indexOf(`{${ew}`)===0)).map(o=>o.replace(n,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};c([d({type:ck})],Ye.prototype,"actions",void 0);c([d()],Ye.prototype,"content",void 0);c([wt("content")],Ye.prototype,"castContent",null);c([fe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ye.prototype,"readContent",null);c([de("content",{popupElements:{type:ee.ofType(tk)},showAttachments:{type:Boolean},mediaInfos:{type:ee.ofType(S2)},description:{type:String},relatedRecordsInfo:{type:nk}})],Ye.prototype,"writeContent",null);c([d({type:[rk],json:{write:!0}})],Ye.prototype,"expressionInfos",void 0);c([d({type:[y2]})],Ye.prototype,"fieldInfos",void 0);c([de("fieldInfos")],Ye.prototype,"writeFieldInfos",null);c([d({type:ik})],Ye.prototype,"layerOptions",void 0);c([de("layerOptions")],Ye.prototype,"writeLayerOptions",null);c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ye.prototype,"lastEditInfoEnabled",void 0);c([d()],Ye.prototype,"outFields",void 0);c([d()],Ye.prototype,"overwriteActions",void 0);c([d()],Ye.prototype,"returnGeometry",void 0);c([d({json:{type:String}})],Ye.prototype,"title",void 0);c([de("title")],Ye.prototype,"writeTitle",null);Ye=c([T("esri.PopupTemplate")],Ye);const dk=Ye,tw=new rt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let fk=0,Qo=class extends G{constructor(e){super(e),this.id=`sym${fk++}`,this.type=null,this.color=new me([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:tw.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:tw.write}}})],Qo.prototype,"type",void 0);c([d({type:me,json:{write:{allowNull:!0}}})],Qo.prototype,"color",void 0);c([fe("color")],Qo.prototype,"readColor",null);Qo=c([T("esri.symbols.Symbol")],Qo);const $t=Qo;var Em;let Pn=Em=class extends $t{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,r){return r}writeData(e,r){Object.assign(r,e)}async collectRequiredFields(e,r){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const o=s.map(a=>{const u=a.valueExpressionInfo;return xs(e,r,u.expression)});await Promise.all(o)}}}clone(){return new Em({data:x(this.data)})}hash(){return rb(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],Pn.prototype,"color",void 0);c([d({json:{write:!0}})],Pn.prototype,"data",void 0);c([fe("data",["symbol"])],Pn.prototype,"readData",null);c([de("data",{})],Pn.prototype,"writeData",null);c([te({CIMSymbolReference:"cim"},{readOnly:!0})],Pn.prototype,"type",void 0);Pn=Em=c([T("esri.symbols.CIMSymbol")],Pn);const Dc=Pn;let ea=class extends G{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,r,i){e||(r[i]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ea.prototype,"enabled",void 0);c([de("enabled")],ea.prototype,"writeEnabled",null);c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],ea.prototype,"type",void 0);ea=c([T("esri.symbols.Symbol3DLayer")],ea);const si=ea,pk=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,mk="screenUtils.toPt: input not recognized!",E2=96;function PG(t){return t?t/72*E2:0}function Fs(t){return t?t*72/E2:0}function Ie(t){if(typeof t=="string"){const e=t.match(pk);if(e){const r=Number(e[1]),i=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=i==="px"?Fs(r):r;return n?-s:s}return console.warn(mk),null}return t}function mt(t=0,e=0){return{x:t,y:e}}function CG(t=0,e=0){return[t,e]}function yk(t,e){const r=e.transparency!=null?NS(e.transparency):1,i=e.color;return i&&Array.isArray(i)?new me([i[0]||0,i[1]||0,i[2]||0,r]):null}function gk(t,e){e.color=t.toJSON().slice(0,3);const r=RS(t.a);r!==0&&(e.transparency=r)}const Jn={type:me,json:{type:[Ge],default:null,read:{source:["color","transparency"],reader:yk},write:{target:{color:{type:[Ge]},transparency:{type:Ge}},writer:gk}}},oi={type:Number,cast:Ie,json:{write:!0}};let Us=class extends G{constructor(e){super(e),this.color=new me([0,0,0,1]),this.extensionLength=0,this.size=Fs(1)}clone(){}cloneProperties(){return{color:x(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Us.prototype,"type",void 0);c([d(Jn)],Us.prototype,"color",void 0);c([d({...oi,json:{write:{overridePolicy(t){return{enabled:!!t}}}}})],Us.prototype,"extensionLength",void 0);c([d(oi)],Us.prototype,"size",void 0);Us=c([T("esri.symbols.edges.Edges3D")],Us);const zg=Us;var Mm;let jh=Mm=class extends zg{constructor(e){super(e),this.type="sketch"}clone(){return new Mm(this.cloneProperties())}};c([te({sketch:"sketch"},{readOnly:!0})],jh.prototype,"type",void 0);jh=Mm=c([T("esri.symbols.edges.SketchEdges3D")],jh);const _k=jh;var Pm;let Wh=Pm=class extends zg{constructor(e){super(e),this.type="solid"}clone(){return new Pm(this.cloneProperties())}};c([te({solid:"solid"},{readOnly:!0})],Wh.prototype,"type",void 0);Wh=Pm=c([T("esri.symbols.support.SolidEdges3D")],Wh);const wk=Wh,M2={types:{key:"type",base:zg,typeMap:{solid:wk,sketch:_k}},json:{write:!0}};var Cm;let Xt=Cm=class extends G{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new Cm(e)}};c([d(Jn)],Xt.prototype,"color",void 0);Xt=Cm=c([T("esri.symbols.support.Symbol3DMaterial")],Xt);var Am;let Cn=Am=class extends si{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Am({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([te({Extrude:"extrude"},{readOnly:!0})],Cn.prototype,"type",void 0);c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Cn.prototype,"size",void 0);c([d({type:Xt,json:{write:!0}})],Cn.prototype,"material",void 0);c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Cn.prototype,"castShadows",void 0);c([d(M2)],Cn.prototype,"edges",void 0);Cn=Am=c([T("esri.symbols.ExtrudeSymbol3DLayer")],Cn);const P2=Cn;let Zl=class extends $t{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([te({esriSLS:"simple-line"},{readOnly:!0})],Zl.prototype,"type",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Zl.prototype,"width",void 0);Zl=c([T("esri.symbols.LineSymbol")],Zl);const vk=Zl,bk=["begin","end","begin-end"],C2=["arrow","circle","square","diamond","cross","x"];var Im;let Yr=Im=class extends G{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,r,i,n){(n==null?void 0:n.origin)==="web-map"?r[i]="arrow":r[i]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,r,i,n){(n==null?void 0:n.origin)==="web-map"||(r[i]=e)}clone(){return new Im({color:x(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],Yr.prototype,"placement",void 0);c([te({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Yr.prototype,"type",void 0);c([d({type:C2})],Yr.prototype,"style",void 0);c([de("style")],Yr.prototype,"writeStyle",null);c([d({type:me,value:null,json:{write:{allowNull:!0}}})],Yr.prototype,"color",null);c([fe("color")],Yr.prototype,"readColor",null);c([de("color")],Yr.prototype,"writeColor",null);Yr=Im=c([T("esri.symbols.LineSymbolMarker")],Yr);const Sk=Yr;var Om;const Nf=new rt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Oi=Om=class extends vk{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,r,i,n,s,o){if(e&&typeof e!="string")return e;const a={};return e!=null&&(a.style=e),r!=null&&(a.color=r),i!=null&&(a.width=Ie(i)),n!=null&&(a.cap=n),s!=null&&(a.join=s),o!=null&&(a.miterLimit=Ie(o)),a}clone(){var e;return new Om({color:x(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,r;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(r=this.marker)==null?void 0:r.hash()}`}};c([te({esriSLS:"simple-line"},{readOnly:!0})],Oi.prototype,"type",void 0);c([d({type:Nf.apiValues,json:{read:Nf.read,write:Nf.write}})],Oi.prototype,"style",void 0);c([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&(r==null||r.origin==null)})}}})],Oi.prototype,"cap",void 0);c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,r)=>({enabled:t!=="round"&&(r==null||r.origin==null)})}}})],Oi.prototype,"join",void 0);c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Sk}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Oi.prototype,"marker",void 0);c([d({type:Number,json:{read:!1,write:!1}})],Oi.prototype,"miterLimit",void 0);Oi=Om=c([T("esri.symbols.SimpleLineSymbol")],Oi);const Ta=Oi;let Yl=class extends $t{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ta}},json:{default:null,write:!0}})],Yl.prototype,"outline",void 0);c([d({type:["simple-fill","picture-fill"],readOnly:!0})],Yl.prototype,"type",void 0);Yl=c([T("esri.symbols.FillSymbol")],Yl);const A2=Yl;let Bh=class extends G{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Bh.prototype,"type",void 0);Bh=c([T("esri.symbols.patterns.LinePattern3D")],Bh);const I2=Bh,Tk=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var xm;const Ek=Mt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Jl=xm=class extends I2{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new xm(e)}};c([d({type:["style"]})],Jl.prototype,"type",void 0);c([te(Ek),d({type:Tk})],Jl.prototype,"style",void 0);Jl=xm=c([T("esri.symbols.patterns.LineStylePattern3D")],Jl);const jg=Jl;let Hh=class extends G{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Hh.prototype,"type",void 0);Hh=c([T("esri.symbols.patterns.Pattern3D")],Hh);const O2=Hh,Mk=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var km;let Kl=km=class extends O2{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new km(e)}};c([d({type:["style"]})],Kl.prototype,"type",void 0);c([d({type:Mk,json:{read:!0,write:!0}})],Kl.prototype,"style",void 0);Kl=km=c([T("esri.symbols.patterns.StylePattern3D")],Kl);const x2=Kl,Pk={types:{key:"type",base:O2,typeMap:{style:x2}},json:{write:!0}},k2={types:{key:"type",base:I2,typeMap:{style:jg}},json:{write:!0}},wl=new me("white");new me("black");const Ck=new me([255,255,255,0]);function Ak(t){return t.r===0&&t.g===0&&t.b===0}var Lm;let Xl=Lm=class extends Xt{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new Lm(e)}};c([te({multiply:"multiply",replace:"replace",tint:"tint"})],Xl.prototype,"colorMixMode",void 0);Xl=Lm=c([T("esri.symbols.support.Symbol3DFillMaterial")],Xl);function Wg(t=Lk){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Bg(t,e,r,i,n,s,o=Wg()){return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function zG(t,e){return isFinite(t[2])||isFinite(t[5])?new Me({xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}):new Me({xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function jG(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function WG(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function Ik(t){return t[0]>=t[3]?0:t[3]-t[0]}function Ok(t){return t[1]>=t[4]?0:t[4]-t[1]}function xk(t){return t[2]>=t[5]?0:t[5]-t[2]}function BG(t,e=[0,0,0]){return e[0]=Ik(t),e[1]=Ok(t),e[2]=xk(t),e}function HG(t,e,r=t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r!==t&&(r[3]=t[3],r[4]=t[4],r[5]=t[5]),r}function qG(t,e,r=t){return r[3]=e[0],r[4]=e[1],r[5]=e[2],r!==t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),t}function kk(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ZG(t){return t?kk(t,iw):Wg(iw)}function YG(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function JG(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=Number.NEGATIVE_INFINITY,t[3]=i,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function rw(t){return t.length===6}function KG(t,e,r){if(t==null||e==null)return t===e;if(!rw(t)||!rw(e))return!1;if(r){for(let i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1}else for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}const iw=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Lk=[0,0,0,0,0,0];Wg();function XG(t,{isPrimitive:e,width:r,depth:i,height:n}){const o=e?10:1;if(r==null&&n==null&&i==null)return[o*t[0],o*t[1],o*t[2]];const a=OS(r,i,n);let u;for(let h=0;h<3;h++){const f=a[h];if(f!=null){u=f/t[h];break}}for(let h=0;h<3;h++)a[h]==null&&(a[h]=t[h]*u);return a}const Rk=Bg(-.5,-.5,-.5,.5,.5,.5),Nk=Bg(-.5,-.5,0,.5,.5,1),Dk=Bg(-.5,-.5,0,.5,.5,.5);function QG(t){switch(t){case"sphere":case"cube":case"diamond":return Rk;case"cylinder":case"cone":case"inverted-cone":return Nk;case"tetrahedron":return Dk;default:return}}const Hg=["butt","square","round"],$k=[...Hg,"none"],L2=["miter","bevel","round"];var Rm;let Vs=Rm=class extends G{constructor(e){super(e),this.color=new me([0,0,0,1]),this.size=Fs(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Rm(e)}};c([d(Jn)],Vs.prototype,"color",void 0);c([d(oi)],Vs.prototype,"size",void 0);c([d(k2)],Vs.prototype,"pattern",void 0);c([d({type:Hg,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Vs.prototype,"patternCap",void 0);Vs=Rm=c([T("esri.symbols.support.Symbol3DOutline")],Vs);var zu;let xi=zu=class extends si{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new zu(e)}static fromSimpleFillSymbol(e){var n,s,o;const r=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new jg({style:e.outline.style}):null,i={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??wl).clone(),pattern:r};return r&&((o=e.outline)!=null&&o.cap)&&(i.patternCap=e.outline.cap),new zu({material:new Xl({color:(e.color??Ck).clone()}),pattern:e.style&&e.style!=="solid"?new x2({style:e.style}):null,outline:i})}};c([te({Fill:"fill"},{readOnly:!0})],xi.prototype,"type",void 0);c([d({type:Xl,json:{write:!0}})],xi.prototype,"material",void 0);c([d(Pk)],xi.prototype,"pattern",void 0);c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xi.prototype,"castShadows",void 0);c([d({type:Vs,json:{write:!0}})],xi.prototype,"outline",void 0);c([d(M2)],xi.prototype,"edges",void 0);xi=zu=c([T("esri.symbols.FillSymbol3DLayer")],xi);const $c=xi,Fk=["none","underline","line-through"],Uk=["normal","italic","oblique"],Vk=["normal","lighter","bold","bolder"],R2={type:Number,cast:t=>{const e=dr(t);return e===0?1:Wr(e,.1,4)},nonNullable:!0},Gk=["left","right","center"],zk=["baseline","top","middle","bottom"],N2={type:Gk,nonNullable:!0},D2={type:zk,nonNullable:!0};var Nm;let ki=Nm=class extends G{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Ie(e)}clone(){return new Nm({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:Fk,json:{default:"none",write:!0}})],ki.prototype,"decoration",void 0);c([d({type:String,json:{write:!0}})],ki.prototype,"family",void 0);c([d({type:Number,json:{write:{overridePolicy(t,e,r){return{enabled:!r||!r.textSymbol3D}}}}})],ki.prototype,"size",void 0);c([wt("size")],ki.prototype,"castSize",null);c([d({type:Uk,json:{default:"normal",write:!0}})],ki.prototype,"style",void 0);c([d({type:Vk,json:{default:"normal",write:!0}})],ki.prototype,"weight",void 0);ki=Nm=c([T("esri.symbols.Font")],ki);const Yd=ki;function Fc(t,e){const r=e&&e.url&&e.url.path;if(t&&r&&(t=Bt(t,r,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const i=gg(t,e.portalItem.itemUrl);i!=null&&jk.test(i)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(i).path)}return Dm(t,e&&e.portal)}function Jd(t,e,r=Ql.YES){if(t==null)return t;!kt(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let i=Bt(t);if(e){const n=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(n){const s=Dm(n,e.portal),o=Dm(i,e.portal);i=gg(o,s,s);const a=i!==o;i!=null&&a&&i!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=F2(i,e==null?void 0:e.portal),kt(i)&&(i=gn(i)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!kt(i)&&!ho(i)&&r===Ql.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(i),compress:!1}),i}function qg(t,e,r){return Fc(t,r)}function ta(t,e,r,i){const n=Jd(t,i);n!==void 0&&(e[r]=n)}const $2=/\/items\/([^\/]+)\/resources\/(.*)/,jk=/^\.\/resources\//;function Wk(t){const e=(t==null?void 0:t.match($2))??null;return(e==null?void 0:e[1])??null}function Bk(t){const e=(t==null?void 0:t.match($2))??null;if(e==null)return null;const r=e[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=T_(r);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=T_(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function F2(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Np(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Dm(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const r=`${e.urlKey}.${e.customBaseUrl}`,i=pg();return Bo(i,`${i.scheme}://${r}`)?Np(t,e.portalHostname,r):Np(t,r,e.portalHostname)}var Ql;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Ql||(Ql={}));const iz=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Ql},ensureMainOnlineDomain:F2,fromJSON:Fc,itemIdFromResourceUrl:Wk,prefixAndFilenameFromResourceUrl:Bk,read:qg,toJSON:Jd,write:ta},Symbol.toStringTag,{value:"Module"}));var $m;const Hk=Mt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Gs=$m=class extends G{constructor(e){super(e)}readHref(e,r,i){return e?Fc(e,i):r.dataURI}writeHref(e,r,i,n){e&&(ho(e)?r.dataURI=e:(r.href=Jd(e,n),kt(r.href)&&(r.href=gn(r.href))))}clone(){return new $m({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Gs.prototype,"href",void 0);c([fe("href")],Gs.prototype,"readHref",null);c([de("href",{href:{type:String},dataURI:{type:String}})],Gs.prototype,"writeHref",null);c([te(Hk)],Gs.prototype,"primitive",void 0);Gs=$m=c([T("esri.symbols.support.IconSymbol3DLayerResource")],Gs);var Fm;let ra=Fm=class extends z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Fm({x:this.x,y:this.y})}};c([d({type:Number})],ra.prototype,"x",void 0);c([d({type:Number})],ra.prototype,"y",void 0);ra=Fm=c([T("esri.symbols.support.Symbol3DAnchorPosition2D")],ra);var Um;let ec=Um=class extends G{constructor(e){super(e),this.color=new me([0,0,0,1]),this.size=Fs(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new Um(e)}};c([d(Jn)],ec.prototype,"color",void 0);c([d(oi)],ec.prototype,"size",void 0);ec=Um=c([T("esri.symbols.support.Symbol3DIconOutline")],ec);var Po;const U2="esri.symbols.IconSymbol3DLayer";let Jr=Po=class extends si{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Po({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const r=e.color||wl,i=nw(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||wl).clone()}:null;return new Po({size:e.size,resource:{primitive:Zk(e.style)},material:{color:r},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const r=!e.color||Ak(e.color)?wl:e.color,i=nw(e);return new Po({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Po({resource:{href:Xb({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};c([d({type:Xt,json:{write:!0}})],Jr.prototype,"material",void 0);c([d({type:Gs,json:{write:!0}})],Jr.prototype,"resource",void 0);c([te({Icon:"icon"},{readOnly:!0})],Jr.prototype,"type",void 0);c([d(oi)],Jr.prototype,"size",void 0);c([te({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],Jr.prototype,"anchor",void 0);c([d({type:ra,json:{type:[Number],read:{reader:t=>new ra({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Jr.prototype,"anchorPosition",void 0);c([d({type:ec,json:{write:!0}})],Jr.prototype,"outline",void 0);Jr=Po=c([T(U2)],Jr);function nw(t){const e="width"in t?t.width:t.size,r="height"in t?t.height:t.size,i=sw(t.xoffset),n=sw(t.yoffset);return(i||n)&&e&&r?{x:-i/e,y:n/r}:null}function sw(t){return isFinite(t)?t:0}const qk={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Zk(t){const e=qk[t];return e||(k.getLogger(U2).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const as=Jr;let zs=class extends Zn(G){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zs.prototype,"type",void 0);c([d({type:bk,json:{default:"begin-end",write:!0}})],zs.prototype,"placement",void 0);c([d({type:C2,json:{default:"arrow",write:!0}})],zs.prototype,"style",void 0);c([d({type:me,json:{type:[Ge],default:null,write:!0}})],zs.prototype,"color",void 0);zs=c([T("esri.symbols.LineStyleMarker3D")],zs);const Vm=zs;var ju;let Kr=ju=class extends si{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Fs(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new ju(e)}static fromSimpleLineSymbol(e){var i;const r={enabled:!0,size:e.width??Fs(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new jg({style:e.style}):null,material:new Xt({color:(e.color||wl).clone()}),marker:e.marker?new Vm({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new ju(r)}};c([d({type:Xt,json:{write:!0}})],Kr.prototype,"material",void 0);c([te({Line:"line"},{readOnly:!0})],Kr.prototype,"type",void 0);c([d({type:L2,json:{write:!0,default:"miter"}})],Kr.prototype,"join",void 0);c([d({type:Hg,json:{write:!0,default:"butt"}})],Kr.prototype,"cap",void 0);c([d(oi)],Kr.prototype,"size",void 0);c([d(k2)],Kr.prototype,"pattern",void 0);c([d({types:{key:"type",base:Vm,typeMap:{style:Vm}},json:{write:!0}})],Kr.prototype,"marker",void 0);Kr=ju=c([T("esri.symbols.LineSymbol3DLayer")],Kr);const Uc=Kr;var Gm;const Yk=Mt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let tc=Gm=class extends G{clone(){return new Gm({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:qg,write:ta}})],tc.prototype,"href",void 0);c([te(Yk)],tc.prototype,"primitive",void 0);tc=Gm=c([T("esri.symbols.support.ObjectSymbol3DLayerResource")],tc);var zm;let js=zm=class extends z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new zm({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],js.prototype,"x",void 0);c([d({type:Number})],js.prototype,"y",void 0);c([d({type:Number})],js.prototype,"z",void 0);js=zm=c([T("esri.symbols.support.Symbol3DAnchorPosition3D")],js);var jm;let ut=jm=class extends si{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new jm({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:Xt,json:{write:!0}})],ut.prototype,"material",void 0);c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ut.prototype,"castShadows",void 0);c([d({type:tc,json:{write:!0}})],ut.prototype,"resource",void 0);c([te({Object:"object"},{readOnly:!0})],ut.prototype,"type",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"width",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"height",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"depth",void 0);c([te({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],ut.prototype,"anchor",void 0);c([d({type:js,json:{type:[Number],read:{reader:t=>new js({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ut.prototype,"anchorPosition",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"heading",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"tilt",void 0);c([d({type:Number,json:{write:!0}})],ut.prototype,"roll",void 0);c([d({readOnly:!0})],ut.prototype,"isPrimitive",null);ut=jm=c([T("esri.symbols.ObjectSymbol3DLayer")],ut);const Zg=ut;var Wm;let _t=Wm=class extends si{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,r){return e??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(e,r){return e??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new Wm({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:Xt,json:{write:!0}})],_t.prototype,"material",void 0);c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_t.prototype,"castShadows",void 0);c([te({Path:"path"},{readOnly:!0})],_t.prototype,"type",void 0);c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],_t.prototype,"profile",void 0);c([d({type:L2,json:{write:!0,default:"miter"}})],_t.prototype,"join",void 0);c([d({type:$k,json:{write:!0,default:"butt"}})],_t.prototype,"cap",void 0);c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],_t.prototype,"width",void 0);c([fe("width",["width","size","height"])],_t.prototype,"readWidth",null);c([d({type:Number,json:{write:!0}})],_t.prototype,"height",void 0);c([fe("height",["height","size","width"])],_t.prototype,"readHeight",null);c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],_t.prototype,"anchor",void 0);c([d({type:["heading","all"],json:{write:!0,default:"all"}})],_t.prototype,"profileRotation",void 0);_t=Wm=c([T("esri.symbols.PathSymbol3DLayer")],_t);const Yg=_t;var Bm;let ia=Bm=class extends G{constructor(){super(...arguments),this.color=new me([0,0,0,1]),this.size=0}clone(){const e={color:x(this.color),size:this.size};return new Bm(e)}};c([d(Jn)],ia.prototype,"color",void 0);c([d(oi)],ia.prototype,"size",void 0);ia=Bm=c([T("esri.symbols.support.Symbol3DHalo")],ia);let rc=class extends Zn(G){constructor(e){super(e),this.color=null}};c([d(Jn)],rc.prototype,"color",void 0);rc=c([T("esri.symbols.support.Symbol3DTextBackground")],rc);var Wu;let St=Wu=class extends si{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,r,i,n){const s={...n,textSymbol3D:!0};r.font=e.write({},s),delete r.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Wu({enabled:this.enabled,font:this.font&&x(this.font),halo:this.halo&&x(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:x(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Wu({font:e.font!=null?e.font.clone():new Yd,halo:Jk(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Xt({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new rc({color:e.backgroundColor.clone()}):null})}};c([d({type:Yd,json:{write:!0}})],St.prototype,"font",null);c([de("font")],St.prototype,"writeFont",null);c([d({type:ia,json:{write:!0}})],St.prototype,"halo",void 0);c([d({...N2,json:{default:"center",write:!0}})],St.prototype,"horizontalAlignment",void 0);c([d({...R2,json:{default:1,write:!0}})],St.prototype,"lineHeight",void 0);c([d({type:Xt,json:{write:!0}})],St.prototype,"material",void 0);c([d({type:rc,json:{write:!0}})],St.prototype,"background",void 0);c([d(oi)],St.prototype,"size",null);c([d({type:String,json:{write:!0}})],St.prototype,"text",void 0);c([te({Text:"text"},{readOnly:!0})],St.prototype,"type",void 0);c([d({...D2,json:{default:"baseline",write:!0}})],St.prototype,"verticalAlignment",void 0);St=Wu=c([T("esri.symbols.TextSymbol3DLayer")],St);function Jk(t,e){return t&&e!=null&&e>0?new ia({color:x(t),size:e}):null}const Ea=St;var Hm;let An=Hm=class extends si{constructor(e){super(e),this.color=qm.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Hm({color:x(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:me,nonNullable:!0,json:{type:[Ge],write:(t,e,r)=>e[r]=t.toArray(me.AlphaMode.UNLESS_OPAQUE),default:()=>qm.clone(),defaultEquals:t=>t.toCss(!0)===qm.toCss(!0)}})],An.prototype,"color",void 0);c([te({Water:"water"},{readOnly:!0})],An.prototype,"type",void 0);c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],An.prototype,"waterbodySize",void 0);c([d({type:Number,json:{write:!0,default:null}})],An.prototype,"waveDirection",void 0);c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],An.prototype,"waveStrength",void 0);An=Hm=c([T("esri.symbols.WaterSymbol3DLayer")],An);const qm=new me([0,119,190]),V2=An;var Zm;let Ws=Zm=class extends z{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Zm({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Ws.prototype,"name",void 0);c([d({type:String})],Ws.prototype,"styleUrl",void 0);c([d({type:String})],Ws.prototype,"styleName",void 0);c([d({type:Pi})],Ws.prototype,"portal",void 0);Ws=Zm=c([T("esri.symbols.support.StyleOrigin")],Ws);const Ym=Ws;var Jm;let ic=Jm=class extends z{constructor(){super(...arguments),this.url=""}clone(){return new Jm({url:this.url})}};c([d({type:String})],ic.prototype,"url",void 0);ic=Jm=c([T("esri.symbols.support.Thumbnail")],ic);const G2={icon:as,object:Zg,line:Uc,path:Yg,fill:$c,extrude:P2,text:Ea,water:V2},Kk=ee.ofType({base:si,key:"type",typeMap:G2,errorContext:"symbol-layer"});let Xr=class extends $t{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,n=r&&r.type||ee;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&k.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Ts(e,this._get("symbolLayers"))}readStyleOrigin(e,r,i){if(e.styleUrl&&e.name){const n=Fc(e.styleUrl,i);return new Ym({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Ym({portal:i&&i.portal||Pi.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Ei("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,r,i,n){if(e.styleUrl&&e.name){let s=Jd(e.styleUrl,n);kt(s)&&(s=gn(s)),r.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&n&&n.portal&&!oA(e.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new Ei("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof si||e&&G2[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],Xr.prototype,"color",null);c([d({type:Kk,nonNullable:!0,json:{write:!0}}),wt(Gb)],Xr.prototype,"symbolLayers",null);c([d({type:Ym})],Xr.prototype,"styleOrigin",void 0);c([fe("styleOrigin")],Xr.prototype,"readStyleOrigin",null);c([de("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Xr.prototype,"writeStyleOrigin",null);c([d({type:ic,json:{read:!1}})],Xr.prototype,"thumbnail",void 0);c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Xr.prototype,"type",void 0);Xr=c([T("esri.symbols.Symbol3D")],Xr);const Vc=Xr;let nc=class extends G{constructor(e){super(e),this.visible=!0}clone(){}};c([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],nc.prototype,"type",void 0);c([d({readOnly:!0})],nc.prototype,"visible",void 0);nc=c([T("esri.symbols.callouts.Callout3D")],nc);const z2=nc;var Km;let qh=Km=class extends G{constructor(){super(...arguments),this.color=new me("white")}clone(){return new Km({color:x(this.color)})}};c([d(Jn)],qh.prototype,"color",void 0);qh=Km=c([T("esri.symbols.callouts.LineCallout3DBorder")],qh);const Xk=qh;var Xm;let In=Xm=class extends z2{constructor(e){super(e),this.type="line",this.color=new me([0,0,0,1]),this.size=Fs(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Xm({color:x(this.color),size:this.size,border:x(this.border)})}};c([te({line:"line"},{readOnly:!0})],In.prototype,"type",void 0);c([d(Jn)],In.prototype,"color",void 0);c([d(oi)],In.prototype,"size",void 0);c([d({type:Xk,json:{write:!0}})],In.prototype,"border",void 0);c([d({readOnly:!0})],In.prototype,"visible",null);In=Xm=c([T("esri.symbols.callouts.LineCallout3D")],In);const Qk=In;function Jg(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function j2(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!e||!e.visible?!1:!!Jg(t)}const W2={types:{key:"type",base:z2,typeMap:{line:Qk}},json:{write:!0}};var Qm;let na=Qm=class extends G{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Qm({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d(oi)],na.prototype,"screenLength",void 0);c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],na.prototype,"minWorldLength",void 0);c([d({type:Number,json:{write:!0}})],na.prototype,"maxWorldLength",void 0);na=Qm=c([T("esri.symbols.support.Symbol3DVerticalOffset")],na);const B2=na;var Bu;const H2=ee.ofType({base:null,key:"type",typeMap:{text:Ea}});let On=Bu=class extends Vc{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new H2,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return j2(this)}hasVisibleVerticalOffset(){return Jg(this)}clone(){return new Bu({styleOrigin:x(this.styleOrigin),symbolLayers:x(this.symbolLayers),thumbnail:x(this.thumbnail),callout:x(this.callout),verticalOffset:x(this.verticalOffset)})}static fromTextSymbol(e){return new Bu({symbolLayers:[Ea.fromTextSymbol(e)]})}};c([d({type:B2,json:{write:!0}})],On.prototype,"verticalOffset",void 0);c([d(W2)],On.prototype,"callout",void 0);c([d({json:{read:!1,write:!1}})],On.prototype,"styleOrigin",void 0);c([d({type:H2})],On.prototype,"symbolLayers",void 0);c([te({LabelSymbol3D:"label-3d"},{readOnly:!0})],On.prototype,"type",void 0);On=Bu=c([T("esri.symbols.LabelSymbol3D")],On);const Kg=On;var Hu;const q2=ee.ofType({base:null,key:"type",typeMap:{line:Uc,path:Yg}}),eL=ee.ofType({base:null,key:"type",typeMap:{line:Uc,path:Yg}});let sc=Hu=class extends Vc{constructor(e){super(e),this.symbolLayers=new q2,this.type="line-3d"}clone(){return new Hu({styleOrigin:x(this.styleOrigin),symbolLayers:x(this.symbolLayers),thumbnail:x(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Hu({symbolLayers:[Uc.fromSimpleLineSymbol(e)]})}};c([d({type:q2,json:{type:eL}})],sc.prototype,"symbolLayers",void 0);c([te({LineSymbol3D:"line-3d"},{readOnly:!0})],sc.prototype,"type",void 0);sc=Hu=c([T("esri.symbols.LineSymbol3D")],sc);const Xg=sc;let xn=class extends $t{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],xn.prototype,"angle",void 0);c([d({type:["simple-marker","picture-marker"],readOnly:!0})],xn.prototype,"type",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],xn.prototype,"xoffset",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],xn.prototype,"yoffset",void 0);c([d({type:Number,cast:t=>t==="auto"?t:Ie(t),json:{write:!0}})],xn.prototype,"size",void 0);xn=c([T("esri.symbols.MarkerSymbol")],xn);const Z2=xn;var qu;const Y2=ee.ofType({base:null,key:"type",typeMap:{fill:$c}});let oc=qu=class extends Vc{constructor(e){super(e),this.symbolLayers=new Y2,this.type="mesh-3d"}clone(){return new qu({styleOrigin:x(this.styleOrigin),symbolLayers:x(this.symbolLayers),thumbnail:x(this.thumbnail)})}static fromSimpleFillSymbol(e){return new qu({symbolLayers:[$c.fromSimpleFillSymbol(e)]})}};c([d({type:Y2})],oc.prototype,"symbolLayers",void 0);c([te({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],oc.prototype,"type",void 0);oc=qu=c([T("esri.symbols.MeshSymbol3D")],oc);const Qg=oc;function tL(t,e,r){return e.imageData?Xb({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):J2(e.url,r)}function J2(t,e){var r;return iL(e)&&!kt(t)&&((r=e==null?void 0:e.layer)!=null&&r.parsedUrl)?zd(e.layer.parsedUrl.path,"images",t):Fc(t,e)}function rL(t,e,r,i){if(ho(t)){const n=Ol(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,r&&r.imageData===e.imageData&&r.url&&ta(r.url,e,"url",i)}else ta(t,e,"url",i)}const K2={json:{read:{source:["imageData","url"],reader:tL},write:{writer(t,e,r,i){rL(t,e,this.source,i)}}}},X2={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,r){const i={};return e.imageData&&(i.imageData=e.imageData),e.contentType&&(i.contentType=e.contentType),e.url&&(i.url=J2(e.url,r)),i}}}};function iL(t){var e,r;return t!=null&&(t.origin==="service"||t.origin==="portal-item")&&(((e=t.layer)==null?void 0:e.type)==="feature"||((r=t.layer)==null?void 0:r.type)==="stream")}var ey;let Qt=ey=class extends A2{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,r,i,n){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),r&&(s.outline=r),i!=null&&(s.width=Ie(i)),n!=null&&(s.height=Ie(n)),s}clone(){const e=new ey({color:x(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",x(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([te({esriPFS:"picture-fill"},{readOnly:!0})],Qt.prototype,"type",void 0);c([d(K2)],Qt.prototype,"url",void 0);c([d({type:Number,json:{write:!0}})],Qt.prototype,"xscale",void 0);c([d({type:Number,json:{write:!0}})],Qt.prototype,"yscale",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Qt.prototype,"width",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Qt.prototype,"height",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Qt.prototype,"xoffset",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Qt.prototype,"yoffset",void 0);c([d(X2)],Qt.prototype,"source",void 0);Qt=ey=c([T("esri.symbols.PictureFillSymbol")],Qt);const Q2=Qt;var ty;let Tr=ty=class extends Z2{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),r!=null&&(n.width=Ie(r)),i!=null&&(n.height=Ie(i)),n}readHeight(e,r){return r.size||e}readWidth(e,r){return r.size||e}clone(){const e=new ty({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",x(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],Tr.prototype,"color",void 0);c([te({esriPMS:"picture-marker"},{readOnly:!0})],Tr.prototype,"type",void 0);c([d(K2)],Tr.prototype,"url",void 0);c([d(X2)],Tr.prototype,"source",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Tr.prototype,"height",void 0);c([fe("height",["height","size"])],Tr.prototype,"readHeight",null);c([d({type:Number,cast:Ie,json:{write:!0}})],Tr.prototype,"width",void 0);c([d({json:{write:!1}})],Tr.prototype,"size",void 0);Tr=ty=c([T("esri.symbols.PictureMarkerSymbol")],Tr);const e0=Tr;var nn;const eT=ee.ofType({base:null,key:"type",typeMap:{icon:as,object:Zg,text:Ea}});let Bs=nn=class extends Vc{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new eT,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const r of this.symbolLayers.items)switch(r.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return j2(this)}hasVisibleVerticalOffset(){return Jg(this)}clone(){return new nn({verticalOffset:x(this.verticalOffset),callout:x(this.callout),styleOrigin:x(this.styleOrigin),symbolLayers:x(this.symbolLayers),thumbnail:x(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new nn({symbolLayers:[as.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new nn({symbolLayers:[as.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var n,s;if(((s=(n=e.data)==null?void 0:n.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return i!=null&&i.callout?new nn({symbolLayers:[as.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new nn({symbolLayers:[as.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new nn({symbolLayers:[Ea.fromTextSymbol(e)]})}};c([d({type:B2,json:{write:!0}})],Bs.prototype,"verticalOffset",void 0);c([d(W2)],Bs.prototype,"callout",void 0);c([d({type:eT,json:{origins:{"web-scene":{write:!0}}}})],Bs.prototype,"symbolLayers",void 0);c([te({PointSymbol3D:"point-3d"},{readOnly:!0})],Bs.prototype,"type",void 0);Bs=nn=c([T("esri.symbols.PointSymbol3D")],Bs);const t0=Bs;var tl;const tT=ee.ofType({base:null,key:"type",typeMap:{extrude:P2,fill:$c,icon:as,line:Uc,object:Zg,text:Ea,water:V2}});let ac=tl=class extends Vc{constructor(e){super(e),this.symbolLayers=new tT,this.type="polygon-3d"}clone(){return new tl({styleOrigin:x(this.styleOrigin),symbolLayers:x(this.symbolLayers),thumbnail:x(this.thumbnail)})}static fromJSON(e){const r=new tl;if(r.read(e),r.symbolLayers.length===2&&r.symbolLayers.getItemAt(0).type==="fill"&&r.symbolLayers.getItemAt(1).type==="line"){const i=r.symbolLayers.getItemAt(0),n=r.symbolLayers.getItemAt(1);n.enabled&&(!e.symbolLayers||!e.symbolLayers[1]||e.symbolLayers[1].enable!==!1)&&(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),r.symbolLayers.removeAt(1)}return r}static fromSimpleFillSymbol(e){return new tl({symbolLayers:[$c.fromSimpleFillSymbol(e)]})}};c([d({type:tT,json:{write:!0}})],ac.prototype,"symbolLayers",void 0);c([te({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ac.prototype,"type",void 0);ac=tl=c([T("esri.symbols.PolygonSymbol3D")],ac);const r0=ac;var ry;const Df=new rt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Hs=ry=class extends A2{constructor(...e){super(...e),this.color=new me([0,0,0,.25]),this.outline=new Ta,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),r&&(n.outline=r),i&&(n.color=i),n}clone(){return new ry({color:x(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],Hs.prototype,"color",void 0);c([d()],Hs.prototype,"outline",void 0);c([te({esriSFS:"simple-fill"},{readOnly:!0})],Hs.prototype,"type",void 0);c([d({type:Df.apiValues,json:{read:Df.read,write:Df.write}})],Hs.prototype,"style",void 0);Hs=ry=c([T("esri.symbols.SimpleFillSymbol")],Hs);const rT=Hs;var iy;const $f=new rt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Qr=iy=class extends Z2{constructor(...e){super(...e),this.color=new me([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ta}normalizeCtorArgs(e,r,i,n){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),r!=null&&(s.size=Ie(r)),i&&(s.outline=i),n&&(s.color=n),s}writeColor(e,r){e&&this.style!=="x"&&this.style!=="cross"&&(r.color=e.toJSON()),e===null&&(r.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new iy({angle:this.angle,color:x(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([d()],Qr.prototype,"color",void 0);c([de("color")],Qr.prototype,"writeColor",null);c([te({esriSMS:"simple-marker"},{readOnly:!0})],Qr.prototype,"type",void 0);c([d()],Qr.prototype,"size",void 0);c([d({type:$f.apiValues,json:{read:$f.read,write:$f.write}})],Qr.prototype,"style",void 0);c([d({type:String,json:{write:!0}})],Qr.prototype,"path",null);c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ta}},json:{default:null,write:!0}})],Qr.prototype,"outline",void 0);Qr=iy=c([T("esri.symbols.SimpleMarkerSymbol")],Qr);const i0=Qr;var ny;let Pe=ny=class extends $t{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Yd,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.text=e),r&&(n.font=r),i&&(n.color=i),n}writeLineWidth(e,r,i,n){!n||typeof n=="string"?r[i]=e:n.origin}castLineWidth(e){return Ie(e)}writeLineHeight(e,r,i,n){!n||typeof n=="string"?r[i]=e:n.origin}clone(){return new ny({angle:this.angle,backgroundColor:x(this.backgroundColor),borderLineColor:x(this.borderLineColor),borderLineSize:this.borderLineSize,color:x(this.color),font:this.font&&this.font.clone(),haloColor:x(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:me,json:{write:!0}})],Pe.prototype,"backgroundColor",void 0);c([d({type:me,json:{write:!0}})],Pe.prototype,"borderLineColor",void 0);c([d({type:Number,json:{write:!0},cast:Ie})],Pe.prototype,"borderLineSize",void 0);c([d({type:Yd,json:{write:!0}})],Pe.prototype,"font",void 0);c([d({...N2,json:{write:!0}})],Pe.prototype,"horizontalAlignment",void 0);c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"kerning",void 0);c([d({type:me,json:{write:!0}})],Pe.prototype,"haloColor",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Pe.prototype,"haloSize",void 0);c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"rightToLeft",void 0);c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"rotated",void 0);c([d({type:String,json:{write:!0}})],Pe.prototype,"text",void 0);c([te({esriTS:"text"},{readOnly:!0})],Pe.prototype,"type",void 0);c([d({...D2,json:{write:!0}})],Pe.prototype,"verticalAlignment",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Pe.prototype,"xoffset",void 0);c([d({type:Number,cast:Ie,json:{write:!0}})],Pe.prototype,"yoffset",void 0);c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Pe.prototype,"angle",void 0);c([d({type:Number,json:{write:!0}})],Pe.prototype,"width",void 0);c([d({type:Number})],Pe.prototype,"lineWidth",void 0);c([de("lineWidth")],Pe.prototype,"writeLineWidth",null);c([wt("lineWidth")],Pe.prototype,"castLineWidth",null);c([d(R2)],Pe.prototype,"lineHeight",void 0);c([de("lineHeight")],Pe.prototype,"writeLineHeight",null);Pe=ny=c([T("esri.symbols.TextSymbol")],Pe);const Kd=Pe;var sy;let Er=sy=class extends $t{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Pi.getDefault(),r=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${r}:${e.url}`}read(e,r){this.portal=r==null?void 0:r.portal,super.read(e,r)}clone(){return new sy({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,r){const i=r!=null?r.cache:null,n=i?this._fetchCacheKey:null;if(i!=null){const u=n&&i.get(n);if(u)return u.clone()}const s=await nL();De(r);const o=s.resolveWebStyleSymbol(this,{portal:this.portal},e,r);o.catch(u=>{k.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",u)});const a=await o;return e==="webRef"&&a.type==="point-3d"||e==="cimRef"&&a.type==="cim"?(i!=null&&i.set(n,a.clone()),a):null}};c([d({json:{write:!1}})],Er.prototype,"color",void 0);c([d({type:String,json:{write:!0}})],Er.prototype,"styleName",void 0);c([d({type:Pi,json:{write:!1}})],Er.prototype,"portal",void 0);c([d({type:String,json:{read:qg,write:ta}})],Er.prototype,"styleUrl",void 0);c([d({type:ic,json:{read:!1}})],Er.prototype,"thumbnail",void 0);c([d({type:String,json:{write:!0}})],Er.prototype,"name",void 0);c([te({styleSymbolReference:"web-style"},{readOnly:!0})],Er.prototype,"type",void 0);c([d()],Er.prototype,"_fetchCacheKey",null);Er=sy=c([T("esri.symbols.WebStyleSymbol")],Er);function nL(){return R(()=>import("./webStyleSymbolUtils-cb3ecdfb.js"),["assets/webStyleSymbolUtils-cb3ecdfb.js","assets/devEnvironmentUtils-e2e22b53.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js"])}const Xd=Er;function $z(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Fz(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const n0={base:$t,key:"type",typeMap:{"simple-fill":rT,"picture-fill":Q2,"picture-marker":e0,"simple-line":Ta,"simple-marker":i0,text:Kd,"label-3d":Kg,"line-3d":Xg,"mesh-3d":Qg,"point-3d":t0,"polygon-3d":r0,"web-style":Xd,cim:Dc},errorContext:"symbol"},Uz={base:$t,key:"type",typeMap:{"picture-marker":e0,"simple-marker":i0,text:Kd,"web-style":Xd,cim:Dc},errorContext:"symbol"},Vz=Ib({types:n0}),Gz={base:$t,key:"type",typeMap:{"simple-fill":rT,"picture-fill":Q2,"picture-marker":e0,"simple-line":Ta,"simple-marker":i0,text:Kd,"line-3d":Xg,"mesh-3d":Qg,"point-3d":t0,"polygon-3d":r0,"web-style":Xd,cim:Dc},errorContext:"symbol"},zz={base:$t,key:"type",typeMap:{text:Kd,"label-3d":Kg},errorContext:"symbol"},jz={base:$t,key:"type",typeMap:{"line-3d":Xg,"mesh-3d":Qg,"point-3d":t0,"polygon-3d":r0,"web-style":Xd,cim:Dc},errorContext:"symbol"},Wz={base:$t,key:"type",typeMap:{"label-3d":Kg},errorContext:"symbol"},Bz=bs(n0);function sL(t){if(!t)return null;const e={};for(const r in t){const i=vr(t[r]);i&&(e[r]=i)}return Object.keys(e).length!==0?e:null}function oL(t){if(t==null)return null;const e={};for(const r in t){const i=t[r];i&&(e[r]=i.toJSON())}return Object.keys(e).length!==0?e:null}let Tt=class extends Zn(G){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:fl(),configurable:!0})}normalizeCtorArgs(e,r,i,n){return e&&!e.declaredClass?e:{geometry:e,symbol:r,attributes:i,popupTemplate:n}}set aggregateGeometries(e){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const r=this._get("attributes");r!==e&&(this._set("attributes",e),this._notifyLayer("attributes",r,e))}set geometry(e){const r=this._get("geometry");r!==e&&(this._set("geometry",e),this._notifyLayer("geometry",r,e))}set symbol(e){const r=this._get("symbol");r!==e&&(this._set("symbol",e),this._notifyLayer("symbol",r,e))}set visible(e){const r=this._get("visible");r!==e&&(this._set("visible",e),this._notifyLayer("visible",r,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const r of[this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var r;return(r=this.attributes)==null?void 0:r[e]}setAttribute(e,r){if(!this.attributes)this.attributes={[e]:r},this._notifyLayer("attributes",void 0,r,e);else{const n=this.getAttribute(e);this.attributes[e]=r,this._notifyLayer("attributes",n,r,e)}}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:oL(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){this.geometry!=null&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,r,i,n){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:r,newValue:i};e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}};c([d({value:null,json:{read:sL}})],Tt.prototype,"aggregateGeometries",null);c([d({value:null})],Tt.prototype,"attributes",null);c([d({value:null,types:Rg,json:{read:vr}})],Tt.prototype,"geometry",null);c([d({type:Boolean})],Tt.prototype,"isAggregate",void 0);c([d({clonable:"reference"})],Tt.prototype,"layer",void 0);c([d({type:dk})],Tt.prototype,"popupTemplate",void 0);c([d({clonable:"reference"})],Tt.prototype,"sourceLayer",void 0);c([d({value:null,types:n0})],Tt.prototype,"symbol",null);c([d({type:Boolean,value:!0})],Tt.prototype,"visible",null);Tt=c([T("esri.Graphic")],Tt);(function(t){t.generateUID=fl})(Tt||(Tt={}));const lc=Tt;class s0{constructor(e,r){this.min=e,this.max=r,this.range=r-e}ndiff(e,r=0){return Math.ceil((e-r)/this.range)*this.range+r}_normalize(e,r,i,n=0,s=!1){return i-=n,i<e?i+=this.ndiff(e-i):i>r&&(i-=this.ndiff(i-r)),s&&i===r&&(i=e),i+n}normalize(e,r=0,i=!1){return this._normalize(this.min,this.max,e,r,i)}clamp(e,r=0){return Wr(e-r,this.min,this.max)+r}monotonic(e,r,i){return e<r?r:r+this.ndiff(e-r,i)}minimalMonotonic(e,r,i){return this._normalize(e,e+this.range,r,i)}center(e,r,i){return r=this.monotonic(e,r,i),this.normalize((e+r)/2,i)}diff(e,r,i){return this.monotonic(e,r,i)-e}shortestSignedDiff(e,r){e=this.normalize(e),r=this.normalize(r);const i=r-e,n=r<e?this.minimalMonotonic(e,r)-e:r-this.minimalMonotonic(r,e);return Math.abs(i)<Math.abs(n)?i:n}contains(e,r,i){return r=this.minimalMonotonic(e,r),i=this.minimalMonotonic(e,i),i>e&&i<r}}function o0(t){for(const e in t){const r=t[e];r instanceof Function&&(t[e]=r.bind(t))}return t}o0(new s0(0,Math.PI*2));o0(new s0(-Math.PI,Math.PI));const aL=o0(new s0(0,360));let Li=class extends Zn(G){constructor(...e){super(...e),this.position=new q([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,r,i,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const o={position:e};return r!=null&&(o.heading=r),i!=null&&(o.tilt=i),n!=null&&(o.fov=n),o}return e}writePosition(e,r,i,n){const s=e.clone();s.x=dr(e.x||0),s.y=dr(e.y||0),s.z=e.hasZ?dr(e.z||0):e.z,r[i]=s.write({},n)}readPosition(e,r){const i=new q;return i.read(e,r),i.x=dr(i.x||0),i.y=dr(i.y||0),i.z=i.hasZ?dr(i.z||0):i.z,i}equals(e){return e==null?!1:this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};c([d({type:q,json:{write:{isRequired:!0}}})],Li.prototype,"position",void 0);c([de("position")],Li.prototype,"writePosition",null);c([fe("position")],Li.prototype,"readPosition",null);c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt(t=>aL.normalize(dr(t)))],Li.prototype,"heading",void 0);c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt(t=>Wr(dr(t),-180,180))],Li.prototype,"tilt",void 0);c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Li.prototype,"fov",void 0);Li=c([T("esri.Camera")],Li);const lL=Li;var oy;let kn=oy=class extends G{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return e=e%360,e<0&&(e+=360),e}clone(){return new oy({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a0}}}}})],kn.prototype,"rotation",void 0);c([wt("rotation")],kn.prototype,"castRotation",null);c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a0}}}}})],kn.prototype,"scale",void 0);c([d({types:Rg,json:{read:vr,write:!0,origins:{"web-scene":{read:vr,write:{overridePolicy:a0}}}}})],kn.prototype,"targetGeometry",void 0);c([d({type:lL,json:{write:!0}})],kn.prototype,"camera",void 0);kn=oy=c([T("esri.Viewpoint")],kn);function a0(){return{enabled:!this.camera}}const Vr=kn;function Z(t,e,r={}){return l0(t,e,r,iT)}function Ln(t,e,r={}){return l0(t,e,r,nT)}function l0(t,e,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(xe(n),e(o,a))}:(o,a)=>{i(o)&&e(o,a)};if(n=G3(t,s,r.sync,r.equals),r.initial){const o=t();s(o,o)}return n}function cc(t,e,r,i={}){let n=null,s=null,o=null;function a(){var f;!n||!s||(s.remove(),(f=i.onListenerRemove)==null||f.call(i,n),n=null,s=null)}function u(f){i.once&&i.once&&xe(o),r(f)}const h=Z(t,(f,p)=>{var m;a(),Nd(f)&&(n=f,s=Dd(f,e,u),(m=i.onListenerAdd)==null||m.call(i,f))},{sync:i.sync,initial:!0});return o=ga(()=>{h.remove(),a()}),o}function c0(t,e){return cL(t,nT,e)}function cL(t,e,r){if(wr(r))return Promise.reject(Ae());const i=t();if(e!=null&&e(i))return Promise.resolve(i);let n=null;function s(){n=xe(n)}return new Promise((o,a)=>{n=Id([Zt(r,()=>{s(),a(Ae())}),l0(t,u=>{s(),o(u)},{sync:!1,once:!0},e??iT)])})}function iT(t){return!0}function nT(t){return!!t}const uc={sync:!0},tt={initial:!0},rs={sync:!0,initial:!0};class Zh{constructor(e=r=>r.values().next().value){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let e;for(e of this._items);return e}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach(r=>{e(r)||this._items.delete(r)}),this}}const uL={statsWorker:()=>R(()=>import("./statsWorker-334dbf28.js"),["assets/statsWorker-334dbf28.js","assets/quantizationUtils-b95043a5.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js"]),geometryEngineWorker:()=>R(()=>import("./geometryEngineWorker-5010a491.js"),["assets/geometryEngineWorker-5010a491.js","assets/geometryEngineJSON-17d1a0f4.js","assets/geometryEngineBase-2fe41455.js","assets/json-9ae8d6f8.js"]),CSVSourceWorker:()=>R(()=>import("./CSVSourceWorker-d35f5e3a.js"),["assets/CSVSourceWorker-d35f5e3a.js","assets/json-9ae8d6f8.js","assets/OptimizedGeometry-af84d2ad.js","assets/FeatureStore-bdf249af.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/BoundsStore-20eda02d.js","assets/PooledRBush-968a22bf.js","assets/centroid-1116d1e7.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/number-d8768a5d.js","assets/clientSideDefaults-0d467496.js","assets/defaultsJSON-b396ba80.js"]),EdgeProcessingWorker:()=>R(()=>import("./EdgeProcessingWorker-31989b6c.js"),["assets/EdgeProcessingWorker-31989b6c.js","assets/InterleavedLayout-283d747b.js","assets/BufferView-8fafabc2.js","assets/vec4-3dd523e8.js","assets/types-c657ebd9.js","assets/edgeProcessing-12ee7edf.js","assets/deduplicate-0cf2aa08.js","assets/Indices-1e1b26e2.js","assets/VertexAttribute-8238ac80.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js"]),ElevationSamplerWorker:()=>R(()=>import("./ElevationSamplerWorker-5ff40c38.js"),["assets/ElevationSamplerWorker-5ff40c38.js","assets/PooledRBush-968a22bf.js","assets/georeference-052b749f.js","assets/mat3f64-c33d428a.js","assets/mat4f64-06a72c15.js","assets/spatialReferenceEllipsoidUtils-8ff0b86c.js","assets/quat-ad6fdcec.js","assets/vec4-3dd523e8.js","assets/quatf64-5b0101cd.js","assets/vec32-b13103c9.js","assets/BufferView-8fafabc2.js"]),FeatureServiceSnappingSourceWorker:()=>R(()=>import("./FeatureServiceSnappingSourceWorker-4fa85191.js"),["assets/FeatureServiceSnappingSourceWorker-4fa85191.js","assets/FeatureStore-bdf249af.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/BoundsStore-20eda02d.js","assets/PooledRBush-968a22bf.js","assets/centroid-1116d1e7.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/ElevationInfo-c5dc6698.js","assets/lengthUtils-73ca5ae7.js","assets/LRUCache-9a513454.js","assets/pbfQueryUtils-5927997d.js","assets/pbf-03b64555.js","assets/query-265b258d.js","assets/queryZScale-471b0dc8.js","assets/byteSizeEstimations-a7209dec.js","assets/ByteSizeUnit-c0a244d3.js"]),GeoJSONSourceWorker:()=>R(()=>import("./GeoJSONSourceWorker-145af511.js"),["assets/GeoJSONSourceWorker-145af511.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/FeatureStore-bdf249af.js","assets/BoundsStore-20eda02d.js","assets/PooledRBush-968a22bf.js","assets/centroid-1116d1e7.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/geojson-a29785f2.js","assets/clientSideDefaults-0d467496.js","assets/defaultsJSON-b396ba80.js","assets/sourceUtils-6587a5a0.js","assets/fieldType-ca53e87a.js"]),LercWorker:()=>R(()=>import("./LercWorker-24be57a8.js"),[]),MemorySourceWorker:()=>R(()=>import("./MemorySourceWorker-ae5b6661.js"),["assets/MemorySourceWorker-ae5b6661.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/objectIdUtils-75d6d581.js","assets/FeatureStore-bdf249af.js","assets/BoundsStore-20eda02d.js","assets/PooledRBush-968a22bf.js","assets/centroid-1116d1e7.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/clientSideDefaults-0d467496.js","assets/defaultsJSON-b396ba80.js","assets/sourceUtils-6587a5a0.js","assets/fieldType-ca53e87a.js"]),PBFDecoderWorker:()=>R(()=>import("./PBFDecoderWorker-9b5531a8.js"),["assets/PBFDecoderWorker-9b5531a8.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/pbfQueryUtils-5927997d.js","assets/pbf-03b64555.js"]),Pipeline:()=>R(()=>import("./Pipeline-0c65795d.js"),["assets/Pipeline-0c65795d.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/utils-dbf790c5.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/FeatureStore2D-58c028c6.js","assets/CircularArray-7e036143.js","assets/diffUtils-abe9f3bb.js","assets/ComputedAttributeStorage-533cb852.js","assets/arcadeTimeUtils-27f70e01.js","assets/centroid-1116d1e7.js","assets/definitions-3f56d206.js","assets/visualVariablesUtils-862ca6c0.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/visualVariablesUtils-7a227620.js","assets/ogcFeatureUtils-3f7ac6eb.js","assets/geojson-a29785f2.js","assets/clientSideDefaults-0d467496.js","assets/defaultsJSON-b396ba80.js","assets/fieldType-ca53e87a.js","assets/query-265b258d.js","assets/pbfQueryUtils-5927997d.js","assets/pbf-03b64555.js","assets/queryZScale-471b0dc8.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/createConnection-511b5f1d.js"]),PointCloudWorker:()=>R(()=>import("./PointCloudWorker-76936b63.js"),["assets/PointCloudWorker-76936b63.js","assets/quat-ad6fdcec.js","assets/vec4-3dd523e8.js","assets/I3SBinaryReader-dd69eccc.js","assets/VertexAttribute-8238ac80.js","assets/vec3f32-ec4c3c20.js","assets/PointCloudUniqueValueRenderer-e60b04b5.js","assets/LegendOptions-2499ed1a.js","assets/ColorStop-3619cfe4.js"]),RasterWorker:()=>R(()=>import("./RasterWorker-7c4644d7.js"),["assets/RasterWorker-7c4644d7.js","assets/dataUtils-f3c6740f.js","assets/RasterSymbolizer-0dca619f.js","assets/colorUtils-6f72410e.js","assets/utils-b09b8f48.js","assets/colorRamps-a8ae4226.js","assets/rasterProjectionHelper-f4e9d70c.js"]),SceneLayerSnappingSourceWorker:()=>R(()=>import("./SceneLayerSnappingSourceWorker-2b0e789f.js"),["assets/SceneLayerSnappingSourceWorker-2b0e789f.js","assets/sphere-2d11e72b.js","assets/ray-823d4522.js","assets/ByteSizeUnit-c0a244d3.js","assets/mat3f64-c33d428a.js","assets/mat4f64-06a72c15.js","assets/quatf64-5b0101cd.js","assets/vec4f64-efdcb593.js","assets/vec4-3dd523e8.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/MemCache-75bedf1f.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/plane-b076392c.js","assets/InterleavedLayout-283d747b.js","assets/BufferView-8fafabc2.js","assets/types-c657ebd9.js","assets/edgeProcessing-12ee7edf.js","assets/deduplicate-0cf2aa08.js","assets/Indices-1e1b26e2.js","assets/VertexAttribute-8238ac80.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js"]),SceneLayerWorker:()=>R(()=>import("./SceneLayerWorker-d8685496.js"),["assets/SceneLayerWorker-d8685496.js","assets/ray-823d4522.js","assets/ByteSizeUnit-c0a244d3.js","assets/mat3f64-c33d428a.js","assets/mat4f64-06a72c15.js","assets/quatf64-5b0101cd.js","assets/vec4f64-efdcb593.js"]),WFSSourceWorker:()=>R(()=>import("./WFSSourceWorker-8321f8a8.js"),["assets/WFSSourceWorker-8321f8a8.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/FeatureStore-bdf249af.js","assets/BoundsStore-20eda02d.js","assets/PooledRBush-968a22bf.js","assets/centroid-1116d1e7.js","assets/utils-dbf790c5.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/QueryEngine-5a0f627c.js","assets/MemCache-75bedf1f.js","assets/QueryEngineResult-4d7db0c9.js","assets/quantizationUtils-b95043a5.js","assets/ItemCache-8ce94fa3.js","assets/WhereClause-741374f4.js","assets/executionError-e2eca390.js","assets/_commonjsHelpers-725317a4.js","assets/utils-cdb74f07.js","assets/generateRendererUtils-00b1e164.js","assets/QueryEngineCapabilities-60118ddb.js","assets/timeSupport-a17b5404.js","assets/FieldsIndex-58671a99.js","assets/geojson-a29785f2.js","assets/sourceUtils-6587a5a0.js","assets/wfsUtils-d2672dcc.js","assets/xmlUtils-2b925ee3.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js"]),WorkerTileHandler:()=>R(()=>import("./WorkerTileHandler-f7701be9.js"),["assets/WorkerTileHandler-f7701be9.js","assets/enums-977a0ba8.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/config-c06e4a6d.js","assets/StyleDefinition-edaaf36e.js","assets/enums-eb6e4255.js","assets/pbf-03b64555.js","assets/TurboLine-6daee102.js","assets/definitions-3f56d206.js","assets/StyleRepository-39a558db.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/colorUtils-6f72410e.js","assets/earcut-db592379.js","assets/BidiEngine-cdaf024a.js"])};var Qe;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Qe||(Qe={}));let hL=0;function sT(){return hL++}function dL(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function hc(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function u0(t,e,r,i){if(e.type===Qe.OPEN_PORT){t.postMessage(e,[e.port]);return}if(e.type!==Qe.INVOKE&&e.type!==Qe.RESPONSE){t.postMessage(e);return}let n;if(dL(r)?(n=ow(r.transferList),e.data=r.result):(n=ow(i),e.data=r),n){if(C("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>255*1024*1024){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Qe.INVOKE:throw o;case Qe.RESPONSE:u0(t,{type:Qe.RESPONSE,jobId:e.jobId,error:hc(o)});return}}}t.postMessage(e,n)}else t.postMessage(e)}function dc(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function ow(t){if(!t||!t.length)return null;if(C("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(r=>!fL(r));return e.length?e:null}function fL(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:aw,ABORT:lw,INVOKE:cw,RESPONSE:Va,OPEN_PORT:uw,ON:pL}=Qe,mL=2;class yL{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Qe.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class bt{static connect(e){const r=new MessageChannel;let i;typeof e=="function"?i=new e:"default"in e&&typeof e.default=="function"?i=new e.default:i=e;const n=new bt(r.port1,{channel:r,client:i},()=>null);return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=n),bt.clients.set(n,i),r.port2}static loadWorker(e){const r=uL[e];return r?r():Promise.resolve(null)}constructor(e,r,i){this._port=e,this._getNextJob=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new yL(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:aw}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new D("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:r}));const o=sT();return new Promise((a,u)=>{if(wr(n)){this._processWork(),u(Ae());return}const h=Zt(n,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),xe(p.abortHandle),this._post({type:lw,jobId:o}),u(Ae()))}),f={resolve:a,reject:u,abortHandle:h,debugInfo:e};this._outJobs.set(o,f),this._post({type:cw,jobId:o,methodName:e,abortable:n!=null},r,s)})}on(e,r){const i=new MessageChannel;this._port.postMessage({type:Qe.ON,eventType:e,port:i.port2},[i.port2]);function n(s){r(s.data)}return i.port1.addEventListener("message",n),i.port1.start(),{remove(){i.port1.postMessage({type:Qe.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:uw,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=mL)return;const e=this._getNextJob();if(!e)return;const{methodName:r,data:i,invokeOptions:n,deferred:s}=e;this.invoke(r,i,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{xe(e.abortHandle),e.reject(Ae(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const r=dc(e);if(r)switch(r.type){case Va:this._onResponseMessage(r);break;case cw:this._invokeQueue.push(r);break;case lw:this._onAbortMessage(r);break;case aw:this._onCloseMessage();break;case uw:this._onOpenPortMessage(r);break;case pL:this._onOnMessage(r);break}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,n=r.get(i);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&bt.clients.get(this)===e&&e.destroy(),bt.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:r,jobId:i,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let u=this._client,h=u[r],f;try{if(!h&&r&&r.includes(".")){const p=r.split(".");for(let m=0;m<p.length-1;m++)u=u[p[m]],h=u[p[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);f=h.call(u,n,{client:this,signal:o?o.signal:null})}catch(p){this._post({type:Va,jobId:i,error:hc(p)});return}zi(f)?(a.set(i,{controller:o,promise:f}),f.then(p=>{a.has(i)&&(a.delete(i),this._post({type:Va,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),Gi(p)||this._post({type:Va,jobId:i,error:hc(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:Va,jobId:i},f)}_onOpenPortMessage(e){new bt(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:r}=e,i=this._client.on(e.eventType,s=>{r.postMessage(s)}),n=Dd(e.port,"message",s=>{const o=dc(s);(o==null?void 0:o.type)===Qe.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(e){const{jobId:r,error:i,data:n}=e,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),xe(o.abortHandle),i?o.reject(D.fromJSON(JSON.parse(i))):o.resolve(n)}_post(e,r,i){return u0(this._port,e,r,i)}}bt.kernelInfo={buildDate:Rd,fullVersion:kc,revision:tb};bt.clients=new Map;class gL{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Zh}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,r){return new Promise((i,n)=>{let s=!0;const o=a=>{De(r.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const u=e[a];if(zi(u)){this._clientPromises[a]=u.then(h=>(this._clients[a]=new bt(h,r,()=>this._ongoingJobsQueue.pop()??null),o(i),this._clients[a]),()=>(o(n),null));continue}this._clients[a]=new bt(u,r,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i)}})}broadcast(e,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,r,i))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(Ae(`Worker closing, aborting job calling '${e.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,r,i){let n;Array.isArray(i)?(k.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:i}):n=i;const s=Ti();this._ongoingJobsQueue.push({methodName:e,data:r,invokeOptions:n,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(u=>u==null?void 0:u.jobAdded())}return s.promise}on(e,r){return Promise.all(this._clientPromises).then(()=>Id(this._clients.map(i=>i.on(e,r))))}openPorts(){return new Promise(e=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(o=>{o&&(r[n]=o.openPort()),--i===0&&e(r)})})}get test(){return{numClients:this._clients.length}}}const oT=k.getLogger("esri.intl.substitute");function Yz(t,e,r={}){const{format:i={}}=r;return Xy(t,n=>_L(n,e,i))}function _L(t,e,r){let i,n;const s=t.indexOf(":");if(s===-1?i=t.trim():(i=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!i)return"";const o=Ac(i,e);if(o==null)return"";const a=(n?r==null?void 0:r[n]:null)??(r==null?void 0:r[i]);return a?wL(o,a):n?vL(o,n):h0(o)}function wL(t,e){switch(e.type){case"date":return Ul(t,e.intlOptions);case"number":return Vl(t,e.intlOptions);default:return oT.warn("missing format descriptor for key {key}"),h0(t)}}function vL(t,e){switch(e.toLowerCase()){case"dateformat":return Ul(t);case"numberformat":return Vl(t);default:return oT.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Ul(t):/^numberformat/i.test(e)?Vl(t):h0(t)}}function h0(t){switch(typeof t){case"string":return t;case"number":return Vl(t);case"boolean":return""+t;default:return t instanceof Date?Ul(t):""}}async function bL(t,e,r,i){const n=e.exec(r);if(!n)throw new D("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=JI(i),u=`${s}${o}.json`,h=a?`${s}${o}_${a}.json`:u;let f;try{f=await hw(t(h))}catch(p){if(h===u)throw new D("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:p});try{f=await hw(t(u))}catch(m){throw new D("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return f}async function hw(t){if(dw.fetchBundleAsset!=null)return dw.fetchBundleAsset(t);const e=await yt(t,{responseType:"text"});return JSON.parse(e.data)}class SL{constructor({base:e="",pattern:r,location:i=new URL(window.location.href)}){let n;typeof i=="string"?n=s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?n=s=>new URL(s,i).href:n=i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,r){return bL(this.getAssetUrl,this.matcher,e,r)}}function TL(t){return new SL(t)}const dw={};YI(TL({pattern:"esri/",location:ae}));const EL={};function ML(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=EL.baseUrl),e}class PL{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>e[r](...i)})}}class Zu{constructor(){this._dispatcher=new PL,this._workerPostMessage({type:Qe.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){lh(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,r,i){this._dispatcher.addEventListener(e,r,i)}removeEventListener(e,r,i){this._dispatcher.removeEventListener(e,r,i)}_workerPostMessage(e){lh(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const r=dc(e);if(r&&r.type===Qe.OPEN){const{modulePath:i,jobId:n}=r;let s=await bt.loadWorker(i);s||(s=await R(()=>import(i),[]));const o=bt.connect(s);this._workerPostMessage({type:Qe.OPENED,jobId:n,data:o})}}}const ay=k.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:CL}=Qe,AL='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let ou,au;const fw="Failed to create Worker. Fallback to execute module in main thread";async function IL(){if(!C("esri-workers")||C("mozilla")&&!1)return pw(new Zu);if(!ou&&!au)try{const e=AL.split('"{CONFIGURATION}"').join(`'${OL()}'`);ou=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){au=e||{}}let t;if(!ou)ay.warn(fw,au),t=new Zu;else try{t=new Worker(ou,{name:`esri-worker-${xL++}`})}catch{ay.warn(fw,au),t=new Zu}return pw(t)}async function pw(t){return new Promise(e=>{function r(n){const s=dc(n);s&&s.type===CL&&(t.removeEventListener("message",r),t.removeEventListener("error",i),e(t))}function i(n){n.preventDefault(),t.removeEventListener("message",r),t.removeEventListener("error",i),ay.warn("Failed to create Worker. Fallback to execute module in main thread",n),t=new Zu,t.addEventListener("message",r),t.addEventListener("error",i)}t.addEventListener("message",r),t.addEventListener("error",i)})}function OL(){let t;if(se.default!=null){const n={...se};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(se));t.assetsPath=Bt(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Bt(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=gr(),t.has={"esri-csp-restrictions":C("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":C("esri-2d-update-debug"),"featurelayer-pbf":C("featurelayer-pbf"),"featurelayer-simplify-thresholds":C("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":C("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":C("featurelayer-simplify-mobile-factor"),"esri-atomics":C("esri-atomics"),"esri-shared-array-buffer":C("esri-shared-array-buffer"),"esri-tiles-debug":C("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":C("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":C("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":C("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=Bt(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Bt(t.workers.workerPath):t.workers.workerPath=Bt(ae("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=se.workers.loaderConfig,r=ML({baseUrl:e==null?void 0:e.baseUrl,locale:gr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:r,kernelInfo:{buildDate:Rd,fullVersion:kc,revision:tb}})}let xL=0;const{ABORT:mw,INVOKE:kL,OPEN:LL,OPENED:RL,RESPONSE:Ga}=Qe;class d0{static async create(e){const r=await IL();return new d0(r,e)}constructor(e,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=r,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",i=>{i.preventDefault(),k.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(e,r={}){const{signal:i}=r,n=sT();return new Promise((s,o)=>{const a=tg(i,()=>{this._outJobs.delete(n),this._post({type:mw,jobId:n})}),u={resolve:s,reject:o,abortHandle:a};this._outJobs.set(n,u),this._post({type:LL,jobId:n,modulePath:e})})}_onMessage(e){const r=dc(e);if(r)switch(r.type){case RL:this._onOpenedMessage(r);break;case Ga:this._onResponseMessage(r);break;case mw:this._onAbortMessage(r);break;case kL:this._onInvokeMessage(r);break}}_onAbortMessage(e){const r=this._inJobs,i=e.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(e){const{methodName:r,jobId:i,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,u=KA[r];let h;try{if(typeof u!="function")throw new TypeError(`${r} is not a function`);h=u.call(null,n,{signal:o?o.signal:null})}catch(f){this._post({type:Ga,jobId:i,error:hc(f)});return}zi(h)?(a.set(i,{controller:o,promise:h}),h.then(f=>{a.has(i)&&(a.delete(i),this._post({type:Ga,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),f||(f={message:"Error encountered at method"+r}),Gi(f)||this._post({type:Ga,jobId:i,error:hc(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Ga,jobId:i},h)}_onOpenedMessage(e){const{jobId:r,data:i}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),xe(n.abortHandle),n.resolve(i))}_onResponseMessage(e){const{jobId:r,error:i,data:n}=e,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),xe(s.abortHandle),i?s.reject(D.fromJSON(JSON.parse(i))):s.resolve(n))}_post(e,r,i){return u0(this.worker,e,r,i)}}const yw=Math.min(navigator.hardwareConcurrency-1,C("workers-pool-size"));let ls=C("esri-mobile")?Math.min(yw,3):C("host-browser")?yw:0;ls||(ls=C("safari")&&C("mac")?7:2);let gw=0;const Yu=[];function NL(){aT()}async function lu(t,e){const r=new gL;return await r.open(t,e),r}async function Jz(t,e={}){if(typeof t!="string")throw new D("workers:undefined-module","modulePath is missing");let r=e.strategy||"distributed";if(C("host-webworker")&&!C("esri-workers")&&(r="local"),r==="local"){let n=await bt.loadWorker(t);n||(n=await R(()=>import(t),[])),De(e.signal);const s=e.client||n,o=bt.connect(n);return lu([o],{...e,client:s})}if(await aT(),De(e.signal),r==="dedicated"){const n=gw++%ls,s=await Yu[n].open(t,e);return lu([s],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,ls);if(n<ls){const s=new Array(n);for(let o=0;o<n;++o){const a=gw++%ls;s[o]=Yu[a].open(t,e)}return lu(s,e)}}const i=Yu.map(n=>n.open(t,e));return lu(i,e)}let cu=null;async function aT(){if(cu)return cu;new AbortController;const t=[];for(let e=0;e<ls;e++){const r=d0.create(e).then(i=>(Yu[e]=i,i));t.push(r)}return cu=Promise.all(t),cu}function Kz(t,e,r,i,n,s,o,a,u,h,f,p,m,y,_,v,w){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=h,t[9]=f,t[10]=p,t[11]=m,t[12]=y,t[13]=_,t[14]=v,t[15]=w,t}function lT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DL(t,e){if(t===e){const r=e[1],i=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Xz(t,e){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8],p=e[9],m=e[10],y=e[11],_=e[12],v=e[13],w=e[14],S=e[15],P=r*a-i*o,M=r*u-n*o,A=r*h-s*o,I=i*u-n*a,O=i*h-s*a,F=n*h-s*u,$=f*v-p*_,J=f*w-m*_,U=f*S-y*_,K=p*w-m*v,B=p*S-y*v,re=m*S-y*w;let j=P*re-M*B+A*K+I*U-O*J+F*$;return j?(j=1/j,t[0]=(a*re-u*B+h*K)*j,t[1]=(n*B-i*re-s*K)*j,t[2]=(v*F-w*O+S*I)*j,t[3]=(m*O-p*F-y*I)*j,t[4]=(u*U-o*re-h*J)*j,t[5]=(r*re-n*U+s*J)*j,t[6]=(w*A-_*F-S*M)*j,t[7]=(f*F-m*A+y*M)*j,t[8]=(o*B-a*U+h*$)*j,t[9]=(i*U-r*B-s*$)*j,t[10]=(_*O-v*A+S*P)*j,t[11]=(p*A-f*O-y*P)*j,t[12]=(a*J-o*K-u*$)*j,t[13]=(r*K-i*J+n*$)*j,t[14]=(v*M-_*I-w*P)*j,t[15]=(f*I-p*M+m*P)*j,t):null}function Qz(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],f=e[7],p=e[8],m=e[9],y=e[10],_=e[11],v=e[12],w=e[13],S=e[14],P=e[15];let M=r[0],A=r[1],I=r[2],O=r[3];return t[0]=M*i+A*a+I*p+O*v,t[1]=M*n+A*u+I*m+O*w,t[2]=M*s+A*h+I*y+O*S,t[3]=M*o+A*f+I*_+O*P,M=r[4],A=r[5],I=r[6],O=r[7],t[4]=M*i+A*a+I*p+O*v,t[5]=M*n+A*u+I*m+O*w,t[6]=M*s+A*h+I*y+O*S,t[7]=M*o+A*f+I*_+O*P,M=r[8],A=r[9],I=r[10],O=r[11],t[8]=M*i+A*a+I*p+O*v,t[9]=M*n+A*u+I*m+O*w,t[10]=M*s+A*h+I*y+O*S,t[11]=M*o+A*f+I*_+O*P,M=r[12],A=r[13],I=r[14],O=r[15],t[12]=M*i+A*a+I*p+O*v,t[13]=M*n+A*u+I*m+O*w,t[14]=M*s+A*h+I*y+O*S,t[15]=M*o+A*f+I*_+O*P,t}function ej(t,e,r){const i=r[0],n=r[1],s=r[2];if(e===t)t[12]=e[0]*i+e[4]*n+e[8]*s+e[12],t[13]=e[1]*i+e[5]*n+e[9]*s+e[13],t[14]=e[2]*i+e[6]*n+e[10]*s+e[14],t[15]=e[3]*i+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],u=e[2],h=e[3],f=e[4],p=e[5],m=e[6],y=e[7],_=e[8],v=e[9],w=e[10],S=e[11];t[0]=o,t[1]=a,t[2]=u,t[3]=h,t[4]=f,t[5]=p,t[6]=m,t[7]=y,t[8]=_,t[9]=v,t[10]=w,t[11]=S,t[12]=o*i+f*n+_*s+e[12],t[13]=a*i+p*n+v*s+e[13],t[14]=u*i+m*n+w*s+e[14],t[15]=h*i+y*n+S*s+e[15]}return t}function tj(t,e,r){const i=r[0],n=r[1],s=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function rj(t,e,r,i){let n=i[0],s=i[1],o=i[2],a=Math.sqrt(n*n+s*s+o*o),u,h,f,p,m,y,_,v,w,S,P,M,A,I,O,F,$,J,U,K,B,re,j,Pt;return a<Lc()?null:(a=1/a,n*=a,s*=a,o*=a,u=Math.sin(r),h=Math.cos(r),f=1-h,p=e[0],m=e[1],y=e[2],_=e[3],v=e[4],w=e[5],S=e[6],P=e[7],M=e[8],A=e[9],I=e[10],O=e[11],F=n*n*f+h,$=s*n*f+o*u,J=o*n*f-s*u,U=n*s*f-o*u,K=s*s*f+h,B=o*s*f+n*u,re=n*o*f+s*u,j=s*o*f-n*u,Pt=o*o*f+h,t[0]=p*F+v*$+M*J,t[1]=m*F+w*$+A*J,t[2]=y*F+S*$+I*J,t[3]=_*F+P*$+O*J,t[4]=p*U+v*K+M*B,t[5]=m*U+w*K+A*B,t[6]=y*U+S*K+I*B,t[7]=_*U+P*K+O*B,t[8]=p*re+v*j+M*Pt,t[9]=m*re+w*j+A*Pt,t[10]=y*re+S*j+I*Pt,t[11]=_*re+P*j+O*Pt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function $L(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ij(t,e,r){if(e===0)return lT(t);let i=r[0],n=r[1],s=r[2],o=Math.sqrt(i*i+n*n+s*s),a,u,h;return o<Lc()?null:(o=1/o,i*=o,n*=o,s*=o,a=Math.sin(e),u=Math.cos(e),h=1-u,t[0]=i*i*h+u,t[1]=n*i*h+s*a,t[2]=s*i*h-n*a,t[3]=0,t[4]=i*n*h-s*a,t[5]=n*n*h+u,t[6]=s*n*h+i*a,t[7]=0,t[8]=i*s*h+n*a,t[9]=n*s*h-i*a,t[10]=s*s*h+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function nj(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function sj(t,e,r,i){const n=e[0],s=e[1],o=e[2],a=e[3],u=n+n,h=s+s,f=o+o,p=n*u,m=n*h,y=n*f,_=s*h,v=s*f,w=o*f,S=a*u,P=a*h,M=a*f,A=i[0],I=i[1],O=i[2];return t[0]=(1-(_+w))*A,t[1]=(m+M)*A,t[2]=(y-P)*A,t[3]=0,t[4]=(m-M)*I,t[5]=(1-(p+w))*I,t[6]=(v+S)*I,t[7]=0,t[8]=(y+P)*O,t[9]=(v-S)*O,t[10]=(1-(p+_))*O,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function oj(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function aj(t,e){if(t===e)return!0;const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],f=t[8],p=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],S=t[15],P=e[0],M=e[1],A=e[2],I=e[3],O=e[4],F=e[5],$=e[6],J=e[7],U=e[8],K=e[9],B=e[10],re=e[11],j=e[12],Pt=e[13],ka=e[14],ai=e[15],ve=Lc();return Math.abs(r-P)<=ve*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(i-M)<=ve*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(n-A)<=ve*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(s-I)<=ve*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(o-O)<=ve*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-F)<=ve*Math.max(1,Math.abs(a),Math.abs(F))&&Math.abs(u-$)<=ve*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(h-J)<=ve*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(f-U)<=ve*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(p-K)<=ve*Math.max(1,Math.abs(p),Math.abs(K))&&Math.abs(m-B)<=ve*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(y-re)<=ve*Math.max(1,Math.abs(y),Math.abs(re))&&Math.abs(_-j)<=ve*Math.max(1,Math.abs(_),Math.abs(j))&&Math.abs(v-Pt)<=ve*Math.max(1,Math.abs(v),Math.abs(Pt))&&Math.abs(w-ka)<=ve*Math.max(1,Math.abs(w),Math.abs(ka))&&Math.abs(S-ai)<=ve*Math.max(1,Math.abs(S),Math.abs(ai))}function lj(t){const e=Lc(),r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],h=t[9],f=t[10];return Math.abs(1-(r*r+s*s+u*u))<=e&&Math.abs(1-(i*i+o*o+h*h))<=e&&Math.abs(1-(n*n+a*a+f*f))<=e}function cj(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}let uu,E=null;function cT(){return!!E}function FL(){return!!C("esri-wasm")}function uT(){return uu||(uu=R(()=>import("./pe-wasm-359819ae.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>ae(`esri/geometry/support/${e}`)})).then(t=>{dT(t)}),uu)}var ly;(function(t){function e(s,o,a){E.ensureCache.prepare();const u=qs(a),h=a===u,f=E.ensureFloat64(u),p=E._pe_geog_to_proj(E.getPointer(s),o,f);return p&&Rn(a,o,f,h),p}t.geogToProj=e;function r(s,o,a,u){switch(u){case Se.PE_TRANSFORM_P_TO_G:return i(s,o,a);case Se.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}t.projGeog=r;function i(s,o,a){return n(s,o,a,0)}t.projToGeog=i;function n(s,o,a,u){E.ensureCache.prepare();const h=qs(a),f=a===h,p=E.ensureFloat64(h),m=E._pe_proj_to_geog_center(E.getPointer(s),o,p,u);return m&&Rn(a,o,p,f),m}t.projToGeogCenter=n})(ly||(ly={}));var Se;(function(t){function e(){t.PE_BUFFER_MAX=E.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=E.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=E.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=E.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=E.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=E.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=E.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=E.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=E.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=E.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=E.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=E.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=E.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=E.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=E.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=E.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=E.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=E.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=E.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=E.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=E.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=E.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=E.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=E.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=E.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=E.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=E.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=E.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=E.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=E.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e})(Se||(Se={}));var cy;(function(t){const e={},r={},i=y=>{if(y){const _=y.getType();switch(_){case Se.PE_TYPE_GEOGCS:y=E.castObject(y,E.PeGeogcs);break;case Se.PE_TYPE_PROJCS:y=E.castObject(y,E.PeProjcs);break;case Se.PE_TYPE_GEOGTRAN:y=E.castObject(y,E.PeGeogtran);break;default:_&Se.PE_TYPE_UNIT&&(y=E.castObject(y,E.PeUnit))}}return y};function n(){E.PeFactory.prototype.initialize(null)}t.initialize=n;function s(y){return o(Se.PE_TYPE_COORDSYS,y)}t.coordsys=s;function o(y,_){let v=null,w=e[y];if(w||(w={},e[y]=w),w.hasOwnProperty(String(_)))v=w[_];else{const S=E.PeFactory.prototype.factoryByType(y,_);E.compare(S,E.NULL)||(v=S,w[_]=v)}return v=i(v),v}t.factoryByType=o;function a(y,_){let v=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(_))v=w[_];else{const S=E.PeFactory.prototype.fromString(y,_);E.compare(S,E.NULL)||(v=S,w[_]=v)}return v=i(v),v}t.fromString=a;function u(y){return o(Se.PE_TYPE_GEOGCS,y)}t.geogcs=u;function h(y){return o(Se.PE_TYPE_GEOGTRAN,y)}t.geogtran=h;function f(y){return E.PeFactory.prototype.getCode(y)}t.getCode=f;function p(y){return o(Se.PE_TYPE_PROJCS,y)}t.projcs=p;function m(y){return o(Se.PE_TYPE_UNIT,y)}t.unit=m})(cy||(cy={}));let hT=null;var Yh;(function(t){let e;function r(){t.PE_GTLIST_OPTS_COMMON=E.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=E._pe_getPeGTlistExtendedEntrySize()}t.init=r;function i(n,s,o,a,u,h){let f=null;const p=new E.PeInteger(h);try{const m=E.PeGTlistExtended.prototype.getGTlist(n,s,o,a,u,p);if(h=p.val,h&&(f=[m],h>1)){const y=E.getPointer(m);for(let _=1;_<h;_++)f.push(E.wrapPointer(y+e*_,E.PeGTlistExtendedEntry))}}finally{E.destroy(p)}return f}t.getGTlist=i})(Yh||(Yh={}));var uy;(function(t){function e(r){if(!(!r||!r.length)){for(const i of r)li(i),i.getEntries().forEach(n=>{li(n);const s=n.getGeogtran();li(s),s.getParameters().forEach(li),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{li(o);const a=o.getDatum();li(a),li(a.getSpheroid()),li(o.getPrimem()),li(o.getUnit())})});E.PeGTlistExtendedEntry.prototype.Delete(r[0])}}t.destroy=e})(uy||(uy={}));var hy;(function(t){function e(r,i,n,s,o){E.ensureCache.prepare();const a=qs(n),u=n===a,h=E.ensureFloat64(a);let f=0;s&&(f=E.ensureFloat64(s));const p=E._pe_geog_to_geog(E.getPointer(r),i,h,f,o);return p&&Rn(n,i,h,u),p}t.geogToGeog=e})(hy||(hy={}));var dy;(function(t){const e=(h,f,p,m,y,_)=>{E.ensureCache.prepare();let v,w;switch(h){case"dd":v=E._pe_geog_to_dd,w=Se.PE_DD_MAX;break;case"ddm":v=E._pe_geog_to_ddm,w=Se.PE_DDM_MAX;break;case"dms":v=E._pe_geog_to_dms,w=Se.PE_DMS_MAX;break}let S=0;f&&(S=E.getPointer(f));const P=qs(m),M=E.ensureFloat64(P),A=Qd(p,w),I=E.ensureInt32(A),O=v(S,p,M,y,I);if(O)for(let F=0;F<p;F++)_[F]=E.UTF8ToString(A[F]);return O},r=(h,f,p,m,y)=>{E.ensureCache.prepare();let _;switch(h){case"dd":_=E._pe_dd_to_geog;break;case"ddm":_=E._pe_ddm_to_geog;break;case"dms":_=E._pe_dms_to_geog;break}let v=0;f&&(v=E.getPointer(f));const w=m.map(A=>E.ensureString(A)),S=E.ensureInt32(w),P=E.ensureFloat64(new Array(p*2)),M=_(v,p,S,P);return M&&Rn(y,p,P),M};function i(h,f,p,m,y){return e("dms",h,f,p,m,y)}t.geogToDms=i;function n(h,f,p,m){return r("dms",h,f,p,m)}t.dmsToGeog=n;function s(h,f,p,m,y){return e("ddm",h,f,p,m,y)}t.geogToDdm=s;function o(h,f,p,m){return r("ddm",h,f,p,m)}t.ddmToGeog=o;function a(h,f,p,m,y){return e("dd",h,f,p,m,y)}t.geogToDd=a;function u(h,f,p,m){return r("dd",h,f,p,m)}t.ddToGeog=u})(dy||(dy={}));var Jh;(function(t){function e(){t.PE_MGRS_STYLE_NEW=E.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=E.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=E.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=E.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=E.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}t.init=e;function r(n,s,o,a,u,h,f){E.ensureCache.prepare();let p=0;n&&(p=E.getPointer(n));const m=qs(o),y=E.ensureFloat64(m),_=Qd(s,Se.PE_MGRS_MAX),v=E.ensureInt32(_),w=E._pe_geog_to_mgrs_extended(p,s,y,a,u,h,v);if(w)for(let S=0;S<s;S++)f[S]=E.UTF8ToString(_[S]);return w}t.geogToMgrsExtended=r;function i(n,s,o,a,u){E.ensureCache.prepare();let h=0;n&&(h=E.getPointer(n));const f=o.map(_=>E.ensureString(_)),p=E.ensureInt32(f),m=E.ensureFloat64(new Array(s*2)),y=E._pe_mgrs_to_geog_extended(h,s,p,a,m);return y&&Rn(u,s,m),y}t.mgrsToGeogExtended=i})(Jh||(Jh={}));var fy;(function(t){function e(i,n,s,o,a,u,h){E.ensureCache.prepare();let f=0;i&&(f=E.getPointer(i));const p=qs(s),m=E.ensureFloat64(p),y=Qd(n,Se.PE_MGRS_MAX),_=E.ensureInt32(y),v=E._pe_geog_to_usng(f,n,m,o,a,u,_);if(v)for(let w=0;w<n;w++)h[w]=E.UTF8ToString(y[w]);return v}t.geogToUsng=e;function r(i,n,s,o){E.ensureCache.prepare();let a=0;i&&(a=E.getPointer(i));const u=s.map(m=>E.ensureString(m)),h=E.ensureInt32(u),f=E.ensureFloat64(new Array(n*2)),p=E._pe_usng_to_geog(a,n,h,f);return p&&Rn(o,n,f),p}t.usngToGeog=r})(fy||(fy={}));var Kh;(function(t){function e(){t.PE_UTM_OPTS_NONE=E.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=E.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=E.PeNotationUtm.prototype.PE_UTM_OPTS_NS}t.init=e;function r(n,s,o,a,u){E.ensureCache.prepare();let h=0;n&&(h=E.getPointer(n));const f=qs(o),p=E.ensureFloat64(f),m=Qd(s,Se.PE_UTM_MAX),y=E.ensureInt32(m),_=E._pe_geog_to_utm(h,s,p,a,y);if(_)for(let v=0;v<s;v++)u[v]=E.UTF8ToString(m[v]);return _}t.geogToUtm=r;function i(n,s,o,a,u){E.ensureCache.prepare();let h=0;n&&(h=E.getPointer(n));const f=o.map(_=>E.ensureString(_)),p=E.ensureInt32(f),m=E.ensureFloat64(new Array(s*2)),y=E._pe_utm_to_geog(h,s,p,a,m);return y&&Rn(u,s,m),y}t.utmToGeog=i})(Kh||(Kh={}));var Xh;(function(t){const e=new Map;function r(){t.PE_PCSINFO_OPTION_NONE=E.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=E.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=E.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=E.PePCSInfo.prototype.PE_POLE_POINT}t.init=r;function i(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=E.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.generate=i})(Xh||(Xh={}));var py;(function(t){function e(){return E.PeVersion.prototype.version_string()}t.versionString=e})(py||(py={}));function dT(t){E=t,Se.init(),Yh.init(),Jh.init(),Kh.init(),Xh.init(),hT=class extends E.PeGCSExtent{destroy(){E.destroy(this)}};function e(s,o,a){s[o]=a(s[o])}const r=[E.PeDatum,E.PeGeogcs,E.PeGeogtran,E.PeObject,E.PeParameter,E.PePrimem,E.PeProjcs,E.PeSpheroid,E.PeUnit];for(const s of r)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Se.PE_NAME_MAX))});for(const s of[E.PeGeogtran,E.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Se.PE_PARM_MAX);let u=o.call(this);for(let h=0;h<a.length;h++){const f=E.getValue(u,"*");a[h]=f?E.wrapPointer(f,E.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});e(E.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[],u=s.call(this);return Rn(a,o,u),a}),e(E.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=E._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=s.call(this);if(!E.compare(u,E.NULL)){a=[u];const h=this.getSteps();if(h>1){const f=E.getPointer(u);for(let p=1;p<h;p++)a.push(E.wrapPointer(f+o*p,E.PeGTlistExtendedGTs))}}return a}});const i=E._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const u=s.call(this);if(!E.compare(u,E.NULL)){a=[u];const h=u.getNump();if(h>1){const f=E.getPointer(u);for(let p=1;p<h;p++)a.push(E.wrapPointer(f+i*p,E.PeHorizon))}}return o.set(s,a),a};e(E.PeProjcs.prototype,"horizonGcsGenerate",n),e(E.PeProjcs.prototype,"horizonPcsGenerate",n),E.PeObject.prototype.toString=function(s=Se.PE_STR_OPTS_NONE){E.ensureCache.prepare();const o=E.getPointer(this),a=E.ensureInt8(new Array(Se.PE_BUFFER_MAX));return E.UTF8ToString(E._pe_object_to_string_ext(o,s,a))}}function li(t){if(!t)return;const e=E.getClass(t);if(!e)return;const r=E.getCache(e);if(!r)return;const i=E.getPointer(t);i&&delete r[i]}function Qd(t,e){const r=[],i=new Array(e);for(let n=0;n<t;n++)r.push(E.ensureInt8(i));return r}function qs(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(r=>{e.push(r[0],r[1])})):e=t,e}function Rn(t,e,r,i=!1){if(i)for(let n=0;n<2*e;n++)t[n]=E.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=E.getValue(r,"double"),t[s][1]=E.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}const UL=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return ly},get PeDefs(){return Se},get PeFactory(){return cy},get PeGCSExtent(){return hT},get PeGTTransformations(){return hy},get PeGTlistExtended(){return Yh},get PeGTlistExtendedEntry(){return uy},get PeNotationDms(){return dy},get PeNotationMgrs(){return Jh},get PeNotationUsng(){return fy},get PeNotationUtm(){return Kh},get PePCSInfo(){return Xh},get PeVersion(){return py},_init:dT,get _pe(){return E},isLoaded:cT,isSupported:FL,load:uT},Symbol.toStringTag,{value:"Module"})),Zi=Ee.radius;//!< equatorial radius used for WGS84 ellipsoid
const nr=Ee.eccentricitySquared,VL={a1:Zi*nr,a2:Zi*nr*Zi*nr,a3:Zi*nr*nr/2,a4:Zi*nr*Zi*nr*2.5,a5:Zi*nr+Zi*nr*nr/2,a6:1-nr};1/294.9786982,1/298.257222101,Ee.radius,Ee.flattening,Tn.radius,Tn.flattening,1/192.0430107526882,wi.radius,wi.flattening,1/15.41440275981026,1/10.2079945799458,1/43.61604095563141,1/58.54373522458629,1/6.933333333333334,wi.radius;let hu=0;class Vo{static fromGE(e){const r=new Vo;return r._wkt=e.wkt,r._wkid=e.wkid,r._isInverse=e.isInverse,r}constructor(e){this.uid=hu++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null?e.isInverse===!0:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=hu++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=hu++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=hu++}getInverse(){const e=new Vo;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class mn{static cacheKey(e,r){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",r.wkid!==void 0&&r.wkid!==null?r.wkid.toString():"-1",r.wkt!==void 0&&r.wkt!==null?r.wkt.toString():""].join(",")}static fromGE(e){const r=new mn;let i="";for(const n of e.steps){const s=Vo.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const r of e.steps)r instanceof Vo?this.steps.push(r):this.steps.push(new Vo({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const e=new mn;e.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];e.steps.push(i.getInverse())}return e}getGTListEntry(){let e="";for(const r of this.steps)e+=r.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,r,i){this._cachedProjection[mn.cacheKey(e,r)]=i}getCachedGeTransformation(e,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[mn.cacheKey(e,r)];return n===void 0?null:n}}function GL(t,e,r){if(e==null||r==null||r.vcsWkid||ot(e,r))return null;const i=P_(e),n=P_(r),s=i/n;if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return o=>zL(o,s);case"polyline":case"esriGeometryPolyline":return o=>WL(o,s);case"polygon":case"esriGeometryPolygon":return o=>jL(o,s);case"multipoint":case"esriGeometryMultipoint":return o=>BL(o,s);case"extent":case"esriGeometryEnvelope":return o=>HL(o,s);default:return null}}function zL(t,e){t&&t.z!=null&&(t.z*=e)}function jL(t,e){if(t)for(const r of t.rings)for(const i of r)i.length>2&&(i[2]*=e)}function WL(t,e){if(t)for(const r of t.paths)for(const i of r)i.length>2&&(i[2]*=e)}function BL(t,e){if(t)for(const r of t.points)r.length>2&&(r[2]*=e)}function HL(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let _n=null,fc=null,Ff=null,Uf={};const fT=new ag;function Zs(){return!!_n&&cT()}function Ys(t){return Ff==null&&(Ff=Promise.all([uT(),R(()=>import("./geometryEngineBase-2fe41455.js"),[]).then(e=>e.g),R(()=>import("./hydrated-e6cb4883.js"),[])])),Ff.then(([,e,{hydratedAdapter:r}])=>{De(t),fc=r,_n=e.default,_n._enableProjection(UL),fT.notify()})}function Ma(t,e,r=null,i=null){return Array.isArray(t)?t.length===0?[]:_w(fc,t,t[0].spatialReference,e,r,i):_w(fc,[t],t.spatialReference,e,r,i)[0]}function _w(t,e,r,i,n=null,s=null){if(r==null||i==null)return e;if(Nn(r,i,n))return e.map(o=>JL(o,r,i));if(n==null){const o=mn.cacheKey(r,i);Uf[o]!==void 0?n=Uf[o]:(n=ZL(r,i,void 0),n==null&&(n=new mn),Uf[o]=n)}if(_n==null||t==null)throw new f0;return s!=null?_n._project(t,e,r,i,n,s):_n._project(t,e,r,i,n)}function hj(t,e){const r=qL([t],e);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function qL(t,e){if(!Zs()){for(const i of t)if(i!=null&&!ot(i.spatialReference,e)&&et(i.spatialReference)&&et(e)&&!Nn(i.spatialReference,e))return H(fT),{pending:Ys(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:ot(i.spatialReference,e)?i:!et(i.spatialReference)||!et(e)?null:YL(i,e))}}function ZL(t,e,r=null){if(t==null||e==null)return null;if(_n==null||fc==null)throw new f0;const i=_n._getTransformation(fc,t,e,r,r==null?void 0:r.spatialReference);return i!==null?mn.fromGE(i):null}class f0 extends D{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var b;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(b||(b={}));function YL(t,e){try{const r=Ma(t,e);if(r==null)return null;"xmin"in t&&"xmin"in r&&(r.zmin=t.zmin,r.zmax=t.zmax);const i=GL(r.type,t.spatialReference,e);return i!=null&&i(r),r}catch(r){if(!(r instanceof f0))throw r;return null}}function Nn(t,e,r){return r?!1:ot(t,e)?!0:et(t)&&et(e)&&!!gT(t,e,_T)}async function dj(t,e,r,i){if(Zs())return a_(i);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(!Nn(n,s,o))return Ys(i)}else if(!Nn(t,e,r))return Ys(i);return a_(i)}function JL(t,e,r){return t?"x"in t?KL(t,e,new q,r,0):"xmin"in t?eR(t,e,new Me,r,0):"rings"in t?pT(t,e,new Rc,r,0):"paths"in t?QL(t,e,new Sa,r,0):"points"in t?XL(t,e,new Bd,r,0):null:null}function KL(t,e,r,i,n){Ue[0]=t.x,Ue[1]=t.y;const s=t.z;return Ue[2]=s!==void 0?s:n,Gc(Ue,e,0,Ue,i,0,1)?(r.x=Ue[0],r.y=Ue[1],r.spatialReference=i,s===void 0?(r.z=void 0,r.hasZ=!1):(r.z=Ue[2],r.hasZ=!0),t.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=t.m,r.hasM=!0),r):null}function XL(t,e,r,i,n){const{points:s,hasZ:o,hasM:a}=t,u=[],h=s.length,f=[];for(const p of s)f.push(p[0],p[1],o?p[2]:n);if(!Gc(f,e,0,f,i,0,h))return null;for(let p=0;p<h;++p){const m=p*3,y=f[m],_=f[m+1];o&&a?u.push([y,_,f[m+2],s[p][3]]):o?u.push([y,_,f[m+2]]):a?u.push([y,_,s[p][2]]):u.push([y,_])}return r.points=u,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function QL(t,e,r,i,n){const{paths:s,hasZ:o,hasM:a}=t,u=[];return mT(s,o??!1,a??!1,e,u,i,n)?(r.paths=u,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function fj(t,e,r=e.spatialReference,i=0){return t.spatialReference!=null&&r!=null&&pT(t,t.spatialReference,e,r,i)!=null}function pT(t,e,r,i,n){const{rings:s,hasZ:o,hasM:a}=t,u=[];return mT(s,o??!1,a??!1,e,u,i,n)?(r.rings=u,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function eR(t,e,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:u,hasZ:h,hasM:f}=t,p=h?t.zmin:n;if(!ww(s,o,p,e,Ue,i))return null;r.xmin=Ue[0],r.ymin=Ue[1],h&&(r.zmin=Ue[2]);const m=h?t.zmax:n;return ww(a,u,m,e,Ue,i)?(r.xmax=Ue[0],r.ymax=Ue[1],h&&(r.zmax=Ue[2]),f&&(r.mmin=t.mmin,r.mmax=t.mmax),r.spatialReference=i,r):null}function pj(t,e,r,i=0){Ue[0]=t.x,Ue[1]=t.y;const n=t.z;return Ue[2]=n!==void 0?n:i,Gc(Ue,t.spatialReference,0,e,r,0,1)}function ww(t,e,r,i,n,s){return du[0]=t,du[1]=e,du[2]=r,Gc(du,i,0,n,s,0,1)}function Gc(t,e,r,i,n,s,o=1){const a=gT(e,n,_T);if(a==null)return!1;if(a===pe){if(t===i&&r===s)return!0;const h=r+3*o;for(let f=r,p=s;f<h;f++,p++)i[p]=t[f];return!0}const u=r+3*o;for(let h=r,f=s;h<u;h+=3,f+=3)a(t,h,i,f);return!0}function mT(t,e,r,i,n,s,o=0){const a=new Array;for(const h of t)for(const f of h)a.push(f[0],f[1],e?f[2]:o);if(!Gc(a,i,0,a,s,0,a.length/3))return!1;let u=0;n.length=0;for(const h of t){const f=new Array;for(const p of h)e&&r?f.push([a[u++],a[u++],a[u++],p[3]]):e?f.push([a[u++],a[u++],a[u++]]):r?(f.push([a[u++],a[u++],p[2]]),u++):(f.push([a[u++],a[u++]]),u++);n.push(f)}return!0}function mj(t,e,r,i){if(t==null||i==null)return!1;const n=Qh(t,gR),s=Qh(i,_R);if(n===s&&!vw(s)&&(n!==b.UNKNOWN||ot(t,i)))return $L(r,e),!0;if(vw(s)){const o=rl[n][b.LON_LAT],a=rl[b.LON_LAT][s];return o==null||a==null?!1:(o(e,0,Yi,0),a(Yi,0,Ji,0),yT(Ur*Yi[0],Ur*Yi[1],r),r[12]=Ji[0],r[13]=Ji[1],r[14]=Ji[2],!0)}if((s===b.WEB_MERCATOR||s===b.PLATE_CARREE)&&(n===b.WGS84||n===b.CGCS2000&&s===b.PLATE_CARREE||n===b.SPHERICAL_ECEF||n===b.WEB_MERCATOR)){const o=rl[n][b.LON_LAT],a=rl[b.LON_LAT][s];return o==null||a==null?!1:(o(e,0,Yi,0),a(Yi,0,Ji,0),n===b.SPHERICAL_ECEF?tR(Ur*Yi[0],Ur*Yi[1],r):lT(r),r[12]=Ji[0],r[13]=Ji[1],r[14]=Ji[2],!0)}return!1}function vw(t){return t===b.SPHERICAL_ECEF||t===b.SPHERICAL_MARS_PCPF||t===b.SPHERICAL_MOON_PCPF}function yT(t,e,r){const i=Math.sin(t),n=Math.cos(t),s=Math.sin(e),o=Math.cos(e),a=r;return a[0]=-i,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*i,a[9]=o*i,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function tR(t,e,r){return yT(t,e,r),DL(r,r),r}function Qh(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=va(t,1)),t.wkt===IA.wkt?e.spatialReferenceId=b.SPHERICAL_ECEF:xl(t)?e.spatialReferenceId=b.WGS84:Ms(t)?e.spatialReferenceId=b.WEB_MERCATOR:EA(t)?e.spatialReferenceId=b.PLATE_CARREE:t.wkt===OA.wkt?e.spatialReferenceId=b.WGS84_ECEF:t.wkid===Es.CGCS2000?e.spatialReferenceId=b.CGCS2000:t.wkt===sS.wkt?e.spatialReferenceId=b.SPHERICAL_MARS_PCPF:t.wkt===oS.wkt?e.spatialReferenceId=b.SPHERICAL_MOON_PCPF:Tg(t)?e.spatialReferenceId=b.GCSMARS2000:Mg(t)?e.spatialReferenceId=b.GCSMOON2000:e.spatialReferenceId=b.UNKNOWN):b.UNKNOWN}function pe(t,e,r,i){t!==r&&(r[i++]=t[e++],r[i++]=t[e++],r[i]=t[e])}function Go(t,e,r,i){r[i++]=sa*(t[e++]/Ee.radius),r[i++]=sa*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Ee.radius))),r[i]=t[e]}function rR(t,e,r,i){Go(t,e,r,i),hs(r,i,r,i)}function iR(t,e,r,i){Go(t,e,r,i),fs(r,i,r,i)}function nR(t,e,r,i,n){const s=.4999999*Math.PI,o=Wr(Ur*t[e+1],-s,s),a=Math.sin(o);r[i++]=Ur*t[e]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=t[e+2]}function pc(t,e,r,i){nR(t,e,r,i,Ee)}const bw=Ee.radius*Math.PI/180,Sw=180/(Ee.radius*Math.PI);function cs(t,e,r,i){r[i]=t[e]*bw,r[i+1]=t[e+1]*bw,r[i+2]=t[e+2]}function us(t,e,r,i){r[i]=t[e]*Sw,r[i+1]=t[e+1]*Sw,r[i+2]=t[e+2]}function sR(t,e,r,i){Go(t,e,r,i),cs(r,i,r,i)}function oR(t,e,r,i){ps(t,e,r,i),cs(r,i,r,i)}function aR(t,e,r,i){ds(t,e,r,i),cs(r,i,r,i)}function lR(t,e,r,i){us(t,e,r,i),hs(r,i,r,i)}function cR(t,e,r,i){us(t,e,r,i),pc(r,i,r,i)}function uR(t,e,r,i){us(t,e,r,i),fs(r,i,r,i)}function p0(t,e,r,i,n){const s=n+t[e+2],o=Ur*t[e+1],a=Ur*t[e],u=Math.cos(o);r[i++]=Math.cos(a)*u*s,r[i++]=Math.sin(a)*u*s,r[i]=Math.sin(o)*s}function Tw(t,e,r,i){p0(t,e,r,i,Tn.radius)}function Ew(t,e,r,i){p0(t,e,r,i,wi.radius)}function hs(t,e,r,i){p0(t,e,r,i,Ee.radius)}function m0(t,e,r,i,n){const s=t[e],o=t[e+1],a=t[e+2],u=Math.sqrt(s*s+o*o+a*a),h=SO(a/(u===0?1:u)),f=Math.atan2(o,s);r[i++]=sa*f,r[i++]=sa*h,r[i]=u-n}function Mw(t,e,r,i){m0(t,e,r,i,Tn.radius)}function Pw(t,e,r,i){m0(t,e,r,i,wi.radius)}function ds(t,e,r,i){m0(t,e,r,i,Ee.radius)}function hR(t,e,r,i){ds(t,e,r,i),pc(r,i,r,i)}function dR(t,e,r,i){ds(t,e,r,i),fs(r,i,r,i)}function fR(t,e,r,i,n){const s=Ur*t[e],o=Ur*t[e+1],a=t[e+2],u=Math.sin(o),h=Math.cos(o),f=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);r[i++]=(f+a)*h*Math.cos(s),r[i++]=(f+a)*h*Math.sin(s),r[i++]=(f*(1-n.eccentricitySquared)+a)*u}function fs(t,e,r,i){fR(t,e,r,i,Ee)}function ps(t,e,r,i){const n=VL,s=t[e],o=t[e+1],a=t[e+2];let u,h,f,p,m,y,_,v,w,S,P,M,A,I,O,F,$,J,U,K,B;u=Math.abs(a),h=s*s+o*o,f=Math.sqrt(h),p=h+a*a,m=Math.sqrt(p),K=Math.atan2(o,s),y=a*a/p,_=h/p,I=n.a2/m,O=n.a3-n.a4/m,_>.3?(v=u/m*(1+_*(n.a1+I+y*O)/m),U=Math.asin(v),S=v*v,w=Math.sqrt(1-S)):(w=f/m*(1-y*(n.a5-I-_*O)/m),U=Math.acos(w),S=1-w*w,v=Math.sqrt(S)),P=1-Ee.eccentricitySquared*S,M=Ee.radius/Math.sqrt(P),A=n.a6*M,I=f-M*w,O=u-A*v,$=w*I+v*O,F=w*O-v*I,J=F/(A/P+$),U=U+J,B=$+F*J/2,a<0&&(U=-U),r[i++]=sa*K,r[i++]=sa*U,r[i]=B}function pR(t,e,r,i){ps(t,e,r,i),hs(r,i,r,i)}function mR(t,e,r,i){ps(t,e,r,i),pc(r,i,r,i)}const rl={[b.WGS84]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:pe,[b.SPHERICAL_ECEF]:hs,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:pc,[b.PLATE_CARREE]:cs,[b.WGS84]:pe,[b.WGS84_ECEF]:fs},[b.CGCS2000]:{[b.CGCS2000]:pe,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:pe,[b.SPHERICAL_ECEF]:hs,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:cs,[b.WGS84]:null,[b.WGS84_ECEF]:fs},[b.GCSMARS2000]:{[b.CGCS2000]:null,[b.GCSMARS2000]:pe,[b.GCSMOON2000]:null,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:null,[b.SPHERICAL_ECEF]:null,[b.SPHERICAL_MARS_PCPF]:Ew,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:null,[b.WGS84]:null,[b.WGS84_ECEF]:null},[b.GCSMOON2000]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:pe,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:null,[b.SPHERICAL_ECEF]:null,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:Tw,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:null,[b.WGS84]:null,[b.WGS84_ECEF]:null},[b.WEB_MERCATOR]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:Go,[b.WGS84_COMPARABLE_LON_LAT]:Go,[b.SPHERICAL_ECEF]:rR,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:pe,[b.PLATE_CARREE]:sR,[b.WGS84]:Go,[b.WGS84_ECEF]:iR},[b.WGS84_ECEF]:{[b.CGCS2000]:ps,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:ps,[b.WGS84_COMPARABLE_LON_LAT]:ps,[b.SPHERICAL_ECEF]:pR,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:mR,[b.PLATE_CARREE]:oR,[b.WGS84]:ps,[b.WGS84_ECEF]:pe},[b.SPHERICAL_ECEF]:{[b.CGCS2000]:ds,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:ds,[b.WGS84_COMPARABLE_LON_LAT]:ds,[b.SPHERICAL_ECEF]:pe,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:hR,[b.PLATE_CARREE]:aR,[b.WGS84]:ds,[b.WGS84_ECEF]:dR},[b.SPHERICAL_MARS_PCPF]:{[b.CGCS2000]:null,[b.GCSMARS2000]:Pw,[b.GCSMOON2000]:null,[b.LON_LAT]:Pw,[b.WGS84_COMPARABLE_LON_LAT]:null,[b.SPHERICAL_ECEF]:null,[b.SPHERICAL_MARS_PCPF]:pe,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:null,[b.WGS84]:null,[b.WGS84_ECEF]:null},[b.SPHERICAL_MOON_PCPF]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:Mw,[b.LON_LAT]:Mw,[b.WGS84_COMPARABLE_LON_LAT]:null,[b.SPHERICAL_ECEF]:null,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:pe,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:null,[b.WGS84]:null,[b.WGS84_ECEF]:null},[b.UNKNOWN]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:null,[b.WGS84_COMPARABLE_LON_LAT]:null,[b.SPHERICAL_ECEF]:null,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:pe,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:null,[b.WGS84]:null,[b.WGS84_ECEF]:null},[b.LON_LAT]:{[b.CGCS2000]:pe,[b.GCSMARS2000]:pe,[b.GCSMOON2000]:pe,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:pe,[b.SPHERICAL_ECEF]:hs,[b.SPHERICAL_MARS_PCPF]:Ew,[b.SPHERICAL_MOON_PCPF]:Tw,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:pc,[b.PLATE_CARREE]:cs,[b.WGS84]:pe,[b.WGS84_ECEF]:fs},[b.WGS84_COMPARABLE_LON_LAT]:{[b.CGCS2000]:null,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:pe,[b.WGS84_COMPARABLE_LON_LAT]:pe,[b.SPHERICAL_ECEF]:hs,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:null,[b.PLATE_CARREE]:cs,[b.WGS84]:pe,[b.WGS84_ECEF]:fs},[b.PLATE_CARREE]:{[b.CGCS2000]:us,[b.GCSMARS2000]:null,[b.GCSMOON2000]:null,[b.LON_LAT]:us,[b.WGS84_COMPARABLE_LON_LAT]:us,[b.SPHERICAL_ECEF]:lR,[b.SPHERICAL_MARS_PCPF]:null,[b.SPHERICAL_MOON_PCPF]:null,[b.UNKNOWN]:null,[b.WEB_MERCATOR]:cR,[b.PLATE_CARREE]:pe,[b.WGS84]:us,[b.WGS84_ECEF]:uR}};function gT(t,e,r=y0()){return t==null||e==null?null:yR(t,e,r).projector}function yR(t,e,r){if(t==null||e==null||r.source.spatialReference===t&&r.dest.spatialReference===e)return r;const i=Qh(t,r.source),n=Qh(e,r.dest);return i===b.UNKNOWN&&n===b.UNKNOWN?ot(t,e)?r.projector=pe:r.projector=null:r.projector=rl[i][n],r}function y0(){return{source:{spatialReference:null,spatialReferenceId:b.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:b.UNKNOWN,metersPerUnit:1},projector:pe}}const gR={spatialReference:null,spatialReferenceId:b.UNKNOWN},_R={spatialReference:null,spatialReferenceId:b.UNKNOWN},_T=y0();y0();const Ur=bO(1),sa=kS(1),du=ba(),Yi=ba(),Ji=ba(),Ue=ba();var my;let ei=my=class extends G{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new my({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ei.prototype,"cols",void 0);c([d({type:Ge,json:{write:!0}})],ei.prototype,"level",void 0);c([d({type:String,json:{write:!0}})],ei.prototype,"levelValue",void 0);c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ei.prototype,"origin",void 0);c([d({type:Number,json:{write:!0}})],ei.prototype,"resolution",void 0);c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ei.prototype,"rows",void 0);c([d({type:Number,json:{write:!0}})],ei.prototype,"scale",void 0);ei=my=c([T("esri.layers.support.LOD")],ei);const an=ei;let wR=class{constructor(e,r,i,n,s=void 0){this.id=e,this.level=r,this.row=i,this.col=n,this.extent=s}};var sn;const Cw=new rt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Je=sn=class extends G{static create(e={}){const{resolutionFactor:r=1,scales:i,size:n=256,spatialReference:s=_e.WebMercator,numLODs:o=24}=e;if(!et(s)){const _=[];if(i)for(let v=0;v<i.length;v++){const w=i[v];_.push(new an({level:v,scale:w,resolution:w}))}else{let v=5e-4;for(let w=o-1;w>=0;w--)_.unshift(new an({level:w,scale:v,resolution:v})),v*=2}return new sn({dpi:96,lods:_,origin:new q(0,0,s),size:[n,n],spatialReference:s})}const a=vi(s),u=e.origin?new q({x:e.origin.x,y:e.origin.y,spatialReference:s}):a?new q({x:a.origin[0],y:a.origin[1],spatialReference:s}):new q({x:0,y:0,spatialReference:s}),h=va(s),f=96,m=1/(h*39.37*f),y=[];if(i)for(let _=0;_<i.length;_++){const v=i[_],w=v*m;y.push(new an({level:_,scale:v,resolution:w}))}else{let _=nS(s)?5916575275917094e-7*(512/n):591657527591555e-6*(256/n);const v=Math.ceil(o/r);y.push(new an({level:0,scale:_,resolution:_*m}));for(let w=1;w<v;w++){const S=_/2**r,P=S*m;y.push(new an({level:w,scale:S,resolution:P})),_=S}}return new sn({dpi:f,lods:y,origin:u,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:r}=this;if(e&&r){const i=vi(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(e,r){return q.fromJSON({spatialReference:r.spatialReference,...e})}set lods(e){let r=0,i=0;const n=[],s=this._levelToLOD={};e&&(r=-1/0,i=1/0,e.forEach(o=>{n.push(o.scale),r=o.scale>r?o.scale:r,i=o.scale<i?o.scale:i,s[o.level]=o})),this._set("scales",n),this._set("minScale",r),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,r){return[r.cols,r.rows]}writeSize(e,r){r.cols=e[0],r.rows=e[1]}zoomToScale(e){const r=this.scales;if(e<=0)return r[0];if(e>=r.length-1)return r[r.length-1];const i=Math.floor(e),n=i+1;return r[i]/(r[i]/r[n])**(e-i)}scaleToZoom(e){const r=this.scales,i=r.length-1;let n=0;for(;n<i;n++){const s=r[n],o=r[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}snapScale(e,r=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=r?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,r,i,n){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof r=="number")o=r,a=i;else if(ot(r.spatialReference,this.spatialReference))o=r.x,a=r.y,n=i;else{const f=jd(r,this.spatialReference);if(f==null)return null;o=f.x,a=f.y,n=i}const u=s.resolution*this.size[0],h=s.resolution*this.size[1];return n||(n=new wR(null,0,0,0,Br())),n.level=e,n.row=Math.floor((this.origin.y-a)/h+.001),n.col=Math.floor((o-this.origin.x)/u+.001),this.updateTileInfo(n),n}updateTileInfo(e,r=sn.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&r===sn.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(i=a)}if(!i)return;const n=e.level-i.level,s=i.resolution*this.size[0]/2**n,o=i.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Br()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const r=this._upsampleLevels[e.level];return!r||r.parentLevel===-1?!1:(e.level=r.parentLevel,e.row=Math.floor(e.row/r.factor+.001),e.col=Math.floor(e.col/r.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,r){const i=this.lodAt(r.level);if(i==null)return null;const{resolution:n}=i,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+r.col*s,e[1]=this.origin.y-(r.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var r;return((r=this._levelToLOD)==null?void 0:r[e])??null}clone(){return sn.fromJSON(this.write({}))}getOrCreateCompatible(e,r){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],n=this.lods.length;for(let s=0;s<n;s++){const o=this.lods[s],a=o.resolution*r;i.push(new an({level:o.level,scale:o.scale,resolution:a}))}return new sn({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<e.length;i++){const n=e[i];this._upsampleLevels[n.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/n.resolution:0},r=n}}};c([d({type:Number,json:{write:!0}})],Je.prototype,"compressionQuality",void 0);c([d({type:Number,json:{write:!0}})],Je.prototype,"dpi",void 0);c([d({type:String,json:{read:Cw.read,write:Cw.write,origins:{"web-scene":{read:!1,write:!1}}}})],Je.prototype,"format",void 0);c([d({readOnly:!0})],Je.prototype,"isWrappable",null);c([d({type:q,json:{write:!0}})],Je.prototype,"origin",void 0);c([fe("origin")],Je.prototype,"readOrigin",null);c([d({type:[an],value:null,json:{write:!0}})],Je.prototype,"lods",null);c([d({readOnly:!0})],Je.prototype,"minScale",void 0);c([d({readOnly:!0})],Je.prototype,"maxScale",void 0);c([d({readOnly:!0})],Je.prototype,"scales",void 0);c([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Je.prototype,"size",void 0);c([fe("size",["rows","cols"])],Je.prototype,"readSize",null);c([de("size",{cols:{type:Ge},rows:{type:Ge}})],Je.prototype,"writeSize",null);c([d({type:_e,json:{write:!0}})],Je.prototype,"spatialReference",void 0);Je=sn=c([T("esri.layers.support.TileInfo")],Je);(function(t){(function(e){e[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(t.ExtrapolateOptions||(t.ExtrapolateOptions={}))})(Je||(Je={}));const vR=Je,Ju={widthBreakpoint:{getValue(t){const e=t.viewSize[0],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],r=t.breakpoints,i=this.values;return e<=r.xsmall?i.xsmall:e<=r.small?i.small:e<=r.medium?i.medium:e<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,r=e[0],i=e[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Vf={xsmall:544,small:768,medium:992,large:1200};function bR(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Gf(t,e){return e?Ju[t].valueToClassName[e].split(" "):[]}const SR=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Vi,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Vf}initialize(){this._breakpointsHandles.add(Z(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),tt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Ce(this._breakpointsHandles))}set breakpoints(i){const n=this._get("breakpoints");if(i===n)return;const s=bR(i);if(!s){const o=JSON.stringify(Vf,null,2);console.warn("provided breakpoints are not valid, using defaults:"+o)}i=s?i:Vf,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=pt.acquire(),n=pt.acquire();let s=!1,o;for(o in Ju){const a=this[o],u=Ju[o].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==u&&(s=!0,this[o]=u,Gf(o,a).forEach(h=>n.push(h)),Gf(o,u).forEach(h=>i.push(h)))}s&&(this._applyClassNameChanges(i,n),pt.release(i),pt.release(n))}_applyClassNameChanges(i,n){const s=this.container;s&&(n.forEach(o=>s.classList.remove(o)),i.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let n;for(n in Ju)Gf(n,this[n]).forEach(s=>i.classList.remove(s))}};return c([d()],e.prototype,"breakpoints",null),c([d()],e.prototype,"orientation",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),c([d()],e.prototype,"heightBreakpoint",void 0),e=c([T("esri.views.BreakpointsOwner")],e),e};function g0(t){return typeof t=="string"?document.getElementById(t):t??null}function wT(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function Aw(t,e){const r=e.parentNode;r&&r.insertBefore(t,e)}function Iw(t,e){for(;;){const r=t.firstChild;if(!r)break;e.appendChild(r)}}let oa=class extends z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Vi,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,r,i={}){return this._installWatch(e,r,i,Z)}addWhen(e,r,i={}){return this._installWatch(e,r,i,Ln)}addOnCollectionChange(e,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this._handles.add([cc(e,"after-changes",this._createSyncUpdatingCallback(),uc),cc(e,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(e){if(e==null)return e;const r=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&this._pendingPromises.size===0&&!this._handles.has(fu)&&this._set("updating",!1)}},r),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this._handles.remove(r);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,r,i);return this._handles.add(o,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(e,r){const i=this._createSyncUpdatingCallback(),n=Z(e,i,{sync:!0,equals:()=>!1});return this._handles.add(n,r),n}_createSyncUpdatingCallback(){return()=>{this._handles.remove(fu),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Oc(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(fu))}),fu)}}};c([d({readOnly:!0})],oa.prototype,"updating",void 0);oa=c([T("esri.core.support.WatchUpdatingTracking")],oa);const fu=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var TR=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ns={exports:{}},ke={},mc={exports:{}},fo={};function vT(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function ER(t,e,r){}function MR(t,e,r){}var PR=/javascript\s*\:/img;function CR(t,e){return PR.test(e)?"":e}fo.whiteList=vT();fo.getDefaultWhiteList=vT;fo.onAttr=ER;fo.onIgnoreAttr=MR;fo.safeAttrValue=CR;var AR={indexOf:function(t,e){var r,i;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var i,n;if(Array.prototype.forEach)return t.forEach(e,r);for(i=0,n=t.length;i<n;i++)e.call(r,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},za=AR;function IR(t,e){t=za.trimRight(t),t[t.length-1]!==";"&&(t+=";");var r=t.length,i=!1,n=0,s=0,o="";function a(){if(!i){var f=za.trim(t.slice(n,s)),p=f.indexOf(":");if(p!==-1){var m=za.trim(f.slice(0,p)),y=za.trim(f.slice(p+1));if(m){var _=e(n,o.length,m,y,f);_&&(o+=_+"; ")}}}n=s+1}for(;s<r;s++){var u=t[s];if(u==="/"&&t[s+1]==="*"){var h=t.indexOf("*/",s+2);if(h===-1)break;s=h+1,n=s+1,i=!1}else u==="("?i=!0:u===")"?i=!1:u===";"?i||a():u===`
`&&a()}return za.trim(o)}var OR=IR,pu=fo,xR=OR;function Ow(t){return t==null}function kR(t){var e={};for(var r in t)e[r]=t[r];return e}function bT(t){t=kR(t||{}),t.whiteList=t.whiteList||pu.whiteList,t.onAttr=t.onAttr||pu.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||pu.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||pu.safeAttrValue,this.options=t}bT.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,r=e.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=xR(t,function(u,h,f,p,m){var y=i[f],_=!1;if(y===!0?_=y:typeof y=="function"?_=y(p):y instanceof RegExp&&(_=y.test(p)),_!==!0&&(_=!1),p=o(f,p),!!p){var v={position:h,sourcePosition:u,source:m,isWhite:_};if(_){var w=n(f,p,v);return Ow(w)?f+":"+p:w}else{var w=s(f,p,v);if(!Ow(w))return w}}});return a};var LR=bT;(function(t,e){var r=fo,i=LR;function n(o,a){var u=new i(a);return u.process(o)}e=t.exports=n,e.FilterCSS=i;for(var s in r)e[s]=r[s]})(mc,mc.exports);var _0={indexOf:function(t,e){var r,i;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var i,n;if(Array.prototype.forEach)return t.forEach(e,r);for(i=0,n=t.length;i<n;i++)e.call(r,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,r=e.exec(t);return r?r.index:-1}},RR=mc.exports.FilterCSS,NR=mc.exports.getDefaultWhiteList,ed=_0;function ST(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var TT=new RR;function DR(t,e,r){}function $R(t,e,r){}function FR(t,e,r){}function UR(t,e,r){}function ET(t){return t.replace(GR,"&lt;").replace(zR,"&gt;")}function VR(t,e,r,i){if(r=OT(r),e==="href"||e==="src"){if(r=ed.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(e==="background"){if(mu.lastIndex=0,mu.test(r))return""}else if(e==="style"){if(xw.lastIndex=0,xw.test(r)||(kw.lastIndex=0,kw.test(r)&&(mu.lastIndex=0,mu.test(r))))return"";i!==!1&&(i=i||TT,r=i.process(r))}return r=xT(r),r}var GR=/</g,zR=/>/g,jR=/"/g,WR=/&quot;/g,BR=/&#([a-zA-Z0-9]*);?/gim,HR=/&colon;?/gim,qR=/&newline;?/gim,mu=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,xw=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,kw=/u\s*r\s*l\s*\(.*/gi;function MT(t){return t.replace(jR,"&quot;")}function PT(t){return t.replace(WR,'"')}function CT(t){return t.replace(BR,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function AT(t){return t.replace(HR,":").replace(qR," ")}function IT(t){for(var e="",r=0,i=t.length;r<i;r++)e+=t.charCodeAt(r)<32?" ":t.charAt(r);return ed.trim(e)}function OT(t){return t=PT(t),t=CT(t),t=AT(t),t=IT(t),t}function xT(t){return t=MT(t),t=ET(t),t}function ZR(){return""}function YR(t,e){typeof e!="function"&&(e=function(){});var r=!Array.isArray(t);function i(o){return r?!0:ed.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,u){if(i(o))if(u.isClosing){var h="[/removed]",f=u.position+h.length;return n.push([s!==!1?s:u.position,f]),s=!1,h}else return s||(s=u.position),"[removed]";else return e(o,a,u)},remove:function(o){var a="",u=0;return ed.forEach(n,function(h){a+=o.slice(u,h[0]),u=h[1]}),a+=o.slice(u),a}}}function JR(t){for(var e="",r=0;r<t.length;){var i=t.indexOf("<!--",r);if(i===-1){e+=t.slice(r);break}e+=t.slice(r,i);var n=t.indexOf("-->",i);if(n===-1)break;r=n+3}return e}function KR(t){var e=t.split("");return e=e.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),e.join("")}ke.whiteList=ST();ke.getDefaultWhiteList=ST;ke.onTag=DR;ke.onIgnoreTag=$R;ke.onTagAttr=FR;ke.onIgnoreTagAttr=UR;ke.safeAttrValue=VR;ke.escapeHtml=ET;ke.escapeQuote=MT;ke.unescapeQuote=PT;ke.escapeHtmlEntities=CT;ke.escapeDangerHtml5Entities=AT;ke.clearNonPrintableCharacter=IT;ke.friendlyAttrValue=OT;ke.escapeAttrValue=xT;ke.onIgnoreTagStripAll=ZR;ke.StripTagBody=YR;ke.stripCommentTag=JR;ke.stripBlankChar=KR;ke.cssFilter=TT;ke.getDefaultCSSWhiteList=NR;var ef={},ln=_0;function XR(t){var e=ln.spaceIndex(t),r;return e===-1?r=t.slice(1,-1):r=t.slice(1,e+1),r=ln.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function QR(t){return t.slice(0,2)==="</"}function eN(t,e,r){var i="",n=0,s=!1,o=!1,a=0,u=t.length,h="",f="";e:for(a=0;a<u;a++){var p=t.charAt(a);if(s===!1){if(p==="<"){s=a;continue}}else if(o===!1){if(p==="<"){i+=r(t.slice(n,a)),s=a,n=a;continue}if(p===">"){i+=r(t.slice(n,s)),f=t.slice(s,a+1),h=XR(f),i+=e(s,i.length,h,f,QR(f)),n=a+1,s=!1;continue}if(p==='"'||p==="'")for(var m=1,y=t.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=p;continue e}y=t.charAt(a-++m)}}else if(p===o){o=!1;continue}}return n<t.length&&(i+=r(t.substr(n))),i}var tN=/[^a-zA-Z0-9\\_:.-]/gim;function rN(t,e){var r=0,i=0,n=[],s=!1,o=t.length;function a(m,y){if(m=ln.trim(m),m=m.replace(tN,"").toLowerCase(),!(m.length<1)){var _=e(m,y||"");_&&n.push(_)}}for(var u=0;u<o;u++){var h=t.charAt(u),f,p;if(s===!1&&h==="="){s=t.slice(r,u),r=u+1,i=t.charAt(r)==='"'||t.charAt(r)==="'"?r:nN(t,u+1);continue}if(s!==!1&&u===i){if(p=t.indexOf(h,u+1),p===-1)break;f=ln.trim(t.slice(i+1,p)),a(s,f),s=!1,u=p,r=u+1;continue}if(/\s|\n|\t/.test(h))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(p=iN(t,u),p===-1){f=ln.trim(t.slice(r,u)),a(f),s=!1,r=u+1;continue}else{u=p-1;continue}else if(p=sN(t,u-1),p===-1){f=ln.trim(t.slice(r,u)),f=Lw(f),a(s,f),s=!1,r=u+1;continue}else continue}return r<t.length&&(s===!1?a(t.slice(r)):a(s,Lw(ln.trim(t.slice(r))))),ln.trim(n.join(" "))}function iN(t,e){for(;e<t.length;e++){var r=t[e];if(r!==" ")return r==="="?e:-1}}function nN(t,e){for(;e<t.length;e++){var r=t[e];if(r!==" ")return r==="'"||r==='"'?e:-1}}function sN(t,e){for(;e>0;e--){var r=t[e];if(r!==" ")return r==="="?e:-1}}function oN(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Lw(t){return oN(t)?t.substr(1,t.length-2):t}ef.parseTag=eN;ef.parseAttr=rN;var aN=mc.exports.FilterCSS,ur=ke,kT=ef,lN=kT.parseTag,cN=kT.parseAttr,Ku=_0;function yu(t){return t==null}function uN(t){var e=Ku.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Ku.trim(t.slice(e+1,-1));var r=t[t.length-1]==="/";return r&&(t=Ku.trim(t.slice(0,-1))),{html:t,closing:r}}function hN(t){var e={};for(var r in t)e[r]=t[r];return e}function dN(t){var e={};for(var r in t)Array.isArray(t[r])?e[r.toLowerCase()]=t[r].map(function(i){return i.toLowerCase()}):e[r.toLowerCase()]=t[r];return e}function LT(t){t=hN(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=ur.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=dN(t.whiteList||t.allowList):t.whiteList=ur.whiteList,t.onTag=t.onTag||ur.onTag,t.onTagAttr=t.onTagAttr||ur.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||ur.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||ur.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||ur.safeAttrValue,t.escapeHtml=t.escapeHtml||ur.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new aN(t.css))}LT.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,r=e.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,u=r.safeAttrValue,h=r.escapeHtml,f=e.cssFilter;r.stripBlankChar&&(t=ur.stripBlankChar(t)),r.allowCommentTag||(t=ur.stripCommentTag(t));var p=!1;r.stripIgnoreTagBody&&(p=ur.StripTagBody(r.stripIgnoreTagBody,s),s=p.onIgnoreTag);var m=lN(t,function(y,_,v,w,S){var P={sourcePosition:y,position:_,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(i,v)},M=n(v,w,P);if(!yu(M))return M;if(P.isWhite){if(P.isClosing)return"</"+v+">";var A=uN(w),I=i[v],O=cN(A.html,function(F,$){var J=Ku.indexOf(I,F)!==-1,U=o(v,F,$,J);return yu(U)?J?($=u(v,F,$,f),$?F+'="'+$+'"':F):(U=a(v,F,$,J),yu(U)?void 0:U):U});return w="<"+v,O&&(w+=" "+O),A.closing&&(w+=" /"),w+=">",w}else return M=s(v,w,P),yu(M)?h(w):M},h);return p&&(m=p.remove(m)),m};var fN=LT;(function(t,e){var r=ke,i=ef,n=fN;function s(a,u){var h=new n(u);return h.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in r)e[a]=r[a];for(var u in i)e[u]=i[u]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(ns,ns.exports);var pN=function(){function t(e,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,u){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):ns.exports.safeAttrValue(s,o,a,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!r?n=e:e&&r?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(s){s==="whiteList"?n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,e.whiteList||{}]):n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new ns.exports.FilterXSS(n)}return t.prototype.sanitize=function(e,r){switch(r===void 0&&(r={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,r);default:return r.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),u=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||u?ns.exports.escapeAttrValue(e):!s&&!n?ns.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,r,i,n):ns.exports.safeAttrValue(e,r,i,n)},t.prototype.validate=function(e,r){r===void 0&&(r={});var i=this.sanitize(e,r);return{isValid:e===i,sanitized:i}},t.prototype.encodeHTML=function(e){var r=this;return String(e).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},t.prototype.encodeAttrValue=function(e){var r=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var r={};return e.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},t.prototype._iterateOverObject=function(e,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,u){var h=i.validate(u,r);return h.isValid?a.concat([u]):(n=!0,a.concat([h.sanitized]))},[]);else if(TR(e)){var o=Object.keys(e);s=o.reduce(function(a,u){var h=e[u],f=i.validate(h,r);return f.isValid?a[u]=h:(n=!0,a[u]=f.sanitized),a},{})}else return r.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const tf=new Map;function RT(){tf.clear()}function mN(t){return tf.get(t)}function yN(t,e){tf.set(t,e)}function zf(t){tf.delete(t)}var Js,aa,gN=function(t){if("WebkitTransition"in t.style)Js="webkitTransitionEnd",aa="webkitAnimationEnd";else if("transition"in t.style)Js="transitionend",aa="animationend";else throw new Error("Your browser is not supported!")},NT=function(t){Js||gN(t)},_N=function(t,e){return e===void 0&&(e=t+"-active"),function(r){NT(r);var i=!1,n=function(s){i||(i=!0,r.removeEventListener(Js,n),r.removeEventListener(aa,n),r.classList.remove(t),r.classList.remove(e))};r.classList.add(t),r.addEventListener(Js,n),r.addEventListener(aa,n),requestAnimationFrame(function(){r.classList.add(e)})}},wN=function(t,e){return e===void 0&&(e=t+"-active"),function(r,i){NT(r);var n=!1,s=function(o){n||(n=!0,r.removeEventListener(Js,s),r.removeEventListener(aa,s),i())};r.classList.add(t),r.addEventListener(Js,s),r.addEventListener(aa,s),requestAnimationFrame(function(){r.classList.add(e)})}};const vN=k.getLogger("esri.widgets.support.widgetUtils");function bN(t){const e=pt.acquire();for(let i=0;i<arguments.length;i++){const n=arguments[i],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const r=e.join(" ");return pt.release(e),r}(()=>{const t=new Map,e=new ResizeObserver(r=>{var i;RT();for(const n of r)(i=t.get(n.target))==null||i(n)});return(r,i,n)=>(t.has(r)&&vN.error("Already observing element",r),t.set(r,i),e.observe(r,n),ga(()=>{e.unobserve(r),t.delete(r)}))})();function SN(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function bj(t){const e="data-node-ref",r=t.getAttribute(e);this[r]=null}function Sj(t){const e="data-node-ref",r=t.getAttribute(e);this[r]=t}function Tj(t,e){return(t==="enter"?_N:wN)(e)}const TN=["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],EN=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...TN],MN=EN.reduce((t,e)=>(t[e]=[],t),{}),PN=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],CN=(t,e,r)=>{const i=`${e}="${r}"`;if(PN.includes(e))return i},DT=new pN({whiteList:MN,onTagAttr:CN,stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function AN(t){return t==="Enter"||t===" "}const $T="http://www.w3.org/",rf=`${$T}2000/svg`,FT=`${$T}1999/xlink`;let Rw=[],w0=(t,e)=>{let r={};return Object.keys(t).forEach(i=>{r[i]=t[i]}),e&&Object.keys(e).forEach(i=>{r[i]=e[i]}),r},v0=(t,e)=>t.vnodeSelector!==e.vnodeSelector?!1:t.properties&&e.properties?t.properties.key!==e.properties.key?!1:t.properties.bind===e.properties.bind:!t.properties&&!e.properties,UT=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},IN=(t,e,r)=>{if(e.vnodeSelector!==""){for(let i=r;i<t.length;i++)if(v0(t[i],e))return i}return-1},jf=(t,e,r,i)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s?s.key===void 0?s.bind:s.key:void 0)){for(let a=0;a<t.length;a++)if(a!==e){let u=t[a];if(v0(u,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ON=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},yy=[],gy=!1,VT=t=>{(t.children||[]).forEach(VT),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Nw=()=>{gy=!1,yy.forEach(VT),yy.length=0},Dw=t=>{yy.push(t),gy||(gy=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Nw,{timeout:16}):setTimeout(Nw,16))},$w=t=>{let e=t.domNode;if(t.properties){let r=t.properties.exitAnimation;if(r){e.style.pointerEvents="none",r(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Dw(t))},t.properties);return}}e.parentNode&&(e.parentNode.removeChild(e),Dw(t))},xN=(t,e,r)=>{if(!e)return;let i=r.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],u=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")_y(t,u,!0);else if(a==="classes"){let h=Object.keys(u),f=h.length;for(let p=0;p<f;p++){let m=h[p];u[m]&&t.classList.add(m)}}else if(a==="styles"){let h=Object.keys(u),f=h.length;for(let p=0;p<f;p++){let m=h[p],y=u[m];y&&(UT(y),r.styleApplyer(t,m,y))}}else if(a!=="key"&&u!==null&&u!==void 0){let h=typeof u;h==="function"?(a.lastIndexOf("on",0)===0&&(i&&(u=i(a,u,t,e)),a==="oninput"&&function(){let f=u;u=function(p){f.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),t[a]=u):r.namespace===rf?a==="href"?t.setAttributeNS(FT,a,u):t.setAttribute(a,u):h==="string"&&a!=="value"?a==="innerHTML"?t[a]=DT.sanitize(u):GT(t)&&a in t?t[a]=u:t.setAttribute(a,u):t[a]=u}}};function GT(t){if(!(t instanceof Element)||!t.tagName.includes("-"))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let kN=(t,e,r)=>{if(e)for(let i of e)Lo(i,t,void 0,r)},zT=(t,e,r)=>{kN(t,e.children,r),e.text&&(t.textContent=e.text),xN(t,e.properties,r),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,r,e.vnodeSelector,e.properties,e.children])},Lo=(t,e,r,i)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),r!==void 0?e.insertBefore(n,r):e.appendChild(n);else{for(let u=0;u<=o.length;++u){let h=o.charAt(u);if(u===o.length||h==="."||h==="#"){let f=o.charAt(s-1),p=o.slice(s,u);f==="."?n.classList.add(p):f==="#"?n.id=p:(p==="svg"&&(i=w0(i,{namespace:rf})),i.namespace!==void 0?n=t.domNode=a.createElementNS(i.namespace,p):(n=t.domNode=t.domNode||a.createElement(p),p==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),r!==void 0?e.insertBefore(n,r):n.parentNode!==e&&e.appendChild(n)),s=u+1}}zT(n,t,i)}},td,_y=(t,e,r)=>{e&&e.split(" ").forEach(i=>{i&&t.classList.toggle(i,r)})},LN=(t,e,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let u=s[a],h=r[u],f=e[u];if(u==="class")f!==h&&(_y(t,f,!1),_y(t,h,!0));else if(u==="classes"){let p=t.classList,m=Object.keys(h),y=m.length;for(let _=0;_<y;_++){let v=m[_],w=!!h[v],S=!!f[v];w!==S&&(n=!0,w?p.add(v):p.remove(v))}}else if(u==="styles"){let p=Object.keys(h),m=p.length;for(let y=0;y<m;y++){let _=p[y],v=h[_],w=f[_];v!==w&&(n=!0,v?(UT(v),i.styleApplyer(t,_,v)):i.styleApplyer(t,_,""))}}else if(!h&&typeof f=="string"&&(h=""),u==="value"){let p=t[u];p!==h&&(t["oninput-value"]?p===t["oninput-value"]:h!==f)&&(t[u]=h,t["oninput-value"]=void 0),h!==f&&(n=!0)}else if(h!==f){let p=typeof h;(p!=="function"||!i.eventHandlerInterceptor)&&(i.namespace===rf?u==="href"?t.setAttributeNS(FT,u,h):t.setAttribute(u,h):p==="string"?u==="innerHTML"?t[u]=DT.sanitize(h):u==="role"&&h===""?t.removeAttribute(u):GT(t)&&u in t?t[u]=h:t.setAttribute(u,h):t[u]!==h&&(t[u]=h),n=!0)}}return n},RN=(t,e,r,i,n)=>{if(r===i)return!1;r=r||Rw,i=i||Rw;let s=r.length,o=i.length,a=0,u=0,h,f=!1;for(;u<o;){let p=a<s?r[a]:void 0,m=i[u];if(p!==void 0&&v0(p,m))f=td(p,m,n)||f,a++;else{let y=IN(r,m,a+1);if(y>=0){for(h=a;h<y;h++)$w(r[h]),jf(r,h,t,"removed");f=td(r[y],m,n)||f,a=y+1}else Lo(m,e,a<s?r[a].domNode:void 0,n),ON(m),jf(i,u,t,"added")}u++}if(s>a)for(h=a;h<s;h++)$w(r[h]),jf(r,h,t,"removed");return f};td=(t,e,r)=>{let i=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=i.ownerDocument.createTextNode(e.text);return i.parentNode.replaceChild(o,i),e.domNode=o,n=!0,n}e.domNode=i}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(r=w0(r,{namespace:rf})),t.text!==e.text&&(s=!0,e.text===void 0?i.removeChild(i.firstChild):i.textContent=e.text),e.domNode=i,s=RN(e,i,t.children,e.children,r)||s,s=LN(i,t.properties,e.properties,r)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[i,r,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(i,e.properties,t.properties),n};let ja=(t,e)=>({getLastRender:()=>t,update:r=>{if(t.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=t;t=r,td(i,r,e)},domNode:t.domNode});const NN={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,r)=>{e.charAt(0)==="-"?t.style.setProperty(e,r):t.style[e]=r}};let Co=t=>w0(NN,t),yn={create:(t,e)=>(e=Co(e),Lo(t,document.createElement("div"),void 0,e),ja(t,e)),append:(t,e,r)=>(r=Co(r),Lo(e,t,void 0,r),ja(e,r)),insertBefore:(t,e,r)=>(r=Co(r),Lo(e,t.parentNode,t,r),ja(e,r)),merge:(t,e,r)=>(r=Co(r),e.domNode=t,zT(t,e,r),ja(e,r)),replace:(t,e,r)=>(r=Co(r),Lo(e,t.parentNode,t,r),t.parentNode.removeChild(t),ja(e,r))},DN=(t,e)=>{let r=[];for(;t&&t!==e;)r.push(t),t=t.parentNode;return r},wy;Array.prototype.find?wy=(t,e)=>t.find(e):wy=(t,e)=>t.filter(e)[0];let $N=(t,e)=>{let r=t;return e.forEach(i=>{r=r&&r.children?wy(r.children,n=>n.domNode===i):void 0}),r},FN=(t,e,r)=>{let i=function(n){r("domEvent",n);let s=e(),o=DN(n.currentTarget,s.domNode);o.reverse();let a=$N(s.getLastRender(),o);t.scheduleRender();let u;return a&&(u=a.properties[`on${n.type}`].apply(a.properties.bind||this,arguments)),r("domEventProcessed",n),u};return(n,s,o,a)=>i},Fw=t=>{let e,r=Co(t),i=r.performanceLogger,n=!0,s,o=!1,a=[],u=[],h=(p,m,y)=>{let _,v=()=>_;r.eventHandlerInterceptor=FN(e,v,i),_=p(m,y(),r),a.push(_),u.push(y)},f=()=>{if(s=void 0,!!n){n=!1,i("renderStart",void 0);for(let p=0;p<a.length;p++){let m=u[p]();i("rendered",void 0),a[p].update(m),i("patched",void 0)}i("renderDone",void 0),n=!0}};return e={renderNow:f,scheduleRender:()=>{!s&&!o&&(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),o=!0},resume:()=>{o=!1,n=!0,e.scheduleRender()},append:(p,m)=>{h(yn.append,p,m)},insertBefore:(p,m)=>{h(yn.insertBefore,p,m)},merge:(p,m)=>{h(yn.merge,p,m)},replace:(p,m)=>{h(yn.replace,p,m)},detach:p=>{for(let m=0;m<u.length;m++)if(u[m]===p)return u.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},Dn=class extends z{constructor(){super(...arguments),this.items=new ee,this._watchUpdatingTracking=new oa,this._callbacks=new Map,this._projector=Fw(),this._hiddenProjector=Fw()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(e,r){const i=this.computeBoundingRect(e),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const r=e.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(i=>{r.save(),i.renderCanvas(r),r.restore()}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],Dn.prototype,"surface",void 0);c([d({readOnly:!0})],Dn.prototype,"items",void 0);c([d({readOnly:!0})],Dn.prototype,"needsRender",null);c([d({readOnly:!0})],Dn.prototype,"_watchUpdatingTracking",void 0);c([d({readOnly:!0})],Dn.prototype,"updating",null);Dn=c([T("esri.views.overlay.ViewOverlay")],Dn);const Uw=Dn,Wf=[0,0];function UN(t){const r=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return Wf[0]=i.left+((r==null?void 0:r.pageXOffset)??0),Wf[1]=i.top+((r==null?void 0:r.pageYOffset)??0),Wf}function Vw(t){t&&(wT(t),t.parentNode&&t.parentNode.removeChild(t))}function VN(t){const e=document.createElement("div");return t.appendChild(e),e}const Wa=16,gu=750,GN=512,zN=2,jN=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:Wa,time:gu},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Z(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),Z(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Z(()=>this.ui,(i,n)=>this._handleUIChange(i,n),tt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Ce(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const n=this._get("container"),s=g0(i);if(!s&&typeof i=="string"&&k.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),n===s)return;const o="dom-size";if(this.removeHandles(o),this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Vw(this.root),this._set("root",null)),this.userContent&&(Iw(this.userContent,n),Vw(this.userContent),this._set("userContent",null))),!s){this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null);return}s.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",Iw(s,a),s.appendChild(a),this._set("userContent",a);const u=document.createElement("div");u.className="esri-view-root",s.insertBefore(u,s.firstChild),this._set("root",u);const h=document.createElement("div");h.className="esri-view-surface",h.setAttribute("role","application"),h.tabIndex=0,u.appendChild(h),this._set("surface",h);const f=new Uw;u.appendChild(f.surface),this._set("overlay",f),this.addHandles(Z(()=>f.needsRender,p=>{p&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Wo({render:()=>{var m;return(m=this.overlay)==null?void 0:m.render()}}):this._overlayRenderTaskHandle=xe(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this.addHandles(Z(()=>this.size,p=>{const[m,y]=p,_="esri-view-surface--inset-outline";m>=document.body.clientWidth||y>=document.body.clientHeight?h.classList.add(_):h.classList.remove(_)},tt),o),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,n,s){const o=this.position;return i=i-(o?o[0]:0),n=n-(o?o[1]:0),s?(s[0]=i,s[1]=n):s=[i,n],s}containerToPage(i,n,s){const o=this.position;return i=i+(o?o[0]:0),n=n+(o?o[1]:0),s?(s[0]=i,s[1]=n):s=[i,n],s}_handleUIChange(i,n){this.removeHandles("ui"),n&&n!==i&&n.destroy(),i&&(i.view=this,this.addHandles(Z(()=>this.root,s=>{i.container=s?VN(s):null},tt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Wa,i.time=gu,this.addHandles([(()=>{const n=()=>{i.freq=Wa,i.time=gu};return window.addEventListener("resize",n),{remove(){window.removeEventListener("resize",n)}}})(),Wo({prepare:n=>{const s=this._measure(),o=this._freqInfo;if(o.time+=n.deltaTime,s&&(o.freq=Wa,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0,this._position()||s?o.freq=Wa:o.freq=Math.min(gu,o.freq*zN),!s&&o.freq>=GN&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,n=i?i.clientWidth:0,s=i?i.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return n===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:n,height:s}),!0)}_position(){const i=this.container,n=this.position,s=i&&UN(i);return s&&(!n||s[0]!==n[0]||s[1]!==n[1])?(this._set("position",[s[0],s[1]]),!0):!1}forceDOMReadyCycle(){}};return c([d()],e.prototype,"container",null),c([d({readOnly:!0})],e.prototype,"focused",null),c([d({readOnly:!0})],e.prototype,"height",void 0),c([d({type:Uw})],e.prototype,"overlay",void 0),c([d({readOnly:!0})],e.prototype,"position",void 0),c([d({readOnly:!0})],e.prototype,"resizing",void 0),c([d({readOnly:!0})],e.prototype,"root",void 0),c([d({value:null,readOnly:!0})],e.prototype,"size",null),c([d({readOnly:!0})],e.prototype,"surface",void 0),c([d({readOnly:!0})],e.prototype,"suspended",void 0),c([d()],e.prototype,"ui",void 0),c([d({readOnly:!0})],e.prototype,"userContent",void 0),c([d({readOnly:!0})],e.prototype,"width",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),e=c([T("esri.views.DOMContainer")],e),e};class WN{constructor(e,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in e){const n=e[i],s=new hb(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=N3(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const r=this._properties[e];for(const i of r.acquired)c_(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(e){const r=this._owner._get(e),i=this._properties[e];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const e in this._properties){const r=this._properties[e];let i=0;for(const n of r.acquired)c_(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}}const BN=C("mac")?"Meta":"Ctrl",nf={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)nf[t]=String.fromCharCode(t);for(let t=1;t<25;t++)nf[111+t]=`F${t}`;for(let t=65;t<91;t++)nf[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function HN(t){if(t.key!==void 0)return m3(t);const e=nf[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function qN(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class ZN{constructor(e,r=[]){this.eventType=e,this.keyModifiers=r}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=e.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}}const Gw=k.getLogger("esri.views.input.InputHandler");class Ke{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const r=this._incoming[e];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){if(this._manager){Gw.error("This InputHandler has already been registered with an InputManager");return}e.setEventCallback(r=>this._handleEvent(r)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e}onUninstall(){}registerIncoming(e,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof e=="string"?new ZN(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=f=>{const p=this._incoming[f.match.eventType];if(p){const m=p.indexOf(f);p.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},u=new YN(s,i,{onPause:a,onRemove:a,onResume:f=>{const p=this._incoming[f.match.eventType];p&&!p.includes(f)&&(p.push(f),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[s.eventType];return h||(h=[],this._incoming[s.eventType]=h),h.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const r=new JN(e,{onEmit:(i,n,s,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(e){var r;(r=this._manager)==null||r.setPointerCapture(e,!0)}stopCapturingPointer(e){var r;(r=this._manager)==null||r.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){if(!this._manager){Gw.error("This InputHandler is not registered with an InputManager");return}this.onUninstall(),this._manager=null}_handleEvent(e){var i;const r=this._incoming[e.type];if(r){for(const n of r)if(n.match.matches(e)&&((i=n.callback)==null||i.call(n,e),e.shouldStopPropagation()))break}}}class YN{constructor(e,r,i){this.match=e,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class JN{constructor(e,r){this.eventType=e,this._removed=!1,this._handler=r}emit(e,r,i){this._removed||this._handler.onEmit(this,e,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class KN extends Ke{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{this._update(r.data)})}_update(e){const r=e.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=e;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}}class XN{constructor(e,r){this._observable=new ag,this._value=e,this._equalityFunction=r}get value(){return H(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}function rd(t,e=qv){return new XN(t,e)}class QN extends Ke{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=rd(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}let ti=class extends z{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=BN,this._latestPointerType="mouse",this._propertiesPool=new WN({latestPointerLocation:rD},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const r of e)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,r,i=wn.INTERNAL){if(this._nameToGroup[e]){k.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");return}if(r.length===0){k.getLogger(this.declaredClass).error("Can't register a group of zero handlers");return}const n={name:e,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,u,h,f,p)=>{this._emitInputEvent(o.priorityIndex+1,a,u,h,p,f)},setPointerCapture:(a,u)=>{this._setPointerCapture(n,o,a,u)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const r=this._nameToGroup[e];if(!r){k.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`");return}r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation){this._updateDependenciesAfterPropagation=!0;return}this._updateDependenciesAfterPropagation=!1;const e=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)qN(a)||r.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,r,i){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,r){if(e==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(e,r,i,n)}_updateKeyModifiers(e,r){if(!r)return;let i=!1;const n=()=>{if(!i){const a=new Set;this._activeKeyModifiers.forEach(u=>{a.add(u)}),this._activeKeyModifiers=a,i=!0}},s=(a,u)=>{u&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!u&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const u=r.key;this._keyModifiers.has(u)&&s(u,e==="key-down")}const o=r.native;s("Alt",!!(o&&o.altKey)),s("Ctrl",!!(o&&o.ctrlKey)),s("Shift",!!(o&&o.shiftKey)),s("Meta",!!(o&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new KN((e,r,i)=>this._setLatestPointer(e,r,i)),this._multiTouchHandler=new QN,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],wn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,wn.INTERNAL)}_setPointerCapture(e,r,i,n){const s=e.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,r,i,n){this._emitInputEvent(0,e,r,i,n)}_emitInputEvent(e,r,i,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=s!==void 0?s:!1,f={event:new eD(r,i,a,o||this._activeKeyModifiers,u),priorityIndex:e};if(this._currentPropagation){this._currentPropagation.events.push(f);return}this._doNewPropagation(f)}_doNewPropagation(e){this._currentPropagation={events:new Zh,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var r,i;const e=xt(this._currentPropagation);for(;e.events.length>0;){const{event:n,priorityIndex:s}=e.events.pop(),o=n.data&&n.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((i=(r=e.currentHandler).eventCallback)==null||i.call(r,n)),n.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(n.shouldPausePropagation(()=>this._continuePropagation())){this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1});return}}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const r=new Zh;r.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null}}_compareHandlerPriority(e,r){if(e.handler.hasSideEffects!==r.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==r.groupPriority)return e.groupPriority>r.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(u=>n.keyModifiers.includes(u)),o=s.length===i.keyModifiers.length,a=s.length===n.keyModifiers.length;if(o!==a)return i.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(e){const r=[];for(const i of e){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const e=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{e(()=>{this._onEventReceived(r,i)})},disablePointerCapture:e}}};c([d({readOnly:!0})],ti.prototype,"hasPendingInputs",null);c([d({constructOnly:!0})],ti.prototype,"eventSource",void 0);c([d({constructOnly:!0})],ti.prototype,"recognizers",void 0);c([d()],ti.prototype,"_latestPointerType",void 0);c([d()],ti.prototype,"latestPointerType",null);c([d()],ti.prototype,"multiTouchActive",null);c([d({readOnly:!0})],ti.prototype,"latestPointerLocation",void 0);ti=c([T("esri.views.input.InputManager")],ti);class eD{constructor(e,r,i,n,s){this.type=e,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=cn.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=cn.STOPPED}shouldStopPropagation(){return(this._propagationState&cn.STOPPED)!==0}async(e){this._propagationState|=cn.PAUSED;const r=(i,n)=>{this._propagationState&=~cn.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof e=="function"?e():e).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(e){return this._propagationState&cn.PAUSED?(this._resumeCallback=e,!0):!1}preventDefault(){this.data.native.preventDefault()}}var cn;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(cn||(cn={}));const wn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class tD{}const rD=tD;function ci(t){return t!=null&&"open"in t&&"declaredClass"in t}const iD=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Z(()=>[this.ui,this.popup],([i,n],s)=>{const o="popup",a="manual";if(s){const[u,h]=s;u&&ci(h)&&(h.view=null,u.remove(h,o))}i&&ci(n)&&(n.view=this,i.add(n,{key:o,position:a}))},tt),this.on("click",i=>{!this.popup||!this.popupEnabled||i.pointerType==="mouse"&&i.button!==0||(ci(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(()=>this.setupPopup()).then(()=>{ci(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)},()=>{}))},wn.WIDGET)]),c0(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{R(()=>import("./Popup-d4c70e1d.js"),["assets/Popup-d4c70e1d.js","assets/throttle-9d01e8e8.js","assets/ByteSizeUnit-c0a244d3.js","assets/AttachmentInfo-68ae3c07.js","assets/AttachmentQuery-671eea20.js","assets/widget-6398120a.js","assets/ColorStop-3619cfe4.js","assets/utils-32fb49bc.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/ItemCache-8ce94fa3.js","assets/MemCache-75bedf1f.js","assets/jsonUtils-bd0bdc00.js","assets/UniqueValueRenderer-612cb004.js","assets/LegendOptions-2499ed1a.js","assets/diffUtils-abe9f3bb.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/DictionaryLoader-d0105348.js","assets/LRUCache-9a513454.js","assets/FieldsIndex-58671a99.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/executeQueryJSON-4720f52c.js","assets/query-265b258d.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/pbfQueryUtils-5927997d.js","assets/pbf-03b64555.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/queryZScale-471b0dc8.js","assets/FeatureSet-bb4ca057.js","assets/featureConversionUtils-d43c9f43.js","assets/RelationshipQuery-ec67eec9.js","assets/TopFeaturesQuery-cd80eee2.js","assets/FeatureLayer-b3255eac.js","assets/MultiOriginJSONSupport-196fcb0e.js","assets/sql-4d7dca2e.js","assets/FeatureLayerBase-48864b87.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/serviceCapabilitiesUtils-ac150fd2.js","assets/editsZScale-e481307c.js","assets/APIKeyMixin-cc81d0ae.js","assets/ArcGISService-005a73dc.js","assets/BlendLayer-09dd0b47.js","assets/jsonUtils-7f75d4eb.js","assets/CustomParametersMixin-e393829c.js","assets/EditBusLayer-c4aa75bb.js","assets/FeatureReductionLayer-93fe1e80.js","assets/FeatureEffect-f33db1b4.js","assets/clusterUtils-223e1cf4.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/OperationalLayer-58eaf5ba.js","assets/OrderedLayer-e3e3401b.js","assets/PortalLayer-235cd1fe.js","assets/portalItemUtils-6670776d.js","assets/RefreshableLayer-1c8a9fe5.js","assets/ScaleRangeLayer-10088de5.js","assets/TemporalLayer-442d9ff7.js","assets/FeatureTemplate-8216f4af.js","assets/FeatureType-f065aa3e.js","assets/fieldProperties-8f8e4177.js","assets/versionUtils-7295a12b.js","assets/styleUtils-afa5cc7a.js","assets/popupUtils-d7e116e7.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){ci(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup){k.getLogger(this.declaredClass).error(new D("view:null-popup","Popup is null and can't be opened"));return}this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),ci(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,n){await this.when();const{location:s,queryArea:o,layerViewsAndGraphics:a,clientOnlyGraphics:u}=await this._prepareFetchPopupFeatures(i,n),h=Promise.resolve(u),f=this._queryLayerPopupFeatures(o,a,n),p=f.map(y=>y.promise),m=y3([h,...p]).then(y=>Array.from(new Set(y.flat())));return{location:s,clientOnlyGraphics:u,allGraphicsPromise:m,promisesPerLayerView:f}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),!(!this.popup||ci(this.popup)))return this._popupSetupTask=dg(async n=>{const{default:s}=await R(()=>import("./Popup-d4c70e1d.js"),["assets/Popup-d4c70e1d.js","assets/throttle-9d01e8e8.js","assets/ByteSizeUnit-c0a244d3.js","assets/AttachmentInfo-68ae3c07.js","assets/AttachmentQuery-671eea20.js","assets/widget-6398120a.js","assets/ColorStop-3619cfe4.js","assets/utils-32fb49bc.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/ItemCache-8ce94fa3.js","assets/MemCache-75bedf1f.js","assets/jsonUtils-bd0bdc00.js","assets/UniqueValueRenderer-612cb004.js","assets/LegendOptions-2499ed1a.js","assets/diffUtils-abe9f3bb.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/DictionaryLoader-d0105348.js","assets/LRUCache-9a513454.js","assets/FieldsIndex-58671a99.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/executeQueryJSON-4720f52c.js","assets/query-265b258d.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/pbfQueryUtils-5927997d.js","assets/pbf-03b64555.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/queryZScale-471b0dc8.js","assets/FeatureSet-bb4ca057.js","assets/featureConversionUtils-d43c9f43.js","assets/RelationshipQuery-ec67eec9.js","assets/TopFeaturesQuery-cd80eee2.js","assets/FeatureLayer-b3255eac.js","assets/MultiOriginJSONSupport-196fcb0e.js","assets/sql-4d7dca2e.js","assets/FeatureLayerBase-48864b87.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/serviceCapabilitiesUtils-ac150fd2.js","assets/editsZScale-e481307c.js","assets/APIKeyMixin-cc81d0ae.js","assets/ArcGISService-005a73dc.js","assets/BlendLayer-09dd0b47.js","assets/jsonUtils-7f75d4eb.js","assets/CustomParametersMixin-e393829c.js","assets/EditBusLayer-c4aa75bb.js","assets/FeatureReductionLayer-93fe1e80.js","assets/FeatureEffect-f33db1b4.js","assets/clusterUtils-223e1cf4.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/OperationalLayer-58eaf5ba.js","assets/OrderedLayer-e3e3401b.js","assets/PortalLayer-235cd1fe.js","assets/portalItemUtils-6670776d.js","assets/RefreshableLayer-1c8a9fe5.js","assets/ScaleRangeLayer-10088de5.js","assets/TemporalLayer-442d9ff7.js","assets/FeatureTemplate-8216f4af.js","assets/FeatureType-f065aa3e.js","assets/fieldProperties-8f8e4177.js","assets/versionUtils-7295a12b.js","assets/styleUtils-afa5cc7a.js","assets/popupUtils-d7e116e7.js"]);if(De(n),!this.popup||ci(this.popup))return;const o=this.popup;delete o.open,delete o.close,this.popup=new s(o)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,n,s){return n.map(({layerView:o,graphics:a})=>{const u={clientGraphics:a,event:s!=null?s.event:void 0,signal:s!=null?s.signal:void 0,defaultPopupTemplateEnabled:s!=null?!!s.defaultPopupTemplateEnabled:!1},h=o.fetchPopupFeatures(i,u);return{layerView:o,promise:h}})}_isValidPopupGraphic(i,n){return i&&!!i.getEffectivePopupTemplate(n!=null&&n.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,n){const{clientGraphics:s,queryArea:o,location:a}=await this._popupHitTestGraphics(i,n),u=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:h,clientOnlyGraphics:f}=this._graphicsPerFetchPopupLayerView(s,u);return{clientOnlyGraphics:f,layerViewsAndGraphics:h,queryArea:o,location:a}}async _popupHitTestGraphics(i,n){const s=await this.popupHitTest(i),o=s.results,a=s.mapPoint,u=o.filter(p=>p.type==="graphic"&&this._isValidPopupGraphic(p.graphic,n)),h=u.length?u[0].mapPoint:null;return{clientGraphics:u.map(p=>p.graphic),queryArea:a,location:a||h}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&i.push(n)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,n){const s=[],o=new Map,a=n.map(u=>{const h=[];return"layer"in u?o.set(u.layer,h):o.set(u.graphics,h),{layerView:u,graphics:h}});for(const u of i){const h=o.get(u.layer)||o.get(u.sourceLayer)||null;h?h.push(u):s.push(u)}return{layerViewsAndGraphics:a,clientOnlyGraphics:s}}};return c([d({cast(r){return!r||ci(r)||typeof r=="object"&&(r.open=i=>(_h(k.getLogger(this.declaredClass),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),r.close=()=>(_h(k.getLogger(this.declaredClass),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),r}})],e.prototype,"popup",void 0),c([d()],e.prototype,"popupEnabled",void 0),e=c([T("esri.views.PopupView")],e),e},zw={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},nD={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function sD(t,e){const r=new Date(t,e+1,1);return r.setDate(0),r.getDate()}function Bf(t,e,r){const i=new Date(t.getTime());if(e&&r){const n=nD[r],{getter:s,setter:o,multiplier:a}=n;if(r==="months"){const u=sD(i.getFullYear(),i.getMonth()+e);i.getDate()>u&&i.setDate(u)}i[o](i[s]()+e*a)}return i}function jw(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function Aj(t,e,r){return t===0?0:t*zw[e]/zw[r]}var cr;let Rt=cr=class extends G{static get allTime(){return Ww}static get empty(){return oD}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=e?e.getTime():null}get isAllTime(){return this.equals(cr.allTime)}get isEmpty(){return this.equals(cr.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=e?e.getTime():null}clone(){return new cr({end:this.end,start:this.start})}equals(e){if(!e)return!1;const r=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,n=e.start!=null?e.start.getTime():e.start,s=e.end!=null?e.end.getTime():e.end;return r===n&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const r=os(this.start,n=>jw(n,e)),i=os(this.end,n=>{const s=jw(n,e);return n.getTime()===s.getTime()?s:Bf(s,1,e)});return new cr({start:r,end:i})}intersection(e){var u,h,f,p;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return cr.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=((u=this.start)==null?void 0:u.getTime())??-1/0,i=((h=this.end)==null?void 0:h.getTime())??1/0,n=((f=e.start)==null?void 0:f.getTime())??-1/0,s=((p=e.end)==null?void 0:p.getTime())??1/0;let o,a;if(n>=r&&n<=i?o=n:r>=n&&r<=s&&(o=r),i>=n&&i<=s?a=i:s>=r&&s<=i&&(a=s),o!=null&&a!=null&&!isNaN(o)&&!isNaN(a)){const m=new cr;return m.start=o===-1/0?null:new Date(o),m.end=a===1/0?null:new Date(a),m}return cr.empty}offset(e,r){if(this.isEmpty||this.isAllTime)return this.clone();const i=new cr,{start:n,end:s}=this;return n!=null&&(i.start=Bf(n,e,r)),s!=null&&(i.end=Bf(s,e,r)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Ww.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new cr({start:r,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],Rt.prototype,"end",void 0);c([fe("end")],Rt.prototype,"readEnd",null);c([de("end")],Rt.prototype,"writeEnd",null);c([d({readOnly:!0,json:{read:!1}})],Rt.prototype,"isAllTime",null);c([d({readOnly:!0,json:{read:!1}})],Rt.prototype,"isEmpty",null);c([d({type:Date,json:{write:{allowNull:!0}}})],Rt.prototype,"start",void 0);c([fe("start")],Rt.prototype,"readStart",null);c([de("start")],Rt.prototype,"writeStart",null);Rt=cr=c([T("esri.TimeExtent")],Rt);const Ww=new Rt,oD=new Rt({start:void 0,end:void 0}),aD=Rt,b0=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Vi,this._updatingHandles=new oa}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return c([d({readOnly:!0})],e.prototype,"handles",null),c([d({readOnly:!0})],e.prototype,"updatingHandles",null),e=c([T("esri.core.HandleOwner")],e),e};let id=class extends b0(z){};id=c([T("esri.core.HandleOwner")],id);let yc=class extends b0(ee){constructor(e){super(e),this.handles.add([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ee.ofType(this.itemType.Type))(e):new ee(e)}};c([d()],yc.prototype,"owner",null);yc=c([T("esri.core.support.OwningCollection")],yc);function jT(t,e){return{type:t,cast:Gb,set(r){const i=Ts(r,this._get(e),t);i.owner=this,this._set(e,i)}}}var il;const nd=Mt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),WT=nd.jsonValues.slice();FP(WT,"orthometric");const vl=Mt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Mr=il=class extends G{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,r,i){return nd.write(e,r,i)}readHeightModel(e,r,i){const n=nd.read(e);return n||(i&&i.messages&&i.messages.push(lD(e,{context:i})),null)}readHeightUnit(e,r,i){const n=vl.read(e);return n||(i&&i.messages&&i.messages.push(Bw(e,{context:i})),null)}readHeightUnitService(e,r,i){const n=cS(e)||vl.read(e);return n||(i&&i.messages&&i.messages.push(Bw(e,{context:i})),null)}readVertCRS(e,r){return r.vertCRS||r.ellipsoid||r.geoid}clone(){return new il({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return e?this===e?!0:this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS:!1}static deriveUnitFromSR(e,r){const i=jA(r);return new il({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,r){return r={origin:"web-scene",...r},super.write(e,r)}static fromJSON(e){if(!e)return null;const r=new il;return r.read(e,{origin:"web-scene"}),r}};c([d({type:nd.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:WT,default:"ellipsoidal"}}}})],Mr.prototype,"heightModel",void 0);c([de("web-scene","heightModel")],Mr.prototype,"writeHeightModel",null);c([fe(["web-scene","service"],"heightModel")],Mr.prototype,"readHeightModel",null);c([d({type:vl.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:vl.jsonValues,write:vl.write}}}})],Mr.prototype,"heightUnit",void 0);c([fe("web-scene","heightUnit")],Mr.prototype,"readHeightUnit",null);c([fe("service","heightUnit")],Mr.prototype,"readHeightUnitService",null);c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Mr.prototype,"vertCRS",void 0);c([fe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Mr.prototype,"readVertCRS",null);Mr=il=c([T("esri.geometry.HeightModelInfo")],Mr);function Bw(t,e){return new Ei("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function lD(t,e){return new Ei("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}const S0=Mr;let sd=class extends yc{constructor(e){super(e),this.handles.add(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(k.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};sd=c([T("esri.support.AnalysesCollection")],sd);let gc=class extends yc{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([Ub({Type:lc,ensureType:je(lc)})],gc.prototype,"itemType",void 0);gc=c([T("esri.support.GraphicsCollection")],gc);const Hw=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class po extends Error{}class cD extends po{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class uD extends po{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class hD extends po{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class nl extends po{}class BT extends po{constructor(e){super(`Invalid unit ${e}`)}}class Wt extends po{}class Ki extends po{constructor(){super("Zone is an abstract class")}}const N="numeric",Pr="short",Lt="long",od={year:N,month:N,day:N},HT={year:N,month:Pr,day:N},dD={year:N,month:Pr,day:N,weekday:Pr},qT={year:N,month:Lt,day:N},ZT={year:N,month:Lt,day:N,weekday:Lt},YT={hour:N,minute:N},JT={hour:N,minute:N,second:N},KT={hour:N,minute:N,second:N,timeZoneName:Pr},XT={hour:N,minute:N,second:N,timeZoneName:Lt},QT={hour:N,minute:N,hourCycle:"h23"},eE={hour:N,minute:N,second:N,hourCycle:"h23"},tE={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:Pr},rE={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:Lt},iE={year:N,month:N,day:N,hour:N,minute:N},nE={year:N,month:N,day:N,hour:N,minute:N,second:N},sE={year:N,month:Pr,day:N,hour:N,minute:N},oE={year:N,month:Pr,day:N,hour:N,minute:N,second:N},fD={year:N,month:Pr,day:N,weekday:Pr,hour:N,minute:N},aE={year:N,month:Lt,day:N,hour:N,minute:N,timeZoneName:Pr},lE={year:N,month:Lt,day:N,hour:N,minute:N,second:N,timeZoneName:Pr},cE={year:N,month:Lt,day:N,weekday:Lt,hour:N,minute:N,timeZoneName:Lt},uE={year:N,month:Lt,day:N,weekday:Lt,hour:N,minute:N,second:N,timeZoneName:Lt};class zc{get type(){throw new Ki}get name(){throw new Ki}get ianaName(){return this.name}get isUniversal(){throw new Ki}offsetName(e,r){throw new Ki}formatOffset(e,r){throw new Ki}offset(e){throw new Ki}equals(e){throw new Ki}get isValid(){throw new Ki}}let Hf=null;class sf extends zc{static get instance(){return Hf===null&&(Hf=new sf),Hf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:i}){return dE(e,r,i)}formatOffset(e,r){return Sl(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Xu={};function pD(t){return Xu[t]||(Xu[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Xu[t]}const mD={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function yD(t,e){const r=t.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,u,h,f]=i;return[o,n,s,a,u,h,f]}function gD(t,e){const r=t.formatToParts(e),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=mD[s];s==="era"?i[a]=o:ie(a)||(i[a]=parseInt(o,10))}return i}let _u={};class Ri extends zc{static create(e){return _u[e]||(_u[e]=new Ri(e)),_u[e]}static resetCache(){_u={},Xu={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ri.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:i}){return dE(e,r,i,this.name)}formatOffset(e,r){return Sl(this.offset(e),r)}offset(e){const r=new Date(e);if(isNaN(r))return NaN;const i=pD(this.name);let[n,s,o,a,u,h,f]=i.formatToParts?gD(i,r):yD(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=M0({year:n,month:s,day:o,hour:u===24?0:u,minute:h,second:f,millisecond:0});let y=+r;const _=y%1e3;return y-=_>=0?_:1e3+_,(m-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let qw={};function _D(t,e={}){const r=JSON.stringify([t,e]);let i=qw[r];return i||(i=new Intl.ListFormat(t,e),qw[r]=i),i}let vy={};function by(t,e={}){const r=JSON.stringify([t,e]);let i=vy[r];return i||(i=new Intl.DateTimeFormat(t,e),vy[r]=i),i}let Sy={};function wD(t,e={}){const r=JSON.stringify([t,e]);let i=Sy[r];return i||(i=new Intl.NumberFormat(t,e),Sy[r]=i),i}let Ty={};function vD(t,e={}){const{base:r,...i}=e,n=JSON.stringify([t,i]);let s=Ty[n];return s||(s=new Intl.RelativeTimeFormat(t,e),Ty[n]=s),s}let sl=null;function bD(){return sl||(sl=new Intl.DateTimeFormat().resolvedOptions().locale,sl)}function SD(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const r=t.indexOf("-u-");if(r===-1)return[t];{let i,n;try{i=by(t).resolvedOptions(),n=t}catch{const u=t.substring(0,r);i=by(u).resolvedOptions(),n=u}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function TD(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function ED(t){const e=[];for(let r=1;r<=12;r++){const i=Q.utc(2016,r,1);e.push(t(i))}return e}function MD(t){const e=[];for(let r=1;r<=7;r++){const i=Q.utc(2016,11,13+r);e.push(t(i))}return e}function wu(t,e,r,i,n){const s=t.listingMode(r);return s==="error"?null:s==="en"?i(e):n(e)}function PD(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class CD{constructor(e,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=wD(e,a)}}format(e){if(this.inf){const r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{const r=this.floor?Math.floor(e):E0(e,3);return Fe(r,this.padTo)}}}class AD{constructor(e,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ri.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=by(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ID{constructor(e,r,i){this.opts={style:"long",...i},!r&&hE()&&(this.rtf=vD(e,i))}format(e,r){return this.rtf?this.rtf.format(e,r):HD(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}}class Te{static fromOpts(e){return Te.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,r,i,n=!1){const s=e||$e.defaultLocale,o=s||(n?"en-US":bD()),a=r||$e.defaultNumberingSystem,u=i||$e.defaultOutputCalendar;return new Te(o,a,u,s)}static resetCache(){sl=null,vy={},Sy={},Ty={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:i}={}){return Te.create(e,r,i)}constructor(e,r,i,n){const[s,o,a]=SD(e);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=i||a||null,this.intl=TD(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=PD(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Te.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1,i=!0){return wu(this,e,i,mE,()=>{const n=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=ED(o=>this.extract(o,n,"month"))),this.monthsCache[s][e]})}weekdays(e,r=!1,i=!0){return wu(this,e,i,_E,()=>{const n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=r?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=MD(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return wu(this,void 0,e,()=>wE,()=>{if(!this.meridiemCache){const r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Q.utc(2016,11,13,9),Q.utc(2016,11,13,19)].map(i=>this.extract(i,r,"dayperiod"))}return this.meridiemCache})}eras(e,r=!0){return wu(this,e,r,vE,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Q.utc(-40,1,1),Q.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[e]})}extract(e,r,i){const n=this.dtFormatter(e,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new CD(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new AD(e,this.intl,r)}relFormatter(e={}){return new ID(this.intl,this.isEnglish(),e)}listFormatter(e={}){return _D(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let qf=null;class ct extends zc{static get utcInstance(){return qf===null&&(qf=new ct(0)),qf}static instance(e){return e===0?ct.utcInstance:new ct(e)}static parseSpecifier(e){if(e){const r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new ct(af(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Sl(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Sl(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return Sl(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class OD extends zc{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function dn(t,e){if(ie(t)||t===null)return e;if(t instanceof zc)return t;if(xD(t)){const r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?sf.instance:r==="utc"||r==="gmt"?ct.utcInstance:ct.parseSpecifier(r)||Ri.create(t)}else return gs(t)?ct.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new OD(t)}let Zw=()=>Date.now(),Yw="system",Jw=null,Kw=null,Xw=null,Qw=60,e1;class $e{static get now(){return Zw}static set now(e){Zw=e}static set defaultZone(e){Yw=e}static get defaultZone(){return dn(Yw,sf.instance)}static get defaultLocale(){return Jw}static set defaultLocale(e){Jw=e}static get defaultNumberingSystem(){return Kw}static set defaultNumberingSystem(e){Kw=e}static get defaultOutputCalendar(){return Xw}static set defaultOutputCalendar(e){Xw=e}static get twoDigitCutoffYear(){return Qw}static set twoDigitCutoffYear(e){Qw=e%100}static get throwOnInvalid(){return e1}static set throwOnInvalid(e){e1=e}static resetCaches(){Te.resetCache(),Ri.resetCache()}}function ie(t){return typeof t>"u"}function gs(t){return typeof t=="number"}function of(t){return typeof t=="number"&&t%1===0}function xD(t){return typeof t=="string"}function kD(t){return Object.prototype.toString.call(t)==="[object Date]"}function hE(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function LD(t){return Array.isArray(t)?t:[t]}function t1(t,e,r){if(t.length!==0)return t.reduce((i,n)=>{const s=[e(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function RD(t,e){return e.reduce((r,i)=>(r[i]=t[i],r),{})}function la(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gi(t,e,r){return of(t)&&t>=e&&t<=r}function ND(t,e){return t-e*Math.floor(t/e)}function Fe(t,e=2){const r=t<0;let i;return r?i="-"+(""+-t).padStart(e,"0"):i=(""+t).padStart(e,"0"),i}function un(t){if(!(ie(t)||t===null||t===""))return parseInt(t,10)}function Kn(t){if(!(ie(t)||t===null||t===""))return parseFloat(t)}function T0(t){if(!(ie(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function E0(t,e,r=!1){const i=10**e;return(r?Math.trunc:Math.round)(t*i)/i}function jc(t){return t%4===0&&(t%100!==0||t%400===0)}function bl(t){return jc(t)?366:365}function ad(t,e){const r=ND(e-1,12)+1,i=t+(e-r)/12;return r===2?jc(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function M0(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function ld(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,r=t-1,i=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return e===4||i===3?53:52}function Ey(t){return t>99?t:t>$e.twoDigitCutoffYear?1900+t:2e3+t}function dE(t,e,r,i=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function af(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);const i=parseInt(e,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function fE(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Wt(`Invalid unit value ${t}`);return e}function cd(t,e){const r={};for(const i in t)if(la(t,i)){const n=t[i];if(n==null)continue;r[e(i)]=fE(n)}return r}function Sl(t,e){const r=Math.trunc(Math.abs(t/60)),i=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Fe(r,2)}:${Fe(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${Fe(r,2)}${Fe(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function lf(t){return RD(t,["hour","minute","second","millisecond"])}const DD=["January","February","March","April","May","June","July","August","September","October","November","December"],pE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$D=["J","F","M","A","M","J","J","A","S","O","N","D"];function mE(t){switch(t){case"narrow":return[...$D];case"short":return[...pE];case"long":return[...DD];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const yE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],gE=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],FD=["M","T","W","T","F","S","S"];function _E(t){switch(t){case"narrow":return[...FD];case"short":return[...gE];case"long":return[...yE];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const wE=["AM","PM"],UD=["Before Christ","Anno Domini"],VD=["BC","AD"],GD=["B","A"];function vE(t){switch(t){case"narrow":return[...GD];case"short":return[...VD];case"long":return[...UD];default:return null}}function zD(t){return wE[t.hour<12?0:1]}function jD(t,e){return _E(e)[t.weekday-1]}function WD(t,e){return mE(e)[t.month-1]}function BD(t,e){return vE(e)[t.year<0?0:1]}function HD(t,e,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){const p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${n[t][0]}`;case-1:return p?"yesterday":`last ${n[t][0]}`;case 0:return p?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,h=n[t],f=i?u?h[1]:h[2]||h[1]:u?n[t][0]:t;return o?`${a} ${f} ago`:`in ${a} ${f}`}function r1(t,e){let r="";for(const i of t)i.literal?r+=i.val:r+=e(i.val);return r}const qD={D:od,DD:HT,DDD:qT,DDDD:ZT,t:YT,tt:JT,ttt:KT,tttt:XT,T:QT,TT:eE,TTT:tE,TTTT:rE,f:iE,ff:sE,fff:aE,ffff:cE,F:nE,FF:oE,FFF:lE,FFFF:uE};class lt{static create(e,r={}){return new lt(e,r)}static parseFormat(e){let r=null,i="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return qD[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTime(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTimeParts(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).formatToParts()}formatInterval(e,r={}){return this.loc.dtFormatter(e.start,{...this.opts,...r}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return Fe(e,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,_)=>this.loc.extract(e,y,_),o=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",a=()=>i?zD(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,_)=>i?WD(e,y):s(_?{month:y}:{month:y,day:"numeric"},"month"),h=(y,_)=>i?jD(e,y):s(_?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),f=y=>{const _=lt.macroTokenToFormatOpts(y);return _?this.formatWithSystemDefault(e,_):y},p=y=>i?BD(e,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return f(y)}};return r1(lt.parseFormat(r),m)}formatDurationFromString(e,r){const i=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>h=>{const f=i(h);return f?this.num(u.get(f),h.length):h},s=lt.parseFormat(r),o=s.reduce((u,{literal:h,val:f})=>h?u:u.concat(f),[]),a=e.shiftTo(...o.map(i).filter(u=>u));return r1(s,n(a))}}class mr{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const bE=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Pa(...t){const e=t.reduce((r,i)=>r+i.source,"");return RegExp(`^${e}$`)}function Ca(...t){return e=>t.reduce(([r,i,n],s)=>{const[o,a,u]=s(e,n);return[{...r,...o},a||i,u]},[{},null,1]).slice(0,2)}function Aa(t,...e){if(t==null)return[null,null];for(const[r,i]of e){const n=r.exec(t);if(n)return i(n)}return[null,null]}function SE(...t){return(e,r)=>{const i={};let n;for(n=0;n<t.length;n++)i[t[n]]=un(e[r+n]);return[i,null,r+n]}}const TE=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ZD=`(?:${TE.source}?(?:\\[(${bE.source})\\])?)?`,P0=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,EE=RegExp(`${P0.source}${ZD}`),C0=RegExp(`(?:T${EE.source})?`),YD=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,JD=/(\d{4})-?W(\d\d)(?:-?(\d))?/,KD=/(\d{4})-?(\d{3})/,XD=SE("weekYear","weekNumber","weekDay"),QD=SE("year","ordinal"),e5=/(\d{4})-(\d\d)-(\d\d)/,ME=RegExp(`${P0.source} ?(?:${TE.source}|(${bE.source}))?`),t5=RegExp(`(?: ${ME.source})?`);function zo(t,e,r){const i=t[e];return ie(i)?r:un(i)}function r5(t,e){return[{year:zo(t,e),month:zo(t,e+1,1),day:zo(t,e+2,1)},null,e+3]}function Ia(t,e){return[{hours:zo(t,e,0),minutes:zo(t,e+1,0),seconds:zo(t,e+2,0),milliseconds:T0(t[e+3])},null,e+4]}function Wc(t,e){const r=!t[e]&&!t[e+1],i=af(t[e+1],t[e+2]),n=r?null:ct.instance(i);return[{},n,e+3]}function Bc(t,e){const r=t[e]?Ri.create(t[e]):null;return[{},r,e+1]}const i5=RegExp(`^T?${P0.source}$`),n5=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function s5(t){const[e,r,i,n,s,o,a,u,h]=t,f=e[0]==="-",p=u&&u[0]==="-",m=(y,_=!1)=>y!==void 0&&(_||y&&f)?-y:y;return[{years:m(Kn(r)),months:m(Kn(i)),weeks:m(Kn(n)),days:m(Kn(s)),hours:m(Kn(o)),minutes:m(Kn(a)),seconds:m(Kn(u),u==="-0"),milliseconds:m(T0(h),p)}]}const o5={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function A0(t,e,r,i,n,s,o){const a={year:e.length===2?Ey(un(e)):un(e),month:pE.indexOf(r)+1,day:un(i),hour:un(n),minute:un(s)};return o&&(a.second=un(o)),t&&(a.weekday=t.length>3?yE.indexOf(t)+1:gE.indexOf(t)+1),a}const a5=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function l5(t){const[,e,r,i,n,s,o,a,u,h,f,p]=t,m=A0(e,n,i,r,s,o,a);let y;return u?y=o5[u]:h?y=0:y=af(f,p),[m,new ct(y)]}function c5(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const u5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,h5=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,d5=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function i1(t){const[,e,r,i,n,s,o,a]=t;return[A0(e,n,i,r,s,o,a),ct.utcInstance]}function f5(t){const[,e,r,i,n,s,o,a]=t;return[A0(e,a,r,i,n,s,o),ct.utcInstance]}const p5=Pa(YD,C0),m5=Pa(JD,C0),y5=Pa(KD,C0),g5=Pa(EE),PE=Ca(r5,Ia,Wc,Bc),_5=Ca(XD,Ia,Wc,Bc),w5=Ca(QD,Ia,Wc,Bc),v5=Ca(Ia,Wc,Bc);function b5(t){return Aa(t,[p5,PE],[m5,_5],[y5,w5],[g5,v5])}function S5(t){return Aa(c5(t),[a5,l5])}function T5(t){return Aa(t,[u5,i1],[h5,i1],[d5,f5])}function E5(t){return Aa(t,[n5,s5])}const M5=Ca(Ia);function P5(t){return Aa(t,[i5,M5])}const C5=Pa(e5,t5),A5=Pa(ME),I5=Ca(Ia,Wc,Bc);function O5(t){return Aa(t,[C5,PE],[A5,I5])}const x5="Invalid Duration",CE={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},k5={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...CE},Ut=146097/400,yo=146097/4800,L5={years:{quarters:4,months:12,weeks:Ut/7,days:Ut,hours:Ut*24,minutes:Ut*24*60,seconds:Ut*24*60*60,milliseconds:Ut*24*60*60*1e3},quarters:{months:3,weeks:Ut/28,days:Ut/4,hours:Ut*24/4,minutes:Ut*24*60/4,seconds:Ut*24*60*60/4,milliseconds:Ut*24*60*60*1e3/4},months:{weeks:yo/7,days:yo,hours:yo*24,minutes:yo*24*60,seconds:yo*24*60*60,milliseconds:yo*24*60*60*1e3},...CE},is=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],R5=is.slice(0).reverse();function Xi(t,e,r=!1){const i={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ne(i)}function N5(t){return t<0?Math.floor(t):Math.ceil(t)}function AE(t,e,r,i,n){const s=t[n][r],o=e[r]/s,a=Math.sign(o)===Math.sign(i[n]),u=!a&&i[n]!==0&&Math.abs(o)<=1?N5(o):Math.trunc(o);i[n]+=u,e[r]-=u*s}function D5(t,e){R5.reduce((r,i)=>ie(e[i])?r:(r&&AE(t,e,r,e,i),i),null)}function $5(t){const e={};for(const[r,i]of Object.entries(t))i!==0&&(e[r]=i);return e}class ne{constructor(e){const r=e.conversionAccuracy==="longterm"||!1;let i=r?L5:k5;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Te.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,r){return ne.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new Wt(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new ne({values:cd(e,ne.normalizeUnit),loc:Te.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(gs(e))return ne.fromMillis(e);if(ne.isDuration(e))return e;if(typeof e=="object")return ne.fromObject(e);throw new Wt(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){const[i]=E5(e);return i?ne.fromObject(i,r):ne.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){const[i]=P5(e);return i?ne.fromObject(i,r):ne.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new Wt("need to specify a reason the Duration is invalid");const i=e instanceof mr?e:new mr(e,r);if($e.throwOnInvalid)throw new hD(i);return new ne({invalid:i})}static normalizeUnit(e){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new BT(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?lt.create(this.loc,i).formatDurationFromString(this,e):x5}toHuman(e={}){const r=is.map(i=>{const n=this.values[i];return ie(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=E0(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const r=this.toMillis();if(r<0||r>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let n=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||i.seconds!==0||i.milliseconds!==0)&&(n+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||i.milliseconds!==0)&&(n+=".SSS"));let s=i.toFormat(n);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const r=ne.fromDurationLike(e),i={};for(const n of is)(la(r.values,n)||la(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Xi(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const r=ne.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=fE(e(this.values[i],i));return Xi(this,{values:r},!0)}get(e){return this[ne.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const r={...this.values,...cd(e,ne.normalizeUnit)};return Xi(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:n,conversionAccuracy:i};return Xi(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return D5(this.matrix,e),Xi(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=$5(this.normalize().shiftToAll().toObject());return Xi(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>ne.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of is)if(e.indexOf(o)>=0){s=o;let a=0;for(const h in i)a+=this.matrix[h][o]*i[h],i[h]=0;gs(n[o])&&(a+=n[o]);const u=Math.trunc(a);r[o]=u,i[o]=(a*1e3-u*1e3)/1e3;for(const h in n)is.indexOf(h)>is.indexOf(o)&&AE(this.matrix,n,h,r,o)}else gs(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return Xi(this,{values:r},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return Xi(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of is)if(!r(this.values[i],e.values[i]))return!1;return!0}}const go="Invalid Interval";function F5(t,e){return!t||!t.isValid?Le.invalid("missing or invalid start"):!e||!e.isValid?Le.invalid("missing or invalid end"):e<t?Le.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Le{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new Wt("need to specify a reason the Interval is invalid");const i=e instanceof mr?e:new mr(e,r);if($e.throwOnInvalid)throw new uD(i);return new Le({invalid:i})}static fromDateTimes(e,r){const i=qa(e),n=qa(r),s=F5(i,n);return s??new Le({start:i,end:n})}static after(e,r){const i=ne.fromDurationLike(r),n=qa(e);return Le.fromDateTimes(n,n.plus(i))}static before(e,r){const i=ne.fromDurationLike(r),n=qa(e);return Le.fromDateTimes(n.minus(i),n)}static fromISO(e,r){const[i,n]=(e||"").split("/",2);if(i&&n){let s,o;try{s=Q.fromISO(i,r),o=s.isValid}catch{o=!1}let a,u;try{a=Q.fromISO(n,r),u=a.isValid}catch{u=!1}if(o&&u)return Le.fromDateTimes(s,a);if(o){const h=ne.fromISO(n,r);if(h.isValid)return Le.after(s,h)}else if(u){const h=ne.fromISO(i,r);if(h.isValid)return Le.before(a,h)}}return Le.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const r=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?Le.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];const r=e.map(qa).filter(o=>this.contains(o)).sort(),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(Le.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(e){const r=ne.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(u=>u*n));s=+a>+this.e?this.e:a,o.push(Le.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const r=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return r>=i?null:Le.fromDateTimes(r,i)}union(e){if(!this.isValid)return this;const r=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Le.fromDateTimes(r,i)}static merge(e){const[r,i]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(e){let r=null,i=0;const n=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,h)=>u.time-h.time);for(const u of a)i+=u.type==="s"?1:-1,i===1?r=u.time:(r&&+r!=+u.time&&n.push(Le.fromDateTimes(r,u.time)),r=null);return Le.merge(n)}difference(...e){return Le.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:go}toLocaleString(e=od,r={}){return this.isValid?lt.create(this.s.loc.clone(r),e).formatInterval(this):go}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:go}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:go}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:go}toFormat(e,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:go}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):ne.invalid(this.invalidReason)}mapEndpoints(e){return Le.fromDateTimes(e(this.s),e(this.e))}}class vu{static hasDST(e=$e.defaultZone){const r=Q.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return Ri.isValidZone(e)}static normalizeZone(e){return dn(e,$e.defaultZone)}static months(e="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Te.create(r,i,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Te.create(r,i,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Te.create(r,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Te.create(r,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Te.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Te.create(r,null,"gregory").eras(e)}static features(){return{relative:hE()}}}function n1(t,e){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(e)-r(t);return Math.floor(ne.fromMillis(i).as("days"))}function U5(t,e,r){const i=[["years",(u,h)=>h.year-u.year],["quarters",(u,h)=>h.quarter-u.quarter+(h.year-u.year)*4],["months",(u,h)=>h.month-u.month+(h.year-u.year)*12],["weeks",(u,h)=>{const f=n1(u,h);return(f-f%7)/7}],["days",n1]],n={},s=t;let o,a;for(const[u,h]of i)r.indexOf(u)>=0&&(o=u,n[u]=h(t,e),a=s.plus(n),a>e?(n[u]--,t=s.plus(n)):t=a);return[t,n,a,o]}function V5(t,e,r,i){let[n,s,o,a]=U5(t,e,r);const u=e-n,h=r.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);h.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+u/(o-n)));const f=ne.fromObject(s,i);return h.length>0?ne.fromMillis(u,i).shiftTo(...h).plus(f):f}const I0={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},s1={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},G5=I0.hanidec.replace(/[\[|\]]/g,"").split("");function z5(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(t[r].search(I0.hanidec)!==-1)e+=G5.indexOf(t[r]);else for(const n in s1){const[s,o]=s1[n];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}function sr({numberingSystem:t},e=""){return new RegExp(`${I0[t||"latn"]}${e}`)}const j5="missing Intl.DateTimeFormat.formatToParts support";function ue(t,e=r=>r){return{regex:t,deser:([r])=>e(z5(r))}}const W5=String.fromCharCode(160),IE=`[ ${W5}]`,OE=new RegExp(IE,"g");function B5(t){return t.replace(/\./g,"\\.?").replace(OE,IE)}function o1(t){return t.replace(/\./g,"").replace(OE," ").toLowerCase()}function or(t,e){return t===null?null:{regex:RegExp(t.map(B5).join("|")),deser:([r])=>t.findIndex(i=>o1(r)===o1(i))+e}}function a1(t,e){return{regex:t,deser:([,r,i])=>af(r,i),groups:e}}function bu(t){return{regex:t,deser:([e])=>e}}function H5(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function q5(t,e){const r=sr(e),i=sr(e,"{2}"),n=sr(e,"{3}"),s=sr(e,"{4}"),o=sr(e,"{6}"),a=sr(e,"{1,2}"),u=sr(e,"{1,3}"),h=sr(e,"{1,6}"),f=sr(e,"{1,9}"),p=sr(e,"{2,4}"),m=sr(e,"{4,6}"),y=w=>({regex:RegExp(H5(w.val)),deser:([S])=>S,literal:!0}),v=(w=>{if(t.literal)return y(w);switch(w.val){case"G":return or(e.eras("short",!1),0);case"GG":return or(e.eras("long",!1),0);case"y":return ue(h);case"yy":return ue(p,Ey);case"yyyy":return ue(s);case"yyyyy":return ue(m);case"yyyyyy":return ue(o);case"M":return ue(a);case"MM":return ue(i);case"MMM":return or(e.months("short",!0,!1),1);case"MMMM":return or(e.months("long",!0,!1),1);case"L":return ue(a);case"LL":return ue(i);case"LLL":return or(e.months("short",!1,!1),1);case"LLLL":return or(e.months("long",!1,!1),1);case"d":return ue(a);case"dd":return ue(i);case"o":return ue(u);case"ooo":return ue(n);case"HH":return ue(i);case"H":return ue(a);case"hh":return ue(i);case"h":return ue(a);case"mm":return ue(i);case"m":return ue(a);case"q":return ue(a);case"qq":return ue(i);case"s":return ue(a);case"ss":return ue(i);case"S":return ue(u);case"SSS":return ue(n);case"u":return bu(f);case"uu":return bu(a);case"uuu":return ue(r);case"a":return or(e.meridiems(),0);case"kkkk":return ue(s);case"kk":return ue(p,Ey);case"W":return ue(a);case"WW":return ue(i);case"E":case"c":return ue(r);case"EEE":return or(e.weekdays("short",!1,!1),1);case"EEEE":return or(e.weekdays("long",!1,!1),1);case"ccc":return or(e.weekdays("short",!0,!1),1);case"cccc":return or(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return a1(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return a1(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return bu(/[a-z_+-/]{1,256}?/i);case" ":return bu(/[^\S\n\r]/);default:return y(w)}})(t)||{invalidReason:j5};return v.token=t,v}const Z5={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Y5(t,e){const{type:r,value:i}=t;if(r==="literal"){const o=/^\s+$/.test(i);return{literal:!o,val:o?" ":i}}const n=e[r];let s=Z5[r];if(typeof s=="object"&&(s=s[n]),s)return{literal:!1,val:s}}function J5(t){return[`^${t.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,t]}function K5(t,e,r){const i=t.match(e);if(i){const n={};let s=1;for(const o in r)if(la(r,o)){const a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+u))),s+=u}return[i,n]}else return[i,{}]}function X5(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return ie(t.z)||(r=Ri.create(t.z)),ie(t.Z)||(r||(r=new ct(t.Z)),i=t.Z),ie(t.q)||(t.M=(t.q-1)*3+1),ie(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ie(t.u)||(t.S=T0(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),r,i]}let Zf=null;function Q5(){return Zf||(Zf=Q.fromMillis(1555555555555)),Zf}function e4(t,e){if(t.literal)return t;const r=lt.macroTokenToFormatOpts(t.val),i=LE(r,e);return i==null||i.includes(void 0)?t:i}function xE(t,e){return Array.prototype.concat(...t.map(r=>e4(r,e)))}function kE(t,e,r){const i=xE(lt.parseFormat(r),t),n=i.map(o=>q5(o,t)),s=n.find(o=>o.invalidReason);if(s)return{input:e,tokens:i,invalidReason:s.invalidReason};{const[o,a]=J5(n),u=RegExp(o,"i"),[h,f]=K5(e,u,a),[p,m,y]=f?X5(f):[null,null,void 0];if(la(f,"a")&&la(f,"H"))throw new nl("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:u,rawMatches:h,matches:f,result:p,zone:m,specificOffset:y}}}function t4(t,e,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=kE(t,e,r);return[i,n,s,o]}function LE(t,e){return t?lt.create(e,t).formatDateTimeParts(Q5()).map(n=>Y5(n,t)):null}const RE=[0,31,59,90,120,151,181,212,243,273,304,334],NE=[0,31,60,91,121,152,182,213,244,274,305,335];function Ht(t,e){return new mr("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function DE(t,e,r){const i=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function $E(t,e,r){return r+(jc(t)?NE:RE)[e-1]}function FE(t,e){const r=jc(t)?NE:RE,i=r.findIndex(s=>s<e),n=e-r[i];return{month:i+1,day:n}}function My(t){const{year:e,month:r,day:i}=t,n=$E(e,r,i),s=DE(e,r,i);let o=Math.floor((n-s+10)/7),a;return o<1?(a=e-1,o=ld(a)):o>ld(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...lf(t)}}function l1(t){const{weekYear:e,weekNumber:r,weekday:i}=t,n=DE(e,1,4),s=bl(e);let o=r*7+i-n-3,a;o<1?(a=e-1,o+=bl(a)):o>s?(a=e+1,o-=bl(e)):a=e;const{month:u,day:h}=FE(a,o);return{year:a,month:u,day:h,...lf(t)}}function Yf(t){const{year:e,month:r,day:i}=t,n=$E(e,r,i);return{year:e,ordinal:n,...lf(t)}}function c1(t){const{year:e,ordinal:r}=t,{month:i,day:n}=FE(e,r);return{year:e,month:i,day:n,...lf(t)}}function r4(t){const e=of(t.weekYear),r=gi(t.weekNumber,1,ld(t.weekYear)),i=gi(t.weekday,1,7);return e?r?i?!1:Ht("weekday",t.weekday):Ht("week",t.week):Ht("weekYear",t.weekYear)}function i4(t){const e=of(t.year),r=gi(t.ordinal,1,bl(t.year));return e?r?!1:Ht("ordinal",t.ordinal):Ht("year",t.year)}function UE(t){const e=of(t.year),r=gi(t.month,1,12),i=gi(t.day,1,ad(t.year,t.month));return e?r?i?!1:Ht("day",t.day):Ht("month",t.month):Ht("year",t.year)}function VE(t){const{hour:e,minute:r,second:i,millisecond:n}=t,s=gi(e,0,23)||e===24&&r===0&&i===0&&n===0,o=gi(r,0,59),a=gi(i,0,59),u=gi(n,0,999);return s?o?a?u?!1:Ht("millisecond",n):Ht("second",i):Ht("minute",r):Ht("hour",e)}const Jf="Invalid DateTime",u1=864e13;function Su(t){return new mr("unsupported zone",`the zone "${t.name}" is not supported`)}function Kf(t){return t.weekData===null&&(t.weekData=My(t.c)),t.weekData}function Ba(t,e){const r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Q({...r,...e,old:r})}function GE(t,e,r){let i=t-e*60*1e3;const n=r.offset(i);if(e===n)return[i,e];i-=(n-e)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function h1(t,e){t+=e*60*1e3;const r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Qu(t,e,r){return GE(M0(t),e,r)}function d1(t,e){const r=t.o,i=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:i,month:n,day:Math.min(t.c.day,ad(i,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=ne.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=M0(s);let[u,h]=GE(a,r,t.zone);return o!==0&&(u+=o,h=t.zone.offset(u)),{ts:u,o:h}}function Ha(t,e,r,i,n,s){const{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0||e){const u=e||a,h=Q.fromObject(t,{...r,zone:u,specificOffset:s});return o?h:h.setZone(a)}else return Q.invalid(new mr("unparsable",`the input "${n}" can't be parsed as ${i}`))}function Tu(t,e,r=!0){return t.isValid?lt.create(Te.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Xf(t,e){const r=t.c.year>9999||t.c.year<0;let i="";return r&&t.c.year>=0&&(i+="+"),i+=Fe(t.c.year,r?6:4),e?(i+="-",i+=Fe(t.c.month),i+="-",i+=Fe(t.c.day)):(i+=Fe(t.c.month),i+=Fe(t.c.day)),i}function f1(t,e,r,i,n,s){let o=Fe(t.c.hour);return e?(o+=":",o+=Fe(t.c.minute),(t.c.second!==0||!r)&&(o+=":")):o+=Fe(t.c.minute),(t.c.second!==0||!r)&&(o+=Fe(t.c.second),(t.c.millisecond!==0||!i)&&(o+=".",o+=Fe(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Fe(Math.trunc(-t.o/60)),o+=":",o+=Fe(Math.trunc(-t.o%60))):(o+="+",o+=Fe(Math.trunc(t.o/60)),o+=":",o+=Fe(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const zE={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},n4={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},s4={ordinal:1,hour:0,minute:0,second:0,millisecond:0},jE=["year","month","day","hour","minute","second","millisecond"],o4=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],a4=["year","ordinal","hour","minute","second","millisecond"];function p1(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new BT(t);return e}function m1(t,e){const r=dn(e.zone,$e.defaultZone),i=Te.fromObject(e),n=$e.now();let s,o;if(ie(t.year))s=n;else{for(const h of jE)ie(t[h])&&(t[h]=zE[h]);const a=UE(t)||VE(t);if(a)return Q.invalid(a);const u=r.offset(n);[s,o]=Qu(t,u,r)}return new Q({ts:s,zone:r,loc:i,o})}function y1(t,e,r){const i=ie(r.round)?!0:r.round,n=(o,a)=>(o=E0(o,i||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,r.units[r.units.length-1])}function g1(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}class Q{constructor(e){const r=e.zone||$e.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new mr("invalid input"):null)||(r.isValid?null:Su(r));this.ts=ie(e.ts)?$e.now():e.ts;let n=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[n,s]=[e.old.c,e.old.o];else{const a=r.offset(this.ts);n=h1(this.ts,a),i=Number.isNaN(n.year)?new mr("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=e.loc||Te.create(),this.invalid=i,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Q({})}static local(){const[e,r]=g1(arguments),[i,n,s,o,a,u,h]=r;return m1({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:h},e)}static utc(){const[e,r]=g1(arguments),[i,n,s,o,a,u,h]=r;return e.zone=ct.utcInstance,m1({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:h},e)}static fromJSDate(e,r={}){const i=kD(e)?e.valueOf():NaN;if(Number.isNaN(i))return Q.invalid("invalid input");const n=dn(r.zone,$e.defaultZone);return n.isValid?new Q({ts:i,zone:n,loc:Te.fromObject(r)}):Q.invalid(Su(n))}static fromMillis(e,r={}){if(gs(e))return e<-u1||e>u1?Q.invalid("Timestamp out of range"):new Q({ts:e,zone:dn(r.zone,$e.defaultZone),loc:Te.fromObject(r)});throw new Wt(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(gs(e))return new Q({ts:e*1e3,zone:dn(r.zone,$e.defaultZone),loc:Te.fromObject(r)});throw new Wt("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};const i=dn(r.zone,$e.defaultZone);if(!i.isValid)return Q.invalid(Su(i));const n=$e.now(),s=ie(r.specificOffset)?i.offset(n):r.specificOffset,o=cd(e,p1),a=!ie(o.ordinal),u=!ie(o.year),h=!ie(o.month)||!ie(o.day),f=u||h,p=o.weekYear||o.weekNumber,m=Te.fromObject(r);if((f||a)&&p)throw new nl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&a)throw new nl("Can't mix ordinal dates with month/day");const y=p||o.weekday&&!f;let _,v,w=h1(n,s);y?(_=o4,v=n4,w=My(w)):a?(_=a4,v=s4,w=Yf(w)):(_=jE,v=zE);let S=!1;for(const $ of _){const J=o[$];ie(J)?S?o[$]=v[$]:o[$]=w[$]:S=!0}const P=y?r4(o):a?i4(o):UE(o),M=P||VE(o);if(M)return Q.invalid(M);const A=y?l1(o):a?c1(o):o,[I,O]=Qu(A,s,i),F=new Q({ts:I,zone:i,o:O,loc:m});return o.weekday&&f&&e.weekday!==F.weekday?Q.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${F.toISO()}`):F}static fromISO(e,r={}){const[i,n]=b5(e);return Ha(i,n,r,"ISO 8601",e)}static fromRFC2822(e,r={}){const[i,n]=S5(e);return Ha(i,n,r,"RFC 2822",e)}static fromHTTP(e,r={}){const[i,n]=T5(e);return Ha(i,n,r,"HTTP",r)}static fromFormat(e,r,i={}){if(ie(e)||ie(r))throw new Wt("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Te.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,u,h,f]=t4(o,e,r);return f?Q.invalid(f):Ha(a,u,i,`format ${r}`,e,h)}static fromString(e,r,i={}){return Q.fromFormat(e,r,i)}static fromSQL(e,r={}){const[i,n]=O5(e);return Ha(i,n,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new Wt("need to specify a reason the DateTime is invalid");const i=e instanceof mr?e:new mr(e,r);if($e.throwOnInvalid)throw new cD(i);return new Q({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){const i=LE(e,Te.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(e,r={}){return xE(lt.parseFormat(e),Te.fromObject(r)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Kf(this).weekYear:NaN}get weekNumber(){return this.isValid?Kf(this).weekNumber:NaN}get weekday(){return this.isValid?Kf(this).weekday:NaN}get ordinal(){return this.isValid?Yf(this.c).ordinal:NaN}get monthShort(){return this.isValid?vu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?vu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?vu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?vu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return jc(this.year)}get daysInMonth(){return ad(this.year,this.month)}get daysInYear(){return this.isValid?bl(this.year):NaN}get weeksInWeekYear(){return this.isValid?ld(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:r,numberingSystem:i,calendar:n}=lt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(e=0,r={}){return this.setZone(ct.instance(e),r)}toLocal(){return this.setZone($e.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(e=dn(e,$e.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(r||i){const s=e.offset(this.ts),o=this.toObject();[n]=Qu(o,s,e)}return Ba(this,{ts:n,zone:e})}else return Q.invalid(Su(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:i});return Ba(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const r=cd(e,p1),i=!ie(r.weekYear)||!ie(r.weekNumber)||!ie(r.weekday),n=!ie(r.ordinal),s=!ie(r.year),o=!ie(r.month)||!ie(r.day),a=s||o,u=r.weekYear||r.weekNumber;if((a||n)&&u)throw new nl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new nl("Can't mix ordinal dates with month/day");let h;i?h=l1({...My(this.c),...r}):ie(r.ordinal)?(h={...this.toObject(),...r},ie(r.day)&&(h.day=Math.min(ad(h.year,h.month),h.day))):h=c1({...Yf(this.c),...r});const[f,p]=Qu(h,this.o,this.zone);return Ba(this,{ts:f,o:p})}plus(e){if(!this.isValid)return this;const r=ne.fromDurationLike(e);return Ba(this,d1(this,r))}minus(e){if(!this.isValid)return this;const r=ne.fromDurationLike(e).negate();return Ba(this,d1(this,r))}startOf(e){if(!this.isValid)return this;const r={},i=ne.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks"&&(r.weekday=1),i==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,r={}){return this.isValid?lt.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):Jf}toLocaleString(e=od,r={}){return this.isValid?lt.create(this.loc.clone(r),e).formatDateTime(this):Jf}toLocaleParts(e={}){return this.isValid?lt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=Xf(this,o);return a+="T",a+=f1(this,o,r,i,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?Xf(this,e==="extended"):null}toISOWeekDate(){return Tu(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+f1(this,o==="extended",r,e,i,s):null}toRFC2822(){return Tu(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Tu(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xf(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||e)&&(i&&(n+=" "),r?n+="z":e&&(n+="ZZ")),Tu(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Jf}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",i={}){if(!this.isValid||!e.isValid)return ne.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=LD(r).map(ne.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,h=V5(a,u,s,n);return o?h.negate():h}diffNow(e="milliseconds",r={}){return this.diff(Q.now(),e,r)}until(e){return this.isValid?Le.fromDateTimes(this,e):this}hasSame(e,r){if(!this.isValid)return!1;const i=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(r)<=i&&i<=n.endOf(r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const r=e.base||Q.fromObject({},{zone:this.zone}),i=e.padding?this<r?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),y1(r,this.plus(i),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?y1(e.base||Q.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Q.isDateTime))throw new Wt("min requires all arguments be DateTimes");return t1(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(Q.isDateTime))throw new Wt("max requires all arguments be DateTimes");return t1(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Te.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return kE(o,e,r)}static fromStringExplain(e,r,i={}){return Q.fromFormatExplain(e,r,i)}static get DATE_SHORT(){return od}static get DATE_MED(){return HT}static get DATE_MED_WITH_WEEKDAY(){return dD}static get DATE_FULL(){return qT}static get DATE_HUGE(){return ZT}static get TIME_SIMPLE(){return YT}static get TIME_WITH_SECONDS(){return JT}static get TIME_WITH_SHORT_OFFSET(){return KT}static get TIME_WITH_LONG_OFFSET(){return XT}static get TIME_24_SIMPLE(){return QT}static get TIME_24_WITH_SECONDS(){return eE}static get TIME_24_WITH_SHORT_OFFSET(){return tE}static get TIME_24_WITH_LONG_OFFSET(){return rE}static get DATETIME_SHORT(){return iE}static get DATETIME_SHORT_WITH_SECONDS(){return nE}static get DATETIME_MED(){return sE}static get DATETIME_MED_WITH_SECONDS(){return oE}static get DATETIME_MED_WITH_WEEKDAY(){return fD}static get DATETIME_FULL(){return aE}static get DATETIME_FULL_WITH_SECONDS(){return lE}static get DATETIME_HUGE(){return cE}static get DATETIME_HUGE_WITH_SECONDS(){return uE}}function qa(t){if(Q.isDateTime(t))return t;if(t&&t.valueOf&&gs(t.valueOf()))return Q.fromJSDate(t);if(t&&typeof t=="object")return Q.fromObject(t);throw new Wt(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function l4(t,e="system"){if(!t||!Hw.has(t.timeZone))return e;const r=Hw.get(t.timeZone);return u4(t.timeZone)||t.respectsDaylightSaving?r:c4(r)}function c4(t){const e=Q.local().setZone(t),r=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${ct.instance(-r).formatOffset(0,"narrow")}`}function u4(t){return t.startsWith("UTC")}let $n=class extends Zn(G){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,r){const{timeZone:i,respectsDaylightSaving:n}=r;return{timeZone:i,respectsDaylightSaving:n}}readTimeZone(e,r){return"timeZoneIANA"in r?r.timeZoneIANA:l4(r)}writeTimeZone(e,r){r.timeZoneIANA=e}equals(e){return e==null||this.timeZone==null||e.timeZone==null?!1:this.timeZone===e.timeZone}};c([d()],$n.prototype,"legacy",void 0);c([fe("legacy",["timeZone"])],$n.prototype,"readLegacy",null);c([d({type:String,nonNullable:!0})],$n.prototype,"timeZone",void 0);c([fe("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],$n.prototype,"readTimeZone",null);c([de("timeZone")],$n.prototype,"writeTimeZone",null);$n=c([T("esri.time.TimeReference")],$n);const WE=$n;let Fn=class extends z{constructor(e){super(e),this.view=null,this.baseLayerViews=new ee,this.referenceLayerViews=new ee,this._loadingHandle=Z(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},tt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?this.view.suspended:!0}get updating(){var r,i;if(this.view&&this.view.suspended)return!1;const e=(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap;return!e||!e.loaded?!1:this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating)}};c([d({constructOnly:!0})],Fn.prototype,"view",void 0);c([d({readOnly:!0})],Fn.prototype,"baseLayerViews",void 0);c([d({readOnly:!0})],Fn.prototype,"referenceLayerViews",void 0);c([d({readOnly:!0})],Fn.prototype,"suspended",null);c([d({type:Boolean,readOnly:!0})],Fn.prototype,"updating",null);Fn=c([T("esri.views.BasemapView")],Fn);function h4(t){return"tryRecycleWith"in t}class d4{constructor(e,r,i){this.layer=e,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Ti(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Zt(this._controller.signal,()=>{const n=new D("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!h4(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){e.splice(n,1),this.layer=s;const a=this.layerView,u=a.view;return this.promise=Promise.race([o.then(()=>(De(this._controller.signal),s.emit("layerview-destroy",{view:u,layerView:a}),u.emit("layerview-destroy",{view:u,layerView:a}),s.emit("layerview-create",{view:u,layerView:a}),u.emit("layerview-create",{view:u,layerView:a}),a)),new Promise((h,f)=>Zt(this._controller.signal,()=>f(Ae())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:r,view:i}=this;this._map=i.map;try{await r.load({signal:e}),"prefetchResources"in r&&await((n=r.prefetchResources)==null?void 0:n.call(r,{signal:e}));let a;if(p4(r))a=await r.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new D("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(r);De(e),"default"in p?a=new p.default({layer:r,view:i}):a=new p({layer:r,view:i})}let u;const h=()=>{u=xe(u),a.destroyed||a.destroy(),a.layer=null,a.parent=null,a.view=null,this.done=!0};u=Zt(e,h),De(e);try{await a.when()}catch(p){throw h(),p}if(!((o=(s=this._map)==null?void 0:s.allLayers)==null?void 0:o.includes(r))){h(),this._deferred.reject(new D("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));return}this.layerView=a,r.emit("layerview-create",{view:i,layerView:a}),i.emit("layerview-create",{layer:r,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(a){r.emit("layerview-create-error",{view:i,error:a}),i.emit("layerview-create-error",{layer:r,error:a}),this.done=!0,this._deferred.reject(new D("layerview:create-error","layerview creation failed",{layer:r,error:a}))}}}let er=class extends z{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new oa,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Ti(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Oc(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,h,f;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null){this.notifyChange("updating");return}this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=p=>{if(p!=null){for(const m of p)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():!y&&!this._recyclingInfoMap.has(m)&&n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const p of this._rootCollectionNames)o(this.get(p));for(const[p,m]of this._layerLayerViewInfoMap)if(!i.has(p)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[p,m]of this._recyclingInfoMap)i.has(p)||(this._recyclingInfoMap.delete(m.layer),m.destroy());for(const p of n)this._createLayerView(p);this._refreshCollections();const a=[(u=r==null?void 0:r.ground)==null?void 0:u.layers,(h=r==null?void 0:r.basemap)==null?void 0:h.baseLayers,(f=r==null?void 0:r.basemap)==null?void 0:f.referenceLayers,r==null?void 0:r.layers].filter(p=>!!p);i.forEach(p=>"layers"in p&&a.push(p.layers)),this.addHandles(a.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([cc(()=>{var e,r;return(r=(e=this.view)==null?void 0:e.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Z(()=>{const e=this.view,r=e==null?void 0:e.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,e==null?void 0:e.ready]},()=>this._reschedule(),rs)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),xf(this._recyclingInfoMap),xf(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ae()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Ud(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){this.destroyed||(xf(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new D("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,r,i){if(!e||!r){r&&r.removeAll();return}let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=s,a.parent=i,r.getItemAt(n)!==a&&r.splice(n,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new d4(e,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{(!i||!Gi(i)&&i.name!=="cancelled:layerview-create")&&k.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],er.prototype,"_workPromise",void 0);c([d({readOnly:!0})],er.prototype,"_watchUpdatingTracking",void 0);c([d({readOnly:!0})],er.prototype,"_layersToLayerViews",null);c([d({readOnly:!0})],er.prototype,"_rootCollectionNames",null);c([d()],er.prototype,"layerViewImporter",void 0);c([d()],er.prototype,"supportsGround",void 0);c([d({readOnly:!0})],er.prototype,"updating",null);c([d({readOnly:!0})],er.prototype,"updatingRemaining",null);c([d({constructOnly:!0})],er.prototype,"view",void 0);er=c([T("esri.views.LayerViewManager")],er);const f4=er;function p4(t){return"createLayerView"in t&&t.createLayerView!=null}let Nt=class extends z{constructor(e){super(e),this.factor=1.5,this.offset=mt(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],Nt.prototype,"factor",void 0);c([d({nonNullable:!0})],Nt.prototype,"offset",void 0);c([d()],Nt.prototype,"position",void 0);c([d({type:Number,range:{min:0}})],Nt.prototype,"size",void 0);c([d()],Nt.prototype,"maskUrl",void 0);c([d()],Nt.prototype,"maskEnabled",void 0);c([d()],Nt.prototype,"overlayUrl",void 0);c([d()],Nt.prototype,"overlayEnabled",void 0);c([d({readOnly:!0})],Nt.prototype,"version",null);c([d({type:Boolean})],Nt.prototype,"visible",void 0);Nt=c([T("esri.views.Magnifier")],Nt);const BE=Nt;class m4{constructor(){this._tasks=new Array,this._running=rd(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,r,i){return this._running.value=!0,new Promise((n,s)=>this._tasks.push(new _1(n,s,e,r,i)))}unshift(e,r,i){return this._running.value=!0,new Promise((n,s)=>this._tasks.unshift(new _1(n,s,e,r,i)))}_process(e){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const n=wr(r.signal);if(n&&!r.abortCallback)r.reject(Ae());else{const s=n?(i=r.abortCallback)==null?void 0:i.call(r,Ae()):r.callback(e);zi(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(n){r.reject(n)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=Ae();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(e);r.resolve(i)}else r.reject(e);this._tasks.length=0,this._running.value=!1}}let _1=class{constructor(e,r,i,n=void 0,s=void 0){this.resolve=e,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}},_c=class extends z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],_c.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c([d()],_c.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);_c=c([T("esri.views.support.DebugFlags")],_c);const y4=new _c;var It;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(It||(It={}));var Py;(function(t){t[t.YIELD=1]="YIELD"})(Py||(Py={}));var X;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(X||(X={}));const $r=0,w1=new Map([[X.RESOURCE_CONTROLLER_IMMEDIATE,$r],[X.RESOURCE_CONTROLLER,4],[X.SLIDE,$r],[X.STREAM_DATA_LOADER,$r],[X.ELEVATION_QUERY,$r],[X.TERRAIN_SURFACE,1],[X.SURFACE_GEOMETRY_UPDATES,1],[X.LOD_RENDERER,2],[X.GRAPHICS_CORE,2],[X.I3S_CONTROLLER,2],[X.POINT_CLOUD_LAYER,2],[X.FEATURE_TILE_FETCHER,2],[X.OVERLAY,4],[X.STAGE,4],[X.GRAPHICS_DECONFLICTOR,4],[X.FILTER_VISIBILITY,4],[X.SCALE_VISIBILITY,4],[X.FRUSTUM_VISIBILITY,4],[X.CLOUDS_GENERATOR,4],[X.POINT_OF_INTEREST_FREQUENT,6],[X.POINT_OF_INTEREST_INFREQUENT,30],[X.LABELER,8],[X.FEATURE_QUERY_ENGINE,8],[X.FEATURE_TILE_TREE,16],[X.FEATURE_TILE_TREE_ACTIVE,$r],[X.ELEVATION_ALIGNMENT,12],[X.TEXT_TEXTURE_ATLAS,12],[X.TEXTURE_UNLOAD,12],[X.LINE_OF_SIGHT_TOOL,16],[X.LINE_OF_SIGHT_TOOL_INTERACTIVE,$r],[X.SNAPPING,$r],[X.SHADOW_ACCUMULATOR,30]]);function v1(t){return w1.has(t)?w1.get(t):typeof t=="number"?t:1}const b1=6.5,S1=1,g4=30,T1=1e3/30,E1=100,M1=.9;var Cy;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=rd(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new hl("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=It.INTERACTING,this._tasks=new dl,this._runQueue=new dl,this._load=0,this._idleStateCallbacks=new dl,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Z(()=>y4.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,tt);for(const o of Object.keys(X))this.performanceInfo.tasks.set(X[o],new hl(X[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:b1,INTERACTING_BUDGET:T1,IDLE_BUDGET:E1,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),xe(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=v1(s),u=new r(this,s,o,a);return this._tasks.push(u),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new hl(s)),u}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===It.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const u=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(h){u._idleUpdatesStartFired&&(a.idleEnd(),u._state===It.IDLE&&h()),a.idleBegin=h},set idleEnd(h){a.idleEnd=h}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==It.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=b1,a=s.frameDuration,u=S1;switch(this.state){case It.IDLE:o=0,a=Math.max(E1,s.frameDuration),u=g4;break;case It.INTERACTING:a=Math.max(T1,s.frameDuration);break;case It.ANIMATING:break}return a=a-s.elapsedFrameTime-o,this.state!==It.IDLE&&a<S1&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,u),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case It.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case It.INTERACTING:this._runInteracting();break;default:this._runAnimating();break}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return ss.SCHEDULED;let o=ss.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=ss.READY:o!==ss.READY&&(o=ss.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,u)=>{a>1?o+=` ${a}x ${u}`:o+=` ${u}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*M1+s*(1-M1)}_schedule(){for(this._runQueue.filterInPlace(s=>s.needsUpdate?!0:(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===$r&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{if(!(!a.needsUpdate||a.schedulePriority===0||a.basePriority===$r||a.blockFrame===this._frameNumber))switch(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority){case 1:a.schedulePriority=0,this._runQueue.push(a);break;default:--a.schedulePriority;break}}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===Py.YIELD&&(a.blockFrame=this._frameNumber)}catch(h){k.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,h)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,X.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const u=this._budget.now()-o;if(a.runtime+=u,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+u),this._debug&&u>2*this._budget.budget&&console.log("Task",a.name,"used",u,"of max",this._budget.budget,"ms"),this._budget.remaining<=0){this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s);return}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(X))this._frameTaskTimes.set(X[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}t.Scheduler=e;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a,u){this._scheduler=s,this.name=o,this._basePriority=u,this.blockFrame=0,this.runtime=0,this._queue=new m4,this._handles=new Vi,this.schedulePriority=this._basePriority,this._task=rd(a??this._queue),this._handles.add(Ln(()=>this.task.running,h=>s.taskRunningChanged(h)))}remove(){this.processQueue(HE),this._scheduler.removeTask(this),this.schedule=Ay.schedule,this.reschedule=Ay.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=v1(s);(this._basePriority===$r||this.schedulePriority!==0)&&(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=It.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return this.done?!1:(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=i})(Cy||(Cy={}));var ss;(function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"})(ss||(ss={}));const HE=(()=>{const t=new Cy.Budget;return t.enabled=!1,t})();class _4{remove(){}processQueue(){}schedule(e,r,i){try{if(wr(r)){const n=Ae();return i?Promise.resolve(i(n)):Promise.reject(n)}return bp(e(HE))}catch(n){return Promise.reject(n)}}reschedule(e,r,i){return this.schedule(e,r,i)}}const Ay=new _4;let wc=class extends z{constructor(e,r){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(r==null?void 0:r.registerTask(X.TEXTURE_UNLOAD))??Ay}normalizeCtorArgs(){return{}}destroy(){var e,r,i;super.destroy(),(e=this._frameTask)==null||e.remove(),(r=this._textureRequests)==null||r.forEach(n=>this._releaseTextureRequest(n)),(i=this._textureRequests)==null||i.clear()}get updating(){return this._frameTask.updating}fromData(e,r,i){const n=this.makeUid(e);let s=this._textureRequests.get(n);if(!s){const o=r();s={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(n,s)}return s.referenceCount++,{uid:n,texture:s.texture,release:()=>this._release(n)}}_release(e){const r=this._textureRequests.get(e);r?(r.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),r.referenceCount--,r.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const r=this._textureRequests.get(e);!r||r.referenceCount>0||(this._releaseTextureRequest(r),this._textureRequests.delete(e))}_releaseTextureRequest(e){var r;e.onRemove&&e.onRemove(),e.texture?(r=this._stage)==null||r.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,r=null){return r!=null?`${e}.${r}px`:e}};c([d()],wc.prototype,"_frameTask",void 0);c([d()],wc.prototype,"updating",null);wc=c([T("esri.views.3d.support.TextureCollection")],wc);var P1;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(P1||(P1={}));const qE=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],ZE={};qE.forEach(t=>{ZE[t]=!0});function YE(t){return!!ZE[t]}function w4(t){for(const e of t)if(!YE(e))return!1;return!0}class v4{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((e,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,r,i,n){const s=Array.isArray(e)?e:e.split(",");if(!w4(s))return s.some(YE)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??wn.DEFAULT;const u=this._createUniqueGroupName(),h=new b4(this.view,s,a,o);this._handlers.set(u,{handler:h,priority:n});for(const f of s){const p=this._handlerCounts.get(f)||0;this._handlerCounts.set(f,p+1)}return this.inputManager&&this.inputManager.installHandlers(u,[h],n),{remove:()=>this._removeHandler(u,s)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,r){if(this._handlers.has(e)){this._handlers.delete(e);for(const i of r){const n=this._handlerCounts.get(i);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class b4 extends Ke{constructor(e,r,i,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",i,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(this._wrapBlur(o))});break}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=e.data,{cancelable:h,timestamp:f}=e,p=mt(s,o),m=this._getMapPoint(s,o);return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,screenPoint:p,mapPoint:m,eventId:u,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=e.data,{cancelable:h,timestamp:f}=e;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=e.data,h=a.pointerId,{cancelable:f,timestamp:p}=e;return{type:"immediate-click",pointerId:h,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=e.data,h=a.pointerId,{cancelable:f,timestamp:p}=e;return{type:"immediate-double-click",pointerId:h,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:u,timestamp:h}=e;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,r){return this.view.toMap(mt(e,r),{exclude:[]})}_wrapDrag(e){const r=e.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const u=r.pointer.native,h=r.buttons,{cancelable:f,timestamp:p}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:h,radius:r.radius,angle:kS(r.angle),native:u,timestamp:p,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:r,repeat:i,native:n}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:r,repeat:i,native:n,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-up",key:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,r){const{x:i,y:n,button:s,buttons:o,native:a,eventId:u}=e.data,h=a.pointerId,f=a.pointerType,{cancelable:p,timestamp:m}=e;return{type:r,x:i,y:n,pointerId:h,pointerType:f,button:s,buttons:o,native:a,timestamp:m,eventId:u,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:r,y:i,buttons:n,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,u=e.data.startEvent.native.pointerId,h=e.data.startEvent.native.pointerType,f=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:m,timestamp:y}=e;return{type:"pointer-drag",x:r,y:i,pointerId:u,pointerType:h,button:a,buttons:n,action:f,origin:p,native:s,timestamp:y,eventId:o,cancelable:m,stopPropagation:()=>e.stopPropagation(),async:_=>e.async(_),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:r,data:i,timestamp:n}=e,{x:s,y:o,deltaY:a,native:u}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:u,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:r,state:i,device:n}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:u}=i;return{type:"gamepad",device:n,timestamp:o,action:r,buttons:a,axes:u,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}}var vc;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(vc||(vc={}));var C1;(function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"})(C1||(C1={}));var A1;(function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"})(A1||(A1={}));function S4(t){return[t.on("before-add",e=>{const r=e.item;if(r==null||t.includes(r)){k.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),e.preventDefault();return}r.onAdd()}),t.on("after-remove",e=>{const r=e.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function Iy(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(vc.USER)&&t.getEditableFlag(vc.MANAGER)}function Dr(t){return mt(t.x,t.y)}function JE(t,e){var i;const r=(i=t instanceof HTMLElement?t:t.surface)==null?void 0:i.getBoundingClientRect();return r?mt(e.clientX-r.left,e.clientY-r.top):mt(0,0)}function I1(t,e){return e instanceof Event?JE(t,e):Dr(e)}function O1(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":return!1;default:return!1}return!1}class T4{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}isInteracting(){return this._hoveredManipulators.size>0||this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,r){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":x1(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":{this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),e.action==="end"&&(this._stopDrag=!1));break}case"pointer-down":{if(!k1(e))break;const n=Dr(e),s=this._intersect(n,e.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o!=null&&a!=null&&o.interactive&&!(o.grabbable&&o.grabbableForEvent(e))&&o.grabbing&&!o.dragging&&this._ungrabManipulatorBeforeDragging(o,e,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),i());break}case"pointer-up":{this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,r);break}case"pointer-drag":{if(!k1(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=os(n,({manipulator:f})=>f),o=os(n,({tool:f})=>f);if(s==null||o==null)break;const a=Dr(e);a.x=Wr(a.x,0,r.view.width),a.y=Wr(a.y,0,r.view.height);const u=n.start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":(e.action==="update"||this._grabbedManipulators.size===1)&&(s.dragging=!0,h?s.events.emit("drag",{action:"update",start:u,screenPoint:a}):s.events.emit("drag",{action:"start",start:u,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:u}));break;case"end":s.dragging=!1,h&&s.events.emit("drag",{action:"end",start:u,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,r);break}i();break}case"immediate-click":{const n=Dr(e),s=this._intersect(n,e.pointerType,r.forEachTool);if(E4(e)||r.forEachTool(h=>{if(!(s!=null&&s.tool===h&&!h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,f=!0)}),f&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const u=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:u,stopPropagation:i});break}case"click":{const n=Dr(e),s=this._intersect(n,e.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),i();break}case"double-click":{const n=Dr(e),s=this._intersect(n,e.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const n=Dr(e),s=this._intersect(n,e.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(r.forEachTool)}_ungrabManipulatorBeforeDragging(e,r,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Dr(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(i.setActiveTool)}_handlePointerEnd(e,r){const i=os(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Dr(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(r.setActiveTool))}_cursorFromMap(e){let r=null;return Ud(e,({manipulator:i})=>i==null||!i.interactive?!1:i.grabbing&&i.grabCursor?(r=i.grabCursor,!0):i.cursor?(r=i.cursor,!0):!1),r}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),e(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=NP(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(a,u)=>a===e&&(s==null||s===u);this._grabbedManipulators.forEach(({tool:a,manipulator:u,pointerType:h},f)=>{o(a,u)&&(this._grabbedManipulators.delete(f),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:a,manipulator:u},h)=>{o(a,u)&&(this._draggedManipulators.delete(h),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:u},h)=>{o(a,u)&&(this._hoveredManipulators.delete(h),u.hovering=!1)}),this._afterManipulatorUngrab(i),this._onFocusChange(r)}_intersect(e,r,i){let n=null;return i(s=>{if(s.manipulators==null||!Iy(s))return!1;const o=s.manipulators.intersect(e,r);return o==null?!1:(n={tool:s,manipulator:o},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(mt(r.x,r.y),i,r.pointerType,e)})}handleHoverEvent(e,r){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!x1(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Dr(e),e.pointerId,e.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(e,r,i,n){let s=this._intersect(e,i,n);const o=os(this._hoveredManipulators.get(r),({manipulator:a})=>a);s!=null&&!s.manipulator.interactive&&(s=null),!(s!=null&&o===s.manipulator)&&(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}}function x1(t){return t==="mouse"}function k1(t){return t.pointerType!=="mouse"||t.button===0}function E4(t){return!!t.native.shiftKey}const L1="attached",Qf="tools",M4=100;let Cr=class extends id{constructor(e){super(e),this._manipulatorState=new T4,this.tools=new ee,this.cursor=null,this._interacting=!1,this._interactingTimeoutId=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.handles.add([this.view.on(qE,e=>{this._handleInputEvent(e)},wn.TOOL),...S4(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready){k.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");return}if(e===this.activeTool)return;const r=this.activeTool;this._set("activeTool",e),r!=null&&r.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const n=Iy(i);(this.activeTool==null||!n)&&this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(r=>r.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutId!=null&&(clearTimeout(this._interactingTimeoutId),this._interactingTimeoutId=null)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutId=setTimeout(()=>this._interacting=!1,M4)}attach(){var e;this.view.type==="3d"?(this._set("textures",new wc(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Z(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r))),ga(()=>this._set("textures",Ce(this.textures)))],L1)):this.handles.add(Z(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool!=null&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(L1),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>e(i,r))})}_handleInputEvent(e){let r=!1;const i={...e,stopPropagation:()=>{r=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!r&&this.activeTool!=null&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),(this._manipulatorState.isInteracting()||r||this.activeTool!=null&&this.activeTool.interacting)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(Qf),this._forEachTool(e=>{if(e instanceof z){const r=Z(()=>[e.cursor,e.visible,e.editable],()=>{Iy(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(r,Qf)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Qf)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var r;(r=e.setEditableFlag)==null||r.call(e,vc.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(r=>r.cursor!=null&&r.visible?(e=r.cursor,!0):!1),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(r=>(e==null||r!==e)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}};c([d({constructOnly:!0,nonNullable:!0})],Cr.prototype,"view",void 0);c([d({readOnly:!0,nonNullable:!0})],Cr.prototype,"textures",void 0);c([d({value:null})],Cr.prototype,"activeTool",null);c([d({readOnly:!0,type:ee})],Cr.prototype,"tools",void 0);c([d({readOnly:!0})],Cr.prototype,"cursor",void 0);c([d({readOnly:!0})],Cr.prototype,"updating",null);c([d()],Cr.prototype,"_interacting",void 0);c([d({readOnly:!0})],Cr.prototype,"interacting",null);Cr=c([T("esri.views.ToolViewManager")],Cr);const P4=Cr;let ca=class extends z{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":C4.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return A4[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],ca.prototype,"nativeIndex",void 0);c([d({type:String,readOnly:!0})],ca.prototype,"deviceType",null);c([d({type:Number,readOnly:!0})],ca.prototype,"axisThreshold",null);ca=c([T("esri.views.input.gamepad.GamepadInputDevice")],ca);const C4=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),A4={standard:.15,spacemouse:.025,unknown:0},O0=ca;let bc=class extends z{constructor(...e){super(...e),this.devices=new ee,this.enabledFocusMode="document"}};c([d({type:ee.ofType(O0),readOnly:!0})],bc.prototype,"devices",void 0);c([d({type:["document","view","none"]})],bc.prototype,"enabledFocusMode",void 0);bc=c([T("esri.views.input.gamepad.GamepadSettings")],bc);const I4=bc;let ud=class extends z{constructor(){super(...arguments),this.gamepad=new I4}};c([d({readOnly:!0})],ud.prototype,"gamepad",void 0);ud=c([T("esri.views.input.Input")],ud);const O4=ud;let Un=class extends z{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],Un.prototype,"enabled",void 0);c([d({type:O0})],Un.prototype,"device",void 0);c([d({type:["pan","zoom"],nonNullable:!0})],Un.prototype,"mode",void 0);c([d({type:["forward-down","forward-up"],nonNullable:!0})],Un.prototype,"tiltDirection",void 0);c([d({type:Number,nonNullable:!0})],Un.prototype,"velocityFactor",void 0);Un=c([T("esri.views.navigation.gamepad.GamepadSettings")],Un);const KE=Un;let Ks=class extends z{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new KE,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([d({type:Boolean})],Ks.prototype,"browserTouchPanEnabled",void 0);c([d({type:KE,nonNullable:!0})],Ks.prototype,"gamepad",void 0);c([d({type:Boolean})],Ks.prototype,"momentumEnabled",void 0);c([d({type:Boolean})],Ks.prototype,"mouseWheelZoomEnabled",void 0);Ks=c([T("esri.views.navigation.Navigation")],Ks);const XE=Ks,QE={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},eM=Object.values(QE),tM=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eM.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),x4=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${eM.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),k4=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Yj(t){return!!tM.test(t)}function x0(t){if(t==null)return null;const e=Dt(t),r=e.path.match(tM)||e.path.match(x4);if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:rM(a!==-1?n.slice(a+1):n),serverType:QE[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function L4(t){const r=Dt(t).path.match(k4);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function rM(t){return t=t.replace(/\s*[/_]+\s*/g," "),t[0].toUpperCase()+t.slice(1)}function Jj(t,e){const r=[];if(t){const i=x0(t);i!=null&&i.title&&r.push(i.title)}if(e){const i=rM(e);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Kj(t){if(!t)return!1;t=t.toLowerCase();const e=".arcgis.com/",r="//services",i="//tiles",n="//features",s=t.includes(e),o=t.includes(r)||t.includes(i)||t.includes(n);return s&&o}function Xj(t,e){return t&&Qb(eS(t,e))}function Qj(t){let{url:e}=t;if(!e)return{url:e};e=eS(e,t.logger);const r=Dt(e),i=x0(r.path);let n;if(i!=null)i.sublayer!=null&&t.layer.layerId==null&&(n=i.sublayer),e=i.url.path;else if(t.nonStandardUrlAllowed){const s=L4(r.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:Qb(e),layerId:n}}function eW(t,e,r,i,n){ta(e,i,"url",n),i.url&&t.layerId!=null&&(i.url=zd(i.url,r,t.layerId.toString()))}function tW(t){if(!t)return!1;const e=t.toLowerCase(),r=e.includes("/services/"),i=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return r&&(i||n||s)}var R1;(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(R1||(R1={}));function R4(t){var n;const e=t.url?x0(t.url):void 0;return!(((n=t.spatialReference)==null?void 0:n.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&iM(t)&&t.heightModelInfo?t.heightModelInfo:N4(t)?S0.deriveUnitFromSR($4,t.spatialReference):null}function iM(t){return"heightModelInfo"in t}function nM(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;case"imagery":case"map-image":case"map-notes":case"tile":case"vector-tile":case"scene":case null:return!1;default:return!1}}function N4(t){return nM(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):sM(t)}function D4(t){return t.layers!=null||sM(t)||nM(t)||iM(t)}function sM(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const $4=new S0({heightModel:"gravity-related-height"});var hd;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(hd||(hd={}));let ep=null,Oy;async function F4(t){ep||(ep=R(()=>import("./geometryServiceUtils-53b7204b.js"),[]).then(e=>Oy=e)),await ep,De(t)}async function oM(t,e,r,i){if(!t)return null;const n=t.spatialReference;return Zs()||Nn(n,e)?Ma(t,e):Oy?Oy.projectGeometry(t,e,r,i):(await Promise.race([F4(i),Ys(i)]),oM(t,e,r,i))}let ye=class extends z{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=El(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const e=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:r}=this._allLayers;let i=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,o);a!=null&&(i=a)}if(i!=null&&i.length===1)break}if(r&&(i==null||i.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(i);return{spatialReference:n!=null?n.spatialReference:null,viewingMode:n!=null?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,n,s,o,a,u,h;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:r}=this._collectLayers([{parent:(n=(i=this.map)==null?void 0:i.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(h=(u=this.map)==null?void 0:u.call(this))==null?void 0:h.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const f=e[0].tileInfo;return{tileInfo:f&&f.spatialReference.equals(this.spatialReference)?f:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){var i,n,s;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:r}=this._allLayers;for(const o of e)if(D4(o)){const a=R4(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,r=e.updating,i=[];for(const n of e.layers){const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(u=>u.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const u of s)i.push({extent:u,layer:n})}return{candidates:i,updating:r}}get _extentTask(){const{candidates:e,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=El(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:dg(async s=>{try{const o=await oM(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(wr(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,r){if(e==null)return r;const i=[],n=(s,o)=>s!=null?o!=null?s===o?s:!1:s:o;for(const s of e)for(const o of r){if(!s.spatialReference.equals(o.spatialReference))continue;const a=n(s.viewingMode,o.viewingMode);if(a!==!1){i.push({spatialReference:s.spatialReference,viewingMode:a});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const r=this.defaultSpatialReference;return e==null||e.length<1?r!=null?{spatialReference:r,viewingMode:null}:null:(r!=null&&e.length>1&&e.some(({spatialReference:i})=>i.equals(r))&&(e=e.filter(({spatialReference:i})=>i.equals(r))),e.length>1&&e.some(({viewingMode:i})=>i!==hd.Local)&&(e=e.filter(({viewingMode:i})=>i!==hd.Local)),e[0])}_getSupportedSpatialReferences(e){const r="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(s!=null){const o=s.constraints!=null?s.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:u}of o)(!this.requiresExtentInSpatialReference||this.userSpatialReference==null||a.equals(this.userSpatialReference))&&i.push({spatialReference:a,viewingMode:u})}}return i}_pickExtentCandidate(e){const r=this.spatialReference;return e.find(({extent:i})=>r.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const r=new U4;for(const n of e)if(this._collectCollection(n,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(e,r){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":r.updating=!0,++r.preloading;return;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},r);break}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return!e||!("loadStatus"in e)||e.loadStatus==null?"loaded":e.loadStatus==="not-loaded"?(e.load().catch(r=>console.log(r)),"loading"):e.loadStatus}};c([d()],ye.prototype,"required",void 0);c([d({constructOnly:!0})],ye.prototype,"map",void 0);c([d({constructOnly:!0})],ye.prototype,"getSpatialReferenceSupport",void 0);c([d()],ye.prototype,"defaultSpatialReference",void 0);c([d()],ye.prototype,"userSpatialReference",void 0);c([d()],ye.prototype,"sourcePreloadCount",void 0);c([d()],ye.prototype,"priorityCollection",void 0);c([d()],ye.prototype,"requiresExtentInSpatialReference",void 0);c([d()],ye.prototype,"suspended",void 0);c([d({readOnly:!0})],ye.prototype,"ready",null);c([d({readOnly:!0})],ye.prototype,"heightModelInfoReady",null);c([d({readOnly:!0})],ye.prototype,"spatialReference",null);c([d({readOnly:!0})],ye.prototype,"extent",null);c([d({readOnly:!0})],ye.prototype,"heightModelInfo",null);c([d({readOnly:!0})],ye.prototype,"vcsWkid",null);c([d({readOnly:!0})],ye.prototype,"latestVcsWkid",null);c([d({readOnly:!0})],ye.prototype,"viewingMode",null);c([d({readOnly:!0})],ye.prototype,"tileInfo",null);c([d({readOnly:!0})],ye.prototype,"mapCollections",null);c([d({readOnly:!0})],ye.prototype,"_allLayers",null);c([d({readOnly:!0})],ye.prototype,"_spatialReferenceTask",null);c([d({readOnly:!0})],ye.prototype,"_tileInfoTask",null);c([d({readOnly:!0})],ye.prototype,"_heightModelInfoTask",null);c([d({readOnly:!0})],ye.prototype,"_extentCandidatesTask",null);c([d()],ye.prototype,"_extentTask",null);c([d()],ye.prototype,"_projectExtentTask",void 0);ye=c([T("esri.views.support.DefaultsFromMap")],ye);class U4{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}}var ol;let V=ol=class extends b0(Hn.EventedMixin(cg(z))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Rl({getCollections:()=>{var r,i,n;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:G4}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new gc,this.analyses=new sd,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ee,this.magnifier=new BE,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new WE,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new O4,this.navigation=new XE,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new v4(this),this.persistableViewModels=new ee,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(Z(()=>this.preconditionsReady,r=>{var i,n;r?(this._currentSpatialReference=this.spatialReference,ol.views.add(this)):(this._currentSpatialReference=null,ol.views.remove(this)),this.notifyChange("spatialReference"),!r&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown()):r&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},uc))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,c0(()=>this.ready)))),this.basemapView=new Fn({view:this}),this.layerViewManager=new f4({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new P4({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Z(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Z(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Z(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Z(()=>{var r;return(r=this.defaultsFromMap)==null?void 0:r.ready},r=>{var n;const i=((n=this.map)==null?void 0:n.allLayers.length)>0;if(r&&!this.spatialReference&&i){if(e!=null)return;const s=ga(()=>e=El(e));e=dg(async o=>{try{await pb(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}k.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,r;this.destroyed||(ol.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ce(this.graphics),this.analyses=Ce(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ce(this.analysisViewManager),this.toolViewManager=Ce(this.toolViewManager),this.layerViewManager=Ce(this.layerViewManager),this.basemapView=Ce(this.basemapView),(e=this.groundView)==null||e.destroy(),(r=this.layerViews)==null||r.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Ce(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return k.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ye({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!bn.isLoadable(this.map)||this.map.loaded)&&this.width!==0&&this.height!==0&&this.spatialReference&&this._validateSpatialReference(this.spatialReference)&&(this._currentSpatialReference||(e=this.defaultsFromMap)!=null&&e.ready)&&this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){const r=this._get("map");e!==r&&(e!=null&&e.destroyed&&(k.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:e}),e=null),bn.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var r,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(r=this.defaultsFromMap)==null?void 0:r.required)!=null&&i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const r=!ot(e,this._get("spatialReference"));this._set("_userSpatialReference",e),r&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return e??(this._cursor||"default")}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){var r;return((r=this.layerViewManager)==null?void 0:r.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}importLayerView(e){throw new D("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport({spatialReference:e})!=null}when(e,r){return this.isResolved()&&!this.ready&&k.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,r)}forceReadyCycle(){this.ready&&(Ln(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};V.views=new ee;c([d()],V.prototype,"_userSpatialReference",void 0);c([d()],V.prototype,"activeTool",null);c([d({readOnly:!0})],V.prototype,"allLayerViews",void 0);c([d()],V.prototype,"groundView",void 0);c([d()],V.prototype,"animation",null);c([d()],V.prototype,"basemapView",void 0);c([d()],V.prototype,"center",null);c([d({readOnly:!0})],V.prototype,"_defaultsFromMapSettings",null);c([d()],V.prototype,"defaultsFromMap",null);c([d()],V.prototype,"fatalError",void 0);c([d({type:Me})],V.prototype,"extent",null);c([d(jT(gc,"graphics"))],V.prototype,"graphics",void 0);c([d(jT(sd,"analyses"))],V.prototype,"analyses",void 0);c([d({readOnly:!0,type:S0})],V.prototype,"heightModelInfo",null);c([d({readOnly:!0})],V.prototype,"interacting",null);c([d({readOnly:!0})],V.prototype,"navigating",null);c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],V.prototype,"preconditionsReady",null);c([d({readOnly:!0})],V.prototype,"typeSpecificPreconditionsReady",void 0);c([d({type:ee,readOnly:!0})],V.prototype,"layerViews",void 0);c([d()],V.prototype,"resolution",null);c([d({type:BE})],V.prototype,"magnifier",void 0);c([d({value:null,type:a2})],V.prototype,"map",null);c([d()],V.prototype,"padding",void 0);c([d({readOnly:!0})],V.prototype,"ready",void 0);c([d({type:_e})],V.prototype,"spatialReference",null);c([d()],V.prototype,"spatialReferenceWarningDelay",void 0);c([d()],V.prototype,"stationary",null);c([d({readOnly:!0})],V.prototype,"supportsGround",void 0);c([d({type:aD})],V.prototype,"timeExtent",void 0);c([d({type:WE,nonNullable:!0})],V.prototype,"timeReference",void 0);c([d()],V.prototype,"tools",null);c([d()],V.prototype,"toolViewManager",void 0);c([d({readOnly:!0})],V.prototype,"type",void 0);c([d({type:Number})],V.prototype,"scale",void 0);c([d({readOnly:!0})],V.prototype,"updating",void 0);c([d({readOnly:!0})],V.prototype,"initialExtentRequired",void 0);c([d({readOnly:!0})],V.prototype,"initialExtent",null);c([d()],V.prototype,"cursor",null);c([d({readOnly:!0})],V.prototype,"input",void 0);c([d({type:XE,nonNullable:!0})],V.prototype,"navigation",void 0);c([d()],V.prototype,"layerViewManager",void 0);c([d()],V.prototype,"analysisViewManager",void 0);c([d()],V.prototype,"width",void 0);c([d()],V.prototype,"height",void 0);c([d({readOnly:!0})],V.prototype,"resizing",void 0);c([d({value:null,readOnly:!0})],V.prototype,"size",null);c([d({readOnly:!0})],V.prototype,"suspended",void 0);c([d({readOnly:!0})],V.prototype,"viewEvents",void 0);c([d({readOnly:!0})],V.prototype,"persistableViewModels",void 0);c([d()],V.prototype,"_isValid",void 0);c([d()],V.prototype,"_readyCycleForced",void 0);c([d()],V.prototype,"_currentSpatialReference",void 0);V=ol=c([T("esri.views.View")],V);const V4=V;function G4(t){return t.layerViews}let Vn=class extends wh{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,r)=>this._dfd={resolve:e,reject:r}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new D("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,r){r||(zi(e)?r="waiting-for-target":r="running"),this._set("target",e),this._set("state",r)}};c([d({readOnly:!0})],Vn.prototype,"done",null);c([d({readOnly:!0,type:String})],Vn.prototype,"state",void 0);c([d()],Vn.prototype,"target",void 0);Vn=c([T("esri.views.ViewAnimation")],Vn);(function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(Vn||(Vn={}));const xy=Vn;function Xs(t,e,r,i){const n=3*t,s=3*(r-t)-n,o=1-n-s,a=3*e,u=3*(i-e)-a,h=1-a-u;function f(_){return((o*_+s)*_+n)*_}function p(_){return((h*_+u)*_+a)*_}function m(_){return(3*o*_+2*s)*_+n}function y(_,v){let w,S,P,M,A,I;for(P=_,I=0;I<8;I++){if(M=f(P)-_,Math.abs(M)<v)return P;if(A=m(P),Math.abs(A)<1e-6)break;P=P-M/A}if(w=0,S=1,P=_,P<w)return w;if(P>S)return S;for(;w<S;){if(M=f(P),Math.abs(M-_)<v)return P;_>M?w=P:S=P,P=(S-w)*.5+w}return P}return function(v,w=1e-6){return p(y(v,w))}}const z4=/^cubic-bezier\((.*)\)/,tr={};function j4(t){let e=tr[t]||null;if(!e){const r=z4.exec(t);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length===4&&!i.some(n=>isNaN(n))&&(e=Xs.apply(Xs,i))}}return e}tr.ease=Xs(.25,.1,.25,1);tr.linear=Xs(0,0,1,1);tr.easeIn=tr["ease-in"]=Xs(.42,0,1,1);tr.easeOut=tr["ease-out"]=Xs(0,0,.58,1);tr.easeInOut=tr["ease-in-out"]=Xs(.42,0,.58,1);function sW(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function oW(t,e,r,i,n,s,o){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=s,t[5]=o,t}function aM(t,e){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let u=r*s-i*n;return u?(u=1/u,t[0]=s*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*a-s*o)*u,t[5]=(i*o-r*a)*u,t):null}function aW(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=r[0],f=r[1],p=r[2],m=r[3],y=r[4],_=r[5];return t[0]=i*h+s*f,t[1]=n*h+o*f,t[2]=i*p+s*m,t[3]=n*p+o*m,t[4]=i*y+s*_+a,t[5]=n*y+o*_+u,t}function k0(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=Math.sin(r),f=Math.cos(r);return t[0]=i*f+s*h,t[1]=n*f+o*h,t[2]=i*-h+s*f,t[3]=n*-h+o*f,t[4]=a,t[5]=u,t}function lM(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=r[0],f=r[1];return t[0]=i*h,t[1]=n*h,t[2]=s*f,t[3]=o*f,t[4]=a,t[5]=u,t}function dd(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=r[0],f=r[1];return t[0]=i,t[1]=n,t[2]=s,t[3]=o,t[4]=i*h+s*f+a,t[5]=n*h+o*f+u,t}function W4(t,e){const r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=0,t[5]=0,t}function B4(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function cM(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function _s(){return[1,0,0,1,0,0]}function fd(t,e){return t[0]=e[0],t[1]=e[1],t}function st(t,e,r){return t[0]=e,t[1]=r,t}function H4(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function pd(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function cf(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function L0(t,e){const r=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(r*r+i*i)}function N1(t,e){const r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function D1(t){const e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function q4(t,e){return t[0]=-e[0],t[1]=-e[1],t}function $1(t,e){const r=e[0],i=e[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Z4(t,e){return t[0]*e[0]+t[1]*e[1]}function Y4(t,e,r){const i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t}function lW(t,e,r,i){const n=e[0],s=e[1];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t}function pi(t,e,r){const i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n+r[4],t[1]=r[1]*i+r[3]*n+r[5],t}function cW(t,e,r,i){const n=e[0]-r[0],s=e[1]-r[1],o=Math.sin(i),a=Math.cos(i);return t[0]=n*a-s*o+r[0],t[1]=n*o+s*a+r[1],t}const uM=pd;function ze(){return[0,0]}function J4(t,e){return[t,e]}function uW(t,e){return new Float64Array(t,e,2)}function K4(){return ze()}const hW=K4(),hM=96,dM=39.37,X4=180/Math.PI;function fM(t){return t.wkid?t:t.spatialReference||_e.WGS84}function R0(t,e){return e.type?st(t,e.x,e.y):fd(t,e)}function pM(t){return va(t)}function Tl(t,e){const r=Math.max(1,e[0]),i=Math.max(1,e[1]);return Math.max(t.width/r,t.height/i)*a6(t.spatialReference)}async function al(t,e,r,i){var a,u;let n;if(!t||Array.isArray(t)&&!t.length)return null;if(ee.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const h=t.every(m=>"attributes"in m),f=t.some(m=>!m.geometry);let p=t;if(h&&f&&e&&e.allLayerViews){const m=new Map;for(const w of t){const S=w.layer,P=m.get(S)||[],M=w.attributes[S.objectIdField];M!=null&&P.push(M),m.set(S,P)}const y=[];m.forEach((w,S)=>{const P=e.allLayerViews.find(M=>M.layer.id===S.id);if(P&&"queryFeatures"in P){const M=S.createQuery();M.objectIds=w,M.returnGeometry=!0,y.push(P.queryFeatures(M))}});const _=await Promise.all(y),v=[];for(const w of _)if(w&&w.features&&w.features.length)for(const S of w.features)S.geometry!=null&&v.push(S.geometry);p=v}for(const m of p)i=await al(m,e,r,i);return i}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new q(t);else if(t instanceof qn)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const h=t.layer,f=e.allLayerViews.find(p=>p.layer.id===h.id);if(f&&"queryFeatures"in f){const p=h.createQuery();p.objectIds=[t.attributes[h.objectIdField]],p.returnGeometry=!0;const m=await f.queryFeatures(p);n=(u=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:u.geometry}}}if(n==null)return null;let s;if(n.type==="point"?s=new Me({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):s=n.extent,!s)return null;!Zs()&&!Nn(s.spatialReference,r)&&await Ys();const o=Ma(s,r);return o?(i?i=i.union(o):i=o,i):null}function Q4(t){if(!(!t||Array.isArray(t)&&typeof t[0]=="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,r=0;for(const i of t){const n=i.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,r=n.maxScale>r?n.maxScale:r)}return e&&r?{min:e,max:r}:null}}}function tp(t,e){return ot(fM(t),e)?t:Ma(t,e)}async function e6(t,e){if(!t||!e)return new Vr({targetGeometry:new q,scale:0,rotation:0});let r=e.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=e,a=n?o[0]-n.left-n.right:o[0],u=n?o[1]-n.top-n.bottom:o[1],h=[a,u];let f=null;t instanceof Vr?f=t:t.viewpoint?f=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(f=t.target);let p=null;f&&f.targetGeometry?p=f.targetGeometry:t instanceof Me?p=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(p=await al(t.center,e,r)||await al(t.extent,e,r)||await al(t.target,e,r)||await al(t,e,r)),!p&&s&&s.targetGeometry?p=s.targetGeometry:!p&&e.extent&&(p=e.extent),r||(r=fM(e.spatialReference||e.extent||p)),!Zs()&&!ot(p.spatialReference,r)&&!Nn(p,r)&&await Ys();const m=tp(p.center??p,r);let y=0;if(f&&f.targetGeometry!=null&&f.targetGeometry.type==="point")y=f.scale;else if("scale"in t&&t.scale)y=t.scale;else if("zoom"in t&&t.zoom!==-1&&i&&i.effectiveLODs)y=i.zoomToScale(t.zoom);else if(Array.isArray(p)||p.type==="point"||p.type==="extent"&&p.width===0&&p.height===0){const S=tp(e.extent,r);S!=null?y=Tl(S,h):y=e.extent?Tl(e.extent,h):s.scale}else y=Tl(tp(p.extent,r),h);const _=Q4(t);_&&(_.min&&_.min>y?y=_.min:_.max&&_.max<y&&(y=_.max));let v=0;f?v=f.rotation:t.hasOwnProperty("rotation")?v=t.rotation:s&&(v=s.rotation);let w=new Vr({targetGeometry:m,scale:y,rotation:v});return i&&(w=i.fit(w),i.constrainByGeometry(w),i.rotationEnabled||(w.rotation=v)),w}function xr(t,e){const r=t.targetGeometry,i=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function t6(t,e,r){return r?st(t,(e[0]-r.right+r.left)*.5,(e[1]-r.bottom+r.top)*.5):cf(t,e,.5)}const r6=function(){const t=ze();return function(r,i,n){const s=i.targetGeometry;R0(t,s);const o=Oa(i)*.5;return r.xmin=t[0]-o*n[0],r.ymin=t[1]-o*n[1],r.xmax=t[0]+o*n[0],r.ymax=t[1]+o*n[1],r.spatialReference=s.spatialReference,r}}();function i6(t,e,r,i,n){return ky(t,e,r.center),t.scale=Tl(r,i),n&&n.constraints&&n.constraints.constrain(t),t}function n6(t,e,r,i){return $0(t,e,r,i),aM(t,t)}const mM=function(){const t=ze();return function(r,i,n){return uM(r,l6(r,i),t6(t,i,n))}}(),s6=function(){const t=_s(),e=ze();return function(i,n,s,o){const a=Oa(n),u=N0(n);return st(e,a,a),B4(t,e),k0(t,t,u),dd(t,t,mM(e,s,o)),dd(t,t,[0,o.top-o.bottom]),st(i,t[4],t[5])}}();function Oa(t){return t.scale*o6(t.targetGeometry)}function o6(t){return t!=null&&et(t.spatialReference)?1/(pM(t.spatialReference)*dM*hM):1}function N0(t){return xS(t.rotation)||0}function a6(t){return et(t)?pM(t)*dM*hM:1}function l6(t,e){return cf(t,e,.5)}const D0=function(){const t=ze(),e=ze(),r=ze();return function(i,n,s,o,a,u){return q4(t,n),cf(e,s,.5*u),st(r,1/o*u,-1/o*u),cM(i,e),a&&k0(i,i,a),lM(i,i,r),dd(i,i,t),i}}(),$0=function(){const t=ze();return function(e,r,i,n){const s=Oa(r),o=N0(r);return R0(t,r.targetGeometry),D0(e,t,i,s,o,n)}}(),c6=function(){const t=ze();return function(e,r,i,n){const s=Oa(r);return R0(t,r.targetGeometry),D0(e,t,i,s,0,n)}}();function u6(t){const e=vi(t);return e?e.valid[1]-e.valid[0]:0}function h6(t,e){return Math.round(u6(t)/e)}const d6=function(){const t=ze(),e=ze(),r=[0,0,0];return function(i,n,s){pd(t,i,n),$1(t,t),pd(e,i,s),$1(e,e),Y4(r,t,e);let o=Math.acos(Z4(t,e)/(D1(t)*D1(e)))*X4;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),f6=function(){const t=ze();return function(r,i,n,s){const o=r.targetGeometry;return xr(r,i),s6(t,i,n,s),o.x+=t[0],o.y+=t[1],r}}(),ky=function(){return function(e,r,i){xr(e,r);const n=e.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,e}}(),p6=function(){const t=ze();return function(r,i,n,s,o){o||(o="center"),uM(t,n,s),cf(t,t,.5);const a=t[0],u=t[1];switch(o){case"center":st(t,0,0);break;case"left":st(t,-a,0);break;case"top":st(t,0,u);break;case"right":st(t,a,0);break;case"bottom":st(t,0,-u);break;case"top-left":st(t,-a,u);break;case"bottom-left":st(t,-a,-u);break;case"top-right":st(t,a,u);break;case"bottom-right":st(t,a,-u);break}return uf(r,i,t),r}}();function dW(t,e,r){return xr(t,e),t.rotation+=r,t}function m6(t,e,r){return xr(t,e),t.rotation=r,t}const y6=function(){const t=ze();return function(r,i,n,s,o){return xr(r,i),!isNaN(n)&&n!==0&&(gM(t,s,i,o),r.scale=i.scale*n,_M(t,t,r,o),uf(r,r,st(t,t[0]-s[0],s[1]-t[1]))),r}}();function F1(t,e,r){return xr(t,e),t.scale=r,t}const yM=function(){const t=ze();return function(r,i,n,s,o,a){return xr(r,i),!isNaN(n)&&n!==0&&(gM(t,o,i,a),r.scale=i.scale*n,r.rotation+=s,_M(t,t,r,a),uf(r,r,st(t,t[0]-o[0],o[1]-t[1]))),r}}(),fW=function(){const t=ze(),e=ze();return function(i,n,s,o,a,u,h){return mM(e,u,h),H4(t,a,e),o?yM(i,n,s,o,t,u):y6(i,n,s,t,u)}}(),gM=function(){const t=_s();return function(r,i,n,s){return pi(r,i,n6(t,n,s,1))}}(),_M=function(){const t=_s();return function(r,i,n,s){return pi(r,i,$0(t,n,s,1))}}(),uf=function(){const t=ze(),e=_s();return function(i,n,s){xr(i,n);const o=Oa(n),a=i.targetGeometry;return W4(e,N0(n)),lM(e,e,J4(o,o)),pi(t,s,e),a.x+=t[0],a.y+=t[1],i}}();class g6{constructor(e,r,i,n){const s=e.targetGeometry,o=r.targetGeometry;n?typeof n=="string"&&(n=j4(n)||tr.ease):n=tr.ease,this.easing=n,this.duration=i,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,r){const i=this.easing(r);let n,s,o,a;r>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+i*this.dCenterX,s=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=s,e.scale=a,e.rotation=o}}let Ni=class extends z{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=tr.ease,this.view=null,this.viewpoint=new Vr({targetGeometry:new q,scale:0,rotation:0}),this._updateTask=Wo({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=xe(this._updateTask)}animate(e,r,i){this.stop();const n=this.viewpoint;xr(n,r),this.transition=new g6(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,r){this.stop(),this.updateFunction=r,this.viewpoint=e;const i=new xy({target:e.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var i,n;const r=this.animation;if(!r||r.state===xy.State.STOPPED){this._updateTask.pause();return}if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=performance.now()-this._startTime,a=o/s.duration,u=a>=1;s.applyRatio(this.viewpoint,a),u&&((i=this.animation)==null||i.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}};c([d()],Ni.prototype,"animation",void 0);c([d()],Ni.prototype,"duration",void 0);c([d()],Ni.prototype,"transition",void 0);c([d()],Ni.prototype,"easing",void 0);c([d()],Ni.prototype,"view",void 0);c([d()],Ni.prototype,"viewpoint",void 0);Ni=c([T("esri.views.2d.AnimationManager")],Ni);const _6=Ni;class w6{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var a,u;if(this._updateRequested=!1,(a=this.view)!=null&&a.destroyed)return;const{basemapView:r,graphicsView:i,labelManager:n,layerViews:s,state:{id:o}}=this.view;r==null||r.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),r==null||r.referenceLayerViews.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),!this.animationInProgress&&!this._updateRequested&&((u=this._frameTaskHandle)==null||u.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Z(()=>e.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=Wo(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached){this.requestUpdate();return}const r=this.view.state,i=e.lastUpdateId;(i==null||!this.stationary&&!e.moving)&&(e.moving=!0,e.moveStart()),i!==r.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=r.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}function Oe(){return Promise.all([R(()=>import("./webglDeps-82dad2ea.js"),["assets/webglDeps-82dad2ea.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/ProgramTemplate-a52cdbf8.js","assets/programUtils-ef69e29a.js","assets/NestedMap-d4ac5d57.js"]),R(()=>import("./mapViewDeps-01977291.js"),["assets/mapViewDeps-01977291.js","assets/MagnifierPrograms-c89482f4.js","assets/_commonjsHelpers-725317a4.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/rasterizingUtils-200f1103.js","assets/pbf-03b64555.js","assets/imageutils-074193df.js","assets/Matcher-81f57da4.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/defaultsJSON-b396ba80.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/CircularArray-7e036143.js","assets/DisjointTimerQuery-0b864cc8.js","assets/throttle-9d01e8e8.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/diffUtils-abe9f3bb.js","assets/lengthUtils-73ca5ae7.js","assets/sizeVariableUtils-2914222a.js","assets/BufferPool-dcc25426.js","assets/enums-977a0ba8.js","assets/programUtils-ef69e29a.js","assets/NestedMap-d4ac5d57.js","assets/RenderingContext-1c3d9a56.js","assets/OrderIndependentTransparency-01632ab9.js","assets/basicInterfaces-cc58f4ac.js","assets/doublePrecisionUtils-a59b69fa.js","assets/imageUtils-42075577.js","assets/GraphicsView2D-2fc8f638.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/jsonUtils-b329e9d4.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/util-8d25177b.js","assets/normalizeUtils-e3f4b3bd.js","assets/GraphicContainer-265efb6d.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/TileContainer-b741fbff.js","assets/vec3f32-ec4c3c20.js","assets/requestImageUtils-08c2be51.js"])])}const Za=()=>Oe().then(()=>R(()=>import("./TileLayerView2D-1bec51f5.js"),["assets/TileLayerView2D-1bec51f5.js","assets/MagnifierPrograms-c89482f4.js","assets/_commonjsHelpers-725317a4.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/rasterizingUtils-200f1103.js","assets/pbf-03b64555.js","assets/imageutils-074193df.js","assets/Matcher-81f57da4.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/defaultsJSON-b396ba80.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/CircularArray-7e036143.js","assets/DisjointTimerQuery-0b864cc8.js","assets/throttle-9d01e8e8.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/diffUtils-abe9f3bb.js","assets/lengthUtils-73ca5ae7.js","assets/sizeVariableUtils-2914222a.js","assets/BufferPool-dcc25426.js","assets/enums-977a0ba8.js","assets/OrderIndependentTransparency-01632ab9.js","assets/basicInterfaces-cc58f4ac.js","assets/GraphicsView2D-2fc8f638.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/jsonUtils-b329e9d4.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/util-8d25177b.js","assets/normalizeUtils-e3f4b3bd.js","assets/vec3f32-ec4c3c20.js","assets/imageUtils-f3c329fd.js","assets/BitmapTileContainer-880476aa.js","assets/Bitmap-0ea7e62c.js","assets/TileContainer-b741fbff.js","assets/LayerView-c9de4666.js","assets/HighlightGraphicContainer-a634739f.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/RefreshableLayerView-2dced89c.js","assets/drapedUtils-7db4f2e6.js","assets/scaleUtils-4683565d.js","assets/floorFilterUtils-0e56040f.js","assets/sublayerUtils-f54f8329.js","assets/popupUtils-cf5c990f.js"])),_o=()=>Oe().then(()=>R(()=>import("./FeatureLayerView2D-fcedb1a1.js"),["assets/FeatureLayerView2D-fcedb1a1.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/FeatureEffect-f33db1b4.js","assets/jsonUtils-7f75d4eb.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/FeatureSet-bb4ca057.js","assets/LayerView-c9de4666.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/utils-d96463b8.js","assets/MaterialKey-dd7253d3.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/visualVariablesUtils-7a227620.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/featureFlags-a86437c8.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/floorFilterUtils-0e56040f.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),U1={"base-dynamic":()=>Oe().then(()=>R(()=>import("./BaseDynamicLayerView2D-43d60a03.js"),["assets/BaseDynamicLayerView2D-43d60a03.js","assets/BitmapContainer-553ccbc0.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/ExportStrategy-f5760d9b.js","assets/Bitmap-0ea7e62c.js","assets/RefreshableLayerView-2dced89c.js"])),"base-tile":Za,"bing-maps":Za,csv:_o,"geo-rss":()=>Oe().then(()=>R(()=>import("./GeoRSSLayerView2D-b47d15be.js"),["assets/GeoRSSLayerView2D-b47d15be.js","assets/jsonUtils-bd0bdc00.js","assets/UniqueValueRenderer-612cb004.js","assets/LegendOptions-2499ed1a.js","assets/diffUtils-abe9f3bb.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/ColorStop-3619cfe4.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/DictionaryLoader-d0105348.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/FieldsIndex-58671a99.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/FeatureSet-bb4ca057.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/GraphicContainer-265efb6d.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/VertexArrayObject-0dfc47a6.js","assets/TileContainer-b741fbff.js","assets/WGLContainer-ce35e22a.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/vec3f32-ec4c3c20.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/devEnvironmentUtils-e2e22b53.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js"])),feature:_o,geojson:_o,graphics:()=>Oe().then(()=>R(()=>import("./GraphicsLayerView2D-cfc58a71.js"),["assets/GraphicsLayerView2D-cfc58a71.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/GraphicContainer-265efb6d.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/VertexArrayObject-0dfc47a6.js","assets/TileContainer-b741fbff.js","assets/WGLContainer-ce35e22a.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/lengthUtils-73ca5ae7.js","assets/vec3f32-ec4c3c20.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js"])),group:()=>Oe().then(()=>R(()=>import("./GroupLayerView2D-cfaf69b2.js"),["assets/GroupLayerView2D-cfaf69b2.js","assets/GroupContainer-ceddbe80.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js"])),imagery:()=>Oe().then(()=>R(()=>import("./ImageryLayerView2D-401b80e6.js"),["assets/ImageryLayerView2D-401b80e6.js","assets/RasterVFDisplayObject-dc0bffdd.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/dataUtils-f3c6740f.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/normalizeUtils-e3f4b3bd.js","assets/HighlightGraphicContainer-a634739f.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/TileContainer-b741fbff.js","assets/vec3f32-ec4c3c20.js","assets/BitmapContainer-553ccbc0.js","assets/Bitmap-0ea7e62c.js","assets/ExportStrategy-f5760d9b.js","assets/rasterProjectionHelper-f4e9d70c.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),"imagery-tile":()=>Oe().then(()=>R(()=>import("./ImageryTileLayerView2D-796012be.js"),["assets/ImageryTileLayerView2D-796012be.js","assets/multidimensionalUtils-1a4ecacc.js","assets/RasterVFDisplayObject-dc0bffdd.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/dataUtils-f3c6740f.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/rasterUtils-b4fd9eab.js","assets/TiledDisplayObject-25e69620.js","assets/TileContainer-b741fbff.js","assets/RawBlockCache-52788027.js","assets/rasterProjectionHelper-f4e9d70c.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/lengthUtils-73ca5ae7.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),kml:()=>Oe().then(()=>R(()=>import("./KMLLayerView2D-5889502b.js"),["assets/KMLLayerView2D-5889502b.js","assets/kmlUtils-ef955dc1.js","assets/jsonUtils-bd0bdc00.js","assets/UniqueValueRenderer-612cb004.js","assets/LegendOptions-2499ed1a.js","assets/diffUtils-abe9f3bb.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/ColorStop-3619cfe4.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/DictionaryLoader-d0105348.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/FieldsIndex-58671a99.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/FeatureSet-bb4ca057.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/Bitmap-0ea7e62c.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/BitmapContainer-553ccbc0.js","assets/WGLContainer-ce35e22a.js","assets/VertexArrayObject-0dfc47a6.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/GraphicContainer-265efb6d.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/TileContainer-b741fbff.js","assets/vec3f32-ec4c3c20.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/devEnvironmentUtils-e2e22b53.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/rasterProjectionHelper-f4e9d70c.js","assets/RenderingContext-1c3d9a56.js","assets/programUtils-ef69e29a.js","assets/NestedMap-d4ac5d57.js","assets/OrderIndependentTransparency-01632ab9.js","assets/basicInterfaces-cc58f4ac.js","assets/doublePrecisionUtils-a59b69fa.js","assets/DisjointTimerQuery-0b864cc8.js","assets/rasterUtils-b4fd9eab.js"])),"knowledge-graph":()=>Oe().then(()=>R(()=>import("./KnowledgeGraphLayerView2D-bc84c293.js"),["assets/KnowledgeGraphLayerView2D-bc84c293.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js"])),"link-chart":()=>Oe().then(()=>R(()=>import("./KnowledgeGraphLayerView2D-bc84c293.js"),["assets/KnowledgeGraphLayerView2D-bc84c293.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js"])),"knowledge-graph-sublayer":_o,"map-image":()=>Oe().then(()=>R(()=>import("./MapImageLayerView2D-5eaeea27.js"),["assets/MapImageLayerView2D-5eaeea27.js","assets/BitmapContainer-553ccbc0.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/normalizeUtils-e3f4b3bd.js","assets/HighlightGraphicContainer-a634739f.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/TileContainer-b741fbff.js","assets/vec3f32-ec4c3c20.js","assets/ExportStrategy-f5760d9b.js","assets/Bitmap-0ea7e62c.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/ExportImageParameters-49f238d8.js","assets/floorFilterUtils-0e56040f.js","assets/sublayerUtils-f54f8329.js","assets/RefreshableLayerView-2dced89c.js","assets/drapedUtils-7db4f2e6.js","assets/scaleUtils-4683565d.js","assets/popupUtils-cf5c990f.js"])),"map-notes":()=>Oe().then(()=>R(()=>import("./MapNotesLayerView2D-b961305b.js"),["assets/MapNotesLayerView2D-b961305b.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/GroupContainer-ceddbe80.js","assets/WGLContainer-ce35e22a.js","assets/VertexArrayObject-0dfc47a6.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/GraphicContainer-265efb6d.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/TileContainer-b741fbff.js","assets/lengthUtils-73ca5ae7.js","assets/vec3f32-ec4c3c20.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js"])),media:()=>Oe().then(()=>R(()=>import("./MediaLayerView2D-c7983645.js"),["assets/MediaLayerView2D-c7983645.js","assets/UniqueValueRenderer-612cb004.js","assets/LegendOptions-2499ed1a.js","assets/diffUtils-abe9f3bb.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/ColorStop-3619cfe4.js","assets/jsonUtils-b329e9d4.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/jsonUtils-bd0bdc00.js","assets/DictionaryLoader-d0105348.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/FieldsIndex-58671a99.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/perspectiveUtils-2dfb454e.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/mat3f64-c33d428a.js","assets/MagnifierPrograms-c89482f4.js","assets/_commonjsHelpers-725317a4.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/rasterizingUtils-200f1103.js","assets/pbf-03b64555.js","assets/imageutils-074193df.js","assets/Matcher-81f57da4.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/defaultsJSON-b396ba80.js","assets/devEnvironmentUtils-e2e22b53.js","assets/CircularArray-7e036143.js","assets/DisjointTimerQuery-0b864cc8.js","assets/throttle-9d01e8e8.js","assets/ComputedAttributeStorage-533cb852.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/BufferPool-dcc25426.js","assets/enums-977a0ba8.js","assets/OrderIndependentTransparency-01632ab9.js","assets/basicInterfaces-cc58f4ac.js","assets/GraphicsView2D-2fc8f638.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/util-8d25177b.js","assets/normalizeUtils-e3f4b3bd.js","assets/vec3f32-ec4c3c20.js","assets/LayerView-c9de4666.js"])),"ogc-feature":()=>Oe().then(()=>R(()=>import("./OGCFeatureLayerView2D-fd858b99.js"),["assets/OGCFeatureLayerView2D-fd858b99.js","assets/FeatureLayerView2D-fcedb1a1.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/FeatureEffect-f33db1b4.js","assets/jsonUtils-7f75d4eb.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/FeatureSet-bb4ca057.js","assets/LayerView-c9de4666.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/utils-d96463b8.js","assets/MaterialKey-dd7253d3.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/visualVariablesUtils-7a227620.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/featureFlags-a86437c8.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/floorFilterUtils-0e56040f.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),"open-street-map":Za,"oriented-imagery":_o,route:()=>Oe().then(()=>R(()=>import("./RouteLayerView2D-d09c1b7b.js"),["assets/RouteLayerView2D-d09c1b7b.js","assets/Stop-016306c9.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/GraphicContainer-265efb6d.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/VertexArrayObject-0dfc47a6.js","assets/TileContainer-b741fbff.js","assets/WGLContainer-ce35e22a.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/lengthUtils-73ca5ae7.js","assets/vec3f32-ec4c3c20.js","assets/normalizeUtils-e3f4b3bd.js","assets/normalizeUtilsCommon-82ae8352.js","assets/GraphicsView2D-2fc8f638.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/normalizeUtilsSync-4555589b.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/Matcher-81f57da4.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/util-8d25177b.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js"])),stream:()=>Oe().then(()=>R(()=>import("./StreamLayerView2D-450287aa.js"),["assets/StreamLayerView2D-450287aa.js","assets/FeatureSet-bb4ca057.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/FeatureLayerView2D-fcedb1a1.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/FeatureEffect-f33db1b4.js","assets/jsonUtils-7f75d4eb.js","assets/Query-d0047f01.js","assets/LayerView-c9de4666.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/utils-d96463b8.js","assets/MaterialKey-dd7253d3.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/visualVariablesUtils-7a227620.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/featureFlags-a86437c8.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/floorFilterUtils-0e56040f.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),"subtype-group":()=>Oe().then(()=>R(()=>import("./SubtypeGroupLayerView2D-5c02057a.js"),["assets/SubtypeGroupLayerView2D-5c02057a.js","assets/FeatureEffect-f33db1b4.js","assets/jsonUtils-7f75d4eb.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/Query-d0047f01.js","assets/Field-b1d8a9b1.js","assets/fieldType-ca53e87a.js","assets/FeatureLayerView2D-fcedb1a1.js","assets/Container-de9ca04e.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/FeatureSet-bb4ca057.js","assets/LayerView-c9de4666.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/diffUtils-abe9f3bb.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/defaultsJSON-b396ba80.js","assets/jsonUtils-b329e9d4.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/VertexElementDescriptor-24e04d97.js","assets/utils-d96463b8.js","assets/MaterialKey-dd7253d3.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/visualVariablesUtils-7a227620.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/featureFlags-a86437c8.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/sizeVariableUtils-2914222a.js","assets/lengthUtils-73ca5ae7.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/floorFilterUtils-0e56040f.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),tile:Za,"vector-tile":()=>Oe().then(()=>R(()=>import("./VectorTileLayerView2D-e3a1189f.js"),["assets/VectorTileLayerView2D-e3a1189f.js","assets/diffUtils-abe9f3bb.js","assets/enums-977a0ba8.js","assets/Rect-df8ea165.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/pbf-03b64555.js","assets/rasterizingUtils-200f1103.js","assets/floatRGBA-498c3d22.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/VertexArrayObject-0dfc47a6.js","assets/config-c06e4a6d.js","assets/TiledDisplayObject-25e69620.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/StyleDefinition-edaaf36e.js","assets/enums-eb6e4255.js","assets/color-314cda1c.js","assets/VertexElementDescriptor-24e04d97.js","assets/TileContainer-b741fbff.js","assets/WGLContainer-ce35e22a.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/StyleRepository-39a558db.js","assets/colorUtils-6f72410e.js","assets/GeometryUtils-26dde58c.js","assets/LayerView-c9de4666.js"])),video:()=>Oe().then(()=>R(()=>import("./VideoLayerView2D-6eed17fe.js"),["assets/VideoLayerView2D-6eed17fe.js","assets/LayerView-c9de4666.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js"])),wcs:()=>Oe().then(()=>R(()=>import("./ImageryTileLayerView2D-796012be.js"),["assets/ImageryTileLayerView2D-796012be.js","assets/multidimensionalUtils-1a4ecacc.js","assets/RasterVFDisplayObject-dc0bffdd.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/dataUtils-f3c6740f.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/rasterUtils-b4fd9eab.js","assets/TiledDisplayObject-25e69620.js","assets/TileContainer-b741fbff.js","assets/RawBlockCache-52788027.js","assets/rasterProjectionHelper-f4e9d70c.js","assets/util-8d25177b.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/lengthUtils-73ca5ae7.js","assets/popupUtils-cf5c990f.js","assets/RefreshableLayerView-2dced89c.js"])),"web-tile":Za,wfs:_o,wms:()=>Oe().then(()=>R(()=>import("./WMSLayerView2D-3b4db267.js"),["assets/WMSLayerView2D-3b4db267.js","assets/BitmapContainer-553ccbc0.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/LayerView-c9de4666.js","assets/ExportStrategy-f5760d9b.js","assets/Bitmap-0ea7e62c.js","assets/RefreshableLayerView-2dced89c.js","assets/commonProperties-683e532f.js","assets/ElevationInfo-c5dc6698.js","assets/lengthUtils-73ca5ae7.js","assets/ExportWMSImageParameters-4fc63bd6.js"])),wmts:()=>Oe().then(()=>R(()=>import("./WMTSLayerView2D-a92e209a.js"),["assets/WMTSLayerView2D-a92e209a.js","assets/imageUtils-f3c329fd.js","assets/BitmapTileContainer-880476aa.js","assets/Bitmap-0ea7e62c.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/_commonjsHelpers-725317a4.js","assets/definitions-3f56d206.js","assets/enums-08489827.js","assets/TextureDescriptor-176a7a4b.js","assets/TiledDisplayObject-25e69620.js","assets/WGLContainer-ce35e22a.js","assets/VertexArrayObject-0dfc47a6.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/TileContainer-b741fbff.js","assets/LayerView-c9de4666.js","assets/RefreshableLayerView-2dced89c.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function v6(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new D(`${r}:view-not-supported`,`${e} is not supported in 2D`)}const V1={hasLayerViewModule:t=>U1[t.type]!=null,importLayerView:t=>{const e=U1[t.type];if(e==null)throw v6(t);return e(t)}};function b6(t,e){const{spatialReference:r}=e,i=[e.x,e.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],u=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const h of u)for(let f=0;f<h.length-1;f++){DO(a,i,h,f);const p=L0(i,a);p<n&&(n=p,s=a[0],o=a[1])}return{coordinate:new q({x:s,y:o,spatialReference:r}),distance:n}}var Ly;let Qs=Ly=class extends Dg(z){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ma(this.geometry,this.spatialReference)}catch(e){return k.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,r){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Wd(this.normalizedGeometry,i):gS(this.normalizedGeometry,i))return e;const{coordinate:s}=b6(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,r;return new Ly({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(r=this.spatialReference)==null?void 0:r.clone()})}};c([d({constructOnly:!0})],Qs.prototype,"geometry",void 0);c([d({readOnly:!0})],Qs.prototype,"normalizedGeometry",null);c([d({constructOnly:!0})],Qs.prototype,"spatialReference",void 0);Qs=Ly=c([T("esri.views.2d.constraints.GeometryConstraint")],Qs);var Ry;let Sc=Ry=class extends Dg(z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,r){return!this.enabled||!r||this.rotationEnabled||(e.rotation=r.rotation),e}clone(){return new Ry({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],Sc.prototype,"enabled",void 0);c([d()],Sc.prototype,"rotationEnabled",void 0);Sc=Ry=c([T("esri.views.2d.constraints.RotationConstraint")],Sc);const wM=Sc;var Ny;let Et=Ny=class extends Dg(z){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let{lods:e,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,u=!1,h=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!e||!e.length){this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i);return}e=e.map(p=>p.clone()),e.sort((p,m)=>m.scale-p.scale),e.forEach((p,m)=>p.level=m);let f;for(const p of e)!u&&r>0&&r>=p.scale&&(o=p.level,u=!0),!h&&i>0&&i>=p.scale&&(a=f?f.level:-1,h=!0),f=p;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),r=e[n].scale,i=e[s].scale,e.splice(0,n),e.splice(s-n+1,e.length),e.forEach((p,m)=>{this._lodByScale[p.scale]=p,this._scales[m]=p.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,r){if(r&&e.scale===r.scale)return e;const i=this.effectiveMinScale,n=this.effectiveMaxScale,s=e.targetGeometry,o=r&&r.targetGeometry,a=n!==0&&e.scale<n,u=i!==0&&e.scale>i;if(a||u){const h=u?i:n;if(r&&o){const f=(h-r.scale)/(e.scale-r.scale);s.x=o.x+(s.x-o.x)*f,s.y=o.y+(s.y-o.y)*f}e.scale=h}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const r=this.scaleToZoom(e.scale),i=Math.abs(r-Math.floor(r));return e.scale=this.zoomToScale(i>.99?Math.round(r):Math.floor(r)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e=e-this.effectiveMinZoom,e=Math.max(0,e);const r=this._scales;if(e<=0)return r[0];if(e>=r.length)return r[r.length-1];const i=Math.round(e-.5),n=Math.round(e);return r[n]+(n-e)*(r[i]-r[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const r=this._scales;let i,n;if(e>=r[0])return this.effectiveMinZoom;if(e<=r[r.length-1])return this.effectiveMaxZoom;for(let s=0;s<r.length-1;s++){if(i=r[s],n=r[s+1],n===e)return s+this.effectiveMinZoom+1;if(i>e&&n<e)return s+this.effectiveMinZoom+1-(e-n)/(i-n)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const r=this.scaleToZoom(e);return this.zoomToScale(Math.round(r))}snapToNextScale(e,r=.5){if(!this.effectiveLODs)return e*r;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,r=2){if(!this.effectiveLODs)return e*r;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new Ny({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]?this._lodByScale[e].scale:(e=this._scales.reduce((r,i)=>Math.abs(i-e)<=Math.abs(r-e)?i:r,this._scales[0]),this._lodByScale[e].scale)}};c([d({readOnly:!0})],Et.prototype,"effectiveLODs",void 0);c([d({readOnly:!0})],Et.prototype,"effectiveMinZoom",void 0);c([d({readOnly:!0})],Et.prototype,"effectiveMaxZoom",void 0);c([d({readOnly:!0})],Et.prototype,"effectiveMinScale",void 0);c([d({readOnly:!0})],Et.prototype,"effectiveMaxScale",void 0);c([d()],Et.prototype,"lods",void 0);c([d()],Et.prototype,"minZoom",void 0);c([d()],Et.prototype,"maxZoom",void 0);c([d()],Et.prototype,"minScale",void 0);c([d()],Et.prototype,"maxScale",void 0);c([d()],Et.prototype,"snapToZoom",void 0);Et=Ny=c([T("esri.views.2d.constraints.ZoomConstraint")],Et);const vM=Et,S6={base:null,key:"type",typeMap:{extent:Me,polygon:Rc}};let Re=class extends z{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){if(!e){this._set("geometry",null);return}this._set("geometry",e)}get version(){var e,r,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _defaultLODs(){var i,n,s;const e=(n=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:n.tileInfo,r=(s=this.view)==null?void 0:s.spatialReference;return e&&r&&e.spatialReference.equals(r)?e.lods:null}get _geometry(){var e;return new Qs({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new wM({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),r=this.lods||this._defaultLODs,i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===r&&e.minZoom===i&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new vM({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const r=this.effectiveMaxScale;return r===0||e>=r}canZoomOutTo(e){const r=this.effectiveMinScale;return r===0||e<=r}constrain(e,r){return this._zoom.constrain(e,r),this._rotation.constrain(e,r),this._geometry.constrain(e,r),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],Re.prototype,"effectiveLODs",null);c([d({readOnly:!0})],Re.prototype,"effectiveMinScale",null);c([d({readOnly:!0})],Re.prototype,"effectiveMaxScale",null);c([d({readOnly:!0})],Re.prototype,"effectiveMinZoom",null);c([d({readOnly:!0})],Re.prototype,"effectiveMaxZoom",null);c([d({types:S6,value:null})],Re.prototype,"geometry",null);c([d({type:[an]})],Re.prototype,"lods",void 0);c([d()],Re.prototype,"minScale",void 0);c([d()],Re.prototype,"maxScale",void 0);c([d()],Re.prototype,"minZoom",void 0);c([d()],Re.prototype,"maxZoom",void 0);c([d()],Re.prototype,"rotationEnabled",void 0);c([d()],Re.prototype,"snapToZoom",void 0);c([d()],Re.prototype,"view",void 0);c([d({readOnly:!0})],Re.prototype,"version",null);c([d()],Re.prototype,"_defaultLODs",null);c([d({type:Qs})],Re.prototype,"_geometry",null);c([d({type:wM})],Re.prototype,"_rotation",null);c([d({readOnly:!0,type:vM})],Re.prototype,"_zoom",null);Re=c([T("esri.views.2d.MapViewConstraints")],Re);const bM=Re;function T6(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function E6(t,e,r,i){const n=e[i],s=e[i+1];t[i]=r[0]*n+r[2]*s+r[4],t[i+1]=r[1]*n+r[3]*s+r[5]}function wW(t,e,r,i=0,n=0,s=2){const o=n||e.length/s;for(let a=i;a<o;a++){const u=a*s;E6(t,e,r,u)}}function vW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function M6(t,e,r,i,n,s,o,a,u,h){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=h,t}function P6(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bW(t,e){if(t===e){const r=e[1],i=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function SW(t,e){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8],p=f*o-a*h,m=-f*s+a*u,y=h*s-o*u;let _=r*p+i*m+n*y;return _?(_=1/_,t[0]=p*_,t[1]=(-f*i+n*h)*_,t[2]=(a*i-n*o)*_,t[3]=m*_,t[4]=(f*r-n*u)*_,t[5]=(-a*r+n*s)*_,t[6]=y*_,t[7]=(-h*r+i*u)*_,t[8]=(o*r-i*s)*_,t):null}function TW(t,e){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8];return t[0]=o*f-a*h,t[1]=n*h-i*f,t[2]=i*a-n*o,t[3]=a*u-s*f,t[4]=r*f-n*u,t[5]=n*s-r*a,t[6]=s*h-o*u,t[7]=i*u-r*h,t[8]=r*o-i*s,t}function C6(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],f=e[7],p=e[8],m=r[0],y=r[1],_=r[2],v=r[3],w=r[4],S=r[5],P=r[6],M=r[7],A=r[8];return t[0]=m*i+y*o+_*h,t[1]=m*n+y*a+_*f,t[2]=m*s+y*u+_*p,t[3]=v*i+w*o+S*h,t[4]=v*n+w*a+S*f,t[5]=v*s+w*u+S*p,t[6]=P*i+M*o+A*h,t[7]=P*n+M*a+A*f,t[8]=P*s+M*u+A*p,t}function G1(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],f=e[7],p=e[8],m=r[0],y=r[1];return t[0]=i,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=m*i+y*o+h,t[7]=m*n+y*a+f,t[8]=m*s+y*u+p,t}function A6(t,e,r){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],f=e[7],p=e[8],m=Math.sin(r),y=Math.cos(r);return t[0]=y*i+m*o,t[1]=y*n+m*a,t[2]=y*s+m*u,t[3]=y*o-m*i,t[4]=y*a-m*n,t[5]=y*u-m*s,t[6]=h,t[7]=f,t[8]=p,t}function EW(t,e,r){const i=r[0],n=r[1],s=r[2];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function MW(t,e,r){const i=r[0],n=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function PW(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function CW(t,e){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8],p=e[9],m=e[10],y=e[11],_=e[12],v=e[13],w=e[14],S=e[15],P=r*a-i*o,M=r*u-n*o,A=r*h-s*o,I=i*u-n*a,O=i*h-s*a,F=n*h-s*u,$=f*v-p*_,J=f*w-m*_,U=f*S-y*_,K=p*w-m*v,B=p*S-y*v,re=m*S-y*w;let j=P*re-M*B+A*K+I*U-O*J+F*$;return j?(j=1/j,t[0]=(a*re-u*B+h*K)*j,t[1]=(u*U-o*re-h*J)*j,t[2]=(o*B-a*U+h*$)*j,t[3]=(n*B-i*re-s*K)*j,t[4]=(r*re-n*U+s*J)*j,t[5]=(i*U-r*B-s*$)*j,t[6]=(v*F-w*O+S*I)*j,t[7]=(w*A-_*F-S*M)*j,t[8]=(_*O-v*A+S*P)*j,t):null}function AW(t){const e=Lc(),r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],f=t[8];return Math.abs(1-(r*r+s*s+u*u))<=e&&Math.abs(1-(i*i+o*o+h*h))<=e&&Math.abs(1-(n*n+a*a+f*f))<=e}function rp(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function IW(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function OW(t,e,r,i,n,s,o,a,u){const h=new Float32Array(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=i,h[4]=n,h[5]=s,h[6]=o,h[7]=a,h[8]=u,h}function I6(){return new Float32Array(2)}function Tc(t,e){const r=new Float32Array(2);return r[0]=t,r[1]=e,r}function O6(){return I6()}function x6(){return Tc(1,1)}function k6(){return Tc(1,0)}function L6(){return Tc(0,1)}const xW=O6(),kW=x6();k6();L6();function R6(t){return t instanceof Float32Array&&t.length>=2}function N6(t){return Array.isArray(t)&&t.length>=2}function ip(t){return R6(t)||N6(t)}var Dy;const ui=[0,0];let Gn=Dy=class extends G{constructor(e){super(e),this._viewpoint2D={center:ze(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Me,this.id=0,this.inverseTransform=_s(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=_s(),this.transformNoRotation=_s(),this.displayMat3=rp(),this.displayViewMat3=rp(),this.viewMat3=rp(),this.viewMat2d=T6(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const r=this._viewpoint2D,i=e.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=e.rotation,r.scale=e.scale,r.spatialReference=i.spatialReference}this._update()}copy(e){const r=this.size,i=this.viewpoint;return!i||!r?(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])):(this.viewpoint=xr(i,e.viewpoint),this._set("size",fd(r,e.size))),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Dy({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,r,i){return ip(r)?pi(e,r,this.inverseTransform):(ui[0]=r,ui[1]=i,pi(e,ui,this.inverseTransform))}toScreen(e,r,i){return ip(r)?pi(e,r,this.transform):(ui[0]=r,ui[1]=i,pi(e,ui,this.transform))}toScreenNoRotation(e,r,i){return ip(r)?pi(e,r,this.transformNoRotation):(ui[0]=r,ui[1]=i,pi(e,ui,this.transformNoRotation))}getScreenTransform(e,r){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size");return D0(e,i,s,r,0,n),e}_update(){const{center:e,spatialReference:r,scale:i,rotation:n}=this._viewpoint2D,s=this._get("pixelRatio")||1,o=this._get("size"),a=new Vr({targetGeometry:new q(e[0],e[1],r),scale:i,rotation:n});if(this._set("viewpoint",a),!o||!r||!i)return;this.resolution=Oa(a),this.rotation=n,this.scale=i,this.spatialReference=r,fd(this.center,e);const u=o[0]!==0?2/o[0]:0,h=o[1]!==0?-2/o[1]:0;M6(this.displayMat3,u,0,0,0,h,0,-1,1,1);const f=P6(this.viewMat3),p=Tc(o[0]/2,o[1]/2),m=Tc(-o[0]/2,-o[1]/2),y=xS(n);G1(f,f,p),A6(f,f,y),G1(f,f,m),C6(this.displayViewMat3,this.displayMat3,f);const _=cM(this.viewMat2d,p);return k0(_,_,y),dd(_,_,m),r6(this.extent,a,o),$0(this.transform,a,o,s),aM(this.inverseTransform,this.transform),c6(this.transformNoRotation,a,o,s),this.worldScreenWidth=h6(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],Gn.prototype,"id",void 0);c([d({value:1,json:{write:!0}})],Gn.prototype,"pixelRatio",null);c([d({json:{write:!0}})],Gn.prototype,"size",null);c([d()],Gn.prototype,"spatialReference",void 0);c([d({type:Vr,json:{write:!0}})],Gn.prototype,"viewpoint",null);Gn=Dy=c([T("esri.views.2d.ViewState")],Gn);const z1=Gn;var $y,Fy;let Di=$y=class extends z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new $y({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Di.prototype,"left",void 0);c([d()],Di.prototype,"top",void 0);c([d()],Di.prototype,"right",void 0);c([d()],Di.prototype,"bottom",void 0);Di=$y=c([T("esri.views.2d.PaddedViewState.Padding")],Di);let ua=Fy=class extends z1{constructor(...e){super(...e),this.paddedViewState=new z1,this._updateContent=(()=>{const r=ze();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const s=this.paddedViewState;st(r,n.left+n.right,n.top+n.bottom),pd(r,i,r),fd(s.size,r);const o=s.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(Z(()=>[this.size,this.padding],()=>this._updateContent(),uc)),this.padding=new Di,this.size=[0,0]}set padding(e){this._set("padding",e||new Di)}set viewpoint(e){if(e){const r=e.clone();this.paddedViewState.viewpoint=e,f6(r,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,n=r.targetGeometry;i.center[0]=n.x,i.center[1]=n.y,i.rotation=r.rotation,i.scale=r.scale,i.spatialReference=n.spatialReference,this._update()}}clone(){return new Fy({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],ua.prototype,"paddedViewState",void 0);c([d({type:Di})],ua.prototype,"padding",null);c([d()],ua.prototype,"viewpoint",null);ua=Fy=c([T("esri.views.2d.PaddedViewState")],ua);const D6=ua;class $6{constructor(e,r){this.item=e,this.controller=r,this.promise=null}}class SM{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Zh(e.peeker),this.process=e.process;const r=e.scheduler;e.priority&&r&&(this._task=r.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=xe(this._schedule),this._task=xe(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const r=this._controllers.get(e);r&&r.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(r=>e.push(r)),this._controllers.clear(),e.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((r,i)=>e(i))}get(e){const r=this._deferreds.get(e);return r?r.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,r){const i=this.get(e);if(i)return i;const n=new AbortController;let s=null;r&&(s=Zt(r,()=>n.abort()));const o=()=>{const f=this._processingItems.get(e);f&&f.controller.abort(),a(),h.reject(Ae())},a=()=>{u.remove(),s!=null&&s.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},u=tg(n.signal,o),h=Ti();return this._deferreds.set(e,h),this._controllers.set(e,n),h.promise.then(a,a),this._queue.push(e),this._scheduleNext(),h.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(r=>e.push(r)),this._processingItems.clear();for(const r of e)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Oc(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(r))}_processError(e,r){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(r))}_canProcessFulfillment(e){return!(!this._deferreds.get(e.item)||this._processingItems.get(e.item)!==e)}_process(e){if(e==null)return;let r;const i=new AbortController,n=new $6(e,i);this._processingItems.set(e,n);try{r=this.process(e,i.signal)}catch(s){this._processError(n,s)}zi(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){return{update:e=>this.runTask(e)}}}function F6(t,e){return t.length=0,e.forEach(r=>t.push(r)),t}const np=new Set,Eu=[],wo=new Map,j1=[0,0];let zn=class extends z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:r}=this;this._queue=new SM({concurrency:e,process:(i,n)=>{const s=this._keyToItem.get(i);return r(s,{signal:n})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue=Ce(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const r=typeof e=="string"?e:e.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const r=typeof e=="string"?e:e.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(e,r){const i=e.key.id+"-"+r;if(this.has(i))return this.get(i);const n=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),n.then(s,s),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach(f=>{const p=this._keyToItem.get(f),m=this.tileInfoView.getTileScale(p.key);wo.has(m)||(wo.set(m,[]),i=Math.max(m,i),n=Math.min(m,n)),wo.get(m).push(p.key),np.add(m)});let s=this.state.scale;wo.has(s)||(F6(Eu,np),Eu.sort((f,p)=>f-p),s=Eu.reduce((f,p)=>Math.abs(p-s)<Math.abs(f-s)?p:f,Eu[0])),s=Math.min(s,i),s=Math.max(s,n);const o=wo.get(s),a=r.getClosestInfoForScale(s),u=a.getColumnForX(this.state.center[0]),h=a.getRowForY(this.state.center[1]);return o.sort((f,p)=>{const m=a.denormalizeCol(f.col,f.world),y=a.denormalizeCol(p.col,p.world);return Math.sqrt((u-m)*(u-m)+(h-f.row)*(h-f.row))-Math.sqrt((u-y)*(u-y)+(h-p.row)*(h-p.row))}),np.clear(),wo.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView,i=this.state.center;let n=Number.POSITIVE_INFINITY,s;return e.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(j1,a.key);const u=L0(j1,i);u<n&&(n=u,s=a.key)}),s.id}};c([d({constructOnly:!0})],zn.prototype,"concurrency",void 0);c([d({constructOnly:!0})],zn.prototype,"process",void 0);c([d()],zn.prototype,"state",void 0);c([d({constructOnly:!0})],zn.prototype,"strategy",void 0);c([d({constructOnly:!0})],zn.prototype,"tileInfoView",void 0);c([d({readOnly:!0})],zn.prototype,"updating",null);zn=c([T("esri.views.2d.tiling.PagedTileQueue")],zn);class vt{static getId(e,r,i,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${r}/${i}/${n}`}constructor(e,r,i,n){this.set(e,r,i,n)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=this.row&4095,r=this.col&4095,i=this.level&63;return(this.world&3)<<30|r<<22|e<<8|i}acquire(e,r,i,n){this.set(e,r,i,n)}contains(e){const r=e.level-this.level;return r>=0&&this.row===e.row>>r&&this.col===e.col>>r&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new vt(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,r,i,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,u]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+e,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new vt(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new vt(e,r,i,n),new vt(e,r,i+1,n),new vt(e,r+1,i,n),new vt(e,r+1,i+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}vt.pool=new Gr(vt,null,null,25,50);function Qi(t,e){return[t,e]}function Xn(t,e,r){return t[0]=e,t[1]=r,t}function U6(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t}const ar=new vt("0/0/0/0");class F0{static create(e,r,i=null){const n=vi(e.spatialReference),s=r.origin||Qi(e.origin.x,e.origin.y),o=Qi(e.size[0]*r.resolution,e.size[1]*r.resolution),a=Qi(-1/0,-1/0),u=Qi(1/0,1/0),h=Qi(1/0,1/0);i!=null&&(Xn(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),Xn(u,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),Xn(h,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:f,rows:p}=r;!i&&f&&p&&(Xn(a,f[0],p[0]),Xn(u,f[1],p[1]),Xn(h,f[1]-f[0]+1,p[1]-p[0]+1));let m,y,_,v;return e.isWrappable?(m=Qi(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/e.size[0]),h[1]),y=Qi(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),_=Qi(m[0]+y[0]-1,u[1]),v=!0):(y=a,_=u,m=h,v=!1),new F0(r.level,r.resolution,r.scale,s,a,u,h,o,y,_,m,v)}constructor(e,r,i,n,s,o,a,u,h,f,p,m){this.level=e,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=u,this.worldStart=h,this.worldEnd=f,this.worldSize=p,this.wrap=m}normalizeCol(e){if(!this.wrap)return e;const r=this.worldSize[0];return e<0?r-1-Math.abs((e+1)%r):e%r}denormalizeCol(e,r){return this.wrap?this.worldSize[0]*r+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,r,i=!1){ar.set(r);const n=i?ar.col:this.denormalizeCol(ar.col,ar.world),s=ar.row;return U6(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,r,i=!1){ar.set(r);const n=i?ar.col:this.denormalizeCol(ar.col,ar.world);return Array.isArray(e)?Xn(e,this.getXForColumn(n),this.getYForRow(ar.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(ar.row)),e}}class ha{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:u}of i)for(let h=a;h<=u;h++)e.call(r,s,o,n.normalizeCol(h),n.getWorldForColumn(h))}}ha.pool=new Gr(ha);class sp{constructor(e,r,i){this.row=e,this.colFrom=r,this.colTo=i}}const be=new vt("0/0/0/0");class U0{static create(e,r){e[1]>r[1]&&([e,r]=[r,e]);const[i,n]=e,[s,o]=r,a=s-i,u=o-n,h=u!==0?a/u:0,f=(Math.ceil(n)-n)*h,p=(Math.floor(n)-n)*h;return new U0(i,Math.floor(n),Math.ceil(o),h,a<0?f:p,a<0?p:f,a<0?s:i,a<0?i:s)}constructor(e,r,i,n,s,o,a,u){this.x=e,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Ct=[[0,0],[0,0],[0,0],[0,0]],V6=1e-6;class G6{constructor(e,r=null){this.tileInfo=e,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const i=e.lods.slice();i.sort((s,o)=>o.scale-s.scale);const n=this._lodInfos=i.map(s=>F0.create(e,s,r));i.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,r,i=!1){be.set(r);const n=this._infoByLevel[be.level];return n?n.getTileBounds(e,be,i):e}getTileCoords(e,r,i=!1){be.set(r);const n=this._infoByLevel[be.level];return n?n.getTileCoords(e,be,i):e}getTileCoverage(e,r=192,i="closest"){const n=i==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=ha.pool.acquire(n),o=this._wrap;let a,u=1/0,h=-1/0,f,p;const m=s.spans;Ct[0][0]=Ct[0][1]=Ct[1][1]=Ct[3][0]=-r,Ct[1][0]=Ct[2][0]=e.size[0]+r,Ct[2][1]=Ct[3][1]=e.size[1]+r;for(const w of Ct)e.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const y=[];let _=3;for(let w=0;w<4;w++){if(Ct[w][1]===Ct[_][1]){_=w;continue}const S=U0.create(Ct[w],Ct[_]);u=Math.min(S.ymin,u),h=Math.max(S.ymax,h),y[S.ymin]===void 0&&(y[S.ymin]=[]),y[S.ymin].push(S),_=w}if(u==null||h==null||h-u>100)return null;let v=[];for(a=u;a<h;){y[a]!=null&&(v=v.concat(y[a])),f=1/0,p=-1/0;for(let w=v.length-1;w>=0;w--){const S=v[w];f=Math.min(f,S.getLeftCol()),p=Math.max(p,S.getRightCol())}if(f=Math.floor(f),p=Math.floor(p),a>=n.first[1]&&a<=n.last[1])if(!o)f>n.last[0]||p<n.first[0]||(f=Math.max(f,n.first[0]),p=Math.min(p,n.last[0]),m.push(new sp(a,f,p)));else if(n.size[0]<n.worldSize[0]){const w=Math.floor(p/n.worldSize[0]);for(let S=Math.floor(f/n.worldSize[0]);S<=w;S++)m.push(new sp(a,Math.max(n.getFirstColumnForWorld(S),f),Math.min(n.getLastColumnForWorld(S),p)))}else m.push(new sp(a,f,p));a=a+1;for(let w=v.length-1;w>=0;w--){const S=v[w];S.ymax>=a?S.incrRow():v.splice(w,1)}}return s}getTileParentId(e){be.set(e);const r=this._infoByLevel[be.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(be,this._lodInfos[i],be),be.id)}getTileResolution(e){const r=this._infoByLevel[typeof e=="object"?e.level:e];return r?r.resolution:-1}getTileScale(e){const r=this._infoByLevel[e.level];return r?r.scale:-1}intersects(e,r){be.set(r);const i=this._infoByLevel[be.level],n=e.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(be,n,be);const a=n.denormalizeCol(be.col,be.world);for(const u of e.spans)if(u.row===be.row&&u.colFrom<=a&&u.colTo>=a)return!0}if(n.resolution<i.resolution){const[a,u,h,f]=e.spans.reduce((w,S)=>(w[0]=Math.min(w[0],S.row),w[1]=Math.max(w[1],S.row),w[2]=Math.min(w[2],S.colFrom),w[3]=Math.max(w[3],S.colTo),w),[1/0,-1/0,1/0,-1/0]),p=i.denormalizeCol(be.col,be.world),m=n.getColumnForX(i.getXForColumn(p)),y=n.getRowForY(i.getYForRow(be.row)),_=n.getColumnForX(i.getXForColumn(p+1))-1,v=n.getRowForY(i.getYForRow(be.row+1))-1;return!(m>f||_<h||y>u||v<a)}const s=n.denormalizeCol(be.col,be.world);return e.spans.some(a=>a.row===be.row&&a.colFrom<=s&&a.colTo>=s)}normalizeBounds(e,r,i){if(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],this._wrap){const n=vi(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(e>r[i]+V6)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(e){const r=this.scales;return this._infoByScale[e]?this._infoByScale[e]:(e=r.reduce((i,n)=>Math.abs(n-e)<Math.abs(i-e)?n:i,r[0]),this._infoByScale[e])}scaleToLevel(e){const r=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=r.length-1;i>=0;i--)if(e<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-e)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,r,i){const n=this._infoByLevel[i.level];return e.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(e.level=r.level,e.col=Math.floor(i.col*n.resolution/r.resolution+.01),e.row=Math.floor(i.row*n.resolution/r.resolution+.01)),e)}}function z6(t,e){return t.length=0,e.forEach(r=>t.push(r)),t}const op=new Set,Mu=[],vo=new Map,W1=[0,0];let $i=class extends z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:r,strategy:i}=this;this._queue=new SM({concurrency:e,process:(n,s)=>{const o=this._keyToItem.get(n);return r(o,{signal:s})},peeker:i==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=Ce(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const r=typeof e=="string"?e:e.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const r=typeof e=="string"?e:e.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(e){const r=e.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(n,n),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach(f=>{const p=this._keyToItem.get(f),m=this.tileInfoView.getTileScale(p.key);vo.has(m)||(vo.set(m,[]),i=Math.max(m,i),n=Math.min(m,n)),vo.get(m).push(p.key),op.add(m)});let s=this.state.scale;vo.has(s)||(z6(Mu,op),Mu.sort((f,p)=>f-p),s=Mu.reduce((f,p)=>Math.abs(p-s)<Math.abs(f-s)?p:f,Mu[0])),s=Math.min(s,i),s=Math.max(s,n);const o=vo.get(s),a=r.getClosestInfoForScale(s),u=a.getColumnForX(this.state.center[0]),h=a.getRowForY(this.state.center[1]);return o.sort((f,p)=>{const m=a.denormalizeCol(f.col,f.world),y=a.denormalizeCol(p.col,p.world);return Math.sqrt((u-m)*(u-m)+(h-f.row)*(h-f.row))-Math.sqrt((u-y)*(u-y)+(h-p.row)*(h-p.row))}),op.clear(),vo.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView,i=this.state.center;let n=Number.POSITIVE_INFINITY,s;return e.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(W1,a.key);const u=L0(W1,i);u<n&&(n=u,s=a.key)}),s.id}};c([d({constructOnly:!0})],$i.prototype,"concurrency",void 0);c([d({constructOnly:!0})],$i.prototype,"process",void 0);c([d()],$i.prototype,"state",void 0);c([d({constructOnly:!0})],$i.prototype,"strategy",void 0);c([d({constructOnly:!0})],$i.prototype,"tileInfoView",void 0);c([d({readOnly:!0})],$i.prototype,"updating",null);$i=c([T("esri.views.2d.tiling.TileQueue")],$i);const FW=$i;class j6{constructor(e,r,i){this.maxSize=e,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const r=this._tilePerId.get(e);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];B1(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return r.visible=!0,r}add(e){e.visible=!1;const r=e.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(e,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,e))}_pruneAroundCenterTile(e,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,u=i*o[0],h=i*o[1],f=[0,0],p=[0,0];for(s.sort((m,y)=>(f[0]=a.x+u*(m.col+.5),f[1]=a.y-h*(m.row+.5),p[0]=a.x+u*(y.col+.5),p[1]=a.y-h*(y.row+.5),N1(f,r)-N1(p,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),e--,e===this.maxSize)break}return e}_removeTile(e){const r=this._tilePerId.get(e);this._removedFunc&&r&&this._removedFunc(r),B1(this._tilePerId,e)}}function B1(t,e){t.delete(e)}const Qn=new vt(0,0,0,0),Vt=new Map,bo=[],Pu=[];class UW{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=e.resampling==null||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new j6(e.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:r,tileIndex:i}=this,n=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(Pu.length=0,bo.length=0,Vt.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:u}=n,{level:h}=u,{scale:f,center:p,resolution:m}=e.state,y=!e.stationary&&f>this._previousScale;if(this._previousScale=f,this.tiles.length=0,!r&&(f>s||f<o))return this.tiles.length=0,Vt.clear(),i.forEach(S=>{this.releaseTile(S)}),i.clear(),Pu.length=0,bo.length=0,Vt.clear(),ha.pool.release(n),!0;i.forEach(S=>S.visible=!0);let _=0,v=0;if(a.length>0)for(const{row:S,colFrom:P,colTo:M}of a)for(let A=P;A<=M;A++){_++;const I=Qn.set(h,S,u.normalizeCol(A),u.getWorldForColumn(A)).id;if(i.has(I)){const O=i.get(I);O.isReady?(Vt.set(I,O),v++):y||this._addParentTile(I,Vt)}else{let O;if(this._tileCache&&this._tileCache.has(I)){if(O=this._tileCache.pop(I),this.tileIndex.set(I,O),O.isReady){Vt.set(I,O),v++;continue}}else O=this.acquireTile(Qn),this.tileIndex.set(I,O);y||this._addParentTile(I,Vt)}}const w=v===_;i.forEach((S,P)=>{if(Qn.set(P),Vt.has(P))return;const M=this.tileInfoView.intersects(n,Qn),A=this.cachePolicy==="purge"?Qn.level!==h:Qn.level>h;M&&(y||!w)?S.isReady?A&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Qn,h)?bo.push(P):Pu.push(P):A&&bo.push(P):(A||!M)&&bo.push(P)});for(const S of Pu){const P=i.get(S);P&&P.isReady&&Vt.set(S,P)}for(const S of bo){const P=i.get(S);this._tileCache?this._tileCache.add(P):this.releaseTile(P),i.delete(S)}return Vt.forEach(S=>this.tiles.push(S)),i.forEach(S=>{Vt.has(S.key.id)||(S.visible=!1)}),this._tileCache&&this._tileCache.prune(h,p,m),ha.pool.release(n),Vt.clear(),w}clear(e=!0){const{tileIndex:r}=this;e&&r.forEach(i=>{this.releaseTile(i)}),r.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,r){let i=e,n=null;for(;i=this.tileInfoView.getTileParentId(i),!!i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n&&n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n&&n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(e,r){const i=Br();this.tileInfoView.getTileBounds(i,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<e.level){const s=Br();if(this.tileInfoView.getTileBounds(s,n.key,!0),JO(s,i))return!0}return!1}}function V0(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}class H1 extends Ke{constructor(e,r){super(!0),this._view=e,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(e,r){V0(e.data,"primary")&&(e.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class W6 extends Ke{constructor(e,r,i){super(!0),this.view=e,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:r}=e,{pointerType:i}=r;if(i!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:u}=o;this._startScale=u,this._currentScale=u,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const u=1.015**s.y,h=this._startScale*u,f=h/this._currentScale;a.setViewpointImmediate(f),this._currentScale=h;break}case"end":{const{constraints:u}=o,{effectiveLODs:h,snapToZoom:f}=u;if(!f||!h){a.end();return}const p=u.snapScale(this._currentScale),y=(s.y>0?Math.max(p,u.snapToPreviousScale(this._startScale)):Math.min(p,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y);break}}}}class hf{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const r=e.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0;break}this._previousEvent=e}_emitStart(e){var r,i;this._startEvent=e,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}}class B6 extends Ke{constructor(e,r,i){super(!0),this.view=e,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new hf({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&V0(i.data,this.pointerAction)})}_handleDrag(e){const r=this.view.mapViewNavigation;if(r.pinch.zoomMomentum||r.pinch.rotateMomentum){this.stopMomentumNavigation();return}this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class H6 extends Ke{constructor(e,r,i){super(!0),this._view=e,this.pointerAction=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new hf({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&V0(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}}function lr(t){let e=t*t;return t<0&&(e*=-1),e}function q6(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Z6(t,e,r){const i=r,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=lr(n.axes[0]),i.translation[1]=lr(n.axes[1]),i.translation[2]=lr(n.buttons[7])-lr(n.buttons[6]),i.heading=lr(n.axes[2]),i.tilt=lr(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*lr(n.axes[0]),i.translation[1]=1.2*lr(n.axes[1]),i.translation[2]=2*-lr(n.axes[2]),i.heading=1.2*lr(n.axes[5]),i.tilt=1.2*lr(n.axes[3])),i.tilt*=o,wO(i.translation,i.translation,a),i}function Y6(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}class J6 extends Ke{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Vi,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Z(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=Wo({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},tt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const r=this._view.navigation.gamepad.device;r&&e.data.device!==r||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,q6(this._transformation)):(this._currentDevice=e.data.device,Z6(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const r=this._transformation;if(Y6(r))return;const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=X6*n*e;uf(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*Q6*e,a=this._view.constraints.rotationEnabled?-r.heading*K6*e:0,u=this._view.size,h=[u[0]/2,u[1]];yM(i,i,o,a,h,u);const f=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=f}}const K6=.06,X6=.7,Q6=6e-4;class e8 extends Ke{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,r){const i=this._keyMap[e.data.key];if(this._pressed=i!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown();break}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class t8 extends Ke{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,r){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation();break}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}var Ro;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Ro||(Ro={}));class r8 extends Ke{constructor(e,r,i){super(!0),this.view=e,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=Ro.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=Ro.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const r=e.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case Ro.IN:o=s.zoomIn();break;case Ro.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}}const i8=.6;class n8 extends Ke{constructor(e,r){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=e.data,o=1/i8**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}}class s8 extends Ke{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new hf({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function q1(t){const e=t.native;return e?{buttons:e.buttons.map(r=>r.pressed?r.value||1:0),axes:e.axes.map(r=>l8(r,t.axisThreshold))}:{buttons:[],axes:[]}}function o8(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let r=0;r<t.axes.length;r++)if(t.axes[r]!==e.axes[r])return!1;for(let r=0;r<t.buttons.length;r++)if(t.buttons[r]!==e.buttons[r])return!1;return!0}function a8(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function l8(t,e){const r=Math.abs(t);return r<e?0:Math.sign(t)*(r-e)/(1-e)}class c8{constructor(e,r){this._element=e,this._input=r,this._hasEventListeners=!1;//!< wether we currently handle gamepad events in the browser
this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,u=this._inputDevices[a];u&&(this._emitGamepadEvent(o,q1(u),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const r=new O0(e);r.deviceType!=="unknown"&&(this._inputDevices[e.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Wo({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!r;this._forEachGamepad(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=q1(s),u=i||a8(a);o&&(o.timestamp===n.timestamp||!o.active&&u||o8(o.state,a))||this._emitGamepadEvent(n,a,!u)})}_forEachGamepad(e){const r=window.navigator.getGamepads();for(let i=0;i<r.length;i++){const n=r[i];this._validate(n)&&e(n)}}_emitGamepadEvent(e,r,i){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:r,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let r=0;r<e.axes.length;r++)if(isNaN(e.axes[r]))return!1;return!0}}const Z1=C("edge"),u8=C("chrome"),h8=C("ff"),d8=C("safari"),Y1="esri-view-surface",So={touchNone:`${Y1}--touch-none`,touchPan:`${Y1}--touch-pan`};class df{constructor(e,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new c8(e,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Ce(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const r in this._active)if(!e||!e.has(r)){const i=this._active[r];this._element.removeEventListener(ap[r],i),delete this._active[r]}e&&e.forEach(r=>{if(!this._active[r]&&ap[r]){const n=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(ap[r],n),this._active[r]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,r){r?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?So.touchNone:So.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?So.touchPan:So.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(So.touchNone),this._element.classList.remove(So.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,r){const i=JE(this._element,e);return df.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(e,r){const i=HN(r);i&&e==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,r){let i=r.deltaY;switch(r.deltaMode){case 0:Z1&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=30*30;break}Z1?i*=.7:u8||d8?i*=.6:h8&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(e,o)}_handlePointerCaptureLost(e,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(e,r)}_handleDefault(e,r){const i={native:r};r.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}df.test={disableSubpixelCoordinates:!1};const ap={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class f8 extends Ke{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}}function G0(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function p8(t,e){const r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}function m8(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:mt()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[U,K]=t,[B,re]=[K.x-U.x,K.y-U.y];return e.radius=Math.sqrt(B*B+re*re)/2,e.center.x=(U.x+K.x)/2,e.center.y=(U.y+K.y)/2,e}let r=0,i=0;for(let U=0;U<t.length;U++)r+=t[U].x,i+=t[U].y;r/=t.length,i/=t.length;const n=t.map(U=>U.x-r),s=t.map(U=>U.y-i);let o=0,a=0,u=0,h=0,f=0,p=0,m=0;for(let U=0;U<n.length;U++){const K=n[U],B=s[U],re=K*K,j=B*B;o+=re,a+=j,u+=K*B,h+=re*K,f+=j*B,p+=K*j,m+=B*re}const y=o,_=u,v=u,w=a,S=.5*(h+p),P=.5*(f+m),M=y*w-v*_,A=S*w-P*_,I=y*P-v*S,O=A/M,F=I/M,$=mt(O+r,F+i);return{radius:Math.sqrt(O*O+F*F+(o+a)/t.length),center:$}}function ws(t){const{native:e}=t,{pointerId:r,button:i,pointerType:n}=e;return n==="mouse"?`${r}:${i}`:`${n}`}const qt={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class y8 extends Ke{constructor(e=qt.maximumDoubleClickDelay,r=qt.maximumDoubleClickDistance,i=qt.maximumDoubleTouchDelay,n=qt.maximumDoubleTouchDistance,s=Ic){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=xe(e.doubleClickTimer))}get hasPendingInputs(){return Ud(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,r){const i=this._pointerState.get(e);i&&(i.doubleClickTimer=xe(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const r=this._pointerState.get(e);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:r,pointerType:i,button:n}=e.native;return i==="mouse"?`${r}:${n}`:`${i}`}_handleImmediateClick(e){const r=e.data,{pointerType:i}=r.native,n=this._getPointerId(r);if(!this._pointerState.has(n)){this._startClick(e);return}const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,u=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;G0(o,r)>u?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const r=ws(e.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:r}=e,{native:{pointerType:i}}=r,n=ws(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s),a=1;this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}}class g8 extends Ke{constructor(e=qt.maximumDoubleClickDelay,r=qt.maximumDoubleClickDistance,i=qt.maximumDoubleTouchDelay,n=qt.maximumDoubleTouchDistance,s=Ic){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=mt(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new hf({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=xe(e.doubleTapTimeout)})}get hasPendingInputs(){return Ud(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const r=this._pointerState.get(e);r&&(r.doubleTapTimeout=xe(r.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,r,i){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:u,timestamp:h}=i;return{action:e,delta:r,button:n,buttons:s,pointer:o,pointers:a,pointerType:u,timestamp:h}}_dragStart(e,r){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",mt(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:n}=r,s=mt(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,r);this._doubleTapDrag.emit(o,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=e,{center:n}=r,s=mt(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,r);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:r}=e,i=ws(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(!n)this._storePointerDown(e);else{const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),G0(n.event.data,r)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:r}=e,{pointerType:i}=r.native,n=ws(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class _8 extends Ke{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,r,i,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:w8(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const r=e.native.pointerId,i=Cu(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=eh(n,TM(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const r=e.native.pointerId,i=this._activePointerMap.get(r);i?i.event=e:this._addPointer(e)}_removePointer(e){const r=Cu(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(r)}_updatePointerAngles(e){const r=Cu(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=eh(i,r)-e,i.lastAngle=eh(i,r)-e})}_emitEvent(e,r,i){const n=Cu(this._activePointerMap);this._drag.emit(this._createPayload(e,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const r=e.data.native.pointerId,i=e.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const r=e.data,i=r.currentEvent,n=e.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n));break}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}}function TM(t){const e=[];return t.forEach(r=>{e.push(mt(r.event.x,r.event.y))}),m8(e)}function Cu(t){const e=TM(t);let r=0;return t.forEach(i=>{let n=eh(i,e),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=t.size||1,{angle:r,radius:e.radius,center:e.center}}function w8(t){const e=new Map;return t.forEach((r,i)=>e.set(i,r.event)),e}function eh(t,e){const r=t.event,i=r.x-e.center.x,n=r.y-e.center.y;return Math.atan2(n,i)}var J1;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(J1||(J1={}));class v8 extends Ke{constructor(e=qt.maximumDoubleClickDelay,r=qt.maximumDoubleClickDistance,i=qt.maximumDoubleTouchDelay,n=qt.maximumDoubleTouchDistance,s=Ic){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=ws(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(e){const r=e.data,i=ws(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick;if(!s)this._startImmediateDoubleClick(e,n);else{s.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;G0(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(r))}}}_startImmediateDoubleClick(e,r){const i=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),i)}}_removeState(e){const r=ws(e);this._pointerState.delete(r),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}const Ya={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class b8 extends Ke{constructor(e=Ya.maximumClickDelay,r=Ya.movementUntilMouseDrag,i=Ya.movementUntilPenDrag,n=Ya.movementUntilTouchDrag,s=Ya.holdDelay,o=Ic){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=xe(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const r=e.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:e.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,r,i){return{action:e,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:i}}_handlePointerMove(e){const r=e.data,i=r.native.pointerId,n=this._pointerState.get(i);if(n){if(n.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",n,r),void 0,n.modifiers);else{const s=p8(r,n.startEvent),o=this._getDragThreshold(r.native.pointerType);s>o&&this._startDragging(e)}n.previousEvent=r}}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;case"mouse":default:return this._movementUntilMouseDrag}}_startDragging(e){const r=e.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,r)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,r){const i=e.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}}const Au={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let eo=class extends z{constructor(){super(...arguments),this._handles=new Vi}initialize(){const e=()=>{var r;return(r=this.view)==null?void 0:r.ready};this._handles.add([Ln(()=>!e(),()=>this._disconnect()),Ln(e,()=>this._connect())])}destroy(){this._handles=Ce(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ce(this._inputManager)}_connect(){const e=this.view.surface,r=new df(e,this.view.input),i=[new v8,new b8,new y8,new _8(this.view.navigation),new g8],n=new ti({eventSource:r,recognizers:i});n.installHandlers("prevent-context-menu",[new f8],wn.INTERNAL),n.installHandlers("navigation",[new s8(this.view),new J6(this.view),new n8(this.view),new H1(this.view),new H1(this.view,[Au.counter]),new B6(this.view,"primary"),new e8(this.view,Au.pan),new r8(this.view,Au.zoom),new t8(this.view,Au.rotate),new H6(this.view,"secondary"),new W6(this.view,"touch")],wn.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,Z(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},tt)}get test(){return{inputManager:this._inputManager}}};c([d()],eo.prototype,"view",void 0);c([d()],eo.prototype,"latestPointerType",null);c([d()],eo.prototype,"latestPointerLocation",null);c([d()],eo.prototype,"multiTouchActive",null);eo=c([T("esri.views.2d.input.MapViewInputManager")],eo);const S8=eo;var Uy={},T8={get exports(){return Uy},set exports(t){Uy=t}};(function(t){(function(e){{var r=e();r!==void 0&&(t.exports=r)}})(function(){function e(s,o,a,u,h){r(s,o,a||0,u||s.length-1,h||n)}function r(s,o,a,u,h){for(;u>a;){if(u-a>600){var f=u-a+1,p=o-a+1,m=Math.log(f),y=.5*Math.exp(2*m/3),_=.5*Math.sqrt(m*y*(f-y)/f)*(p-f/2<0?-1:1),v=Math.max(a,Math.floor(o-p*y/f+_)),w=Math.min(u,Math.floor(o+(f-p)*y/f+_));r(s,o,v,w,h)}var S=s[o],P=a,M=u;for(i(s,a,o),h(s[u],S)>0&&i(s,a,u);P<M;){for(i(s,P,M),P++,M--;h(s[P],S)<0;)P++;for(;h(s[M],S)>0;)M--}h(s[a],S)===0?i(s,a,M):(M++,i(s,M,u)),M<=o&&(a=M+1),o<=M&&(u=M-1)}}function i(s,o,a){var u=s[o];s[o]=s[a],s[a]=u}function n(s,o){return s<o?-1:s>o?1:0}return e})})(T8);const E8=Uy;function md(t,e){if(!(this instanceof md))return new md(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}md.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!Ou(t,e))return r;for(var n=[],s,o,a,u;e;){for(s=0,o=e.children.length;s<o;s++)a=e.children[s],u=e.leaf?i(a):a,Ou(t,u)&&(e.leaf?r.push(a):cp(t,u)?this._all(a,r):n.push(a));e=n.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!Ou(t,e))return!1;for(var i=[],n,s,o,a;e;){for(n=0,s=e.children.length;n<s;n++)if(o=e.children[n],a=e.leaf?r(o):o,Ou(t,a)){if(e.leaf||cp(t,a))return!0;i.push(o)}e=i.pop()}return!1},load:function(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ao([]),this},remove:function(t,e){if(!t)return this;for(var r=this.data,i=this.toBBox(t),n=[],s=[],o,a,u,h;r||n.length;){if(r||(r=n.pop(),a=n[n.length-1],o=s.pop(),h=!0),r.leaf&&(u=M8(t,r.children,e),u!==-1))return r.children.splice(u,1),n.push(r),this._condense(n),this;!h&&!r.leaf&&cp(r,i)?(n.push(r),s.push(o),o=0,a=r,r=r.children[0]):a?(o++,r=a.children[o],h=!1):r=null}return this},toBBox:function(t){return t},compareMinX:K1,compareMinY:X1,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var n=r-e+1,s=this._maxEntries,o;if(n<=s)return o=Ao(t.slice(e,r+1)),To(o,this.toBBox),o;i||(i=Math.ceil(Math.log(n)/Math.log(s)),s=Math.ceil(n/Math.pow(s,i-1))),o=Ao([]),o.leaf=!1,o.height=i;var a=Math.ceil(n/s),u=a*Math.ceil(Math.sqrt(s)),h,f,p,m;for(Q1(t,e,r,u,this.compareMinX),h=e;h<=r;h+=u)for(p=Math.min(h+u-1,r),Q1(t,h,p,a,this.compareMinY),f=h;f<=p;f+=a)m=Math.min(f+a-1,p),o.children.push(this._build(t,f,m,i-1));return To(o,this.toBBox),o},_chooseSubtree:function(t,e,r,i){for(var n,s,o,a,u,h,f,p;i.push(e),!(e.leaf||i.length-1===r);){for(f=p=1/0,n=0,s=e.children.length;n<s;n++)o=e.children[n],u=lp(o),h=P8(t,o)-u,h<p?(p=h,f=u<f?u:f,a=o):h===p&&u<f&&(f=u,a=o);e=a||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,n=r?t:i(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),cl(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var r=t[e],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=Ao(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,To(r,this.toBBox),To(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(t,e){this.data=Ao([t,e]),this.data.height=t.height+1,this.data.leaf=!1,To(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,n,s,o,a,u,h,f;for(u=h=1/0,i=e;i<=r-e;i++)n=ll(t,0,i,this.toBBox),s=ll(t,i,r,this.toBBox),o=C8(n,s),a=lp(n)+lp(s),o<u?(u=o,f=i,h=a<h?a:h):o===u&&a<h&&(h=a,f=i);return f},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:K1,n=t.leaf?this.compareMinY:X1,s=this._allDistMargin(t,e,r,i),o=this._allDistMargin(t,e,r,n);s<o&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var n=this.toBBox,s=ll(t,0,e,n),o=ll(t,r-e,r,n),a=Iu(s)+Iu(o),u,h;for(u=e;u<r-e;u++)h=t.children[u],cl(s,t.leaf?n(h):h),a+=Iu(s);for(u=r-e-1;u>=e;u--)h=t.children[u],cl(o,t.leaf?n(h):h),a+=Iu(o);return a},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)cl(e[i],t)},_condense:function(t){for(var e=t.length-1,r;e>=0;e--)t[e].children.length===0?e>0?(r=t[e-1].children,r.splice(r.indexOf(t[e]),1)):this.clear():To(t[e],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function M8(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function To(t,e){ll(t,0,t.children.length,e,t)}function ll(t,e,r,i,n){n||(n=Ao(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s=e,o;s<r;s++)o=t.children[s],cl(n,t.leaf?i(o):o);return n}function cl(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function K1(t,e){return t.minX-e.minX}function X1(t,e){return t.minY-e.minY}function lp(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Iu(t){return t.maxX-t.minX+(t.maxY-t.minY)}function P8(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function C8(t,e){var r=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function cp(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ou(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ao(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Q1(t,e,r,i,n){for(var s=[e,r],o;s.length;)r=s.pop(),e=s.pop(),!(r-e<=i)&&(o=e+Math.ceil((r-e)/i/2)*i,E8(t,o,e,r,n),s.push(e,o,o,r))}var Vy;const ev=new rt({upperLeft:"upper-left",lowerLeft:"lower-left"});let to=Vy=class extends G{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Vy(x({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:Me,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],to.prototype,"extent",void 0);c([d({type:["view","edit"],json:{write:!0}})],to.prototype,"mode",void 0);c([d({type:String,json:{read:ev.read,write:ev.write}})],to.prototype,"originPosition",void 0);c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],to.prototype,"tolerance",void 0);to=Vy=c([T("esri.rest.support.QuantizationParameters")],to);const A8=to;class yd{constructor(e,r){this.key=new vt(0,0,0,0),this.bounds=Br(),this.objectIds=new Set,this.key.set(r);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return Me.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),r=pt.acquire();for(let i=0;i<e.length;i++)r[i]=new yd(this.tileInfoView,e[i]);return r}getQuantizationParameters(){return A8.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const es={added:[],removed:[]},up=new Set,I8=new vt(0,0,0,0);class O8 extends Hn{constructor(e){super(),this._tiles=new Map,this._index=md(9,C("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const r={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const n=new yd(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of e.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(e){const r=this.tileScheme.getTileCoverage(e,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:u}of i)for(let h=a;h<=u;h++){const f=I8.set(s,o,n.normalizeCol(h),n.getWorldForColumn(h)).id;if(up.add(f),!this.has(f)){const p=new yd(this.tileScheme,f);this._tiles.set(f,p),this._index.insert(p),this.tiles.push(p),es.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];up.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),es.removed.push(a))}(es.added.length||es.removed.length)&&this.emit("update",es),ha.pool.release(r),up.clear(),es.added.length=0,es.removed.length=0}}let ro=class extends z{constructor(){super(...arguments),this.color=new me([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};c([d({type:me})],ro.prototype,"color",void 0);c([d({type:me})],ro.prototype,"haloColor",void 0);c([d()],ro.prototype,"haloOpacity",void 0);c([d()],ro.prototype,"fillOpacity",void 0);ro=c([T("esri.views.2d.support.HighlightOptions")],ro);const EM=ro,x8=t=>t.includes("Brush");class MM{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),x8(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}function k8(t,e,r,i,n,s,o,a){t.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let u=null;t.width!=null&&t.height!=null?u=[t.width,t.height]:t.width==null&&t.height!=null?u=[t.height,t.height]:t.width!=null&&t.height==null?u=[t.width,t.width]:t.width==null&&t.height==null&&(u=null);const h=r[0]-(i.left+i.right),f=r[1]-(i.top+i.bottom);let p=t.area||{x:0,y:0,width:h,height:f};if(u){const v=h/f,w=u[0]/u[1];if(w>v){const S=p.width/w;p={x:p.x,y:Math.round(p.y+(p.height-S)/2),width:p.width,height:Math.round(S)}}else{const S=p.height*w;p={x:Math.round(p.x+(p.width-S)/2),y:p.y,width:Math.round(S),height:p.height}}}else u=[p.width,p.height];let m,y;return u[0]>p.width?(m=Math.min(u[0]/p.width,e),y=u[0]/p.width/m):(m=1,y=u[0]/p.width),{resolutionScale:m,cropArea:{x:Math.round((p.x+i.left)*m),y:Math.round((p.y+i.top)*m),width:Math.round(p.width*m),height:Math.round(p.height*m)},outputScale:y,format:n,quality:s,children:o,rotation:a}}function L8(t,e,r){const{ctx:i,canvas:n}=PM(t,r),s=i.getImageData(0,0,t.width,t.height),o=D8(n,e);return CM(n),{dataUrl:o,data:s}}function R8(t,e){const{ctx:r,canvas:i}=PM(t,e),n=r.getImageData(0,0,t.width,t.height);return CM(i),n}function PM(t,e){const r=N8();e.premultipliedAlpha&&G8(t),r.width=t.width,r.height=t.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(t,0,0),e.flipY&&V8(i),{ctx:i,canvas:r}}function CM(t){t.width=0,t.height=0}function N8(){return hp==null&&(hp=document.createElement("canvas")),hp}let hp=null;function D8(t,e){const r=z8[e.format],i=e.quality/100;return t.toDataURL(r,i)}function $8(t,e){const r=U8(t),i=j8[r],n=Wr(e??i,0,100);return{format:r,quality:n}}function F8(t,e){return e/Math.max(t[0],t[1])}function jW(t,e,r,i=0,n=0,s=t.width-i,o=t.height-n,a=!1){const{data:u}=t,{width:h,height:f,data:p}=e,m=s/h,y=o/f,_=Math.ceil(m/2),v=Math.ceil(y/2),w=t.width;for(let S=0;S<f;S++)for(let P=0;P<h;P++){const M=(P+(a?f-S-1:S)*h)*4;let A=0,I=0,O=0,F=0,$=0,J=0;const U=(S+.5)*y;for(let K=Math.floor(S*y);K<(S+1)*y;K++){const B=Math.abs(U-(K+.5))/v,re=(P+.5)*m,j=B*B;for(let Pt=Math.floor(P*m);Pt<(P+1)*m;Pt++){const ka=Math.abs(re-(Pt+.5))/_,ai=Math.sqrt(j+ka*ka);if(ai>=1)continue;let ve=2*ai*ai*ai-3*ai*ai+1;const mo=4*(i+Pt+(n+K)*w);J+=ve*u[mo+3],I+=ve,!r&&u[mo+3]<255&&(ve=ve*u[mo+3]/255),O+=ve*u[mo],F+=ve*u[mo+1],$+=ve*u[mo+2],A+=ve}}p[M]=O/A,p[M+1]=F/A,p[M+2]=$/A,p[M+3]=J/I}return e}function U8(t){switch(t){case"png":case"jpg":case"jpeg":return t;case null:case void 0:return rv;default:return rv}}function V8(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function G8(t){const e=t.data,r=e.length;for(let i=0;i<r;i+=4){const n=e[i+3];if(n!==255&&n>0){const s=255/n;e[i]=e[i]*s,e[i+1]=e[i+1]*s,e[i+2]=e[i+2]*s}}}const z8={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},tv=98,rv="png",j8={png:100,jpg:tv,jpeg:tv};var Ve;(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Ve||(Ve={}));function Gy(t,e,r={}){const i=e===Ve.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const n of i){const s=t.getContext(n,r);if(s)return s}return null}function WW(t,e,r={}){const i=AM(t);for(const n of i){const s=Gy(e,n,r);if(s)return s}return null}function AM(t){if(t==="3d")return[Ve.WEBGL2];const e=C("esri-force-webgl");return e===Ve.WEBGL1||e===Ve.WEBGL2?[e]:C("mac")&&C("chrome")?[Ve.WEBGL1,Ve.WEBGL2]:[Ve.WEBGL2,Ve.WEBGL1]}let dp,fp;function W8(t){const e=AM(t);for(;e.length>1;){const r=iv(e.shift());if(r.available)return r}return iv(e.shift())}function iv(t){switch(t){case Ve.WEBGL1:return B8();case Ve.WEBGL2:return H8()}}function B8(){return dp||(dp=Y8()),dp}function H8(){return fp||(fp=J8()),fp}class IM{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class q8 extends IM{constructor(){super(...arguments),this.type=Ve.WEBGL1}}class Z8 extends IM{constructor(){super(...arguments),this.type=Ve.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function OM(t,e){if(t===Ve.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Ve.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const r=document.createElement("canvas");if(!r)return null;let i=Gy(r,t,{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=Gy(r,t),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;if(t===Ve.WEBGL1){const s=i.getParameter(i.VERSION),o=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);e.available=a>=.94}}else e.available=!0;e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),i}function Y8(){const t=new q8,e=OM(Ve.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function J8(){const t=new Z8,e=OM(Ve.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function K8(t){const e=W8(t);if(!e.available)return t==="3d"?new D("webgl:required","WebGL2 is required but not supported.",new Error().stack):new D("webgl:required","WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new D("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new D("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new D("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ve.WEBGL1){if(!e.supportsElementIndexUint)return new D("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new D("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new D("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function X8(t){return t&&"nodeType"in t}function Q8(t){return t&&typeof t.render=="function"}const nv={component:"esri-component"};let io=class extends z{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const r=this._get("node");e!==r&&(e&&e.classList.add(nv.component),r&&r.classList.remove(nv.component),this._set("node",e))}castNode(e){var r;return(r=this.widget)==null||r.destroy(),e?typeof e=="string"||X8(e)?(this._set("widget",null),g0(e)):(Q8(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d({dependsOn:[]})],io.prototype,"id",null);c([d()],io.prototype,"node",null);c([wt("node")],io.prototype,"castNode",null);c([d({readOnly:!0})],io.prototype,"widget",void 0);io=c([T("esri.views.ui.Component")],io);const th=io,xM="calcite-mode-";function e$(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function t$(){return e$().startsWith("dark")}function r$(){return`${xM}${t$()?"dark":"light"}`}function i$(t){n$(t),t.classList.add(r$())}function n$(t){Array.from(t.classList).forEach(e=>{e.startsWith(xM)&&t.classList.remove(e)})}const s$={left:0,top:0,bottom:0,right:0},kM={bottom:30,top:15,right:15,left:15},hi="esri-ui",dt={ui:hi,corner:`${hi}-corner`,innerContainer:`${hi}-inner-container`,manualContainer:`${hi}-manual-container`,cornerContainer:`${hi}-corner-container`,topLeft:`${hi}-top-left`,topRight:`${hi}-top-right`,bottomLeft:`${hi}-bottom-left`,bottomRight:`${hi}-bottom-right`};function o$(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function xu(t){return t===0?"0":`${t}px`}function pp(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function mp(t,{top:e,bottom:r,left:i,right:n}){t.style.top=e,t.style.bottom=r,t.style.left=i,t.style.right=n}let ri=class extends Hn.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=gr(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&mp(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&mp(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Z(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,tt),Z(()=>this.padding,this._applyUIPadding,tt),Z(()=>[this.container,this._locale],([e,r])=>{e&&e.setAttribute("lang",r)},tt),SS(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const r=this._get("container");e!==r&&(e&&(e.classList.add(dt.ui),i$(e),this._attachContainers(e)),r&&(r.classList.remove(dt.ui),mp(r,{top:"",bottom:"",left:"",right:""}),wT(r)),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(e-i-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...kM,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(e-i-n,0)}get test(){return{components:this._components}}add(e,r){let i,n;if(Array.isArray(e)){e.forEach(o=>this.add(o,r));return}const s=pp(e);s&&({index:i,position:r,component:e,key:n}=s),r&&typeof r=="object"&&({index:i,key:n,position:r}=r),!(!e||r&&!this._isValidPosition(r))&&this._add(e,r,i,n)}remove(e,r){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,r));const i=this._find(e);if(i){if(this._componentToKey.has(e)&&this._componentToKey.get(e)!==r)return;const n=this._components.indexOf(i),s=i.node.parentNode;return s==null||s.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(r=>this.empty(r)).reduce((r,i)=>r.concat(i)):(e??(e="manual"),e==="manual"?Array.prototype.slice.call(this._manualContainer.children).filter(i=>!i.classList.contains(dt.corner)).map(i=>this.remove(i)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null)}move(e,r){if(Array.isArray(e)&&e.forEach(o=>this.move(o,r)),!e)return;let i;const n=pp(e)||pp(r);if(n&&(i=n.index,r=n.position,e=n.component||e),r&&!this._isValidPosition(r))return;const s=this.remove(e);s&&this.add(s,{position:r,index:i})}find(e){if(!e)return null;const r=this._findById(e);return r&&(r.widget||r.node)}getComponents(e){return e?Array.isArray(e)?e.map(r=>this._getComponentsAtPosition(r)).flat():this._getComponentsAtPosition(e):this._components.map(({widget:r,node:i})=>r??i)}getPosition(e){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(e))return r;return null}_add(e,r,i,n){e instanceof th||(e=new th({node:e})),this._place({component:e,position:r,index:i}),this._components.push(e),n&&this._componentToKey.set(e,n)}_find(e){return e?e instanceof th?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??s$}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(dt.innerContainer,dt.cornerContainer);const r=document.createElement("div");r.classList.add(dt.innerContainer,dt.manualContainer);const i=document.createElement("div");i.classList.add(dt.topLeft,dt.corner),e.appendChild(i);const n=document.createElement("div");n.classList.add(dt.topRight,dt.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(dt.bottomLeft,dt.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(dt.bottomRight,dt.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=r;const a=SN();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const r=e.position??"manual",{component:i,index:n}=e,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(o$(i.widget)&&i.widget.startup(),!o){s.appendChild(i.node);return}const a=Array.prototype.slice.call(s.children);if(n===0){s.firstChild?Aw(i.node,s.firstChild):s.appendChild(i.node);return}if(n>=a.length){s.appendChild(i.node);return}Aw(i.node,a[n])}_toPixelPosition(e){return{top:xu(e.top),left:xu(e.left),right:xu(e.right),bottom:xu(e.bottom)}}_findByComponent(e){return this._components.find(r=>r===e)??null}_findById(e){return this._components.find(({id:r})=>r===e)??null}_findByNode(e){return this._components.find(({node:r})=>r===e)??null}_getComponentsAtPosition(e){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(vn).map(({widget:s,node:o})=>s??o)}};c([d()],ri.prototype,"_locale",void 0);c([d()],ri.prototype,"container",null);c([d()],ri.prototype,"height",null);c([d({value:kM})],ri.prototype,"padding",null);c([wt("padding")],ri.prototype,"castPadding",null);c([d()],ri.prototype,"view",void 0);c([d()],ri.prototype,"width",null);ri=c([T("esri.views.ui.UI")],ri);const a$=ri,l$="randomUUID"in crypto;function LM(){if(l$)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=t[3]&4095|16384,t[4]=t[4]&16383|32768;const e=r=>t[r].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function qW(){return`{${LM()}}`}const c$={handleInterceptedEvent:(t,e,r,i)=>(t.scheduleRender(),e.properties[`on${i.type}`].apply(e.properties.bind||r,[i]))},u$={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,r)=>{t.style[e]=r}},h$=t=>({...u$,...t}),d$=(t,e)=>{const r=[];for(;t&&t!==e;)r.push(t),t=t.parentNode;return r},f$=(t,e)=>t.find(e),sv=(t,e,r=!1)=>{let i=t;return e.forEach((n,s)=>{const o=i!=null&&i.children?f$(i.children,a=>a.domNode===n):void 0;(!r||o||s===e.length-1)&&(i=o)}),i},p$=t=>{let e;const r={...c$,...t},i=h$(r),n=i.performanceLogger;let s=!0,o,a=!1;const u=[],h=[],f=(m,y,_)=>{var S;let v;i.eventHandlerInterceptor=(P,M,A,I)=>function(O){n("domEvent",O);let F;const $=d$(O.currentTarget,v.domNode),J=$.some(B=>{var re;return customElements.get((re=B==null?void 0:B.tagName)==null?void 0:re.toLowerCase())});if(O.eventPhase===Event.CAPTURING_PHASE||!J)$.reverse(),F=sv(v.getLastRender(),$);else{const B=O.composedPath(),re=B.slice(B.indexOf(O.currentTarget),B.indexOf(v.domNode)).filter(j=>j.getRootNode()===j.ownerDocument).reverse();F=sv(v.getLastRender(),re,!0)}let K;return F&&(K=r.handleInterceptedEvent(e,F,this,O)),n("domEventProcessed",O),K},(S=r.postProcessProjectionOptions)==null||S.call(r,i);const w=_();v=m(y,w,i),u.push(v),h.push(_),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,w)};let p=()=>{if(o=void 0,!!s){s=!1,n("renderStart",void 0);for(let m=0;m<u.length;m++){const y=h[m]();n("rendered",void 0),u[m].update(y),n("patched",void 0)}n("renderDone",void 0),s=!0}};return r.modifyDoRenderImplementation&&(p=r.modifyDoRenderImplementation(p,u,h)),e={renderNow:p,scheduleRender:()=>{!o&&!a&&(o=requestAnimationFrame(p))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:()=>{a=!1,s=!0,e.scheduleRender()},append:(m,y)=>{f(yn.append,m,y)},insertBefore:(m,y)=>{f(yn.insertBefore,m,y)},merge:(m,y)=>{f(yn.merge,m,y)},replace:(m,y)=>{f(yn.replace,m,y)},detach:m=>{for(let y=0;y<h.length;y++)if(h[y]===m)return h.splice(y,1),u.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},Io={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Oo,RM,ff,NM=!1,gd=!1,z0=!1,Ot=!1,ov=null,zy=!1;const ZW=t=>{const e=new URL(t,it.$resourcesUrl$);return e.origin!==Zc.location.origin?e.href:e.pathname},m$=t=>it.$resourcesUrl$=t,no=(t,e="")=>()=>{},av="http://www.w3.org/1999/xlink",lv={},y$="http://www.w3.org/2000/svg",g$="http://www.w3.org/1999/xhtml",_$=t=>t!=null,j0=t=>(t=typeof t,t==="object"||t==="function");function w$(t){var e,r,i;return(i=(r=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||r===void 0?void 0:r.getAttribute("content"))!==null&&i!==void 0?i:void 0}const DM=(t,e,...r)=>{let i=null,n=null,s=null,o=!1,a=!1;const u=[],h=p=>{for(let m=0;m<p.length;m++)i=p[m],Array.isArray(i)?h(i):i!=null&&typeof i!="boolean"&&((o=typeof t!="function"&&!j0(i))&&(i=String(i)),o&&a?u[u.length-1].$text$+=i:u.push(o?_d(null,i):i),a=o)};if(h(r),e){e.key&&(n=e.key),e.name&&(s=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(m=>p[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,u,S$);const f=_d(t,null);return f.$attrs$=e,u.length>0&&(f.$children$=u),f.$key$=n,f.$name$=s,f},_d=(t,e)=>{const r={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},v$={},b$=t=>t&&t.$tag$===v$,S$={forEach:(t,e)=>t.map(cv).forEach(e),map:(t,e)=>t.map(cv).map(e).map(T$)},cv=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),T$=t=>{if(typeof t.vtag=="function"){const r=Object.assign({},t.vattrs);return t.vkey&&(r.key=t.vkey),t.vname&&(r.name=t.vname),DM(t.vtag,r,...t.vchildren||[])}const e=_d(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},E$=t=>K$.map(e=>e(t)).find(e=>!!e),M$=(t,e)=>t!=null&&!j0(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,P$=t=>t,YW=(t,e,r)=>{const i=P$(t);return{emit:n=>C$(i,e,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n})}},C$=(t,e,r)=>{const i=it.ce(e,r);return t.dispatchEvent(i),i},uv=new WeakMap,A$=(t,e,r)=>{let i=vd.get(t);eF&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,vd.set(t,i)},I$=(t,e,r,i)=>{var n;let s=$M(e,r);const o=vd.get(s);if(t=t.nodeType===11?t:_r,o)if(typeof o=="string"){t=t.head||t;let a=uv.get(t),u;if(a||uv.set(t,a=new Set),!a.has(s)){{u=_r.createElement("style"),u.innerHTML=o;const h=(n=it.$nonce$)!==null&&n!==void 0?n:w$(_r);h!=null&&u.setAttribute("nonce",h),t.insertBefore(u,t.querySelector("link"))}a&&a.add(s)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return s},O$=t=>{const e=t.$cmpMeta$,r=t.$hostElement$,i=e.$flags$,n=no("attachStyles",e.$tagName$),s=I$(r.shadowRoot?r.shadowRoot:r.getRootNode(),e,t.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},$M=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),hv=(t,e,r,i,n,s)=>{if(r!==i){let o=mv(t,e),a=e.toLowerCase();if(e==="class"){const u=t.classList,h=dv(r),f=dv(i);u.remove(...h.filter(p=>p&&!f.includes(p))),u.add(...f.filter(p=>p&&!h.includes(p)))}else if(e==="style"){for(const u in r)(!i||i[u]==null)&&(u.includes("-")?t.style.removeProperty(u):t.style[u]="");for(const u in i)(!r||i[u]!==r[u])&&(u.includes("-")?t.style.setProperty(u,i[u]):t.style[u]=i[u])}else if(e!=="key")if(e==="ref")i&&i(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):mv(Zc,a)?e=a.slice(2):e=a[2]+e.slice(3),r&&it.rel(t,e,r,!1),i&&it.ael(t,e,i,!1);else{const u=j0(i);if((o||u&&i!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=i;else{const f=i??"";e==="list"?o=!1:(r==null||t[e]!=f)&&(t[e]=f)}}catch{}let h=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,h=!0),i==null||i===!1?(i!==!1||t.getAttribute(e)==="")&&(h?t.removeAttributeNS(av,e):t.removeAttribute(e)):(!o||s&4||n)&&!u&&(i=i===!0?"":i,h?t.setAttributeNS(av,e,i):t.setAttribute(e,i))}}},x$=/\s/,dv=t=>t?t.split(x$):[],FM=(t,e,r,i)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||lv,o=e.$attrs$||lv;for(i in s)i in o||hv(n,i,s[i],void 0,r,e.$flags$);for(i in o)hv(n,i,s[i],o[i],r,e.$flags$)},wd=(t,e,r,i)=>{const n=e.$children$[r];let s=0,o,a,u;if(NM||(z0=!0,n.$tag$==="slot"&&(Oo&&i.classList.add(Oo+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=_r.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=_r.createTextNode("");else{if(Ot||(Ot=n.$tag$==="svg"),o=n.$elm$=_r.createElementNS(Ot?y$:g$,n.$flags$&2?"slot-fb":n.$tag$),Ot&&n.$tag$==="foreignObject"&&(Ot=!1),FM(null,n,Ot),_$(Oo)&&o["s-si"]!==Oo&&o.classList.add(o["s-si"]=Oo),n.$children$)for(s=0;s<n.$children$.length;++s)a=wd(t,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?Ot=!1:o.tagName==="foreignObject"&&(Ot=!0)}return o["s-hn"]=ff,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=RM,o["s-sn"]=n.$name$||"",u=t&&t.$children$&&t.$children$[r],u&&u.$tag$===n.$tag$&&t.$elm$&&Ec(t.$elm$,!1)),o},Ec=(t,e)=>{it.$flags$|=1;const r=t.childNodes;for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==ff&&n["s-ol"]&&(GM(n).insertBefore(n,W0(n)),n["s-ol"].remove(),n["s-ol"]=void 0,z0=!0),e&&Ec(n,e)}it.$flags$&=-2},UM=(t,e,r,i,n,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===ff&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=wd(null,r,n,t),a&&(i[n].$elm$=a,o.insertBefore(a,W0(e))))},VM=(t,e,r,i,n)=>{for(;e<=r;++e)(i=t[e])&&(n=i.$elm$,WM(i),gd=!0,n["s-ol"]?n["s-ol"].remove():Ec(n,!0),n.remove())},k$=(t,e,r,i)=>{let n=0,s=0,o=0,a=0,u=e.length-1,h=e[0],f=e[u],p=i.length-1,m=i[0],y=i[p],_,v;for(;n<=u&&s<=p;)if(h==null)h=e[++n];else if(f==null)f=e[--u];else if(m==null)m=i[++s];else if(y==null)y=i[--p];else if(ku(h,m))xo(h,m),h=e[++n],m=i[++s];else if(ku(f,y))xo(f,y),f=e[--u],y=i[--p];else if(ku(h,y))(h.$tag$==="slot"||y.$tag$==="slot")&&Ec(h.$elm$.parentNode,!1),xo(h,y),t.insertBefore(h.$elm$,f.$elm$.nextSibling),h=e[++n],y=i[--p];else if(ku(f,m))(h.$tag$==="slot"||y.$tag$==="slot")&&Ec(f.$elm$.parentNode,!1),xo(f,m),t.insertBefore(f.$elm$,h.$elm$),f=e[--u],m=i[++s];else{for(o=-1,a=n;a<=u;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===m.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==m.$tag$?_=wd(e&&e[s],r,o,t):(xo(v,m),e[o]=void 0,_=v.$elm$),m=i[++s]):(_=wd(e&&e[s],r,s,t),m=i[++s]),_&&GM(h.$elm$).insertBefore(_,W0(h.$elm$))}n>u?UM(t,i[p+1]==null?null:i[p+1].$elm$,r,i,s,p):s>p&&VM(e,n,u)},ku=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,W0=t=>t&&t["s-ol"]||t,GM=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,xo=(t,e)=>{const r=e.$elm$=t.$elm$,i=t.$children$,n=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(Ot=s==="svg"?!0:s==="foreignObject"?!1:Ot,s==="slot"||FM(t,e,Ot),i!==null&&n!==null?k$(r,i,e,n):n!==null?(t.$text$!==null&&(r.textContent=""),UM(r,null,e,n,0,n.length-1)):i!==null&&VM(i,0,i.length-1),Ot&&s==="svg"&&(Ot=!1)):(a=r["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(r.data=o)},zM=t=>{const e=t.childNodes;let r,i,n,s,o,a;for(i=0,n=e.length;i<n;i++)if(r=e[i],r.nodeType===1){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,s=0;s<n;s++)if(a=e[s].nodeType,e[s]["s-hn"]!==r["s-hn"]||o!==""){if(a===1&&o===e[s].getAttribute("slot")){r.hidden=!0;break}}else if(a===1||a===3&&e[s].textContent.trim()!==""){r.hidden=!0;break}}zM(r)}},fr=[],jM=t=>{let e,r,i,n,s,o,a=0;const u=t.childNodes,h=u.length;for(;a<h;a++){if(e=u[a],e["s-sr"]&&(r=e["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,n=e["s-sn"],o=i.length-1;o>=0;o--)r=i[o],!r["s-cn"]&&!r["s-nr"]&&r["s-hn"]!==e["s-hn"]&&(fv(r,n)?(s=fr.find(f=>f.$nodeToRelocate$===r),gd=!0,r["s-sn"]=r["s-sn"]||n,s?s.$slotRefNode$=e:fr.push({$slotRefNode$:e,$nodeToRelocate$:r}),r["s-sr"]&&fr.map(f=>{fv(f.$nodeToRelocate$,r["s-sn"])&&(s=fr.find(p=>p.$nodeToRelocate$===r),s&&!f.$slotRefNode$&&(f.$slotRefNode$=s.$slotRefNode$))})):fr.some(f=>f.$nodeToRelocate$===r)||fr.push({$nodeToRelocate$:r}));e.nodeType===1&&jM(e)}},fv=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",WM=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(WM)},L$=(t,e)=>{const r=t.$hostElement$,i=t.$cmpMeta$,n=t.$vnode$||_d(null,null),s=b$(e)?e:DM(null,null,e);ff=r.tagName,i.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},i.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=r[o])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=n.$elm$=r.shadowRoot||r,Oo=r["s-sc"],RM=r["s-cr"],NM=(i.$flags$&1)!==0,gd=!1,xo(n,s);{if(it.$flags$|=1,z0){jM(s.$elm$);let o,a,u,h,f,p,m=0;for(;m<fr.length;m++)o=fr[m],a=o.$nodeToRelocate$,a["s-ol"]||(u=_r.createTextNode(""),u["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=u,a));for(m=0;m<fr.length;m++)if(o=fr[m],a=o.$nodeToRelocate$,o.$slotRefNode$){for(h=o.$slotRefNode$.parentNode,f=o.$slotRefNode$.nextSibling,u=a["s-ol"];u=u.previousSibling;)if(p=u["s-nr"],p&&p["s-sn"]===a["s-sn"]&&h===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){f=p;break}(!f&&h!==a.parentNode||a.nextSibling!==f)&&a!==f&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),h.insertBefore(a,f))}else a.nodeType===1&&(a.hidden=!0)}gd&&zM(s.$elm$),it.$flags$&=-2,fr.length=0}},R$=(t,e)=>{},B0=(t,e)=>(t.$flags$|=16,R$(t,t.$ancestorComponent$),iF(()=>N$(t,e))),N$=(t,e)=>{const r=t.$hostElement$,i=no("scheduleUpdate",t.$cmpMeta$.$tagName$),n=r;let s;return e?s=jo(n,"componentWillLoad"):s=jo(n,"componentWillUpdate"),s=pv(s,()=>jo(n,"componentWillRender")),i(),pv(s,()=>D$(t,n,e))},D$=async(t,e,r)=>{const i=t.$hostElement$,n=no("update",t.$cmpMeta$.$tagName$);i["s-rc"],r&&O$(t);const s=no("render",t.$cmpMeta$.$tagName$);$$(t,e,i),s(),n(),F$(t)},$$=(t,e,r)=>{try{ov=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Io.hasRenderFn||Io.reflect)&&(Io.vdomRender||Io.reflect)&&(Io.hydrateServerSide||L$(t,e))}catch(a){qc(a,t.$hostElement$)}return ov=null,null},F$=t=>{const e=t.$cmpMeta$.$tagName$,r=t.$hostElement$,i=no("postUpdate",e),n=r;t.$ancestorComponent$,jo(n,"componentDidRender"),t.$flags$&64?(jo(n,"componentDidUpdate"),i()):(t.$flags$|=64,jo(n,"componentDidLoad"),i())},JW=t=>{{const e=Hc(t),r=e.$hostElement$.isConnected;return r&&(e.$flags$&18)===2&&B0(e,!1),r}},jo=(t,e,r)=>{if(t&&t[e])try{return t[e](r)}catch(i){qc(i)}},pv=(t,e)=>t&&t.then?t.then(e):e(),U$=(t,e)=>Hc(t).$instanceValues$.get(e),V$=(t,e,r,i)=>{const n=Hc(t),s=t,o=n.$instanceValues$.get(e),a=n.$flags$,u=s;r=M$(r,i.$members$[e][0]);const h=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!h){n.$instanceValues$.set(e,r);{if(i.$watchers$&&a&128){const p=i.$watchers$[e];p&&p.map(m=>{try{u[m](r,o,e)}catch(y){qc(y,s)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(r,o,e)===!1)return;B0(n,!1)}}}},G$=(t,e,r)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const i=Object.entries(e.$members$),n=t.prototype;i.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return U$(this,s)},set(a){V$(this,s,a,e)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,u){it.jmp(()=>{const h=s.get(o);if(this.hasOwnProperty(h))u=this[h],delete this[h];else if(n.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;this[h]=u===null&&typeof this[h]=="boolean"?!1:u})},t.observedAttributes=i.filter(([o,a])=>a[0]&15).map(([o,a])=>{const u=a[1]||o;return s.set(u,o),a[0]&512&&e.$attrsToReflect$.push([o,u]),u})}}return t},z$=async(t,e,r,i,n)=>{if(!(e.$flags$&32)&&(n=t.constructor,e.$flags$|=32,customElements.whenDefined(r.$tagName$).then(()=>e.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[e.$modeName$=E$(t)]);const a=$M(r,e.$modeName$);if(!vd.has(a)){const u=no("registerStyles",r.$tagName$);A$(a,o,!!(r.$flags$&1)),u()}}e.$ancestorComponent$,(()=>B0(e,!0))()},j$=t=>{},W$=t=>{if(!(it.$flags$&1)){const e=Hc(t),r=e.$cmpMeta$,i=no("connectedCallback",r.$tagName$);e.$flags$&1?(BM(t,e,r.$listeners$),j$(e.$lazyInstance$)):(e.$flags$|=1,r.$flags$&12&&B$(t),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),z$(t,e,r)),i()}},B$=t=>{const e=t["s-cr"]=_r.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},H$=t=>{if(!(it.$flags$&1)){const e=Hc(t);e.$rmListeners$&&(e.$rmListeners$.map(r=>r()),e.$rmListeners$=void 0)}},KW=(t,e)=>{const r={$flags$:e[0],$tagName$:e[1]};r.$members$=e[2],r.$listeners$=e[3],r.$watchers$=t.$watchers$,r.$attrsToReflect$=[];const i=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){J$(this,r)},connectedCallback(){W$(this),i&&i.call(this)},disconnectedCallback(){H$(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)})}}),t.is=r.$tagName$,G$(t,r)},XW=(t,e)=>e,BM=(t,e,r,i)=>{r&&r.map(([n,s,o])=>{const a=Z$(t,n),u=q$(e,o),h=Y$(n);it.ael(a,s,u,h),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>it.rel(a,s,u,h))})},q$=(t,e)=>r=>{try{Io.lazyLoad||t.$hostElement$[e](r)}catch(i){qc(i)}},Z$=(t,e)=>e&4?_r:e&8?Zc:e&16?_r.body:t,Y$=t=>X$?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,HM=new WeakMap,Hc=t=>HM.get(t),J$=(t,e)=>{const r={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return BM(t,r,e.$listeners$),HM.set(t,r)},mv=(t,e)=>e in t,qc=(t,e)=>(0,console.error)(t,e),vd=new Map,K$=[],Zc=typeof window<"u"?window:{},_r=Zc.document||{head:{}},QW=Zc.HTMLElement||class{},it={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,r,i)=>t.addEventListener(e,r,i),rel:(t,e,r,i)=>t.removeEventListener(e,r,i),ce:(t,e)=>new CustomEvent(t,e)},X$=(()=>{let t=!1;try{_r.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Q$=t=>Promise.resolve(t),eF=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),yv=[],qM=[],tF=(t,e)=>r=>{t.push(r),zy||(zy=!0,e&&it.$flags$&4?rF(jy):it.raf(jy))},gv=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(r){qc(r)}t.length=0},jy=()=>{gv(yv),gv(qM),(zy=yv.length>0)&&it.raf(jy)},rF=t=>Q$().then(t),iF=tF(qM,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const ZM="calcite-mode-auto",YM="calcite-mode-dark",nF="calcite-mode-light",eB={autoMode:ZM,darkMode:YM,lightMode:nF,rtl:"calcite--rtl"};/*!
* tabbable 6.1.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var JM=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bd=JM.join(","),KM=typeof Element>"u",so=KM?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Sd=!KM&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Td=function t(e,r){var i;r===void 0&&(r=!0);var n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),s=n===""||n==="true",o=s||r&&e&&t(e.parentNode);return o},sF=function(e){var r,i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"contenteditable");return i===""||i==="true"},XM=function(e,r,i){if(Td(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(bd));return r&&so.call(e,bd)&&n.unshift(e),n=n.filter(i),n},QM=function t(e,r,i){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!Td(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),u=a.length?a:o.children,h=t(u,!0,i);i.flatten?n.push.apply(n,h):n.push({scopeParent:o,candidates:h})}else{var f=so.call(o,bd);f&&i.filter(o)&&(r||!e.includes(o))&&n.push(o);var p=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),m=!Td(p,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(p&&m){var y=t(p===!0?o.children:p.children,!0,i);i.flatten?n.push.apply(n,y):n.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return n},eP=function(e,r){return e.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||sF(e))&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},oF=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},tP=function(e){return e.tagName==="INPUT"},aF=function(e){return tP(e)&&e.type==="hidden"},lF=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return r},cF=function(e,r){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===r)return e[i]},uF=function(e){if(!e.name)return!0;var r=e.form||Sd(e),i=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=i(window.CSS.escape(e.name));else try{n=i(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=cF(n,e.form);return!s||s===e},hF=function(e){return tP(e)&&e.type==="radio"},dF=function(e){return hF(e)&&!uF(e)},fF=function(e){var r,i=e&&Sd(e),n=(r=i)===null||r===void 0?void 0:r.host,s=!1;if(i&&i!==e){var o,a,u;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&n;){var h,f,p;i=Sd(n),n=(h=i)===null||h===void 0?void 0:h.host,s=!!((f=n)!==null&&f!==void 0&&(p=f.ownerDocument)!==null&&p!==void 0&&p.contains(n))}}return s},_v=function(e){var r=e.getBoundingClientRect(),i=r.width,n=r.height;return i===0&&n===0},pF=function(e,r){var i=r.displayCheck,n=r.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=so.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(so.call(o,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var u=e.parentElement,h=Sd(e);if(u&&!u.shadowRoot&&n(u)===!0)return _v(e);e.assignedSlot?e=e.assignedSlot:!u&&h!==e.ownerDocument?e=h.host:e=u}e=a}if(fF(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return _v(e);return!1},mF=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var n=r.children.item(i);if(n.tagName==="LEGEND")return so.call(r,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}r=r.parentElement}return!1},Ed=function(e,r){return!(r.disabled||Td(r)||aF(r)||pF(r,e)||lF(r)||mF(r))},Wy=function(e,r){return!(dF(r)||eP(r)<0||!Ed(e,r))},yF=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},gF=function t(e){var r=[],i=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,u=eP(a,o),h=o?t(n.candidates):a;u===0?o?r.push.apply(r,h):r.push(a):i.push({documentOrder:s,tabIndex:u,item:n,isScope:o,content:h})}),i.sort(oF).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(r)},_F=function(e,r){r=r||{};var i;return r.getShadowRoot?i=QM([e],r.includeContainer,{filter:Wy.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:yF}):i=XM(e,r.includeContainer,Wy.bind(null,r)),gF(i)},tB=function(e,r){r=r||{};var i;return r.getShadowRoot?i=QM([e],r.includeContainer,{filter:Ed.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):i=XM(e,r.includeContainer,Ed.bind(null,r)),i},rB=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return so.call(e,bd)===!1?!1:Wy(r,e)},wF=JM.concat("iframe").join(","),iB=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return so.call(e,wF)===!1?!1:Ed(r,e)};const vF={getShadowRoot:!0};function nB(t){const e="dir",r=`[${e}]`,i=bF(t,r);return i?i.getAttribute(e):"ltr"}function sB(t,e,r){const i=`[${e}]`,n=t.closest(i);return n?n.getAttribute(e):r}function rP(t){return t.getRootNode()}function iP(t){return t.host||null}function oB(t,{selector:e,id:r}){function i(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const s=rP(n),o=r?"getElementById"in s?s.getElementById(r):null:e?s.querySelector(e):null,a=iP(s);return o||(a?i(a):null)}return i(t)}function bF(t,e){function r(i){return i?i.closest(e)||r(iP(rP(i))):null}return r(t)}function SF(t,e){return nP(t,e)}function nP(t,e){if(!t)return;const r=e(t);if(r!==void 0)return r;const{parentNode:i}=t;return nP(i instanceof ShadowRoot?i.host:i,e)}function aB(t,e){return!!SF(e,r=>r===t?!0:void 0)}function TF(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function lB(t){if(t)return TF(t)?t.setFocus():t.focus()}function cB(t){t&&(_F(t,vF)[0]||t).focus()}const Mc=":not([slot])";function uB(t,e,r){e&&!Array.isArray(e)&&typeof e!="string"&&(r=e,e=null);const i=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:Mc;return r!=null&&r.all?EF(t,i,r):MF(t,i,r)}function sP(t,e){return t?Array.from(t.children||[]).filter(r=>r==null?void 0:r.matches(e)):[]}function EF(t,e,r){let i=e===Mc?sP(t,Mc):Array.from(t.querySelectorAll(e));i=r&&r.direct===!1?i:i.filter(s=>s.parentElement===t),i=r!=null&&r.matches?i.filter(s=>s==null?void 0:s.matches(r.matches)):i;const n=r==null?void 0:r.selector;return n?i.map(s=>Array.from(s.querySelectorAll(n))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):i}function MF(t,e,r){let i=e===Mc?sP(t,Mc)[0]||null:t.querySelector(e);i=r&&r.direct===!1||(i==null?void 0:i.parentElement)===t?i:null,i=r!=null&&r.matches?i!=null&&i.matches(r.matches)?i:null:i;const n=r==null?void 0:r.selector;return n?i==null?void 0:i.querySelector(n):i}function hB(t,e,r){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[r]}function dB(t){return(!!t).toString()}function fB(t){return!!PF(t).length}function PF(t){return t.target.assignedElements({flatten:!0})}function pB(t){return!!(t.isPrimary&&t.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */function wv(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>t.contains(YM)||t.contains(ZM)&&e?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function CF(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?wv():document.addEventListener("DOMContentLoaded",()=>wv(),{once:!0}))}const AF=CF;AF();let By;C("esri-disable-components-assets-path")||(By="components/assets");function IF(){By&&m$(Bt(ae(By)))}function mB(t){var r;const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push((r=t[i])==null?void 0:r.call(t));return Promise.all(e)}const oP=Symbol("widget"),OF=Symbol("widget-test-data"),xF=[],kF={},Md=new WeakMap;function aP(t,e){let r=e.children;if(r&&r.length)for(let n=0;n<r.length;++n)r[n]=aP(t,r[n]);else r=xF;const i=e.vnodeSelector;if(H0(i)){const n=e.properties||kF,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:LF,afterUpdate:RF,afterRemoved:lP,parentWidget:t,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return e}function LF(t,e,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,Md.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),i._internalHandles.add(ga(()=>lP(t)))}function RF(t,e,r,{widgetProperties:i}){var s;const n=Md.get(t);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,t))}function lP(t){var r;const e=Md.get(t);e&&((r=e.afterRemoved)==null||r.call(e,e,t),e.destroy(),Md.delete(t))}function H0(t){return typeof t=="function"&&t[oP]}const vv=new Set;function NF(t){vv.add(t),t.finally(()=>vv.delete(t))}var cP;const DF="esri.widgets.Widget";let $F=0;const FF={widgetIcon:"esri-icon-checkbox-unchecked"};function uP(t,e){for(const r in e)t[r]!=null&&(typeof t[r]=="object"&&typeof e[r]=="object"?uP(t[r],e==null?void 0:e[r]):t[r]=e[r]);return t}const UF=p$({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,r=/capture$/i;t.eventHandlerInterceptor=(i,n,s,o)=>{const a=e==null?void 0:e(i,n,s,o),u=r.test(i);if(i=i.replace(r,""),!(i.toLowerCase()in s)||u){const p=i[2].toLowerCase()+i.slice(3),m=v=>a==null?void 0:a.call(s,v);s.addEventListener(p,m,u);const y=()=>s.removeEventListener(p,m,u),_=o.afterRemoved;o.afterRemoved=v=>{_==null||_(v),y()}}return a}},handleInterceptedEvent(t,e,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const u=e.properties;(!u||!(a in u))&&(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,!u||!(a in u))||(RT(),t.scheduleRender(),u[a].call(u.bind||r,i))}});let yp=!1,We=class extends cg(Hn.EventedAccessor){constructor(e,r){super(e,r),this._attached=!1,this._internalHandles=new Vi,this._projector=UF,this._readyForTrueRender=!1,this.iconClass=FF.widgetIcon,this.icon=null,this.key=this,this._loadLocale=g3(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await uo(this._messageBundleProps.map(async({bundlePath:a,propertyName:u})=>{if(this.destroyed)return;let h=await PS(a);this.uiStrings&&Object.keys(this.uiStrings)&&(h=uP(x(h),this.uiStrings)),this[u]=h}));if(this.destroyed)return;for(const a of o)a.error&&k.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),IF();const i="esri-widget-uid-"+LM(),n=this.render.bind(this);this._trackingTarget=new Fd(()=>this.scheduleRender());const s=()=>{var p;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=n();let{properties:a}=o;a||(o.properties=a={});let{key:u,styles:h}=a;u||(a.key=i),h||(a.styles=h={}),h.display||(h.display="");let f=0;return(p=o.children)==null||p.forEach(m=>{if(H0(m.vnodeSelector))return;let{properties:y}=m;y||(m.properties=y={}),y.key||(y.key=`${this.id}--${f++}`)}),aP(this,o)};this.render=()=>{if(yp)return s();let o=mN(this)??null;if(o)return o;this._trackingTarget.clear(),yp=!0;try{o=Si(this._trackingTarget,s)}catch(a){throw console.error(a),a}finally{yp=!1}return o&&yN(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),NF(this._resourcesFetch)}normalizeCtorArgs(e,r){const i={...e};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(s_)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Ce(this._trackingTarget),Ce(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,zf(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return g0(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+$F++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(cP=oP,OF)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(zf(this),this._projector.scheduleRender())}classes(...e){return bN.apply(this,e)}renderNow(){zf(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this._internalHandles.add(Z(()=>this.viewModel,(i,n)=>{n&&this._internalHandles.remove("delegated-events"),i&&Nd(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>Dd(i,s,o=>{this.emit(s,o)})),"delegated-events")},tt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(s_),this.scheduleRender()};this._internalHandles.add([SS(e),Z(()=>this.uiStrings,e),Ln(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=e==null?void 0:e.parentNode)==null||r.removeChild(e)}};We[cP]=!0;c([d()],We.prototype,"_readyForTrueRender",void 0);c([d({value:null})],We.prototype,"container",null);c([wt("container")],We.prototype,"castContainer",null);c([d()],We.prototype,"iconClass",void 0);c([d()],We.prototype,"icon",void 0);c([d()],We.prototype,"id",null);c([d()],We.prototype,"label",null);c([d()],We.prototype,"renderable",null);c([d()],We.prototype,"uiStrings",void 0);c([d()],We.prototype,"viewModel",void 0);c([d({value:!0})],We.prototype,"visible",null);c([d()],We.prototype,"key",void 0);c([d()],We.prototype,"children",void 0);c([d()],We.prototype,"afterCreate",void 0);c([d()],We.prototype,"afterUpdate",void 0);c([d()],We.prototype,"afterRemoved",void 0);We=c([T(DF)],We);const xa=We;function bv(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function VF(t,e){return t.length!==e.length||t.some((r,i)=>r.text!==e[i].text)}function Ja(t,e,r){if(!r||!e)return;t.find(n=>n.layerView===e&&n.text===r)||t.push({text:r,layerView:e})}function GF(t){return t.type==="bing-maps"}const di=[];let da=class extends id{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ee,this.view=null,this._allLayerViewsChange=r=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(n=>Z(()=>{var s;return[n.suspended,(s=n.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),r&&r.removed&&r.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([cc(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ln(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,r=e==null?void 0:e.allLayerViews;if(di.length=0,!e||!r){this._clear();return}r.forEach(i=>{var o;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const n=i.layer;if(bv(n,"user")){Ja(di,i,n.copyright);return}if(n.hasAttributionData){if(this._fetchedAttributionData.has(i)){const a=this._fetchedAttributionData.get(i);a?Ja(di,i,this._getDynamicAttribution(a,e,n)):bv(n)&&Ja(di,i,n.copyright);return}this._fetchAttributionData(i);return}const s=n.get("portalItem.accessInformation");if(s){Ja(di,i,s);return}Ja(di,i,n.copyright)}),VF(this.items,di)&&(this.items.removeAll(),this.items.addMany(di)),di.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const r=await Bb(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=r.ok?this._createContributionIndex(r.value,GF(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,r){const i=e.contributors,n={};if(!i)return n;for(let o=0;o<i.length;o++){const a=i[o],u=a.coverageAreas;if(!u)return;for(const h of u){const f=h.bbox,p=h.zoomMin-(r&&h.zoomMin?1:0),m=h.zoomMax-(r&&h.zoomMax?1:0),y=new Me({xmin:f[1],ymin:f[0],xmax:f[3],ymax:f[2],spatialReference:_e.WGS84}),_={extent:yl(y),attribution:a.attribution||"",score:h.score!=null?h.score:100,id:o};for(let v=p;v<=m;v++){var s;n[s=v]??(n[s]=[]),n[v].push(_)}}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,r,i){var f;const{extent:n,scale:s}=r;let o=((f=i.tileInfo)==null?void 0:f.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],u=jd(n.center.clone().normalize(),r.spatialReference),h=new Set;return a?a.filter(p=>{const m=p.id,y=!h.has(m)&&u&&p.extent&&Wd(p.extent,u);return y&&h.add(m),y}).sort((p,m)=>m.score-p.score||p.objectId-m.objectId).map(p=>p.attribution).join(", "):""}};c([d({readOnly:!0,type:ee})],da.prototype,"items",void 0);c([d({readOnly:!0})],da.prototype,"state",null);c([d()],da.prototype,"view",void 0);da=c([T("esri.widgets.Attribution.AttributionViewModel")],da);const hP=da;function Yc(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:jF(t[e])}}}function zF(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function jF(t){return function(e,...r){if(zF(e)){AN(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click());return}t.call(this,e,...r)}}function Jc(t){return(e,r)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:r})}}var WF=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},dP=function(t,e){for(var r=0,i=t.length;r<i;r++){var n=t[r];Array.isArray(n)?dP(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=WF(n)),e.push(n))}},BF=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:r[0],domNode:null};var n=[];return dP(r,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function Be(t,e,...r){return typeof t=="function"&&!H0(t)?t(e,...r):BF(t,e,...r)}const Eo="esri-attribution",en={base:`${Eo} esri-widget`,poweredBy:`${Eo}__powered-by`,sources:`${Eo}__sources`,open:`${Eo}--open`,sourcesOpen:`${Eo}__sources--open`,link:`${Eo}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ht=class extends xa{constructor(e,r){super(e,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=en.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new hP}initialize(){this.addHandles(cc(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,r)=>(e.includes(r.text)||e.push(r.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[en.open]:this._isOpen};return Be("div",{bind:this,class:this.classes(en.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return Be("div",{class:en.poweredBy},"Powered by"," ",Be("a",{class:en.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,r=this._isInteractive,i=r?"0":"",{attributionText:n}=this,s={[en.sourcesOpen]:e,[en.interactive]:r};return Be("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(en.sources,s),innerHTML:n,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const u=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,u&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],ht.prototype,"_isOpen",void 0);c([d()],ht.prototype,"_isInteractive",null);c([d()],ht.prototype,"_attributionTextOverflowed",void 0);c([d()],ht.prototype,"_prevSourceNodeHeight",void 0);c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ht.prototype,"attributionText",null);c([d()],ht.prototype,"iconClass",void 0);c([d()],ht.prototype,"icon",void 0);c([d()],ht.prototype,"itemDelimiter",void 0);c([d()],ht.prototype,"label",null);c([d(),Jc("esri/widgets/Attribution/t9n/Attribution")],ht.prototype,"messages",void 0);c([d()],ht.prototype,"view",null);c([d({type:hP})],ht.prototype,"viewModel",void 0);c([Yc()],ht.prototype,"_toggleState",null);ht=c([T("esri.widgets.Attribution")],ht);const HF=ht,fP=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:n}=this;return Nv(n),this.goToOverride?this.goToOverride(n,i):n.goTo(i.target,i.options)}};return c([d()],e.prototype,"goToOverride",void 0),c([d()],e.prototype,"view",void 0),e=c([T("esri.widgets.support.GoTo")],e),e},qF="esri.widgets.CompassViewModel";let oo=class extends fP(z){constructor(e){super(e),this._handles=new Vi,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Z(()=>this.view,this._updateRotationWatcher,tt))}destroy(){xe(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!!(e&&(e.isWebMercator||e.isGeographic))}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var r;if(!this.get("view.ready"))return;const e={};((r=this.view)==null?void 0:r.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const r=-e.heading;this.orientation={x:0,y:0,z:r}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Z(()=>e==null?void 0:e.rotation,this._updateForRotation,tt):Z(()=>e==null?void 0:e.camera,this._updateForCamera,tt))}};c([d({readOnly:!0})],oo.prototype,"canShowNorth",null);c([d()],oo.prototype,"orientation",void 0);c([d({readOnly:!0})],oo.prototype,"state",null);c([d()],oo.prototype,"view",void 0);oo=c([T(qF)],oo);const pP=oo,tn={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Ar=class extends xa{constructor(e,r){super(e,r),this.iconClass=tn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new pP}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:r}=this.viewModel,i=r==="disabled",n=r==="rotation"?"rotation":"compass",s=n==="compass",o=i?-1:0,a={[tn.disabled]:i,[tn.interactive]:!i},u={[tn.northIcon]:s,[tn.rotationIcon]:!s},{messages:h}=this;return Be("div",{bind:this,class:this.classes(tn.base,a),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:o,"aria-label":h.reset,title:h.reset},Be("span",{"aria-hidden":"true",class:this.classes(tn.icon,u),styles:this._toRotationTransform(e)}),Be("span",{class:tn.text},h.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};c([d()],Ar.prototype,"goToOverride",null);c([d()],Ar.prototype,"iconClass",void 0);c([d()],Ar.prototype,"icon",void 0);c([d()],Ar.prototype,"label",null);c([d(),Jc("esri/widgets/Compass/t9n/Compass")],Ar.prototype,"messages",void 0);c([d()],Ar.prototype,"view",null);c([d({type:pP})],Ar.prototype,"viewModel",void 0);c([Yc()],Ar.prototype,"_reset",null);Ar=c([T("esri.widgets.Compass")],Ar);const ZF=Ar,Mo="esri-navigation-toggle",Gt={base:`${Mo} esri-widget`,button:`${Mo}__button esri-widget--button`,activeButton:`${Mo}__button--active`,panButton:`${Mo}__button--pan`,rotateButton:`${Mo}__button--rotate`,isLayoutHorizontal:`${Mo}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let fa=class extends z{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Ln(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){const e=this.get("view.inputManager");e.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};c([d({readOnly:!0})],fa.prototype,"state",null);c([d()],fa.prototype,"navigationMode",void 0);c([d()],fa.prototype,"view",void 0);fa=c([T("esri.widgets.NavigationToggleViewModel")],fa);const mP=fa;let Ir=class extends xa{constructor(e,r){super(e,r),this.iconClass=Gt.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new mP}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",r=this.get("viewModel.navigationMode")==="pan",i={[Gt.disabled]:e,[Gt.isLayoutHorizontal]:this.layout==="horizontal"},n={[Gt.activeButton]:r},s={[Gt.activeButton]:!r},o=e?-1:0,a=this.messages.toggle;return Be("div",{bind:this,class:this.classes(Gt.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},Be("div",{class:this.classes(Gt.button,Gt.panButton,n)},Be("span",{class:Gt.panIcon})),Be("div",{class:this.classes(Gt.button,Gt.rotateButton,s)},Be("span",{class:Gt.rotationIcon})))}_toggle(){this.toggle()}};c([d()],Ir.prototype,"iconClass",void 0);c([d()],Ir.prototype,"icon",void 0);c([d()],Ir.prototype,"label",null);c([d({value:"vertical"})],Ir.prototype,"layout",null);c([d(),Jc("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ir.prototype,"messages",void 0);c([d()],Ir.prototype,"view",null);c([d({type:mP})],Ir.prototype,"viewModel",void 0);c([Yc()],Ir.prototype,"_toggle",null);Ir=c([T("esri.widgets.NavigationToggle")],Ir);const YF=Ir,Ka={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Fi=class extends xa{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,r={[Ka.disabled]:!this.enabled,[Ka.interactive]:this.enabled};return Be("div",{bind:this,class:this.classes(Ka.button,r),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},Be("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Ka.icon,this.iconClass??"")}),Be("span",{class:Ka.iconText},this.title))}_triggerAction(){this.action.call(this)}};c([d()],Fi.prototype,"action",void 0);c([d()],Fi.prototype,"enabled",void 0);c([d()],Fi.prototype,"iconClass",void 0);c([d()],Fi.prototype,"icon",void 0);c([d()],Fi.prototype,"title",void 0);c([Yc()],Fi.prototype,"_triggerAction",null);Fi=c([T("esri.widgets.IconButton")],Fi);const Sv=Fi;let pa=class extends z{get canZoomIn(){if(!this.get("view.ready"))return!1;const r=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||r>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const r=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||r<i}};c([d({readOnly:!0})],pa.prototype,"canZoomIn",null);c([d({readOnly:!0})],pa.prototype,"canZoomOut",null);c([d()],pa.prototype,"view",void 0);pa=c([T("esri.widgets.Zoom.ZoomConditions2D")],pa);const JF=pa;let ma=class extends z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],ma.prototype,"canZoomIn",null);c([d({readOnly:!0})],ma.prototype,"canZoomOut",null);c([d()],ma.prototype,"view",void 0);ma=c([T("esri.widgets.Zoom.ZoomConditions3D")],ma);const KF=ma;let jn=class extends z{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new JF({view:e}):e.type==="3d"&&(this._zoomConditions=new KF({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():o_(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():o_(e.goTo({zoomFactor:.5}))}};c([d()],jn.prototype,"_zoomConditions",void 0);c([d()],jn.prototype,"canZoomIn",null);c([d()],jn.prototype,"canZoomOut",null);c([d({readOnly:!0})],jn.prototype,"state",null);c([d()],jn.prototype,"view",null);jn=c([T("esri.widgets.Zoom.ZoomViewModel")],jn);const yP=jn,Xa={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let ii=class extends xa{constructor(e,r){super(e,r),this.iconClass=Xa.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new yP}initialize(){this._zoomInButton=new Sv({action:this.zoomIn.bind(this),iconClass:Xa.zoomInIcon}),this._zoomOutButton=new Sv({action:this.zoomOut.bind(this),iconClass:Xa.zoomOutIcon})}destroy(){this._zoomInButton=Ce(this._zoomInButton),this._zoomOutButton=Ce(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,r={[Xa.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:n}=e;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=n;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,Be("div",{class:this.classes(Xa.base,r)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([d()],ii.prototype,"iconClass",void 0);c([d()],ii.prototype,"icon",void 0);c([d()],ii.prototype,"label",null);c([d({value:"vertical"})],ii.prototype,"layout",null);c([d(),Jc("esri/widgets/Zoom/t9n/Zoom")],ii.prototype,"messages",void 0);c([d()],ii.prototype,"view",null);c([d({type:yP})],ii.prototype,"viewModel",void 0);ii=c([T("esri.widgets.Zoom")],ii);const XF=ii;function QF(t){return(t==null?void 0:t.view)!==void 0}let Pd=class extends a${constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([Z(()=>this.components,this._componentsWatcher.bind(this),tt),Z(()=>this.view,this._updateViewAwareWidgets.bind(this),tt)])}_add(e,r,i,n){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,r,i,n)}_removeComponents(e){e.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(r=>{const i=this._find(r),n=i&&i.widget;QF(n)&&(n.view=e)})}_componentsWatcher(e,r){this._removeComponents(r),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(e){this.constructed&&e.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(e){const r=this._createWidget(e);if(r)return new th({id:e,node:r})}_createWidget(e){const{view:r}=this;switch(e){case"attribution":return new HF({view:r});case"compass":return new ZF({view:r});case"navigation-toggle":return new YF({view:r});case"zoom":return new XF({view:r})}}};c([d()],Pd.prototype,"components",void 0);Pd=c([T("esri.views.ui.DefaultUI")],Pd);const gP=Pd;let Cd=class extends gP{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],Cd.prototype,"components",void 0);Cd=c([T("esri.views.ui.2d.DefaultUI2D")],Cd);const _P=Cd;var Hy;let Ad=Hy=class extends G{constructor(e){super(e),this.color=new me([0,0,0,1])}clone(){return new Hy(x({color:this.color}))}};c([d({type:me,json:{write:!0}})],Ad.prototype,"color",void 0);Ad=Hy=c([T("esri.webmap.background.ColorBackground")],Ad);const e9=Ad;let wP,vP,bP,SP,TP,EP;async function t9(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([R(()=>import("./webglDeps-82dad2ea.js"),["assets/webglDeps-82dad2ea.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/ProgramTemplate-a52cdbf8.js","assets/programUtils-ef69e29a.js","assets/NestedMap-d4ac5d57.js"]),R(()=>import("./mapViewDeps-01977291.js"),["assets/mapViewDeps-01977291.js","assets/MagnifierPrograms-c89482f4.js","assets/_commonjsHelpers-725317a4.js","assets/WGLContainer-ce35e22a.js","assets/definitions-3f56d206.js","assets/VertexArrayObject-0dfc47a6.js","assets/TextureDescriptor-176a7a4b.js","assets/enums-08489827.js","assets/VertexElementDescriptor-24e04d97.js","assets/color-314cda1c.js","assets/enums-eb6e4255.js","assets/ProgramTemplate-a52cdbf8.js","assets/MaterialKey-dd7253d3.js","assets/utils-d96463b8.js","assets/heatmapUtils-dfe044d0.js","assets/vec4-3dd523e8.js","assets/vec4f64-efdcb593.js","assets/StyleDefinition-edaaf36e.js","assets/config-c06e4a6d.js","assets/GeometryUtils-0ab64fac.js","assets/Container-de9ca04e.js","assets/parser-e1ff8548.js","assets/earcut-db592379.js","assets/featureConversionUtils-d43c9f43.js","assets/OptimizedGeometry-af84d2ad.js","assets/OptimizedFeatureSet-5c82fe5a.js","assets/ExpandedCIM-b662abf2.js","assets/BidiEngine-cdaf024a.js","assets/GeometryUtils-26dde58c.js","assets/Rect-df8ea165.js","assets/quantizationUtils-b95043a5.js","assets/floatRGBA-498c3d22.js","assets/rasterizingUtils-200f1103.js","assets/pbf-03b64555.js","assets/imageutils-074193df.js","assets/Matcher-81f57da4.js","assets/visualVariablesUtils-862ca6c0.js","assets/visualVariablesUtils-7a227620.js","assets/tileUtils-fdb57ff2.js","assets/TurboLine-6daee102.js","assets/defaultsJSON-b396ba80.js","assets/LRUCache-9a513454.js","assets/MemCache-75bedf1f.js","assets/devEnvironmentUtils-e2e22b53.js","assets/styleUtils-514bbf43.js","assets/featureFlags-a86437c8.js","assets/CircularArray-7e036143.js","assets/DisjointTimerQuery-0b864cc8.js","assets/throttle-9d01e8e8.js","assets/ComputedAttributeStorage-533cb852.js","assets/FieldsIndex-58671a99.js","assets/arcadeTimeUtils-27f70e01.js","assets/executionError-e2eca390.js","assets/centroid-1116d1e7.js","assets/diffUtils-abe9f3bb.js","assets/lengthUtils-73ca5ae7.js","assets/sizeVariableUtils-2914222a.js","assets/BufferPool-dcc25426.js","assets/enums-977a0ba8.js","assets/programUtils-ef69e29a.js","assets/NestedMap-d4ac5d57.js","assets/RenderingContext-1c3d9a56.js","assets/OrderIndependentTransparency-01632ab9.js","assets/basicInterfaces-cc58f4ac.js","assets/doublePrecisionUtils-a59b69fa.js","assets/imageUtils-42075577.js","assets/GraphicsView2D-2fc8f638.js","assets/normalizeUtilsSync-4555589b.js","assets/normalizeUtilsCommon-82ae8352.js","assets/projectionSupport-45f570d1.js","assets/json-9ae8d6f8.js","assets/labelingInfo-0a4a299a.js","assets/labelUtils-d32d5ce0.js","assets/jsonUtils-b329e9d4.js","assets/AttributeStoreView-b0531df0.js","assets/TiledDisplayObject-25e69620.js","assets/schemaUtils-7534e523.js","assets/sql-4d7dca2e.js","assets/clusterUtils-223e1cf4.js","assets/SizeVariable-21c037cb.js","assets/colorRamps-a8ae4226.js","assets/LegendOptions-2499ed1a.js","assets/util-8d25177b.js","assets/normalizeUtils-e3f4b3bd.js","assets/GraphicContainer-265efb6d.js","assets/BaseGraphicContainer-2fd6522d.js","assets/FeatureContainer-f33fb2ab.js","assets/TileContainer-b741fbff.js","assets/vec3f32-ec4c3c20.js","assets/requestImageUtils-08c2be51.js"])]);vP=t,bP=e,SP=r,TP=i,EP=n,wP=s}const Tv=160;function r9(t){return t&&t.declaredClass==="esri.Viewpoint"}let W=class extends SR(iD(jN(V4))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Rl({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new w6(this),this._pePromise=null,this.floors=new ee,this.highlightOptions=new EM,this.inputManager=new S8({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new MM,this.type="2d",this.ui=new _P,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new bM,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Z(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Tv)},uc),this.on("resize",r=>this._resizeHandler(r)),Z(()=>{var r;return(r=this.animationManager)==null?void 0:r.animation},r=>{this.animation=r})]),NL()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Ce(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new O8(this.featuresTilingScheme)}get initialExtentRequired(){var a;const{scale:e,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint)||s||(r!=null&&r.effectiveLODs||(o=-1),i&&(e!==0||o!==-1))||n&&n.targetGeometry!=null&&(n.targetGeometry.type==="extent"||n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return Zs()?!0:(this._pePromise||(this._pePromise=Ys().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const r=this.spatialReference,i=e.targetGeometry;return!Nn(i.spatialReference,r)?this._projectionEngineLoaded:!0}set animation(e){const r=this._get("animation");if(e===r)return;if(r&&r.stop(),!e||e.isFulfilled()){this._set("animation",null);return}this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return n9(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:r}=this.state.paddedViewState;return new q({x:e[0],y:e[1],spatialReference:r})}set center(e){if(e==null)return;if(!this.ready){this._set("center",e),this.notifyChange("initialExtentRequired");return}let r;try{r=this._project(e,this.spatialReference)}catch(n){k.getLogger(this.declaredClass).error(new D("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}));return}const i=this.viewpoint;ky(i,i,r),this.viewpoint=i}set constraints(e){const r=this._get("constraints");r&&(this.handles.remove("map-view-constraints"),r.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Z(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},uc),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height){k.getLogger(this.declaredClass).error(new D("mapview:invalid-extent","invalid extent size"));return}if(!this.ready){this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");return}let r;try{r=this._project(e,this.spatialReference)}catch(n){k.getLogger(this.declaredClass).error(new D("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}));return}const i=this.viewpoint;i6(i,i,r,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){if(!this.ready){this._set("padding",e);return}this.state.padding=e,this._set("padding",this.state.padding)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready){this._set("rotation",e);return}const r=this.viewpoint;m6(r,r,e),this.viewpoint=r}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");i&&(this._set("extent",null),this._set("center",i.center)),this.notifyChange("initialExtentRequired");return}const r=this.viewpoint;F1(r,r,e),this.viewpoint=r}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}get updating(){var r,i,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(C("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(r=this.layerViewManager)==null?void 0:r.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready){this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired");return}let r,i;try{r=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new D("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(i=new D("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new D("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i){k.getLogger(this.declaredClass).error(i);return}this._scaleBeforeChangingSpatialReference=null;const n=new Vr({targetGeometry:new q,scale:0,rotation:0});xr(n,r),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");i&&(this._set("extent",null),this._set("center",i.center)),this.notifyChange("initialExtentRequired");return}if(!this.constraints.effectiveLODs){this._set("zoom",-1);return}const r=this.viewpoint;F1(r,r,this.constraints.zoomToScale(e)),this.viewpoint=r,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!!(this.mapViewNavigation&&this.mapViewNavigation.interacting)}goTo(e,r){if(!e){k.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined");return}return this.animation&&(this.animation=null),this._createAnimation(),c0(()=>this.ready,r).then(()=>{var s;const i={animate:!0,...r},n=e6(e,this);return(s=this.animation)==null||s.update(n),this._gotoTask={},i.animate?this._gotoAnimated(n,i):this._gotoImmediate(n,i)})}async hitTest(e,r){const i=O1(e)?I1(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set,s=!1,o=null,a=null;r!=null&&r.include?Mv(r.include,Ev(this,y=>n.add(y),y=>{o||(o=new Set),o.add(y)},y=>n.add(y),()=>s=!0)):(s=!0,n=new Set(this.allLayerViews)),r!=null&&r.exclude&&Mv(r.exclude,Ev(this,y=>n.delete(y),y=>{a||(a=new Set),a.add(y)}));const u=this.allLayerViews.filter(y=>!y.suspended&&n.has(y)).reverse(),h=this.toMap(i),f=s?this.graphicsView.hitTest(h).map(y=>({type:"graphic",graphic:y,layer:null,mapPoint:h})):[],p=await Promise.all(u.map(y=>y.hitTest(h,i)).toArray());let m=[...f,...p].filter(vn).flat().filter(vn);return o&&(m=m.filter(y=>!("graphic"in y)||!y.graphic||(o==null?void 0:o.has(qy(y.graphic))))),a&&(m=m.filter(y=>!("graphic"in y)||!y.graphic||!(a!=null&&a.has(qy(y.graphic))))),{screenPoint:i,results:m}}async takeScreenshot(e){const r=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(r);return L8(i,{format:r.format,quality:r.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const r=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(r);return R8(i,this._pixelFormat)}_createScreenshotPlan(e){e=e??{};const r=this.supersampleScreenshotsEnabled?Math.min(4,F8(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(u=>u.layer.id===o.id);a&&"container"in a&&a.container&&i.push(a.container)})):i=this._stage.children;const{format:n,quality:s}=$8(e.format,e.quality);return k8(e,r,this.size,this.padding,n,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const r=O1(e)?I1(this,e):e,i=[0,0],[n,s]=this.state.toMap(i,[r.x,r.y]),o=this.spatialReference;return new q({x:n,y:s,spatialReference:o})}toScreen(e){if(!this.ready)return null;const r=this._project(e,this.spatialReference),i=[r.x,r.y];return this.state.toScreen(i,i),mt(i[0],i[1])}on(e,r,i,n){const s=this.inputManager&&this.viewEvents.on(e,r,i,n);return s||super.on(e,r)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,r,i;return this.map&&"initialViewProperties"in this.map&&((r=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:r.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return V1.hasLayerViewModule(e)}importLayerView(e){return V1.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(k.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(r=>({...r,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=K8(this.type);return C("safari")&&C("safari")<9&&(e=new D("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:C("safari")})),e!=null?(k.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):t9()}_createAnimation(){return(!this.animation||this.animation.done)&&(this.animation=new xy),this.animation}_cancellableGoTo(e,r,i){const n=()=>e===this._gotoTask,s=i.then(()=>{n()&&(this.animation=null)}).catch(a=>{throw n()&&(r&&!r.done&&(r.stop(),this.frameTask.animationInProgress=!1),this.animation=null),a}),o=new Promise(a=>a(s));return r.when().catch(()=>{n()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,r){const i=this._gotoTask,n=this.animation,s=e.then(o=>{if(De(r),i!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s)}_flipStationary(e){return this._stationaryTimer!==null?this._stationaryTimer:(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const r=performance.now()-this._lastStationaryEventTimestamp;r<Tv&&(this._stationaryTimer=this._flipStationary(r))},e),this._stationaryTimer)}_getDefaultViewpoint(){var S,P,M,A;const{constraints:e,initialExtent:r,map:i,padding:n,size:s}=this;if(!e)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?a.zoom!==-1&&(a.scale=e.zoomToScale(a.zoom)):a.zoom=-1;let u=null,h=null,f=0;const p=a.viewpoint&&a.viewpoint.rotation,m=a.viewpoint&&a.viewpoint.targetGeometry;m!=null&&(m.type==="extent"?u=m:m.type==="point"&&(h=m,f=a.viewpoint.scale));const y=a.extent||u||((P=(S=o==null?void 0:o.viewpoint)==null?void 0:S.targetGeometry)==null?void 0:P.extent)||r,_=a.center||h||(y==null?void 0:y.center),v=a.scale||f||((M=o==null?void 0:o.viewpoint)==null?void 0:M.scale)||y&&Tl(y,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),w=a.rotation||p||((A=o==null?void 0:o.viewpoint)==null?void 0:A.rotation)||0;return!_||!v?null:new Vr({targetGeometry:_,scale:v,rotation:w})}_gotoAnimated(e,r){const i=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(De(r),i!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");return n.update(o),this.animationManager.animate(n,this.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s)}_project(e,r){var s;const i=e&&e.targetGeometry||e;if(!r)return e;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||ot(r,i.spatialReference))return e;const n=Ma(i,r);if(!n)throw new D("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return r9(e)?(e.targetGeometry=n,e):n}_resizeHandler(e){if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();r.size=[e.width,e.height],p6(i,i,n,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){var u,h;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),r=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(f){k.getLogger(this.declaredClass).warn(new Ei("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:r.toJSON(),spatialReference:this.spatialReference,error:f})),e.targetGeometry=((u=this.defaultsFromMap.extent)==null?void 0:u.center)||new q({x:0,y:0,spatialReference:this.spatialReference})}(h=this.constraints)==null||h.fit(e),this._set("state",new D6({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new wP(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new EP,this._magnifierView.magnifier=this.magnifier;const n=new SP({view:this});this._set("labelManager",n);const s=new _6({view:this});this._set("animationManager",s);const o=new TP({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",f=>this.fatalError=f.error),Z(()=>this.stationary,f=>i.stationary=f,rs),Z(()=>this.background,f=>{i.background=f,this._magnifierView.background=f},rs),Z(()=>this.magnifier,f=>this._magnifierView.magnifier=f,rs),Z(()=>this.renderingOptions,f=>i.renderingOptions=f,rs),Z(()=>this.highlightOptions,f=>i.highlightOptions=f,rs),Z(()=>this.state.id,()=>i.state=this.state,rs)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(f=>f(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new q({x:e,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this._stage.addChild(r.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new G6(vR.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const r=new vP({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new bP(e)});this.frameTask.graphicsView=r,this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const u of this.allLayerViews)u.processDetach();this._destroySpatialReferenceDependentProperties();const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const u=r.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=u}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new q({x:n,y:s,spatialReference:r.spatialReference}),e)}catch(u){Zs()||k.getLogger(this.declaredClass).warn(new Ei("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:u}))}o||(o=new q({x:0,y:0,spatialReference:e}));const a=ky(new Vr({targetGeometry:new q,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],p=r.toMap([0,0],f),{x:m,y}=this._project(new q({x:p[0],y:p[1],spatialReference:r.spatialReference}),e);p[0]=m,p[1]=y,i.toScreen(p,p);const _=d6(h,p,f),v=Math.hypot(p[0]-h[0],p[1]-h[1])/20;!Number.isFinite(v)||Math.abs(v)>4?(a.rotation=0,a.targetGeometry=new q({x:0,y:0,spatialReference:e})):(a.scale*=v,a.scale>C("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(_)?_:0)}catch{}this._get("constraints").constrain(a,void 0),this._get("state").viewpoint=a,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const u of this.allLayerViews)u.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};W.type="2d";c([d({readOnly:!0})],W.prototype,"animationManager",void 0);c([d({constructOnly:!0})],W.prototype,"deactivatedWebGLExtensions",void 0);c([d({constructOnly:!0})],W.prototype,"debugWebGLExtensions",void 0);c([d({readOnly:!0})],W.prototype,"featuresTilingScheme",void 0);c([d({readOnly:!0})],W.prototype,"fullOpacity",void 0);c([d({readOnly:!0})],W.prototype,"graphicsTileStore",null);c([d()],W.prototype,"graphicsView",void 0);c([d({readOnly:!0})],W.prototype,"state",void 0);c([d()],W.prototype,"initialExtentRequired",null);c([d()],W.prototype,"labelManager",void 0);c([d({readOnly:!0})],W.prototype,"resourceManager",null);c([d({readOnly:!0})],W.prototype,"textureManager",null);c([d({readOnly:!0})],W.prototype,"mapViewNavigation",void 0);c([d({constructOnly:!0})],W.prototype,"renderCanvas",void 0);c([d()],W.prototype,"renderingOptions",void 0);c([d({readOnly:!0})],W.prototype,"rendering",void 0);c([d({constructOnly:!0})],W.prototype,"supersampleScreenshotsEnabled",void 0);c([d({readOnly:!0})],W.prototype,"supportsGround",void 0);c([d()],W.prototype,"_stationaryTimer",void 0);c([d()],W.prototype,"_defaultsFromMapSettings",null);c([d()],W.prototype,"_pePromise",void 0);c([d({readOnly:!0})],W.prototype,"typeSpecificPreconditionsReady",null);c([d()],W.prototype,"animation",null);c([d({type:e9})],W.prototype,"background",null);c([d({value:null,type:q,dependsOn:["state.id","ready"]})],W.prototype,"center",null);c([d({type:bM})],W.prototype,"constraints",null);c([d({value:null,type:Me,dependsOn:["state.id","ready"]})],W.prototype,"extent",null);c([d()],W.prototype,"floors",void 0);c([d({type:EM})],W.prototype,"highlightOptions",void 0);c([d({readOnly:!0})],W.prototype,"inputManager",void 0);c([d()],W.prototype,"map",void 0);c([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],W.prototype,"padding",null);c([d()],W.prototype,"resizeAlign",void 0);c([d({readOnly:!0,dependsOn:["state.id"]})],W.prototype,"resolution",null);c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],W.prototype,"rotation",null);c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],W.prototype,"scale",null);c([d({constructOnly:!0})],W.prototype,"spatialReferenceLocked",void 0);c([d()],W.prototype,"stationary",null);c([d({type:MM,readOnly:!0})],W.prototype,"timeline",void 0);c([d({readOnly:!0})],W.prototype,"type",void 0);c([d({readOnly:!0})],W.prototype,"updating",null);c([d({value:null,type:Vr,dependsOn:["state.id","ready"]})],W.prototype,"viewpoint",null);c([d({value:-1,dependsOn:["state.id","ready"]})],W.prototype,"zoom",null);c([d({readOnly:!0})],W.prototype,"navigating",null);c([d(),wt(t=>t instanceof gP?t:ig(_P,t))],W.prototype,"ui",void 0);W=c([T("esri.views.MapView")],W);const i9=W;function qy(t){var r,i;const e=t.getObjectId();return e?`${((r=t.layer)==null?void 0:r.uid)??((i=t.sourceLayer)==null?void 0:i.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function Ev(t,e,r,i,n){return s=>{if(s instanceof lc){if(s.layer===t)n==null||n();else{const o=t.allLayerViews.find(a=>a.layer===s.layer);o&&(i==null||i(o))}r(qy(s))}else{const o=t.allLayerViews.find(a=>a.layer===s);o&&e(o)}}}function Mv(t,e){if(t)if(!rh(t))e(t);else for(const r of t)if(!rh(r))e(r);else for(const i of r)e(i)}function n9(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function s9(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const r=e._delegatedEventNames,i=Array.isArray(t)?t:o9(t);r.push(...i)}}function o9(t){return t.split(",").map(e=>e.trim())}new rt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new rt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let ao=class extends G{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};c([d({type:String,json:{write:!0}})],ao.prototype,"deviationUnit",void 0);c([d({json:{read:{reader:t=>t?t.map(e=>vr(e)).filter(vn):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(r=>r.toJSON()))??null}}}})],ao.prototype,"geometries",void 0);c([d({type:Number,json:{write:!0}})],ao.prototype,"maxDeviation",void 0);ao=c([T("esri.rest.support.GeneralizeParameters")],ao);ao.from=je(ao);new rt({preserveShape:"preserve-shape"});let Wn=class extends G{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};c([d({type:String,json:{write:!0}})],Wn.prototype,"calculationType",void 0);c([d({type:Boolean,json:{write:!0}})],Wn.prototype,"geodesic",void 0);c([d({json:{write:!0}})],Wn.prototype,"lengthUnit",void 0);c([d({type:[Sa],json:{read:{reader:t=>t?t.map(e=>vr(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(r=>r.toJSON())}}}})],Wn.prototype,"polylines",void 0);Wn=c([T("esri.rest.support.LengthsParameters")],Wn);Wn.from=je(Wn);new rt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new rt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Ui=class extends G{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};c([d({type:Number,json:{write:!0}})],Ui.prototype,"bevelRatio",void 0);c([d({json:{read:{reader:t=>t?t.map(e=>vr(e)).filter(vn):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(r=>r.toJSON()))??null}}}})],Ui.prototype,"geometries",void 0);c([d({type:Number,json:{write:!0}})],Ui.prototype,"offsetDistance",void 0);c([d({type:String,json:{write:!0}})],Ui.prototype,"offsetHow",void 0);c([d({type:String,json:{write:!0}})],Ui.prototype,"offsetUnit",void 0);Ui=c([T("esri.rest.support.OffsetParameters")],Ui);Ui.from=je(Ui);function a9(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function l9(t){return typeof t=="string"?Dt(t):x(t)}function c9(t,e,r){const i={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(!(s==null||typeof s=="function"))if(Array.isArray(s)){i[n]=[];for(let o=0;o<s.length;o++)i[n][o]=c9(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[n]);i[n]=e?o:JSON.stringify(o)}else i[n]=e?s:JSON.stringify(s);else i[n]=s}return i}function DB(t){return{geometryType:Lg(t[0]),geometries:t.map(e=>e.toJSON())}}function u9(t,e,r){const i=lx(e);return t.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}let lo=class extends G{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),r=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:Lg(r),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};c([d()],lo.prototype,"geometries",void 0);c([d({json:{read:{source:"outSR"}}})],lo.prototype,"outSpatialReference",void 0);c([d()],lo.prototype,"transformation",void 0);c([d()],lo.prototype,"transformForward",void 0);lo=c([T("esri.rest.support.ProjectParameters")],lo);const MP=lo,h9=je(MP);async function d9(t,e,r){e=h9(e);const i=l9(t),n={...i.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Lg(e.geometries[0]),a=a9(n,r);return yt(i.path+"/project",a).then(({data:{geometries:u}})=>u9(u,o,s))}new rt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Bn=class extends G{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};c([d({json:{read:{reader:t=>t?t.map(e=>vr(e)).filter(vn):null},write:{writer:(t,e)=>{e.geometries1=(t==null?void 0:t.map(r=>r.toJSON()))??null}}}})],Bn.prototype,"geometries1",void 0);c([d({json:{read:{reader:t=>t?t.map(e=>vr(e)).filter(vn):null},write:{writer:(t,e)=>{e.geometries2=(t==null?void 0:t.map(r=>r.toJSON()))??null}}}})],Bn.prototype,"geometries2",void 0);c([d({type:String,json:{write:!0}})],Bn.prototype,"relation",void 0);c([d({type:String,json:{write:!0}})],Bn.prototype,"relationParameter",void 0);Bn=c([T("esri.rest.support.RelationParameters")],Bn);Bn.from=je(Bn);new rt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let co=class extends G{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};c([d({type:String,json:{write:!0}})],co.prototype,"extendHow",void 0);c([d({type:[Sa],json:{read:{reader:t=>t?t.map(e=>vr(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(r=>r.toJSON())}}}})],co.prototype,"polylines",void 0);c([d({json:{read:{reader:t=>t?vr(t):null},write:{writer:(t,e)=>{e.trimExtendTo=t.toJSON()}}}})],co.prototype,"trimExtendTo",void 0);co=c([T("esri.rest.support.TrimExtendParameters")],co);co.from=je(co);const PP=k.getLogger("esri.widgets.support.geolocationUtils");function f9(){const t=C("esri-geolocation");return t||PP.warn("geolocation-unsupported","Geolocation unsupported."),t}function p9(){const t=window.isSecureContext;return t||PP.warn("insecure-context","Geolocation requires a secure origin."),t}function m9(){return f9()&&p9()}function y9(t,e){const{position:r,view:i}=t,n=g9(r),s=n==null?void 0:n.coords;if(!s)throw new D("geometry-service:no-coords","Geolocation has no coordinates");const o=_9(s);return w9(o,i,e)}function g9(t){const e=t&&t.coords||{},r={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:r,timestamp:t.timestamp}}function _9({longitude:t,latitude:e,altitude:r}){return new q({longitude:t,latitude:e,z:r||void 0,spatialReference:{wkid:4326}})}function w9(t,e,r){if(!e)return Promise.resolve(t);const i=e.spatialReference;return i.isWGS84?Promise.resolve(t):i.isWebMercator?Promise.resolve(yl(t)):v9(r).then(n=>{if(!n)throw new D("geometry-service:missing-url","Geometry service URL is missing");const s=new MP({geometries:[t],outSpatialReference:i});return d9(n,s,r).then(o=>o[0])})}function v9(t){if(se.geometryServiceUrl)return Promise.resolve(se.geometryServiceUrl);const e=Pi.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}const b9=2500,S9={type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},T9={type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},E9={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},M9=new Dc({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[S9,T9,E9],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let ni=class extends fP(Hn.EventedMixin(z)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new lc({symbol:M9}),this.scale=null,this.rotationDisabled=!1,this.view=null}initialize(){m9()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){const{view:e,graphic:r}=this;e&&r&&e.graphics.remove(r)}_getScaleWithinConstraints(e,r){if(!r)return e;if(r.type==="2d"){const{effectiveMaxScale:i,effectiveMinScale:n}=r.constraints;return Math.min(n,Math.max(i,e))}return e}_getScale(e){const{scale:r}=this,i=typeof r=="number"?r:b9;return this._getScaleWithinConstraints(i,e)}_getHeading(e,r){var o;const i=r==null?void 0:r.spatialReference,n=(i==null?void 0:i.isWebMercator)||(i==null?void 0:i.isGeographic),s=(o=e.coords)==null?void 0:o.heading;return!n||typeof s!="number"||isNaN(s)||s<0||s>360?null:s}_addHeading(e){const{heading:r,target:i,view:n}=e;if(!(!n||r===null)){if(n.type==="3d"){i.heading=r;return}n.type==="2d"&&(i.rotation=360-r)}}_animatePoint(e,r,i,n){const{view:s}=this;if(!this.goToLocationEnabled||!s)return Promise.resolve();const o={target:e,scale:r};return this.rotationDisabled||this._addHeading({heading:i,target:o,view:s}),this.callGoTo({target:o,options:n})}async _setPosition(e,r){try{const i=this.view,n=await y9({position:e,view:i},r),{graphic:s}=this,{timestamp:o,coords:a}=e,{accuracy:u,altitude:h,altitudeAccuracy:f,latitude:p,longitude:m,speed:y}=a,_=this._getHeading(e,i),v={timestamp:o,accuracy:u,altitude:h,altitudeAccuracy:f,heading:_,latitude:p,longitude:m,speed:y};s&&(s.geometry=n,s.attributes=v);const w=this._getScale(i);await this._animatePoint(n,w,_,r)}catch(i){throw new D("positioning:invalid-point","Cannot position invalid point",{error:i})}return e}};c([d()],ni.prototype,"_geolocationUsable",void 0);c([d()],ni.prototype,"geolocationOptions",void 0);c([d()],ni.prototype,"goToLocationEnabled",void 0);c([d({type:lc,nonNullable:!0})],ni.prototype,"graphic",void 0);c([d()],ni.prototype,"scale",void 0);c([d()],ni.prototype,"rotationDisabled",void 0);c([d()],ni.prototype,"view",void 0);ni=c([T("esri.widgets.support.GeolocationPositioning")],ni);const P9=ni,C9=15e3,A9="esri.widgets.Track.TrackViewModel";let Or=class extends P9{constructor(e){super(e),this._watchId=void 0,this._trackStartingTimeoutId=void 0,this._settingPosition=null,this.positionFilterFunction=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||this._trackStartingTimeoutId!==void 0?"waiting":this.tracking?"tracking":"ready":"feature-unsupported"}get tracking(){return this._watchId!==void 0}start(){this.state==="disabled"||this.state==="feature-unsupported"||this._startTracking()}stop(){this.state==="disabled"||this.state==="feature-unsupported"||this._stopTracking()}_stopWatchingPosition(){this._watchId!==void 0&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}_stopTracking(){this._clearWaitingTimer(),this._stopWatchingPosition(),this._clear()}_startTracking(){this._stopTracking();const e=async r=>{const{timestamp:i,coords:n}=r,s={latitude:n.latitude,longitude:n.longitude},o={timestamp:i,coords:s};try{if(typeof this.positionFilterFunction=="function"&&!this.positionFilterFunction.call(null,{position:o}))return;await this._setPosition(r),this._clearWaitingTimer();const{view:a,graphic:u}=this;if(a&&a.graphics.remove(u),u){const h=u.clone();this.graphic=h,a&&a.graphics.push(h)}this.emit("track",{position:r})}catch(a){throw this._emitError(a),this._clearWaitingTimer(),a}};this._watchId=navigator.geolocation.watchPosition(r=>{this._settingPosition=e(r)},this._handleWatchPositionError.bind(this),this.geolocationOptions??void 0),this._trackStartingTimeoutId=setTimeout(()=>{this._trackStartingTimeoutId=void 0},C9)}_handleWatchPositionError(e){e.code===e.PERMISSION_DENIED&&this._stopTracking(),this._emitError(e)}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=void 0,this._settingPosition=null}_emitError(e){this.emit("track-error",{error:e})}};c([d()],Or.prototype,"_watchId",void 0);c([d()],Or.prototype,"_trackStartingTimeoutId",void 0);c([d()],Or.prototype,"_settingPosition",void 0);c([d()],Or.prototype,"positionFilterFunction",void 0);c([d({readOnly:!0})],Or.prototype,"state",null);c([d({readOnly:!0})],Or.prototype,"tracking",null);c([d()],Or.prototype,"start",null);c([d()],Or.prototype,"stop",null);Or=c([T(A9)],Or);const CP=Or,Rr={base:"esri-track esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",startTrackingIcon:"esri-icon-tracking",stopTrackingIcon:"esri-icon-pause",widgetIcon:"esri-icon-tracking",disabled:"esri-disabled",hidden:"esri-hidden"},AP="esri.widgets.Track",Pv=k.getLogger(AP);let nt=class extends xa{constructor(e,r){super(e,r),this.iconClass=Rr.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new CP}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(e){this.viewModel.geolocationOptions=e}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(e){this.viewModel.goToLocationEnabled=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get rotationDisabled(){return this.viewModel.rotationDisabled}set rotationDisabled(e){this.viewModel.rotationDisabled=e}get scale(){return this.viewModel.scale}set scale(e){this.viewModel.scale=e}get tracking(){return this.viewModel.tracking}get useHeadingEnabled(){return __(Pv,"useHeadingEnabled",{replacement:"rotationDisabled",version:"4.27",warnOnce:!0}),!this.viewModel.rotationDisabled}set useHeadingEnabled(e){__(Pv,"useHeadingEnabled",{replacement:"rotationDisabled",version:"4.27",warnOnce:!0}),this.viewModel.rotationDisabled=!e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const e=this.get("viewModel.state"),r={[Rr.disabled]:e==="disabled",[Rr.hidden]:e==="feature-unsupported"},i=e==="tracking",n={[Rr.startTrackingIcon]:!i&&e!=="waiting",[Rr.stopTrackingIcon]:i,[Rr.rotating]:e==="waiting",[Rr.loading]:e==="waiting"},{messages:s}=this,o=(i?s==null?void 0:s.stopTracking:s==null?void 0:s.startTracking)??"";return Be("div",{bind:this,class:this.classes(Rr.base,r),hidden:e==="feature-unsupported",onclick:this._toggleTracking,onkeydown:this._toggleTracking,role:"button",tabIndex:0,"aria-label":o,title:o},Be("span",{"aria-hidden":"true",class:this.classes(Rr.icon,n)}),Be("span",{class:Rr.text},o))}_toggleTracking(){const e=this.viewModel;if(!(!e||e.state==="feature-unsupported"||e.state==="disabled")){if(e.state==="tracking"||e.state==="waiting"){this.viewModel.stop();return}this.viewModel.start()}}};c([d()],nt.prototype,"geolocationOptions",null);c([d()],nt.prototype,"goToLocationEnabled",null);c([d()],nt.prototype,"goToOverride",null);c([d()],nt.prototype,"graphic",null);c([d()],nt.prototype,"iconClass",void 0);c([d()],nt.prototype,"icon",void 0);c([d()],nt.prototype,"label",null);c([d(),Jc("esri/widgets/Track/t9n/Track")],nt.prototype,"messages",void 0);c([d()],nt.prototype,"rotationDisabled",null);c([d()],nt.prototype,"scale",null);c([d({readOnly:!0})],nt.prototype,"tracking",null);c([d()],nt.prototype,"useHeadingEnabled",null);c([d()],nt.prototype,"view",null);c([d({type:CP}),s9(["track","track-error"])],nt.prototype,"viewModel",void 0);c([Yc()],nt.prototype,"_toggleTracking",null);nt=c([T(AP)],nt);const I9=nt;console.log("Version",kc);const IP=document.getElementById("geolocationDiv"),O9=new a2({basemap:"topo-vector"}),pf=new i9({container:"viewDiv",map:O9,zoom:4,center:[15,65]}),ya=new I9({view:pf,geolocationOptions:{maximumAge:0,timeout:3e4,enableHighAccuracy:!0}});ya.viewModel.positionFilterFunction=!0;pf.ui.add(ya,"top-left");pf.ui.add(IP,"top-right");ya.on("track",t=>{var e,r,i,n,s,o;console.log("Track:",t),IP.innerText=`
  Latitude: ${(e=t.position.coords.latitude)==null?void 0:e.toFixed(4)}
  Longitude: ${(r=t.position.coords.longitude)==null?void 0:r.toFixed(4)}
  Altitude: ${(i=t.position.coords.altitude)==null?void 0:i.toFixed(1)}
  Heading: ${(n=t.position.coords.heading)==null?void 0:n.toFixed(0)}
  Speed: ${(s=t.position.coords.speed)==null?void 0:s.toFixed(2)}
  Accuracy: ${(o=t.position.coords.accuracy)==null?void 0:o.toFixed(0)}m
  Position Filter: ${ya.viewModel.positionFilterFunction}
  Version: ${kc}`});ya.on("track-error",t=>{console.error("Geolocation error:",t)});pf.when(()=>{ya.start()});export{wR as $,Z as A,tt as B,Ve as C,Wr as D,D as E,dg as F,AU as G,Vi as H,uo as I,ee as J,q as K,k as L,tU as M,tV as N,Br as O,ES as P,va as Q,sV as R,jd as S,MM as T,dj as U,Ma as V,eV as W,Nv as X,eU as Y,fb as Z,R as _,_3 as a,hx as a$,Bb as a0,Bd as a1,Sa as a2,JO as a3,Vl as a4,Xy as a5,Ul as a6,tO as a7,HV as a8,l2 as a9,Nx as aA,vn as aB,Xx as aC,gr as aD,Yz as aE,t$ as aF,m3 as aG,Uh as aH,Gh as aI,Rh as aJ,Wx as aK,Zn as aL,Ng as aM,o_ as aN,pb as aO,Hn as aP,Ln as aQ,os as aR,sk as aS,s_ as aT,Fw as aU,Gg as aV,ok as aW,fP as aX,rT as aY,uc as aZ,yl as a_,qx as aa,Kx as ab,qV as ac,Jx as ad,c as ae,d as af,wt as ag,lc as ah,T as ai,z as aj,ae as ak,Jc as al,xa as am,cc as an,mB as ao,Be as ap,Sj as aq,bj as ar,SN as as,bN as at,b0 as au,rk as av,y2 as aw,me as ax,U9 as ay,z3 as az,ba as b,Vr as b$,__ as b0,Tj as b1,c0 as b2,s9 as b3,Yc as b4,gc as b5,G6 as b6,FW as b7,UW as b8,ot as b9,Rg as bA,vr as bB,aD as bC,G as bD,ig as bE,fe as bF,de as bG,gV as bH,c9 as bI,a9 as bJ,i0 as bK,ze as bL,N7 as bM,st as bN,mt as bO,vi as bP,_S as bQ,OI as bR,D7 as bS,Zt as bT,Ae as bU,SM as bV,se as bW,I6 as bX,wn as bY,p7 as bZ,wO as b_,vt as ba,dk as bb,Gb as bc,Ts as bd,g3 as be,Me as bf,id as bg,rs as bh,P6 as bi,Tc as bj,MW as bk,C6 as bl,hW as bm,u6 as bn,W8 as bo,vR as bp,M6 as bq,bO as br,Ys as bs,_e as bt,JA as bu,Yb as bv,l9 as bw,Il as bx,OS as by,Lg as bz,WW as c,hV as c$,uf as c0,CG as c1,mM as c2,H4 as c3,yM as c4,t6 as c5,dW as c6,d6 as c7,fd as c8,fW as c9,DV as cA,FV as cB,Nl as cC,Hd as cD,x as cE,Ie as cF,rt as cG,Sf as cH,IW as cI,qn as cJ,EM as cK,cg as cL,Gv as cM,zv as cN,V9 as cO,xt as cP,RO as cQ,Fr as cR,H7 as cS,Y7 as cT,Og as cU,VS as cV,DO as cW,Vp as cX,XO as cY,jO as cZ,q7 as c_,Rl as ca,F9 as cb,Rc as cc,s2 as cd,VO as ce,oV as cf,md as cg,aV as ch,X7 as ci,uV as cj,ZO as ck,YO as cl,n2 as cm,t2 as cn,Z7 as co,i2 as cp,r2 as cq,Id as cr,wh as cs,Jz as ct,ha as cu,Tx as cv,LV as cw,VV as cx,NV as cy,$V as cz,k9 as d,Q as d$,K7 as d0,T6 as d1,W4 as d2,aW as d3,wW as d4,pi as d5,dd as d6,k0 as d7,Q7 as d8,Fs as d9,oW as dA,bi as dB,GV as dC,OV as dD,rw as dE,JG as dF,DB as dG,u9 as dH,iu as dI,Zh as dJ,ho as dK,Ol as dL,Kz as dM,DL as dN,IS as dO,a7 as dP,dO as dQ,o7 as dR,fO as dS,zA as dT,RU as dU,Ee as dV,dl as dW,Ge as dX,B3 as dY,G7 as dZ,Ri as d_,Gr as da,rV as db,AV as dc,rb as dd,Nc as de,Ms as df,UO as dg,ko as dh,ml as di,et as dj,$u as dk,_w as dl,Ta as dm,Kd as dn,zz as dp,Wz as dq,r7 as dr,sW as ds,Pi as dt,Dt as du,Fc as dv,wr as dw,oa as dx,N9 as dy,D9 as dz,rp as e,NU as e$,zc as e0,ct as e1,l4 as e2,gn as e3,PU as e4,hn as e5,Fz as e6,Xd as e7,t0 as e8,Xg as e9,Gz as eA,RS as eB,yV as eC,Mt as eD,bs as eE,A8 as eF,xs as eG,Oc as eH,NS as eI,jz as eJ,$t as eK,Bz as eL,dr as eM,Jd as eN,JP as eO,Q9 as eP,le as eQ,$9 as eR,PC as eS,xC as eT,nb as eU,wp as eV,RC as eW,T2 as eX,WE as eY,ge as eZ,n7 as e_,e0 as ea,Qg as eb,r0 as ec,Kg as ed,Vz as ee,Vc as ef,te as eg,t7 as eh,Ei as ei,Yj as ej,$z as ek,gU as el,d7 as em,Xt as en,je as eo,bn as ep,Ub as eq,_a as er,zd as es,xV as et,Jj as eu,x0 as ev,rM as ew,kV as ex,n0 as ey,Ib as ez,PW as f,UU as f$,DU as f0,S0 as f1,Qj as f2,eW as f3,Xj as f4,Uz as f5,uU as f6,cU as f7,_g as f8,SU as f9,iw as fA,dV as fB,jG as fC,KG as fD,hj as fE,I7 as fF,bW as fG,TW as fH,Xs as fI,ga as fJ,VP as fK,L9 as fL,q9 as fM,H9 as fN,j9 as fO,iU as fP,IU as fQ,L4 as fR,CU as fS,jv as fT,Bo as fU,Fo as fV,TU as fW,qC as fX,Gd as fY,Ac as fZ,Bt as f_,TS as fa,oA as fb,O3 as fc,Aj as fd,Bf as fe,ta as ff,Kj as fg,Lh as fh,RV as fi,IV as fj,Dc as fk,P_ as fl,GL as fm,R9 as fn,LU as fo,UV as fp,Zs as fq,Nn as fr,cy as fs,Se as ft,ly as fu,hy as fv,Xh as fw,ZL as fx,nU as fy,Wg as fz,EW as g,BV as g$,K9 as g0,ic as g1,Ym as g2,MA as g3,PA as g4,YG as g5,kk as g6,HE as g7,gp as g8,$v as g9,Xz as gA,A7 as gB,mj as gC,Qz as gD,Gc as gE,aj as gF,x7 as gG,oj as gH,l7 as gI,vW as gJ,zU as gK,xU as gL,Tg as gM,Mg as gN,CW as gO,AW as gP,tj as gQ,IA as gR,sS as gS,oS as gT,OA as gU,Lc as gV,_U as gW,Od as gX,nV as gY,Ti as gZ,WV as g_,lV as ga,fV as gb,hS as gc,nS as gd,zV as ge,QS as gf,J7 as gg,CI as gh,RI as gi,Wd as gj,WU as gk,E8 as gl,W9 as gm,vO as gn,m7 as go,M7 as gp,F7 as gq,k7 as gr,P7 as gs,_7 as gt,E7 as gu,g7 as gv,R7 as gw,GP as gx,kS as gy,sj as gz,A6 as h,cW as h$,jV as h0,U7 as h1,fl as h2,gL as h3,y3 as h4,O8 as h5,B9 as h6,O7 as h7,mn as h8,W_ as h9,aL as hA,qL as hB,xl as hC,fx as hD,dx as hE,xO as hF,G_ as hG,$U as hH,eC as hI,fj as hJ,Cb as hK,Ld as hL,Ql as hM,kt as hN,Wk as hO,Bk as hP,iz as hQ,X9 as hR,Bg as hS,WG as hT,zG as hU,rg as hV,jT as hW,iV as hX,cV as hY,Y_ as hZ,SW as h_,S7 as ha,C7 as hb,b7 as hc,T7 as hd,lh as he,uW as hf,u7 as hg,x9 as hh,hA as hi,vg as hj,NP as hk,pt as hl,MP as hm,d9 as hn,zi as ho,FS as hp,an as hq,jC as hr,M2 as hs,LM as ht,Hb as hu,Yy as hv,Jy as hw,qg as hx,xc as hy,X_ as hz,Gi as i,xW as i$,lW as i0,Dg as i1,EU as i2,zr as i3,Qb as i4,Vv as i5,yr as i6,vU as i7,v_ as i8,F2 as i9,rB as iA,iB,YW as iC,cB as iD,oB as iE,pB as iF,XW as iG,hB as iH,uB as iI,sB as iJ,eB as iK,fB as iL,BG as iM,XG as iN,QG as iO,OU as iP,qW as iQ,Ig as iR,G9 as iS,i7 as iT,iO as iU,CV as iV,pj as iW,gg as iX,ij as iY,h7 as iZ,VU as i_,f7 as ia,$7 as ib,v7 as ic,c7 as id,w7 as ie,tW as ig,bU as ih,a_ as ii,g as ij,kU as ik,KW as il,QW as im,JW as io,DM as ip,dB as iq,v$ as ir,aB as is,bF as it,ZW as iu,nB as iv,lB as iw,vF as ix,_F as iy,tB as iz,G1 as j,kW as j0,OW as j1,L7 as j2,Uv as j3,QA as j4,HG as j5,qG as j6,cj as j7,lj as j8,ej as j9,hd as ja,ZG as jb,Y9 as jc,J9 as jd,Z9 as je,lA as jf,nj as jg,rj as jh,MU as ji,V7 as jj,pI as jk,J4 as k,xS as l,C as m,DP as n,tg as o,PG as p,z9 as q,yt as r,y7 as s,De as t,Wo as u,Dd as v,xe as w,jW as x,Ce as y,El as z};
