import{e as o,y as r,l as S,n as a,s as Ie}from"./cast-daef7652.js";import{y as q,h as Ve}from"./string-3d0ebcd3.js";import{o as d,r as P,a as qe,k as me}from"./Extent-7f29a1bb.js";import{r as Fe}from"./typedArrayUtil-2bcf3cee.js";import{S as Pe}from"./ensureType-fa162cfc.js";import{n as De,t as Be}from"./Field-0ac3c9d2.js";import{j as Ge}from"./PopupTemplate-343851b8.js";import{j as fe}from"./Collection-e2259e32.js";import{a as u,s as Ne}from"./Error-bd05b442.js";import{v as ke}from"./HeightModelInfo-15bb1adf.js";import{m as Ue,g as We,L as ze,b as He}from"./arcgisLayerUrl-269cc7a9.js";import{d as Ze,v as _e,I as Je,f as Ke}from"./OperationalLayer-7b681a2a.js";import{i as le}from"./Clonable-f249bc0f.js";import{_ as Xe}from"./preload-helper-101896b7.js";import{s as ue}from"./jsonMap-a9c94baf.js";import{r as Ye,p as et}from"./LayerFloorInfo-689deffc.js";import{c as tt,d as Ee}from"./RelationshipQuery-c22f6308.js";import{x as z}from"./Query-e996b56b.js";import{l as ot,m as rt}from"./unitUtils-43365914.js";var _;let $=_=class extends S{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new _({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};o([r({type:String,json:{write:!0}})],$.prototype,"expression",void 0),o([r({type:String,json:{write:!0}})],$.prototype,"name",void 0),o([r({type:["boolean","date","number","string"],json:{write:!0}})],$.prototype,"returnType",void 0),o([r({type:String,json:{write:!0}})],$.prototype,"title",void 0),$=_=o([a("esri.form.ExpressionInfo")],$);const st=$;let O=class extends S{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};o([r({type:String,json:{write:!0}})],O.prototype,"description",void 0),o([r({type:String,json:{write:!0}})],O.prototype,"label",void 0),o([r()],O.prototype,"type",void 0),o([r({type:String,json:{write:!0}})],O.prototype,"visibilityExpression",void 0),O=o([a("esri.form.elements.Element")],O);const L=O;var J;let G=J=class extends S{constructor(e){super(e),this.type=null}clone(){return new J({type:this.type})}};o([r({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],G.prototype,"type",void 0),G=J=o([a("esri.form.elements.inputs.AttachmentInput")],G);const it=G;var K;let T=K=class extends L{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new K({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};o([r({type:String,json:{write:!0}})],T.prototype,"attachmentKeyword",void 0),o([r({type:Boolean,json:{write:!0}})],T.prototype,"editable",void 0),o([r({type:it,json:{read:{source:"inputType"},write:{target:"inputType"}}})],T.prototype,"input",void 0),o([r({type:["attachment"],json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=K=o([a("esri.form.elements.AttachmentElement")],T);const ve=T;let N=class extends S{constructor(e){super(e),this.type=null}};o([r()],N.prototype,"type",void 0),N=o([a("esri.form.elements.inputs.Input")],N);const Q=N;let V=class extends Q{constructor(t){super(t),this.maxLength=null,this.minLength=0}};o([r({type:Number,json:{write:!0}})],V.prototype,"maxLength",void 0),o([r({type:Number,json:{write:!0}})],V.prototype,"minLength",void 0),V=o([a("esri.form.elements.inputs.TextInput")],V);const de=V;var X;let k=X=class extends de{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new X({maxLength:this.maxLength,minLength:this.minLength})}};o([r({type:["barcode-scanner"],json:{read:!1,write:!0}})],k.prototype,"type",void 0),k=X=o([a("esri.form.elements.inputs.BarcodeScannerInput")],k);const nt=k;var Y;let C=Y=class extends Q{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Y({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};o([r({type:String,json:{write:!0}})],C.prototype,"noValueOptionLabel",void 0),o([r({type:Boolean,json:{write:!0}})],C.prototype,"showNoValueOption",void 0),o([r({type:["combo-box"],json:{read:!1,write:!0}})],C.prototype,"type",void 0),C=Y=o([a("esri.form.elements.inputs.ComboBoxInput")],C);const pt=C;var ee;function we(e){return e!=null?new Date(e):null}function ge(e){return e?e.getTime():null}let m=ee=class extends Q{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return we(t.max)}writeMax(e,t){t.max=ge(e)}readMin(e,t){return we(t.min)}writeMin(e,t){t.min=ge(e)}clone(){return new ee({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};o([r({type:Boolean,json:{write:!0}})],m.prototype,"includeTime",void 0),o([r({type:Date,json:{type:Number,write:!0}})],m.prototype,"max",void 0),o([d("max")],m.prototype,"readMax",null),o([P("max")],m.prototype,"writeMax",null),o([r({type:Date,json:{type:Number,write:!0}})],m.prototype,"min",void 0),o([d("min")],m.prototype,"readMin",null),o([P("min")],m.prototype,"writeMin",null),o([r({type:["datetime-picker"],json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=ee=o([a("esri.form.elements.inputs.DateTimePickerInput")],m);const at=m;var te;let A=te=class extends Q{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new te({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};o([r({type:String,json:{write:!0}})],A.prototype,"noValueOptionLabel",void 0),o([r({type:Boolean,json:{write:!0}})],A.prototype,"showNoValueOption",void 0),o([r({type:["radio-buttons"],json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=te=o([a("esri.form.elements.inputs.RadioButtonsInput")],A);const lt=A;var oe;let R=oe=class extends Q{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new oe({offValue:this.offValue,onValue:this.onValue})}};o([r({type:[String,Number],json:{write:!0}})],R.prototype,"offValue",void 0),o([r({type:[String,Number],json:{write:!0}})],R.prototype,"onValue",void 0),o([r({type:["switch"],json:{read:!1,write:!0}})],R.prototype,"type",void 0),R=oe=o([a("esri.form.elements.inputs.SwitchInput")],R);const ut=R;var re;let U=re=class extends de{constructor(e){super(e),this.type="text-area"}clone(){return new re({maxLength:this.maxLength,minLength:this.minLength})}};o([r({type:["text-area"],json:{read:!1,write:!0}})],U.prototype,"type",void 0),U=re=o([a("esri.form.elements.inputs.TextAreaInput")],U);const dt=U;var se;let W=se=class extends de{constructor(e){super(e),this.type="text-box"}clone(){return new se({maxLength:this.maxLength,minLength:this.minLength})}};o([r({type:["text-box"],json:{read:!1,write:!0}})],W.prototype,"type",void 0),W=se=o([a("esri.form.elements.inputs.TextBoxInput")],W);const ct=W,yt={base:Q,key:"type",typeMap:{"barcode-scanner":nt,"combo-box":pt,"datetime-picker":at,"radio-buttons":lt,switch:ut,"text-area":dt,"text-box":ct}};var ie;let c=ie=class extends L{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new ie({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};o([r({types:De,json:{read:{reader:Be},write:!0}})],c.prototype,"domain",void 0),o([r({type:Boolean,json:{write:!0}})],c.prototype,"editable",void 0),o([r({type:String,json:{write:!0}})],c.prototype,"editableExpression",void 0),o([r({type:String,json:{write:!0}})],c.prototype,"fieldName",void 0),o([r({type:String,json:{write:!0}})],c.prototype,"hint",void 0),o([r({types:yt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],c.prototype,"input",void 0),o([r({type:String,json:{write:!0}})],c.prototype,"requiredExpression",void 0),o([r({type:String,json:{read:!1,write:!0}})],c.prototype,"type",void 0),o([r({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0),c=ie=o([a("esri.form.elements.FieldElement")],c);const be=c;var ne;let b=ne=class extends L{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ne({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:q(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};o([r({type:Number,json:{write:!0}})],b.prototype,"displayCount",void 0),o([r({type:["list"],json:{write:!0}})],b.prototype,"displayType",void 0),o([r({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),o([r({type:[Ge],json:{write:!0}})],b.prototype,"orderByFields",void 0),o([r({type:Number,json:{write:!0}})],b.prototype,"relationshipId",void 0),o([r({type:["relationship"],json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=ne=o([a("esri.form.elements.RelationshipElement")],b);const xe=b;function $e(e){return{typesWithGroup:{base:L,key:"type",typeMap:{attachment:ve,field:be,group:e,relationship:xe}},typesWithoutGroup:{base:L,key:"type",typeMap:{attachment:ve,field:be,relationship:xe}}}}function Oe(e,t,s=!0){if(!e)return null;const i=s?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function Te(e,t,s=!0){if(!e)return null;const i=s?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function Ce(e,t,s=!0){return e?e.map(i=>Pe(s?t.typesWithGroup:t.typesWithoutGroup,i)):null}var pe;let w=pe=class extends L{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Ce(e,H,!1)}readElements(e,t){return Oe(t.formElements,H,!1)}writeElements(e,t){t.formElements=Te(e,H,!1)}clone(){return new pe({description:this.description,elements:q(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};o([r({json:{write:!0}})],w.prototype,"elements",void 0),o([Ie("elements")],w.prototype,"castElements",null),o([d("elements",["formElements"])],w.prototype,"readElements",null),o([P("elements")],w.prototype,"writeElements",null),o([r({type:["collapsed","expanded"],json:{write:!0}})],w.prototype,"initialState",void 0),o([r({type:String,json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=pe=o([a("esri.form.elements.GroupElement")],w);const H=$e(w),ht=w;var ae;const Z=$e(ht);let f=ae=class extends S{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Ce(e,Z)}readElements(e,t){return Oe(t.formElements,Z)}writeElements(e,t){t.formElements=Te(e,Z)}clone(){return new ae({description:this.description,expressionInfos:q(this.expressionInfos),elements:q(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};o([r({type:String,json:{write:!0}})],f.prototype,"description",void 0),o([r({json:{write:!0}})],f.prototype,"elements",void 0),o([Ie("elements")],f.prototype,"castElements",null),o([d("elements",["formElements"])],f.prototype,"readElements",null),o([P("elements")],f.prototype,"writeElements",null),o([r({type:[st],json:{write:!0}})],f.prototype,"expressionInfos",void 0),o([r({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"preserveFieldValuesWhenHidden",void 0),o([r({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=ae=o([a("esri.form.FormTemplate")],f);const Yt=f;let g=class extends le(S){constructor(t){super(t)}};o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"name",void 0),o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"fields",void 0),o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"isAscending",void 0),o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"indexType",void 0),o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"isUnique",void 0),o([r({constructOnly:!0,json:{write:!0}})],g.prototype,"description",void 0),g=o([a("esri.layers.support.FeatureIndex")],g);const mt=new ue({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ft={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function p(e,t,s){return!!(e&&e.hasOwnProperty(t)?e[t]:s)}function B(e,t,s){return e&&e.hasOwnProperty(t)?e[t]:s}function vt(e){var s;const t=(s=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:s.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function D(e,t){var i;const s=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(s!=null&&s.includes(t.toLowerCase()))}function wt(e,t,s){return{analytics:gt(t),attachment:bt(t),data:xt(t),metadata:St(t),operations:jt(t.capabilities||e,t,s),query:It(t,s),queryRelated:Ft(t),queryTopFeatures:Et(t),editing:$t(t)}}function gt(e){return{supportsCacheHint:D(e.advancedQueryCapabilities,"queryAnalytics")}}function bt(e){const t=e.attachmentProperties,s={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:D(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:p(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=ft[i.name];n&&(s[n]=!!i.isEnabled)}),s}function xt(e){return{isVersioned:p(e,"isDataVersioned",!1),supportsAttachment:p(e,"hasAttachments",!1),supportsM:p(e,"hasM",!1),supportsZ:p(e,"hasZ",!1)}}function St(e){return{supportsAdvancedFieldProperties:p(e,"supportsFieldDescriptionProperty",!1)}}function jt(e,t,s){const i=e?e.toLowerCase().split(",").map(E=>E.trim()):[],n=s?Ue(s):null,l=i.includes(Fe(n)&&n.serverType==="MapServer"?"data":"query"),v=i.includes("editing")&&!t.datesInUnknownTimezone;let h=v&&i.includes("create"),x=v&&i.includes("delete"),j=v&&i.includes("update");const I=i.includes("changetracking"),F=t.advancedQueryCapabilities;return v&&!(h||x||j)&&(h=x=j=!0),{supportsCalculate:p(t,"supportsCalculate",!1),supportsTruncate:p(t,"supportsTruncate",!1),supportsValidateSql:p(t,"supportsValidateSql",!1),supportsAdd:h,supportsDelete:x,supportsEditing:v,supportsChangeTracking:I,supportsQuery:l,supportsQueryAnalytics:p(F,"supportsQueryAnalytic",!1),supportsQueryAttachments:p(F,"supportsQueryAttachments",!1),supportsQueryTopFeatures:p(F,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:p(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:j,supportsExceedsLimitStatistics:p(t,"supportsExceedsLimitStatistics",!1)}}function It(e,t){const s=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,l=Ae(e),v=t==null?void 0:t.includes("MapServer"),h=!Ve("mapserver-pbf-enabled")&&v&&(l??0)<10.81,x=We(t),j=(e.supportedQueryFormats||"").split(",").reduce((I,F)=>{const E=F.toLowerCase().trim();return E&&I.add(E),I},new Set);return{supportsStatistics:p(s,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:p(s,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:p(s,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:vt(s),supportsCentroid:p(s,"supportsReturningGeometryCentroid",!1),supportsDistance:p(s,"supportsQueryWithDistance",!1),supportsDistinct:p(s,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:p(s,"supportsReturningQueryExtent",!1),supportsGeometryProperties:p(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:p(s,"supportsHavingClause",!1),supportsOrderBy:p(s,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:p(s,"supportsPagination",!1),supportsQuantization:p(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:p(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:p(e,"supportsReturningQueryGeometry",!1),supportsResultType:p(s,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:p(s,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:p(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:p(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:p(s,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:p(i,"allowOthersToQuery",!0),supportsHistoricMoment:p(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!h&&j.has("pbf"),supportsDisjointSpatialRelationship:p(s,"supportsDisjointSpatialRel",!1),supportsCacheHint:p(s,"supportsQueryWithCacheHint",!1)||D(s,"query"),supportsDefaultSpatialReference:p(s,"supportsDefaultSR",!1),supportsCompactGeometry:x,supportsFullTextSearch:p(s,"supportsFullTextSearch",!1),maxRecordCountFactor:B(e,"maxRecordCountFactor",void 0),maxRecordCount:B(e,"maxRecordCount",void 0),standardMaxRecordCount:B(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:B(e,"tileMaxRecordCount",void 0)}}function Ft(e){const t=e.advancedQueryCapabilities,s=p(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:p(t,"supportsQueryRelatedPagination",!1),supportsCount:s,supportsOrderBy:s,supportsCacheHint:D(t,"queryRelated")}}function Et(e){return{supportsCacheHint:D(e.advancedQueryCapabilities,"queryTopFilter")}}function $t(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:p(e,"allowGeometryUpdates",!0),supportsGlobalId:p(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:p(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:p(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:p(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:p(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:p(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:p(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:p(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:p(t,"allowOthersToUpdate",!0)}}async function to(e,t,s,i){const{source:n}=await e.load();if(await ce(e,t,i),!n.addAttachment)throw new u(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,s)}function ce(e,t,s){const{attributes:i}=t,{objectIdField:n}=e;return e.get("capabilities.data.supportsAttachment")?t?i?n&&i[n]?Promise.resolve():Promise.reject(new u(s,`feature is missing the identifying attribute ${n}`)):Promise.reject(new u(s,"'attributes' are required on a feature to query attachments")):Promise.reject(new u(s,"A feature is required to add/delete/update attachments")):Promise.reject(new u(s,"this layer doesn't support attachments"))}async function oo(e,t,s,i,n){const{source:l}=await e.load();if(await ce(e,t,n),!l.updateAttachment)throw new u(n,"Layer source does not support updateAttachment capability");return l.updateAttachment(t,s,i)}async function ro(e,t,s){const i=await Xe(()=>import("./editingSupport-9e46ee02.js"),["assets/editingSupport-9e46ee02.js","assets/Graphic-cf98a91a.js","assets/cast-daef7652.js","assets/typedArrayUtil-2bcf3cee.js","assets/string-3d0ebcd3.js","assets/Error-bd05b442.js","assets/ensureType-fa162cfc.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-29120e0a.js","assets/geometry-4b789d90.js","assets/Extent-7f29a1bb.js","assets/Polyline-c56eca9b.js","assets/typeUtils-d7b057b5.js","assets/jsonMap-a9c94baf.js","assets/PopupTemplate-343851b8.js","assets/Clonable-f249bc0f.js","assets/Collection-e2259e32.js","assets/Evented-d8fc77f0.js","assets/SimpleObservable-7c382d01.js","assets/fieldUtils-021fea8a.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-87969052.js","assets/enumeration-e46f3fd4.js","assets/number-53937715.js","assets/locale-30120714.js","assets/Identifiable-e3a09883.js","assets/symbols-fce921a6.js","assets/CIMSymbol-d0e12b74.js","assets/Symbol-f45dc441.js","assets/Color-2245b966.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-94fd2faa.js","assets/aaBoundingBox-6fbd5972.js","assets/request-c2b0ab45.js","assets/persistableUrlUtils-7e525def.js","assets/collectionUtils-09289d8f.js","assets/Portal-ac0dca24.js","assets/Loadable-7c89bd10.js","assets/Promise-088a0e17.js","assets/PortalGroup-f3dee6d8.js","assets/PortalUser-cdb4116b.js","assets/jsonUtils-8bd548d9.js","assets/uuid-73213768.js","assets/normalizeUtils-d322ac85.js","assets/EditBusLayer-0384e3a7.js"]),n=await e.load();return i.applyEdits(n,n.source,t,s)}async function so(e,t,s,i){const{source:n}=await e.load();if(await ce(e,t,i),!n.deleteAttachments)throw new u(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,s)}async function io(e,t,s){const{source:i}=await e.load({signal:t==null?void 0:t.signal});if(!i.fetchRecomputedExtents)throw new u(s,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function no(e,t,s,i){var ye,he;t=tt.from(t);const{source:n,capabilities:l}=await e.load();if(!((ye=l==null?void 0:l.data)!=null&&ye.supportsAttachment))throw new u(i,"this layer doesn't support attachments");const{attachmentTypes:v,objectIds:h,globalIds:x,num:j,size:I,start:F,where:E}=t;if(!((he=l==null?void 0:l.operations)!=null&&he.supportsQueryAttachments)){const Re=h&&h.length>1,Me=v&&v.length,Le=x&&x.length,Qe=I&&I.length;if(Re||Me||Le||Qe||j||F||E)throw new u(i,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",t)}if(!(h!=null&&h.length)&&!E)throw new u(i,"'objectIds' or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new u(i,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function po(e,t,s,i){const{source:n}=await e.load();if(!n.queryObjectIds)throw new u(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(z.from(t)??e.createQuery(),s)}async function ao(e,t,s,i){const{source:n}=await e.load();if(!n.queryFeatureCount)throw new u(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(z.from(t)??e.createQuery(),s)}async function lo(e,t,s,i){const{source:n}=await e.load();if(!n.queryExtent)throw new u(i,"Layer source does not support queryExtent capability");return n.queryExtent(z.from(t)??e.createQuery(),s)}async function uo(e,t,s,i){const{source:n}=await e.load();if(!n.queryRelatedFeatures)throw new u(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Ee.from(t),s)}async function co(e,t,s,i){const{source:n}=await e.load();if(!n.queryRelatedFeaturesCount)throw new u(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Ee.from(t),s)}async function yo(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:s,updates:i}=await t.refresh();if(Fe(i)&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),s)return!0}catch{}if(e.definitionExpression)try{return(await Ye(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function ho(e){const t=new z,s=e.get("capabilities.data"),i=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),s&&(s.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),s.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:l}=e;return t.timeExtent=n!=null&&l!=null?l.offset(-n.value,n.unit):l||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Ot(e){const{globalIdField:t,fields:s}=e;if(t)return t;if(s){for(const i of s)if(i.type==="esriFieldTypeGlobalID")return i.name}}function Tt(e){const{objectIdField:t,fields:s}=e;if(t)return t;if(s){for(const i of s)if(i.type==="esriFieldTypeOID")return i.name}}function Ae(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}let M=class extends le(S){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};o([r({type:String,json:{read:{source:"shapeAreaFieldName"}}})],M.prototype,"shapeAreaField",void 0),o([r({type:String,json:{read:{source:"shapeLengthFieldName"}}})],M.prototype,"shapeLengthField",void 0),o([r({type:String,json:{read:e=>ot.read(e)||rt.read(e)}})],M.prototype,"units",void 0),M=o([a("esri.layers.support.GeometryFieldsInfo")],M);const Ct=M,Se=new ue({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),je=new ue({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let y=class extends le(S){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};o([r({json:{read:Se.read,write:Se.write}})],y.prototype,"cardinality",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"composite",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"id",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"keyField",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"keyFieldInRelationshipTable",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"name",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"relatedTableId",void 0),o([r({json:{read:!0,write:!0}})],y.prototype,"relationshipTableId",void 0),o([r({json:{read:je.read,write:je.write}})],y.prototype,"role",void 0),y=o([a("esri.layers.support.Relationship")],y);const At=y,fo=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.spatialReference=me.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(fe.ofType(g)),this.userIsAdmin=!1,this.version=void 0}readCapabilitiesFromService(s,i){return wt(s,i,this.url)}readEditingInfo(s,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}readIsTableFromService(s,i){return i.type==="Table"}readMinScale(s,i){return i.effectiveMinScale||s||0}readMaxScale(s,i){return i.effectiveMaxScale||s||0}readGlobalIdFieldFromService(s,i){return Ot(i)}readObjectIdFieldFromService(s,i){return Tt(i)}readServiceDefinitionExpression(s,i){return i.definitionQuery||i.definitionExpression}set url(s){const i=ze({layer:this,url:s,nonStandardUrlAllowed:!0,logger:Ne.getLogger(this.declaredClass)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(s,i,n,l){He(this,s,null,i,l)}readVersion(s,i){return Ae(i)}};return o([r({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),o([d("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),o([r({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),o([r({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),o([r({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),o([r({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),o([r({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),o([r({readOnly:!0})],t.prototype,"editingInfo",void 0),o([d("editingInfo")],t.prototype,"readEditingInfo",null),o([r((()=>{const s=q(Ze),i=s.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},s})())],t.prototype,"elevationInfo",void 0),o([r({type:et,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),o([r({type:qe,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),o([r()],t.prototype,"gdbVersion",void 0),o([r({readOnly:!0,type:Ct,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),o([r({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:mt.read}}}})],t.prototype,"geometryType",void 0),o([r({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),o([r({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),o([r({readOnly:!0,type:ke})],t.prototype,"heightModelInfo",void 0),o([r({type:Date})],t.prototype,"historicMoment",void 0),o([r({readOnly:!0})],t.prototype,"isTable",void 0),o([d("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),o([r({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),o([r(_e)],t.prototype,"minScale",void 0),o([d("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),o([r(Je)],t.prototype,"maxScale",void 0),o([d("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),o([r({type:String})],t.prototype,"globalIdField",void 0),o([d("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),o([r({type:String})],t.prototype,"objectIdField",void 0),o([d("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),o([r({type:[At],readOnly:!0})],t.prototype,"relationships",void 0),o([r()],t.prototype,"sourceJSON",void 0),o([r({type:Boolean})],t.prototype,"returnM",void 0),o([r({type:Boolean})],t.prototype,"returnZ",void 0),o([r({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),o([d("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),o([r({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),o([r({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),o([r({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),o([r({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),o([r({type:fe.ofType(g),readOnly:!0})],t.prototype,"indexes",void 0),o([r(Ke)],t.prototype,"url",null),o([P("url")],t.prototype,"writeUrl",null),o([r({readOnly:!0})],t.prototype,"userIsAdmin",void 0),o([r({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),o([d("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=o([a("esri.layers.mixins.FeatureLayerBase")],t),t};export{co as D,no as E,to as F,yo as G,po as I,ho as L,fo as M,so as O,ro as P,ao as T,Tt as U,uo as a,wt as h,mt as i,lo as j,io as v,oo as x,Yt as y,Ot as z};
