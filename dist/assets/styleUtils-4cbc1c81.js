import{a as c,L as m,eh as d,ei as p,$ as b,dB as h,ej as w}from"./index-6eb28d6b.js";import{e as $}from"./featureFlags-825f837d.js";let u={};async function N(e,r){try{return{data:(await g(e,r)).data,baseUrl:p(e),styleUrl:e}}catch(t){return b(t),null}}function U(e,r,t){const s=r.portal!=null?r.portal:h.getDefault();let n;const o=`${s.url} - ${s.user&&s.user.username} - ${e}`;return u[o]||(u[o]=j(e,s,t).then(l=>(n=l,l.fetchData())).then(l=>({data:l,baseUrl:n.itemUrl??"",styleName:e}))),u[o]}function j(e,r,t){return r.load(t).then(()=>{const s=new w({disableExtraQuery:!0,query:`owner:${y} AND type:${f} AND typekeywords:"${e}"`});return r.queryItems(s,t)}).then(({results:s})=>{var l;let n=null;const o=e.toLowerCase();if(s&&Array.isArray(s)){for(const a of s)if(((l=a.typeKeywords)==null?void 0:l.some(i=>i.toLowerCase()===o))&&a.type===f&&a.owner===y){n=a;break}}if(!n)throw new c("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(t)})}function A(e,r,t){return e&&e.styleUrl!=null?N(e.styleUrl,t):e&&e.styleName!=null?U(e.styleName,r,t):Promise.reject(new c("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function C(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function D(e,r,t=["gltf"]){if(r==="cimRef")return e.cimRef;if(e.formatInfos&&!$())for(const s of t){const n=e.formatInfos.find(o=>o.type===s);if(n)return n.href}return e.webRef}function g(e,r){const t={responseType:"json",query:{f:"json"},...r};return m(d(e),t)}const y="esri_en",f="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{g as b,A as c,D as d,C as p,S as w};
