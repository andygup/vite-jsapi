import{e,y as r,f,n as c}from"./cast-daef7652.js";import{a as h}from"./Error-bd05b442.js";import{_ as g}from"./Promise-088a0e17.js";import{d as b,v as C}from"./promiseUtils-29120e0a.js";const w="not-loaded",S="loading",v="failed",u="loaded",p=s=>{let t=class extends s{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const m=this.load.bind(this);this.load=_=>{const y=new Promise((a,d)=>{const i=b(_,d);this.destroyed&&d(new h("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,d).finally(()=>{i&&i.remove()})});if(this.loadStatus===w){this._set("loadStatus",S);const a=this._loadController=new AbortController;m({signal:a.signal}),C(a.signal,()=>{this._promiseProps.abort()})}return n(),y}})),this.when(()=>{this._set("loadStatus",u),this._loadController=null},n=>{this._set("loadStatus",v),this._set("loadError",n),this._loadController=null})}get loaded(){return this.loadStatus===u}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var o;return this.isFulfilled()||(this._set("loadError",new h("load:cancelled","Cancelled")),(o=this._loadController)==null||o.abort()),this}};return e([r({readOnly:!0})],t.prototype,"loaded",null),e([r({readOnly:!0})],t.prototype,"loadError",void 0),e([r({clonable:!1})],t.prototype,"loadStatus",void 0),e([r({type:[f],readOnly:!0})],t.prototype,"loadWarnings",null),t=e([c("esri.core.Loadable")],t),t};let l=class extends p(g){};l=e([c("esri.core.Loadable")],l),function(s){function t(o){return!(!o||!o.load)}s.LoadableMixin=p,s.isLoadable=t}(l||(l={}));const W=l;export{W as m};
