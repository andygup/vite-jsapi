import{E as N}from"./index-b4b3ae7d.js";import{b as v,a as r,w as l,K as h}from"./color-820677f7.js";var a;(function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"})(a||(a={}));var n;(function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"})(n||(n={}));function $(t){switch(t){case"left":return a.Left;case"right":return a.Right;case"center":return a.Center}}function W(t){switch(t){case"top":return n.Top;case"middle":return n.Center;case"baseline":return n.Baseline;case"bottom":return n.Bottom}}function j(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[a.Right,n.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[a.Center,n.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[a.Left,n.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[a.Right,n.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":return[a.Center,n.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[a.Left,n.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[a.Right,n.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[a.Center,n.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[a.Left,n.Top];case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[a.Center,n.Center];default:return console.debug(`Found invalid placement type ${t}`),[a.Center,n.Center]}}function J(t){switch(t){case a.Right:return-1;case a.Center:return 0;case a.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function q(t){switch(t){case n.Top:return 1;case n.Center:return 0;case n.Bottom:case n.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}function H(t){switch(t){case"left":return a.Left;case"right":return a.Right;case"center":return a.Center}}function Y(t){switch(t){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}function k(t,s,e){const i=l.SIZE_FIELD_STOPS|l.SIZE_MINMAX_VALUE|l.SIZE_SCALE_STOPS|l.SIZE_UNIT_VALUE,o=h.FIELD_TARGETS_OUTLINE|h.MINMAX_TARGETS_OUTLINE|h.SCALE_TARGETS_OUTLINE|h.UNIT_TARGETS_OUTLINE,c=(s&o)>>>4;return t===r.LINE&&e.isOutline||t===r.FILL&&U(e.symbologyType)?i&c:i&~c}const m=0,E=8,G=7,b=8,f=11,z=11,M=12,I=13,_=14,O=15,A=16,C=17,B=18,P=19,F=20,R=21,w=26,K=Object.keys(v).filter(t=>typeof v[t]=="number").reduce((t,s)=>({...t,[s]:v[s]}),{});function D(t){return t===v.SIMPLE||t===v.OUTLINE_FILL_SIMPLE}function U(t){return t===v.OUTLINE_FILL||t===v.OUTLINE_FILL_SIMPLE}function Q(t){return D(t.symbologyType)}function ee(t){return U(t.symbologyType)}function te(t,s){switch(t){case r.FILL:return y.from(s);case r.LINE:return g.from(s);case r.MARKER:return V.from(s);case r.TEXT:return d.from(s);case r.LABEL:return T.from(s);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function se(t){switch(u.load(t).geometryType){case r.MARKER:return new V(t);case r.FILL:return new y(t);case r.LINE:return new g(t);case r.TEXT:return new d(t);case r.LABEL:return new T(t)}}class u{static load(s){const e=this.shared;return e.data=s,e}constructor(s){this._data=0,this._data=s}set data(s){this._data=s??0}get data(){return this._data}get geometryType(){return this.bits(b,f)}set geometryType(s){this.setBits(s,b,f)}get mapAligned(){return!!this.bit(F)}set mapAligned(s){this.setBit(F,s)}get sdf(){return!!this.bit(z)}set sdf(s){this.setBit(z,s??!1)}get pattern(){return!!this.bit(M)}set pattern(s){this.setBit(M,s)}get textureBinding(){return this.bits(m,E)}set textureBinding(s){this.setBits(s,m,E)}get symbologyType(){return this.bits(R,w)}set symbologyType(s){this.setBits(s,R,w)}get geometryTypeString(){switch(this.geometryType){case r.FILL:return"fill";case r.MARKER:return"marker";case r.LINE:return"line";case r.TEXT:return"text";case r.LABEL:return"label";default:throw new N(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(s,e){const i=1<<s;e?this._data|=i:this._data&=~i}bit(s){return(this._data&1<<s)>>s}setBits(s,e,i){for(let o=e,c=0;o<i;o++,c++)this.setBit(o,(s&1<<c)!==0)}bits(s,e){let i=0;for(let o=s,c=0;o<e;o++,c++)i|=this.bit(o)<<c;return i}hasVV(){return!1}setVV(s,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:v[this.symbologyType],options:K,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(G&this.textureBinding)}}u.shared=new u(0);const S=t=>class extends t{get vvSizeMinMaxValue(){return this.bit(A)!==0}set vvSizeMinMaxValue(e){this.setBit(A,e)}get vvSizeScaleStops(){return this.bit(C)!==0}set vvSizeScaleStops(e){this.setBit(C,e)}get vvSizeFieldStops(){return this.bit(B)!==0}set vvSizeFieldStops(e){this.setBit(B,e)}get vvSizeUnitValue(){return this.bit(P)!==0}set vvSizeUnitValue(e){this.setBit(P,e)}hasSizeVV(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}hasVV(){return super.hasVV()||this.hasSizeVV()}setVV(e,i){super.setVV(e,i);const c=k(this.geometryType,e,i)&e;this.vvSizeMinMaxValue=!!(c&l.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(c&l.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(c&l.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(c&l.SIZE_SCALE_STOPS)}},x=t=>class extends t{get vvRotation(){return this.bit(O)!==0}set vvRotation(e){this.setBit(O,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,i){super.setVV(e,i),this.vvRotation=!i.isOutline&&!!(e&l.ROTATION)}},p=t=>class extends t{get vvColor(){return this.bit(I)!==0}set vvColor(e){this.setBit(I,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,i){super.setVV(e,i),this.vvColor=!i.isOutline&&!!(e&l.COLOR)}},L=t=>class extends t{get vvOpacity(){return this.bit(_)!==0}set vvOpacity(e){this.setBit(_,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,i){super.setVV(e,i),this.vvOpacity=!i.isOutline&&!!(e&l.OPACITY)}};class y extends p(L(S(u))){static load(s){const e=this.shared;return e.data=s,e}static from(s){const{symbologyType:e,vvFlags:i}=s,o=this.load(0);return o.geometryType=r.FILL,o.symbologyType=e,e!==v.DOT_DENSITY&&o.setVV(i,s),o.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0);class V extends p(L(x(S(u)))){static load(s){const e=this.shared;return e.data=s,e}static from(s){const{symbologyType:e,vvFlags:i}=s,o=this.load(0);return o.geometryType=r.MARKER,o.symbologyType=e,e!==v.HEATMAP&&o.setVV(i,s),o.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}V.shared=new V(0);class g extends p(L(S(u))){static load(s){const e=this.shared;return e.data=s,e}static from(s){const e=this.load(0);return e.geometryType=r.LINE,e.symbologyType=s.symbologyType,e.setVV(s.vvFlags,s),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0);class d extends p(L(x(S(u)))){static load(s){const e=this.shared;return e.data=s,e}static from(s){const e=this.load(0);return e.geometryType=r.TEXT,e.symbologyType=s.symbologyType,e.setVV(s.vvFlags,s),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}d.shared=new d(0);class T extends S(u){static load(s){const e=this.shared;return e.data=s,e}static from(s){const e=this.load(0);return e.geometryType=r.LABEL,e.symbologyType=s.symbologyType,e.setVV(s.vvFlags,s),e.mapAligned=Y(s.placement),e.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0);export{y as F,a as H,T as L,u as M,d as T,n as V,$ as a,W as b,te as c,Y as d,j as e,J as f,H as g,se as h,U as i,q as j,V as k,g as l,ee as m,Q as n};
