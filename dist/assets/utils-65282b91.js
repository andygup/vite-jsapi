import{cw as F,fL as N,aX as U,aQ as v,bZ as P,bJ as A,bY as G,a9 as J,e5 as z,fM as E,fN as Z,dc as B,fy as h,_ as q,bN as Q,bO as y,fO as I,bQ as S,fP as p,bP as L,fQ as V,fR as j}from"./index-33447e96.js";import{f as $,g as O}from"./projectionSupport-58a4a91b.js";const k=new F({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=Object.freeze({}),x=new S,C=new S,R=new S,o={esriGeometryPoint:p,esriGeometryPolyline:L,esriGeometryPolygon:V,esriGeometryMultipoint:j};function tt(t,r,a,i=t.hasZ,n=t.hasM){if(r==null)return null;const l=t.hasZ&&i,s=t.hasM&&n;if(a){const e=y(R,r,t.hasZ,t.hasM,"esriGeometryPoint",a,i,n);return p(e,l,s)}return p(r,l,s)}function et(t,r,a,i,n,l,s=r,e=a){var w,d,g;const c=r&&s,u=a&&e,f=i!=null?"coords"in i?i:i.geometry:null;if(f==null)return null;if(n){let m=Q(C,f,r,a,t,n,s,e);return l&&(m=y(R,m,c,u,t,l)),((w=o[t])==null?void 0:w.call(o,m,c,u))??null}if(l){const m=y(R,f,r,a,t,l,s,e);return((d=o[t])==null?void 0:d.call(o,m,c,u))??null}return I(x,f,r,a,s,e),((g=o[t])==null?void 0:g.call(o,x,c,u))??null}async function nt(t,r,a){const{outFields:i,orderByFields:n,groupByFieldsForStatistics:l,outStatistics:s}=t;if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(l)for(let e=0;e<l.length;e++)l[e]=l[e].trim();if(s)for(let e=0;e<s.length;e++)s[e].onStatisticField&&(s[e].onStatisticField=s[e].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),D(t,r,a)}async function D(t,r,a){var l;if(!t)return null;let{where:i}=t;if(t.where=i=i&&i.trim(),(!i||/^1 *= *1$/.test(i)||r&&r===i)&&(t.where=null),!t.geometry)return t;let n=await K(t);if(t.distance=0,t.units=null,t.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:s}=t.geometry;n=N(n),n.spatialReference=s}if(n){await $(n.spatialReference,a),n=H(n,a);const s=(await U(v(n)))[0];if(s==null)throw b;const e="quantizationParameters"in t&&((l=t.quantizationParameters)==null?void 0:l.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,c=e&&M(n,a)?{densificationStep:8*e}:void 0,u=s.toJSON(),f=await O(u,u.spatialReference,a,c);if(!f)throw b;f.spatialReference=a,t.geometry=f}return t}function M(t,r){if(!t)return!1;const a=t.spatialReference;return(P(t)||A(t)||G(t))&&!J(a,r)&&!z(a,r)}function H(t,r){const a=t.spatialReference;return M(t,r)&&P(t)?{spatialReference:a,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function K(t){const{distance:r,units:a}=t,i=t.geometry;if(r==null||"vertexAttributes"in i)return i;const n=i.spatialReference,l=a?k.fromJSON(a):E(n),s=n&&(Z(n)||B(n))?i:await $(n,h).then(()=>O(i,h));return(await T())(s.spatialReference,s,r,l)}async function T(){return(await q(()=>import("./geometryEngineJSON-b96ef4c9.js"),["assets/geometryEngineJSON-b96ef4c9.js","assets/index-33447e96.js","assets/index-d832a396.css","assets/geometryEngineJSON-f68f0765.js","assets/json-48e3ea08.js"])).geodesicBuffer}function it(t){return t&&_ in t?JSON.parse(JSON.stringify(t,X)):t}const _="_geVersion",X=(t,r)=>t!==_?r:void 0;export{tt as G,b as M,et as P,it as Z,nt as v,D as z};
