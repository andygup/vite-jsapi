"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[24,8008,8062],{25929:(e,r,t)=>{t.d(r,{M:()=>f,a:()=>L,e:()=>p,f:()=>n,i:()=>u,p:()=>y,r:()=>l,t:()=>i,w:()=>s});var a=t(17452);function n(e,r){const t=r&&r.url&&r.url.path;if(e&&t&&(e=(0,a.hF)(e,t,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){const t=(0,a.PF)(e,r.portalItem.itemUrl);null!=t&&c.test(t)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(t).path)}return d(e,r&&r.portal)}function i(e,r,t=f.YES){if(null==e)return e;!(0,a.YP)(e)&&r&&r.blockedRelativeUrls&&r.blockedRelativeUrls.push(e);let n=(0,a.hF)(e);if(r){const t=r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.rootPath||r.url&&r.url.path;if(t){const i=d(t,r.portal),l=d(n,r.portal);n=(0,a.PF)(l,i,i),null!=n&&n!==l&&n!==e&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=p(n,r?.portal),(0,a.YP)(n)&&(n=(0,a.Fv)(n)),r?.resources&&r?.portalItem&&!(0,a.YP)(n)&&!(0,a.HK)(n)&&t===f.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(n),compress:!1}),n}function l(e,r,t){return n(e,t)}function s(e,r,t,a){const n=i(e,a);void 0!==n&&(r[t]=n)}const o=/\/items\/([^\/]+)\/resources\/(.*)/,c=/^\.\/resources\//;function u(e){const r=e?.match(o)??null;return r?.[1]??null}function y(e){const r=e?.match(o)??null;if(null==r)return null;const t=r[2],n=t.lastIndexOf("/");if(-1===n){const{path:e,extension:r}=(0,a.fZ)(t);return{prefix:null,filename:e,extension:r}}const{path:i,extension:l}=(0,a.fZ)(t.slice(n+1));return{prefix:t.slice(0,n),filename:i,extension:l}}function p(e,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(0,a.Ie)(e,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):e}function d(e,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return e;const t=`${r.urlKey}.${r.customBaseUrl}`,n=(0,a.TI)();return(0,a.D6)(n,`${n.scheme}://${t}`)?(0,a.Ie)(e,r.portalHostname,t):(0,a.Ie)(e,t,r.portalHostname)}var f,m;(m=f||(f={}))[m.YES=0]="YES",m[m.NO=1]="NO";const L=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return f},ensureMainOnlineDomain:p,fromJSON:n,itemIdFromResourceUrl:u,prefixAndFilenameFromResourceUrl:y,read:l,toJSON:i,write:s},Symbol.toStringTag,{value:"Module"}))},10699:(e,r,t)=>{t.d(r,{IG:()=>l,iv:()=>s});var a=t(43697),n=t(52011);let i=0;const l=e=>{let r=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+i++})}};return r=(0,a._)([(0,n.j)("esri.core.Identifiable")],r),r},s=e=>{let r=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:i++})}};return r=(0,a._)([(0,n.j)("esri.core.NumericIdentifiable")],r),r};let o=class extends(l(class{})){};o=(0,a._)([(0,n.j)("esri.core.Identifiable")],o)},87085:(e,r,t)=>{t.d(r,{Z:()=>h});var a=t(43697),n=(t(66577),t(3172)),i=t(20102),l=t(32448),s=t(10699),o=t(83379),c=t(92604),u=t(95330),y=t(17452),p=t(5600),d=(t(75215),t(67676),t(80442),t(52011)),f=t(68773),m=t(6570),L=t(82971);let S=0,b=class extends(l.Z.EventedMixin((0,s.IG)(o.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.Z(-180,-90,180,90,L.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+S++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=L.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const r="string"==typeof e?{url:e}:e;return(await t.e(3529).then(t.bind(t,63529))).fromUrl(r)}static fromPortalItem(e){return async function(e){const r="portalItem"in e?e:{portalItem:e},{fromItem:a}=await t.e(8008).then(t.bind(t,28008));try{return await a(r)}catch(e){const t=r&&r.portalItem,a=t&&t.id||"unset",n=t&&t.portal&&t.portal.url||f.default.portalUrl;throw c.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+a+"')",e),e}}(e)}initialize(){this.when().catch((e=>{(0,u.D_)(e)||c.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,r=this.parent;"layers"in r&&r.layers.includes(e)?r.layers.remove(e):"tables"in r&&r.tables.includes(e)?r.tables.remove(e):"baseLayers"in r&&r.baseLayers.includes(e)?r.baseLayers.remove(e):"baseLayers"in r&&r.referenceLayers.includes(e)&&r.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,y.mN)(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new i.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,a._)([(0,p.Cb)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,a._)([(0,p.Cb)({type:m.Z})],b.prototype,"fullExtent",void 0),(0,a._)([(0,p.Cb)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,a._)([(0,p.Cb)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,a._)([(0,p.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,a._)([(0,p.Cb)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,a._)([(0,p.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,a._)([(0,p.Cb)({clonable:!1})],b.prototype,"parent",void 0),(0,a._)([(0,p.Cb)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,a._)([(0,p.Cb)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,a._)([(0,p.Cb)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,a._)([(0,p.Cb)({type:L.Z})],b.prototype,"spatialReference",void 0),(0,a._)([(0,p.Cb)({type:String})],b.prototype,"title",void 0),(0,a._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,a._)([(0,p.Cb)()],b.prototype,"url",void 0),(0,a._)([(0,p.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,a._)([(0,d.j)("esri.layers.Layer")],b);const h=b},66677:(e,r,t)=>{t.d(r,{B5:()=>u,DR:()=>p,G:()=>h,M8:()=>m,Nm:()=>L,Qc:()=>y,XG:()=>S,a7:()=>f,ld:()=>d,wH:()=>b});var a=t(17452),n=t(25929);const i={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(i),s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),o=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return!!s.test(e)}function y(e){if(null==e)return null;const r=(0,a.mN)(e),t=r.path.match(s)||r.path.match(o);if(!t)return null;const[,n,l,c,u]=t,y=l.indexOf("/");return{title:d(-1!==y?l.slice(y+1):l),serverType:i[c.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:n}}}function p(e){const r=(0,a.mN)(e).path.match(c);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function d(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function f(e,r){const t=[];if(e){const r=y(e);null!=r&&r.title&&t.push(r.title)}if(r){const e=d(r);t.push(e)}if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function m(e){if(!e)return!1;const r=(e=e.toLowerCase()).includes(".arcgis.com/"),t=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return r&&t}function L(e,r){return e?(0,a.Qj)((0,a.Hu)(e,r)):e}function S(e){let{url:r}=e;if(!r)return{url:r};r=(0,a.Hu)(r,e.logger);const t=(0,a.mN)(r),n=y(t.path);let i;if(null!=n)null!=n.sublayer&&null==e.layer.layerId&&(i=n.sublayer),r=n.url.path;else if(e.nonStandardUrlAllowed){const e=p(t.path);null!=e&&(r=e.serviceUrl,i=e.sublayerId)}return{url:(0,a.Qj)(r),layerId:i}}function b(e,r,t,i,l){(0,n.w)(r,i,"url",l),i.url&&null!=e.layerId&&(i.url=(0,a.v_)(i.url,t,e.layerId.toString()))}function h(e){if(!e)return!1;const r=e.toLowerCase(),t=r.includes("/services/"),a=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),i=r.includes("/wmsserver");return t&&(a||n||i)}},52104:(e,r,t)=>{t.d(r,{V:()=>n});var a=t(96187);async function n(e,r){const t=await(0,a.T)(e,r);t.layers=t.layers.filter(i);const n={serviceJSON:t};if((t.currentVersion??0)<10.5)return n;const l=await(0,a.T)(e+"/layers",r);return n.layersJSON={layers:l.layers.filter(i),tables:l.tables},n}function i(e){return!e.type||"Feature Layer"===e.type}},70024:(e,r,t)=>{t.d(r,{populateOperationalLayers:()=>u});var a=t(46791),n=(t(80442),t(95330)),i=t(87344),l=t(15235);function s(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var o=t(28008),c=t(40555);async function u(e,r,t){if(!r)return;const a=[];for(const e of r){const r=S(e,t);"GroupLayer"===e.layerType?a.push(I(r,e,t)):a.push(r)}const i=await(0,n.as)(a);for(const r of i)r.value&&e.add(r.value)}const y={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},p={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},f={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISFeatureLayer:"FeatureLayer"},L={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};async function S(e,r){return async function(e,r,t){const a=new e;return a.read(r,t.context),"group"===a.type&&b(r)&&await async function(e,r,t){const a=i.T.FeatureLayer,n=await a(),l=r.featureCollection,s=l?.showLegend,o=l?.layers?.map(((a,i)=>{const l=new n;l.read(a,t);const o={...t,ignoreDefaults:!0};return l.read({id:`${e.id}-sublayer-${i}`,visibility:r.visibleLayers?.includes(i)??!0},o),null!=s&&l.read({showLegend:s},o),l}));e.layers.addMany(o??[])}(a,r,t.context),await(0,c.y)(a,t.context),a}(await async function(e,r){const t=r.context,a=w(t);let n=e.layerType||e.type;!n&&r&&r.defaultLayerType&&(n=r.defaultLayerType);const c=a[n];let u=c?i.T[c]:i.T.UnknownLayer;if(h(e)){const r=t?.portal;if(e.itemId){const t=new l.default({id:e.itemId,portal:r});await t.load();const a=(await(0,o.v)(t)).className||"UnknownLayer";u=i.T[a]}}else"ArcGISFeatureLayer"===n?function(e){return s(e,"notes")}(e)||function(e){return s(e,"markup")}(e)?u=i.T.MapNotesLayer:function(e){return s(e,"route")}(e)?u=i.T.RouteLayer:b(e)&&(u=i.T.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?u=i.T.WMTSLayer:"WFS"===n&&"2.0.0"!==e.wfsInfo?.version&&(u=i.T.UnsupportedLayer);return u()}(e,r),e,r)}function b(e){return"ArcGISFeatureLayer"===e.layerType&&!h(e)&&(e.featureCollection?.layers?.length??0)>1}function h(e){return"Feature Collection"===e.type}function w(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=d;break;case"ground":r=p;break;default:r=y}else switch(e.layerContainerType){case"basemap":r=L;break;case"tables":r=m;break;default:r=f}return r}async function I(e,r,t){const n=new a.Z,i=u(n,Array.isArray(r.layers)?r.layers:[],t);try{const r=await e;try{if(await i,"group"===r.type)return r.layers.addMany(n),r}catch(e){r.destroy();for(const e of n)e.destroy();throw e}}catch(e){throw e}}},87344:(e,r,t)=>{t.d(r,{T:()=>a});const a={BingMapsLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(8153)]).then(t.bind(t,2723))).default,BuildingSceneLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(5590),t.e(6935),t.e(632),t.e(223)]).then(t.bind(t,30223))).default,CSVLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(9675)]).then(t.bind(t,45425))).default,DimensionLayer:async()=>(await Promise.all([t.e(163),t.e(9037),t.e(81)]).then(t.bind(t,40081))).default,ElevationLayer:async()=>(await Promise.all([t.e(163),t.e(9157),t.e(2763)]).then(t.bind(t,65665))).default,FeatureLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(5159)]).then(t.bind(t,19238))).default,GeoJSONLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(7202)]).then(t.bind(t,23477))).default,GeoRSSLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(8024)]).then(t.bind(t,3723))).default,GroupLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(7483)]).then(t.bind(t,89348))).default,ImageryLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(4165),t.e(4599),t.e(6610),t.e(7391),t.e(1194)]).then(t.bind(t,90444))).default,ImageryTileLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(9157),t.e(6610),t.e(7391),t.e(5604),t.e(3381)]).then(t.bind(t,74878))).default,IntegratedMeshLayer:async()=>(await Promise.all([t.e(163),t.e(6935),t.e(1537)]).then(t.bind(t,9310))).default,KMLLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(739)]).then(t.bind(t,42756))).default,LineOfSightLayer:async()=>(await Promise.all([t.e(163),t.e(7316)]).then(t.bind(t,30690))).default,MapImageLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(4599),t.e(6368),t.e(7374)]).then(t.bind(t,27374))).default,MapNotesLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(1227)]).then(t.bind(t,62128))).default,MediaLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(4828)]).then(t.bind(t,57765))).default,OGCFeatureLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(2855)]).then(t.bind(t,88068))).default,OpenStreetMapLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9971),t.e(6237)]).then(t.bind(t,66237))).default,OrientedImageryLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(2651)]).then(t.bind(t,52781))).default,PointCloudLayer:async()=>(await Promise.all([t.e(163),t.e(5653),t.e(4266),t.e(237)]).then(t.bind(t,10608))).default,RouteLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4286)]).then(t.bind(t,40153))).default,SceneLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(9942),t.e(9238),t.e(5590),t.e(6935),t.e(632),t.e(7476)]).then(t.bind(t,57476))).default,StreamLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(5004)]).then(t.bind(t,88387))).default,SubtypeGroupLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(9942),t.e(908)]).then(t.bind(t,30359))).default,TileLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(4599),t.e(9157),t.e(6368),t.e(8636)]).then(t.bind(t,98636))).default,UnknownLayer:async()=>(await t.e(4166).then(t.bind(t,44166))).default,UnsupportedLayer:async()=>(await t.e(9296).then(t.bind(t,39296))).default,VectorTileLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9157),t.e(4325),t.e(9805),t.e(5481)]).then(t.bind(t,94756))).default,VoxelLayer:async()=>(await Promise.all([t.e(163),t.e(5653),t.e(9037),t.e(8865)]).then(t.bind(t,28865))).default,WFSLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(9469),t.e(1223),t.e(1423),t.e(4165),t.e(911),t.e(5546),t.e(3974)]).then(t.bind(t,12653))).default,WMSLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9790),t.e(5653),t.e(2462)]).then(t.bind(t,25906))).default,WMTSLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9971),t.e(5853)]).then(t.bind(t,55853))).default,WebTileLayer:async()=>(await Promise.all([t.e(163),t.e(4609),t.e(9971)]).then(t.bind(t,16199))).default}},33516:(e,r,t)=>{t.d(r,{Y:()=>l,h:()=>i});var a=t(17452),n=t(48522);function i(e){return{origin:"portal-item",url:(0,a.mN)(e.itemUrl),portal:e.portal||n.Z.getDefault(),portalItem:e,readResourcePaths:[]}}function l(e){return{origin:"portal-item",messages:[],writtenProperties:[],url:e.itemUrl?(0,a.mN)(e.itemUrl):null,portal:e.portal||n.Z.getDefault(),portalItem:e}}},18062:(e,r,t)=>{t.d(r,{$O:()=>b,Ok:()=>h,Q4:()=>w,XX:()=>I,load:()=>d});var a=t(20102),n=t(87085),i=t(66677),l=t(52104),s=t(48522),o=t(15235),c=t(33516),u=t(14661),y=t(40555),p=t(96187);async function d(e,r){const t=e.instance.portalItem;if(t&&t.id)return await t.load(r),function(e){const r=e.instance.portalItem;if(!r?.type||!e.supportedTypes.includes(r.type))throw new a.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r?.type,expectedType:e.supportedTypes.join(", ")})}(e),async function(e,r){const t=e.instance,n=t.portalItem;if(!n)return;const{url:i,title:s}=n,o=(0,c.h)(n);if("group"===t.type)return t.read({title:s},o),async function(e,r){let t;const{portalItem:n}=e;if(!n)return;const i=n.type,s=r.layerModuleTypeMap,o=(0,u._$)(n,"Oriented Imagery Layer")??!1;switch(i){case"Feature Service":t=o?s.OrientedImageryLayer:s.FeatureLayer;break;case"Stream Service":t=s.StreamLayer;break;case"Scene Service":t=s.SceneLayer;break;case"Feature Collection":t=s.FeatureLayer;break;default:throw new a.Z("portal:unsupported-item-type-as-group",`The item type '${i}' is not supported as a 'IGroupLayer'`)}let[c,y]=await Promise.all([t(),S(r)]),d=()=>c;if("Feature Service"===i){if(y=n.url?await b(y,n.url):{},I(y).length){const e=s.SubtypeGroupLayer,r=await e();d=e=>"SubtypeGroupLayer"===e.layerType?r:c}return m(e,d,y,await async function(e){const{layersJSON:r}=await(0,l.V)(e);if(!r)return null;const t=[...r.layers,...r.tables];return e=>t.find((r=>r.id===e.id))}(n.url))}return w(y)>0?m(e,d,y):async function(e,r){const{portalItem:t}=e;if(!t?.url)return;const a=await(0,p.T)(t.url);a&&m(e,r,{layers:a.layers?.map(f),tables:a.tables?.map(f)})}(e,d)}(t,e);i&&t.read({url:i},o);const d=await S(e,r);return d&&t.read(d,o),t.resourceReferences={portalItem:n,paths:o.readResourcePaths??[]},"subtype-group"!==t.type&&t.read({title:s},o),(0,y.y)(t,o)}(e,r)}function f(e){return{id:e.id,name:e.name}}function m(e,r,t,l){let s=t.layers||[];const c=t.tables||[];if("Feature Collection"===e.portalItem?.type&&(s.forEach((e=>{"Table"===e?.layerDefinition?.type&&c.push(e)})),s=s.filter((e=>"Table"!==e?.layerDefinition?.type))),"coverage"in t){const r=function(e){const{coverage:r}=e;if(!r)return null;const t=new URL(r);if(r.toLowerCase().includes("item.html")){const e=t.searchParams.get("id"),r=t.origin;return n.Z.fromPortalItem({portalItem:new o.default({id:e,url:r})})}if((0,i.B5)(r))return n.Z.fromArcGISServerUrl({url:r});throw new a.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(t);r&&e.add(r)}s.reverse().forEach((a=>{const n=L(e,r(a),t,a,l?.(a));e.add(n)})),c.reverse().forEach((a=>{const n=L(e,r(a),t,a,l?.(a));e.tables.add(n)}))}function L(e,r,t,a,n){const i=e.portalItem,l=new r({portalItem:i.clone(),layerId:a.id});if("sourceJSON"in l&&(l.sourceJSON=n),"subtype-group"!==l.type&&(l.sublayerTitleMode="service-name"),"Feature Collection"===i.type){const e={origin:"portal-item",portal:i.portal||s.Z.getDefault()};l.read(a,e);const r=t.showLegend;null!=r&&l.read({showLegend:r},e)}return l}async function S(e,r){if(!1===e.supportsData)return;const t=e.instance,a=t.portalItem;if(!a)return;let n=null;try{n=await a.fetchData("json",r)}catch(e){}if(function(e){return"stream"!==e.type&&"oriented-imagery"!==e.type&&"layerId"in e}(t)){let e=null,r=!0;if(n&&w(n)>0){if(null==t.layerId){const e=I(n);t.layerId="subtype-group"===t.type?e?.[0]:h(n)}e=function(e,r){const{layerId:t}=r,a=e.layers?.find((e=>e.id===t))||e.tables?.find((e=>e.id===t));return a&&function(e,r){return!("feature"===r.type&&"layerType"in e&&"SubtypeGroupLayer"===e.layerType||"subtype-group"===r.type&&!("layerType"in e))}(a,r)?a:null}(n,t),e&&(1===w(n)&&(r=!1),null!=n.showLegend&&(e.showLegend=n.showLegend))}return r&&"sublayerTitleMode"in t&&"service-name"!==t.sublayerTitleMode&&(t.sublayerTitleMode="item-title-and-service-name"),e}return n}async function b(e,r){if(null==e?.layers||null==e?.tables){const t=await(0,p.T)(r);(e=e||{}).layers=e.layers||t?.layers,e.tables=e.tables||t?.tables}return e}function h(e){const r=e.layers;if(r&&r.length)return r[0].id;const t=e.tables;return t&&t.length?t[0].id:null}function w(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function I(e){const r=[];return e?.layers?.forEach((e=>{"SubtypeGroupLayer"===e.layerType&&r.push(e.id)})),r}},14661:(e,r,t)=>{t.d(r,{$o:()=>u,Fj:()=>o,Kz:()=>y,Ss:()=>p,_$:()=>s,ck:()=>c,qj:()=>l});var a=t(44547),n=t(82971),i=t(40488);function l(e,r){if(!s(e,r)){const t=e.typeKeywords;t?t.push(r):e.typeKeywords=[r]}}function s(e,r){return!!e.typeKeywords?.includes(r)}function o(e){return s(e,y.HOSTED_SERVICE)}function c(e,r){const t=e.typeKeywords;if(t){const e=t.indexOf(r);e>-1&&t.splice(e,1)}}async function u(e){const r=e.clone().normalize();let t;if(r.length>1)for(const e of r)t?e.width>t.width&&(t=e):t=e;else t=r[0];return async function(e){const r=e.spatialReference;if(r.isWGS84)return e.clone();if(r.isWebMercator)return(0,i.Sx)(e);const t=n.Z.WGS84;return await(0,a.iQ)(r,t),(0,a.iV)(e,t)}(t)}const y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function p(e){const{portal:r,isOrgItem:t,itemControl:a}=e,n=r.user?.privileges;let i=!n||n.includes("features:user:edit"),l=!!t&&!!n?.includes("features:user:fullEdit");const s="update"===a||"admin"===a;return s?l=i=!0:l&&(i=!0),{features:{edit:i,fullEdit:l},content:{updateItem:s}}}},28008:(e,r,t)=>{t.d(r,{fromItem:()=>u,v:()=>y});var a=t(20102),n=t(84230),i=t(87344),l=t(15235),s=t(18062),o=t(14661),c=t(96187);async function u(e){!e.portalItem||e.portalItem instanceof l.default||(e={...e,portalItem:new l.default(e.portalItem)});const r=await async function(e){return await e.load(),async function(e){const r=e.className,t=i.T[r];return{constructor:await t(),properties:e.properties}}(await y(e))}(e.portalItem);return new(0,r.constructor)({portalItem:e.portalItem,...r.properties})}async function y(e){switch(e.type){case"Map Service":return async function(e){return await async function(e){return(await(0,c.T)(e.url)).tileInfo}(e)?{className:"TileLayer"}:{className:"MapImageLayer"}}(e);case"Feature Service":return async function(e){if((0,o._$)(e,"Oriented Imagery Layer"))return async function(e){return await e.load(),{className:"OrientedImageryLayer",properties:await e.fetchData()}}(e);const r=await p(e);if("object"==typeof r){const e={};return null!=r.id&&(e.layerId=r.id),{className:r.className||"FeatureLayer",properties:e}}return{className:"GroupLayer"}}(e);case"Feature Collection":return async function(e){await e.load();const r=(0,o._$)(e,"Map Notes"),t=(0,o._$)(e,"Markup");if(r||t)return{className:"MapNotesLayer"};if((0,o._$)(e,"Route Layer"))return{className:"RouteLayer"};const a=await e.fetchData();return 1===(0,s.Q4)(a)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return async function(e){const r=await p(e);if("object"==typeof r){const t={};let a;if(null!=r.id?(t.layerId=r.id,a=`${e.url}/layers/${r.id}`):a=e.url,e.typeKeywords?.length)for(const r of Object.keys(n.fb))if(e.typeKeywords.includes(r))return{className:n.fb[r]};const i=await(0,c.T)(a);return{className:n.fb[i?.layerType]||"SceneLayer",properties:t}}if(!1===r){const r=await(0,c.T)(e.url);return"Voxel"===r?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"}}return{className:"GroupLayer"}}(e);case"Image Service":return async function(e){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(r.includes("tiled imagery"))return{className:"ImageryTileLayer"};const t=await e.fetchData(),a=t?.layerType;if("ArcGISTiledImageServiceLayer"===a)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===a)return{className:"ImageryLayer"};const n=await(0,c.T)(e.url),i=n.cacheType?.toLowerCase(),l=n.capabilities?.toLowerCase().includes("tilesonly");return"map"===i||l?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:throw new a.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type})}}async function p(e){const r=e.url;if(!r||/\/\d+$/.test(r))return{};await e.load();const t=await e.fetchData();if("Feature Service"===e.type){const e=d(await(0,s.$O)(t,r));if("object"==typeof e){const r=(0,s.XX)(t);e.className=null!=e.id&&r.includes(e.id)?"SubtypeGroupLayer":"FeatureLayer"}return e}return(0,s.Q4)(t)>0?d(t):d(await(0,c.T)(r))}function d(e){return 1===(0,s.Q4)(e)&&{id:(0,s.Ok)(e)}}},40555:(e,r,t)=>{t.d(r,{y:()=>l});var a=t(66643),n=t(95330),i=t(20941);async function l(e,r,t){const l=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin);if(l&&"unique-value"===l.type&&l.styleOrigin){const s=await(0,a.q6)(l.populateFromStyle());if((0,n.k_)(t),!1===s.ok){const t=s.error;r&&r.messages&&r.messages.push(new i.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${t.message}`,{error:t,context:r})),e.clear("renderer",r?.origin)}}}},96187:(e,r,t)=>{t.d(r,{T:()=>n});var a=t(3172);async function n(e,r){const{data:t}=await(0,a.default)(e,{responseType:"json",query:{f:"json",...r?.customParameters,token:r?.apiKey}});return t}}}]);