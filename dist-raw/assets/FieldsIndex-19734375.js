import{aA as h,dC as F,dD as p}from"./index-ffb342b4.js";function f(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function n(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function a(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}class c{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const s=[];for(const i of e){const l=i==null?void 0:i.name,r=o(i==null?void 0:i.name);if(l&&r){const d=u(l);this._fieldsMap.set(l,i),this._fieldsMap.set(d,i),this._normalizedFieldsMap.set(r,i),s.push(d),f(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):h(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),!n(i)&&!a(i)&&(i.editable=i.editable==null||!!i.editable,i.nullable=i.nullable==null||!!i.nullable)}}s.sort(),this.uid=s.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)!n(e)&&!a(e)&&!e.nullable&&F(e)===void 0&&this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let s=this._fieldsMap.get(e);return s||(s=this._fieldsMap.get(u(e))??this._normalizedFieldsMap.get(o(e)),s&&this._fieldsMap.set(e,s),s)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const s=this.get(e);if(s)return s.name??void 0}}function u(t){return t.trim().toLowerCase()}function o(t){var e;return((e=p(t))==null?void 0:e.toLowerCase())??""}export{c as F};
