import{m as i}from"./index-ffb342b4.js";import{W as l}from"./color-3f29be9c.js";import{W as n,d as a,e as o}from"./WGLContainer-d2b18033.js";const c=(r,e)=>r.key.level-e.key.level!==0?r.key.level-e.key.level:r.key.row-e.key.row!==0?r.key.row-e.key.row:r.key.col-e.key.col;class f extends n{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(c),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:s}=e,t=super.createRenderParams(e);return t.requiredLevel=this._tileInfoView.getClosestInfoForScale(s.scale).level,t.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(s.scale),t}prepareRenderPasses(e){const s=super.prepareRenderPasses(e);return s.push(e.registerRenderPass({name:"stencil",brushes:[a],drawPhase:l.DEBUG|l.MAP|l.HIGHLIGHT,target:()=>this.getStencilTarget()})),i("esri-tiles-debug")&&s.push(e.registerRenderPass({name:"tileInfo",brushes:[o],drawPhase:l.DEBUG,target:()=>this.children})),s}getStencilTarget(){return this.children}setStencilReference(e){let s=1;for(const t of this.children)t.stencilRef=s++}}export{f as T};
