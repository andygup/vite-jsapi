import{fp as h,cv as I}from"./index-468a9268.js";async function x(e,d=e.popupTemplate){var f,a;if(d==null)return[];const n=await d.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:c}=d,{objectIdField:t,typeIdField:u,globalIdField:s,relationships:p}=e;if(n.includes("*"))return["*"];const r=c?await h(e):[],i=I(e.fieldsIndex,[...n,...r]);return u&&i.push(u),i&&t&&((f=e.fieldsIndex)!=null&&f.has(t))&&!i.includes(t)&&i.push(t),i&&s&&((a=e.fieldsIndex)!=null&&a.has(s))&&!i.includes(s)&&i.push(s),p&&p.forEach(F=>{var o;const{keyField:l}=F;i&&l&&((o=e.fieldsIndex)!=null&&o.has(l))&&!i.includes(l)&&i.push(l)}),i}function g(e,d){return e.popupTemplate?e.popupTemplate:d!=null&&d.defaultPopupTemplateEnabled&&e.defaultPopupTemplate!=null?e.defaultPopupTemplate:null}export{x as a,g};
